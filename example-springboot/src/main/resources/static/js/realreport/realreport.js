/** 
* RealReport v1.4.0
* commit 8812366

* Copyright (C) 2013-2022 WooriTech Inc.
	https://real-report.com
* All Rights Reserved.
*/

var RealReport = (function (exports) {
    'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */

    /* global Reflect, Promise */
    var extendStatics$1 = function (d, b) {
      extendStatics$1 = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
      };

      return extendStatics$1(d, b);
    };

    function __extends$1(d, b) {
      if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
      extendStatics$1(d, b);

      function __() {
        this.constructor = d;
      }

      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    var __assign$1 = function () {
      __assign$1 = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
          s = arguments[i];

          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }

        return t;
      };

      return __assign$1.apply(this, arguments);
    };
    function __awaiter$1(thisArg, _arguments, P, generator) {
      function adopt(value) {
        return value instanceof P ? value : new P(function (resolve) {
          resolve(value);
        });
      }

      return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) {
          try {
            step(generator.next(value));
          } catch (e) {
            reject(e);
          }
        }

        function rejected(value) {
          try {
            step(generator["throw"](value));
          } catch (e) {
            reject(e);
          }
        }

        function step(result) {
          result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
        }

        step((generator = generator.apply(thisArg, _arguments || [])).next());
      });
    }
    function __generator$1(thisArg, body) {
      var _ = {
        label: 0,
        sent: function () {
          if (t[0] & 1) throw t[1];
          return t[1];
        },
        trys: [],
        ops: []
      },
          f,
          y,
          t,
          g;
      return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
      }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
        return this;
      }), g;

      function verb(n) {
        return function (v) {
          return step([n, v]);
        };
      }

      function step(op) {
        if (f) throw new TypeError("Generator is already executing.");

        while (_) try {
          if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
          if (y = 0, t) op = [op[0] & 2, t.value];

          switch (op[0]) {
            case 0:
            case 1:
              t = op;
              break;

            case 4:
              _.label++;
              return {
                value: op[1],
                done: false
              };

            case 5:
              _.label++;
              y = op[1];
              op = [0];
              continue;

            case 7:
              op = _.ops.pop();

              _.trys.pop();

              continue;

            default:
              if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                _ = 0;
                continue;
              }

              if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                _.label = op[1];
                break;
              }

              if (op[0] === 6 && _.label < t[1]) {
                _.label = t[1];
                t = op;
                break;
              }

              if (t && _.label < t[2]) {
                _.label = t[2];

                _.ops.push(op);

                break;
              }

              if (t[2]) _.ops.pop();

              _.trys.pop();

              continue;
          }

          op = body.call(thisArg, _);
        } catch (e) {
          op = [6, e];
          y = 0;
        } finally {
          f = t = 0;
        }

        if (op[0] & 5) throw op[1];
        return {
          value: op[0] ? op[1] : void 0,
          done: true
        };
      }
    }

    // Globals.ts
    // 2020. 06. 02. created by woori
    // -----------------------------------------------------------------------------
    // Copyright (c) 2019 Wooritech Inc.
    // All rights reserved.
    ////////////////////////////////////////////////////////////////////////////////
    // export let $_doc = document;
    // export let $_win = window;
    const $_instanceOf=function(elt,clazz){return typeof elt==='object'&&Object.prototype.toString.call(elt).indexOf(clazz)>=0;};if(!('remove'in Element.prototype)){Element.prototype.remove=function(){if(this.parentNode){this.parentNode.removeChild(this);}};}////////////////////////////////////////////////////////////////////////////////
    // Base.ts
    // 2020. 06. 02. created by woori
    // -----------------------------------------------------------------------------
    // Copyright (c) 2020 Wooritech Inc.
    // All rights reserved.
    ////////////////////////////////////////////////////////////////////////////////
    let $$_hash=0;/** @internal */class Base{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.$_hash=$$_hash++;this.$_disposed=false;this.$_disposing=false;}dispose(){if(!this.$_disposed&&!this.$_disposing){this.$_disposed=true;this.$_disposing=true;this._doDispose();}return null;}_doDispose(){}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get disposing(){return this.$_disposing;}get hash(){return this.$_hash;}get shash(){return String(this.$_hash);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    isMe(hash){return hash==this.$_hash;}$_getters(proto){// let getters = proto.$$_getters_$$;
    // if (!getters) {
    //     getters = proto.$$_getters_$$ = [];
    const getters=[];const props=Object.getOwnPropertyNames(proto);for(let i=0,cnt=props.length;i<cnt;i++){const prop=props[i];const p=Object.getOwnPropertyDescriptor(proto,prop);if(p&&p.get){getters.push(prop);}}return getters;}/**
         * true를 리턴하면 assign()이 호출되지 않는다.
         */doAssignSimple(source){return false;}assignFrom(source){let proto=Object.getPrototypeOf(this);if(source instanceof Base){let pSource=Object.getPrototypeOf(source);let props={};while(pSource&&pSource.constructor!=Base){//let descs = Object.getOwnPropertyDescriptors(pSource);
    //let descs = Object.getOwnPropertyNames(pSource);
    let descs=this.$_getters(pSource);//console.log(descs);
    for(let i=0,len=descs.length;i<len;i++){const k=descs[i];if(!(k in props)){props[k]=null;let p=Object.getOwnPropertyDescriptor(proto,k);if(p){if(p.set){const d=Object.getOwnPropertyDescriptor(pSource,k);const g=d&&d.get;if(g){p.set.call(this,g.call(source));}}}else {let proto2=Object.getPrototypeOf(proto);while(proto2){let p=Object.getOwnPropertyDescriptor(proto2,k);if(p){if(p.set){const d=Object.getOwnPropertyDescriptor(pSource,k);const g=d&&d.get;if(g){p.set.call(this,g.call(source));}}proto2=null;}else {proto2=Object.getPrototypeOf(proto2);}}}}}pSource=Object.getPrototypeOf(pSource);}}else if(!this.doAssignSimple(source)){for(let k in source){let p=Object.getOwnPropertyDescriptor(proto,k);if(p){if(p.set){p.set.call(this,source[k]);}}else {let proto2=Object.getPrototypeOf(proto);while(proto2){let p=Object.getOwnPropertyDescriptor(proto2,k);if(p){if(p.set){p.set.call(this,source[k]);}proto2=null;}else {proto2=Object.getPrototypeOf(proto2);}}}}}}extend(source){for(let k in source){if(k in this){this[k]=source[k];}}}toProxy(){const proxy={};let proto=Object.getPrototypeOf(this);while(proto&&proto.constructor!=Base){let descs=this.$_getters(proto);for(let i=0,len=descs.length;i<len;i++){const k=descs[i];let p=Object.getOwnPropertyDescriptor(proto,k);if(p){if(p.get&&p.set){proxy[k]=p.get.call(this);}}else {let proto2=Object.getPrototypeOf(proto);while(proto2){let p=Object.getOwnPropertyDescriptor(proto2,k);if(p){if(p.get&&p.set){proxy[k]=p.get.call(this);}proto2=null;}else {proto2=Object.getPrototypeOf(proto2);}}}}proto=Object.getPrototypeOf(proto);}return proxy;}assignProps(target,props){let all=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;target=target||{};props.forEach(p=>{const v=this[p];if(all||v!==void 0){target[p]=v;}});return target;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    toString(){return this.constructor.name;}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class EventAware extends Base{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){super();//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._listeners=[];}_doDispose(){for(let l of this._listeners){this.removeListener(l);}this._listeners=null;return super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get listenerCount(){return this._listeners.length;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    addListener(listener){if(listener!=null&&this._listeners.indexOf(listener)<0){this._listeners.push(listener);}return this;}removeListener(listener){// dispose된 상태에서 호출될 수 있다.
    if(this._listeners&&listener!=null){const i=this._listeners.indexOf(listener);if(i>=0){this._listeners.splice(i,1);}}return this;}isListener(listener){return this._listeners&&this._listeners.indexOf(listener)>=0;}clearListener(){for(let l of this._listeners){this.removeListener(l);}this._listeners.length=0;}fireEvent(event){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}let args2=Array.prototype.slice.call(arguments,0);args2[0]=this;for(let i=0,cnt=this._listeners.length;i<cnt;i++){let listener=this._listeners[i];let callback=listener[event];callback&&callback.apply(listener,args2);}}fireConfirmEvent(event){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2];}let args2=Array.prototype.slice.call(arguments,0);args2[0]=this;for(let i=0,cnt=this._listeners.length;i<cnt;i++){let listener=this._listeners[i];let callback=listener[event];if(callback){var ret=callback.apply(listener,args2);if(typeof ret==="boolean"&&!ret){return false;}}}return true;}fireMessageEvent(event){for(var _len3=arguments.length,args=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++){args[_key3-1]=arguments[_key3];}let args2=Array.prototype.slice.call(arguments,0);args2[0]=this;for(let i=0,cnt=this._listeners.length;i<cnt;i++){let listener=this._listeners[i];let callback=listener[event];if(callback){const ret=callback.apply(listener,args2);if(typeof ret==="string"&&ret){return ret;}}}return null;}fireObjectEvent(event){for(var _len4=arguments.length,args=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++){args[_key4-1]=arguments[_key4];}let args2=Array.prototype.slice.call(arguments,0);args2[0]=this;for(let i=0,cnt=this._listeners.length;i<cnt;i++){let listener=this._listeners[i];let callback=listener[event];if(callback){const ret=callback.apply(listener,args2);if(ret!=null){return ret;}}}return null;}}////////////////////////////////////////////////////////////////////////////////
    // Point.ts
    // 2020. 06. 02. created by woori
    // -----------------------------------------------------------------------------
    // Copyright (c) 2020 Wooritech Inc.
    // All rights reserved.
    ////////////////////////////////////////////////////////////////////////////////
    /** @internal */class Point{//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){let x=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let y=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this.x=x;this.y=y;}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // static readonly EMPTY = new Point();
    static empty(){return new Point();}static create(){let x=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let y=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return new Point(x,y);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** isEmpty */get isEmpty(){return this.x===0||this.y===0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    clone(){return new Point(this.x,this.y);}equals(sz){return sz===this||sz&&this.x===sz.x&&this.y===sz.y;}setEmpty(){this.x=this.y=0;return this;}set(x,y){this.x=x;this.y=y;return this;}round(){const pt=this.clone();pt.x>>>=0;pt.y>>>=0;return pt;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    toString(){return "{x: "+this.x+", y: "+this.y+"}";}}////////////////////////////////////////////////////////////////////////////////
    // Rectangle.ts
    // 2020. 06. 02. created by woori
    // -----------------------------------------------------------------------------
    // Copyright (c) 2020 Wooritech Inc.
    // All rights reserved.
    ////////////////////////////////////////////////////////////////////////////////
    /** @internal */class Rectangle{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){let x=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let y=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;let width=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;let height=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;this.x=x;this.y=y;this.width=width;this.height=height;}static create(x,y,width,height){return new Rectangle(x,y,width,height);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** left */get left(){return this.x;}set left(value){const dx=value-this.x;this.x+=dx;this.width-=dx;}/** right */get right(){return this.x+this.width;}set right(value){const dx=value-(this.x+this.width);this.width+=dx;}/** top */get top(){return this.y;}set top(value){const dy=value-this.y;this.y+=dy;this.height-=dy;}/** bottom */get bottom(){return this.y+this.height;}set bottom(value){const dy=value-(this.y+this.height);this.height+=dy;}/** isEmpty */get isEmpty(){return this.width===0||this.height===0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    clone(){return new Rectangle(this.x,this.y,this.width,this.height);}getInner(){return new Rectangle(0,0,this.width,this.height);}equals(r){return r===this||r&&this.x===r.x&&this.y===r.y&&this.width===r.width&&this.height===r.height;}leftBy(delta){this.x+=delta;this.width-=delta;return this;}rightBy(delta){this.width+=delta;return this;}topBy(delta){this.y+=delta;this.height-=delta;return this;}bottomBy(delta){this.height+=delta;return this;}shrink(dx,dy){this.width-=dx;this.height-=dy;return this;}expand(dx,dy){this.width+=dx;this.height+=dy;return this;}contains(x,y){return x>=this.x&&x<=this.x+this.width&&y>=this.y&&y<=this.y+this.height;}setEmpty(){this.width=this.height=0;return this;}move(){let x=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let y=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this.x=x;this.y=y;return this;}set(x,y,width,height){this.x=x;this.y=y;this.width=width;this.height=height;return this;}setWidth(value){this.width=value;return this;}copy(r){this.x=r.x;this.y=r.y;this.width=r.width;this.height=r.height;return this;}copyHorz(r){this.x=r.x;this.width=r.width;return this;}copyVert(r){this.y=r.y;this.height=r.height;return this;}inflate(){let left=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let top=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;let right=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;let bottom=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;top=top!==undefined?top:left;right=right!==undefined?right:left;bottom=bottom!==undefined?bottom:top;if(left)this.left=this.x-left;if(top)this.top=this.y-top;if(right)this.right=this.right+right;if(bottom)this.bottom=this.bottom+bottom;return this;}translate(dx,dy){this.x+=dx;this.y+=dy;return this;}round(){const r=this.clone();r.x>>>=0;r.y>>>=0;r.width>>>=0;r.height>>>=0;return r;}union(r){const r2=this.clone();r2.left=Math.min(this.x,r.x);r2.right=Math.max(this.right,r.right);r2.top=Math.min(this.y,r.y);r2.bottom=Math.max(this.bottom,r.bottom);return r2;}normalize(){if(this.width<0){this.x-=this.width;this.width*=-1;}if(this.height<0){this.y-=this.height;this.height*=-1;}return this;}intersects(r){return this.x<=r.right&&r.x<=this.right&&this.y<=r.bottom&&r.y<=this.bottom;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    toString(){return "{x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}";}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    Rectangle.Temp=new Rectangle();////////////////////////////////////////////////////////////////////////////////
    // Types.ts
    // 2020. 06. 02. created by woori
    // -----------------------------------------------------------------------------
    // Copyright (c) 2020 Wooritech Inc.
    // All rights reserved.
    ////////////////////////////////////////////////////////////////////////////////
    const T_MODEL='_m_';const T_ROWVIEW='$_rvu';const T_HEIGHT='$_h';const T_WIDTH='$_w';const T_INDEX='$_idx';const T_GROUP='$_grp';const T_ANCHOR='$_anc';const T_ANCHOR_POS='$anp';const T_SVG='_svg_';const T_ALIGN='_align';const T_PAGE='_page_';const T_FIELD='$_fld';var Align;(function(Align){Align["LEFT"]="left";Align["CENTER"]="center";Align["RIGHT"]="right";})(Align||(Align={}));var VerticalAlign;(function(VerticalAlign){VerticalAlign["TOP"]="top";VerticalAlign["MIDDLE"]="middle";VerticalAlign["BOTTOM"]="bottom";})(VerticalAlign||(VerticalAlign={}));var PrintUnit;(function(PrintUnit){PrintUnit["PIXEL"]="px";PrintUnit["POINT"]="pt";PrintUnit["INCH"]="in";PrintUnit["CENTCH"]="cm";PrintUnit["MILLI"]="mm";})(PrintUnit||(PrintUnit={}));const $_pixeler={'px':v=>{return v;},'pt':v=>{return v*Dimension.HTMLDPI/72;},'in':v=>{return v*Dimension.HTMLDPI;},'mm':v=>{return v*Dimension.HTMLDPI/25.4;},'cm':v=>{return v*Dimension.HTMLDPI/2.54;}};const $_unpixeler={'px':v=>{return v;},'pt':v=>{return v*72/Dimension.HTMLDPI;},'in':v=>{return v/Dimension.HTMLDPI;},'mm':v=>{return v*25.4/Dimension.HTMLDPI;},'cm':v=>{return v*2.54/Dimension.HTMLDPI;}};const getPixelsByUnits=function(unit,len){return $_pixeler[unit](len);};const getUnitsByPixels=function(unit,pixels){return $_unpixeler[unit](pixels);};/**
     * 경고성 에러.
     * 발생 시 프로그램을 중지하지 않고 경고를 표시한다.
     */class AlertError extends Error{}const getLinkedSlice=function(list,item){const ret=[item];const items=list.sort((item1,item2)=>item1.index-item2.index);let idx=item.index;const c=items.indexOf(item);for(let j=c+1;j<items.length;j++,idx++){if(items[j].index>idx+1){break;}ret.push(items[j]);}idx=item.index;for(let j=c-1;j>=0;j--,idx--){if(items[j].index>idx+1){break;}ret.unshift(items[j]);}return ret;};/**
     * 상수로 다룬다.
     */class Dimension{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(value){//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._unit=PrintUnit.PIXEL;this._value=NaN;this._fixed=true;if(typeof value==='number'){this._value=value;}else if(typeof value==='string'){const s=value.trim();this._value=parseFloat(value);if(!isNaN(this._value)){if(s.endsWith('%')){this._fixed=false;}else if(s.endsWith('pt')){this._unit=PrintUnit.POINT;}else if(s.endsWith('in')){this._unit=PrintUnit.INCH;}else if(s.endsWith('mm')){this._unit=PrintUnit.MILLI;}else if(s.endsWith('cm')){this._unit=PrintUnit.CENTCH;}}}}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static create(str){if(str==null)return null;if(typeof str==='string'){str=str.trim();if(!str)return null;}return new Dimension(str);}static createDimensions(str){if(str&&(str=str.trim())){const arr=str.split(',');const dims=[];for(let s of arr){dims.push(s?new Dimension(s):null);}return dims;}}static equals(d1,d2){if(d1===d2)return true;return d1&&d2&&d1.equals(d2);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get fixed(){return this._fixed;}get unit(){return this._unit;}get value(){return this._value;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    clone(){const dim=new Dimension(undefined);dim._fixed=this._fixed;dim._unit=this._unit;dim._value=this._value;return dim;}equals(other){if(other===this)return true;if(other instanceof Dimension){return other._fixed==this._fixed&&other._unit==this._unit&&other._value==this._value;}return false;}toString(){if(isNaN(this._value)){return 'NaN';}else if(this._fixed){return this._value+this._unit;}else {return this._value+'%';}}getValue(){if(isNaN(this._value)){return 'NaN';}else if(this._fixed){return this.$_getPixel();}else {return this._value+'%';}}getPixel(domain){if(!isNaN(this._value)){let v=this.$_getPixel();if(!this._fixed){v=domain*v/100;}return v;}return NaN;}getFixedPixel(){if(!isNaN(this._value)){return this.$_getPixel();}return NaN;}$_getPixel(){return $_pixeler[this._unit](this._value);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //static HTMLDPI = _isMac ? 72 : 96;
    Dimension.HTMLDPI=96;/**
     * 상수로 다룬다.
     */class DimensionCollection{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(str){//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._dims=[];this._relative=0;this._fixed=0;this._dirty=false;if(str&&(str=str.trim())){const arr=str.split(',');const dims=this._dims=[];for(let i=0;i<arr.length;i++){const s=arr[i];const dim=s?new Dimension(s):null;dims.push(dim);}this.$_refresh();}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get count(){return this._dims.length;}get relative(){return this._relative>0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    get(index){return this._dims[index];}set(index,dim){if(dim!==this._dims[index]){this._dims[index]=dim;this._dirty=true;}}/**
         * '%' 이면 domain에서 fixed 크기들을 제외한 크기에 대한 상대 크기.
         * '%'의 전체 함이 100을 넘으면 100으로 scaling한다.
         * 절대크기는 그 크기대로.
         * NaN이거나 설정하지 않은 크기는 위의 크기들을 제외한 나머지 크기의 균등분으로
         * 최소 min으로 설정된다.
         * 전체 합이 domain보다 크거나 작을 수 있다.
         */ // TODO '%'가 존재하거나 고정 크기 합이 domain 이상이면 minSize 반영되지 않는다.
    getSizes(count,domain,minSize){let truncate=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;this._dirty&&this.$_refresh();const dims=this._dims;const vals=this._values;const sizes=[];const min=minSize?Math.max(0,minSize.getPixel(domain)||0):0;let fixed=0;let percent=0;let remainders=0;for(let i=0,cnt=Math.min(count,dims.length);i<cnt;i++){if(dims[i]){if(!dims[i].fixed){percent+=Math.max(0,vals[i]);}else if(!isNaN(vals[i])){fixed+=Math.max(0,vals[i]);}}}this._dims.forEach((dim,i)=>{const v=this._values[i];if(isNaN(v)){sizes.push(NaN);}else if(dim.fixed){sizes.push(Math.max(min,v));}else if(!isNaN(domain)){let v2=(domain-fixed)*v/percent;let v3=Math.floor(v2);remainders+=v2-v3;if(remainders>=1){v3++;remainders--;}sizes.push(Math.max(min,truncate?v3:v2));}else {sizes.push(NaN);}});let sum=0;let n=0;for(let i=0;i<count;i++){const v=sizes[i];if(isNaN(v)){n++;}else {sum+=v;}}if(n>0&&!isNaN(domain)){const sz=Math.max(0,(domain-sum)/n);for(let i=0;i<count;i++){if(isNaN(sizes[i])){sizes[i]=Math.max(min,sz);}}}return sizes;}getSize(index,domain){const dim=this._dims[index];if(dim){const v=this._values[index];if(isNaN(v));else if(dim.fixed){return v;}else {return Math.max(0,(domain-this._fixed)*v/this._relative);}}return NaN;}changeSize(count,index,delta,domain,minWidth){if(delta===0)return;this.getSizes(count,domain,minWidth);if(delta>0);else {delta-=delta;}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_refresh(){const vals=this._values=[];for(let dim of this._dims){if(dim){if(dim.fixed){const v=dim.$_getPixel();vals.push(v);this._fixed+=v;}else {vals.push(dim.value);this._relative+=dim.value;}}else {vals.push(NaN);}}this._dirty=false;}$_init(dims){this._dims=dims.slice();this.$_refresh();}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    DimensionCollection.Empty=new DimensionCollection(null);var PageBreakMode;(function(PageBreakMode){PageBreakMode["NONE"]="none";// // data band의 출력이 페이지를 넘기는 경우 다음 페이지에서 새로 시작한다.
    // BAND = 'band',
    // 아이템을 출력하기 전에 페이지를 나눈다.
    PageBreakMode["BEFORE"]="before";// 아이템을 출력한 후 페이지를 나눈다.
    PageBreakMode["AFTER"]="after";// 아이템을 출력 전후로 페이지를 나눈다.
    PageBreakMode["BOTH"]="both";})(PageBreakMode||(PageBreakMode={}));var EditingKeyCode;(function(EditingKeyCode){EditingKeyCode["Z"]="KeyZ";EditingKeyCode["Y"]="KeyY";EditingKeyCode["C"]="KeyC";EditingKeyCode["V"]="KeyV";EditingKeyCode["X"]="KeyX";EditingKeyCode["DELETE"]="Delete";EditingKeyCode["BACK"]="Backspace";EditingKeyCode["TAB"]="Tab";EditingKeyCode["HOME"]="Home";EditingKeyCode["END"]="End";EditingKeyCode["UP"]="ArrowUp";EditingKeyCode["DOWN"]="ArrowDown";EditingKeyCode["LEFT"]="ArrowLeft";EditingKeyCode["RIGHT"]="ArrowRight";EditingKeyCode["A"]="KeyA";EditingKeyCode["_0"]="Digit0";EditingKeyCode["EQUAL"]="Equal";EditingKeyCode["MINUS"]="Minus";})(EditingKeyCode||(EditingKeyCode={}));var ResizeDirection;(function(ResizeDirection){ResizeDirection["LEFT"]="left";ResizeDirection["RIGHT"]="right";ResizeDirection["TOP"]="top";ResizeDirection["BOTTOM"]="bottom";ResizeDirection["TOP_LEFT"]="topLeft";ResizeDirection["BOTTOM_RIGHT"]="bottomRight";ResizeDirection["TOP_RIGHT"]="topRight";ResizeDirection["BOTTOM_LEFT"]="bottomLeft";})(ResizeDirection||(ResizeDirection={}));(function(ResizeDirection){function isLeft(dir){return dir===ResizeDirection.LEFT||dir===ResizeDirection.TOP_LEFT||dir===ResizeDirection.BOTTOM_LEFT;}ResizeDirection.isLeft=isLeft;function isTop(dir){return dir===ResizeDirection.TOP||dir===ResizeDirection.TOP_LEFT||dir===ResizeDirection.TOP_RIGHT;}ResizeDirection.isTop=isTop;function isEdge(dir){return dir===ResizeDirection.TOP_LEFT||dir===ResizeDirection.BOTTOM_RIGHT||dir===ResizeDirection.TOP_RIGHT||dir===ResizeDirection.BOTTOM_LEFT;}ResizeDirection.isEdge=isEdge;function isIn(dir){for(var _len5=arguments.length,dirs=new Array(_len5>1?_len5-1:0),_key5=1;_key5<_len5;_key5++){dirs[_key5-1]=arguments[_key5];}for(let d of dirs){if(d===dir)return true;}}ResizeDirection.isIn=isIn;})(ResizeDirection||(ResizeDirection={}));var ReportDataType;(function(ReportDataType){ReportDataType["SIMPLE"]="simple";ReportDataType["BAND"]="band";})(ReportDataType||(ReportDataType={}));var ReportDataErrorMessage;(function(ReportDataErrorMessage){ReportDataErrorMessage["DATA_FORMAT_IS_INCORRECT"]="\uB370\uC774\uD130\uC758 \uD615\uC2DD\uC774 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.";})(ReportDataErrorMessage||(ReportDataErrorMessage={}));////////////////////////////////////////////////////////////////////////////////
    const _isMac=navigator.platform.toUpperCase().indexOf('MAC')>=0;const _isOpera=!!window["opera"]||navigator.userAgent.indexOf(' OPR/')>=0;//const _isFirefox = typeof InstallTrigger !== 'undefined';   // Firefox 1.0+
    const _isWhale=!!window["whale"];// whale은 체크만하고 처리하지는 않는다. 
    const _isChrome=!!window["chrome"]&&!_isOpera;// Chrome 1+
    const _isFirefox=typeof window["InstallTrigger"]!=='undefined';// Firefox 1.0+
    const _isSafari=Object.prototype.toString.call(HTMLElement).indexOf('Constructor')>0||!_isChrome&&!_isOpera&&navigator.userAgent.indexOf("Safari")>=0;const _isWinSafari=_isSafari&&(navigator.platform=="Win32"||navigator.userAgent.indexOf("Windows")>=0);const _isIE=/*@cc_on!@*/!!document["documentMode"];// At least IE6
    const _isEdge=navigator.userAgent.toLowerCase().indexOf('edge/')>=0;// MS Edge 
    const _isiOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window["MSStream"];// iOS
    const _isChromiumEdge=navigator.userAgent.toLowerCase().indexOf('edg/')>=0&&navigator.userAgent.toLowerCase().indexOf('chrome/')>=0;const _ieVer=function(){let undef,v=3,div=document.createElement('div'),all=div.getElementsByTagName('i');while(div.innerHTML='<!--[if gt IE '+ ++v+']><i></i><![endif]-->',all[0]);return v>4?v:undef;}();const _ieOld=_ieVer!==undefined&&_ieVer<=9;const _ieLeg=_ieVer!==undefined&&_ieVer<=8;const _ieTen=navigator.appVersion.indexOf("MSIE 10")!==-1;navigator.appVersion.indexOf("MSIE 9")!==-1;const __epoch=new Date().getTime();const xml_chars={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'};let $$_mobile=undefined;let $$_chkMob=undefined;const ZWSP='&#8203';if(!String.prototype.startsWith){String.prototype.startsWith=function(search,pos){return this.substr(!pos||pos<0?0:+pos,search.length)===search;};}if(!String.prototype.endsWith){String.prototype.endsWith=function(searchString,position){let subjectString=this.toString();if(typeof position!=='number'||!isFinite(position)||Math.floor(position)!==position||position>subjectString.length){position=subjectString.length;}position-=searchString.length;let lastIndex=subjectString.indexOf(searchString,position);return lastIndex!==-1&&lastIndex===position;};}// for constructor.name in ie
    if(Function.prototype.name===undefined){Object.defineProperty(Function.prototype,'name',{get:function(){if(!this.__name){this.__name=this.toString().split('(',1)[0].split(' ')[1];}return this.__name;}});}Number.isNaN=Number.isNaN||function(v){return v!==v;};function getWin(elt){return elt&&elt.ownerDocument&&(elt.ownerDocument.defaultView||elt.ownerDocument["parentWindow"]);}function getDoc(elt){return elt&&elt.ownerDocument;}function getDocWin(doc){return doc.defaultView||doc["parentWindow"];}class Utils{// static $$_activeGrid: any;
    static stopEvent(e){let immediate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e.preventDefault){e.preventDefault();e.stopPropagation();}else {e.returnValue=false;}immediate&&e.stopImmediatePropagation();}static setDebugging(trace,debug,key){Utils.$$_trace=trace;Utils.$$_debugging=debug;Utils.$$_keyLog=key;}static isDebugging(){return Utils.$$_debugging;// return globalRealGridInfo.license == LicenseType.Developer;
    }static isTrace(){return this.$$_trace;}static log(text){for(var _len6=arguments.length,args=new Array(_len6>1?_len6-1:0),_key6=1;_key6<_len6;_key6++){args[_key6-1]=arguments[_key6];}Utils.isDebugging()&&console.log(text,args);}static keyLog(text){for(var _len7=arguments.length,args=new Array(_len7>1?_len7-1:0),_key7=1;_key7<_len7;_key7++){args[_key7-1]=arguments[_key7];}Utils.$$_keyLog&&console.log(text,args);}static trace(text){for(var _len8=arguments.length,args=new Array(_len8>1?_len8-1:0),_key8=1;_key8<_len8;_key8++){args[_key8-1]=arguments[_key8];}Utils.isTrace()&&console.log(text,args);}static getErrorStack(error){const stack=error.stack;if(stack){return stack.split('\n').map(line=>line+'<br/>');}return '';}static getBaseClassName(obj){return Object.getPrototypeOf(obj.constructor).name;}static getBaseCtor(obj){return Object.getPrototypeOf(obj.constructor).$_ctor;}static isObject(v){return v&&typeof v==='object'&&!Array.isArray(v);}static isObjectNotEmpty(v){return this.isObject(v)&&Object.keys(v).length!==0;}static isArray(v){return Array.isArray(v);}static makeArray(v){let force=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(v!=null){return Array.isArray(v)?v:[v];}else if(force){return [];}}static getIntArray(count){let start=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;const arr=[];for(let i=start,end=start+count;i<end;i++){arr.push(i);}return arr;}static isValueArray(arr){if(Array.isArray(arr)){for(let i=arr.length-1;i>=0;i--){if(arr[i]!=null&&typeof arr[i]==='object')return false;}return true;}}// static toArray(obj: any): Array<any> {
    //     return obj !== undefined && obj !== null ? (Array.isArray(obj) ? obj : (typeof obj.length !== "number" || obj.split || obj.setInterval || obj.call ? [obj] : Array.prototype.slice.call(obj))) : [];
    // }
    static toArray(v){if(Array.isArray(v))return v;if(v!==undefined&&v!==null)return [v];return null;}static push(arr,items){if(items&&items.length>0){for(let i=0,n=items.length;i<n;i++){arr.push(items[i]);}}}static isDefined(v){return v!==void 0&&v!==null;}static isNotDefined(v){return v===void 0||v===null;}static isNumber(value){return typeof value==="number";}static isValidNumber(value){return typeof value==='number'&&!isNaN(value)&&isFinite(value);}static toNumber(value){let def=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return isNaN(value)?def:+value;}static toStrOrNum(value){return isNaN(value)?value:+value;}static getEnumValues(type){return Object.keys(type).map(key=>type[key]);}static compareText(s1,s2){let ignoreCase=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;s1=s1||'';s2=s2||'';if(ignoreCase){s1=s1.toLocaleLowerCase();s2=s2.toLocaleLowerCase();}return s1>s2?1:s1<s2?-1:0;}static getTimeF(){return new Date().getTime()/1000;}static getTimer(){return new Date().getTime()-__epoch;}static isWhiteSpace(s){return !s||!s.trim();}static pad(value,len,c){len=Math.max(len||2,1);c=c||'0';return new Array(len-String(value).length+1).join(c)+value;}static pad16(value,len,c){len=Math.max(len||2,1);c=c||'0';return new Array(len-value.toString(16).length+1).join(c)+value.toString(16);}static pick(){const len=arguments.length;let v;for(let i=0;i<len;i++){v=i<0||arguments.length<=i?undefined:arguments[i];if(v!==undefined&&v!==null){return v;}}return undefined;}static pickNum(){for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++){args[_key9]=arguments[_key9];}const len=args.length;for(let i=0;i<len;i++){if(!isNaN(args[i])&&args[i]!==null)return args[i];}return NaN;}static included(value){const len=arguments.length<=1?0:arguments.length-1;for(let i=0;i<len;i++){if((i+1<1||arguments.length<=i+1?undefined:arguments[i+1])==value){return true;}}return false;}static compareTextValue(v1,v2,caseSensitive,partialMatch){if(v1===v2){return true;}let s1=String(v1);let s2=v2==null?undefined:String(v2);if(!s1&&!s2){return true;}if(!s1||!s2){return false;}if(!caseSensitive){s1=s1.toLowerCase();s2=s2.toLowerCase();}if(partialMatch){return s2.indexOf(s1)>=0;}else {return s1==s2;}}static cast(obj,clazz){return obj instanceof clazz?obj:null;}static irandom(min,max){if(max!==undefined){const v1=Math.floor(min);const v2=Math.floor(max);return Math.floor(Math.random()*(v2-v1)+v1);}else {const v=Math.floor(min);return Math.floor(Math.random()*v);}}static brandom(){return Math.random()>0.5?true:false;}static srandom(min,max){let s='';const len=this.irandom(min,max);for(let i=0;i<len;i++){s+=String.fromCharCode(this.irandom(97,123));}return s;}static erandom(clazz){const vals=Object.values(clazz);return vals[this.irandom(vals.length)];}static arandom(arr){return arr[this.irandom(arr.length)];}static iarandom(min,max,count){const vals=[];for(let i=0;i<count;i++)vals.push(Utils.irandom(min,max));return vals;}static alert(message){window.alert(message);}static throwAlert(message){throw new AlertError(message);}static toInt(v,radix){const n=parseInt(v,radix||10);return isNaN(n)?0:n;}static toFloat(v){const n=parseFloat(v);return isNaN(n)?0:n;}static toEven(v){return v&1?v+1:v;}static hex(value){let len=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;let c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"0";len=Math.max(len||2,1);const s=value.toString(16);c=c||"0";return new Array(len-s.length+1).join(c)+s;}static toStr(value){if(typeof value==="number"){return !isNaN(value)?String(value):"";}else {return value!==null&&value!==undefined?String(value):"";}}static extend(target,source){target=target||{};for(let p in source){target[p]=source[p];}return target;}static setBounds(element,x,y,w,h){const style=element.style;style.left=x+"px";style.top=y+"px";style.width=w+"px";style.height=h+"px";}static setRect(element,r){this.setBounds(element,r.x,r.y,r.width,r.height);}static getOffsetRect(element){return {x:element.offsetLeft,y:element.offsetTop,width:element.offsetWidth,height:element.offsetHeight};}static getClientRect(element){const r=element.getBoundingClientRect();r["cx"]=element.offsetLeft;r["cy"]=element.offsetTop;return r;}static getChildIndex(element){if(element){const parent=element.parentNode;if(parent){const childs=parent.children;for(let i=childs.length;i--;){if(childs[i]===element){return i;}}}}return -1;}static clearChildren(element){let elt;while(elt=element.lastChild){element.removeChild(elt);}}static clearElements(element){let elt;while(elt=element.lastChild){Utils.clearElements(elt);element.removeChild(elt);}}static addChild(element,child){if(element&&child&&child.parentNode!==element){element.appendChild(child);return true;}return false;}static removeChild(element,child){if(element&&child&&child.parentNode===element){element.removeChild(child);return true;}return false;}static remove(element){const p=element&&element.parentElement;p&&p.removeChild(element);}static getPrev(element){const elts=element.parentElement.children;if(element!==elts[0]){for(let i=1;i<elts.length;i++){if(elts[i]===element){return elts[i-1];}}}}static getNext(element){const elts=element.parentElement.children;if(element!==elts[elts.length-1]){for(let i=elts.length-2;i>=0;i--){if(elts[i]===element){return elts[i+1];}}}}static disableSelection(element){const css=element.style;css["-moz-user-select"]="-moz-none";css["-khtml-user-select"]="none";css["-webkit-user-select"]="none";css["-o-user-select"]="none";css["-ms-user-select"]="none";css["user-select"]="none";/*
            if (typeof element.onselectstart !== 'undefined') {
                element.onselectstart = function() { return false; };
            } else if (typeof element.style.MozUserSelect !== 'undefined') {
                element.style.MozUserSelect = 'none';
            } else {
                element.onmousedown = function() { return false; };
            }
            */}static selectAll(target){if(target&&window.getSelection&&document.createRange){const selection=window.getSelection();const range=document.createRange();range.selectNodeContents(target);selection.removeAllRanges();selection.addRange(range);// } else if (document.selection && document.body.createTextRange) {
    //     range = document.body.createTextRange();
    //     range.moveToElementText(this);
    //     range.select();
    }}static setMobile(value){$$_mobile=value;}static isMobile(){if($$_mobile!==undefined)return $$_mobile;if($$_chkMob===undefined)$$_chkMob=this.$_checkMobile();return $$_chkMob;}static $_checkMobile(){let check=false;if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){check=true;}if(!check){(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true;if(!check){if(a.match(/Macintosh/i)!==null){let canvas=document.createElement("canvas");if(canvas!==null){let context=canvas.getContext("webgl")||canvas.getContext("experimental-webgl");if(context){let info=context["getExtension"]("WEBGL_debug_renderer_info");if(info){let renderer=context["getParameter"](info.UNMASKED_RENDERER_WEBGL);if(renderer.indexOf("Apple")!==-1)check=true;}}}}}})(navigator.userAgent||navigator.vendor||window["opera"]);}return check;}static getBrowserSize(elt){const doc=elt?elt.ownerDocument:document;const win=doc.defaultView;return {// width: _win.innerWidth || _doc.documentElement.clientWidth || _doc.body.clientWidth,
    // height: _win.innerHeight || _doc.documentElement.clientHeight || _doc.body.clientHeight
    width:win.innerWidth||doc.documentElement.clientWidth||doc.body.clientWidth,height:win.innerHeight||doc.documentElement.clientHeight||doc.body.clientHeight};}static move(element,x,y){element.style.left=x+"px";element.style.top=y+"px";}static htmlEncode(text){return document.createElement('a').appendChild(document.createTextNode(text)).parentNode["innerHTML"];}static detach(element){element&&element.parentNode&&element.parentNode.removeChild(element);}static getSize(element){const r=element.getBoundingClientRect();return {width:r.width,height:r.height};}static getScrolled(doc){const body=doc.body;const win=getDocWin(doc);const docElem=doc.documentElement;return {sx:win.pageXOffset||docElem.scrollLeft||body.scrollLeft,sy:win.pageYOffset||docElem.scrollTop||body.scrollTop};}static getOffset(element){const doc=element.ownerDocument;const win=doc.defaultView;const box=element.getBoundingClientRect();const body=doc.body;const docElem=doc.documentElement;const scrollTop=win.pageYOffset||docElem.scrollTop||body.scrollTop;const scrollLeft=win.pageXOffset||docElem.scrollLeft||body.scrollLeft;const clientTop=docElem.clientTop||body.clientTop||0;const clientLeft=docElem.clientLeft||body.clientLeft||0;const x=box.left+scrollLeft-clientLeft;const y=box.top+scrollTop-clientTop;return {x:Math.round(x),y:Math.round(y)};}static isAncestorOf(elt,child){let p=child;while(p){if(p==elt){return true;}p=p.parentElement;}return false;}static equalNumbers(a,b){return isNaN(a)==isNaN(b)&&!isNaN(a)&&a==b;}static equalArrays(a,b){if(a===b)return true;if(a==null||b==null)return false;const len=a.length;if(len!=b.length)return false;for(let i=0;i<len;++i){if(a[i]!==b[i])return false;}return true;}static parseDate(date,defaultDate){const d=new Date(date);return isNaN(d.getTime())?defaultDate||new Date():d;}static isLeapYear(year){return year%4==0&&year%100!=0||year%400==0;}static incMonth(d,delta){const day=d.getDate();d.setDate(1);d.setMonth(d.getMonth()+delta);d.setDate(Math.min(day,Utils.month_days[Utils.isLeapYear(d.getFullYear())?1:0][d.getMonth()]));return d;}static minDate(d1,d2){if(d1!==null)return d1;if(d2!==null)return d2;return d1.getTime()<d2.getTime()?d1:d2;}static maxDate(d1,d2){if(d1!==null)return d2;if(d2!==null)return d1;return d1.getTime()>d2.getTime()?d1:d2;}static setClassName(element,clsName){const className=element.className;if(clsName!=className){element.className=clsName;}}static addClassName(element,clsName){if(element.classList){element.classList.add(clsName);}else {const classList=element.className.split(" ");if(classList.indexOf(clsName)<0){classList.push(clsName);}element.className=classList.join(" ");}}static removeClassName(element,clsName){if(element.classList){element.classList.remove(clsName);}else {const classList=element.className.split(" ");let i;if((i=classList.indexOf(clsName))>=0){classList.splice(i,1);}element.className=classList.join(" ");}}static getBoundingClientRect2(element){const cr=element.getBoundingClientRect();return {x:cr.left,y:cr.top,left:cr.left,right:cr.right,width:cr.right-cr.left,top:cr.top,bottom:cr.bottom,height:cr.bottom-cr.top};}static getBoundingRect(container,element){const r=Utils.getBoundingClientRect2(element);const r2=Utils.getBoundingClientRect2(container);return new Rectangle(r.left-r2.left,r.top-r2.top,element.offsetWidth,element.offsetHeight);}// 아래 코드는 단순히 화면에 그려질 문자열이 한글이면 2 영/숫자/기호 이면 1로 계산하기 위한 로직이다.
    static getTextLength(s){let b=0,i=0,c=0;for(;c=s.charCodeAt(i++);b+=c>>7?2:1);return b;}static getClassName(model){function getFuncName(clazz){let ret=clazz.toString();ret=ret.substr('function '.length);ret=ret.substr(0,ret.indexOf('('));return ret;}if(model&&model.constructor){return model.constructor.name||getFuncName(model.constructor);}}static isInteger(value){if(Number.isInteger)return Number.isInteger(value);return typeof value==="number"&&isFinite(value)&&Math.floor(value)===value;}static setTextProp(element){element.textProp=this.ieAll?"textContent":"innerText";}static isEmpty(obj){if(obj){for(let p in obj){if(obj.hasOwnProperty(p)){return false;}}}return true;}static isNotEmpty(obj){if(obj){for(let p in obj){if(obj.hasOwnProperty(p)){return true;}}}return false;}static capitalize(s){if(typeof s!=='string')return '';const c=s.charAt(0);if(c>='A'&&c<='Z')return s;return c.toUpperCase()+s.slice(1);}static uncapitalize(s){if(typeof s!=='string')return '';const c=s.charAt(0);if(c>='a'&&c<='z')return s;return c.toLowerCase()+s.slice(1);}static labelize(s){if(typeof s!=='string')return '';const c=s.charAt(0);s=c>='A'&&c<='Z'?s:c.toUpperCase()+s.slice(1);let s2=s.charAt(0);for(let i=1;i<s.length;i++){const c=s.charAt(i);if(c>='A'&&c<='Z'){s2+=' ';}s2+=c;}return s2;}static escapeXML(s){return s.replace(/[&<>"']/g,function(s){return xml_chars[s];});}static deepClone(obj){if(obj===null||typeof obj!=='object'){return obj;}const result=Array.isArray(obj)?[]:{};for(let key of Object.keys(obj)){result[key]=Utils.deepClone(obj[key]);}return result;}static getCaretOffset(dom){const doc=dom.ownerDocument;let caretOffset=0;const sel=doc.getSelection();if(sel.rangeCount>0){return sel.focusOffset;// const range = sel.getRangeAt(0);
    // const preCaretRange = range.cloneRange();
    // preCaretRange.selectNodeContents(dom);
    // preCaretRange.setEnd(range.endContainer, range.endOffset);
    // caretOffset = preCaretRange.toString().length;
    }return caretOffset;}static getFocused(){const sel=document.getSelection();let node=sel.focusNode;while(node){if(node instanceof HTMLElement)return node;node=node.parentElement;}}static getArray(length,value){const arr=[];for(let i=0;i<length;i++)arr.push(value);return arr;}static getNumArray(length){let value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;const arr=[];for(let i=0;i<length;i++)arr.push(value);return arr;}static hasSetter(obj,prop){while(obj){const pd=Reflect.getOwnPropertyDescriptor(obj,prop);if(pd)return pd.writable||!!pd.set;obj=Object.getPrototypeOf(obj);}}static dataUriToBinary(dataUri){const BASE64_MARKER=';base64,';const base64Index=dataUri.indexOf(BASE64_MARKER)+BASE64_MARKER.length;const base64=dataUri.substring(base64Index);const raw=window.atob(base64);const rawLength=raw.length;const array=new Uint8Array(new ArrayBuffer(rawLength));for(let i=0;i<rawLength;i++){array[i]=raw.charCodeAt(i);}return array;}static getImageUrl(css){const url=css.backgroundImage;if(url&&url.startsWith('url("')){return url.substring(5,url.length-2);}}static cloneDom(dom){let inCell=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const p=dom.parentElement;const dom2=dom.cloneNode(true);if(inCell){const cs=getComputedStyle(dom);dom2.style.position='absolute';dom2.style.top=cs.top;dom2.style.left=cs.left;}dom2.style.visibility='hidden';dom2.style.transform='';// p.appendChild(dom);
    p.insertBefore(dom2,dom);// 이렇게 해야 table cell의 item 위치가 제대로 계산된다.
    return dom2;}static getTextRect(node){const range=document.createRange();range.selectNodeContents(node);return range.getBoundingClientRect();}}Utils.isIE=_isIE;Utils.isEdge=_isEdge;Utils.ieAll=_isIE||_isEdge;Utils.ieOld=_ieOld;Utils.isMac=_isMac;Utils.isSafari=_isSafari;Utils.isWinSafari=_isWinSafari;Utils.isChrome=_isChrome;Utils.isFirefox=_isFirefox;Utils.isOpera=_isOpera;Utils.ieLeg=_ieLeg;Utils.ieTen=_ieTen;Utils.isiOS=_isiOS;Utils.isChromium=_isChrome||_isChromiumEdge||_isWhale||_isOpera;Utils.TextProp=Utils.ieAll?"innerText":"textContent";Utils.week_days=window["RG_CONST"]&&window["RG_CONST"]["WEEKDAYS"]?window["RG_CONST"]["WEEKDAYS"]:['일','월','화','수','목','금','토'];Utils.month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]];Utils.colonreg=/;(?=(?:[^"]*"[^"]*")*(?![^"]*"))/;// static $_getActiveGrid(): any {
    //     return Utils.$$_activeGrid && Utils.$$_activeGrid.handler;
    // }
    // static $_setActiveGrid(grid) {
    //     if (Utils.$$_activeGrid != grid) {
    //         Utils.$$_activeGrid = grid;
    //         grid && grid._fireGridActivated();
    //     }
    // }
    Utils.$$_debugging=false;// event 호출을 확인.
    Utils.$$_keyLog=false;// evnet중에서 key 관련 이벤트 포함.
    Utils.$$_trace=null;// 내부에서 trace하고자 할때
    function assert(condition,msg){if(!condition){throw new Error(msg);}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class VisualElement extends EventAware{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){let name=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let callback=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;super();//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._positionable=true;this._x=0;this._y=0;this._width=0;this._height=0;this._visible=true;this._styleName='';this._elements=null;this._dirty=true;this._hovered=false;this._className="";this._nodraw=false;this._name=name;let dom=this._dom=this._createDom(doc);dom&&this._initDom(doc,dom);callback&&callback(this,dom);}_doDispose(){if(this._dom){this._removeEventListeners(this._dom);Utils.detach(this._dom);this._dom=null;}if(this._elements){for(let child of this._elements){child.dispose();}this._elements.length=0;}this._parent=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** positionable */get positionable(){return this._positionable;}set positionable(value){if(value!=this._positionable){this._positionable=value;this.invalidate();}}/** name */get name(){return this._name;}/** styleName */get styleName(){return this._styleName;}set styleName(value){if(value!=this._styleName){this._styleName=value;this.resetStyleName();}}/** container */get container(){return this._parent&&this._parent.container;}/** parent */get parent(){return this._parent;}/** elements */get elements(){return this._elements?this._elements.slice(0):[];}/** childCount */get childCount(){return this._elements?this._elements.length:0;}/** isSingleton */get isSingleton(){return this._parent&&this._parent.childCount==1&&this._parent._elements[0]===this;}/** x */get x(){return this._x;}set x(value){if(value!=this._x){this._x=value;this.invalidate();}}/** y */get y(){return this._y;}set y(value){if(value!=this._y){this._y=value;this.invalidate();}}/** width */get width(){return this._width;}set width(value){value=Math.max(0,value);if(value!=this._width){this._width=value;this.sizeChanged();}}/** height */get height(){return this._height;}set height(value){value=Math.max(0,value);if(value!=this._height){this._height=value;this.sizeChanged();}}/** right */get right(){return this._x+this._width;}/** bottom */get bottom(){return this._y+this._height;}/** position */get position(){return new Point(this._x,this._y);}/** bounds */get bounds(){return new Rectangle(this._x,this._y,this._width,this._height);}/** clientRect */get clientRect(){return new Rectangle(0,0,this._width,this._height);}/** visible */get visible(){return this._visible;}set visible(value){if(value!=this._visible){this._visible=value;if(this._dom){this._dom.style.display=this._visible?this._getCssDisplay():"none";}this.invalidate(true);this._visibleChanged();}}/** findable */get findable(){return true;}/** hovered */get hovered(){return this._hovered;}set hovered(value){if(value!=this._hovered){this._hovered=value;this._hoverChanged();}}/** isLayer */get isLayer(){return false;}/**
         * blockable
         * true이면 isLayer일 때도 findElementAt에서 hit test될 수 있다.
         */get blockable(){return false;}/** mouseX */get mouseX(){const container=this.container;if(container){let x=container["_currentX"];let p=this;while(p&&p!==undefined){x-=p._x;p=p._parent;}return x;}else {return NaN;}}/** mouseY */get mouseY(){const container=this.container;if(container){let y=container["_currentY"];let p=this;while(p&&p!==undefined){y-=p._y;p=p._parent;}return y;}else {return NaN;}}/** dom */get dom(){return this._dom;}/** doc */get doc(){return getDoc(this._dom);}/** style */get style(){return this._dom&&this._dom.style;}/** offsetWidth */get offsetWidth(){return this._dom.offsetWidth;}/** offsetHeight */get offsetHeight(){return this._dom.offsetHeight;}/** offsetSize */get offsetSize(){return {width:this._dom.offsetWidth,height:this._dom.offsetHeight};}get printable(){return true;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    isDom(dom){return dom===this._dom;}containsDom(dom){return this._dom.contains(dom);}containsClass(className){return this._dom.classList.contains(className);}canHover(){return true;}getChildren(){return this._elements&&this._elements.slice(0);}getChild(index){return this._elements&&this._elements[index];}indexOf(element){return this._elements?this._elements.indexOf(element):-1;}get firstChild(){return this._elements&&this._elements[0];}contains(element){return this._elements&&this._elements.indexOf(element)>=0;}getAncestor(cls){let p=this._parent;while(p){if(p instanceof cls){return p;}p=p._parent;}return null;}addDom(dom){dom&&this._dom.appendChild(dom);}addChild(child){return this.insertChild(-1,child);}_getParentDom(){return this._dom;}insertChild(index,child){if(child&&!this.contains(child)){const elts=this._elements||[];const childDom=child._dom;const dom=this._getParentDom();if(index<0||index>=elts.length){dom&&childDom&&dom.appendChild(childDom);elts.push(child);}else {if(childDom){const sib=this._elements[index]._dom;dom&&sib&&dom.insertBefore(childDom,sib);}elts.splice(index,0,child);}this._elements=elts;child._parent=this;child.$_attached(this);this.invalidate();return true;}return false;}removeChild(child){if(child&&this._elements){const i=this._elements.indexOf(child);if(i>=0){return this.removeChildAt(i)===child;}}return false;}removeChildAt(index){if(index>=0&&index<this.childCount){const child=this._elements[index];const dom=this._getParentDom();this._elements.splice(index,1);dom&&child._dom&&dom.removeChild(child._dom);child._parent=null;child._dirty=false;child.$_detached(this);this.invalidate();return child;}return null;}removeLast(){if(this._elements&&this._elements.length>0){return this.removeChildAt(this._elements.length-1);}return null;}clear(){const elts=this._elements;const cnt=elts?elts.length:0;if(cnt>0){for(let elt of elts){elt._parent=null;elt.$_detached(this);}this._elements=[];const dom=this._getParentDom();if(dom){while(dom.lastChild){dom.removeChild(dom.lastChild);}}this.invalidate();return true;}return false;}hideAll(){if(this._elements){for(let elt of this._elements){elt.visible=false;}}}invalidate(){let force=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let invalidateChildren=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(force||!this._dirty){this._dirty=true;const container=this.container;if(container){container.invalidateElement(this);}}if(invalidateChildren){if(this._elements){for(let child of this._elements){child.invalidate(force,true);}}}}validate(){this._dirty=false;}invalidateLayout(){const container=this.container;if(container){container["invalidateLayout"]();}}getBounds(){let r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(r){return r.set(this._x,this._y,this._width,this._height);}else {return new Rectangle(this._x,this._y,this._width,this._height);}}getClientRect(){let r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(r){return r.set(0,0,this._width,this._height);}else {return new Rectangle(0,0,this._width,this._height);}}containsInBounds(x,y){return x>=this._x&&x<this._x+this._width&&y>=this._y&&y<this._y+this._height;}containsInClient(x,y){return x>=0&&x<this._width&&y>=0&&y<this._height;}parentToElement(parent,x,y){let p=this;while(p&&p!=parent){x-=p._x;y-=p._y;p=p._parent;}return new Point(x,y);}translateBy(descendant){let r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let p=descendant;if(!r){r=new Rectangle(0,0,this._width,this._height);}while(p&&p!==this){r.x-=p._x;r.y-=p._y;p=p._parent;}return r;}topBy(parent,top){let y=this._y+top;let p=this._parent;while(p&&p!==parent){y+=p._y;p=p._parent;}return y;}boundsBy(parent){let r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let x=this._x;let y=this._y;let p=this._parent;if(r){x+=r.x;y+=r.y;}while(p&&p!==parent){x+=p._x;y+=p._y;p=p._parent;}return r?new Rectangle(x,y,r.width,r.height):new Rectangle(x,y,this._width,this._height);}boundsByContainer(){let r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;let x=this._x;let y=this._y;if(r){x+=r.x;y+=r.y;}let p=this._parent;while(p&&p._x!==undefined){x+=p._x;y+=p._y;p=p._parent;}return r?new Rectangle(x,y,r.width,r.height):new Rectangle(x,y,this._width,this._height);}pointByContainer(x,y){let p=this._parent;while(p&&p._x!==undefined){x+=p._x;y+=p._y;p=p._parent;}return new Point(x+this._x,y+this._y);}containerToElement(x,y){let p=this;while(p){x-=p._x;y-=p._y;p=p._parent;}return new Point(x,y);}boundsByScreen(){let r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;r=this.boundsByContainer(r);r=this.container.toScreen(r);return r;}offsetFrom(elt){//const container = this.container["_containerDom"];
    const edom=elt["_dom"];const pt=new Point(this._dom.offsetLeft,this._dom.offsetTop);let p=this._dom.offsetParent;while(p instanceof HTMLElement&&p!==edom){pt.x+=p.offsetLeft;pt.y+=p.offsetTop;p=p.offsetParent;}return pt;}hitTest(x,y){return x>=0&&x<this._width&&y>=0&&y<this._height;}findChildAt(x,y,hitTesting,blockLayer){const elts=this._elements;const cnt=elts?elts.length:0;if(cnt>0){for(let i=cnt-1;i>=0;i--){const elt=elts[i];if(elt.visible){const cx=x-elt._x;const cy=y-elt._y;if(hitTesting||elt.findable){if(elt.isLayer||elt.hitTest(cx,cy)){const child=elt.findChildAt(cx,cy,hitTesting,blockLayer);if(child){return child;}if(!elt.isLayer||blockLayer&&elt.blockable){return elt;}}}}}}return null;}findChildOf(dom){if(this._elements){for(let elt of this._elements){if(elt.isDom(dom))return elt;const child=elt.findChildOf(dom);if(child)return child;}}}move(x,y){let draw=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(x!=this._x||y!=this._y){this._x=x;this._y=y;if(draw){!isNaN(x)&&(this._dom.style.left=x+'px');!isNaN(y)&&(this._dom.style.top=y+'px');}else {this.invalidate();}}}moveBy(dx,dy){let draw=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;this.move(this._x+dx,this._y+dy,draw);}resize(width,height){let draw=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(width!=this._width||height!=this._height){this._width=width;this._height=height;if(draw){this._setSizeStyle(this._dom.style);}else {this.sizeChanged();}}}resizeBy(dw,dh){let draw=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;this.resize(this._width+dw,this._height+dh,draw);}setBounds(x,y,width,height){if(x!=this._x||y!=this._y){this._x=x;this._y=y;this.invalidate();}this.resize(width,height);return this;}setBoundsI(x,y,width,height){x>>=0;y>>=0;width>>=0;height>>=0;if(x!=this._x||y!=this._y){this._x=x;this._y=y;this.invalidate();}this.resize(width,height);return this;}setRect(r){if(r.x!=this._x||r.y!=this._y){this._x=r.x;this._y=r.y;this.invalidate();}this.resize(r.width,r.height);return this;}setRectI(r){const x=r.x>>0;const y=r.y>>0;const width=r.width>>0;const height=r.height>>0;if(x!=this._x||y!=this._y){this._x=x;this._y=y;this.invalidate();}this.resize(width,height);return this;}getBoundingRect(){return Utils.getBoundingClientRect2(this._dom);}draw(){if(this._dirty&&this._dom&&!this._nodraw){this._beforeDraw(this._dom);this._doDraw(this._dom);this._afterDraw(this._dom);this._dirty=false;}}drawRecursive(){this.draw();for(let i=0,cnt=this.childCount;i<cnt;i++){const elt=this._elements[i];if(elt.visible){elt.drawRecursive();}}}resetSizeStyle(){this._dom&&this._setSizeStyle(this._dom.style);}getHtml(){return this._dom&&this._dom.outerHTML;}// _dom이 있다고 전제한다.
    setImportantStyle(style,value){this._dom.style.setProperty(style,value,"important");}isAncestorOf(child){let p=child&&child.parent;while(p){if(p===this)return true;p=p.parent;}}isAncestorDomOf(child){let checkThis=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(checkThis&&this._dom===child)return true;let p=child.parentElement;while(p){if(p===this._dom)return true;p=p.parentElement;}}findDescendantOf(dom){for(let i=this.childCount-1;i>=0;i--){let child=this.getChild(i);if(child._dom===dom)return child;child=child.findDescendantOf(dom);if(child)return child;}}setStyles(styles){if(styles){const css=this._dom.style;for(let p in styles){css[p]=styles[p];}}}get scrollTop(){return this._dom.scrollTop;}get scrollLeft(){return this._dom.scrollLeft;}scrollDom(x,y){if(Utils.isIE){this._dom.scrollTop=y;this._dom.scrollLeft=x;}else {this._dom.scroll(x,y);}}setHint(title){this._dom.title=title;}setRotation(rotation){const css=this._dom.style;if(!isNaN(rotation)&&rotation!==0){css.transformOrigin='center';css.transform='rotate('+rotation+'deg)';}else {css.transform='';}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _isTesting(){return VisualElement.Testing;}_getElements(){return this._elements;}_createDom(doc){return doc.createElement("div");}_getCssSelector(){return this._styleName;}_initDom(doc,dom){const css=dom.style;// css["-webkit-print-color-adjust"] = "exact"; // for chrome printing
    css.position="absolute";css.boxSizing="border-box";// css.padding = "0px";
    // css.margin = "0px";
    this._addEventListeners(dom);}_addEventListeners(dom){}_removeEventListeners(dom){}$_attached(parent){this._doAttached(parent);}_doAttached(parent){}$_detached(parent){this._doDetached(parent);}_doDetached(parent){}_isEmptySize(){return false;}_setSizeStyle(css){if(this._isEmptySize()){css.width="";css.height="";}else {css.width=isNaN(this._width)?'':this._width+"px";css.height=isNaN(this._height)?'':this._height+"px";}}setPrintStyles(){const css=this._dom.style;if(!isNaN(this._x))css.left=this._x+'px';if(!isNaN(this._y))css.top=this._y+'px';if(!isNaN(this._width))css.width=this._width+'px';if(!isNaN(this._height))css.height=this._height+'px';}_getCssDisplay(){return "block";}// _dom이 있다고 전제한다.
    resetStyleName(){this._setClassName(this._dom);}_setClassName(dom){let sel=this._getCssSelector();if(sel!=this._className){this._className=sel;(dom||this._dom).className=sel||'';}}replaceDom(dom){const orgDom=this._dom;const p=orgDom.parentElement;p.removeChild(orgDom);p.appendChild(dom);this._dom=dom;}cloneNode(){return this._dom.cloneNode(true);}// _dom이 있다고 전재한다.
    applyBounds(){let css=this._dom.style;css.left=this._x+"px";css.top=this._y+"px";this._setSizeStyle(css);}// dom이 있을 때만 호출된다.
    _beforeDraw(dom){this._setClassName(dom);let css=dom.style;if(this._positionable){css.left=this._x+"px";css.top=this._y+"px";}else {css.left="";css.top="";}this._setSizeStyle(css);}_doDraw(dom){}_afterDraw(dom){}_hoverChanged(){}_visibleChanged(){}sizeChanged(){this.invalidate(true,true);this._doSizeChanged();}_doSizeChanged(){}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    VisualElement.Testing=false;/** @internal */class LayerElement extends VisualElement{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get isLayer(){return true;}_doDraw(element){}}////////////////////////////////////////////////////////////////////////////////
    const DRAG_THRESHOLD$1=3;/** @internal */class VisualTool extends Base{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(owner,name){super();this._clickX=0;this._clickY=0;this._mouseX=0;this._mouseY=0;this._owner=owner;this._name=name;this._previous=null;}_doDispose(){this._dragTracker=null;this._previous=null;this._owner=null;this._mouseEventTarget=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** owner */get owner(){return this._owner;}/** name */get name(){return this._name;}/** previous */get previous(){return this._previous;}/** dragTracker */get dragTracker(){return this._dragTracker;}set dragTracker(value){if(value!==this._dragTracker){if(this._dragTracker){this._dragTracker.deactivate();}this._dragTracker=value;if(this._dragTracker){this._dragTracker.activate();}}}/** dragging */get dragging(){return this._dragTracker&&this._dragTracker.dragging;}/** mouseX */get mouseX(){return this._mouseX;}/** mouseY */get mouseY(){return this._mouseY;}get mouseEventTarget(){return this._mouseEventTarget;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    findElementAt(x,y,hitTesting){let blockLayer=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;return this._owner.findElementAt(x,y,hitTesting,blockLayer);}findElementOf(dom){return this._owner.findElementOf(dom);}activate(previous){this._doActivated(previous);}deactivate(){this._doDeactivated();}// keyDown(key: number, ctrl: boolean, shift: boolean, alt: boolean, event: Event): boolean {
    keyDown(event){return this._doKeyDown(event);}keyUp(event){return this._doKeyUp(event);}keyPress(event){return this._doKeyPress(event);}mouseDown(event){const x=this._mouseX=this._clickX=event["mouseX"];const y=this._mouseY=this._clickY=event["mouseY"];if(this.dragging){this._stopDragTracker(x,y,false);}const r=this._doMouseDown(event);if(this._dragTracker&&this._dragTracker.startWhenCreated){this._startDragTracker(x,y,event.shiftKey,event.altKey);}return r;}dragFrom(event,tracker){}dropFrom(event,tracker){}mouseMove(event){const x=this._mouseX=event["mouseX"];const y=this._mouseY=event["mouseY"];const tracker=this._dragTracker;const buttons=event.type==="mousemove"?event["buttons"]:event.type==="touchmove"?1:undefined;if(tracker){if(tracker.dragging){if(buttons==undefined||buttons>0||Utils.ieOld&&buttons>=0){// const req = tracker.getRequest();
    // if (req) {
    //     this._owner && this._owner["setCursor"] && this._owner["setCursor"](event.target, req.cursor);
    // }
    if(!tracker.drag(this._mouseEventTarget,x,y)){const request=tracker.getNextRequest(x,y);if(request){this._stopDragTracker(x,y,true);this.dragTracker=this._getDragTracker(request,x,y);this._startDragTracker(x,y,event.shiftKey,event.altKey);}}}else {this._stopDragTracker(x,y,true);}}else if(Math.abs(x-this._clickX)>=DRAG_THRESHOLD$1||Math.abs(y-this._clickY)>=DRAG_THRESHOLD$1){this._startDragTracker(x,y,event.shiftKey,event.altKey);}else {this._doMouseMove(event);}}else {this._doMouseMove(event);}}mouseUp(event){try{const x=this._mouseX=event["mouseX"];const y=this._mouseY=event["mouseY"];if(this.dragging){this._stopDragTracker(x,y,false);}else {this._doMouseUp(event);}}finally{this._dragTracker=null;}}mouseEnter(event){this._doMouseEnter(event);}mouseLeave(event){this._doMouseLeave(event);}mouseOver(event){this._doMouseOver(event);}mouseOutside(){this._doMouseOutside();}mouseWheel(event){return this._doMouseWheel(event/*event.mouseX, event.mouseY, event.wheelDelta, event.wheelDelta*/);}contextMenu(event){return this._doContextMenu(event);}click(event){this._doClick(event);}dblclick(event){this._doDblClick(event);}setFocus(target){// TODO mobile일때 editor를 제어해야 한다.
    !Utils.isMobile()&&this._doSetFocus(target);}focusLeave(event){this._doFocusLeave(event);}dragStart(event){this._doDragStart(event);}dragEnd(event){this._doDragEnd(event);}dragEnter(event){this._doDragEnter(event);}dragOver(event){this._doDragOver(event);}dragLeave(event){this._doDragLeave(event);}dragDrop(event){this._doDragDrop(event);}// // touchMove가 발생하지 않는 경우 mousedown/mouseup이 발생해 버린다.
    // // touchMove가 발생하면 mouse관련 이벤트가 발생하지 않는다.
    // // 그렇다고 preventDefault를 호출하면 two-finger같은 것이 동작하지 않는다. ㅠㅠ;.
    // touchStart(event: TouchEvent): void {
    //     // event.preventDefault();
    //     this._lastTouch = Date.now();
    //     this.touchManager ? this.touchManager.touchStart(event) : this._doTouchStart(event);
    // }
    // touchMove(event: TouchEvent): void {
    //     this._lastTouch = Date.now();
    //     this.touchManager ? this.touchManager.touchMove(event) : this._doTouchMove(event);
    // }
    // touchEnd(event: TouchEvent): void {
    //     // event.preventDefault();
    //     try {
    //         this._lastTouch = NaN;
    //         this.touchManager ? this.touchManager.touchEnd(event) : this._doTouchEnd(event);
    //     } catch {
    //         this.touchManager && this.touchManager.clearTouches();
    //     }
    // }
    // touchCancel(event: TouchEvent): void {
    //     this._lastTouch = NaN;        
    //     this.touchManager ? this.touchManager.touchCancel(event) : this._doTouchCancel(event);
    // }
    // lastTouch(): number {
    //     return Date.now() - this._lastTouch
    // }
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    isMouseEventTarget(elt){return elt["_dom"]===this._mouseEventTarget;}_doActivated(previous){}_doDeactivated(){}_doKeyDown(event){// key: number, ctrl: boolean, shift: boolean, alt: boolean, 
    return false;}_doKeyUp(event){return false;}_doKeyPress(event){return false;}/**
         * true 리턴하면 preventDefault 호출.
         */_doMouseDown(event){return false;}// x: number, y: number
    _doMouseMove(event){}/** 그리드 밖에서도 호출된다. */_doMouseUp(event){// const x = event["mouseX"];
    // const y = event["mouseY"];
    }// x: number, y: number
    _doMouseEnter(event){}// x: number, y: number
    _doMouseLeave(event){}// x: number, y: number
    _doMouseOver(event){}_doMouseOutside(){}_doMouseWheel(event){return false;}_doContextMenu(event){return;}/** 그리드 밖에서 마우스를 놓으면 호출되지 않는다. */_doClick(event){}_doDblClick(event){}_doSetFocus(target){}_doFocusLeave(event){}_doDragStart(event){}_doDragEnd(event){}_doDragEnter(event){}_doDragOver(event){}_doDragLeave(event){}_doDragDrop(event){}_getDragTracker(request,x,y){return null;}_startDragTracker(x,y,shift,alt){if(this._dragTracker){if(this._dragTracker.start(this._mouseEventTarget,x,y,shift,alt)){this._doDragTrackerStarted(this._dragTracker);}else {this._dragTracker=null;}}}_stopDragTracker(x,y,canceled){if(this.dragging){const tracker=this._dragTracker;if(canceled){tracker.cancel();}else {tracker.drop(this._mouseEventTarget,x,y);}this.dragTracker=null;this._doDragTrackerFinished(tracker,canceled);//this._owner && this._owner.invalidate && this._owner.invalidate();
    }}_doDragTrackerStarted(dragTracker){//trace("dragTracker started: " + dragTracker.name());
    }_doDragTrackerFinished(dragTracker,canceled){//trace("dragTracker stopped: " + dragTracker.name() + ", " + (canceled ? "canceled" : "completed"));
    }_findTableCell(source){return this.owner.getTableCell(source||this.mouseEventTarget);}_doTouchStart(event){}_doTouchMove(event){}_doTouchEnd(evnet){}_doTouchCancel(evnet){}}/** @internal */class DragTracker extends Base{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(container,name){super();this._active=false;this._completed=false;this._dragging=false;this._currentX=0;this._currentY=0;this._container=container;this._name=name;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** container */get container(){return this._container;}/** name */get name(){return this._name;}/** active */get active(){return this._active;}/** dragging */get dragging(){return this._dragging;}/** startWhenCreated */get startWhenCreated(){return false;}/** completed */get completed(){return this._completed;}/**
         * linkable proprerty.
         * 다른 그리드에서 진행 가능한 tracker.
         */get linkable(){return false;}get cursor(){return;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    activate(){if(!this._active){this._doActivate();this._active=true;}}deactivate(){if(this._active){this.cancel();this._doDeactivate();this._active=false;}}start(eventTarget,x,y,shift,alt){this.cancel();if(this._active&&this._doStart(eventTarget,x,y,shift,alt)){this._currentX=this._startX=x;this._currentY=this._startY=y;this._dragging=true;this._completed=false;this._showFeedback(x,y);this.container.setCursor(this.cursor||'');return true;}return false;}drag(eventTarget,x,y){if(this._dragging){this._currentX=x;this._currentY=y;if(this._doDrag(eventTarget,x,y)){this.container.setCursor(this.cursor||'');this._moveFeedback(x,y);return true;}}return false;}cancel(){try{if(this._dragging){try{this._dragging=false;this._doCanceled(this._currentX,this._currentY);}finally{this.end();}}}finally{this._hideFeedback();}}drop(eventTarget,x,y){try{if(this._dragging){try{this._currentX=x;this._currentY=y;this._dragging=false;if(this._canAccept(eventTarget,x,y)){this._doCompleted(eventTarget,x,y);this._completed=true;}else {this._doCanceled(x,y);}}finally{this.end();}}}finally{this._hideFeedback();}}end(){this.container.setCursor('');this._doEnded();}getRequest(){return null;}getNextRequest(x,y){return null;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    get startX(){return this._startX;}get startY(){return this._startY;}get currentX(){return this._currentX;}get currentY(){return this._currentY;}_showFeedback(x,y){}_moveFeedback(x,y){}_hideFeedback(){}_doActivate(){}_doDeactivate(){}_doStart(eventTarget,x,y,shfit,alt){return true;}_doDrag(eventTarget,x,y){return true;}_doCanceled(x,y){}_canAccept(eventTarget,x,y){return true;}_doCompleted(eventTarget,x,y){}_doEnded(){}}////////////////////////////////////////////////////////////////////////////////
    var ScrollEventType;(function(ScrollEventType){ScrollEventType["LINE"]="line";ScrollEventType["PAGE"]="page";ScrollEventType["THUMB_TRACK"]="thumbTrack";ScrollEventType["THUMB_END"]="thumbEnd";})(ScrollEventType||(ScrollEventType={}));/** @internal */class ScrollElement extends VisualElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,scrollBar,name){super(doc,name);this._scrollBar=scrollBar;}_doDispose(){this._scrollBar=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** scrollBar */get scrollBar(){return this._scrollBar;}/** vertical */get vertical(){return this._scrollBar.vertical;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doDraw(dom){this._doRender(dom);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _doRender(dom){}_changed(){this.invalidate();}}/** @internal */class ScrollTrack extends ScrollElement{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(scrollBar){super(scrollBar.doc,scrollBar,"scrollTrackView");}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return "rg-scrolltrack";}}/** @internal */class ScrollButton extends ScrollElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(scrollBar,far){super(scrollBar.doc,scrollBar,"scrollButtonView");//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._enabled=true;this._far=far;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** enabled */get enabled(){return this._enabled;}set enabled(value){if(value!=this._enabled){this._enabled=value;this._changed();}}/** far */get far(){return this._far;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){if(this.scrollBar.vertical){return this._far?"rg-scroll-down":"rg-scroll-up";}else {return this._far?"rg-scroll-right":"rg-scroll-left";}}}/** @internal */class ScrollThumb extends ScrollElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(scrollBar){super(scrollBar.doc,scrollBar,"scrollThumbView");}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return "rg-scrollthumb";}}/** @internal */class ScrollBar$1 extends VisualElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(container){let vertical=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;super(container.doc,"scrollBarView");//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._lineScrollSize=1;this._pageScrollSize=1;this._minThumbSize=20;this._min=0;this._max=0;this._pos=0;this._page=0;this._maxPosition=0;this._buttonSize=20;this._needLayout=true;this._tipView=null;this._container=container;this._vertical=vertical;this._track=new ScrollTrack(this);this.addChild(this._track);this._thumb=new ScrollThumb(this);this.addChild(this._thumb);this._nearButton=new ScrollButton(this,false);this.addChild(this._nearButton);this._farButton=new ScrollButton(this,true);this.addChild(this._farButton);}_doDispose(){this._track=this._track.dispose();this._thumb=this._thumb.dispose();this._nearButton=this._nearButton.dispose();this._farButton=this._farButton.dispose();super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** container */get container(){return this._container;}/** lineScrollSize */get lineScrollSize(){return this._lineScrollSize;}set lineScrollSize(value){value=Math.max(1,value);if(value!=this._lineScrollSize){this._lineScrollSize=value;}}/** pageScrollSize */get pageScrollSize(){return this._pageScrollSize;}set pageScrollSize(value){value=Math.max(1,value);if(value!=this._pageScrollSize){this._pageScrollSize=value;}}/** minThumbSize */get minThumbSize(){return this._minThumbSize;}set minThumbSize(value){value=Math.max(8,value);if(value!=this._minThumbSize){this._minThumbSize=value;this.invalidateLayout();}}/** vertical */get vertical(){return this._vertical;}/** pos */get pos(){return this._pos;}/** maxPosition */get maxPosition(){return this._maxPosition;}/** buttonSize */get buttonSize(){return this._buttonSize;}/** tipView */set tipView(value){this._tipView=value;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    layoutContent(){if(this._needLayout){this._needLayout=false;this._doLayoutContent();}}setProperties(min,max,page){min=Math.max(0,min);max=Math.max(min,max);if(min!=this._min||max!=this._max||page!=this._page){this._min=min;this._max=max;this._page=page;this._pos=Math.min(this._max,Math.max(this._min,this._pos));this._maxPosition=Math.max(0,this._max-this._page);this.invalidate();//Layout(); <-- 그리드 layout 중 다시 layout 요청된다.
    this._needLayout=true;}}setPosition(value){let layout=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;value=Math.min(this._maxPosition,Math.max(this._min,value));if(value!=this._pos){this._pos=value;this.invalidate();//Layout(); <-- 그리드 layout 중 다시 layout 요청된다.
    this._needLayout=true;layout&&this.layoutContent();}}ptInTrack(x,y,far){const p=this.containerToElement(x,y);if(this._vertical){if(p.y>=this._nearButton.height&&p.x<this._farButton.y){return !far&&p.y<this._thumb.y||far&&p.y>=this._thumb.bottom;}}else {if(x>=this._nearButton.width&&x<this._farButton.x){return !far&&p.x<this._thumb.x||far&&p.x>=this._thumb.right;}}return false;}setText(text){if(this._tipView&&text){this._tipView.show();this._tipView.setText(text);let x,y;if(this._vertical){let tw=this._tipView.width();x=this.x-tw-5;y=this._thumb.y;}else {let th=this._tipView.height();x=this._thumb.x;y=this.y-th-5;}this._tipView.move(x,y);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return this._vertical?"rg-vscrollbar":"rg-hscrollbar";}draw(){super.draw();}_doDraw(dom){}_doSizeChanged(){this.invalidateLayout();}invalidateLayout(){this._needLayout=true;super.invalidateLayout();}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _doLayoutContent(){const vertical=this._vertical;const szBtn=this._buttonSize;const h=this.height;const w=this.width;const szTrack=(vertical?h:w)-szBtn*2;const szThumb=Math.min(szTrack,Math.max(this._minThumbSize,Math.floor(szTrack*this._page/(this._max-this._min+1))));const pos=szBtn+Math.min(szTrack-szThumb,Math.max(0,Math.floor((szTrack-szThumb)*this._pos/(this._maxPosition-this._min))));this._track.setBounds(0,0,w,h);if(vertical){this._nearButton.setBounds(0,0,w,szBtn);this._farButton.setBounds(0,h-szBtn,w,szBtn);if(szThumb<=szTrack){this._thumb.setBounds(2,pos,w-4,szThumb);}}else {this._nearButton.setBounds(0,0,szBtn,h);this._farButton.setBounds(w-szBtn,0,szBtn,h);if(szThumb<=szTrack){this._thumb.setBounds(pos,2,szThumb,h-4);}}}_doScroll(eventType,delta,position){this.fireEvent(ScrollBar$1.SCROLLED,eventType,delta,position);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // events
    ScrollBar$1.SCROLLED="onScrollBarScrolled";/** @internal */class ScrollThumbTracker extends DragTracker{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(owner){super(owner,"scrollThumbTracker");}_doDispose(){this._thumb=this._thumb&&this._thumb.dispose();super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** thumb */get thumb(){return this._thumb;}set thumb(value){this._thumb=value;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get startWhenCreated(){return true;}_doStart(eventTarget,x,y){const bar=this._thumb.scrollBar;const p=bar.containerToElement(x,y);if(bar.vertical){this._offset=p.y-this._thumb.y;}else {this._offset=p.x-this._thumb.x;}return true;}_doDrag(eventTarget,x,y){return this.$_doScroll(x,y,ScrollEventType.THUMB_TRACK);}_doCompleted(eventTarget,x,y){return this.$_doScroll(x,y,ScrollEventType.THUMB_END);}_doCanceled(x,y){}_doEnded(){}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_doScroll(x,y,eventType){const bar=this._thumb.scrollBar;const len=bar["_maxPosition"]-bar["_min"]+1;const szBtn=bar["_buttonSize"];const p=bar.containerToElement(x,y);if(bar.vertical){const scrLen=bar.height-szBtn*2-this._thumb.height;if(scrLen<=0){return false;}p.y-=this._offset;p.y=(p.y-szBtn)*len/scrLen;bar["_doScroll"](eventType,0,Math.floor(p.y));}else {const scrLen=bar.width-szBtn*2-this._thumb.width;if(scrLen<=0){return false;}p.x-=this._offset;p.x=(p.x-szBtn)*len/scrLen;bar["_doScroll"](eventType,0,Math.floor(p.x));}return true;}}/** @internal */class ScrollButtonTimer extends EventAware{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){super();this._active=false;this._timer=undefined;this._ready=false;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** active */get active(){return this._timer!==undefined;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    start(button){this._button=button;this._scrollBar=button.scrollBar;this._active=true;setTimeout(function(){if(this._ready){this._ready=false;this._timer=setInterval(function(){if(this._active){this.$_fireEvent();}}.bind(this),20);}}.bind(this),200);this._ready=true;this.$_fireEvent();}move(x,y){const p=this._button.containerToElement(x,y);this._active=this._button.containsInClient(p.x,p.y);// this._active = this._button.containsInClient(x, y);
    }stop(){// 위 setTimeout callback이 실행되기 전에 stop()이 호출되면 무시해야 한다.
    this._ready=false;if(this._timer){clearInterval(this._timer);this._timer=undefined;}// 아무데서나 stop이 호출될 수 있으므로 _button이 null일 수도 있다.
    }//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_fireEvent(){let delta=this._button.far?1:-1;let type=ScrollEventType.LINE;this._scrollBar["_doScroll"](type,this._scrollBar.lineScrollSize*delta,0);}}/** @internal */class ScrollTrackTimer extends Base{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){super();this._active=false;this._timer=undefined;this._ready=false;this._mouseX=0;this._mouseY=0;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** active */get active(){return this._active;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    start(bar,far,x,y){this._scrollBar=bar;this._far=far;this._active=true;setTimeout(function(){if(this._ready){this._ready=false;this._timer=setInterval(function(){if(this._active){this.$_fireEvent();}}.bind(this),50);}}.bind(this),200);this._ready=true;const p=this._scrollBar.containerToElement(x,y);this._mouseX=p.x;this._mouseY=p.y;this.$_fireEvent();}move(x,y){const p=this._scrollBar.containerToElement(x,y);this._mouseX=p.x;this._mouseY=p.y;this._active=this._scrollBar.ptInTrack(p.x,p.y,this._far);}stop(){this._ready=false;if(this._timer){clearInterval(this._timer);}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_fireEvent(){let type=null;let delta=0;const thumb=this._scrollBar["_thumb"];if(this._scrollBar.vertical){const y=this._mouseY;if(this._far&&y>thumb.bottom){type=ScrollEventType.PAGE;delta=1;}else if(!this._far&&y<thumb.y){type=ScrollEventType.PAGE;delta=-1;}}else {const x=this._mouseX;if(this._far&&x>thumb.right){delta=1;type=ScrollEventType.PAGE;}else if(x<thumb.x){type=ScrollEventType.PAGE;delta=-1;}}delta!=0&&this._scrollBar["_doScroll"](type,this._scrollBar.pageScrollSize*delta,0);}}/**
     * window 수준의 event를 받기 위해 (capture가 이모저모 번거로운 일인 듯))
     * 각 element의 event를 처리하지 않고 container 수준에서 처리하도록 한다.
     * visual container에 scrollTool이 생성되고,
     * scroll element가 클릭되면 active tool이 scroll tool이 된다.
     * scroll 관련 action이 종료되면 이전 active tool로 재설정된다.
     * @interanl
     */class ScrollTool extends VisualTool{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(owner){super(owner,"scrollTool");this._buttonTimer=new ScrollButtonTimer();this._trackTimer=new ScrollTrackTimer();this._thumbTracker=new ScrollThumbTracker(owner);}_doDispose(){this._thumbTracker.cancel();this._thumbTracker=this._thumbTracker.dispose();this._buttonTimer.stop();this._buttonTimer=this._buttonTimer.dispose();this._trackTimer.stop();this._trackTimer=this._trackTimer.dispose();super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doMouseDown(event){const x=event["mouseX"];const y=event["mouseY"];//console.log("SCROLLBAR DOWN: " + x + ", " + y);
    this._clickElement=null;this._buttonTimer.stop();this._trackTimer.stop();const elt=this.findElementAt(x,y,false);if(elt instanceof ScrollElement){this._clickElement=elt;if(elt instanceof ScrollButton){this._buttonTimer.start(elt);}else if(elt instanceof ScrollThumb){this._thumbTracker.thumb=elt;this.dragTracker=this._thumbTracker;}else if(elt instanceof ScrollTrack){const far=elt.scrollBar.ptInTrack(x,y,true);this._trackTimer.start(elt.scrollBar,far,x,y);}return true;}}_doMouseMove(event){const x=event["mouseX"];const y=event["mouseY"];const elt=this._clickElement;if(elt instanceof ScrollButton&&this._buttonTimer.active){this._buttonTimer.move(x,y);}else if(elt instanceof ScrollTrack&&this._trackTimer.active){this._trackTimer.move(x,y);}}_doMouseUp(event){this._clickElement=null;this._buttonTimer.stop();this._trackTimer.stop();}_doTouchStart(event){this.mouseDown(event);event.preventDefault();}_doTouchEnd(event){this.mouseUp(event);}_doTouchMove(event){this.mouseMove(event);}}////////////////////////////////////////////////////////////////////////////////
    const DRAG_THRESHOLD=3;/** @internal */class UITool extends Base{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(owner,name){super();this._clickX=0;this._clickY=0;this._pointerX=0;this._pointerY=0;this._owner=owner;this._name=name;this._previous=null;}_doDispose(){this._dragTracker=null;this._previous=null;this._owner=null;this._pointerEventTarget=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** owner */get owner(){return this._owner;}/** name */get name(){return this._name;}/** previous */get previous(){return this._previous;}/** dragTracker */get dragTracker(){return this._dragTracker;}set dragTracker(value){if(value!==this._dragTracker){if(this._dragTracker){this._dragTracker.deactivate();}this._dragTracker=value;if(this._dragTracker){this._dragTracker.activate();}}}/** dragging */get dragging(){return this._dragTracker&&this._dragTracker.dragging;}/** pointerX */get pointerX(){return this._pointerX;}/** pointerY */get pointerY(){return this._pointerY;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    activate(previous){this._doActivated(previous);}deactivate(){this._doDeactivated();}// keyDown(key: number, ctrl: boolean, shift: boolean, alt: boolean, event: Event): boolean {
    keyDown(event){return this._doKeyDown(event);}keyUp(event){return this._doKeyUp(event);}keyPress(event){return this._doKeyPress(event);}pointerDown(event){const x=this._pointerX=this._clickX=event["pointerX"];const y=this._pointerY=this._clickY=event["pointerY"];if(this.dragging){this._stopDragTracker(event,x,y,false);}return this._doPointerDown(event);}dragFrom(event,tracker){}dropFrom(event,tracker){}pointerMove(event){const x=this._pointerX=event["pointerX"];const y=this._pointerY=event["pointerY"];const tracker=this.dragTracker;const buttons=event.type==="pointermove"?event["buttons"]:event.type==="touchmove"?1:undefined;if(tracker){if(tracker.dragging){if(buttons==undefined||buttons>0||Utils.ieOld&&buttons>=0){// const req = tracker.getRequest();
    // if (req) {
    //     this._owner && this._owner["setCursor"] && this._owner["setCursor"](event.target, req.cursor);
    // }
    if(!tracker.drag(this._pointerEventTarget,x,y)){const request=tracker.getNextRequest(x,y);if(request){this._stopDragTracker(event,x,y,true);this.dragTracker=this._getUIDragTracker(request,x,y);this._startDragTracker(event,x,y,event.shiftKey,event.altKey);}}}else {this._stopDragTracker(event,x,y,true);}}else if(tracker.startWhenCreated||Math.abs(x-this._clickX)>=DRAG_THRESHOLD||Math.abs(y-this._clickY)>=DRAG_THRESHOLD){this._startDragTracker(event,x,y,event.shiftKey,event.altKey);}else {this._doPointerMove(event);}}else {this._doPointerMove(event);}}pointerUp(event){const x=this._pointerX=event["pointerX"];const y=this._pointerY=event["pointerY"];if(this.dragging){//this.hasOwnProperty("_prevCheckIndex") && !(this._dragTracker instanceof ScrollThumbTracker) && (delete this._prevCheckIndex);
    this._stopDragTracker(event,x,y,false);}else {this._dragTracker=null;this._doPointerUp(event);}}pointerEnter(event){this._doPointerEnter(event);}pointerLeave(event){this._doPointerLeave(event);}pointerOver(event){this._doPointerOver(event);}pointerOutside(){this._doPointerOutside();}mouseWheel(event){return this._doMouseWheel(event/*event.pointerX, event.pointerY, event.wheelDelta, event.wheelDelta*/);}contextMenu(event){return this._doContextMenu(event);}click(event){this._doClick(event);}dblclick(event){this._doDblClick(event);}setFocus(target){// TODO mobile일때 editor를 제어해야 한다.
    !Utils.isMobile()&&this._doSetFocus(target);}focusLeave(event){this._doFocusLeave(event);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    get pointerEventTarget(){return this._pointerEventTarget;}ispointerEventTarget(elt){return elt["_dom"]===this._pointerEventTarget;}_doActivated(previous){}_doDeactivated(){}_doKeyDown(event){// key: number, ctrl: boolean, shift: boolean, alt: boolean, 
    return false;}_doKeyUp(event){return false;}_doKeyPress(event){return false;}/**
         * true 리턴하면 preventDefault 호출.
         */_doPointerDown(event){return false;}// x: number, y: number
    _doPointerMove(event){}/** 그리드 밖에서도 호출된다. */_doPointerUp(event){// const x = event["pointerX"];
    // const y = event["pointerY"];
    }_doPointerEnter(event){}_doPointerLeave(event){}_doPointerOver(event){}_doPointerOutside(){}_doMouseWheel(event){return false;}_doContextMenu(event){return;}/** 그리드 밖에서 마우스를 놓으면 호출되지 않는다. */_doClick(event){}_doDblClick(event){}_doSetFocus(target){}_doFocusLeave(event){}_getUIDragTracker(request,x,y){return null;}_startDragTracker(event,x,y,shift,alt){if(this._dragTracker){if(this._dragTracker.start(event,this._pointerEventTarget,x,y,shift,alt)){this._doDragTrackerStarted(this._dragTracker);}else {this._dragTracker=null;}}}_stopDragTracker(event,x,y,canceled){if(this.dragging){const tracker=this._dragTracker;if(canceled){tracker.cancel(event);}else {tracker.drop(event,this._pointerEventTarget,x,y);}this.dragTracker=null;this._doDragTrackerFinished(tracker,canceled);//this._owner && this._owner.invalidate && this._owner.invalidate();
    }}_doDragTrackerStarted(UIDragTracker){//trace("UIDragTracker started: " + UIDragTracker.name());
    }_doDragTrackerFinished(UIDragTracker,canceled){//trace("UIDragTracker stopped: " + UIDragTracker.name() + ", " + (canceled ? "canceled" : "completed"));
    }}/** @internal */class UIDragTracker extends Base{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(container,name){super();this._active=false;this._completed=false;this._dragging=false;this._currentX=0;this._currentY=0;this._container=container;this._name=name;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** container */get container(){return this._container;}/** name */get name(){return this._name;}/** active */get active(){return this._active;}/** dragging */get dragging(){return this._dragging;}/** startWhenCreated */get startWhenCreated(){return false;}/** completed */get completed(){return this._completed;}/**
         * linkable proprerty.
         * 다른 그리드에서 진행 가능한 tracker.
         */get linkable(){return false;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    activate(){if(!this._active){this._doActivate();this._active=true;}}deactivate(){if(this._active){this.cancel(null);this._doDeactivate();this._active=false;}}start(event,eventTarget,x,y,shift,alt){this.cancel(event);if(this._active&&this._doStart(event,eventTarget,x,y,shift,alt)){this._currentX=this._startX=x;this._currentY=this._startY=y;this._dragging=true;this._completed=false;this._showFeedback(x,y);return true;}return false;}drag(eventTarget,x,y){if(this._dragging){this._currentX=x;this._currentY=y;if(this._doDrag(eventTarget,x,y)){this._moveFeedback(x,y);return true;}}return false;}cancel(event){try{if(this._dragging){try{this._dragging=false;this._doCanceled(this._currentX,this._currentY);}finally{this._doEnded(event);}}}finally{this._hideFeedback();}}drop(event,eventTarget,x,y){try{if(this._dragging){try{this._currentX=x;this._currentY=y;this._dragging=false;if(this._canAccept(eventTarget,x,y)){this._doCompleted(eventTarget,x,y);this._completed=true;}else {this._doCanceled(x,y);}}finally{this._doEnded(event);}}}finally{this._hideFeedback();}}getRequest(){return null;}getNextRequest(x,y){return null;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    get startX(){return this._startX;}get startY(){return this._startY;}get currentX(){return this._currentX;}get currentY(){return this._currentY;}_showFeedback(x,y){}_moveFeedback(x,y){}_hideFeedback(){}_doActivate(){}_doDeactivate(){}_doStart(event,eventTarget,x,y,shfit,alt){return true;}_doDrag(eventTarget,x,y){return true;}_doCanceled(x,y){}_canAccept(eventTarget,x,y){return true;}_doCompleted(eventTarget,x,y){}_doEnded(event){}}////////////////////////////////////////////////////////////////////////////////
    class UIElement extends EventAware{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,className){let elementType=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'div';super();this._elements=[];this._dom=elementType&&doc.createElement(elementType);this._dom.className=className;this._prepareDom(doc,this._dom);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get dom(){return this._dom;}/** parent */get parent(){return this._parent;}/** container */get container(){return this._parent&&this._parent.container;}/** x */get x(){return this._dom.offsetLeft;}set x(value){this._dom.style.left=value+'px';}/** y */get y(){return this._dom.offsetTop;}set y(value){this._dom.style.top=value+'px';}/** width */get width(){return this._dom.offsetWidth;}/** height */get height(){return this._dom.offsetHeight;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    isDom(dom){return dom===this._dom;}setClassName(className){this._dom.className=className;}setHint(title){this._dom.title=title;}setStyle(style,value){this._dom.style[style]=value;}clearStyle(style){this._dom.style[style]='';}setStyles(styles){if(styles){const css=this._dom.style;for(let s in styles){const v=styles[s];if(v===undefined){css[s]='';}else {css[s]=v;}}}}setImportantStyle(style,value){this._dom.style.setProperty(style,value,"important");}getBounds(){return this._dom.getBoundingClientRect();}setBounds(x,y,width,height){Utils.extend(this._dom.style,{left:x+'px',top:y+'px',width:width+'px',height:height+'px'});}setRect(r){this.setBounds(r.x,r.y,r.width,r.height);}move(x,y){this._dom.style.left=x+'px';this._dom.style.top=y+'px';return this;}setXP(x){this._dom.style.left=x+'%';}setYP(y){this._dom.style.top=y+'%';}clear(){if(this._elements.length>0){for(let child of this._elements){this._dom.removeChild(child['_dom']);child['_parent']=null;}this._elements=[];}}addChild(child){if(child&&!this._elements.includes(child,0)){this._addChild(child);return true;}}removeChild(child){return child&&this._removeChild(child);}removeLast(){if(this._elements.length>0){const child=this._elements[this._elements.length-1];this._removeChild(child);return child;}}containerToLocal(){let x=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let y=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;const c=this.container['_containerDiv'];let d=this._dom;let p=this._dom.offsetParent;while(p){x-=d.offsetLeft;y-=d.offsetTop;if(p===c)break;d=p;p=d.offsetParent;}return {x:x,y:y};}setText(text){this._dom.textContent=text;}hide(){this._dom.style.display='none';}show(){let style=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'inherit';this._dom.style.display=style;}setRotation(rotation){const css=this._dom.style;if(rotation!==0){css.transformOrigin='center';css.transform='rotate('+rotation+'deg)';}else {css.transform='';}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _addChild(child){this._elements.push(child);this._dom.appendChild(child['_dom']);child['_parent']=this;}_removeChild(child){const idx=this._elements.indexOf(child);if(idx>=0){this._dom.removeChild(child['_dom']);child['_parent']=null;this._elements.splice(idx,1);return true;}}_prepareDom(doc,dom){}}class UIDummyTool extends UITool{}class RootElement$1 extends UIElement{constructor(doc,container){super(doc,null);this._container=container;}get container(){return this._container;}}/** @internal */class UIContainer extends EventAware{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(containerId){super();this._layoutNeeded=false;this._defaultCursor="default"/* Cursor.DEFAULT */;this._eventHandlers={};this._eventNodes=[];this._containerRender=this._render.bind(this);this._saveDisplay='';this.prepareContainer(containerId);this._registerEventHandlers(this._containerDiv);this._root=new RootElement$1(this.doc,this);this._root['_dom']=this._containerDiv;this.activeTool=this._defaultTool=this._createDefaultTool();this._prepareChildren(this.doc,this._containerDiv);this.invalidateLayout();}_doDispose(){this._activeTool=null;this._defaultTool=this._defaultTool.dispose();this.$_removeListenerAll(null);Utils.clearElements(this._containerDiv);super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** Document */get doc(){return this._doc;}/** visible */get visible(){return getComputedStyle(this._containerDiv).display!=='none';}set visible(value){if(value!=this.visible){if(value){this._containerDiv.style.display=this._saveDisplay;}else {this._saveDisplay=getComputedStyle(this._containerDiv).display;this._containerDiv.style.display='none';}}}/** activeTool */get activeTool(){return this._activeTool;}set activeTool(value){value=value||this._defaultTool;if(value!=this._activeTool){const old=this._activeTool;if(old){old.deactivate();}this._activeTool=value;if(value){value.activate(old);}}}/** defaultTool */get defaultTool(){return this._defaultTool;}/** width */get width(){return this._containerDiv.offsetWidth;}/** height */get height(){return this._containerDiv.offsetHeight;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getBound(){const r=this._containerDiv.getBoundingClientRect();return new Rectangle(r.left,r.top,r.width,r.height);}getHtml(){return this._containerDiv.outerHTML;}setCursor(cursor){this._containerDiv.style.cursor=cursor||this._defaultCursor;}contains(dom){if(dom instanceof getDocWin(this.doc).HTMLElement){return this._containerDiv.contains(dom);}}prepareContainer(id){if(!id){throw new Error("container is null!");}if($_instanceOf(id,"HTMLDivElement")){this._containerDiv=id;}else {this._containerDiv=document.getElementById(id);}if(!$_instanceOf(this._containerDiv,"HTMLDivElement")){throw new Error("Invalid grid container element: "+id);}this._containerDiv.className=this._getCssSelector();const doc=this._doc=this._containerDiv.ownerDocument;const win=getDocWin(doc);win.requestAnimationFrame=win.requestAnimationFrame||win["mozRequestAnimationFrame"]||win['webkitRequestAnimationFrame']||win["msRequestAnimationFrame"]||function(render){return win.setTimeout(render,10);};}_addElement(element){this._containerDiv.appendChild(element['_dom']);this._root['_addChild'](element);}_prepareChildren(doc,dom){}_createDefaultTool(){return new UIDummyTool(null,'dummy');}isLayoutNeeded(){return this._layoutNeeded;}invalidateLayout(){if(!this._layoutNeeded){this._layoutNeeded=true;if(!this._requestTimer){const win=getDocWin(this._doc);this._requestTimer=win.requestAnimationFrame(this._containerRender);}}}updateNow(){this._layoutNeeded=true;this._render(Utils.getTimer());}_render(timestamp){if(this.disposing){return;}try{this.$$_render(timestamp);//, null, 0, 0);
    }finally{this._requestTimer=null;}}$$_render(timestamp){const div=this._containerDiv;const x=0;const y=0;const w=div.clientWidth;const h=div.clientHeight;if(this._layoutNeeded){this._doLayout(this._doc,new Rectangle(x,y,w,h));this._layoutNeeded=false;}else {this._doPrepareRender(new Rectangle(x,y,w,h));}this._doRenderHtml(new Rectangle(x,y,w,h));}_doLayout(doc,bounds){}_doPrepareRender(bounds){}_doRenderHtml(bounds){}_registerEventHandlers(container){const win=getWin(container);container.style.cursor=this._defaultCursor;this.$_addListener(win,"resize",this._resizeHandler.bind(this),false);this.$_addListener(win,"pointermove",this._pointerMoveHandler.bind(this),false);this.$_addListener(win,"pointerup",this._pointerUpHandler.bind(this),false);this.$_addListener(win,"focus",this._focusHandlerFireFox.bind(this),true);// 이벤트가 발생한 객체에서만 발생하고 부모로 전달되지는 않는다.
    this.$_addListener(win,"focusin",this._focusinHandler.bind(this),true);// 이벤트가 상위 객체로 전달된다.
    this.$_addListener(win,"focusout",this._focusoutHandler.bind(this),true);// 이벤트가 상위 객체로 전달된다.
    this.$_addListener(win,"pointerdown",this._globalPointerDownHandler.bind(this),false);this.$_addListener(container,"keydown",this._keyDownHandler.bind(this),false);this.$_addListener(container,"keyup",this._keyUpHandler.bind(this),false);this.$_addListener(container,"keypress",this._keyPressHandler.bind(this),false);this.$_addListener(container,"click",this._clickHandler.bind(this),false);this.$_addListener(container,"dblclick",this._dblclickHandler.bind(this),false);this.$_addListener(container,"pointerdown",this._pointerDownHandler.bind(this),false);this.$_addListener(container,"pointerenter",this._pointerEnterHandler.bind(this),false);this.$_addListener(container,"pointerleave",this._pointerLeaveHandler.bind(this),false);this.$_addListener(container,"pointerover",this._pointerOverHandler.bind(this),false);this.$_addListener(container,"focus",this._focusHandler.bind(this),false);this.$_addListener(container,"contextmenu",this._contextMenuHander.bind(this),false);this.$_addListener(container,"blur",this._blurHandler.bind(this),false);// this.$_addListener(canvas, "drop", this._dropHandler.bind(this), false);
    this.$_addListener(container,"selectstart",this._selectstartHandler.bind(this),false);this.$_addListener(container,"wheel",this._wheelHandler.bind(this),false);//Utils.isPassive() ? {capture: false, passive: false} : false);
    }$_addListener(node,event,handler,capture){if(!(node in this._eventHandlers)){this._eventHandlers[node]={};}if(!(event in this._eventHandlers[node])){this._eventHandlers[node][event]=[];}this._eventHandlers[node][event].push([handler,capture]);node.addEventListener(event,handler,capture);if(this._eventNodes.indexOf(node)<0){this._eventNodes.push(node);}}$_removeListener(node,event){if(node in this._eventHandlers){const handlers=this._eventHandlers[node];if(event in handlers){const eventHandlers=handlers[event];for(let i=eventHandlers.length;i--;){const handler=eventHandlers[i];node.removeEventListener(event,handler[0],handler[1]);}}}}$_removeListenerAll(){let node=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;const nodes=node?[node]:this._eventNodes;for(let i=0,cnt=nodes.length;i<cnt;i++){const elt=nodes[i];if(elt in this._eventHandlers){const events=this._eventHandlers[elt];for(let event in events){const handlers=events[event];for(let j=handlers.length;j--;){const handler=handlers[j];elt.removeEventListener(event,handler[0],handler[1]);}}}}}_unloadHandler(){// 등록된 모든 handler를 삭제해야한다.
    // $_addListener로 등록했다면 $_removeListenerAll로 삭제가능.
    this.$_removeListenerAll();this._containerDiv=null;}_resizeHandler(event){// if (this._resizeDelay) {
    // 	this._resizeTimer && clearTimeout(this._resizeTimer);
    // 	this._resizeTimer = setTimeout(function() {this.resetSize()}.bind(this), this._resizeDelay);
    // } else {
    // 	this.resetSize();
    // }
    //this.resetSize();
    this._doResized(event);this.invalidateLayout();}_doResized(event){}_isEnabled(){return true;}_keyDownHandler(event){if(this._isEnabled()){// const ctrl = _isMac && event.metaKey || !_isMac && event.ctrlKey;
    // this._activeTool.keyDown(event.keyCode, event.ctrlKey, event.shiftKey, event.altKey, event);
    this._activeTool.keyDown(event);}}_keyUpHandler(event){if(this._isEnabled()){// const ctrl = _isMac && event.metaKey || !_isMac && event.ctrlKey;
    this._activeTool.keyUp(event);}}_keyPressHandler(event){if(this._isEnabled()){this._activeTool.keyPress(event);}}eventToContainer(event){const elt=this._containerDiv;// event.target; // canvas로 간주하면 window로 이벤트 핸들링을 해도 동일하게 적용된다.
    const r=elt.getBoundingClientRect();return new Point(event.pageX-r.left,event.pageY-r.top);}toOffset(event){/*
             event.pointerX = event.clientX - _offsetX;
             event.pointerY = event.clientY - _offsetY;
             */const elt=this._containerDiv;// event.target; // canvas로 간주하면 window로 이벤트 핸들링을 해도 동일하게 적용된다.
    const r=elt.getBoundingClientRect();event.pointerX=event.clientX-r.left;event.pointerY=event.clientY-r.top;return event;}_clickHandler(event){if(this._isEnabled()){this._activeTool.click(this.toOffset(event));}else {event.preventDefault();}}_dblclickHandler(event){if(this._isEnabled()){this._activeTool.dblclick(this.toOffset(event));}else {event.preventDefault();}}$_getHtmlElement(target){const win=getWin(this._containerDiv);if(target instanceof win.HTMLElement){return target;}if(target instanceof Node){return target.parentElement;}}_pointerDownHandler(event){if(this._isEnabled()){this.toOffset(event);this.activeTool["_pointerEventTarget"]=this.$_getHtmlElement(event.target);if(this.activeTool.pointerDown(event)){event.preventDefault();}}else {event.preventDefault();}}_pointerMoveHandler(event){const win=getWin(this._containerDiv);this.toOffset(event);if(this._isEnabled()){const tool=this._activeTool;tool["_pointerEventTarget"]=event.target instanceof win.HTMLElement?event.target:null;tool.pointerMove(event);}}_pointerUpHandler(event){const win=getWin(this._containerDiv);try{this.toOffset(event);if(this._isEnabled()){this._activeTool["_pointerEventTarget"]=event.target instanceof win.HTMLElement?event.target:null;this._activeTool.pointerUp(event);}else {event.preventDefault();}}finally{if(this._activeTool){this._activeTool.dragTracker=null;}}}_pointerEnterHandler(event){if(this._isEnabled()){this._activeTool.pointerEnter(this.toOffset(event));}}_pointerLeaveHandler(event){if(this._isEnabled()){this._activeTool.pointerLeave(this.toOffset(event));}}_pointerOverHandler(event){if(this._isEnabled()){this._activeTool.pointerOver(this.toOffset(event));}}_contextMenuHander(event){const win=getWin(this._containerDiv);this.toOffset(event);if(this._isEnabled()){this._activeTool["_pointerEventTarget"]=event.target instanceof win.HTMLElement?event.target:null;this._activeTool.contextMenu(this.toOffset(event));}}// IE 9 FireFox Chrome Opera Safari IE 11 Edge
    _wheelHandler(event){if(this._isEnabled()){if(this._activeTool.mouseWheel(this.toOffset(event))){Utils.stopEvent(event);}}}_focusHandler(event){}_blurHandler(event){}_selectstartHandler(event){// IE9에서 선택 드래깅되는 문제
    return false;}_focusinHandler(event){//console.log('focus');
    // if (!Utils.isAncestorOf(this._containerDiv, event.target as HTMLElement)) {
    //     debugger;
    // }
    // if (event.target === this._containerDiv) {
    //     //!this._gridView._exiting && !_isMobile() &&this._activeTool && this._activeTool.setFocus();
    //     this._activeTool && this._activeTool.setFocus();
    // }
    }_globalPointerDownHandler(event){if(!Utils.isAncestorOf(this._containerDiv,event.target)){//debugger;
    if(this._isEnabled()){this._activeTool.pointerOutside();}}}_focusoutHandler(event){const out=Utils.isAncestorOf(this._containerDiv,event.target)&&event.relatedTarget&&!Utils.isAncestorOf(this._containerDiv,event.relatedTarget);if(out){//debugger;
    if(this._isEnabled()){this._activeTool.focusLeave(event);}// exitGridWhenTab 관련.
    // this._container.tabIndex = 0;
    }}_focusHandlerFireFox(event){if(Utils.isAncestorOf(this._containerDiv,event.target)){if(this._isEnabled()){this._containerDiv.setAttribute("tabindex","0");this._activeTool.setFocus(event.target);}}// event.target instanceof winHTMLCanvasElement && event.target == this._canvas && $_setActiveGrid(this._gridView);
    // if (event.target === this._canvas) {
    //     !this._gridView._exiting && !_isMobile() && this._activeTool && this._activeTool.setFocus();
    // }
    }}////////////////////////////////////////////////////////////////////////////////
    // window.requestAnimationFrame = window.requestAnimationFrame || window["mozRequestAnimationFrame"] ||
    //                             window.webkitRequestAnimationFrame || window["msRequestAnimationFrame"] || 
    //                             function (render) { return window.setTimeout(render, 10); };
    /** @internal */class RootElement extends VisualElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,name,container){super(doc,name);this._contaner=container;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get container(){return this._contaner;}_getCssSelector(){return 'root-element';}_initDom(doc,dom){super._initDom(doc,dom);dom.style.width='100%';dom.style.height='100%';}_setSizeStyle(css){}_doDraw(element){}}/** @internal */class VisualContainer extends EventAware{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(containerId){super();//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._disabled=false;this._updateRequested=false;this._layoutNeeded=false;this._invalidated=false;this._scrolling=false;this._captured=false;this._focusing=false;this._focusingTarget=null;this._hovered=null;this._currentX=0;this._currentY=0;this._rendered=0;this._defaultCursor="default"/* Cursor.DEFAULT */;this._drawing=false;this._offsetX=0;this._offsetY=0;// private _containerRender = this._render.bind(this);
    this._eventHandlers={};this._eventNodes=[];// this.$_prepareContextMenu();
    // private _popupMenuManager = new PopupMenuManager(this).addListener(this);
    this._contextMenu=null;// this.onContextMenuItemClicked = null;
    this._containerRender=this._render.bind(this);this._scrollTool=new ScrollTool(this);this._cursor="default";this._testWidth=NaN;this._testHeight=NaN;this._saveDisplay='';this.$_testing=false;// Testtils에서 사용.
    this.$_prepareContainer(containerId);this.invalidateLayout();this._registerEventHandlers(this._containerDom);this.activeTool=this._defaultTool=this._createDefaultTool();VisualContainer.$_Containers[this["$_hash"]]=this;}getMouseContainer(){return VisualContainer.$_Containers[VisualContainer.$_mouseContainer];}static getActiveGrid(){const container=VisualContainer.$_Containers[VisualContainer.$_ActiveGrid];return container&&container["_gridView"];}static setActiveGrid(hash){if(hash!==VisualContainer.$_ActiveGrid){let newGrid=VisualContainer.$_Containers[hash];let cb;newGrid=newGrid&&newGrid["_gridView"];if(window["RealGrid"]&&(cb=window["RealGrid"].onActiveGridChanged)){let oldGrid=VisualContainer.$_Containers[VisualContainer.$_ActiveGrid];oldGrid=oldGrid&&oldGrid["_gridView"];cb(oldGrid&&oldGrid["handler"],newGrid&&newGrid["handler"]);}newGrid["_fireGridActivated"]();}VisualContainer.$_ActiveGrid=hash;}static clearContainer(hash){VisualContainer[hash]&&delete VisualContainer[hash];if(VisualContainer.$_ActiveGrid===hash){VisualContainer.$_ActiveGrid=null;}}static disposeStatic(){this.$_Containers=null;this.$_ActiveGrid=null;}_doDispose(){this._activeTool=null;this._defaultTool&&(this._defaultTool=this._defaultTool.dispose());this._scrollTool&&(this._scrollTool=this._scrollTool.dispose());this.$_removeListenerAll(null);Utils.detach(this._containerDom);this._containerDom=null;this._doc=null;Utils.clearElements(this._containerDiv);super._doDispose();delete VisualContainer.$_Containers[this["$_hash"]];}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** document */get doc(){return this._doc;}/** dom */get dom(){return this._containerDom;}/** visible */get visible(){return getComputedStyle(this._containerDiv).display!=='none';}set visible(value){if(value!=this.visible){if(value){this._containerDiv.style.display=this._saveDisplay;}else {this._saveDisplay=getComputedStyle(this._containerDiv).display;this._containerDiv.style.display='none';}}}/** disabled */get disabled(){return this._disabled;}set disabled(value){if(value!=this._disabled){this._disabled=value;this._doDisabledChanged();}}/** printing */get printing(){return false;}/** activeTool */get activeTool(){return this._activeTool;}set activeTool(value){value=value||this._defaultTool;if(value!=this._activeTool){const old=this._activeTool;if(old){old.deactivate();}this._activeTool=value;if(value){value.activate(old);}}}/** defaultTool */get defaultTool(){return this._defaultTool;}/** measurer */get measurer(){return this._measurer;}/** width */get width(){return this._containerDom.clientWidth;}/** height */get height(){return this._containerDom.clientHeight;}get scrollHeight(){return this._containerDiv.scrollHeight;}get scrollTop(){return this._containerDiv.scrollTop;}get scrolling(){return this._scrolling;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    findElementAt(x,y,hitTesting,blockLayer){return this._rootElement.findChildAt(x-this._rootElement["_x"],y-this._rootElement["_y"],hitTesting,blockLayer);}findElementOf(dom){return this._rootElement.findChildOf(dom);}getTableCell(dom){return null;}setCursor(cursor){if(cursor!=this._cursor){// this._doc.documentElement.style.cursor = cursor;
    this._containerDom.style.cursor=this._cursor=cursor;}}// TODO 사용되는 코드인지 확인 필요.
    setFocus(){this._containerDom.focus();//this._setFocusAndScroll(this._containerDom);
    }updateNow(){this._layoutNeeded=true;this.invalidate(true);this._render(Utils.getTimer());}toScreen(r){r.x+=this._offsetX;r.y+=this._offsetY;return r;}pointToScreen(x,y){return {x:x+this._offsetX,y:y+this._offsetY};}getBound(){const r=this._containerDom.getBoundingClientRect();return new Rectangle(r.left,r.top,r.width,r.height);}getHtml(){return this._containerDom.outerHTML;}addElement(element){return this._rootElement.addChild(element);}removeElement(element){return this._rootElement.removeChild(element);}addFeedback(element){if(element instanceof UIElement){return this._feedbackElement.addChild(element);}else {this._feedbackElement.dom.appendChild(element);}}addFeedbacks(){for(var _len10=arguments.length,elements=new Array(_len10),_key10=0;_key10<_len10;_key10++){elements[_key10]=arguments[_key10];}for(let elt of elements){this._feedbackElement.addChild(elt);}}removeFeedback(element){if(element instanceof UIElement){return this._feedbackElement.removeChild(element);}else {this._feedbackElement.dom.removeChild(element);}}removeFeedbacks(){for(var _len11=arguments.length,elements=new Array(_len11),_key11=0;_key11<_len11;_key11++){elements[_key11]=arguments[_key11];}for(let elt of elements){this._feedbackElement.removeChild(elt);}}resetSize(){let callback=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;this.updateNow();callback&&setTimeout(callback,0);}measureText(style,text){this._textMeasurer.className=style;this._textMeasurer.innerHTML=text;return this._textMeasurer.offsetWidth;}$_refreshCheckMeasurer(){if(!this._checkRect){const r=this._checkMeasurer.getBoundingClientRect();const css=getComputedStyle(this._checkMeasurer);this._checkRect={width:r.width+parseInt(css.marginLeft)+parseInt(css.marginRight),height:r.height+parseInt(css.marginTop)+parseInt(css.marginBottom)};}return this._checkRect;}measureCheckWidth(){return this.$_refreshCheckMeasurer().width;}measureCheckHeight(){return this.$_refreshCheckMeasurer().height;}contains(target){if(target instanceof Element){return this._containerDom.contains(target);}}getDomPosition(elt){let rotated=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(this.$_testing){return {x:0,y:0,width:1,height:1};}else {if(elt instanceof VisualElement){elt=elt['_dom'];}return this.$_offsetDomPosition(elt,{x:0,y:0},rotated);}}$_offsetDomPosition(dom,p,rotated){if(rotated){dom=Utils.cloneDom(dom);}const win=getDocWin(this._doc);const c=this._containerDom;const cr=c.getBoundingClientRect();const br=dom.getBoundingClientRect();const cs=win.getComputedStyle(c);p.x=br.left-cr.left-Math.round(parseFloat(cs.borderLeftWidth));p.y=br.top-cr.top-Math.round(parseFloat(cs.borderTopWidth));p.width=br.width;p.height=br.height;if(rotated){dom.remove();}return p;}getBoundingRect(element){const r=Utils.getBoundingRect(this._containerDom,element["_dom"]);r.x-=2;r.y-=2;return r;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    // Testtils에서 사용.
    $_setTesting(){this.$_testing=true;VisualElement['Testing']=true;}get _isTesting(){return this.$_testing;}_doDisabledChanged(){}$_prepareContainer(id){if(!id){throw new Error("container is null!");}if($_instanceOf(id,"HTMLDivElement")){this._containerDiv=id;// $_resetDocument(this._containerDiv);
    }else {// id만으로 document를 추출할수 없다. 하나의 RealGrid만 Load하는 경우 id로 사용할수 없다.
    this._containerDiv=document.getElementById(id);}if(!$_instanceOf(this._containerDiv,"HTMLDivElement")){throw new Error("Invalid visual container element: "+id);}const doc=this._doc=this._containerDiv.ownerDocument;const win=getDocWin(doc);win.requestAnimationFrame=win.requestAnimationFrame||win["mozRequestAnimationFrame"]||win['webkitRequestAnimationFrame']||win["msRequestAnimationFrame"]||function(render){return win.setTimeout(render,10);};const container=this._containerDom=doc.createElement("div");let css=container.style;this._cursor=css.cursor;this._containerDiv.appendChild(container);container.className='rr-visual-container';container.setAttribute('tabindex','0');//container.setAttribute('tabindex', '-1');
    css.position="relative";// 이 것 때문에...
    css.width="100%";css.height="100%";// css.borderStyle = "none";
    // css.borderWidth = "0px";
    css.boxSizing="border-box";css.overflow="hidden";css["-webkit-touch-callout"]="none";css["-webkit-user-select"]="none";css["user-select"]="none";css["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)";// const rect = container.getBoundingClientRect();
    // this._width = rect.width;
    // this._height = rect.height;
    this._rootElement=this._createRootElement(doc);container.appendChild(this._rootElement['_dom']);this._feedbackElement=new UIElement(doc,'rr-feedback-container');container.appendChild(this._feedbackElement['_dom']);this._feedbackElement.dom.style.zIndex=VisualContainer.FEEDBACK_ZINDEX;this._printRoot=new LayerElement(doc,'printRoot');this._measurer=doc.createElement("div");this._containerDom.appendChild(this._measurer);// const span = this._textMeasurer = doc.createElement("span");
    // span.style.position = "absolute";
    // span.style.left = "-10000px";
    // span.style.top = "-10000px";
    // span.style.display = "block";
    // this._container.appendChild(span);
    // const check = this._checkMeasurer = doc.createElement("input");
    // check.type = "checkbox";
    // check.tabIndex = -1;
    // check.style.position = "absolute";
    // check.style.left = "-1000px";
    // check.style.top = "-11000px";
    // check.style.display = "block";
    // this._container.appendChild(check);
    this._doPrepareContainer(container);}_doPrepareContainer(dom){}_createRootElement(doc){return new RootElement(doc,"root",this);}_createDefaultTool(){return null;}isLayoutNeeded(){return this._layoutNeeded;}invalidateLayout(){let scrolling=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this._scrolling=this._scrolling||scrolling;if(!this._layoutNeeded){this._layoutNeeded=true;this.invalidate(true);}}invalidate(force){if((!this._updateRequested||!this._invalidated)&&(force||!this._drawing)){if(!this._requestTimer&&!this.$_testing){const win=getDocWin(this._doc);this._requestTimer=win.requestAnimationFrame(this._containerRender);}this._updateRequested=true;this._invalidated=true;}}invalidateElement(element){const win=getDocWin(this._doc);if(!this._drawing&&!this._updateRequested){if(!this._requestTimer&&!this.$_testing){this._requestTimer=win.requestAnimationFrame(this._containerRender);}this._updateRequested=true;}}invalidateElements(){let force=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;this._rootElement.invalidate(force,true);}refresh(){this.invalidateLayout();this.invalidateElements();}_render(timestamp){if(this.disposing){return;}this._updateRequested=false;this._offsetX=this._containerDom.offsetLeft;this._offsetY=this._containerDom.offsetTop;// let op = this._gridContainer.offsetParent;
    // while (op) {
    //     this._offsetX += op.offsetLeft;
    //     this._offsetY += op.offsetTop;
    //     op = op.offsetParent;
    // }
    this._drawing=true;try{this.$$_render(timestamp);//, null, 0, 0);
    // if (this._resetSizeCallback) {
    //     this._resetSizeCallback();
    //     delete this._resetSizeCallback;
    // }
    }finally{this._scrolling=false;this._drawing=false;this._invalidated=false;this._requestTimer=null;this._doAfterRender();}}$$_render(timestamp){const div=this._containerDom;const x=0;//div.clientLeft;
    const y=0;//div.clientTop;
    const w=!isNaN(this._testWidth)?this._testWidth:div.clientWidth;const h=!isNaN(this._testHeight)?this._testHeight:div.clientHeight;this._layoutChildren(new Rectangle(x,y,w,h));if(this._layoutNeeded){this._doLayout(new Rectangle(x,y,w,h));this._layoutNeeded=false;}else {this._doPrepareRender(new Rectangle(x,y,w,h));}this._doRenderHtml(new Rectangle(x,y,w,h));}_layoutChildren(bounds){}_doLayout(bounds){}_doAfterRender(){}_doPrepareRender(bounds){}_doRenderHtml(bounds){this._doDrawContainer(bounds);this._drawElement(this._rootElement);this._validateChildren(this._rootElement);}_doDrawContainer(bounds){}_drawElement(element){element.draw();for(let i=0,cnt=element.childCount;i<cnt;i++){const elt=element.getChild(i);if(elt.visible){this._drawElement(elt);}}}_validateChildren(element){for(let i=0,cnt=element.childCount;i<cnt;i++){const elt=element.getChild(i);elt.validate();}}_registerEventHandlers(container){const win=getWin(container);container.style.cursor=this._defaultCursor;this.$_addListener(win,"resize",this._resizeHandler.bind(this),false);this.$_addListener(win,"mousemove",this._mouseMoveHandler.bind(this),false);this.$_addListener(win,"mouseup",this._mouseUpHandler.bind(this),false);this.$_addListener(win,"focus",this._focusHandlerFireFox.bind(this),true);// 이벤트가 발생한 객체에서만 발생하고 부모로 전달되지는 않는다.
    this.$_addListener(win,"focusin",this._focusinHandler.bind(this),true);// 이벤트가 상위 객체로 전달된다.
    this.$_addListener(win,"focusout",this._focusoutHandler.bind(this),true);// 이벤트가 상위 객체로 전달된다.
    this.$_addListener(win,"mousedown",this._globalMouseDownHandler.bind(this),false);this.$_addListener(container,"keydown",this._keyDownHandler.bind(this),false);this.$_addListener(container,"keyup",this._keyUpHandler.bind(this),false);this.$_addListener(container,"keypress",this._keyPressHandler.bind(this),false);this.$_addListener(container,"click",this._clickHandler.bind(this),false);this.$_addListener(container,"dblclick",this._dblclickHandler.bind(this),false);this.$_addListener(container,"mousedown",this._mouseDownHandler.bind(this),false);this.$_addListener(container,"mouseenter",this._mouseEnterHandler.bind(this),false);this.$_addListener(container,"mouseleave",this._mouseLeaveHandler.bind(this),false);this.$_addListener(container,"mouseover",this._mouseOverHandler.bind(this),false);this.$_addListener(container,"focus",this._focusHandler.bind(this),false);this.$_addListener(container,"contextmenu",this._contextMenuHander.bind(this),false);this.$_addListener(container,"blur",this._blurHandler.bind(this),false);// this.$_addListener(canvas, "drop", this._dropHandler.bind(this), false);
    this.$_addListener(container,"selectstart",this._selectstartHandler.bind(this),false);this.$_addListener(container,"wheel",this._wheelHandler.bind(this),false);//Utils.isPassive() ? {capture: false, passive: false} : false);
    this.$_addListener(container,"dragstart",this._dragStartHandler.bind(this),false);this.$_addListener(container,"dragend",this._dragEndHandler.bind(this),false);this.$_addListener(container,"dragover",this._dragOverHandler.bind(this),false);this.$_addListener(container,"dragenter",this._dragEnterHandler.bind(this),false);this.$_addListener(container,"dragleave",this._dragLeaveHandler.bind(this),false);this.$_addListener(container,"drop",this._dragDropHandler.bind(this),false);}$_addListener(node,event,handler,capture){if(!(node in this._eventHandlers)){this._eventHandlers[node]={};}if(!(event in this._eventHandlers[node])){this._eventHandlers[node][event]=[];}this._eventHandlers[node][event].push([handler,capture]);node.addEventListener(event,handler,capture);if(this._eventNodes.indexOf(node)<0){this._eventNodes.push(node);}}$_removeListener(node,event){if(node in this._eventHandlers){const handlers=this._eventHandlers[node];if(event in handlers){const eventHandlers=handlers[event];for(let i=eventHandlers.length;i--;){const handler=eventHandlers[i];node.removeEventListener(event,handler[0],handler[1]);}}}}$_removeListenerAll(){let node=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;const nodes=node?[node]:this._eventNodes;for(let i=0,cnt=nodes.length;i<cnt;i++){const elt=nodes[i];if(elt in this._eventHandlers){const events=this._eventHandlers[elt];for(let event in events){const handlers=events[event];for(let j=handlers.length;j--;){const handler=handlers[j];elt.removeEventListener(event,handler[0],handler[1]);}}}}}_unloadHandler(){// 등록된 모든 handler를 삭제해야한다.
    // $_addListener로 등록했다면 $_removeListenerAll로 삭제가능.
    this.$_removeListenerAll();this._containerDiv=null;this._containerDom=null;}_resizeHandler(event){this._doResized(event);this.invalidateLayout();}_doResized(event){}_isEnabled(){return this._activeTool&&!this._disabled;}_keyDownHandler(event){if(this._isEnabled()){// const ctrl = _isMac && event.metaKey || !_isMac && event.ctrlKey;
    // this._activeTool.keyDown(event.keyCode, event.ctrlKey, event.shiftKey, event.altKey, event);
    if(this._activeTool.keyDown(event)){event.preventDefault();event.stopImmediatePropagation();}}}_keyUpHandler(event){if(this._isEnabled()){// const ctrl = _isMac && event.metaKey || !_isMac && event.ctrlKey;
    this._activeTool.keyUp(event);}}_keyPressHandler(event){if(this._isEnabled()){this._activeTool.keyPress(event);}}eventToContainer(event){const elt=this._containerDom;// event.target; // canvas로 간주하면 window로 이벤트 핸들링을 해도 동일하게 적용된다.
    const r=elt.getBoundingClientRect();return new Point(event.pageX-r.left,event.pageY-r.top);}toOffset(event){if(!this.$_testing){/*
                event.mouseX = event.clientX - _offsetX;
                event.mouseY = event.clientY - _offsetY;
                */const elt=this._containerDom;// event.target; // canvas로 간주하면 window로 이벤트 핸들링을 해도 동일하게 적용된다.
    const r=elt.getBoundingClientRect();event.mouseX=event.clientX-r.left;event.mouseY=event.clientY-r.top;}return event;}toOffsetTouch(event){const elt=this._containerDom;// event.target; // canvas로 간주하면 window로 이벤트 핸들링을 해도 동일하게 적용된다.
    const r=elt.getBoundingClientRect();const touch=event.touches[0]||event.changedTouches[0];// 
    event["mouseX"]=touch.clientX-r.left;event["mouseY"]=touch.clientY-r.top;return event;}_clickHandler(event){if(this._isEnabled())this._activeTool.click(this.toOffset(event));else event.preventDefault();}_dblclickHandler(event){if(this._isEnabled())this._activeTool.dblclick(this.toOffset(event));else event.preventDefault();}$_getHtmlElement(target){const win=getWin(this._containerDom);if(target instanceof win.HTMLElement){return target;}if(target instanceof Node){return target.parentElement;}}_isAutoFocus(){return true;}_mouseDownHandler(event){var _a;if(this._isEnabled()){VisualContainer.$_mouseContainer=this["$_hash"];if(this._isAutoFocus()){this.setFocus();}this.toOffset(event);this._currentX=event["mouseX"];this._currentY=event["mouseY"];const elt=this.findElementAt(this._currentX,this._currentY,false,false);const view=elt&&elt.getAncestor(ScrollBar$1);// focus를 가지지 않은 상태에서 scrollBar를 클릭하면focus를 주어야 한다 그래야 키보드가 작동한다.
    // wheel을 움직이는 경우에는 focus를 주지 않는다.
    if(view){(_a=this.activeTool)===null||_a===void 0?void 0:_a.setFocus();this._scrollTool["_previous"]=this.activeTool;this.activeTool=this._scrollTool;}else if(!this.activeTool){this._defaultTool["_previous"]=this.activeTool;this.activeTool=this._defaultTool;}this.activeTool["_mouseEventTarget"]=this.$_getHtmlElement(event.target);this.activeTool.mouseDown(event);}else {event.preventDefault();}}_mouseMoveHandler(event){const win=getWin(this._containerDom);this.toOffset(event);this._currentX=event["mouseX"];this._currentY=event["mouseY"];if(this._isEnabled()){const tool=this._activeTool;tool["_mouseEventTarget"]=event.target instanceof win.HTMLElement?event.target:null;tool.mouseMove(event);const tracker=tool.dragTracker;if(tracker&&VisualContainer.$_mouseContainer==this["$_hash"]){for(let h in VisualContainer.$_Containers){const c=VisualContainer.$_Containers[h];if(c!==this){const tool=c["_activeTool"];if(tool){tool.dragFrom(event,tracker);}}}}}}_mouseUpHandler(event){const mouseContainer=VisualContainer.$_mouseContainer==this["$_hash"];const win=getWin(this._containerDom);try{this.toOffset(event);this._currentX=event["mouseX"];this._currentY=event["mouseY"];if(this._isEnabled()){const tracker=this._activeTool.dragTracker;this._activeTool["_mouseEventTarget"]=event.target instanceof win.HTMLElement?event.target:null;this._activeTool.mouseUp(event);if(this._activeTool instanceof ScrollTool){this.activeTool=this._activeTool.previous;}if(tracker&&tracker.linkable&&mouseContainer){for(let h in VisualContainer.$_Containers){const c=VisualContainer.$_Containers[h];if(c!==this){const tool=c["_activeTool"];if(tool){tool.dropFrom(event,tracker);}}}}}else {event.preventDefault();}}finally{if(this._activeTool){this._activeTool.dragTracker=null;}if(mouseContainer){VisualContainer.$_mouseContainer=-1;}}}_mouseEnterHandler(event){if(this._isEnabled()){this._activeTool.mouseEnter(this.toOffset(event));}}_mouseLeaveHandler(event){if(this._isEnabled()){this._activeTool.mouseLeave(this.toOffset(event));}}_mouseOverHandler(event){if(this._isEnabled()){this._activeTool.mouseOver(this.toOffset(event));}}/**
         * - 드래그 하는동안은 MouseMove가 발생하지 않기 때문에 Start End를 제외하고 타겟을 직접 넣어준다.
         * @param event
         */_dragStartHandler(event){if(this._isEnabled())this._activeTool.dragStart(event);else event.preventDefault();}_dragEndHandler(event){if(this._isEnabled())this._activeTool.dragEnd(event);else event.preventDefault();}_dragOverHandler(event){if(this._isEnabled()){this.activeTool["_mouseEventTarget"]=this.$_getHtmlElement(event.target);this._activeTool.dragOver(event);}else event.preventDefault();}_dragEnterHandler(event){if(this._isEnabled()){this.activeTool["_mouseEventTarget"]=this.$_getHtmlElement(event.target);this._activeTool.dragEnter(event);}else event.preventDefault();}_dragLeaveHandler(event){if(this._isEnabled()){this.activeTool["_mouseEventTarget"]=this.$_getHtmlElement(event.target);this._activeTool.dragLeave(event);}else event.preventDefault();}_dragDropHandler(event){if(this._isEnabled()){this.activeTool["_mouseEventTarget"]=this.$_getHtmlElement(event.target);this._activeTool.dragDrop(event);}else event.preventDefault();}_contextMenuHander(event){const win=getWin(this._containerDom);this.toOffset(event);this._currentX=event["mouseX"];this._currentY=event["mouseY"];if(this._isEnabled()){this._activeTool["_mouseEventTarget"]=event.target instanceof win.HTMLElement?event.target:null;this._activeTool.contextMenu(this.toOffset(event));}}// IE 9 FireFox Chrome Opera Safari IE 11 Edge
    _wheelHandler(event){if(this._isEnabled()){if(this._activeTool.mouseWheel(this.toOffset(event))){Utils.stopEvent(event);}}}_focusHandler(event){//console.log(document.activeElement);
    }_blurHandler(event){}_selectstartHandler(event){// IE9에서 선택 드래깅되는 문제
    return false;}_focusinHandler(event){}_globalMouseDownHandler(event){if(!Utils.isAncestorOf(this._containerDiv,event.target)){if(this._isEnabled()){this._activeTool.focusLeave(event);}}}_focusoutHandler(event){const out=Utils.isAncestorOf(this._containerDiv,event.target)&&event.relatedTarget&&!Utils.isAncestorOf(this._containerDiv,event.relatedTarget);if(out){if(this._isEnabled()){this._activeTool.focusLeave(event);}}}_focusHandlerFireFox(event){if(Utils.isAncestorOf(this._containerDiv,event.target)){if(this._isEnabled()){this._containerDom.setAttribute("tabindex","0");this._activeTool.setFocus(event.target);}}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    VisualContainer.FEEDBACK_ZINDEX=1000;//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    VisualContainer.$_Containers={};VisualContainer.$_mouseContainer=-1;// findContainer(event: MouseEvent): VisualContainer {
    //     for (let h in VisualContainer.$_Containers) {
    //         const c = VisualContainer.$_Containers[h];
    //         // if (c.contains(event.target)) {
    //         //     return c;
    //         // }
    //         if (event.button == 0 && VisualContainer.$_mouseContainer == event["$_hash"]) {
    //             return c;
    //         }
    //     }
    //     return null;
    // }
    VisualContainer.$_ActiveGrid=null;////////////////////////////////////////////////////////////////////////////////
    const $$_DT_DATE_TOKENS=["yy","yyyy","M","MM","d","dd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS"];const $$_DT_DATE_SEPARATORS=[".","/","-",":"];const U_Z="Z".charCodeAt(0);const L_Z="z".charCodeAt(0);const U_A="A".charCodeAt(0);const L_A="a".charCodeAt(0);const L_Y="y".charCodeAt(0);const U_M="M".charCodeAt(0);const L_M="m".charCodeAt(0);const L_D="d".charCodeAt(0);const U_H="H".charCodeAt(0);const L_H="h".charCodeAt(0);const U_S="S".charCodeAt(0);const L_S="s".charCodeAt(0);const pad=function(v){return v<10?"0"+v:String(v);};const pad3=function(v){return v<10?"00"+v:v<100?"0":String(v);};/** @internal */class DatetimeFormatter{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(format){this._baseYear=2000;this._preserveTime=false;this._hasAmPm=false;this._formatString="";this.formatString=format;}static getFormatter(format){let f=DatetimeFormatter.Formatters[format];if(!f){DatetimeFormatter.Formatters[format]=f=new DatetimeFormatter(format);}return f;}static get Default(){return DatetimeFormatter.getFormatter(DatetimeFormatter.DEFAULT_FORMAT);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** format */get format(){return this._format;}/** formatString */get formatString(){return this._formatString;}set formatString(value){value=value||DatetimeFormatter.DEFAULT_FORMAT;if(value!=this._formatString){this._tokens=[];this.parse(value);this._formatString=value;}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getText(d){if(!this._tokens){return "";}const date=d instanceof Date?d:new Date(d);const tokens=this._tokens;let s="";for(var i=0,cnt=tokens.length;i<cnt;i++){var t=tokens[i];var len=t.length;switch(t.charCodeAt(0)){case L_Y:s+=len>2?date.getFullYear():pad(date.getFullYear()%100);break;case U_M:s+=len>1?pad(date.getMonth()+1):date.getMonth()+1;break;case L_D:s+=len>1?pad(date.getDate()):date.getDate();break;case U_H:s+=len>1?pad(date.getHours()):date.getHours();break;case L_H:if(this._hasAmPm){let h=date.getHours();if(h==0){h=12;}else if(h>12){h=h-12;}s+=len>1?pad(h):h;}else {s+=len>1?pad(date.getHours()):date.getHours();}break;case L_M:s+=len>1?pad(date.getMinutes()):date.getMinutes();break;case L_S:s+=len>1?pad(date.getSeconds()):date.getSeconds();break;case L_A:case U_A:if(date.getHours()<12){s+=this._amText;}else {s+=this._pmText;}break;case U_S:let v=date.getMilliseconds();if(len==3)s+=pad3(v);else if(len==2)s+=pad(v);else s+=v.toString().substr(0,len);break;/*
                     case U_Y:
                     break;
                     case U_D:
                     s += day of year
                     break;
                     */default:s+=t;}}return s;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    parseDateFormatTokens(format){var tokens=[];if(format){const str=format.trim();const len=str.length;let i=0;while(i<len){let tok=str.charAt(i);if($$_DT_DATE_SEPARATORS.indexOf(tok)>=0){tokens.push(tok);i++;}else {let p=i++;while(i<len&&str.charAt(i)==tok){i++;}tok=str.substring(p,i);if($$_DT_DATE_TOKENS.indexOf(tok)<0){let c=tok.charCodeAt(0);if(c>=U_A&&c<=U_Z||c>=L_A&&c<=L_Z){throw new Error("Invalid datetime write format: "+format);}}tokens.push(tok);}if(i<len&&Utils.isWhiteSpace(tok=str.charAt(i))){tokens.push(tok);while(i<len&&Utils.isWhiteSpace(str.charAt(i))){i++;}}}}return tokens;}parse(fmt){this._amText="AM";this._pmText="PM";if(fmt){const arr=fmt.split(";");this._format=arr[0]||DatetimeFormatter.DEFAULT_FORMAT;this._tokens=this.parseDateFormatTokens(this._format);this._hasAmPm=this._tokens.indexOf("a")>=0||this._tokens.indexOf("A")>=0;if(arr.length>1&&arr[1]){const ampms=arr[1].split(",");if(ampms.length>0&&ampms[0]){this._amText=ampms[0];}if(ampms.length>1&&ampms[1]){this._pmText=ampms[1];}}}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    DatetimeFormatter.DEFAULT_FORMAT="yyyy/MM/dd";//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    DatetimeFormatter.Formatters={};////////////////////////////////////////////////////////////////////////////////
    class DatetimeParser{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(format){//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._format=null;this._baseYear=2000;this._patterns=[];this._amText="AM";this._pmText="PM";format&&(this.format=format);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** format */get format(){return this._format;}set format(value){if(value!=this._format){if(!value){throw new Error("Invalid empty date format");}this._format=value;this.parseFormat(value);}}/** baseYear */get baseYear(){return this._baseYear;}set baseYear(value){if(value!=this._baseYear){this._baseYear=value;}}/** amText */get amText(){return this._amText;}set amText(value){if(value!=this._amText){this._amText=value;}}/** pmText */get pmText(){return this._pmText;}set pmText(value){if(value!=this._pmText){this._pmText=value;}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    parse(str){try{let y=0;let m=1;let d=1;let h=0;let n=0;let s=0;let S=0;let am=0;let pm=0;let len=this._patterns.length;let p=0;const strlen=str.length;for(let i=0;i<len&&p<strlen;i++){var pattern=this._patterns[i];var c=pattern.c;var l=pattern.len;switch(c){case"y":y=parseInt(str.substr(p,l));break;case"M":m=parseInt(str.substr(p,l));break;case"d":d=parseInt(str.substr(p,l));break;case"a":if(this._amText&&str.indexOf(this._amText,p)==p){am=12;l=this._amText.length;}else if(this._pmText&&str.indexOf(this._pmText,p)==p){pm=12;l=this._pmText.length;}else {return null;}break;case"H":h=parseInt(str.substr(p,l));break;case"h":h=parseInt(str.substr(p,l));break;case"m":n=parseInt(str.substr(p,l));break;case"s":s=parseInt(str.substr(p,l));break;case"S":S=parseInt(str.substr(p,l));break;case".":case"/":case"-":case":":case" ":/*
                            if (strict) {
                                if (str.charAt(p) != c) {
                                    return null;
                                }
                            } else*/if(DatetimeParser.DATE_SEPARATORS.indexOf(str.charAt(p))<0){return null;}break;default:return null;}p+=l;}if(y<100){y+=this._baseYear;}if(am>0){if(h==12){h=0;}}else if(pm>0&&h<12){h+=12;}return new Date(y,m-1,d,h,n,s,S);}catch(err){return null;}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    parseFormat(format){var s=format;var len=s.length;var i=0;var p;var c;var l;this._patterns=[];while(i<len){p=i;c=s.charAt(i);if(Utils.isWhiteSpace(c)){i++;while(i<len&&Utils.isWhiteSpace(s.charAt(i))){i++;}this._patterns.push({c:" ",p:p,len:i-p});}else {l=0;switch(c){case"y":l=this.getPattern(s,i,c);if(l!=4&&l!=2)this.throwInvalidFormat(s);break;case"M":case"d":case"H":case"h":case"m":case"s":l=this.getPattern(s,i,c);if(l!=2)this.throwInvalidFormat(s);break;case"S":l=this.getPattern(s,i,c);if(l!=3)this.throwInvalidFormat(s);break;case"a":case".":case"/":case"-":case":":l=this.getPattern(s,i,c);if(l!=1)this.throwInvalidFormat(s);break;default:this.throwInvalidFormat(s);}if(l>0){this._patterns.push({c:c,p:i,len:l});i+=l;}}}}throwInvalidFormat(format){throw new Error("Invalid date format: "+format);}throwInvalidValue(value){throw new Error("Invalid date format: "+value);}getPattern(str,i,c){var len=1;while(++i<str.length&&str.charAt(i)==c){len++;}return len;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    DatetimeParser.DATE_SEPARATORS="./-: ";////////////////////////////////////////////////////////////////////////////////
    // ISODatetimeParser.ts
    // 2021. 03. 05. created by woori
    // -----------------------------------------------------------------------------
    // Copyright (c) 2019 Wooritech Inc.
    // All rights reserved.
    ////////////////////////////////////////////////////////////////////////////////
    class ISODatetimeParser{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){}static parse(str,check){var finalDate=null;try{var t=str.indexOf("T");var dateStr=str.substring(0,t);var timeStr=str.substring(t+1);var arr=dateStr.split("-");var len=arr.length;var year=parseInt(arr[0]);var month=len>1?parseInt(arr[1]):1;var date=len>2?parseInt(arr[2]):1;var multiplier;var offsetHours;var offsetMinutes;var offsetStr;if(timeStr.indexOf("Z")!=-1){multiplier=1;offsetHours=0;offsetMinutes=0;timeStr=timeStr.replace("Z","");}else if(timeStr.indexOf("+")!=-1){multiplier=1;offsetStr=timeStr.substring(timeStr.indexOf("+")+1,timeStr.length);offsetHours=Number(offsetStr.substring(0,offsetStr.indexOf(":")));offsetMinutes=Number(offsetStr.substring(offsetStr.indexOf(":")+1,offsetStr.length));timeStr=timeStr.substring(0,timeStr.indexOf("+"));}else if(timeStr.indexOf("-")!=-1){multiplier=-1;offsetStr=timeStr.substring(timeStr.indexOf("-")+1,timeStr.length);offsetHours=Number(offsetStr.substring(0,offsetStr.indexOf(":")));offsetMinutes=Number(offsetStr.substring(offsetStr.indexOf(":")+1,offsetStr.length));timeStr=timeStr.substring(0,timeStr.indexOf("-"));}else {multiplier=0;}var timeArr=timeStr.split(":");len=timeArr?timeArr.length:0;var hour=len>0?parseInt(timeArr[0]):0;var minutes=len>1?parseInt(timeArr[1]):0;var secondsArr=len>2?String(timeArr[2]).split("."):null;var seconds=secondsArr&&secondsArr.length>0?parseInt(secondsArr[0]):0;var milliseconds=secondsArr&&secondsArr.length>1?1000*parseFloat("0."+secondsArr[1]):0;var utc=Date.UTC(year,month-1,date,hour,minutes,seconds,milliseconds);var offset=multiplier?(offsetHours*3600000+offsetMinutes*60000)*multiplier:ISODatetimeParser._zoneOffset;finalDate=new Date(utc-offset);if(check&&isNaN(finalDate.getTime())){throw "Invalidate date text: "+str;}}catch(e){if(check){var eStr="Invalid date Text: "+str;eStr+="\nError: "+e.toString();throw eStr;}}return finalDate;}}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ISODatetimeParser._zoneOffset=new Date().getTimezoneOffset()*60*1000;////////////////////////////////////////////////////////////////////////////////
    /** @internal */class DatetimeReader{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(format){//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._format="";this._type=0;this._parser=new DatetimeParser(null);this.format=format;}static initialize(){DatetimeReader.Default.amText="AM";DatetimeReader.Default.pmText="PM";DatetimeReader.Default.baseYear=2000;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** format */get format(){return this._format;}set format(value){if(value!=this._format){this._format=value;this.parse(value);}}/** amText */get amText(){return this._parser.amText;}set amText(value){this._parser.amText=value;}/** pmText */get pmText(){return this._parser.pmText;}set pmText(value){this._parser.pmText=value;}/** baseYear */get baseYear(){return this._parser.baseYear;}set baseYear(value){this._parser.baseYear=value;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    toDate(value){if(!value){return null;}var d=null;switch(this._type){case 0:d=this._parser.parse(value/*, strict*/);break;case 1:d=ISODatetimeParser.parse(value,false);break;case 2:const v=parseInt(value);d=new Date(v);break;case 3:default:d=new Date(value);break;}return d&&!isNaN(d.getTime())?d:null;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    parse(fmt){if(fmt){const s=fmt.toLowerCase();this._type=Math.max(0,DatetimeReader.Formats.indexOf(s));if(this._type==0){this._parser.format=fmt;}}}}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    DatetimeReader.Formats=["custom","iso","timestamp","platform"];DatetimeReader.Default=new DatetimeReader("yyyy/MM/dd HH:mm:ss");DatetimeReader.initialize();////////////////////////////////////////////////////////////////////////////////
    /**@internal */class ExpressionSyntaxError extends Error{constructor(message,tokenPos){super(message);this.message=message;this.tokenPos=tokenPos;}}/**@internal */class ExpressionEvaluationError extends Error{constructor(message){super(message);this.message=message;}}const _pad=function(value,len,c){len=Math.max(len||2,1);c=c||'0';return new Array(len-String(value).length+1).join(c)+value;};const $$_createTokenArray=function(){var arr=[];for(var _len12=arguments.length,args=new Array(_len12),_key12=0;_key12<_len12;_key12++){args[_key12]=arguments[_key12];}for(var arg of args){arr[arg]=true;}return arr;};const IS_CHECK=$$_createTokenArray(26/* TokenKind.Is */,27/* TokenKind.IsNot */);const IS_RELATIVE=$$_createTokenArray(40/* TokenKind.Equal */,45/* TokenKind.NotEqual */,46/* TokenKind.Like */,47/* TokenKind.NotLike */,48/* TokenKind.ILike */,49/* TokenKind.NotILike */,50/* TokenKind.Match */,51/* TokenKind.NotMatch */,52/* TokenKind.IMatch */,53/* TokenKind.NotIMatch */,41/* TokenKind.Greater */,42/* TokenKind.GreaterEqual */,43/* TokenKind.Lower */,44/* TokenKind.LowerEqual */);const IS_ADDITIVE=$$_createTokenArray(4/* TokenKind.Minus */,5/* TokenKind.Plus */,18/* TokenKind.Or */,19/* TokenKind.Xor */);const IS_MULTIPLICATIVE=$$_createTokenArray(11/* TokenKind.And */,3/* TokenKind.Star */,2/* TokenKind.Slash */,14/* TokenKind.Div */,15/* TokenKind.Mod */,16/* TokenKind.Shl */,17/* TokenKind.Shr */);/**@internal */class ExpressionLexer{constructor(){this.IS_IDENT=[];this.IS_INTEGER=[];this.IS_NUMBER=[];this.IS_WHITE=[];this.IS_END=[];this.QUOTATION="\"".charCodeAt(0);this.SQUOTATION="'".charCodeAt(0);this.BACKSLASH="\\".charCodeAt(0);this.BACKTICK="`".charCodeAt(0);this.Keywords={"str":20/* TokenKind.ToStr */,"num":21/* TokenKind.ToNum */,"bool":23/* TokenKind.ToBool */,"not":13/* TokenKind.Not */,"len":24/* TokenKind.Length */,"and":11/* TokenKind.And */,"in":12/* TokenKind.In */,"mod":15/* TokenKind.Mod */,"or":18/* TokenKind.Or */,"div":14/* TokenKind.Div */,"shl":16/* TokenKind.Shl */,"shr":17/* TokenKind.Shr */,"xor":19/* TokenKind.Xor */,"is":26/* TokenKind.Is */,"like":46/* TokenKind.Like */,"ilike":48/* TokenKind.ILike */,"match":50/* TokenKind.Match */,"imatch":52/* TokenKind.IMatch */,"defined":35/* TokenKind.Defined */,"null":34/* TokenKind.Null */,"empty":36/* TokenKind.Empty */,"nan":37/* TokenKind.NaN */,"datestr":90/* TokenKind.ToDateStr */,"year":91/* TokenKind.ToYear */,"month":92/* TokenKind.ToMonth */,"day":93/* TokenKind.ToDay */,"hour":94/* TokenKind.ToHour */,"rounddown":95/* TokenKind.ToRoundDown */};this._procs=null;this._source=null;this._len=0;this._tokenId=0;this._run=0;this._runAhead=0;this._nextRun=0;this._lineNo=0;this._linePos=0;this._tokenPos=0;for(var i=0;i<256;i++){this.IS_IDENT[i]=i==="_".charCodeAt(0)||i===':'.charCodeAt(0)||i>="0".charCodeAt(0)&&i<="9".charCodeAt(0)||i>="a".charCodeAt(0)&&i<="z".charCodeAt(0)||i>="A".charCodeAt(0)&&i<="Z".charCodeAt(0);this.IS_INTEGER[i]=i>="0".charCodeAt(0)&&i<="9".charCodeAt(0)||i>="a".charCodeAt(0)&&i<="f".charCodeAt(0)||i>="A".charCodeAt(0)&&i<="F".charCodeAt(0);this.IS_NUMBER[i]=i>="0".charCodeAt(0)&&i<="9".charCodeAt(0)||i==".".charCodeAt(0)||i==="e".charCodeAt(0)||i==="E".charCodeAt(0);this.IS_WHITE[i]=i>=1&&i<=9||i==11||i>=14&&i<=32;this.IS_END[i]=i==0;// || (i == 10) || (i == 13); // 개행문자는 끝이 아니므로 제외
    }this.initProcs();}clear(){this._source=null;}next(){var c=this._source.charCodeAt(this._run);this._tokenPos=this._run;if(c<256){this._procs[c].call(this);}else {this.identProc();}}unkownProc(){this._tokenId=0/* TokenKind.Unknown */;this._run++;}// symbolProc(): void {
    // 	this._tokenId = TokenKind.Symbol;
    // 	this._run++;
    // }
    commaProc(){this._tokenId=32/* TokenKind.Comma */;this._run++;}crProc(){this._tokenId=33/* TokenKind.CRLF */;if(this._source.charCodeAt(this._run+1)==10){this._run+=2;}else {this._run++;}this._lineNo++;this._linePos=this._run;}lfProc(){this._tokenId=33/* TokenKind.CRLF */;this._run++;this._lineNo++;this._linePos=this._run;}equalProc(){this._tokenId=40/* TokenKind.Equal */;this._run++;}greaterProc(){if(this._source.charAt(this._run+1)=="="){this._tokenId=42/* TokenKind.GreaterEqual */;this._run+=2;}else {this._tokenId=41/* TokenKind.Greater */;this._run++;}}lowerProc(){if(this._source.charAt(this._run+1)=="="){this._tokenId=44/* TokenKind.LowerEqual */;this._run+=2;}else if(this._source.charAt(this._run+1)==">"){this._tokenId=45/* TokenKind.NotEqual */;this._run+=2;}else {this._tokenId=43/* TokenKind.Lower */;this._run++;}}nextIdent(){var i=this._run;while(i<this._len&&!this.IS_IDENT[this._source.charCodeAt(i)]){i++;}var j=i;while(i<this._len&&this.IS_IDENT[this._source.charCodeAt(i)]){i++;}if(i>j){this._nextRun=i;return this._source.substr(j,i-j).toLowerCase();}else {return null;}}identProc(){var i=this._run;while(this._run<this._len&&(this.IS_IDENT[this._source.charCodeAt(this._run)]||this._source.charCodeAt(this._run)>255)){this._run++;}var s=this._source.substr(i,this._run-i).toLowerCase();if(this.Keywords.hasOwnProperty(s)){this._tokenId=this.Keywords[s];switch(this._tokenId){case 13/* TokenKind.Not */:s=this.nextIdent();if(s){switch(s){case"like":this._tokenId=47/* TokenKind.NotLike */;this._run=this._nextRun;break;case"ilike":this._tokenId=49/* TokenKind.NotILike */;this._run=this._nextRun;break;case"match":this._tokenId=51/* TokenKind.NotMatch */;this._run=this._nextRun;break;case"imatch":this._tokenId=53/* TokenKind.NotIMatch */;this._run=this._nextRun;break;}}break;case 26/* TokenKind.Is */:s=this.nextIdent();if(s=="not"){this._tokenId=27/* TokenKind.IsNot */;this._run=this._nextRun;}break;}}else {this._tokenId=10/* TokenKind.Identifier */;}}integerProc(){this._tokenId=64/* TokenKind.IntegerLiteral */;this._run++;while(this._run<this._len&&this.IS_INTEGER[this._source.charCodeAt(this._run)]){this._run++;}}numberProc(){this._tokenId=64/* TokenKind.IntegerLiteral */;this._run++;while(this._run<this._len&&this.IS_NUMBER[this._source.charCodeAt(this._run)]){if(this._source.charAt(this._run)=="."){if(this._source.charAt(this._run+1)=="."){// dotdot에서 처리함.
    break;}this._tokenId=63/* TokenKind.FloatLiteral */;}this._run++;}}minusProc(){this._tokenId=4/* TokenKind.Minus */;this._run++;}plusProc(){this._tokenId=5/* TokenKind.Plus */;this._run++;}pointProc(){var s=this._source.charAt(this._run+1);if(s=="."){this._tokenId=68/* TokenKind.DotDot */;this._run+=2;}else {this._tokenId=65/* TokenKind.Point */;this._run++;}}roundOpenProc(){this._tokenId=66/* TokenKind.RoundOpen */;this._run++;}roundCloseProc(){this._tokenId=67/* TokenKind.RoundClose */;this._run++;}slashProc(){this._tokenId=2/* TokenKind.Slash */;this._run++;}spaceProc(){this._tokenId=71/* TokenKind.Space */;this._run++;while(this._run<this._len&&this.IS_WHITE[this._source.charCodeAt(this._run)]){this._run++;}}bracketOpenProc(){this._tokenId=69/* TokenKind.BracketOpen */;this._run++;}bracketCloseProc(){this._tokenId=70/* TokenKind.BracketClose */;this._run++;}starProc(){this._tokenId=3/* TokenKind.Star */;this._run++;}modProc(){this._tokenId=15/* TokenKind.Mod */;this._run++;}stringProc(){this._tokenId=61/* TokenKind.StringLiteral */;do{var c=this._source.charCodeAt(this._run);if(this.IS_END[c]){throw new ExpressionSyntaxError("Untermintated string",c);}if(c==this.BACKSLASH){this._run++;}this._run++;}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.QUOTATION);this._run++;}smallStringProc(){this._tokenId=61/* TokenKind.StringLiteral */;do{var c=this._source.charCodeAt(this._run);if(this.IS_END[c]){throw new ExpressionSyntaxError("Untermintated string",c);}if(c==this.BACKSLASH){this._run++;}this._run++;}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.SQUOTATION);this._run++;}backtickProc(){this._tokenId=96/* TokenKind.Backtick */;do{var c=this._source.charCodeAt(this._run);if(this.IS_END[c]){throw new ExpressionSyntaxError("Untermintated backtick string",c);}this._run++;}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.BACKTICK);this._run++;}initProcs(){this._procs=[];// for (let i = 1; i <= 255; i++) {
    // 	this._procs[i] = this.symbolProc;
    // }
    for(let i=1;i<=32;i++){this._procs[i]=this.spaceProc;}this._procs[10]=this.lfProc;this._procs[13]=this.crProc;this._procs["$".charCodeAt(0)]=this.integerProc;this._procs[this.QUOTATION]=this.stringProc;this._procs[this.SQUOTATION]=this.smallStringProc;this._procs[this.BACKTICK]=this.backtickProc;for(let i=0;i<=9;i++){this._procs["0".charCodeAt(0)+i]=this.numberProc;}for(let i="A".charCodeAt(0);i<="Z".charCodeAt(0);i++){this._procs[i]=this.identProc;}for(let i="a".charCodeAt(0);i<="z".charCodeAt(0);i++){this._procs[i]=this.identProc;}this._procs[":".charCodeAt(0)]=this.identProc;this._procs["_".charCodeAt(0)]=this.identProc;this._procs["(".charCodeAt(0)]=this.roundOpenProc;this._procs[")".charCodeAt(0)]=this.roundCloseProc;this._procs["*".charCodeAt(0)]=this.starProc;this._procs["+".charCodeAt(0)]=this.plusProc;this._procs[",".charCodeAt(0)]=this.commaProc;this._procs["-".charCodeAt(0)]=this.minusProc;this._procs[".".charCodeAt(0)]=this.pointProc;this._procs["/".charCodeAt(0)]=this.slashProc;this._procs["%".charCodeAt(0)]=this.modProc;this._procs["<".charCodeAt(0)]=this.lowerProc;this._procs["=".charCodeAt(0)]=this.equalProc;this._procs[">".charCodeAt(0)]=this.greaterProc;this._procs["[".charCodeAt(0)]=this.bracketOpenProc;this._procs["]".charCodeAt(0)]=this.bracketCloseProc;}get tokenId(){return this._tokenId;}get tokenLoc(){return {x:this._tokenPos-this._linePos,y:this._lineNo};}get tokenLen(){return this._run-this._tokenPos;}get token(){return this._source.substr(this._tokenPos,this.tokenLen);}get isSpace(){return this._tokenId==71/* TokenKind.Space */;}init(source){this._source=source;this._len=source.length;this._lineNo=0;this._linePos=0;this._tokenPos=0;this._runAhead=this._run=0;this._tokenId=0;}charAhread(){this._runAhead=this._run;while(this._runAhead<this._len&&this._source.charCodeAt(this._runAhead)>0&&this._source.charCodeAt(this._runAhead)<=32){this._runAhead++;}return this._source.charCodeAt(this._runAhead);}nextId(tokenId){do{this.next();}while(this._run<this._len&&this._tokenId!=tokenId);}nextNoSpace(){if(this._run<this._len){do{this.next();}while(this._run<this._len&&this.isSpace);}}isFirstInLine(){if(this._tokenPos==0){return true;}var c;var runBack=this._tokenPos;runBack--;while(runBack>0&&this.IS_WHITE[this._source.charCodeAt(runBack)]){runBack--;}if(runBack==0){return true;}c=this._source.charCodeAt(runBack);if(c==10||c==13){return true;}return false;}}/**@internal */class ExpressionRuntime extends Base{constructor(){super();}isIdentifier(token){throw new Error("Token is not a valid Identifier: "+token);}evaluateIdentifier(idKey){throw new Error("Invalid identifier key: "+idKey);}evaluateIndexerI(idKey,index){throw new Error("Invalid identifier indexer: "+idKey);}evaluateIndexerS(idKey,index,capital){throw new Error("Invalid identifier indexer: "+idKey);}evaluateFunc(idKey,param){throw new Error("Invalid identifier func: "+idKey);}}/**@internal */class ExpressionNode{constructor(){}get value(){return undefined;}get asLiteral(){return null;}prepareValue(){}getLiteral(){return undefined;}isIdentifier(value){return false;}toString(){return String(this);}}/**@internal */class LiteralNode extends ExpressionNode{}/**@internal */class EmptyExpressionNode extends ExpressionNode{constructor(){super();}evaluate(runtime){return undefined;}toString(){return "";}}EmptyExpressionNode.Default=new EmptyExpressionNode();/**@internal */class ExpressionNodeImpl extends ExpressionNode{constructor(){super();this._operator=0/* TokenKind.Unknown */;}evaluate(runtime){if(this._literal){return this._literal.value;}else if(this._rightExpr){var v1=this._leftExpr.evaluate(runtime);var v2=this._rightExpr.evaluate(runtime);switch(this._operator){case 40/* TokenKind.Equal */:return v1==v2;case 45/* TokenKind.NotEqual */:return v1!=v2;case 41/* TokenKind.Greater */:return v1>v2;case 42/* TokenKind.GreaterEqual */:return v1>=v2;case 43/* TokenKind.Lower */:return v1<v2;case 44/* TokenKind.LowerEqual */:return v1<=v2;/*
                    * case TokenKind.Is: case TokenKind.IsNot:
                    */case 46/* TokenKind.Like */:return this.calcLike(v1,v2,false);case 47/* TokenKind.NotLike */:return !this.calcLike(v1,v2,false);case 48/* TokenKind.ILike */:return this.calcLike(v1,v2,true);case 49/* TokenKind.NotILike */:return !this.calcLike(v1,v2,true);case 50/* TokenKind.Match */:return this.calcMatch(v1,v2,false);case 51/* TokenKind.NotMatch */:return !this.calcMatch(v1,v2,false);case 52/* TokenKind.IMatch */:return this.calcMatch(v1,v2,true);case 53/* TokenKind.NotIMatch */:return !this.calcMatch(v1,v2,true);default:throw new ExpressionEvaluationError("Unknown operator: "+this._operator);}}else {return this._leftExpr.evaluate(runtime);}}toString(){var s="";if(this._literal){s=this._literal.toString();}else if(this._rightExpr){var s1=this._leftExpr.toString();var s2=this._rightExpr.toString();var op;switch(this._operator){case 40/* TokenKind.Equal */:op="=";break;case 45/* TokenKind.NotEqual */:op="<>";break;case 41/* TokenKind.Greater */:op=">";break;case 42/* TokenKind.GreaterEqual */:op=">=";break;case 43/* TokenKind.Lower */:op="<";break;case 44/* TokenKind.LowerEqual */:op="<=";break;case 46/* TokenKind.Like */:op="like";break;case 47/* TokenKind.NotLike */:op="not like";break;case 48/* TokenKind.ILike */:op="ilike";break;case 49/* TokenKind.NotILike */:op="not ilike";break;case 50/* TokenKind.Match */:op="match";break;case 51/* TokenKind.NotMatch */:op="not match";break;case 52/* TokenKind.IMatch */:op="imatch";break;case 53/* TokenKind.NotIMatch */:op="not imatch";break;case 32/* TokenKind.Comma */:op=",";break;default:op="<<ERROR>>";break;}s="("+s1+" "+op+" "+s2+")";}else {s=this._leftExpr.toString();}return s;}isIdentifier(value){return this._leftExpr&&!this._rightExpr&&this._leftExpr.isIdentifier(value);}prepareValue(){this._leftExpr.prepareValue();if(this._rightExpr==null){this._literal=this._leftExpr.getLiteral();}else {this._rightExpr.prepareValue();}}getLiteral(){return this._literal;}calcLike(v1,v2,ignoreCase){let s1=String(v1);let s2=String(v2);if(s1&&s2){if(ignoreCase){s1=s1.toLowerCase();s2=s2.toLowerCase();}let len=s2.length;if(len>1){const first=s2.charAt(0)=="%";const last=s2.charAt(len-1)=="%";if(first&&last){s2=s2.substr(1,len-2);return s1.indexOf(s2,0)>=0;}else if(first){s2=s2.substr(1,len-1);return s1.lastIndexOf(s2)==s1.length-s2.length;}else if(last){s2=s2.substr(0,len-1);return s1.indexOf(s2,0)==0;}else {return s1==s2;}}else if(s2=="%"){return false;}else {return s1==s2;}}return false;}calcMatch(v1,v2,ignoreCase){var exp=new RegExp(v2,"m"+(ignoreCase?"i":""));return exp.test(v1);}}/**@internal */class CheckableNode extends ExpressionNode{get value(){return undefined;}get asLiteral(){return this;}evaluate(runtime){return undefined;}}/**@internal */class DefinedNode extends CheckableNode{toString(){return "defined";}}/**@internal */class EmptyNode extends CheckableNode{toString(){return "empty";}}/**@internal */class NullNode extends CheckableNode{get value(){return NaN;}toString(){return "null";}}/**@internal */class NanNode extends CheckableNode{toString(){return "NaN";}}/**@internal */class CheckNode extends ExpressionNodeImpl{constructor(leftExpr,op,literal){super();this._leftExpr=leftExpr;this._operator=op;this._isNot=op==27/* TokenKind.IsNot */;this._value=-1;if(literal instanceof DefinedNode){this._value=CheckNode.DEFINED;}else if(literal instanceof NullNode){this._value=CheckNode.NULL;}else if(literal instanceof EmptyNode){this._value=CheckNode.EMPTY;}else if(literal instanceof NanNode){this._value=CheckNode.NAN;}}prepareValue(){this._leftExpr.prepareValue();this._literal=this._leftExpr.getLiteral();}getLiteral(){return null;}evaluate(runtime){var v=this._literal?this._literal.value:this._leftExpr.evaluate(runtime);var r;switch(this._value){case CheckNode.DEFINED:r=v!==undefined;break;case CheckNode.NULL:r=v===undefined||v===null;break;case CheckNode.EMPTY:r=v===undefined||v===null||String(v).length==0;break;case CheckNode.NAN:r=v===null||isNaN(v);break;default:return undefined;}return this._isNot?!r:r;}toString(){var s="<<ERROR>>";switch(this._value){case CheckNode.DEFINED:s="defined";break;case CheckNode.NULL:s="null";break;case CheckNode.EMPTY:s="empty";break;case CheckNode.NAN:s="NaN";break;}return "("+((this._isNot?"is not ":"is ")+s)+")";}}CheckNode.DEFINED=0;CheckNode.NULL=1;CheckNode.EMPTY=2;CheckNode.NAN=3;/**@internal */class FloatLiteralNode extends LiteralNode{constructor(literal){super();this._value=Number(literal);}get value(){return this._value;}get asLiteral(){return this;}evaluate(runtime){return this._value;}toString(){return String(this._value);}}/**@internal */class IntegerLiteralNode extends LiteralNode{constructor(literal){super();this._value=typeof literal=='string'?parseInt(literal):Math.floor(literal);}get value(){return this._value;}get asLiteral(){return this;}evaluate(runtime){return this._value;}toString(){return String(this._value);}}/**@internal */class StringLiteralNode extends LiteralNode{constructor(literal){super();this._value=literal.substr(1,literal.length-2);var val="";var run=0;var isEscape=false;while(run<this._value.length){if(this._value[run]=="\\"&&!isEscape){isEscape=true;run++;continue;}isEscape=false;val+=this._value[run++];}this._value=val;}get value(){return this._value;}get asLiteral(){return this;}evaluate(runtime){return this._value;}toString(){return "'"+this._value+"'";}}/**@internal */class IdentifierNode extends ExpressionNode{constructor(literal){super();this._idKey=-651212;this._literal=literal;}get identifier(){return this._literal;}evaluate(runtime){if(this._idKey==-651212){this._idKey=runtime.isIdentifier(this._literal);}return runtime.evaluateIdentifier(this._idKey);}toString(){return this._literal;}}/**@internal */class IndexerNode extends ExpressionNodeImpl{constructor(ident,expression,captial){super();this._idKey=-1490313;this._intIndex=NaN;this._strIndex=null;this._ident=ident;this._indexer=expression;this._capital=captial;}prepareValue(){let lit=this._indexer.asLiteral;if(!lit){if(this._indexer instanceof ExpressionNodeImpl){this._indexer.prepareValue();lit=this._indexer.getLiteral();}}if(lit){const v=lit.value;if(typeof v==="string"){this._strIndex=v;}else {this._intIndex=parseInt(v);}if(this._capital&&this._strIndex){this._strIndex=this._strIndex.toUpperCase();}}}getLiteral(){return null;}evaluate(runtime){if(this._idKey==-1490313){this._idKey=runtime.isIdentifier(this._ident);}if(this._strIndex){return runtime.evaluateIndexerS(this._idKey,this._strIndex,this._capital);}else if(!isNaN(this._intIndex)){return runtime.evaluateIndexerI(this._idKey,this._intIndex);}else {const index=this._indexer.evaluate(runtime);if(typeof index==="string"){return runtime.evaluateIndexerS(this._idKey,index,this._capital);}else {return runtime.evaluateIndexerI(this._idKey,index);}}}toString(){const s=this._ident+"["+this._indexer.toString()+"]";return s;}}class FuncNode extends ExpressionNodeImpl{constructor(ident,expression){super();this._idKey=-1490313;this._strIndex=null;this._ident=ident;this._indexer=expression;}prepareValue(){let lit=this._indexer.asLiteral;if(!lit){if(this._indexer instanceof ExpressionNodeImpl){this._indexer.prepareValue();lit=this._indexer.getLiteral();}}if(lit){const v=lit.value;if(typeof v==="string"){this._strIndex=v;}}}getLiteral(){return null;}evaluate(runtime){if(this._idKey==-1490313){this._idKey=runtime.isIdentifier(this._ident);}if(this._strIndex){return runtime.evaluateFunc(this._idKey,this._strIndex);}else {const index=this._indexer.evaluate(runtime);return runtime.evaluateFunc(this._idKey,index);}}toString(){var s=this._ident+"("+this._indexer.toString()+")";return s;}}/**@internal */class UnaryNode extends ExpressionNode{constructor(factor){super();this._factor=factor;}prepareValue(){this._literal=this._factor.asLiteral;if(!this._literal&&this._factor instanceof ExpressionNode){this._factor.prepareValue();this._literal=this._factor.getLiteral();}}getLiteral(){return null;}}/**@internal */class LenNode extends UnaryNode{constructor(factor){super(factor);}evaluate(runtime){const v=this._literal instanceof LiteralNode?this._literal.value:this._factor.evaluate(runtime);return v?v.length:0;}toString(){return "(len "+this._factor+")";}}/**@internal */class MinusNode extends UnaryNode{constructor(factor){super(factor);}evaluate(runtime){var v=this._literal instanceof LiteralNode?this._literal.value:this._factor.evaluate(runtime);return -v;}toString(){return "-"+this._factor;}}/**@internal */class PlusNode extends UnaryNode{constructor(factor){super(factor);}evaluate(runtime){var v=this._literal instanceof LiteralNode?this._literal.value:this._factor.evaluate(runtime);return v;}toString(){return "+"+this._factor;}}/**@internal */class NotNode extends UnaryNode{constructor(factor){super(factor);}evaluate(runtime){var v=this._literal instanceof LiteralNode?this._literal.value:this._factor.evaluate(runtime);return !v;}toString(){return "(not "+this._factor+")";}}/**@internal */class ToBoolNode extends UnaryNode{constructor(factor){super(factor);}evaluate(runtime){var v=this._literal instanceof LiteralNode?this._literal.value:this._factor.evaluate(runtime);return Boolean(v);}toString(){return "(bool "+this._factor+")";}}/**@internal */class ToNumberNode extends UnaryNode{constructor(factor){super(factor);}evaluate(runtime){var v=this._literal instanceof LiteralNode?this._literal.value:this._factor.evaluate(runtime);return Number(v);}toString(){return "(num "+this._factor+")";}}/**@internal */class ToStringNode extends UnaryNode{constructor(factor){super(factor);}evaluate(runtime){var v=this._literal instanceof LiteralNode?this._literal.value:this._factor.evaluate(runtime);return String(v);}toString(){return "(str "+this._factor+")";}}/**@internal */class ToDateStringNode extends UnaryNode{constructor(factor){super(factor);}evaluate(runtime){var v=this._literal instanceof LiteralNode?this._literal.value:this._factor.evaluate(runtime);if(v instanceof Date){v=_pad(v.getFullYear(),4)+_pad(v.getMonth()+1,2)+_pad(v.getDate(),2)+_pad(v.getHours(),2)+_pad(v.getMinutes(),2)+_pad(v.getSeconds(),2)+_pad(v.getMilliseconds(),3);}return String(v);}toString(){return "(datestr "+this._factor+")";}}/**@internal */class ToYearNode extends UnaryNode{constructor(factor){super(factor);}evaluate(runtime){const v=this._literal instanceof LiteralNode?this._literal.value:this._factor.evaluate(runtime);return v instanceof Date?v.getFullYear():null;}toString(){return "(year "+this._factor+")";}}/**@internal */class ToMonthNode extends UnaryNode{constructor(factor){super(factor);}evaluate(runtime){const v=this._literal instanceof LiteralNode?this._literal.value:this._factor.evaluate(runtime);return v instanceof Date?v.getMonth()+1:null;}toString(){return "(month "+this._factor+")";}}/**@internal */class ToDayNode extends UnaryNode{constructor(factor){super(factor);}evaluate(runtime){const v=this._literal instanceof LiteralNode?this._literal.value:this._factor.evaluate(runtime);return v instanceof Date?v.getDate():null;}toString(){return "(day "+this._factor+")";}}/**@internal */class ToHourNode extends UnaryNode{constructor(factor){super(factor);}evaluate(runtime){const v=this._literal instanceof LiteralNode?this._literal.value:this._factor.evaluate(runtime);return v instanceof Date?v.getHours():null;}toString(){return "(hour "+this._factor+")";}}/**@internal */class ToRoundDownNode extends UnaryNode{constructor(factor){super(factor);}evaluate(runtime){const factor=this._factor;const literal=factor.getLiteral();if(factor.getLiteral()){return literal.value;}else if(factor["_rightExpr"]){const v1=factor["_leftExpr"].evaluate(runtime);const v2=factor["_rightExpr"].evaluate(runtime);switch(factor["_operator"]){case 32/* TokenKind.Comma */:var v3=Math.pow(10,v2);return Math.floor(v1*v3)/v3;default:throw new ExpressionEvaluationError("Unknown operator: "+factor["_operator"]);}}else {return factor["_leftExpr"].evaluate(runtime);}}toString(){return "(rounddown "+this._factor+")";}}/**@internal */class TermNode extends ExpressionNode{constructor(){super();this._factors=[];this._operators=[];this._literal=null;}addFactor(factor){this._factors.push(factor);}addOperator(tokenId){this._operators.push(tokenId);}isIdentifier(value){return this._factors.length==1&&this._factors[0]instanceof IdentifierNode&&this._factors[0].identifier==value;}prepareValue(){var i,cnt,factor;for(i=0,cnt=this._factors.length;i<cnt;i++){this._factors[i].prepareValue();}if(this._operators.length==0){factor=this._factors[0];this._literal=factor.asLiteral;if(!this._literal){this._literal=factor.getLiteral();}}}getLiteral(){return this._literal;}evaluate(runtime){if(this._literal){return this._literal.value;}const len=this._factors.length;let v1=this._factors[0].evaluate(runtime);for(let i=1;i<len;i++){const v2=this._factors[i].evaluate(runtime);switch(this._operators[i-1]){case 11/* TokenKind.And */:v1=v1&&v2;break;case 3/* TokenKind.Star */:v1=v1*v2;break;case 2/* TokenKind.Slash */:v1=v1/v2;break;case 14/* TokenKind.Div */:v1=Math.floor(Math.floor(v1)/Math.floor(v2));break;case 15/* TokenKind.Mod */:v1=v1%v2;break;case 16/* TokenKind.Shl */:v1=v1<<v2;break;case 17/* TokenKind.Shr */:v1=v1>>v2;break;}}return v1;}toString(){var s="";if(this._literal){s=this._literal.toString();}else if(this._factors.length==1){s=this._factors[0].toString();}else {var i;var len=this._factors.length;s="("+this._factors[0].toString();for(i=1;i<len;i++){switch(this._operators[i-1]){case 11/* TokenKind.And */:s+=" and ";break;case 3/* TokenKind.Star */:s+=" * ";break;case 2/* TokenKind.Slash */:s+=" / ";break;case 14/* TokenKind.Div */:s+=" / ";break;case 15/* TokenKind.Mod */:s+=" mod ";break;case 16/* TokenKind.Shl */:s+=" shl ";break;case 17/* TokenKind.Shr */:s+=" shr ";break;}s+=this._factors[i].toString();}s+=")";}return s;}}/**@internal */class SimpleExpressioNode extends ExpressionNode{constructor(){super();this._terms=[];this._operators=[];this._literal=null;}addTerm(term){this._terms.push(term);}addOperator(tokenId){this._operators.push(tokenId);}isIdentifier(value){return this._terms.length==1&&this._terms[0].isIdentifier(value);}prepareValue(){for(let i=0,cnt=this._terms.length;i<cnt;i++){this._terms[i].prepareValue();}if(this._operators.length==0){this._literal=this._terms[0].getLiteral();}}getLiteral(){return this._literal;}evaluate(runtime){if(this._literal){return this._literal.value;}const len=this._terms.length;let v1=this._terms[0].evaluate(runtime);for(let i=1;i<len;i++){const v2=this._terms[i].evaluate(runtime);switch(this._operators[i-1]){case 4/* TokenKind.Minus */:v1=v1-v2;break;case 5/* TokenKind.Plus */:v1=v1+v2;break;case 18/* TokenKind.Or */:v1=v1||v2;break;case 19/* TokenKind.Xor */:v1=v1^v2;break;}}return v1;}toString(){var s="";if(this._literal){s=this._literal.toString();}else if(this._terms.length==1){s=this._terms[0].toString();}else {var i;var len=this._terms.length;s="("+this._terms[0].toString();for(i=1;i<len;i++){switch(this._operators[i-1]){case 4/* TokenKind.Minus */:s+=" - ";break;case 5/* TokenKind.Plus */:s+=" + ";break;case 18/* TokenKind.Or */:s+=" or ";break;case 19/* TokenKind.Xor */:s+=" xor ";break;default:s+=" <<ERROR>> ";}s+=this._terms[i].toString();}s+=")";}return s;}}/**@internal */class ExpressionParser{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._node=null;this._capitalIndexers=null;this._lexer=new ExpressionLexer();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    syntaxError(message,pos){throw new ExpressionSyntaxError(message,pos);}expected(tokenId){if(tokenId!=this._lexer.tokenId){throw new ExpressionSyntaxError("Token is not a expected kind ["+tokenId+"]: "+this._lexer.tokenId,this._lexer.tokenLoc);}this.nextToken();}nextToken(){this._lexer.nextNoSpace();}doExpression(){let expr=null;let left=this.doSimpleExpression();let op;if(IS_CHECK[op=this._lexer.tokenId]){this.nextToken();let right=this.doSimpleExpression();right.prepareValue();let check=right.getLiteral();if(check instanceof CheckableNode){expr=new CheckNode(left,op,check);}else {throw new ExpressionSyntaxError("is operator's operand must be defined, null or empty: "+this._lexer.tokenId,null);}}else {expr=new ExpressionNodeImpl();expr["_leftExpr"]=left;if(IS_RELATIVE[this._lexer.tokenId]){expr["_operator"]=this._lexer.tokenId;this.nextToken();expr["_rightExpr"]=this.doSimpleExpression();}else if(this._lexer.tokenId==32/* TokenKind.Comma */){expr["_operator"]=this._lexer.tokenId;this.nextToken();expr["_rightExpr"]=this.doSimpleExpression();}}return expr;}doSimpleExpression(){let expr=new SimpleExpressioNode();expr.addTerm(this.doTerm());while(IS_ADDITIVE[this._lexer.tokenId]){expr.addOperator(this._lexer.tokenId);this.nextToken();expr.addTerm(this.doTerm());}return expr;}doTerm(){let term=new TermNode();term.addFactor(this.doFactor());while(IS_MULTIPLICATIVE[this._lexer.tokenId]){term.addOperator(this._lexer.tokenId);this.nextToken();term.addFactor(this.doFactor());}return term;}doFactor(){var tokenId=this._lexer.tokenId;switch(tokenId){case 61/* TokenKind.StringLiteral */:return this.doCharString();case 96/* TokenKind.Backtick */:return this.doBacktick();case 66/* TokenKind.RoundOpen */:return this.doRoundOpen();case 10/* TokenKind.Identifier */:return this.doIdentifier();case 64/* TokenKind.IntegerLiteral */:return this.doInteger();case 63/* TokenKind.FloatLiteral */:return this.doNumber();case 4/* TokenKind.Minus */:return this.doMinus();case 5/* TokenKind.Plus */:return this.doPlus();case 13/* TokenKind.Not */:return this.doNot();case 35/* TokenKind.Defined */:return this.doDefined();case 34/* TokenKind.Null */:return this.doNull();case 36/* TokenKind.Empty */:return this.doEmpty();case 37/* TokenKind.NaN */:return this.doNaN();case 23/* TokenKind.ToBool */:return this.doToBool();case 21/* TokenKind.ToNum */:return this.doToNumber();case 20/* TokenKind.ToStr */:return this.doToString();case 24/* TokenKind.Length */:return this.doLength();// case TokenKind.LengthBin:
    // 	return this.doLengthBin();
    case 90/* TokenKind.ToDateStr */:return this.doToDateString();case 91/* TokenKind.ToYear */:return this.doToYear();case 92/* TokenKind.ToMonth */:return this.doToMonth();case 93/* TokenKind.ToDay */:return this.doToDay();case 94/* TokenKind.ToHour */:return this.doToHour();case 95/* TokenKind.ToRoundDown */:return this.doRoundDown();}throw new ExpressionSyntaxError("Unkown token: "+tokenId,this._lexer.tokenLoc);}doCharString(){var literal=this._lexer.token;this.nextToken();return new StringLiteralNode(literal);}doBacktick(){var literal=this._lexer.token;this.nextToken();return new IdentifierNode(literal.substring(1,literal.length-1));}doRoundOpen(){this.nextToken();var node=this.doExpression();this.expected(67/* TokenKind.RoundClose */);return node;}doIdentifier(){var literal=this._lexer.token;this.nextToken();if(this._lexer.tokenId==69/* TokenKind.BracketOpen */){this.nextToken();var node=this.doExpression();this.expected(70/* TokenKind.BracketClose */);return new IndexerNode(literal,node,this._capitalIndexers.indexOf(literal)>=0);}else if(this._lexer.tokenId==66/* TokenKind.RoundOpen */){this.nextToken();var node=this.doExpression();this.expected(67/* TokenKind.RoundClose */);return new FuncNode(literal,node);}else {return new IdentifierNode(literal);}}doNumber(){var literal=this._lexer.token;this.nextToken();return new FloatLiteralNode(literal);}doInteger(){var literal=this._lexer.token;this.nextToken();return new IntegerLiteralNode(literal);}doMinus(){this.nextToken();return new MinusNode(this.doFactor());}doPlus(){this.nextToken();return new PlusNode(this.doFactor());}doNot(){this.nextToken();return new NotNode(this.doFactor());}doDefined(){this.nextToken();return new DefinedNode();}doNull(){this.nextToken();return new NullNode();}doEmpty(){this.nextToken();return new EmptyNode();}doNaN(){this.nextToken();return new NanNode();}doToBool(){this.nextToken();return new ToBoolNode(this.doFactor());}doToNumber(){this.nextToken();return new ToNumberNode(this.doFactor());}doToString(){this.nextToken();return new ToStringNode(this.doFactor());}doLength(){this.nextToken();return new LenNode(this.doFactor());}doToDateString(){this.nextToken();return new ToDateStringNode(this.doFactor());}doToYear(){this.nextToken();return new ToYearNode(this.doFactor());}doToMonth(){this.nextToken();return new ToMonthNode(this.doFactor());}doToDay(){this.nextToken();return new ToDayNode(this.doFactor());}doToHour(){this.nextToken();return new ToHourNode(this.doFactor());}doRoundDown(){this.nextToken();return new ToRoundDownNode(this.doFactor());}parse(source,capitalIndexers){if(source){this._capitalIndexers=capitalIndexers||[];this._lexer.init(source);this.nextToken();var expr=this.doExpression();if(expr){expr.prepareValue();}this._lexer.clear();this._capitalIndexers=null;return expr;}return null;}evaluate(source,runtime,capitalIndexers){const expr=this.parse(source,capitalIndexers);return expr.evaluate(runtime);}}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ExpressionParser.Default=new ExpressionParser();////////////////////////////////////////////////////////////////////////////////
    const ID_ROW=0;const ID_VALUES=1;const IDENTS$1={row:ID_ROW,values:ID_VALUES};const ID_FIELD$1=999;/**@internal */class FieldValueRuntime extends ExpressionRuntime{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){super();this._fieldMap={};}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    prepare(data){const d=this._data=data;const map=this._fieldMap={};if(d){for(let i=0;i<d.fieldCount;i++){const n=this._data.getField(i).fieldName;map[':'+n]=map[n]=ID_FIELD$1+i;}}return this;}setRow(row){this._row=row;return this;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    isIdentifier(token){const t=token.toLocaleLowerCase();if(IDENTS$1.hasOwnProperty(t)){return IDENTS$1[t];}// 필드명은 대소문자를 유지하도록 한다.
    if(this._fieldMap.hasOwnProperty(token)){return this._fieldMap[token];}return super.isIdentifier(token);}evaluateIdentifier(idKey){if(idKey>=ID_FIELD$1){return this._row>=0?this._data.getRowValue(this._row,idKey-ID_FIELD$1):void 0;}super.evaluateIdentifier(idKey);}evaluateIndexerS(idKey,index,capitalized){if(idKey==ID_VALUES){const f=this._fieldMap[index];return this._row>=0?this._data.getRowValue(this._row,f-ID_FIELD$1):void 0;}throw new ExpressionEvaluationError("Invalid field name: "+idKey);}evaluateFunc(idKey,param){switch(idKey){case ID_ROW:return this._row;}return super.evaluateFunc(idKey,param);}}////////////////////////////////////////////////////////////////////////////////
    class ReportDataPath{constructor(data,path){this.data=data;this.path=path;}static create(data,path){return new ReportDataPath(data,path);}}class ReportData extends Base{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name,dp){super();this._name=name;this._dp=dp;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get provider(){return this._dp;}get designTime(){var _a;return (_a=this._dp)===null||_a===void 0?void 0:_a.designTime;}get isBand(){return false;}/** name */get name(){return this._name;}set name(value){var _a;if(value!==this._name){const old=this._name;this._name=value;(_a=this._dp)===null||_a===void 0?void 0:_a.dataNameChanged(this,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    preparePrint(ctx,design){}}class ContextData extends ReportData{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(ctx){super('_context_',null);this._context=ctx;}static isValue(v){return this.Values.hasOwnProperty(v);}static isBandValue(v){return this.BandValues.hasOwnProperty(v);}//-------------------------------------------------------------------------
    // IReportData
    //-------------------------------------------------------------------------
    getFieldNames(){return [];}getValue(path){const v=ContextData.Values[path];return v&&v(this._context);}getSaveValues(){}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'context';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ContextData.Values={"${page}":ctx=>ctx.page+1,"%{page}":ctx=>ctx.page+1,"${pages}":ctx=>ctx.pageCount,"%{pages}":ctx=>ctx.pageCount,"${all-page}":ctx=>ctx.compositePrinting?ctx.compositePage+1:ctx.page+1,"%{all-page}":ctx=>ctx.compositePrinting?ctx.compositePage+1:ctx.page+1,"${all-pages}":ctx=>ctx.compositePrinting?ctx.compositePageCount:ctx.pageCount,"%{all-pages}":ctx=>ctx.compositePrinting?ctx.compositePageCount:ctx.pageCount,"${date}":ctx=>ctx.date,"%{date}":ctx=>ctx.date};// static isEndValue(v: string): boolean {
    //     return v === '${pages}';
    // }
    ContextData.BandValues={'${dpage}':ctx=>ctx.detailPage+1,'${dpages}':ctx=>ctx.detailPageCount};/**
     * 단순형 값이나, json 객체를 값으로 지정한다.
     */class SimpleData extends ReportData{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name,values){super(name,null);this.setSample(values);this._isObj=Utils.isObject(values);}//-------------------------------------------------------------------------
    // IReportData
    //-------------------------------------------------------------------------
    /**
         * TODO: array index
         */getValue(path){if(path&&this._isObj){let v=this._values;const arr=path.split('.');for(let p of arr){v=v[p];}return v;}// return this._values;
    return;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get sample(){return this._values;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setSample(values){if(values!==this._values){// 원본을 복사하지 않는다. 명시하고 주의할 것!
    this._values=values;}}getFieldNames(){if(this._values){const names=[];for(let p in this._values){names.push(p);}return names;}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'simple';}getSaveValues(){return this._values;}}////////////////////////////////////////////////////////////////////////////////
    var DesignDataMode;(function(DesignDataMode){DesignDataMode["SAMPLE"]="sample";DesignDataMode["GENERATE"]="generate";})(DesignDataMode||(DesignDataMode={}));class BandData extends ReportData{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name,fields,dp){super(name,dp);this._calcFieldRuntime=new FieldValueRuntime();if(fields){// 원본을 복사하지 않는다. 명시하고 주의할 것!
    this._fields=fields;for(let f of fields){if(!f.fieldName)throw new Error('The fieldName must be exists.');if(!f.dataType)f.dataType='text';f.dateReader=null;}}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get fields(){return this._fields&&this._fields.slice();}get fieldCount(){return this._fields?this._fields.length:0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getFields(){var _a;return (_a=this._fields)===null||_a===void 0?void 0:_a.slice(0);}getField(index){//return this._fields ? {...this._fields[index]} : null;
    return this._fields[index];}getFieldByName(fieldName){if(this._fields){for(let f of this._fields){if(f.fieldName===fieldName)return f;}}}getFieldIndex(field){if(this._fields){for(let i=this._fields.length-1;i>=0;i--){if(this._fields[i].fieldName===field){return i;}}}return -1;}containsField(fieldName){return this._fields&&this._fields.some(v=>{return v.fieldName===fieldName;});}indexOfField(field){return this._fields.indexOf(field);}setField(index,field){this._fields[index]={...field};}getSaveFields(){return this._fields;}getNextFieldName(){let prefix=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';const name=prefix||'field';let n=name;let i=1;while(this._fields.some(field=>n===field.fieldName)){n=name+'-'+i++;}return n;}getFieldNames(){return this._fields?this._fields.map(f=>f.fieldName).sort():[];}addField(index,field){if(field&&!this._fields.includes(field)){index=Math.max(0,Math.min(this._fields.length,index));this._fields.splice(index,0,field);return true;}}removeField(field){const i=this._fields.indexOf(field);if(i>=0){this._fields.splice(i,1);return true;}}groupBy(fields,subRows){function split(self,parent){const end=parent.row+parent.count;let level=parent.level+1;let r=parent.row;const f=fields[level-1];let g={parent:parent,level:level,row:r,count:1,value:self.getRowValue(r,f),children:[]};parent.children.push(g);while(++r<end){const v=self.getRowValue(subRows?subRows[r]:r,f);if(v!==g.value){g={parent:parent,level:level,row:r,count:1,value:v,children:[]};parent.children.push(g);}else {g.count++;}}if(level<fields.length){for(let g of parent.children){let r=g.row;while(r<g.row+g.count){split(self,g);r+=g.count;}}}}function build(g,rows){// header
    rows.push(g);// children of rows
    if(g.level===fields.length){for(let r=0;r<g.count;r++){rows.push(r+g.row);}}else {for(let g2 of g.children){build(g2,rows);}}// footer
    rows.push({group:g});}// TODO: 현재 design data provider가 아니면 field 정보를 가지고 있지 않다.
    //       프린트 실행시 필드를 assign 하는 방식 고려할 것!
    //fields = fields && fields.filter((f) => this.containsField(f));
    const rowCount=subRows?subRows.length:this.rowCount;if(fields&&fields.length>0){const rows=[];const root={parent:null,level:0,row:0,count:rowCount,children:[]};split(this,root);for(let g of root.children){build(g,rows);}if(subRows){for(let i=0;i<rows.length;i++){const r=rows[i];if(typeof r==='number'){rows[i]=subRows[r];}else if(!isNaN(r.row)){rows[i].row=subRows[r.row];}}}return rows;}return;}readValue(field,value){if(field){const t=field.dataType;if(t==='text'){return Utils.isDefined(value)?String(value):value;}else if(t==='datetime'){if(!field.dateReader){field.dateReader=new DatetimeReader(field.format);}return field.dateReader.toDate(value);}else if(t==='number'){if(typeof value==='number')return value;return parseFloat(value);}else if(t==='bool'){if(typeof value==='boolean')return value;if(typeof value==='number')return value!==0;return value==='True'||value==='true';}}return value;}readRow(row){if(this._fields){const flds=this._fields;if(Utils.isArray(row)){for(let i=0;i<flds.length;i++){row[i]=this.readValue(flds[i],row[i]);}}else if(row){for(let p in row){const f=this.getFieldIndex(p);if(f>=0){row[p]=this.readValue(flds[f],row[p]);}}}}return row;}dateToStr(field,v){const f=field&&field.format&&DatetimeFormatter.getFormatter(field.format);return f?f.getText(v):String(v);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get isBand(){return true;}preparePrint(ctx,design){super.preparePrint(ctx,design);const oldFields=this._fields;let fields=this._fields;if(!design){if(!fields){const d=ctx.designDp.get(this.name);if(d instanceof BandData){fields=this._fields=d.getFields();}}}if(fields){const fmap=this._fieldMap={};for(let i=0;i<fields.length;i++){fmap[fields[i].fieldName]=i;}if(!oldFields){this._readRows();}this._calcFieldRuntime.prepare(this);for(let i=0;i<fields.length;i++){const f=fields[i];if(f.expression){const node=ExpressionParser.Default.parse(f.expression);this._prepareCalcField(fields,fmap,f,i,node);}}}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _readRows(){}_prepareCalcField(fields,fieldMap,calcField,index,node){}}/**
     * {}들의 배열.
     * values는 리포트에 저장하지 않는다.
     * 필요하다면 application이 별도로 관리한다. (파일로 저장/로드)
     * (필드.sample로 최초 한 행을 생성하고, 추후 다른 tool로 관리할 수 있도록 한다.)
     */class BandArrayData extends BandData{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name,fields,values,sampleCount,dp){super(name,fields,dp);this._sampleCount=-1;if(sampleCount>0)this._sampleCount=sampleCount;this.setValues(values);}//-------------------------------------------------------------------------
    // IBandData
    //-------------------------------------------------------------------------
    get rowCount(){return this._values.length;}getRowValues(row){return this._values[row];}getValue(path){return this.getRowValue(0,path);}getRowValue(row,field){const vals=this._values[row];if(vals){if(typeof field==='number'){return vals[this.getField(field).fieldName];}else {return vals[field];}}}getFieldValues(field,rows){const vals=[];if(typeof field==='number'){field=this.getField(field).fieldName;}if(rows){rows.forEach(r=>vals.push(this._values[r][field]));}else {for(let i=0;i<this._values.length;i++){vals.push(this._values[i][field]);}}return vals;}equalValues(row,fields,values){for(let i=fields.length-1;i>=0;i--){if(this._values[row][fields[i]]!==values[i]){return false;}}return true;}equalRows(row1,row2,fields){const vals=this._values;fields=fields||this._fields.map(f=>f.fieldName);for(let i=fields.length-1;i>=0;i--){if(vals[row1][fields[i]]!==vals[row2][fields[i]]){return false;}}return true;}findRows(values){const fields=values!=null&&Object.keys(values);const rows=[];if(fields&&fields.length>0){this._values.forEach((vals,r)=>{let matched=true;for(let field of fields){if(vals[field]!==values[field]){matched=false;break;}}matched&&rows.push(r);});}return rows;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get sample(){//return this._sampled ? [this.$_prepareSample()] : this._values;
    return this._values;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getValues(){const vals=[];for(let i=0;i<this._values.length;i++){vals.push(this.$_cloneRow(this._values[i]));}return vals;}setValues(vals){const values=this._values=[];if(vals){for(let i=0,cnt=vals.length;i<cnt;i++){let row=this.$_cloneRow(vals[i]);row=this.readRow(row);values.push(row);}}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'band';}getSaveValues(){//return this._values;
    }//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_cloneRow(row){if(row){//return {...row};
    const obj={};for(let p in row){obj[p]=row[p];}return obj;}else {return null;}}$_prepareSample(){const fields=this._fields;if(fields&&fields.length>0){const vals={};for(let f of fields){vals[f.fieldName]=this.readValue(f,f.sample);}return vals;}return {};}_readRows(){const vals=this._values;for(let i=0,cnt=vals.length;i<cnt;i++){vals[i]=this.readRow(vals[i]);}}_prepareCalcField(fields,fieldMap,calcField,index,node){const values=this._values;const runtime=this._calcFieldRuntime;for(let r=0,cnt=values.length;r<cnt;r++){const vals=values[r];runtime.setRow(r);const v=node.evaluate(runtime);vals[calcField.fieldName]=v;}}}////////////////////////////////////////////////////////////////////////////////
    // Size.ts
    // 2020. 06. 02. created by woori
    // -----------------------------------------------------------------------------
    // Copyright (c) 2020 Wooritech Inc.
    // All rights reserved.
    ////////////////////////////////////////////////////////////////////////////////
    /** @internal */class Size{//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){let width=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let height=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this.width=width;this.height=height;}static empty(){return new Size();}static create(){let w=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let h=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return new Size(w,h);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** isEmpty */get isEmpty(){return this.width===0||this.height===0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    clone(){return new Size(this.width,this.height);}equals(sz){return sz===this||sz&&this.width===sz.width&&this.height===sz.height;}setEmpty(){this.width=this.height=0;return this;}set(width,height){this.width=width;this.height=height;return this;}round(){const sz=this.clone();sz.width>>>=0;sz.height>>>=0;return sz;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    toString(){return "{width: "+this.width+", height: "+this.height+"}";}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Size.EMPTY=new Size();////////////////////////////////////////////////////////////////////////////////
    const REG_COLOR=/\s*\,\s*/;class ColorUtils{//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static get hueCount(){return this.HUES.length;}static getHue(index){return this.HUES[index];}static rbg2Hue(rgb){const r=(rgb&0xff0000)>>16;const g=(rgb&0xff00)>>8;const b=rgb&0xff;const min=Math.min(r,g,b);const max=Math.max(r,g,b);if(min==max){return 0;}else {let hue=0;if(max==r){hue=(g-b)/(max-min);}else if(max==g){hue=2+(b-r)/(max-min);}else {hue=4+(r-g)/(max-min);}hue=hue*60;if(hue<0){hue=hue+360;}return Math.round(hue);}}static rgb2Hsl(r,g,b){if(g===void 0){const r2=r;r=(r2&0xff0000)>>16;g=(r2&0xff00)>>8;b=r2&0xff;}r/=255;g/=255;b/=255;const max=Math.max(r,g,b);const min=Math.min(r,g,b);let h;let s;let l=(max+min)/2;if(max==min){h=s=0;// achromatic
    }else {const d=max-min;s=l>0.5?d/(2-max-min):d/(max+min);switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}h/=6;}return {h:h*360,s:s*100,l:l*100};}static hue2rgb(p,q,t){if(t<0)t+=1;if(t>1)t-=1;if(t<1/6)return p+(q-p)*6*t;if(t<1/2)return q;if(t<2/3)return p+(q-p)*(2/3-t)*6;return p;}static hsl2Rgb(h,s,l){if(s===void 0){const h2=h;h=(h2&0xff0000)>>16;s=(h2&0xff00)>>8;l=h2&0xff;}h/=360;s/=100;l/=100;let r;let g;let b;if(s==0){r=g=b=l;// achromatic
    }else {const q=l<0.5?l*(1+s):l+s-l*s;const p=2*l-q;r=ColorUtils.hue2rgb(p,q,h+1/3);g=ColorUtils.hue2rgb(p,q,h);b=ColorUtils.hue2rgb(p,q,h-1/3);}return Math.round(r*255)<<16|Math.round(g*255)<<8|Math.round(b*255);}static toHex(color){let alpha=arguments.length>1&&arguments[1]!==undefined?arguments[1]:NaN;let s1=((color&0xff0000)>>16).toString(16);if(s1.length==1)s1='0'+s1;let s2=((color&0xff00)>>8).toString(16);if(s2.length==1)s2='0'+s2;let s3=(color&0xff).toString(16);if(s3.length==1)s3='0'+s3;let s4='';if(!isNaN(alpha)){alpha=Math.round(alpha*0xff);s4=(alpha&0xff).toString(16);if(s4.length==1)s4='0'+s4;}return '#'+s1+s2+s3+s4;}static toRgba(color,alpha){let s='rgba(';s+=((color&0xff0000)>>16)+','+((color&0xff00)>>8)+','+(color&0xff)+','+alpha;return s+')';}static interpoate(c1,c2,f){const r1=(c1&0xff0000)>>16;const g1=(c1&0xff00)>>8;const b1=c1&0xff;const r2=(c2&0xff0000)>>16;const g2=(c2&0xff00)>>8;const b2=c2&0xff;const r=Math.floor((r2-r1)*f+r1);const g=Math.floor((g2-g1)*f+g1);const b=Math.floor((b2-b1)*f+b1);return (r<<16)+(g<<8)+b;}static colorToHex(color,alpha){return '#'+Utils.pad16(color,6)+Utils.pad16(Math.round(alpha*0xff),2);}static colorToHex2(color,alpha){if(alpha<1){return '#'+Utils.pad16(color,6)+Utils.pad16(Math.round(alpha*0xff),2);}else {return '#'+Utils.pad16(color,6);}}static colorToCss(color,alpha){const a=Math.round(alpha*100)/100;if(a!==1){const col=color;const r=(col&0xff0000)>>16;const g=(col&0xff00)>>8;const b=col&0xff;return 'rgba('+r+','+g+','+b+','+a+')';}else {let s=Utils.pad16(color,6);return '#'+s;}}static strToColor(s){let color=0;let alpha=1;if(s){s=s.trim();if(s.startsWith('rgba(')&&s.endsWith(')')){const arr=s.substring(5,s.length-1).trim().split(REG_COLOR);if(arr.length===4){color=parseInt(arr[0])<<16|parseInt(arr[1])<<8|parseInt(arr[2]);alpha=parseFloat(arr[3]);}}else if(s.startsWith('rgb(')&&s.endsWith(')')){const arr=s.substring(4,s.length-1).trim().split(REG_COLOR);if(arr.length===3){color=parseInt(arr[0])<<16|parseInt(arr[1])<<8|parseInt(arr[2]);}}else {if(s.startsWith('#'))s=s.substr(1);const len=s.length;if(len>6){color=parseInt(s.substr(0,6),16);alpha=parseInt(s.substring(6),16)/0xff;}else if(len>0){if(len===3){s=s.charAt(0)+s.charAt(0)+s.charAt(1)+s.charAt(1)+s.charAt(2)+s.charAt(2);}color=parseInt(s,16);}}}return {color:color,alpha:alpha};}// rgb(,,), rgba(,,,) 형식에 맞춰 전달된다고 가정한다.
    static cssToColor(s){let checkAlpha=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(!s)return;if(s.startsWith('rgba(')){const arr=s.substring(5,s.length-1).split(REG_COLOR);const alpha=parseFloat(arr[3]);if(alpha>0||!checkAlpha){const color=parseInt(arr[0])<<16|parseInt(arr[1])<<8|parseInt(arr[2]);return {color,alpha};}}else if(s.startsWith('rgb(')){const arr=s.substring(4,s.length-1).split(REG_COLOR);const color=parseInt(arr[0])<<16|parseInt(arr[1])<<8|parseInt(arr[2]);return {color,alpha:1};}}static lighten(color,alpha){if(alpha>=1){return color;}const hsl=this.rgb2Hsl(color);const l=hsl.l+hsl.l*(1-alpha);const rgb=this.hsl2Rgb(hsl.h,hsl.s,l);return rgb;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ColorUtils.HUE_MAX=360;ColorUtils.SATURATION_MAX=100;ColorUtils.LIGHTNESS_MAX=100;ColorUtils.HUES=[0xff0000,0xffff00,0x00ff00,0x00ffff,0x0000ff,0xff00ff,0xff0000];////////////////////////////////////////////////////////////////////////////////
    const $_FORBIDDEN_STYLES={position:"poistion",display:"display",marign:"margin"// marginTop: "marginTop",
    // marginBottom: "marginBottom",
    // marginLeft: "marginLeft",
    // marginRight: "marginRight",
    };const $_COLOR_STYLES={color:0,backgroundColor:1,fill:2};const $_ALIASED_STYLES={// cellAlign: { 
    //     css: "justifyContent",
    //     default: "center",
    //     values: {
    //         left: "flex-start",
    //         right: "flex-end",
    //         center: "center"
    //     }
    // }
    };// s는 trim되고, '#'이나 'rgb'로 시작한다고 가정한다.
    function strToCss(s){if(s&&s.charAt(0)=='#'&&s.length>7){const color=parseInt(s.substring(1,7),16);const alpha=parseInt(s.substring(7),16)/0xff;s=ColorUtils.colorToCss(color,alpha);}return s;}function aliasStyle(alias,value){const vals=alias.values;return vals[value]||vals.default;}function applyStyles(item,styles,css){if(styles){for(let p in styles){let v=styles[p];if(v&&!item['_doApplyStyle'](p,v,css)){if(!(p in $_FORBIDDEN_STYLES)){if(p in $_COLOR_STYLES){v=strToCss(v);}else if(p in $_ALIASED_STYLES){v=aliasStyle($_ALIASED_STYLES[p],v);p=$_ALIASED_STYLES[p].css;}css[p]=v||'';}}}}}/** @internal */class ReportElement extends VisualElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** debuggin */get debugging(){return ReportElement.Debugging;}/** debugName */get debugLabel(){return this.constructor.name;}/** guardLabel */get guardLabel(){return this.debugLabel;}/** measuredWidth */get measuredWidth(){return this._measuredWidth;}/** measuredHeight */get measuredHeight(){return this._measuredHeight;}/**
         * true면 measure() 시점이 아니라
         * layout() 시점에 parent의 크기를 기준으로 measure + layout을 동시 진행한다.
         */get lazyLayout(){return false;}get floating(){return false;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    measure(ctx,hintWidth,hintHeight){const dom=this["_dom"];const printing=ctx&&ctx.printing;if(printing){delete dom.dataset.design;}else {dom.dataset.design='';}if(printing){this._clearDesign();}this._doPrepareMeasure(ctx,dom);const sz=this._doMeasure(ctx,dom,hintWidth,hintHeight);this._doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz);this._measuredWidth=sz.width;this._measuredHeight=sz.height;return sz;}layoutContent(ctx){this._doPrepareContent(ctx);this._doLayoutContent(ctx);this._doAfterLayout(ctx);}print(doc,ctx){let w=arguments.length>2&&arguments[2]!==undefined?arguments[2]:NaN;const dom=this['_dom'];this._printWidth=w;this._setClassName(dom);//dom.style.top = y + 'px';
    this._doPrint(doc,ctx);this._setSizeStyle(dom.style);// TODO: 안 할 수 없나?
    return this.height;}findElement(modelName){return null;}applyMeasure(){this.resize(this._measuredWidth,this._measuredHeight);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _debugBorder(){return "1px solid rgba(0, 61, 0, 0.3)";}_debugColor(){return "rgba(0, 61, 0, 0.4)";}_clearDesign(){}_afterDraw(dom){if(this.debugging&&this._debuggable()){if(!this._debugView){this._debugView=dom.ownerDocument.createElement('span');const css=this._debugView.style;css.display="inline-block";// css.boxSizing = "border-box";
    css.position="absolute";css.pointerEvents="none";css.left="0";css.top="0";css.right="0";css.bottom="0";css.border=this._debugBorder();css.color=this._debugColor();}this._debugView.textContent=this.debugLabel;dom.appendChild(this._debugView);}else if(this._debugView){Utils.detach(this._debugView);}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _debuggable(){return true;}_doPrepareMeasure(ctx,dom){}_doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz){}_doMeasure(ctx,dom,hintWidth,hintHeight){return new Size(hintWidth,hintHeight);}_doPrepareContent(ctx){}_doLayoutContent(ctx){}_doAfterLayout(ctx){}_doSetStyles(model,dom){this._setStyles(model,model.styles,dom.style);}_setStyles(model,styles,css){applyStyles(model,styles,css);}_getModelWidth(model,width){return model.getWidth(width);}_getModelHeight(model,height){return model.getHeight(height);}_setModelSize(model,dom,width,height){let clear=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;const w=this._modelWidth=this._getModelWidth(model,width);const h=this._modelHeight=this._getModelHeight(model,height);if(!isNaN(w)){dom.style.width=w+"px";}else if(clear){dom.style.width='';}if(!isNaN(h)){dom.style.height=h+"px";}else if(clear){dom.style.height='';}}_doPrint(doc,ctx){const sz=this.measure(ctx,ctx.pageWidth,ctx.pageHeight);this.width=sz.width;this.height=sz.height;this.layoutContent(ctx);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ReportElement.Debugging=false;class ReportPageItemElement extends ReportElement{}class SectionHeadView extends ReportElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model,text,hint,styleName){super(doc,null);this._model=model;this._text=text;this.dom.title=hint;let s='rr-section-head';if(styleName)s+=' '+styleName;this.styleName=s;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** model */get model(){return this._model;}set model(value){this._model=value;}/** text */get text(){return this._text;}set text(value){if(value!==this._text){this._text=value;this.invalidateLayout();}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setSelected(focused){if(this.model.isAncestorOf(focused)){this.dom.dataset.selected='';}else {delete this.dom.dataset.selected;}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _initDom(doc,dom){super._initDom(doc,dom);this._span=doc.createElement('span');dom.appendChild(this._span);}_doMeasure(ctx,dom,hintWidth,hintHeight){const span=this._span;dom.style.width='';dom.style.height='';span.textContent=this._text;return new Size(Math.ceil(dom.offsetWidth),dom.offsetHeight);}isDom(dom){return super.isDom(dom)||dom===this._span;}}class PopupElement extends ReportElement{}////////////////////////////////////////////////////////////////////////////////
    /**
     * Property 모델 구성 요소.
     */class PropertyItem extends Base{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super();this._prop=prop;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get group(){return this._group;}get prop(){return this._prop;}get name(){return this._prop.name;}get label(){return this._prop.label||this._prop.name;}get domain(){return this._prop.domain;}get parent(){return this._prop.parent;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    isVisible(source){return !this._prop.visible||this._prop.visible(source)!==false;}isReadOnly(source){return this._prop.readonly||source.isReadOnlyProperty(this._prop);}getValue(source){return source.getProperty(this._prop.name);}setValue(source,value){source.setProperty(this._prop.name,value);}setValues(sources,value){sources[0].setItemsProperty(sources,this._prop.name,value);}hasColor(){return false;}}class PropertyGroup extends Base{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(label){super();this._items=[];this._pool=[];this._label=label;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get label(){return this._label;}get count(){return this._items.length;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    get(index){return this._items[index];}borrow(info){for(let i=this._pool.length-1;i>=0;i--){const item=this._pool[i];if(item["_prop"]===info){this._pool.splice(i,1);return item;}}}add(item){item['_group']=this;this._items.push(item);}clear(){for(let item of this._items){item['_group']=null;this._pool.push(item);}this._items=[];}}/**
     * Value property base.
     */class ValueProperty extends PropertyItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * 기본값.
         */get defaultValue(){return this._defaultValue;}set defaultValue(value){this._defaultValue=value;}}/**
     * Styles property.
     */class StylesProperty extends PropertyItem{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}}/**
     * String property.
     */class StringProperty extends ValueProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    StringProperty.$_ctor='StringProperty';/**
     * Number property.
     */class NumberProperty extends ValueProperty{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._minimum=NaN;this._maximum=NaN;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * 최소값.
         */get minimum(){return this._minimum;}set minimum(value){this._minimum=value;}/**
         * 최대값.
         */get maximum(){return this._maximum;}set maximum(value){this._maximum=value;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    NumberProperty.$_ctor='NumberProperty';/**
     * Dimension property.
     */class DimensionProperty extends StringProperty{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this.percentable=true;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    DimensionProperty.$_ctor='DimensionProperty';/**
     * Size property.
     */class SizeProperty extends DimensionProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    SizeProperty.$_ctor='SizeProperty';/**
     * Boolean property.
     */class BooleanProperty extends ValueProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    BooleanProperty.$_ctor='BooleanProperty';/**
     * Date property.
     */class DateProperty extends ValueProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    DateProperty.$_ctor='DateProperty';/**
     * Enum property.
     */class EnumProperty extends ValueProperty{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop,type){super(prop);this._type=type||prop.domain;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get domain(){const vals=Utils.getEnumValues(this._type);if(typeof this.defaultValue==='undefined'){vals.unshift(undefined);}return vals;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    EnumProperty.$_ctor='EnumProperty';/**
     * ReportItem property.
     * ReportItem.name으로 다른 ReportItem을 지정하는 속성.
     */class ReportItemProperty extends StringProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ReportItemProperty.$_ctor='ReportItemProperty';/**
     * 참조 항목 list를 갖는 property.
     */class ListableProperty extends StringProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ListableProperty.$_ctor='ListableProperty';/**
     * domain 설정 여부와 상관 없이 requred가 false.
     */class EditListableProperty extends StringProperty{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    EditListableProperty.$_ctor='EditListableProperty';/**
     * Function property.
     */class FunctionProperty extends StringProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    FunctionProperty.$_ctor='FunctionProperty';/**
     * Number array property.
     */class NumberArrayProperty extends ValueProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    NumberArrayProperty.$_ctor='NumberArrayProperty';/**
     * String array property.
     */class StringArrayProperty extends ValueProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    StringArrayProperty.$_ctor='StringArrayProperty';/**
     * Color property.
     */class ColorProperty extends ValueProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ColorProperty.$_ctor='ColorProperty';/**
     * Popup property.
     */class PopupProperty extends ValueProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    PopupProperty.$_ctor='PopupProperty';////////////////////////////////////////////////////////////////////////////////
    /**
     * Style property 모델 구성 요소.
     */class StyleProperty extends PropertyItem{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getValue(source){if(this.parent){return source.getSubStyleProperty(this.parent,this.name);}else {return source.getStyleProperty(this.name);}}setValue(source,value){if(this.parent){source.setSubStyleProperty(this.parent,this.name,value);}else {source.setStyleProperty(this.name,value);}}setValues(sources,value){const source=sources[0];if(this.parent){source.setItemsSubStyleProperty(sources,this.parent,this.name,value);}else {source.setItemsStyleProperty(sources,this.name,value);}}}/**
     * Background style property.
     */class BackgroundStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'background';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    BackgroundStyle.$_ctor='BackgroundStyle';/**
     * Color style property.
     */class ColorStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'color';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ColorStyle.$_ctor='ColorStyle';/**
     * FontFamily style property.
     */class FontFamilyStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'fontFamily';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    FontFamilyStyle.VALUES=[undefined,'Arial','Helvetica','Tahoma','"Trebuchet MS"','Verdana','"Courier New"','"Lusida Console"','"Times New Roman"'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    FontFamilyStyle.$_ctor='FontFamilyStyle';/**
     * FontSize style property.
     */class FontSizeStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'fontSize';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    FontSizeStyle.$_ctor='FontSizeStyle';/**
     * FontStyle style property.
     */class FontStyleStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'fontStyle';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    FontStyleStyle.VALUES=[undefined,'normal','italic','oblique'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    FontStyleStyle.$_ctor='FontStyleStyle';/**
     * FontWeight style property.
     */class FontWeightStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'fontWeight';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    FontWeightStyle.VALUES=[undefined,'normal','bold','lighter','bolder','100','200','300','400','500','600','700','800','900'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    FontWeightStyle.$_ctor='FontWeightStyle';/**
     * TextAlign style property.
     */class TextAlignStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'textAlign';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    TextAlignStyle.VALUES=[undefined,'left','center','right'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    TextAlignStyle.$_ctor='TextAlignStyle';/**
     * VerticalAlign style property.
     */class VerticalAlignStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'verticalAlign';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    VerticalAlignStyle.VALUES=[undefined,'top','middle','bottom'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    VerticalAlignStyle.$_ctor='VerticalAlignStyle';/**
     * WhiteSpace style property.
     */class WhiteSpaceStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'whiteSpace';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    WhiteSpaceStyle.VALUES=[undefined,'normal','nowrap','pre','pre-wrap','pre-line'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    WhiteSpaceStyle.$_ctor='WhiteSpaceStyle';/**
     * TextDecoration style property.
     */class TextDecorationStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'textDecoration';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    TextDecorationStyle.VALUES=[undefined,'underline','line-through','overline'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    TextDecorationStyle.$_ctor='TextDecorationStyle';/**
     * LineHeight style property.
     */class LineHeightStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'line-height';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    LineHeightStyle.$_ctor='LineHeightStyle';/**
     * Boarder style property.
     */class BorderStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'border';}hasColor(){return true;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    BorderStyle.$_ctor='BorderStyle';/**
     * Border item style property.
     * Border Left, Right, Top, Bottom.
     */class BorderItemStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    hasColor(){return true;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    BorderItemStyle.$_ctor='BorderItemStyle';class BorderLeftStyle extends BorderItemStyle{constructor(prop){super(prop);}get styleName(){return 'border-left';}}BorderLeftStyle.$_ctor='BorderLeftStyle';class BorderRightStyle extends BorderItemStyle{constructor(prop){super(prop);}get styleName(){return 'border-right';}}BorderRightStyle.$_ctor='BorderRightStyle';class BorderTopStyle extends BorderItemStyle{constructor(prop){super(prop);}get styleName(){return 'border-top';}}BorderTopStyle.$_ctor='BorderTopStyle';class BorderBottomStyle extends BorderItemStyle{constructor(prop){super(prop);}get styleName(){return 'border-bottom';}}BorderBottomStyle.$_ctor='BorderBottomStyle';/**
     * Boarder style property.
     */class PaddingStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'padding';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    PaddingStyle.$_ctor='PaddingStyle';/**
     * Padding item style property.
     * Padding Left, Right, Top, Bottom.
     */class PaddingItemStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    PaddingItemStyle.$_ctor='PaddingItemStyle';class PaddingLeftStyle extends PaddingItemStyle{constructor(prop){super(prop);}get styleName(){return 'padding-left';}}PaddingLeftStyle.$_ctor='PaddingLeftStyle';class PaddingRightStyle extends PaddingItemStyle{constructor(prop){super(prop);}get styleName(){return 'padding-right';}}PaddingRightStyle.$_ctor='PaddingRightStyle';class PaddingTopStyle extends PaddingItemStyle{constructor(prop){super(prop);}get styleName(){return 'padding-top';}}PaddingTopStyle.$_ctor='PaddingTopStyle';class PaddingBottomStyle extends PaddingItemStyle{constructor(prop){super(prop);}get styleName(){return 'padding-bottom';}}PaddingBottomStyle.$_ctor='PaddingBottomStyle';/**
     * Margin item style property.
     * Margin Left, Right, Top, Bottom.
     */class MarginItemStyle extends StyleProperty{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}}class MarginLeftStyle extends MarginItemStyle{constructor(prop){super(prop);}get styleName(){return 'margin-left';}}MarginLeftStyle.$_ctor='MarginLeftStyle';class MarginRightStyle extends MarginItemStyle{constructor(prop){super(prop);}get styleName(){return 'margin-right';}}MarginRightStyle.$_ctor='MarginRightStyle';class MarginTopStyle extends MarginItemStyle{constructor(prop){super(prop);}get styleName(){return 'margin-top';}}MarginTopStyle.$_ctor='MarginTopStyle';class MarginBottomStyle extends MarginItemStyle{constructor(prop){super(prop);}get styleName(){return 'margin-bottom';}}MarginBottomStyle.$_ctor='MarginBottomStyle';/**
     * Opacity style property.
     */class OpacityStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'opacity';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    OpacityStyle.$_ctor='OpacityStyle';/**
     * CellAlign style property.
     */class CellAlignStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'cellAlign';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    CellAlignStyle.VALUES=[undefined,'left','center','right'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    CellAlignStyle.$_ctor='CellAlignStyle';/**
     * Svg stroke-width style property.
     */class StrokeWidthStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'strokeWidth';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    StrokeWidthStyle.$_ctor='StrokeWidthStyle';/**
     * Svg stroke-dasharray style property.
     */class StrokeDasharrayStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'strokeDasharray';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    StrokeDasharrayStyle.$_ctor='StrokeDasharrayStyle';/**
     * VerticalAlign style property.
     */class WritingModeStyle extends StyleProperty{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styleName(){return 'writingMode';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    WritingModeStyle.VALUES=[undefined,'horizontal-tb','vertical-rl','vertical-lr'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    WritingModeStyle.$_ctor='WritingModeStyle';////////////////////////////////////////////////////////////////////////////////
    var PropCategory;(function(PropCategory){PropCategory["DESIGN"]="design";PropCategory["BASIC"]="basic";PropCategory["TEXT"]="text";PropCategory["DATA"]="data";PropCategory["BOUND"]="bound";PropCategory["EVENT"]="event";PropCategory["EDITOR"]="editor";PropCategory["REPORT"]="report";PropCategory["PAPER"]="paper";PropCategory["BOX"]="box";PropCategory["TABLE"]="table";PropCategory["BARCODE"]="barcode";PropCategory["CELL"]="cell";PropCategory["BAND"]="band";PropCategory["BAND_GROUP"]="band group";PropCategory["BAND_CELL"]="band cell";PropCategory["FIELD"]="field";PropCategory["COLUMN"]="column";PropCategory["ROW"]="row";PropCategory["CHART"]="chart";PropCategory["TITLE"]="title";PropCategory["SUBTITLE"]="subtitle";PropCategory["AXIS"]="axis";PropCategory["XAXIS"]="x Axis";PropCategory["YAXIS"]="y Axis";PropCategory["SERIES"]="series";PropCategory["LABEL"]="label";PropCategory["LABELS"]="labels";PropCategory["DATA_LABELS"]="dataLabels";PropCategory["MARKER"]="marker";PropCategory["LEGEND"]="legend";})(PropCategory||(PropCategory={}));/**
     * Report 혹은 ReportItem들의 속성 집합 모델.
     */class PropertyModel extends EventAware{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super();this._modelMap={};this._groupMap={};this._styleGroup=new PropertyGroup('Styles');this._childStyleMap={};this._groups=[];this._models=[];this._name=name;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get name(){return this._name;}/** source */get source(){return this._source;}set source(value){if(value!==this._source){this._source=value;this.$_buildItems();this._fireSourceChanged();}}/**
         * 리포트에서 복수 선택시 설정된다.
         */get sources(){return this._sources;}set sources(value){this._sources=value;this.source=value&&value.length>0?value[0]:null;}/** groupCount */get groupCount(){return this._groups.length;}/**
         * sub model count
         */get modelCount(){return this._models.length;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getGroup(index){return this._groups[index];}getModel(index){return this._models[index];}refresh(){this.$_buildItems();}updateValue(source,item,value){const prop=item['_prop'];const sources=this._sources;source=source||this.source;if(item.prop.multiple&&sources&&sources.length>1){source=sources[0];item.setValues(sources,value);}else if(source){item.setValue(source,value);}if(source&&source.isDominantProp(prop)){this.refresh();this._fireSourceChanged();}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_borrowGroup(label){let group=this._groupMap[label];if(!group){this._groupMap[label]=group=new PropertyGroup(label);}group.source=null;return group;}$_borrowModel(label){let model=this._modelMap[label];if(!model){this._modelMap[label]=model=new PropertyModel();}return model;}$_clear(){this._models=[];for(let m in this._modelMap){this._modelMap[m].$_clear();}this._groups=[];for(let g in this._groupMap){this._groupMap[g].clear();}for(let g in this._childStyleMap){this._childStyleMap[g].clear();}}$_buildSource(source,parentGroup){let infos=source.getEditProps();for(let info of infos){if(info.type!==StyleProperty){let group=parentGroup;if(!group){group=this.$_borrowGroup(this.name||info.category);if(this._groups.indexOf(group)<0){this._groups.push(group);}}let item=group.borrow(info);if(!item){item=new info.type(info);}if(item instanceof ModelProperty){item.model.source=source[info.name];info.indented&&(group.source=item.model.source);item.model.$_buildItems(info.indented?group:null);}group.add(item);}}// styles
    let infos2=source.getStyleProps();if(infos2&&infos2.length>0){const group=this._styleGroup;group.source=this.source;group.clear();for(let info of infos2){let item=group.borrow(info);if(!item){item=new info.type(info);}group.add(item);}if(group.count>0){this._groups.push(group);}}// sub styles
    for(let info of infos){if(info.type===StylesProperty){const group=this.$_borrowGroup(info.name);assert(group!=null);group.source=this.source;group.clear();infos2=source.getSubStyleProps(info.name);if(infos2&&infos2.length>0){for(let info of infos2){let item=group.borrow(info);if(!item){item=new info.type(info);}group.add(item);}}if(group.count>0){this._groups.push(group);}}}}$_buildModels(sources){for(let i=0;i<sources.length;i++){const src=sources[i];const m=this.$_borrowModel(src.getCollectionLabel()+i);m.source=src;this._models.push(m);m.$_buildItems();}}$_buildItems(group){this.$_clear();const source=this._source;if(source&&source.getEditProps){if(source.isCollectionProp()){this.$_buildModels(source.getPropertySources());}else {this.$_buildSource(source,group);}}}//-------------------------------------------------------------------------
    // event members
    //-------------------------------------------------------------------------
    _fireSourceChanged(){this.fireEvent(PropertyModel.SOURCE_CHANGED);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // events
    PropertyModel.SOURCE_CHANGED="onPropertySourceChanged";/**
     * Sub property model property.
     */class ModelProperty extends PropertyItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(prop){super(prop);this._model=new PropertyModel(prop.name);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** model */get model(){return this._model;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ModelProperty.$_ctor='ModelProperty';////////////////////////////////////////////////////////////////////////////////
    const STYLE_CATEGORY='styles';const BACKGROUND_COLOR='backgroundColor';const COLOR='color';const FONT_FAMILY='fontFamily';const FONT_SIZE='fontSize';const FONT_STYLE='fontStyle';const FONT_WEIGHT='fontWeight';const TEXT_ALIGN='textAlign';const VERTICAL_ALIGN='verticalAlign';const WRITING_MODE='writingMode';const TEXT_DECORATION='textDecoration';const LINE_HEIGHT='lineHeight';const PADDING_LEFT='paddingLeft';const PADDING_RIGHT='paddingRight';const PADDING_TOP='paddingTop';const PADDING_BOTTOM='paddingBottom';const BORDER='border';const BORDER_LEFT$2='borderLeft';const BORDER_RIGHT$2='borderRight';const BORDER_TOP$2='borderTop';const BORDER_BOTTOM$2='borderBottom';const OPACITY='opacity';const FILL='fill';const STROKE='stroke';const STROKE_WIDTH='strokeWidth';const STROKE_DASHARRAY='strokeDasharray';const BACK_FILL='backFill';const BACK_STROKE='backStroke';const BAR_COLOR='barColor';const CELL_ALIGN='cellAlign';const STYLE_PROPS={};STYLE_PROPS[BACKGROUND_COLOR]={name:BACKGROUND_COLOR,category:STYLE_CATEGORY,type:ColorStyle,multiple:true,default:undefined};STYLE_PROPS[COLOR]={name:COLOR,category:STYLE_CATEGORY,type:ColorStyle,multiple:true,default:undefined};STYLE_PROPS[FONT_FAMILY]={name:FONT_FAMILY,category:STYLE_CATEGORY,type:FontFamilyStyle,multiple:true,default:undefined,domain:FontFamilyStyle.VALUES};STYLE_PROPS[FONT_SIZE]={name:FONT_SIZE,category:STYLE_CATEGORY,type:FontSizeStyle,multiple:true,default:undefined};STYLE_PROPS[FONT_STYLE]={name:FONT_STYLE,category:STYLE_CATEGORY,type:FontStyleStyle,multiple:true,default:undefined,domain:FontStyleStyle.VALUES};STYLE_PROPS[FONT_WEIGHT]={name:FONT_WEIGHT,category:STYLE_CATEGORY,type:FontWeightStyle,multiple:true,default:undefined,domain:FontWeightStyle.VALUES};STYLE_PROPS[TEXT_ALIGN]={name:TEXT_ALIGN,category:STYLE_CATEGORY,type:TextAlignStyle,multiple:true,default:undefined,domain:TextAlignStyle.VALUES};STYLE_PROPS[VERTICAL_ALIGN]={name:VERTICAL_ALIGN,category:STYLE_CATEGORY,type:VerticalAlignStyle,multiple:true,default:undefined,domain:VerticalAlignStyle.VALUES};// STYLE_PROPS[WHITE_SPACE] = {
    //     name: WHITE_SPACE,
    //     category: STYLE_CATEGORY,
    //     type: WhiteSpaceStyle,
    //     multiple: true,
    //     default: undefined,
    //     domain: WhiteSpaceStyle.VALUES
    // };
    STYLE_PROPS[WRITING_MODE]={name:WRITING_MODE,category:STYLE_CATEGORY,type:WritingModeStyle,multiple:true,default:undefined,domain:WritingModeStyle.VALUES};STYLE_PROPS[TEXT_DECORATION]={name:TEXT_DECORATION,category:STYLE_CATEGORY,type:TextDecorationStyle,multiple:true,default:undefined,domain:TextDecorationStyle.VALUES};STYLE_PROPS[LINE_HEIGHT]={name:LINE_HEIGHT,category:STYLE_CATEGORY,type:LineHeightStyle,multiple:true,default:undefined};STYLE_PROPS[BORDER]={name:BORDER,category:STYLE_CATEGORY,type:BorderStyle,multiple:true,default:undefined};STYLE_PROPS[BORDER_LEFT$2]={name:BORDER_LEFT$2,category:STYLE_CATEGORY,type:BorderLeftStyle,multiple:true,default:undefined};STYLE_PROPS[BORDER_RIGHT$2]={name:BORDER_RIGHT$2,category:STYLE_CATEGORY,type:BorderRightStyle,multiple:true,default:undefined};STYLE_PROPS[BORDER_TOP$2]={name:BORDER_TOP$2,category:STYLE_CATEGORY,type:BorderTopStyle,multiple:true,default:undefined};STYLE_PROPS[BORDER_BOTTOM$2]={name:BORDER_BOTTOM$2,category:STYLE_CATEGORY,type:BorderBottomStyle,multiple:true,default:undefined};STYLE_PROPS[PADDING_LEFT]={name:PADDING_LEFT,category:STYLE_CATEGORY,type:PaddingLeftStyle,multiple:true,default:undefined};STYLE_PROPS[PADDING_RIGHT]={name:PADDING_RIGHT,category:STYLE_CATEGORY,type:PaddingRightStyle,multiple:true,default:undefined};STYLE_PROPS[PADDING_TOP]={name:PADDING_TOP,category:STYLE_CATEGORY,type:PaddingTopStyle,multiple:true,default:undefined};STYLE_PROPS[PADDING_BOTTOM]={name:PADDING_BOTTOM,category:STYLE_CATEGORY,type:PaddingBottomStyle,multiple:true,default:undefined};STYLE_PROPS[FILL]={name:FILL,category:STYLE_CATEGORY,type:ColorStyle,multiple:true,default:undefined};STYLE_PROPS[STROKE]={name:STROKE,category:STYLE_CATEGORY,type:ColorStyle,multiple:true,default:undefined};STYLE_PROPS[STROKE_WIDTH]={name:STROKE_WIDTH,category:STYLE_CATEGORY,type:StrokeWidthStyle,multiple:true,default:undefined};STYLE_PROPS[STROKE_DASHARRAY]={name:STROKE_DASHARRAY,category:STYLE_CATEGORY,type:StrokeDasharrayStyle,multiple:true,default:undefined};STYLE_PROPS[BACK_FILL]={name:BACK_FILL,category:STYLE_CATEGORY,type:ColorStyle,multiple:true,default:undefined};STYLE_PROPS[BACK_STROKE]={name:BACK_STROKE,category:STYLE_CATEGORY,type:ColorStyle,multiple:true,default:undefined};STYLE_PROPS[BAR_COLOR]={name:BAR_COLOR,category:STYLE_CATEGORY,type:ColorStyle,multiple:true,default:undefined};STYLE_PROPS[OPACITY]={name:OPACITY,category:STYLE_CATEGORY,type:OpacityStyle,multiple:true,default:undefined};STYLE_PROPS[CELL_ALIGN]={name:CELL_ALIGN,category:STYLE_CATEGORY,type:CellAlignStyle,multiple:true,default:undefined,domain:CellAlignStyle.VALUES};////////////////////////////////////////////////////////////////////////////////
    var DropResultType;(function(DropResultType){DropResultType["PROP"]="prop";})(DropResultType||(DropResultType={}));class ReportStyleObject{}ReportStyleObject.Shared=new ReportStyleObject();/**
     * Report page 구성 요소 기반 클래스.
     * 현재, ReportItem, TableBandField가 있다.
     */class ReportPageItem extends Base{constructor(){super(...arguments);this.outlineOrder=0;}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // ISelectionSource
    //-------------------------------------------------------------------------
    get selectItem(){return this;}canSelectedWith(other){return true;}get index(){return -1;}get outlineItems(){return [];}canParentOf(itemType){return false;}getProperty(prop){return this[prop];}setProperty(prop,value){const page=this.page;if(page){page.report.setItemProperty(this,prop,value);}else {this[prop]=value;}}isReadOnlyProperty(prop){return false;}/**
         * 이 속성 값이 변경되면 전체 property model을 변경해야 하는가?
         */isDominantProp(prop){return false;}isCollectionProp(){return false;}isEditableCollection(){return false;}isCollectionItem(){return false;}getPropertySources(){return null;}getCollectionLabel(){return;}setItemsStyleProperty(sources,prop,value){const items=sources.filter(s=>s instanceof ReportPageItem);const page=this.page;if(page){const old=this.styles[prop];if(old!==value){page.report.setItemsStyle(items,prop,value);}}else {items.forEach(item=>{item.setStyle(prop,value);});}}getPopupPropLabel(prop){return;}get outlineSource(){return this;}get parent(){const p=this.outlineParent;return p instanceof ReportGroupItem?p:null;}get dataParent(){return this.parent;}get displayParent(){return Utils.cast(this.outlineParent,ReportPageItem);}/**
         * 선택됐을 때 표시될 marquee를 생성하는 item.
         */get marqueeParent(){return null;}get printable(){return true;}//-------------------------------------------------------------------------
    // methdos
    //-------------------------------------------------------------------------
    isAncestorOf(item){return item===this;}getProps(){const obj={};this.getEditProps().forEach(info=>{obj[info.name]=this[info.name];});return obj;}setProps(src){if(Utils.isObject(src)){this.getEditProps().forEach(info=>{if(!info.readonly){const p=info.name;if(src.hasOwnProperty(p)){this[p]=src[p];}}});}}canMove(){return true;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _loadProp(src,prop){src.hasOwnProperty(prop)&&(this[prop]=src[prop]);}_loadProps(src){for(var _len13=arguments.length,props=new Array(_len13>1?_len13-1:0),_key13=1;_key13<_len13;_key13++){props[_key13-1]=arguments[_key13];}for(let prop of props){src.hasOwnProperty(prop)&&(this[prop]=src[prop]);}}_loadPropOf(src,info){if(!info.readonly&&!info.calculated&&info.type!==ModelProperty){const p=info.name;if(!(this[p]instanceof ReportItemCollection)){src.hasOwnProperty(p)&&(this[p]=src[p]);}}}_loadPropsOf(src,infos){for(let info of infos){this._loadPropOf(src,info);}}_saveProp(target,prop){const v=this[prop];if(v!==undefined&&!Number.isNaN(v)&&!(v instanceof ReportItemCollection)){target[prop]=v;}}_saveProps(target){for(var _len14=arguments.length,props=new Array(_len14>1?_len14-1:0),_key14=1;_key14<_len14;_key14++){props[_key14-1]=arguments[_key14];}for(let prop of props){const v=this[prop];if(v!==undefined&&!Number.isNaN(v)&&!(v instanceof ReportItemCollection)){target[prop]=v;}}}/**
         * 속성값이 undefined 이거나 IPropInfo.default와 동일하면 저장하지 않는다.
         * 속성의 기본값은 undefined이거나 IPropInfo.default와 동일해야 한다!!
         */_savePropOf(target,info){if(info.type!==ModelProperty){const p=info.name;const v=this[p];if(v!==undefined&&!Number.isNaN(v)&&v!==info.default&&!(v instanceof ReportItemCollection)){target[p]=v;}}}_savePropsOf(target,infos){for(let info of infos){if(!info.calculated){this._savePropOf(target,info);}}}_loadObject(item,loader,src){const t=item.getSaveLabel();src.hasOwnProperty(t)&&item.load(loader,src[t]);}_loadObjects(items,loader,src){items.forEach(item=>{this._loadObject(item,loader,src);});}_saveObject(item,target){const obj={};item.save(obj);if(!Utils.isEmpty(obj))target[item.getSaveLabel()]=obj;}_saveObjects(items,target){items.forEach(item=>{this._saveObject(item,target);});}_arrangePaddingStyles(styles){if(styles.hasOwnProperty('padding')){const v=styles['padding'].split(/\s+/);const len=v.length;if(!styles.hasOwnProperty('paddingTop'))styles['paddingTop']=v[0];if(!styles.hasOwnProperty('paddingBottom'))styles['paddingBottom']=len>2?v[2]:v[0];if(!styles.hasOwnProperty('paddingLeft'))styles['paddingLeft']=len>3?v[3]:len>1?v[1]:v[0];if(!styles.hasOwnProperty('paddingRight'))styles['paddingRight']=len>1?v[1]:v[0];delete styles['padding'];}}_validateSize(v){if(typeof v==='number'){if(!isNaN(v)){return Math.max(0,v);}}else if(v){// size가 음수일 수 없다.
    const i=v.indexOf('-');if(i>=0){return v.substr(i+1);}}return v;}}var ItemMoveType;(function(ItemMoveType){ItemMoveType["INNER"]="inner";ItemMoveType["OUTER"]="outer";})(ItemMoveType||(ItemMoveType={}));var PrintValue;(function(PrintValue){PrintValue["NO"]="${no}";PrintValue["_NO"]="%{no}";PrintValue["ROW"]="${row}";PrintValue["_ROW"]="%{row}";PrintValue["INDEX"]="${index}";PrintValue["_INDEX"]="%{index}";PrintValue["INO"]="${ino}";PrintValue["_INO"]="%{ino}";})(PrintValue||(PrintValue={}));const BLANK_FIELDS='$_blankFlds';/**
     * Report 구성 요소 기반 클래스.
     *
     * [data]
     * 1. data 속성에 dataProvider에 등록된 리포트 data 이름.
     * 2. value 속성에 "."으로 분리된 값 경로.
     * 3. data를 지정하지 않으면 가장 가까운 조상에 설정된 data.
     * 4. value에 "data::value" 형식으로 지정하면 이 것을 우선.
     */class ReportItem extends ReportPageItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super();this._visible=true;this._rotation=0;// private _styleName: string;
    this._styles={};this._pageBreak=PageBreakMode.NONE;this._designOrder=ReportItem.DEF_DISPLAY_ORDER;this._designBorder=true;this._index=-1;this._valueCallbackDelegate=(ctx,item,row,value)=>{try{return this._valueCallbackFunc(ctx,item,row,value);}catch(err){console.error(err);return '<ERROR>';}};this._styleCallbackDelegate=(ctx,item,row,value)=>{try{return this._styleCallbackFunc(ctx,item,row,value);}catch(err){console.error(err);return '';}};this._name=name;}static findFloatingAnchor(item){if(item instanceof ReportItem){let f=item.getFloatingContainer();if(f&&f.anchorTarget){return f.outlineParent.find(f.anchorTarget,true);}}}//-------------------------------------------------------------------------
    // IOutlineSource
    //-------------------------------------------------------------------------
    get outlineParent(){return this._parent;}get outlineExpandable(){return false;}//-------------------------------------------------------------------------
    // IPropertySource
    //-------------------------------------------------------------------------
    /**
         * Report 편집기에서 수정할 수 있는 속성 정의 목록.
         * 속성이 없는 경우라도 빈 배열을 리턴해야 한다.
         * 각 항목은 아래 속성들을 갖는다.
         * {
         *  name: string,
         *  type: DesignType.
         *  category: string,
         *  domain: any[],
         * }
         */getEditProps(){const infos=this._getEditProps();if(infos){const props=[];for(let p of infos){if(p&&p.name){props.push(p);}}return props;}return [];}getStyleProps(){const styles=this._getStyleProps();if(styles){const infos=[];for(let s of styles){const prop=STYLE_PROPS[s];if(prop){infos.push(prop);}}return infos.length>0?infos:null;}}getSubStyleProps(prop){if(this.isChildProp(prop)){const styles=this._getChildStyleProps(prop);if(styles){const infos=[];for(let s of styles){let p=STYLE_PROPS[s];if(p){// TODO: pooling ?
    p={...p};p.parent=prop;infos.push(p);}}return infos.length>0?infos:null;}}}getPlaceHolder(prop){if(prop.name===ReportItem.PROP_DATA){return this._getParentData();}}/**
         * @internal
         */getData(){var _a;return (_a=this.page)===null||_a===void 0?void 0:_a.report.designData.get(this.data||this._getParentData());}/**
         * @internal
         */getDataFieldNames(){const d=this.getData();if(d instanceof BandData){return [undefined].concat(d.getFieldNames());}else if(d instanceof SimpleData){return [undefined].concat(d.getFieldNames());}else {return [undefined];}}getPropDomain(prop){const page=this.page;if(page){if(prop.name===ReportItem.PROP_DATA){return [undefined].concat(page.report.designData.getNames());}else if(prop.name===ReportItem.PROP_VALUE){return this.getDataFieldNames();}}}getProperty(prop){if(this.isChildProp(prop)){return this._childProps&&this._childProps[prop];}return this[prop];}setProperty(prop,value){const report=this.report;if(report){report.setItemProperty(this,prop,value);}else if(this.isChildProp(prop)){if(!this._childProps)this._childProps={};this._childProps[prop]=value;}else {this[prop]=value;}}setItemsProperty(sources,prop,value){const items=sources.filter(s=>s instanceof ReportPageItem);const report=this.report;if(report){report.setItemsProperty(items,prop,value);}else {items.forEach(item=>{if(item instanceof ReportItem){if(item.isChildProp(prop)){if(!item._childProps)item._childProps={};item._childProps[prop]=value;}else {item[prop]=value;}}});}}getProperties(props){const obj={};if(Utils.isArray(props)){for(let p of props){obj[p]=this.getProperty(p);}}else {for(let p in props){obj[p]=this.getProperty(p);}}return obj;}setProperties(props){for(let p in props){if(this.isChildProp(p)){this.setChildProp(p,props[p]);}else {const d=Object.getOwnPropertyDescriptor(this,p);if(d&&(d.writable||d.set)){this[p]=props[p];}}}}getStyleProperty(prop){return this._styles[prop];}setStyleProperty(prop,value){const page=this.page;if(page){const old=this.styles[prop];if(old!==value){page.report.setItemStyle(this,prop,value);}}else {this.setStyle(prop,value);}}getSubStyleProperty(prop,style){return this._getSubStyle(prop,style);}setSubStyleProperty(prop,style,value){const page=this.page;if(page){const old=this._childProps&&this._childProps[prop]&&this._childProps[prop][style];if(old!=value){page.report.setChildStyleProperty(this,prop,style,value);}}else {this._setSubStyle(prop,style,value);}}setItemsSubStyleProperty(sources,prop,style,value){const items=sources.filter(s=>s instanceof ReportItem);const page=this.page;if(page){const old=this.styles[prop];if(old!==value){page.report.setItemsChildStyleProperty(items,prop,style,value);}}else {items.forEach(item=>{item._setSubStyle(prop,style,value);});}}canPropAdoptDragSource(prop,source){return false;}adoptPropDragSource(prop,source){return;}dataNameChanged(data,oldName){if(this._data===oldName){this._data=data.name;}}dataFieldNameChanged(data,newName,oldName){}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** parent */get parent(){return this._parent;}/** dataParent */get dataParent(){return this._parent;}/** index */get index(){return this._index;}/** level */get level(){return this._parent?this._parent.level+1:0;}/** page */get page(){return this._parent&&this._parent.page;}get report(){return this._parent&&this._parent.report;}/** name */get name(){return this._name;}set name(value){if(value!==this._name){const page=this.page;const old=this._name;if(page&&value&&page.getItem(value)){throw new Error('"'+value+'"'+'는(은) 이미 다른 아이템의 이름으로 사용 중입니다.');}this._name=value;page&&page['$_nameChanged'](this,old);this._changed(ReportItem.PROP_NAME,value,old);}}get pathLabel(){return this.getSaveType()||Utils.uncapitalize(this.outlineLabel);}get displayPath(){//return this._parent.displayPath + '.' + (this._index >= 0 ? '[' + this._index + '].' : '') + this.pathLabel;
    return (this._parent?this._parent.displayPath+'.':'')+this.pathLabel;}/** tag */get tag(){return this._tag;}set tag(value){if(value!=this._tag){const old=this._tag;this._tag=value;this._changed(ReportItem.PROP_TAG,value,old);}}/** load/save 시 array를 사용하면 true */get isArray(){return false;}get isBand(){return false;}/**
         * false면 자리를 차지하지 않는다.
         */get visible(){return this._visible;}set visible(value){if(value!=this._visible){this._visible=value;this._changed(ReportItem.PROP_VISIBLE,value,!value);}}get removable(){return true;}/**
         * IReportData name.
         */get data(){return this._data;}set data(value){if(value!=this._data){const old=this._data;this._data=value;this._changed(ReportItem.PROP_DATA,value,old);}}/**
         * 리포트에 지정된 data의 특정 값(들)을 지시하는 경로.
         * "::" 앞쪽에서 설정된 data 이름이 없는 경우,
         * 자신으로 시작해서 Report까지 가장 가까운 곳(dataParent)에 설정된 data에서 값을 가져온다.
         * '${page}', '%{page}', '${pages}', '%{pages}', '${date}', '%{date}' 등으로 print context 값을 지정할 수도 있다.
         */get value(){return this._value;}set value(value){if(value!=this._value){const old=this._value;this._value=value;this._changed(ReportItem.PROP_TAG,value,old);}}/**
         * Dom title.
         * 출력 리포트에서 이게 필요한가?
         */get hint(){return this._hint;}set hint(value){if(value!=this._hint){const old=this._hint;this._hint=value;this._changed(ReportItem.PROP_HINT,value,old);}}/**
         * width
         */get width(){return this._width;}set width(value){value=this._validateSize(value);if(value!=this._width){const old=this._width;this._width=value;this._widthDim=new Dimension(value);this._changed(ReportItem.PROP_WIDTH,value,old);}}/**
         * height
         */get height(){return this._height;}set height(value){value=this._validateSize(value);if(value!=this._height){const old=this._height;this._height=value;this._heightDim=new Dimension(value);this._changed(ReportItem.PROP_HEIGHT,value,old);}}/**
         * minWidth
         */get minWidth(){return this._minWidth;}set minWidth(value){if(value!=this._minWidth){const old=this._minWidth;this._minWidth=value;this._minWidthDim=new Dimension(value);this._changed(ReportItem.PROP_MIN_WIDTH,value,old);}}/**
         * minHeight
         */get minHeight(){return this._minHeight;}set minHeight(value){if(value!=this._minHeight){const old=this._minHeight;this._minHeight=value;this._minHeightDim=new Dimension(value);this._changed(ReportItem.PROP_MIN_HEIGHT,value,old);}}/**
         * rotation
         */get rotation(){return this.canRotate()?this._rotation:undefined;}set rotation(value){value=isNaN(value)?void 0:value%360;if(value!==this._rotation){const old=this._rotation;this._rotation=value;this._changed(ReportItem.PROP_ROTATION,value,old);}}get isRotated(){return !isNaN(this.rotation)&&this.rotation!==0;}/**
         * onGetValue
         */get onGetValue(){return this._onGetValue;}set onGetValue(value){if(value!==this._onGetValue){if(value){this._valueCallbackFunc=new Function('ctx','item, row, value',value);this._valueCallback=this._valueCallbackDelegate;}else if(this._valueCallback===this._valueCallbackDelegate){this._valueCallback=null;}const old=this._onGetValue;this._onGetValue=value;this._changed(ReportItem.PROP_ON_GET_VALUE,value,old);}}/** valueCallback */get valueCallback(){return this._valueCallback;}set valueCallback(value){if(value!==this._valueCallback){const old=this._valueCallback;this._valueCallback=value;this._changed(ReportItem.PROP_ON_GET_VALUE,value,old);}}// /** styleName */
    // get styleName(): string {
    //     return this._styleName;
    // }
    // set styleName(value: string) {
    //     if (value != this._styleName) {
    //         const old = this._styleName;
    //         this._styleName = value;
    //         this._changed(ReportItem.PROP_STYLE_NAME, value, old);
    //     }
    // }
    /** styles */get styles(){return this._styles;}set styles(value){const styles=this._styles={};if(value){const props=this._getStyleProps();for(let p of props){if(p in value){styles[p]=value[p];}}}if(styles){this._arrangePaddingStyles(styles);}}/** styleCallback */get styleCallback(){return this._styleCallback;}set styleCallback(value){if(value!==this._styleCallback){const old=this._styleCallback;this._styleCallback=value;this._changed(ReportItem.PROP_STYLE_CALLBACK,value,old);}}get onGetStyles(){return this._onGetStyles;}set onGetStyles(value){if(value!==this._onGetStyles){if(value){this._styleCallbackFunc=new Function('ctx, item, row, value',value);this._styleCallback=this._styleCallbackDelegate;}else if(this._styleCallback===this._styleCallbackDelegate){this._styleCallback=null;}const old=this._onGetStyles;this._onGetStyles=value;this._changed(ReportItem.PROP_ON_GET_STYLES,value,old);}}/** pageBreak */get pageBreak(){return this._pageBreak;}set pageBreak(value){if(value!=this._pageBreak){const old=this._pageBreak;this._pageBreak=value;this._changed(ReportItem.PROP_PAGE_BREAK,value,old);}}/**
         * 아웃라인에 표시되는 라벨명
         */get outlineLabel(){return this.name||this.hint;}/** designText */get designText(){return this.outlineLabel;}/** designLevel */get designLevel(){return 0;}/** childPropInfos */get childPropInfos(){return this._childPropInfos;}set childPropInfos(value){//if (!(this instanceof ReportGroupItem) && !value) debugger;
    this._childPropInfos=value;}/** floating */get floating(){return !!this.getFloatingContainer();}/**
         * outline viewer 등에서 이 아이템이 표시되는 순서.
         * 값이 작을 수록 먼저 표시된다.
         * 기본값은 99.
         */get designOrder(){return this._designOrder;}set designOrder(value){this._designOrder=value;}get designBorder(){return this._designBorder;}set designBorder(value){if(value!==this._designBorder){this._designBorder=value;this._changed(ReportItem.PROP_DESIGN_BORDER,value,!value);}}get isRelativeHeight(){return this._heightDim&&!this._heightDim.fixed;}//-------------------------------------------------------------------------
    // child properties
    //-------------------------------------------------------------------------
    /**
         * ColumnBoxContainer|BoundedContainer
         */get left(){return this.getChildProp('left');}/**
         * ColumnBoxContainer|BoundedContainer
         */get right(){return this.getChildProp('right');}/**
         * RowBoxContainer|BoundedContainer
         */get top(){return this.getChildProp('top');}/**
         * RowBoxContainer|BoundedContainer
         */get bottom(){return this.getChildProp('bottom');}/**
         * TableContainer.
         * cell row index in table
         */get row(){return this.getChildProp('row')||0;// undefined일 수 있다.
    }/**
         * TableContainer.
         * cell column index in table.
         */get col(){return this.getChildProp('col')||0;}/**
         * TableBandRow.
         * 이전 행 값과 동일하면 값을 표시하지 않는다.
         * 값의 비교는 blankFields가 설정되면 그 필드들의 값이 모두 동일한 경우,
         * blankFields가 설정되지 않은 경우 value에 설정된 필드 값이 동일한 경우.
         */get equalBlank(){return this.getChildProp('equalBlank');}/**
         * TableBandRow.
         * equalBlank가 true일 깨 값을 비교하는 필드들을 ',' 분리해서 지정한다.
         * 이 속성을 지정하지 않으면 value에 지정된 필드의 값으로 비교한다.
         */get blankFields(){return this.getChildProp('blankFields');}/**
         * true로 지정되면 값과 상관 없이 leaf group 내의 모든 셀을 merge한다.
         * 또, 둘 이상의 table row로 출력되는 경우에도 이 아이템이 속한 컬럼 셀들을 모두 병합한다.
         * 한 행으로 구성된 group field에 bind된 아이템에만 적용해야 의미가 있다.
         */get mergedInGroup(){return this.getChildProp('mergedInGroup');}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    /**
         * 디자이너에서 추기될 때 초기값들 설정.
         */defaultInit(loader,group,hintWidth,hintHeight){this._doDefaultInit(loader,group,hintWidth,hintHeight);}getSaveType(){return;}/**
         * 하위 object 저장 label.
         * _loadObject(), _saveObject()에서 사용.
         */getSaveLabel(){return this.getSaveType();}isContextValue(){return this._value&&ContextData.isValue(this._value);}// isContextEndValue(): boolean {
    //     return this._value && ContextData.isEndValue(this._value);
    // }
    /**
         * 아이템이 특별한 부모에 포함될 때 추가되는 속성들.
         * 예를들어 아이템을 table의 cell로 이동시키면 table에 추가하기 전
         * 사용자가 마우스로 지정한 곳에 있는 셀의 'col', 'row' 속성을 설정해서
         * table이 적절히 item을 배치하도록 한다.
         */setChildProp(prop,value){if(!this._childProps){this._childProps={};}if(value!==this._childProps[prop]){const old=this._childProps[prop];this.$_setChildProp(prop,value);this._changed(prop,value,old);return true;}}$_setChildProp(prop,value){if(value===undefined){delete this._childProps[prop];}else {this._childProps[prop]=value;}switch(prop){case ReportItem.PROP_LEFT:this._leftDim=Dimension.create(value);break;case ReportItem.PROP_RIGHT:this._rightDim=Dimension.create(value);break;case ReportItem.PROP_TOP:this._topDim=Dimension.create(value);break;case ReportItem.PROP_BOTTOM:this._bottomDim=Dimension.create(value);break;}}isChildProp(prop){if(this._childPropInfos){for(let p of this._childPropInfos){if(p.name==prop)return true;}}}getChildProp(prop,defaultValue){const v=this._childProps&&this._childProps[prop];return v===void 0?defaultValue:v;}getChildProps(){return Object.keys(this._childProps).sort();}isStyleProp(prop){const props=this._getStyleProps();return props&&props.includes(prop);}canParentOf(itemType){return false;}canAddTo(group){return !!group;}prepareLayout(printing){this._doPrepareLayout(printing);}preparePrint(ctx){this.prepareLayout(true);this._doPreparePrint(ctx);}getLeft(domain){return this._leftDim?this._leftDim.getPixel(domain):NaN;}setLeft(dim){if(dim!==this._leftDim){const old=this._leftDim;this._leftDim=dim;this._changed(ReportItem.PROP_LEFT,old,dim);}}getRight(domain){return this._rightDim?this._rightDim.getPixel(domain):NaN;}setRight(dim){if(dim!==this._rightDim){const old=this._rightDim;this._rightDim=dim;this._changed(ReportItem.PROP_RIGHT,old,dim);}}getTop(domain){return this._topDim?this._topDim.getPixel(domain):NaN;}setTop(dim){if(dim!==this._topDim){const old=this._topDim;this._topDim=dim;this._changed(ReportItem.PROP_TOP,old,dim);}}getBottom(domain){return this._bottomDim?this._bottomDim.getPixel(domain):NaN;}setBottom(dim){if(dim!==this._bottomDim){const old=this._bottomDim;this._bottomDim=dim;this._changed(ReportItem.PROP_BOTTOM,old,dim);}}getWidth(domain){return this._widthDim?this._widthDim.getPixel(domain):NaN;}getHeight(domain){return this._heightDim?this._heightDim.getPixel(domain):NaN;}getMinWidth(domain){return this._minWidthDim?this._minWidthDim.getPixel(domain):NaN;}getMinHeight(domain){return this._minHeightDim?this._minHeightDim.getPixel(domain):NaN;}canSized(){return true;}canResize(dir){return true;}canResizeWidth(){return this.canResize(ResizeDirection.LEFT);}canResizeHeight(){return this.canResize(ResizeDirection.TOP);}resize(width,height){// TODO: 단위에 맞게 변경시켜야 한다.
    if(this.canResizeWidth()){this.width=width;}if(this.canResizeHeight()){this.height=height;}return this;}canRotate(){return false;}hasStyle(style){return this._styles.hasOwnProperty(style);}getStyle(style){return this._styles[style];}setStyle(style,value){const old=this._styles[style];if(!value)value=void 0;if(value!==old){if(value===void 0){delete this._styles[style];}else {this._styles[style]=value;}//this._changed(ReportItem.PROP_STYLES, value, old);
    this._changed(style,value,old);}}clearStyle(style){if(this._styles.hasOwnProperty(style)){const old=this._styles[style];delete this._styles[style];this._changed(style,void 0,old);}}clearStyles(css){for(let s of this._getStyleProps()){css[s]='';}}load(loader,source){source&&this._doLoad(loader,source);}save(target){var _a;const t=this.getSaveType();if(t){target['type']=t;}if(this._name){target['name']=this._name;}const tag=(_a=this.page)===null||_a===void 0?void 0:_a.saveTag;if(tag){target[tag]=this;}this._doSave(target);if(this.stylable){if(!Utils.isEmpty(this._styles)){this._saveProp(target,'styles');tag&&(target['styles'][tag]=ReportStyleObject.Shared);}this._saveProp(target,'styleCallback');}return Utils.isNotEmpty(target);}getFloatingContainer(){if(this instanceof FloatingContainer){return this;}else if(this._parent instanceof FloatingContainer){return this._parent;}}delete(){this._parent&&this._parent.remove(this);}isAncestor(group){let p=this._parent;while(p){if(p===group)return true;p=p._parent;}}$_getValue(dp,row,field){if(field&&field.indexOf('::')>0){return dp.getValue(field,row);}else if(this._data){return dp.getValueAt(this._data,field,row);}else {const data=this._getParentData();if(data){return dp.getValueAt(data,field,row);}}}/**
         * onGetStyles 등 callback 내에서 사용할 수 있게 노출.
         */getValue(row,field){var _a;const dp=(_a=this.page)===null||_a===void 0?void 0:_a.report.data;if(dp){return this.$_getValue(dp,row,field);}}/**
         * 출력 시 ReportItemElement에서 호출.
         */getPrintValue(dp,row){return this.$_getValue(dp,row,this._value);}_getParentData(){let p=this.dataParent;while(p){if(p.data)return p.data;p=p.dataParent;}}canRemoveFrom(){return this._parent&&this._parent.canRemove(this);}canAdoptDragSource(source){return false;}adoptDragSource(source){return;}canPageBreak(){return this.level<=4;}isBreakBefore(){return this.canPageBreak()&&(this.pageBreak===PageBreakMode.BEFORE||this.pageBreak==PageBreakMode.BOTH);}isBreakAfter(){return this.canPageBreak()&&(this.pageBreak===PageBreakMode.AFTER||this.pageBreak==PageBreakMode.BOTH);}getInvalids(report){if(this.data){const d=report.designData.get(this.data);if(!d){return ['"'+this.data+'" is not a valid data name.'];}else if(this.value&&d instanceof BandData&&!d.containsField(this.value)){return ['"'+this.value+'" is not a valid field name.'];}}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get marqueeParent(){var _a;return this||this._parent||((_a=this._parent)===null||_a===void 0?void 0:_a.marqueeParent);}get printable(){return this.visible;}isReadOnlyProperty(prop){var _a;if(prop.name==='data'&&((_a=this.dataParent)===null||_a===void 0?void 0:_a.dataDominant)){return true;}return false;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _sizable(){return true;}_boundable(){return true;}/**
         * 리포트 아이템 생성 시, 수행할 초기화 작업을 정의한다.
         *
         * @param loader - 아이템을 로드하는 리포트 로더
         * @param group - 아이템의 상위 리포트그룹아이템
         * @param hintWidth - 아이템 영역 너비
         * @param hintHeight - 아이템 영역 높이
         */_doDefaultInit(loader,group,hintWidth,hintHeight){}_getSubStyle(prop,style){const styles=this.getChildProp(prop);return styles&&styles[style];}_setSubStyle(prop,style,value){if(!this._childProps)this._childProps={};if(!this._childProps[prop])this._childProps[prop]={};let styles=this.getChildProp(prop);if(!styles){styles={};this.setChildProp(prop,styles);}const old=styles[style];if(value!=old){if(value===undefined){delete styles[style];}else {styles[style]=value;}this._changed(prop,value,old);}}_doApplyStyle(prop,value,target){return false;}_setLeft(value){this._leftDim=new Dimension(value);}_setRight(value){this._rightDim=new Dimension(value);}_setTop(value){this._topDim=new Dimension(value);}_setBottom(value){this._bottomDim=new Dimension(value);}_getEditProps(){let props=ReportItem.PROPINFOS;if(this._sizable()){props=props.concat(ReportItem.SIZE_PROPINFOS);}if(this._valueable()){props=props.concat(ReportItem.VALUE_PROPINFOS);}else if(this._datable()){props=props.concat(ReportItem.VALUE_PROPINFOS[0]);}if(this._childPropInfos){props=props.concat(this._childPropInfos);}return props;}_getStyleProps(){return [];}_getChildStyleProps(prop){if(prop==='cellStyles'){return ['cellAlign','backgroundColor','paddingLeft','paddingRight','paddingTop','paddingBottom','borderLeft','borderRight','borderTop','borderBottom'];}return [];}_valueable(){return true;}_datable(){return false;}$_attached(parent){if(this._parent!==parent){this._parent=parent;parent&&this._doAttached();}}_doAttached(){}$_detached(){if(this._parent){this._parent=null;this._doDetached();}}_doDetached(){// this._childProps = {}; 초기화 하면 안된다. 부모가 변경된 다시 사용될 수 있다.
    }_isLoading(){const page=this.page;return page&&page.loading;}_changed(prop,newValue,oldValue){const page=this.page;if(page&&!page.loading){this._parent&&this._parent['$_childChanged'](this,prop,newValue,oldValue);page["$_itemChanged"](this,prop,newValue,oldValue);}}get stylable(){return true;}_doLoad(loader,src){this._loadPropsOf(src,ReportItem.PROPINFOS);if(this._valueable()){this._loadPropsOf(src,ReportItem.VALUE_PROPINFOS);}else if(this._datable()){this._loadPropOf(src,ReportItem.VALUE_PROPINFOS[0]);}if(this._sizable()){this._loadPropsOf(src,ReportItem.SIZE_PROPINFOS);}this.stylable&&this._loadProps(src,"styles",'styleCallback');}_saveChildPropsOf(target,infos){const props=this._childProps;if(props){for(let info of infos){const p=info.name;const v=props[p];if(v!==undefined&&!(typeof v==='number'&&isNaN(v))&&v!==info.default){target[p]=v;}}}}_doSave(target){if(this._valueable()){this._savePropsOf(target,ReportItem.VALUE_PROPINFOS);}else if(this._datable()){this._savePropOf(target,ReportItem.VALUE_PROPINFOS[0]);}if(this._sizable()){this._savePropsOf(target,ReportItem.SIZE_PROPINFOS);}this._savePropsOf(target,ReportItem.PROPINFOS);const infos=this._childPropInfos;if(infos&&infos.length>0){this._saveChildPropsOf(target,infos);}}_doPrepareLayout(printing){}_doPreparePrint(ctx){}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ReportItem.DEF_DISPLAY_ORDER=99;// general props
    ReportItem.PROP_NAME='name';ReportItem.PROP_TAG='tag';ReportItem.PROP_LEFT='left';ReportItem.PROP_RIGHT='right';ReportItem.PROP_TOP='top';ReportItem.PROP_BOTTOM='bottom';ReportItem.PROP_DESIGN_BORDER='designBorder';ReportItem.PROP_ON_GET_VALUE='onGetValue';// static readonly PROP_STYLE_NAME = 'styleName';
    ReportItem.PROP_STYLES='styles';ReportItem.PROP_ON_GET_STYLES='onGetStyles';// props
    ReportItem.PROP_VISIBLE='visible';ReportItem.PROP_DATA='data';ReportItem.PROP_VALUE='value';ReportItem.PROP_HINT='hint';ReportItem.PROP_WIDTH='width';ReportItem.PROP_HEIGHT='height';ReportItem.PROP_MIN_WIDTH='minWdth';ReportItem.PROP_MIN_HEIGHT='minHeight';ReportItem.PROP_LOCKED='locked';ReportItem.PROP_PAGE_BREAK='pageBreak';ReportItem.PROP_STYLE_CALLBACK='styleCallback';ReportItem.PROP_ROTATION='rotation';//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    // prop infos
    ReportItem.DATA_PROP={name:ReportItem.PROP_DATA,category:PropCategory.DATA,type:ListableProperty,multiple:false,default:undefined,domain:undefined};ReportItem.VALUE_PROP={name:ReportItem.PROP_VALUE,category:PropCategory.DATA,type:ListableProperty,multiple:false,default:undefined,domain:undefined,validate:(source,value)=>{if(value){if(Utils.getEnumValues(PrintValue).indexOf(value)>=0){return;}if(source.getData()){if(source.getDataFieldNames().indexOf(value)<0){throw '"'+value+'"는(은) 타당한 출력 변수 혹은 데이터 필드명이 아닙니다.';}}}}};ReportItem.PROPINFOS=[{name:ReportItem.PROP_NAME,category:PropCategory.BASIC,type:StringProperty,multiple:false,default:undefined},{name:ReportItem.PROP_TAG,category:PropCategory.BASIC,type:StringProperty,multiple:false,default:undefined},{name:ReportItem.PROP_DESIGN_BORDER,category:PropCategory.DESIGN,type:BooleanProperty,multiple:false,default:true},{name:ReportItem.PROP_VISIBLE,category:PropCategory.BASIC,type:BooleanProperty,multiple:true,default:true},{name:ReportItem.PROP_PAGE_BREAK,category:PropCategory.BASIC,type:EnumProperty,multiple:true,default:PageBreakMode.NONE,domain:PageBreakMode,visible:source=>{return source.canPageBreak();}},{name:ReportItem.PROP_ON_GET_VALUE,category:PropCategory.EVENT,type:FunctionProperty,multiple:false,default:undefined,signature:'(ctx/* PrintContext*/, item/*ReportItem*/, row/*Number*/, value/*any*/)/*any*/',visible:source=>{return source instanceof ReportItem&&!(source instanceof ReportGroupItem);}},{name:ReportItem.PROP_ON_GET_STYLES,category:PropCategory.EVENT,type:FunctionProperty,multiple:false,default:undefined,signature:'(ctx/* PrintContext*/, item/*ReportItem*/, row/*Number*/, value/*any*/)/*any*/'}];ReportItem.SIZE_PROPINFOS=[{name:ReportItem.PROP_WIDTH,category:PropCategory.BOUND,type:SizeProperty,multiple:true,default:undefined,visible:source=>{return source.canSized();}},{name:ReportItem.PROP_HEIGHT,category:PropCategory.BOUND,type:SizeProperty,multiple:true,default:undefined,visible:source=>{return source.canSized();}},{name:ReportItem.PROP_ROTATION,category:PropCategory.BOUND,type:NumberProperty,default:0,visible:source=>{return source.canRotate();}}];ReportItem.VALUE_PROPINFOS=[ReportItem.DATA_PROP,ReportItem.VALUE_PROP];/**
     * 하나 이상의 report item을 포함하는 group item 기반 클래스.
     */class ReportGroupItem extends ReportItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._items=[];this.layoutChanged=false;}//-------------------------------------------------------------------------
    // IOutlineSource override
    //-------------------------------------------------------------------------
    get outlineExpandable(){return true;}get outlineItems(){return this.items;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * child props를 제공하는가?
         */get isChildPropContainer(){return true;}/** count */get count(){return this._items.length;}/** items */get items(){return this._items.slice();}/** designWidth */get designWidth(){return this._designWidth;}set designWidth(value){if(value!==this._designWidth){const old=this._designWidth;this._designWidth=value;this._changed(ReportGroupItem.PROP_DESIGN_WIDTH,value,old);}}/** designHeight */get designHeight(){return this._designHeight;}set designHeight(value){if(value!==this._designHeight){const old=this._designHeight;this._designHeight=value;this._changed(ReportGroupItem.PROP_DESIGN_HEIGHT,value,old);}}get dataDominant(){return false;}get firstChild(){return this._items[0];}get lastChild(){return this._items[this._items.length-1];}get isDataRowContainer(){return false;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    needDesignWidth(){return true;}needDesignHeight(){return true;}get(index){return this._items[index];}canContainsBand(){return false;}canContainsBandGroup(){return false;}contains(item){let deep=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(item instanceof ReportItem){if(this._items.includes(item)){return true;}if(deep){for(let g of this._items){if(g instanceof ReportGroupItem&&g.contains(item,true)){return true;}}}}return false;}indexOf(item){return item instanceof ReportItem&&this._items.indexOf(item);}getNames(list){let recursive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;const $_getNames=function(p,list){for(let i=p._items.length-1;i>=0;i--){const item=p._items[i];if(item.name)list.push(item.name);if(recursive&&item instanceof ReportGroupItem){$_getNames(item,list);}}};list=list||[];$_getNames(this,list);return list;}find(name){let recursive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;const items=this._items;for(let i=items.length-1;i>=0;i--){let item=items[i];if(item.name===name)return item;if(recursive&&item instanceof ReportGroupItem){item=item.find(name,true);if(item)return item;}}}canAdd(item){return item&&this._items.length<this._maxChildCount()&&item.canAddTo(this)&&!this.contains(item);}append(item){let slient=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return this.add(item,-1,slient);}/**
         * @param silent View나 Tool 쪽에서 지정하고 사용한다.
         */add(item){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;let silent=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(item instanceof ReportItem&&this.canAdd(item)){let p=item.outlineParent;if(p){if(p instanceof CellGroup){p=p.outlineParent;}if(p instanceof ReportGroupItem){p.remove(item);}}if(index<0){index=this._items.length;}const item2=this._addItem(item,index,silent);this._doItemAdded(item2,index);this.$_resetIndices();return true;}}canRemove(item){return item instanceof ReportItem&&item.removable&&this.contains(item);}remove(item){if(item instanceof ReportItem&&this.canRemove(item)){const i=this._removeItem(item);if(i>=0){this._doItemRemoved(item,i);this.$_resetIndices();}}}removeLast(){if(this.count>0){this.remove(this.get(this.count-1));}}clear(){this._clearItems();}getMoveType(item){return;}canResizeChild(item,dir){return true;}search(key,options,results){for(let item of this._items){if(item instanceof ReportGroupItem){item.search(key,options,results);}else {const t=item.designText;if(t){let s=t;if(!options.caseSensitive){s=s.toLowerCase();}if(options.wholeWord&&s===key||!options.wholeWord&&s.indexOf(key)>=0){results.push({item:item,prop:t});}}}}}canChangeChildProp(item,prop,value){return true;}changeChildIndex(child,newIndex){const i=this.indexOf(child);if(i>=0&&i!==newIndex){this._items.splice(i,1);this._items.splice(newIndex,0,child);this.$_resetIndices();child['_changed']('index',newIndex,i);return true;}}canAlign(child){return false;}canAlignTo(child,to){return true;}filter(callback){return this._items.filter(callback);}getDescendants(){let all=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let recursive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;function getItems(p,items){p._items.forEach(item=>{if(item instanceof ReportGroupItem){if(all){items.push(item);if(recursive){getItems(item,items);}}}else {items.push(item);}});}const items=[];getItems(this,items);return items;}collectInvalids(report,list){this._items.forEach(item=>{const invalids=item.getInvalids(report);invalids&&invalids.forEach(i=>list.push({item,reason:i}));if(item instanceof ReportGroupItem){item.collectInvalids(report,list);}});}collectBlankItems(childs){const items=[];(childs||this._items).forEach(item=>{if(item.equalBlank){let flds=item.value?[item.value]:[];let p=item.blankFields;if(p){flds=p.split(',').map(f=>f.trim()).filter(f=>!!f);}if(flds.length){items.push(item);item[BLANK_FIELDS]=flds;}}});return items.length>0?items:null;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getEditProps(){const props=super._getEditProps();return props.concat(ReportGroupItem.PROPINFOS);}_getStyleProps(){return ['paddingLeft','paddingRight','paddingTop','paddingBottom'];}_maxChildCount(){return Number.MAX_SAFE_INTEGER;}isAncestorOf(item){if(item===this)return true;if(this.contains(item))return true;for(let i of this._items){if(i.isAncestorOf(item))return true;}}canParentOf(itemType){return true;}prepareLayout(printing){super.prepareLayout(printing);for(let item of this._items){item.prepareLayout(printing);}}preparePrint(ctx){super.preparePrint(ctx);for(let item of this._items){item.preparePrint(ctx);}}_getNameOfItems(){return 'items';}_doLoad(loader,src){super._doLoad(loader,src);const items=this._getNameOfItems();if(!this._ignoreItems()&&src.hasOwnProperty(items)){this._loadItems(loader,src[items]);}}_ignoreItems(){return false;}save(target){let r=super.save(target);if(!this._ignoreItems()&&this._items.length>0){this._saveItems(target[this._getNameOfItems()]=[]);r=true;}return r;}dataNameChanged(data,oldName){super.dataNameChanged(data,oldName);this._items.forEach(item=>item.dataNameChanged(data,oldName));}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    get internalItems(){return this._items;}_valueable(){return false;}_loadChildProp(child,prop,src){src.hasOwnProperty(prop)&&child.setChildProp(prop,src[prop]);}_loadChildProps(child,props,src){for(let prop of props){src.hasOwnProperty(prop)&&child.setChildProp(prop,src[prop]);}}_loadChildPropsOf(child,src,infos){for(let info of infos){if(info.name in src){const v=src[info.name];child.setChildProp(info.name,v);}}}_getChildPropInfos(item){return null;}_loadChild(loader,item,src){item.load(loader,src);if(this.isChildPropContainer){item.childPropInfos=this._getChildPropInfos(item);}this._doLoadChild(item,src);return item;}_loadItems(loader,src){const arr=Utils.makeArray(src);this.clear();if(arr){const page=this.page;const items=[];let i=0;for(let src of arr){if(src){let item=loader.createItem(src);if(item){// load 중 parent 경로를 따라 page에 접근할 수 있으므로 미리 설정한다.
    item["$_attached"](this);item=this._loadChild(loader,item,src);// _loadChild(...) 호출로 item이 변경된 경우를 위해 (TableCellItem인 경우)
    !item.parent&&item["$_attached"](this);items.push(item);page&&page["$_itemAdded"](item,i,true);this._doItemAdded(item,i++);}}}if(items&&items.length>0){this._items=items;this.$_resetIndices();}}}_doLoadChild(child,src){}_saveItems(target){this._doSaveItems(target,this._items);}_doSaveItems(target,items){for(let item of items){const obj={};item.save(obj);target.push(obj);}}_addItem(item,index,silent){const page=this.page;const items=this._items;index=Math.max(0,Math.min(items.length,index));items.splice(index,0,item);if(this.isChildPropContainer){item.childPropInfos=this._getChildPropInfos(item);}item["$_attached"](this);page&&page["$_itemAdded"](item,index,silent);return item;}_removeItem(item){const i=item?this._items.indexOf(item):-1;if(i>=0){const page=this.page;const parent=item.parent;this._items.splice(i,1);item["$_detached"]();page&&page["$_itemRemoved"](item,parent);return i;}return -1;}_clearItems(){if(this._items.length>0){const page=this.page;const items=this._items.slice();this._items=[];for(let item of items){item["$_detached"]();}page&&page["$_itemsRemoved"](items);}}_doItemAdded(item,index){}_doItemRemoved(item,index){}$_resetIndices(){for(let i=this._items.length-1;i>=0;i--){this._items[i]['_index']=i;}}$_childChanged(item,prop,value,oldValue){this._doItemChanged(item,prop,value,oldValue);}_doItemChanged(item,prop,value,oldValue){}_setOutlineOrders(start){for(var _len15=arguments.length,items=new Array(_len15>1?_len15-1:0),_key15=1;_key15<_len15;_key15++){items[_key15-1]=arguments[_key15];}for(let item of items){item.outlineOrder=start++;}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    ReportGroupItem.PROP_DESIGN_WIDTH="designWidth";ReportGroupItem.PROP_DESIGN_HEIGHT="designHeight";// prop infos
    ReportGroupItem.PROPINFOS=[{name:ReportGroupItem.PROP_DESIGN_WIDTH,category:PropCategory.DESIGN,type:DimensionProperty,multiple:false,default:undefined,visible:source=>{return source.needDesignWidth();}},{name:ReportGroupItem.PROP_DESIGN_HEIGHT,category:PropCategory.DESIGN,type:DimensionProperty,multiple:false,default:undefined,visible:source=>{return source.needDesignHeight();}}];class ReportItemCollectionItem extends ReportPageItem{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(collection,src){super();this._collection=collection;src&&this.load(src);if(!this._styles)this._styles={};}//-------------------------------------------------------------------------
    // IOutlineSource
    //-------------------------------------------------------------------------
    get outlineParent(){return this._collection;}get outlineExpandable(){return false;}get outlineLabel(){return '['+this.index+'] '+this.itemType;}getSaveType(){return '';}canRemoveFrom(){return true;}//-------------------------------------------------------------------------
    // IPropertySource
    //-------------------------------------------------------------------------
    getPropDomain(prop){return null;}getStyleProps(){const props=this._getStyleProps();const infos=[];for(let s of props){infos.push(STYLE_PROPS[s]);}return infos;}getStyle(style){return this._styles[style];}setStyle(style,value){const old=this._styles[style];if(value!==old){if(value===undefined){delete this._styles[style];}else {this._styles[style]=value;}this._changed(style,value,old);}}getStyleProperty(prop){return this._styles[prop];}setStyleProperty(prop,value){const page=this.page;if(page){const old=this._styles[prop];if(old!==value){page.report.setItemStyle(this,prop,value);}}else {this.setStyle(prop,value);}}getSubStyleProps(prop){return null;}getPlaceHolder(prop){return;}setItemsProperty(sources,prop,value){}getSubStyleProperty(prop,style){return;}isChildProp(prop){return false;}setSubStyleProperty(prop,style,value){}setItemsSubStyleProperty(sources,prop,style,value){}canPropAdoptDragSource(prop,source){return false;}adoptPropDragSource(prop,source){return;}isCollectionItem(){return true;}/** styles */get styles(){return this._styles;}set styles(value){const styles=this._styles={};if(value){const props=this._getStyleProps();for(let p of props){if(p in value){styles[p]=value[p];}}}if(styles){this._arrangePaddingStyles(styles);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    load(src){this._doLoad(src);}save(target){this._doSave(target);return target;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get collection(){return this._collection;}get level(){return this._collection?this._collection.level+1:0;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _doLoad(src){src.hasOwnProperty('styles')&&(this.styles=src.styles);}_doSave(target){if(!Utils.isEmpty(this._styles)){this._saveProp(target,'styles');}}_changed(prop,newValue,oldValue){var _a;(_a=this._collection)===null||_a===void 0?void 0:_a['_itemChanged'](this,prop,newValue,oldValue);}}class ReportItemCollection extends ReportPageItem{//-------------------------------------------------------------------------
    // IOutlineSource
    //-------------------------------------------------------------------------
    canRemoveFrom(){return false;}canParentOf(itemType){return false;}//-------------------------------------------------------------------------
    // IPropertySource
    //-------------------------------------------------------------------------
    getEditProps(){return [];}getStyleProps(){return [];}getSubStyleProps(prop){return null;}getPlaceHolder(prop){return;}getPropDomain(prop){return null;}getProperty(prop){return;}setProperty(prop,value){}setItemsProperty(sources,prop,value){}getStyleProperty(prop){return;}getStyle(style){return;}setStyle(style,value){}setStyleProperty(prop,value){}setItemsStyleProperty(sources,prop,value){}isChildProp(prop){return false;}getSubStyleProperty(prop,style){return;}setSubStyleProperty(prop,style,value){}setItemsSubStyleProperty(sources,prop,style,value){}canPropAdoptDragSource(prop,source){return false;}adoptPropDragSource(prop,source){return;}isCollectionProp(){return true;}getPropertySources(){return this.items;}preparePrint(ctx){this._doPreparePrint(ctx);for(let i=this.count-1;i>=0;i--){const item=this.get(i);if(item instanceof ReportItem){item.preparePrint(ctx);}}}forEach(callback){for(let i=0,cnt=this.count;i<cnt;i++){callback(this.get(i),i);}}moveItem(from,to){if(from!==to&&from>=0&&from<this.count&&to>=0&&to<this.count){if(this._doMoveItem(from,to)){this._indexChanged();return true;}}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get styles(){return null;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _itemChanged(item,prop,newValue,oldValue){var _a;(_a=this.page)===null||_a===void 0?void 0:_a["$_itemChanged"](item,prop,newValue,oldValue);}_itemAdded(item){const page=this.page;page&&page['$_itemAdded'](item,item.index,false);}_itemsAdded(items){const page=this.page;page&&page['$_itemsAdded'](items,items[0].index);}_itemRemoved(item,oldParent){const page=this.page;page&&page['$_itemRemoved'](item,oldParent);}_itemsRemoved(items){const page=this.page;page&&page['$_itemsRemoved'](items);}_indexChanged(){const page=this.page;page&&page['$_collectionChanged'](this);}_doPreparePrint(ctx){}}var AnchorPosition;(function(AnchorPosition){AnchorPosition["CENTER"]="center";AnchorPosition["LEFT"]="left";AnchorPosition["RIGHT"]="right";AnchorPosition["TOP"]="top";AnchorPosition["BOTTOM"]="bottom";AnchorPosition["INNER_LEFT"]="innerLeft";AnchorPosition["INNER_RIGHT"]="innerRight";AnchorPosition["INNER_TOP"]="innerTop";AnchorPosition["INNER_BOTTOM"]="innerBottom";})(AnchorPosition||(AnchorPosition={}));/**
     * 동일 그룹 내의 다른 아이템을 기준점으로 표시되는 아이템.
     * 자식으로 floating을 추가할 수 없다.
     */class FloatingContainer extends ReportGroupItem{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);this._anchorPosition=AnchorPosition.CENTER;this.designWidth=80;this.designHeight=80;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** anchorTarget */get anchorTarget(){return this._anchorTarget;}set anchorTarget(value){if(value!=this._anchorTarget){const old=this._anchorTarget;this._anchorTarget=value;this._changed(FloatingContainer.PROP_ANCHOR_TARGET,value,old);}}/** anchorPosition */get anchorPosition(){return this._anchorPosition;}set anchorPosition(value){if(value!=this._anchorPosition){const old=this._anchorPosition;this._anchorPosition=value;this._changed(FloatingContainer.PROP_ANCHOR_POSITION,value,old);}}//-------------------------------------------------------------------------
    // child properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'floating';}get outlineLabel(){return '[Floating]';}_maxChildCount(){return 1;}_boundable(){return false;}_getEditProps(){const props=super._getEditProps();return props.concat(FloatingContainer.PROPINFOS);}getPropDomain(prop){if(prop.name===FloatingContainer.PROP_ANCHOR_TARGET){return this.outlineParent.getNames([undefined],true);}return super.getPropDomain(prop);}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.width=Math.min(hintWidth||100,100);this.height=100;}_doLoad(loader,src){super._doLoad(loader,src);if(!src.hasOwnProperty('items')&&src.hasOwnProperty('item')){this._loadItems(loader,src.item);}this._loadPropsOf(src,FloatingContainer.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,FloatingContainer.PROPINFOS);}canAdd(item){return super.canAdd(item)&&!(item instanceof FloatingContainer);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    FloatingContainer.PROP_ANCHOR_TARGET="anchorTarget";FloatingContainer.PROP_ANCHOR_POSITION="anchorPosition";// prop infos
    FloatingContainer.PROPINFOS=[{name:FloatingContainer.PROP_ANCHOR_TARGET,category:"Floating",type:ReportItemProperty,multiple:false,default:undefined},{name:FloatingContainer.PROP_ANCHOR_POSITION,category:"Floating",type:EnumProperty,multiple:false,default:AnchorPosition.CENTER,domain:AnchorPosition}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    FloatingContainer.$_ctor='FloatingContainer';FloatingContainer.ITEM_TYPE='Floating Container';/**
     * 자식들의 위치를 지정할 수 있는 container.
     * 위치 설정이 안된 item은 중앙에 정렬 시킨다.
     */class BoundedContainer extends ReportGroupItem{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // child property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // child properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getChildPropInfos(item){return item['_boundable']()?BoundedContainer.CHILD_PROPS:null;}_doLoadChild(child,src){super._doLoadChild(child,src);this._loadChildPropsOf(child,src,BoundedContainer.CHILD_PROPS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    // child prop infos
    BoundedContainer.CHILD_PROPS=[{name:ReportItem.PROP_LEFT,category:PropCategory.BOUND,type:DimensionProperty,multiple:true,default:undefined,domain:undefined},{name:ReportItem.PROP_RIGHT,category:PropCategory.BOUND,type:DimensionProperty,multiple:true,default:undefined,domain:undefined},{name:ReportItem.PROP_TOP,category:PropCategory.BOUND,type:DimensionProperty,multiple:true,default:undefined,domain:undefined},{name:ReportItem.PROP_BOTTOM,category:PropCategory.BOUND,type:DimensionProperty,multiple:true,default:undefined,domain:undefined}];/**
     * 자식을 대리하는 그룹.
     * 자식 하나만 가질 수 있다.
     */class CellGroup extends ReportGroupItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item,name){super(name);assert(!!item);this._addItem(this._item=item,0,true);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * item
         */get item(){return this._item;}get isEmpty(){return !this._item;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get isChildPropContainer(){return false;}set childPropInfos(value){this._item.childPropInfos=value;}get printable(){return !this._item||this._item.printable;}_maxChildCount(){return 1;}_doItemChanged(item,prop,value,oldValue){this.outlineParent['_doItemChanged'](item,prop,value,oldValue);}}/**
     * CellGroup들만을 자식으로 갖는다.
     */class CellContainer extends ReportGroupItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    /** @internal */this.noPrepareCell=false;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    contains(item){let deep=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(super.contains(item)){return true;}if(!(item instanceof CellGroup)){for(let c of this['_items']){const ci=c.item;if(ci){if(ci===item)return true;if(deep&&ci instanceof ReportGroupItem&&ci.contains(item))return true;}}}}indexOf(item){let i=super.indexOf(item);if(i<=0&&!(item instanceof CellGroup)){const items=this['_items'];for(let j=items.length-1;j>=0;j--){if(items[j].item===item){i=j;break;}}}return i;}findCell(item){for(let c of this.internalItems){if(c.item===item){return c;}}}find(name){let recursive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;const items=this.internalItems;for(let i=items.length-1;i>=0;i--){let item=items[i].item;if(item.name===name)return item;if(recursive&&item instanceof ReportGroupItem){item=item.find(name,true);if(item)return item;}}return;}_loadChild(loader,item,src){super._loadChild(loader,item,src);if(!this.noPrepareCell){item=this._prepareCellGroup(item);}return item;}_addItem(item,index,silent){item=this._prepareCellGroup(item);return super._addItem(item,index,silent);}_removeItem(item){const cell=this._unprepareCellGroup(item);if(cell){let i=super._removeItem(cell);if(i>=0&&item.outlineParent===cell){cell['_removeItem'](item);return i;}}return -1;}_unprepareCellGroup(item){return this.findCell(item);}}var BandSectionLayout;(function(BandSectionLayout){BandSectionLayout["ACROSS_DOWN"]="acrossDown";BandSectionLayout["DOWN_ACROSS"]="downAcross";})(BandSectionLayout||(BandSectionLayout={}));////////////////////////////////////////////////////////////////////////////////
    /** @internal */class ReportItemElement extends ReportElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model,name){super(doc,name);this._modelChanged=true;this._rotation=0;this._model=model;this._doModelChanged(null);}_doDispose(){this._model=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** model */get model(){return this._model;}set model(value){if(value!==this._model){const old=this._model;this._model=value;this._modelChanged=true;this._doModelChanged(old);}}/** navigableParent */get navigableParent(){let p=this.parent;while(p){if(p instanceof ReportGroupItemElement){if(p.navigable)return p;return p.navigableParent;}p=p.parent;}}get modelParent(){let p=this.parent;while(p){if(p instanceof ReportGroupItemElement){if(p.model===this._model.outlineParent){return p;}}p=p.parent;}return null;}get marqueeParent(){var _a;const m=(_a=this.model)===null||_a===void 0?void 0:_a.marqueeParent;if(m){let p=this;while(p){if(p instanceof ReportItemElement&&p.model===m){return p;}p=p.parent;}}return this;}get designable(){return true;}get editable(){return false;}get isSpace(){return false;}get isRelativeHeight(){return this._model.isRelativeHeight;}get rotation(){return this._rotation;}// realtime rotation
    setRotation(value){if(value!==this._rotation){this.$_setRotation(this._rotation=value);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    _clearDesign(){if(this._designView){//if (this._designView.parentElement !== this.dom) debugger;
    //this.dom.removeChild(this._designView);
    Utils.remove(this._designView);this._designView=null;}super._clearDesign();}getEditText(){return '';}setEditText(report,text){}refreshPrintValues(ctx){}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get printable(){return !this._model||this._model.printable;}_initDom(doc,dom){super._initDom(doc,dom);if(this.designable){this._designView=doc.createElement('div');this._designView.className='rr-design-back';dom.appendChild(this._designView);this._bindMarker=doc.createElement('span');this._bindMarker.className='rr-bind-marker';this._designView.appendChild(this._bindMarker);}}_setBindMarker(){let visible=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;let system=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(visible){this._bindMarker.dataset.vis='1';if(system){this._bindMarker.dataset.sys='1';}else {delete this._bindMarker.dataset.sys;}}else {delete this._bindMarker.dataset.vis;}}_doPrepareMeasure(ctx,dom){const model=this._model;if(model){if(model.stylable){// 이전에 설정했던 style들을 초기화한다.
    if(!ctx.printing){if(this._prevStyles){const css=dom.style;for(let s in this._prevStyles){css[s]='';}}this._prevStyles=model.styles&&{...model.styles};}this._doSetStyles(model,dom);}if(ctx.printing){dom.dataset[T_MODEL]=model.shash;// for exporting, testing 중이면 ctx.report가 미설정일 수 있다.
    if(ctx.report){ctx.report.models[model.shash]=model;}const cb=model.styleCallback;if(cb){try{const v=this.getPrintValue(ctx,model);const styles=cb(ctx,model,ctx.row,v);if(styles){Utils.extend(dom.style,styles);}}catch(err){console.error('StyleCallback Error',err);}}dom.dataset.row=ctx.row+'';}dom.title=model.hint||'';}}$_setRotation(rot){const dom=this.dom;if(!isNaN(rot)&&rot!==0){dom.style.transformOrigin='center';dom.style.transform=rot===0?'':'rotate('+rot+'deg)';this._rotation=rot;}else {dom.style.transform='';this._rotation=0;}}_doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz){const model=this._model;if(model){const wdim=model.getWidth(hintWidth);const hdim=model.getHeight(hintHeight);if(!isNaN(wdim))sz.width=wdim;if(!isNaN(hdim))sz.height=hdim;}const rot=model.canRotate()?model.rotation:void 0;this.$_setRotation(rot);}findElement(modelName){return this._model&&modelName&&this._model.name===modelName?this:null;}findElementOf(dom){return this.isDom(dom)?this:null;}getPrintValue(ctx,m,defaultValue){let v;let mv=m.value;switch(mv){case PrintValue.NO:case PrintValue._NO:if(ctx.row>=0)return ctx.row+1;break;case PrintValue.ROW:case PrintValue._ROW:if(ctx.row>=0)return ctx.row;break;case PrintValue.INDEX:case PrintValue._INDEX:// return ctx.index;
    return !isNaN(ctx.band.rowIndex)?ctx.band.rowIndex:ctx.index;case PrintValue.INO:case PrintValue._INO:// return ctx.index + 1;
    return (!isNaN(ctx.band.rowIndex)?ctx.band.rowIndex:ctx.index)+1;default:if(mv&&ctx.dp){v=m.getPrintValue(ctx.dp,ctx.row);}break;}const v2=this._runValueCallback(ctx,m,v);if(v2!==void 0){v=v2;}return v!==undefined?v:defaultValue;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _doModelChanged(oldModel){}_setX(dom,x){dom.style.left=x+'px';}_setY(dom,y){dom.style.top=y+'px';}_setPos(dom,x,y){dom.style.left=x+'px';dom.style.top=y+'px';}_runValueCallback(ctx,m,value){if(!ctx.noValueCallback){const cb=m.valueCallback;if(cb){const v2=cb(ctx,m,ctx.row,value);if(v2!==undefined)return v2;}}}}/** @internal */class ReportGroupItemElement extends ReportItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model,name){super(doc,model,name);this._padLeft=0;this._padRight=0;this._padTop=0;this._padBottom=0;this._borderApplied=false;this.measureFixed=false;// true면 measure 시 부모 너비 대신 자신의 너비를 child masure의 hintWidth로 전달한다.
    }_doDispose(){if(this._floatings){// TODO: clear?
    this._floatings=null;}super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get navigable(){return true;}get lazyLayoutChildren(){return false;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    isContentDom(dom){return dom===this._contentBox;}findElement(modelName){let elt=super.findElement(modelName);if(!elt){const p=this._getItemsParent();for(let i=0,cnt=p.childCount;i<cnt;i++){const child=p.getChild(i);elt=child.findElement(modelName);if(elt)break;}}return elt;}findElementOf(dom){let elt=super.findElementOf(dom);if(!elt){const p=this._getItemsParent();for(let i=0,cnt=p.childCount;i<cnt;i++){const child=p.getChild(i);if(child instanceof ReportItemElement){elt=child.findElementOf(dom);if(elt)break;}}}if(!elt&&dom===this._contentBox)return this;return elt;}getElementOf(model){if(model===this.model)return this;const p=this._getItemsParent();for(let i=0,cnt=p.childCount;i<cnt;i++){const child=p.getChild(i);if(child instanceof ReportItemElement){if(child.model===model)return child;}if(child instanceof ReportGroupItemElement){const elt=child.getElementOf(model);if(elt)return elt;}if(child instanceof ReportPageItemElement){if(child.isViewOf(model)){return child;}}}}indexOfElement(elt){return this._getItemsParent().indexOf(elt);}getLeaves(){function collect(p,views){for(let i=0,cnt=p.childCount;i<cnt;i++){const child=p.getChild(i);if(child instanceof ReportGroupItemElement){collect(child,views);}else if(child instanceof ReportItemElement){views.push(child);}}}const views=[];collect(this._getItemsParent(),views);return views;}getFirst(){const p=this._getItemsParent();for(let i=0,cnt=p.childCount;i<cnt;i++){const child=p.getChild(i);if(child.visible&&child instanceof ReportItemElement){return child;}}return this;}getLast(){const p=this._getItemsParent();for(let i=p.childCount-1;i>=0;i--){const child=p.getChild(i);if(child.visible&&child instanceof ReportItemElement){return child;}}return this;}_getPrev(item){const p=this._getItemsParent();const i=p.indexOf(item);return i>0?p.getChild(i-1):item;}_getNext(item){const p=this._getItemsParent();const i=p.indexOf(item);return i<p.childCount-1?p.getChild(i+1):item;}getPrev(item){return this._getPrev(item);}getNext(item){return this._getNext(item);}getLeft(item){return this._getPrev(item);}getRight(item){return this._getNext(item);}getUpper(item){return this._getPrev(item);}getLower(item){return this._getNext(item);}itemOfDom(dom){if(this.isDom(dom)){return this.model;}const elements=this._getElements();if(elements){for(let child of elements){if(child instanceof ReportGroupItemElement){const item=child.itemOfDom(dom);if(item)return item;}if(child instanceof ReportItemElement&&child.containsDom(dom)){return child.model;}}}}setFixedSize(w){this.width=w;this.measureFixed=true;return this;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    isDom(dom){return super.isDom(dom)||dom===this._contentBox;}_initDom(doc,dom){super._initDom(doc,dom);if(this._needContentBox()){const box=this._contentBox=doc.createElement('div');const css=box.style;box.className='rr-content-box';css.position='absolute';css.boxSizing='border-box';css.left='0';css.top='0';css.width='100%';css.height='100%';dom.appendChild(box);}}replaceDom(dom){super.replaceDom(dom);if(this._needContentBox()){this._contentBox=dom.getElementsByClassName('rr-content-box')[0];}}refreshPrintValues(ctx){for(let i=0;i<this.childCount;i++){const c=this.getChild(i);if(c instanceof ReportItemElement){c.refreshPrintValues(ctx);}}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _getItemViews(){const elements=this._getElements();const elts=[];for(let elt of elements){if(elt instanceof ReportItemElement){elts.push(elt);}}return elts;}_getParentDom(){return this._contentBox||this['_dom'];}_getItemsParent(){return this;}_needContentBox(){return true;}_needDesignBox(){return false;}_applyPaddings(dom,sz){const styles=getComputedStyle(dom);const top=this._padTop=Utils.toInt(styles.paddingTop)+Utils.toInt(styles.borderTopWidth);const bottom=this._padBottom=Utils.toInt(styles.paddingBottom)+Utils.toInt(styles.borderBottomWidth);const left=this._padLeft=Utils.toInt(styles.paddingLeft)+Utils.toInt(styles.borderLeftWidth);const right=this._padRight=Utils.toInt(styles.paddingRight)+Utils.toInt(styles.borderRightWidth);if(top>0)sz.height+=top;if(bottom>0)sz.height+=bottom;if(left>0)sz.width+=left;if(right>0)sz.width+=right;this._borderApplied=true;}_applyBorders(dom,sz){if(!this._borderApplied){const styles=getComputedStyle(dom);const top=this._padTop+=Utils.toInt(styles.borderTopWidth);const bottom=this._padBottom+=Utils.toInt(styles.borderBottomWidth);const left=this._padLeft+=Utils.toInt(styles.borderLeftWidth);const right=this._padRight+=Utils.toInt(styles.borderRightWidth);if(top>0)sz.height+=top;if(bottom>0)sz.height+=bottom;if(left>0)sz.width+=left;if(right>0)sz.width+=right;this._borderApplied=true;}}_isEmpty(){return this._getItemsParent().childCount<1;}_isFocused(){return this.container['focusedElement']===this;}_isItemFocused(item){return this.container['focusedItem']===item;}_isItemSelected(item){return this.container['_selection'].contains(item);}_getFocusedItem(){return this.container['focusedItem'];}_doMeasure(ctx,dom,hintWidth,hintHeight){const printing=ctx.printing;const model=this.model;const report=ctx.reportView;const p=this._getItemsParent();if(this._modelChanged||report["_modelDirty"]||model.layoutChanged){p.clear();this._buildItems(ctx,report,model);this._modelChanged=false;model.layoutChanged=false;}const w=this.measureFixed?this.width:Utils.pickNum(this._modelWidth,hintWidth);const cnt=p.childCount;for(let i=0;i<cnt;i++){const elt=p.getChild(i);if(elt.visible=!printing||elt.printable){if(!this.lazyLayoutChildren&&!elt.lazyLayout){this._doMeasureItem(ctx,i,elt,w,hintHeight);}}}return new Size(this.offsetWidth,this.offsetHeight);}_doPrepareMeasure(ctx,dom){super._doPrepareMeasure(ctx,dom);this._borderApplied=false;this._padTop=this._padBottom=this._padLeft=this._padRight=0;}_getDesignText(){return this.model.outlineLabel;}_setDesignContent(empty,designView){if(empty){designView.textContent=this._getDesignText();designView.style.paddingLeft=this.model.designLevel*12+'px';}else {designView.textContent='';}}_doMeasureItem(ctx,index,elt,hintWidth,hintHeight){if(ctx.printing){elt.resetStyleName();}elt.measure(ctx,hintWidth,hintHeight);}_createElement(report,parent,item){const elt=report.$_createElement(item);this._prepareChild(elt);parent.addChild(elt);return elt;}_buildItems(ctx,report,model){const items=model&&model.items;const p=this._getItemsParent();if(items&&items.length>0){for(let item of items){this._createElement(report,p,item);}}}_prepareChild(child){}_doLayoutContent(ctx){const printing=ctx.printing;const p=this._getItemsParent();const x=this._padLeft;const y=this._padTop;const w=p.width-x-this._padRight;const h=p.height-y-this._padBottom;if(this._floatings)this._floatings=[];for(let i=0,cnt=p.childCount;i<cnt;i++){const elt=p.getChild(i);if(elt.visible=!printing||elt.printable){if(this.lazyLayoutChildren||elt.lazyLayout){this._doMeasureItem(ctx,i,elt,this.width,this.height);}elt.resize(elt.measuredWidth,elt.measuredHeight);if(!elt.floating)elt.draw();elt.layoutContent(ctx);if(elt instanceof ReportItemElement){if(elt.floating){if(!this._floatings)this._floatings=[];elt['_nodraw']=true;this._floatings.push(elt);}else {this._layoutItem(ctx,elt,elt.model,x,y,w,h);}}else {this._layoutChild(ctx,elt,x,y,w,h);}}}}layoutFloating(ctx){const floatings=this._floatings;if(floatings&&floatings.length){for(let i=0;i<floatings.length;i++){const elt=floatings[i];if(elt.visible){elt['_nodraw']=false;this._layoutFloating(ctx,elt,elt.model);elt.draw();}}}}_layoutItem(ctx,child,model,x,y,width,height){}_layoutChild(ctx,child,x,y,width,height){}_layoutFloating(ctx,child,model){const anchor=this.findElement(model.anchorTarget);if(anchor instanceof ReportItemElement){const r1=this.container.getDomPosition(this);const r2=this.container.getDomPosition(anchor);let x=r2.x-r1.x;let y=r2.y-r1.y;switch(model.anchorPosition){case AnchorPosition.INNER_LEFT:y-=(child.height-anchor.height)/2;break;case AnchorPosition.LEFT:x-=child.width;y-=(child.height-anchor.height)/2;break;case AnchorPosition.INNER_RIGHT:x+=anchor.width-child.width;y-=(child.height-anchor.height)/2;break;case AnchorPosition.RIGHT:x+=anchor.width;y-=(child.height-anchor.height)/2;break;case AnchorPosition.INNER_TOP:x-=(child.width-anchor.width)/2;break;case AnchorPosition.TOP:x-=(child.width-anchor.width)/2;y-=child.height;break;case AnchorPosition.INNER_BOTTOM:x-=(child.width-anchor.width)/2;y+=anchor.height-child.height;break;case AnchorPosition.BOTTOM:x-=(child.width-anchor.width)/2;y+=anchor.height;break;case AnchorPosition.CENTER:default:x-=(child.width-anchor.width)/2;y-=(child.height-anchor.height)/2;break;}child.dom[T_ANCHOR]=anchor.dom;child.dom[T_ANCHOR_POS]=model.anchorPosition;child.move(x,y);child.setPrintStyles();return;}}_doAfterLayout(ctx){// TODO: !ctx.printing은 check할 필요가 없어야 한다.
    if(!ctx.printing&&this._designView){if(this._needDesignBox()){const empty=this._isEmpty();if(empty){this.dom.setAttribute('data-empty','1');}else {this.dom.removeAttribute('data-empty');}this._setDesignContent(empty,this._designView);if(this.model.designBorder===false){this._designView.style.border='none';}}else {this._designView.style.display='none';}}}_doPrint(doc,ctx){super._doPrint(doc,ctx);this.layoutFloating(ctx);}}const BAND_ROW_BLANK='$_brb';const BAND_ROW_TYPE='$_brt';const BAND_ROW_INDEX='$_bri';const BAND_MASTER='master';const BAND_ROW='r';const BAND_DUMMY='d';const BAND_GROUP_HEADER='gh';const BAND_GROUP_FOOTER='gf';class BandElement extends ReportGroupItemElement{getSibling(item,delta){const lines=this.getLines();const i=lines.indexOf(item);if(delta<0&&i>0||delta>0&&i<lines.length-1){return lines[Math.max(0,Math.min(lines.length-1,i+delta))];}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _getNext(item){const lines=this.getLines();const i=lines.indexOf(item);if(i<lines.length-1){return lines[i+1];}}_getPrev(item){const lines=this.getLines();const i=lines.indexOf(item);if(i>0){return lines[i-1];}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    BandElement.END_ROW_MESSAGE_CLASS='rr-end-row-message';////////////////////////////////////////////////////////////////////////////////
    /**
     * Printing 관련 상태 정보 모델.
     */class PrintContext extends Base{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){let printing=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let compositePrinting=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;super();this._pageCount=0;this._page=0;this._detailPageCount=0;this._detailPage=0;this._compositePageCount=0;this._compositePage=0;this.noValueCallback=false;this.headerHeight=0;this.footerHeight=0;this.reportHeaderHeight=0;this.reportFooterHeight=0;this.bodyTop=0;this.bodyBottom=0;this.bodyHeight=0;this.y=0;// page 기준 현재 위치
    this.h=0;// body 기준 남아있는 높이
    this.yBand=0;// band 기준 현재 위치
    this.row=-1;// band data row index. 출력 중인 band가 설정한다.
    this.index=-1;// band row index. 출력 중인 band가 설정한다.
    this.contextable=false;this.contextValues=[];this._userData={row:0};this._tags={};this._bandSave={};// for async mode
    this.async=false;this.reportCount=1;this.reportIndex=0;this.prevPages=0;this._printing=printing;this._compositePrinting=compositePrinting;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * printing
         */get printing(){return this._printing;}/**
         * compositePrinting 복합 출력 여부를 반환
         */get compositePrinting(){return this._compositePrinting;}/**
         * data provider
         */get dp(){return this._dp;}set dp(value){this._dp=value;}/**
         * design data provider
         */get designDp(){return this._desingDp;}set designDp(value){this._desingDp=value;}/**
         * assets
         */get assets(){return this._assets;}set assets(value){this._assets=value;}/**
         * reportView
         */get reportView(){return this._reportView;}set reportView(value){this._reportView=value;}/**
         * pageWidth
         */get pageWidth(){return this._pageWidth;}set pageWidth(value){this._pageWidth=value;}/**
         * pageHeight
         */get pageHeight(){return this._pageHeight;}set pageHeight(value){this._pageHeight=value;}/**
         * date
         */get date(){return this._date;}/**
         * page count.
         */get pageCount(){return this._pageCount;}/**
         * page index.
         */get page(){return this._page;}/**
         * detail page count.
         */get detailPageCount(){return this._detailPageCount;}/**
         * detail page index.
         */get detailPage(){return this._detailPage;}/**
         * compositePage count.
         */get compositePageCount(){return this._compositePageCount;}/**
         * compositePage index.
         */get compositePage(){return this._compositePage;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    preparePrint(report){var _a;this.contextValues=[];this._date=new Date();this.report=report||((_a=this._reportView)===null||_a===void 0?void 0:_a.model);}preparePage(page,allPage){this._page=page;this._compositePage=allPage;}setDetailPage(count,page){this._detailPageCount=count;this._detailPage=page;}finishPrint(pageCount){this._pageCount=pageCount;}// setCompositePage(printedPageCount: number = 0) {
    //     this._compositePage = this.page + printedPageCount;
    // }
    setCompositePageCount(compostePageCount){this._compositePageCount=compostePageCount;}getUserData(){this._userData.row=this.row;return this._userData;}getCurrentValue(prop){switch(prop){case'row':return this.row;}}setTag(tag,value){if(tag){this._tags[tag]=value;}}unsetTag(tag){delete this._tags[tag];}getTag(tag,def){const v=this._tags[tag];return v!==undefined?v:def;}getValue(data,row,field){if(this._dp&&data&&field){const d=this._dp.get(data);if(d){if(!(row>=0))row=this.row;if(d instanceof BandData){return d.getRowValue(row,field);}else {return d.getValue(field);}}}}saveBand(){this._bandSave=Object.assign({},{y:this.y,h:this.h,yBand:this.yBand,// bandSummaryRuntime: this.bandSummaryRuntime,
    row:this.row,index:this.index});}restoreBand(){Object.assign(this,this._bandSave);}}class PageBreaker{}class BandPrintInfo{setMaxCount(rows,count){let i=0;let n=0;while(i<rows.length&&n<count){const row=rows[i++];if(typeof row==='number'){n++;}}// detail을 붙인다.
    while(i<rows.length){if(typeof rows[i]==='number'){break;}i++;}rows.length=i;}isRow(row){return typeof row==='number';}isBand(row){return row instanceof BandPrintInfo;}isGroupHeader(row){return row.rowType===BAND_GROUP_HEADER;}isGroupFooter(row){return row.rowType===BAND_GROUP_FOOTER;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _setX(dom,x){if(!dom)debugger;dom.style.left=x+'px';}_setY(dom,y){dom.style.top=y+'px';}_setPos(dom,x,y){dom.style.left=x+'px';dom.style.top=y+'px';}_createPage(doc,parent){const page=doc.createElement('div');page.style.position='relative';// page 위치는 container에서...
    parent.appendChild(page);return page;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Asset item base.
     */class AssetItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name,data){this.name=name;this.data=data;data&&this._parsetData(data);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get isGroup(){return false;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    save(target){target=target||{};target.name=this.name;this._doSave(target);return target;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _parsetData(data){}_doSave(target){}}/**
     * Image data url.
     */class ImageAsset extends AssetItem{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doSave(target){target.type='img';target.data=this.data;target.description=this.description;}}/**
     * Svg xml.
     */class SvgAsset extends AssetItem{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doSave(target){target.type='svg';target.data=this.data;target.description=this.description;}}/**
     * Color palette
     */class ColorPaletteAsset extends AssetItem{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _parsetData(data){}_doSave(target){}}/**
     * Chartist Theme
     */class ChartistThemeAsset extends AssetItem{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _parsetData(data){this.theme=JSON.parse(data);}_doSave(target){target.type='charitst';target.theme=JSON.stringify(this.theme);}}/**
     * Highchart Theme
     */class HighchartThemeAsset extends AssetItem{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _parsetData(data){this.theme=JSON.parse(data);}_doSave(target){target.type='highchart';target.theme=JSON.stringify(this.theme);}}/**
     * Asset folder.
     */class AssetGroup extends AssetItem{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(name){super(name,undefined);this.items=[];}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get count(){return this.items.length;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    get(name){for(let item of this.items){if(item.name==name)return item;}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    save(target){for(let item of this.items){if(!(item instanceof AssetGroup)){let obj={};item.save(obj);if(Utils.isNotEmpty(obj)){target.push(obj);}}}}indexOf(item){return this.items.indexOf(item);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get isGroup(){return true;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_findItem(path){let groupOnly=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let i=path.indexOf('/');if(i<0)i=path.indexOf('\\');let n=i>=0?path.substring(0,i):path;for(let a of this.items){if(a.name==n){if(groupOnly&&!(a instanceof AssetGroup)){return this;}if(i>=0&&i<path.length-1&&a instanceof AssetGroup){return a.$_findItem(path.substr(i+1));}return a;}}}}/**
     * Asset 관리자.
     * 모든 asset의 name은 경로와 상관없이 유일해야 한다.
     * {
     *  'folder path': [asset items,...],
     *  'folder path': [asset items,...]
     * }
     *
     * 리포트에 저장되는 asset들 외에 application에서 제공하는 asset들(stock assets)이
     * application asset view에 표시되도록 하고,
     * 그 asset들이 report에 추가되면 자동으로 report에도 추가한다.
     */class AssetManager extends EventAware{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){super();this._nameMap={};this._root=new AssetGroup('_root_');this._root.path='/';}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** root */get root(){return this._root;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    load(src){for(let d in src){const g=this.forceGroup(d);const items=src[d];for(let item of items){if(item.name&&item.type&&item.data){let asset;switch(item.type){case"img":asset=this.$_addImage(g,item.name,item.data);break;case"svg":asset=this.$_addSvg(g,item.name,item.data);break;case"palette":asset=this.$_addPalette(g,item.name,item.data);break;case"chartist":asset=this.$_addChartist(g,item.name,item.data);break;case"highchart":asset=this.$_addHighchart(g,item.name,item.data);break;}if(item.hasOwnProperty('description')){asset.description=item.description;}}}}}$_collectGroups(p,groups){groups.push(p);for(let item of p.items){if(item instanceof AssetGroup){this.$_collectGroups(item,groups);}}}save(target){const groups=[];this.$_collectGroups(this._root,groups);for(let g of groups){let items=[];g.save(items);target[g.path]=items||[];}}$_checkPath(path){if(path&&(path.charAt(0)=='/'||path.charAt(0)=='\\'))path=path.substr(1);return path;}get(name){return this._nameMap[name];}getImage(name){const img=this._nameMap[name];if(img instanceof ImageAsset){return img.data;}}getSvg(name){const img=this._nameMap[name];if(img instanceof SvgAsset){return img.data;}}getPalette(name){const pal=this._nameMap[name];if(pal instanceof ColorPaletteAsset){return pal;}}getChartist(name){const theme=this._nameMap[name];if(theme instanceof ChartistThemeAsset){return theme;}}getHighchart(name){const theme=this._nameMap[name];if(theme instanceof HighchartThemeAsset){return theme;}}findGroup(path){return this.$_findGroup(path);}forceGroup(path){let g=this._root;path=this.$_checkPath(path);if(path){const arr=path.split(/[\/\\]/);for(let p of arr){const item=g.get(p);if(item){if(item instanceof AssetGroup)g=item;//else throw new Error('Asset item is already exists: ' + path);
    }else {const g2=new AssetGroup(p);g2.path=g.path+(g===this._root?'':'/')+p;g2.parent=g;g.items.push(g2);g=g2;}}}return g;}addGroup(parent,group){const p=typeof parent==='string'?this.$_findGroup(parent):parent;return this.$_addGroup(p||this._root,group);}removeGroup(group){const g=typeof group==='string'?this.$_findGroup(group):group;if(g&&g!==this._root){this.$_removeGroup(g);return true;}}add(group,item){if(item){this.$_addItem(group,item);}}remove(item){if(item){this.$_removeItem(item);}}addImage(group,name,imageData){return this.$_addImage(group,name,imageData);}addSvg(group,name,svgData){return this.$_addSvg(group,name,svgData);}addPalette(group,name,paletteData){return this.$_addPalette(group,name,paletteData);}addCharitst(group,name,themeData){return this.$_addChartist(group,name,themeData);}addHighchart(group,name,themeData){return this.$_addHighchart(group,name,themeData);}getTree(){let root=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'Report';const tree={name:root,editable:false,tag:this._root};this.$_parseTree(this._root,tree);return tree;}$_parseTree(group,target){if(group.count>0){const childs=[];for(let item of group.items){if(item instanceof AssetGroup){const obj={name:item.name,tag:item,type:'report-asset-group'};this.$_parseTree(item,obj);childs.push(obj);}}if(childs.length>0){target['children']=childs;}}}getValidName(prefix){let s=prefix;let x=1;while(true){let found=false;for(let n in this._nameMap){if(s===n){s=prefix+'-'+x++;found=true;break;}}if(!found)break;}return s;}isValidName(name){return !this._nameMap[name];}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_findGroup(path){let g=path?this._root.$_findItem(path):this._root;return g instanceof AssetGroup?g:null;}$_addGroup(p,group){const g=new AssetGroup(group);g.parent=p;g.path=p.path+(p===this._root?'':'/')+g.name;p.items.push(g);return g;}$_removeGroup(g){const p=g.parent;p.items.splice(p.items.indexOf(g),1);g.parent=null;}$_addItem(p,item){if(item.name in this._nameMap){throw new Error('An asset with the same name alyread exisits: '+item.name);}const g=(typeof p==='string'?this.$_findGroup(p):p)||this._root;g.items.push(item);item.parent=g;this._nameMap[item.name]=item;}$_removeItem(item){const g=item.parent;const i=g.items.indexOf(item);if(i>=0){g.items.splice(i,1);delete this._nameMap[item.name];}}$_addImage(p,name,imageData){const img=new ImageAsset(name,imageData);this.$_addItem(p,img);return img;}$_addSvg(p,name,svgData){const svg=new SvgAsset(name,svgData);this.$_addItem(p,svg);return svg;}$_addPalette(p,name,paletteData){const pal=new ColorPaletteAsset(name,paletteData);this.$_addItem(p,pal);return pal;}$_addChartist(p,name,themeData){const chart=new ChartistThemeAsset(name,themeData);this.$_addItem(p,chart);return chart;}$_addHighchart(p,name,themeData){const chart=new HighchartThemeAsset(name,themeData);this.$_addItem(p,chart);return chart;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * 자식 item들을 순서대로 쌓아가며 배치한다.
     * 위치 설정이 안된 item은 중앙에 정렬 시킨다.
     */class StackContainer extends BoundedContainer{//-------------------------------------------------------------------------
    // child property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._overflow=false;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * true로 설정되면 자식이 넘칠 수 있다.
         * 특히, table을 자식으로 갖는 경우 true로 설정해야 우측 끝이 표시되는 경우가 있을 수 있다.
         */get overflow(){return this._overflow;}set overflow(value){if(value!==this._overflow){this._overflow=value;this._changed(StackContainer.PROP_OVERFLOW,value,!value);}}//-------------------------------------------------------------------------
    // child properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return '[Stack]';}getSaveType(){return 'stack';}_datable(){return true;}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.width=Math.min(hintWidth||300,300);this.height=100;}_getStyleProps(){return StackContainer.STYLE_PROPS;}canAlign(child){return true;}canAdoptDragSource(source){return source instanceof ImageAsset;}getMoveType(item){return ItemMoveType.INNER;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    StackContainer.PROP_OVERFLOW="overflow";// prop infos
    StackContainer.PROPINFOS=[{name:StackContainer.PROP_OVERFLOW,category:PropCategory.BOX,type:BooleanProperty,multiple:false,default:false}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    StackContainer.$_ctor='StackContainer';StackContainer.ITEM_TYPE='Stack Container';// style props
    StackContainer.STYLE_PROPS=['fontFamily','fontSize','fontWeight','color','backgroundColor','paddingLeft','paddingTop','paddingRight','paddingBottom','border','borderLeft','borderRight','borderTop','borderBottom'];////////////////////////////////////////////////////////////////////////////////
    /**
     * 리포트 페이지의 수평 전체와 수직 일부를 차지하는 영역 그룹 item.
     * body를 제외하고 페이지를 넘어갈 수 없다.
     */class PageSection extends StackContainer{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get removable(){return false;}get page(){return this.outlineParent;}canMove(){return false;}getSaveType(){return undefined;}canResize(dir){return dir===ResizeDirection.TOP||dir===ResizeDirection.BOTTOM;}_getStyleProps(){const props=super._getStyleProps();return [].concat(props);}}/**
     * 섹션 위아래에 공간(space)를 설정할 수 있는 page 섹션.
     */class SpaceableSection extends PageSection{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * spaceTop
         */get spaceTop(){return this._spaceTop;}set spaceTop(value){value=Utils.toNumber(parseFloat(value));if(value!=this._spaceTop){this._spaceTop=value;this._changed(SpaceableSection.PROP_SPACE_TOP,value,!value);}}/**
         * spaceBottom
         */get spaceBottom(){return this._spaceBottom;}set spaceBottom(value){value=Utils.toNumber(parseFloat(value));if(value!=this._spaceBottom){this._spaceBottom=value;this._changed(SpaceableSection.PROP_SPACE_BOTTOM,value,!value);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,SpaceableSection.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,SpaceableSection.PROPINFOS);}_getEditProps(){const props=super._getEditProps();return props.concat(SpaceableSection.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    SpaceableSection.PROP_SPACE_TOP="spaceTop";SpaceableSection.PROP_SPACE_BOTTOM="spaceBottom";// prop infos
    SpaceableSection.PROPINFOS=[{name:SpaceableSection.PROP_SPACE_TOP,category:"Section",type:NumberProperty,multiple:false,default:undefined},{name:SpaceableSection.PROP_SPACE_BOTTOM,category:"Section",type:NumberProperty,multiple:false,default:undefined}];/**
     * Report header model.
     */class ReportHeader extends SpaceableSection{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){super("reportHeader");this.designHeight=20;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return 'Report Header';}get pathLabel(){return 'reportHeader';}canResize(dir){return dir===ResizeDirection.BOTTOM;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ReportHeader.$_ctor='ReportHeader';/**
     * Report footer model.
     */class ReportFooter extends SpaceableSection{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){super("reportFooter");//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._alignToBottom=false;this.designHeight=20;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * wrap
         */get alignToBottom(){return this._alignToBottom;}set alignToBottom(value){if(value!=this._alignToBottom){this._alignToBottom=value;this._changed(ReportFooter.PROP_ALIGN_TO_BOTTOM,value,!value);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return 'Report Footer';}get pathLabel(){return 'reportFooter';}canResize(dir){return dir===ResizeDirection.TOP;}_getEditProps(){const props=super._getEditProps();return props.concat(ReportFooter.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,ReportFooter.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,ReportFooter.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    ReportFooter.PROP_ALIGN_TO_BOTTOM="alignToBottom";// prop infos
    ReportFooter.PROPINFOS=[{name:ReportFooter.PROP_ALIGN_TO_BOTTOM,category:PropCategory.BOUND,type:BooleanProperty,multiple:true,default:false,domain:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ReportFooter.$_ctor='ReportFooter';/**
     * Report page header model.
     */class PageHeader extends SpaceableSection{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){super("pageHeader");this.designHeight=20;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return 'Page Header';}get pathLabel(){return 'pageHeader';}canResize(dir){return dir===ResizeDirection.BOTTOM;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    PageHeader.$_ctor='PageHeader';/**
     * Report page footer model.
     */class PageFooter extends SpaceableSection{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){super("pageFooter");this.designHeight=20;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return 'Page Footer';}get pathLabel(){return 'pageFooter';}canResize(dir){return dir===ResizeDirection.TOP;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    PageFooter.$_ctor='PageFooter';////////////////////////////////////////////////////////////////////////////////
    /**
     */class PageItemContainer extends BoundedContainer{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name,label){super(name);this._label=label;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return this._label;}get isArray(){return true;}canResize(dir){return false;}_doLoad(loader,src){// items 아래가 아니라 바로 items들이다.
    this._loadItems(loader,src);}_doSave(target){this._saveItems(target);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    PageItemContainer.$_ctor='PageItemContainer';////////////////////////////////////////////////////////////////////////////////
    /**
     * 한 줄 혹은 여러줄의 텍스트를 표시한다.
     * value 속성으로 지정된 data 위치가 타당하면 그 값을, 아니면 text 속성으로 지정한 문자열을 표시한다.
     */class TextItemBase extends ReportItem{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._wrap=false;this._multiLine=false;this._booleanFormat='False:True';this._numberFormat='#,##0';this._dateFormat='yyyy.MM.dd';}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * wrap
         */get wrap(){return this._wrap;}set wrap(value){if(value!=this._wrap){this._wrap=value;this._changed(TextItem.PROP_WRAP,value,!value);}}/**
         * multiLine
         * true면 '<br>'이나 '\n', '\r\n'으로 줄을 나눠 표시한다.
         */get multiLine(){return this._multiLine;}set multiLine(value){if(value!=this._multiLine){this._multiLine=value;this._changed(TextItem.PROP_MULTI_LINE,value,!value);}}/**
         * booleanFormat
         */get booleanFormat(){return this._booleanFormat;}set booleanFormat(value){if(value!=this._booleanFormat){const old=this._booleanFormat;this._booleanFormat=value;this._changed(TextItem.PROP_BOOLEAN_FORMAT,value,old);}}/**
         * numberFormat
         */get numberFormat(){return this._numberFormat;}set numberFormat(value){if(value!=this._numberFormat){const old=this._numberFormat;this._numberFormat=value;this._changed(TextItem.PROP_NUMBER_FORMAT,value,old);}}/**
         * dateFormat
         */get dateFormat(){return this._dateFormat;}set dateFormat(value){if(value!=this._dateFormat){const old=this._dateFormat;this._dateFormat=value;this._changed(TextItem.PROP_DATE_FORMAT,value,old);}}/**
         * 세미콜론(;)으로 구분하여 왼쪽에는 String.prototype.replace의 첫 번째 매개변수,
         * 오른쪽에는 두 번째 매개변수와 같은 타입으로 지정
         * 예) Mr. 홍길동: `'([A-Za-z]*); Mr\. \$1'`,
         * 예) 사업자번호: '(\\d{3})(\\d{2})(\\d{5});$1-$2-$3'
         */get textFormat(){return this._textFormat;}set textFormat(value){if(value!=this._textFormat){const old=this._textFormat;this._textFormat=value;this._changed(TextItem.PROP_TEXT_FORMAT,value,old);}}/**
         * 접두어.
         * expression을 이용해서 표현할 수도 있지만,
         * 이 속성으로 설정하면 text와 다른 스타일을 적용할 수 있다.
         */get prefix(){return this._prefix;}set prefix(value){if(value!=this._prefix){const old=this._prefix;this._prefix=value;this._changed(TextItem.PROP_TEXT_PREFIX,value,old);}}/**
         * 접미어.
         * expression을 이용해서 표현할 수도 있지만,
         * 이 속성으로 설정하면 text와 다른 스타일을 적용할 수 있다.
         */get suffix(){return this._suffix;}set suffix(value){if(value!=this._suffix){const old=this._suffix;this._suffix=value;this._changed(TextItem.PROP_TEXT_SUFFIX,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getEditProps(){const props=super._getEditProps();return props.concat(TextItemBase.PROPINFOS);}_getStyleProps(){return TextItemBase.STYLE_PROPS;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,TextItemBase.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,TextItemBase.PROPINFOS);}_doApplyStyle(prop,value,target){if(prop==='verticalAlign'){// TextItemElement에서 처리한다.
    return true;}if(prop=='scale'){prop='transform';target[prop]='scale('+value+')';return true;}return false;}canRotate(){return true;}canAdoptDragSource(source){return source instanceof ReportDataPath;}adoptDragSource(source){if(source instanceof ReportDataPath){return {type:DropResultType.PROP,prop:'value',value:source.data+'::'+source.path};}}canPropAdoptDragSource(prop,source){return prop.name==='value'&&source instanceof ReportDataPath;}adoptPropDragSource(prop,source){if(prop.name==='value'&&source instanceof ReportDataPath){return {type:DropResultType.PROP,prop:'value',value:source.data+'::'+source.path};}}getPrintValue(dp,row){if(this.isContextValue()){return dp.getContextValue(this.value);}return super.getPrintValue(dp,row);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    TextItemBase.PROP_WRAP="wrap";TextItemBase.PROP_MULTI_LINE="multiLine";TextItemBase.PROP_BOOLEAN_FORMAT="booleanFormat";TextItemBase.PROP_NUMBER_FORMAT="numberFormat";TextItemBase.PROP_DATE_FORMAT="dateFormat";TextItemBase.PROP_TEXT_FORMAT="textFormat";TextItemBase.PROP_TEXT_PREFIX="prefix";TextItemBase.PROP_TEXT_SUFFIX="suffix";// prop infos
    TextItemBase.PROPINFOS=[{name:TextItemBase.PROP_WRAP,category:PropCategory.TEXT,type:BooleanProperty,multiple:true,default:false,domain:undefined},{name:TextItemBase.PROP_MULTI_LINE,category:PropCategory.TEXT,type:BooleanProperty,multiple:true,default:false,domain:undefined},{name:TextItemBase.PROP_BOOLEAN_FORMAT,category:PropCategory.TEXT,type:StringProperty,multiple:true,default:'False:True'},{name:TextItemBase.PROP_NUMBER_FORMAT,category:PropCategory.TEXT,type:StringProperty,multiple:true,default:'#,##0'},{name:TextItemBase.PROP_DATE_FORMAT,category:PropCategory.TEXT,type:StringProperty,multiple:true,default:'yyyy.MM.dd'},{name:TextItemBase.PROP_TEXT_FORMAT,category:PropCategory.TEXT,type:StringProperty,multiple:true,default:undefined},{name:TextItemBase.PROP_TEXT_PREFIX,category:PropCategory.TEXT,type:StringProperty,multiple:true,default:undefined},{name:TextItemBase.PROP_TEXT_SUFFIX,category:PropCategory.TEXT,type:StringProperty,multiple:true,default:undefined}];// style props
    TextItemBase.STYLE_PROPS=['fontFamily','fontSize','fontStyle','textDecoration','fontWeight','lineHeight','color','backgroundColor','textAlign','verticalAlign',/*'whiteSpace',*/'writingMode','scale','paddingLeft','paddingTop','paddingRight','paddingBottom','border','borderLeft','borderRight','borderTop','borderBottom'];/**
     * 고정된 텍스트나 데이터 필드의 값을 출력하는 아이템.
     */class TextItem extends TextItemBase{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name,text){super(name);this._contextValueCallbackDelegate=ctx=>{return this._contextValueCallbackFunc(ctx);};if(text)this.text=text;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * text
         */get text(){return this._text;}set text(value){if(value!=this._text){const old=this._text;this._text=value;this._changed(TextItem.PROP_TEXT,value,old);}}/**
         * onGetContextValue
         */get onGetContextValue(){return this._onGetContextValue;}set onGetContextValue(value){if(value!==this._onGetContextValue){if(value){this._contextValueCallbackFunc=new Function('ctx',value);this._contextValueCallback=this._contextValueCallbackDelegate;}else if(this._contextValueCallback===this._contextValueCallbackDelegate){this._contextValueCallback=null;}const old=this._onGetContextValue;this._onGetContextValue=value;this._changed(TextItem.PROP_ON_GET_CONTEXT_VALUE,value,old);}}/**
         * contextValueCallback
         */get contextValueCallback(){return this._contextValueCallback;}set contextValueCallback(value){if(value!==this._contextValueCallback){const old=this._contextValueCallback;this._contextValueCallback=value;this._changed(TextItem.PROP_ON_GET_CONTEXT_VALUE,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'text';}get outlineLabel(){const s=this.value?'['+this.value+']':this._text;return '[Text]'+(s?' '+s:'');}get designText(){return this.value||this._text;}get pathLabel(){return 'text';}isContextValue(){return !!this._contextValueCallback||super.isContextValue();}_getEditProps(){return super._getEditProps().concat(TextItem.PROPINFOS);}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.text='Text';}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,TextItem.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,TextItem.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    TextItem.PROP_MULTI_LINE="multiLine";TextItem.PROP_TEXT="text";TextItem.PROP_ON_GET_CONTEXT_VALUE='onGetContextValue';// prop infos
    TextItem.PROPINFOS=[{name:TextItem.PROP_TEXT,category:PropCategory.TEXT,type:StringProperty,multiple:false,default:undefined},{name:TextItem.PROP_ON_GET_CONTEXT_VALUE,category:PropCategory.EVENT,type:FunctionProperty,multiple:false,default:undefined,signature:'(ctx/*PrintContext*/)/*any*/'}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    TextItem.$_ctor='TextItem';TextItem.ITEM_TYPE='Text';////////////////////////////////////////////////////////////////////////////////
    /**
     * Box container 내에서 아이템들 사이에 일정 크기의 자리를 차지하는 place holder 아이템.
     * 대개는 비어 있는 상태이지만, border 스타일을 이용해 수직/수평 선을 표시하는 용도로 사용할 수 있다.
     * 페이지를 넘어갈 수 없다.
     */class SpaceItem extends ReportItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);this.size=10;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * 높이나 너비.
         * RowBoxContainer 안에서는 너비.
         * ColumnBoxContainer 안에서는 높이.
         */get size(){return this._size;}set size(value){value=this._validateSize(value);if(value!=this._size){const old=this._size;this._size=value;this._sizeDim=new Dimension(value);this._changed(SpaceItem.PROP_SIZE,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getSize(domain){return this._sizeDim.getPixel(domain);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'space';}get outlineLabel(){let s='[Space] '+this.size;return s;}_sizable(){return false;}_boundable(){return false;}_getEditProps(){return super._getEditProps().concat(SpaceItem.PROPINFOS);}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.size=10;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,SpaceItem.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,SpaceItem.PROPINFOS);}canAddTo(parent){return parent instanceof BoxContainer;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    SpaceItem.PROP_SIZE="size";// prop infos
    SpaceItem.PROPINFOS=[{name:SpaceItem.PROP_SIZE,category:PropCategory.BOUND,type:DimensionProperty,multiple:false,default:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    SpaceItem.$_ctor='SpaceItem';SpaceItem.ITEM_TYPE='Space';////////////////////////////////////////////////////////////////////////////////
    var BoxItemsAlign;(function(BoxItemsAlign){BoxItemsAlign["START"]="start";BoxItemsAlign["MIDDLE"]="middle";BoxItemsAlign["END"]="end";})(BoxItemsAlign||(BoxItemsAlign={}));class BoxContainer extends ReportGroupItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);this._overflow=false;this.itemGap=4;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         */get itemsAlign(){return this._itemsAlign;}set itemsAlign(value){if(value!==this._itemsAlign){const old=this._itemsAlign;this._itemsAlign=value;this._changed(BoxContainer.PROP_ITEMS_ALIGN,value,old);}}/**
         */get itemGap(){return this._itemGap;}set itemGap(value){if(Utils.isNotDefined(value)){value=0;}if(value!=this._itemGap){const old=this._itemGap;this._itemGap=value;this._itemGapDim=Utils.isNotDefined(value)?null:new Dimension(value);this._changed(BoxContainer.PROP_ITEM_GAP,value,old);}}/**
         * true로 설정되면 자식이 넘칠 수 있다.
         * 특히, table을 자식으로 갖는 경우 true로 설정해야 우측 끝이 표시되는 경우가 있을 수 있다.
         */get overflow(){return this._overflow;}set overflow(value){if(value!==this._overflow){this._overflow=value;this._changed(BoxContainer.PROP_OVERFLOW,value,!value);}}//-------------------------------------------------------------------------
    // child properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getItemGap(domain){return this._itemGapDim?this._itemGapDim.getPixel(domain):0;}/**
         * @internal
         * ReportPage에서 bodyItems를 통해 호출한다.
         */loadProps(src){this._loadPropsOf(src,BoxContainer.PROPINFOS);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _datable(){return true;}_getEditProps(){const props=super._getEditProps();return props.concat(BoxContainer.PROPINFOS);}_getStyleProps(){return BoxContainer.STYLE_PROPS;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,BoxContainer.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,BoxContainer.PROPINFOS);}canAlign(child){return true;}canAdoptDragSource(source){return source instanceof ImageAsset;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    BoxContainer.PROP_ITEMS_ALIGN="itemsAlign";BoxContainer.PROP_ITEM_GAP="itemGap";BoxContainer.PROP_OVERFLOW="overflow";// prop infos
    BoxContainer.PROPINFOS=[{name:BoxContainer.PROP_ITEMS_ALIGN,category:PropCategory.BOX,type:EnumProperty,multiple:false,default:undefined,domain:BoxItemsAlign},{name:BoxContainer.PROP_ITEM_GAP,category:PropCategory.BOX,type:DimensionProperty,multiple:false,default:undefined},{name:BoxContainer.PROP_OVERFLOW,category:PropCategory.BOX,type:BooleanProperty,multiple:false,default:false}];// style props
    BoxContainer.STYLE_PROPS=['fontFamily','fontSize','fontWeight','color','backgroundColor','paddingLeft','paddingTop','paddingRight','paddingBottom','border','borderLeft','borderRight','borderTop','borderBottom'];/**
     * 수평으로 자식 item들을 배치한다.
     * Html flex box를 활용한다.
     */class RowBoxContainer extends BoxContainer{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._child_top=NaN;this._child_bottom=NaN;this.designHeight=50;this.designWidth=300;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    /**
         * top
         */getTopOf(item){return item.getChildProp(ReportItem.PROP_TOP,this._child_top);}setTopOf(item,value){item.setChildProp(ReportItem.PROP_TOP,value);}/**
         * bottom
         */getBottomOf(item){return item.getChildProp(ReportItem.PROP_BOTTOM,this._child_bottom);}setBottomOf(item,value){item.setChildProp(ReportItem.PROP_BOTTOM,value);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'rbox';}get outlineLabel(){return '[Row Box]';}_getChildPropInfos(item){return item['_boundable']()?RowBoxContainer.CHILD_PROPS:null;}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.width=Math.min(hintWidth||300,300);this.height=50;}_doLoadChild(child,src){super._doLoadChild(child,src);this._loadChildPropsOf(child,src,RowBoxContainer.CHILD_PROPS);}canAlignTo(item,to){return to==='top'||to==='bottom';}canResizeChild(item,dir){if(item instanceof SpaceItem){return dir===ResizeDirection.RIGHT;}else {return ResizeDirection.isIn(dir,ResizeDirection.RIGHT,ResizeDirection.TOP,ResizeDirection.BOTTOM,ResizeDirection.TOP_RIGHT,ResizeDirection.BOTTOM_RIGHT);}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // child prop infos
    RowBoxContainer.CHILD_PROPS=[{name:ReportItem.PROP_TOP,category:PropCategory.BOUND,type:DimensionProperty,multiple:true,default:undefined,domain:undefined},{name:ReportItem.PROP_BOTTOM,category:PropCategory.BOUND,type:DimensionProperty,multiple:true,default:undefined,domain:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    RowBoxContainer.$_ctor='RowBoxContainer';RowBoxContainer.ITEM_TYPE='Row Box';/**
     * 수직으로 자식 item들을 배치한다.
     * Html flex box를 활용한다.
     */class ColumnBoxContainer extends BoxContainer{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._child_left=NaN;this._child_right=NaN;this.designWidth=100;this.designHeight=100;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    /**
         * left
         */getLeftOf(item){return item.getChildProp(ReportItem.PROP_LEFT,this._child_left);}setLeftOf(item,value){item.setChildProp(ReportItem.PROP_LEFT,value);}/**
         * right
         */getRightOf(item){return item.getChildProp(ReportItem.PROP_RIGHT,this._child_right);}setRightOf(item,value){item.setChildProp(ReportItem.PROP_RIGHT,value);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'cbox';}get outlineLabel(){return '[Column Box]';}get pathLabel(){return 'cbox';}_getChildPropInfos(item){return item['_boundable']()?ColumnBoxContainer.CHILD_PROPS:null;}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.width=Math.min(hintWidth||100,100);this.height=100;}_doLoadChild(child,src){super._doLoadChild(child,src);this._loadChildPropsOf(child,src,ColumnBoxContainer.CHILD_PROPS);}canAlignTo(item,to){return to==='left'||to==='right';}canResizeChild(item,dir){if(item instanceof SpaceItem){return dir===ResizeDirection.BOTTOM;}else {return ResizeDirection.isIn(dir,ResizeDirection.BOTTOM,ResizeDirection.LEFT,ResizeDirection.RIGHT,ResizeDirection.BOTTOM_LEFT,ResizeDirection.BOTTOM_RIGHT);}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // child prop infos
    ColumnBoxContainer.CHILD_PROPS=[{name:ReportItem.PROP_LEFT,category:PropCategory.BOUND,type:DimensionProperty,multiple:true,default:undefined,domain:undefined},{name:ReportItem.PROP_RIGHT,category:PropCategory.BOUND,type:DimensionProperty,multiple:true,default:undefined,domain:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ColumnBoxContainer.$_ctor='ColumnBoxContainer';ColumnBoxContainer.ITEM_TYPE='Column Box';/**
     * 대각선 양쪽에 item을 두 개 추가할 수 있는 box group.
     */class DiagonalBoxContainer extends ReportGroupItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._reversed=false;this._lineStyles={};// this.itemGap = 4;
    this.designWidth=60;this.designHeight=60;}//-------------------------------------------------------------------------
    // IPropertySource override
    //-------------------------------------------------------------------------
    getSubStyleProps(prop){if(prop===DiagonalBoxContainer.PROP_LINE_STYLES){const infos=[];for(let p of DiagonalBoxContainer.LINE_STYLE_PROPS){const info={...STYLE_PROPS[p]};info.parent=prop;infos.push(info);}return infos;}return super.getSubStyleProps(prop);}_getSubStyle(prop,style){if(prop===DiagonalBoxContainer.PROP_LINE_STYLES){return this._lineStyles[style];}return super._getSubStyle(prop,style);}_setSubStyle(prop,style,value){if(prop===DiagonalBoxContainer.PROP_LINE_STYLES){const old=this._lineStyles[style];this._lineStyles[style]=value;this._changed(prop,value,old);}else {super._setSubStyle(prop,style,value);}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * True면 왼쪽아래에서 오른쪽위쪽으로 대각선이 표시된다.
         */get reversed(){return this._reversed;}set reversed(value){if(value!==this._reversed){this._reversed=value;this._changed(DiagonalBoxContainer.PROP_REVERSED,value,!value);}}/** lineStyles */get lineStyles(){return this._lineStyles;}set lineStyles(value){const styles=this._lineStyles={};if(value){const props=DiagonalBoxContainer.LINE_STYLE_PROPS;for(let p of props){if(p in value){styles[p]=value[p];}}}}get firstItem(){return this._firstItem;}get secondItem(){return this._secondItem;}//-------------------------------------------------------------------------
    // child properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'dbox';}get outlineLabel(){return '[Diagonal Box]';}_getEditProps(){const props=super._getEditProps();return props.concat(DiagonalBoxContainer.PROPINFOS);}_datable(){return true;}_getStyleProps(){return DiagonalBoxContainer.STYLE_PROPS;}_maxChildCount(){return 2;}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.width=60;this.height=45;this.add(new TextItem(null,'Text1'));this.add(new TextItem(null,'Text2'));}_doLoad(loader,src){this._firstItem=this._secondItem=null;super._doLoad(loader,src);this._loadPropsOf(src,DiagonalBoxContainer.PROPINFOS);const p=src['dpos'];if(!isNaN(p)){switch(p){case 1:this._firstItem=this.get(0);this._secondItem=null;break;case 2:this._firstItem=null;this._secondItem=this.get(0);break;case 3:this._firstItem=this.get(0);this._secondItem=this.get(1);break;}}}_doSave(target){super._doSave(target);this._savePropsOf(target,DiagonalBoxContainer.PROPINFOS);let p=0;if(this._firstItem)p+=1;if(this._secondItem)p+=2;target['dpos']=p;}_doItemAdded(item,index){super._doItemAdded(item,index);if(!this._firstItem){this._firstItem=item;}else if(!this._secondItem){this._secondItem=item;}}_doItemRemoved(item,index){super._doItemRemoved(item,index);if(item===this._firstItem){this._firstItem=null;}else if(item===this._secondItem){this._secondItem=null;}}canAlign(child){return true;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    DiagonalBoxContainer.PROP_REVERSED="reversed";DiagonalBoxContainer.PROP_LINE_STYLES="lineStyles";// prop infos
    DiagonalBoxContainer.PROPINFOS=[{name:DiagonalBoxContainer.PROP_REVERSED,category:PropCategory.BOX,type:BooleanProperty,multiple:true,default:false},{name:DiagonalBoxContainer.PROP_LINE_STYLES,category:PropCategory.BASIC,type:StylesProperty,multiple:false,default:undefined}];// style props
    DiagonalBoxContainer.STYLE_PROPS=['fontFamily','fontSize','fontWeight','color','backgroundColor','paddingLeft','paddingTop','paddingRight','paddingBottom','border','borderLeft','borderRight','borderTop','borderBottom'];DiagonalBoxContainer.LINE_STYLE_PROPS=['borderTop'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    DiagonalBoxContainer.$_ctor='DiagonalBoxContainer';DiagonalBoxContainer.ITEM_TYPE='Diagonal Box';////////////////////////////////////////////////////////////////////////////////
    /**
     * Edit command 관련 에러.
     */class EditCommandError extends Error{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(message){super(message);}}class EditCommandFailed extends EditCommandError{}/**
     * Edit command base.
     * 편집 행위 외에 다른 로직이 포함되지 않도록 한다.
     */class EditCommand extends Base{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super();this._id=-1;this._time=new Date();this._name=name;}_doDispose(){}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** name */get name(){return this._name;}/** id */get id(){return this._id;}/** time */get time(){return this._time;}/** displayLabel */get displayLabel(){return this._name;}/** description */get description(){return this._name;}run(){return this.redo(false);}}/**
     * Edit command group base.
     * 하나 이상의 command를 동시에 실행하거나 undo한다.
     */class EditCommandGroup extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name,commands){super(name);assert(commands&&commands.length>0);this._commands=commands.slice();}_doDispose(){for(let cmd of this._commands){cmd.dispose();}this._commands=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get commands(){return this._commands.slice();}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    undo(){for(let i=0;i<this._commands.length;i++){this._commands[i].undo();}}redo(redoing){for(let i=this._commands.length-1;i>=0;i--){this._commands[i].redo(redoing);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._commands[0].source;}}/**
     * Edit command stack.
     * 커맨드는 반드시 이 객체를 통해서 실행되거나 undo 되어야 한다.
     */class EditCommandStack extends EventAware{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(owner){super();this._commands=[];this._current=-1;this._closed=-1;this._undoing=false;this._redoing=false;this._owner=owner;}_doDispose(){this._owner=null;this._commands=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** owner */get owner(){return this._owner;}/** length */get length(){return this._commands.length;}/** current */get current(){return this._current;}/** empty */get empty(){return this._commands.length===0;}/** canUndo */get canUndo(){return this._current>=0;}/** canRedo */get canRedo(){return this._commands.length>this._current+1;}/** undoing */get undoing(){return this._undoing;}/** redoing */get redoing(){return this._redoing;}/** dirty */get dirty(){return this._closed!==this._current;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    get(index){return this._commands[index];}undo(){if(this.canUndo){const cmd=this._commands[this._current];this._undoing=true;try{cmd.undo();}finally{this._undoing=false;}const old=this._current;this._current=this._current-1;this._changed(old,cmd);return true;}}redo(){if(this.canRedo){const curr=this._current+1;const cmd=this._commands[curr];this._redoing=true;try{cmd.redo(true);}finally{this._redoing=false;}const old=this._current;this._current=curr;this._changed(old,cmd);return true;}}execute(command){if(command){try{command.run();const old=this._current;this._current++;this._commands[this._current]=command;command['_id']=this._current;this.$_shrink(this._current+1);this._changed(old,command);return true;}catch(err){if(!(err instanceof EditCommandFailed))throw err;}}}flush(){let len=this._commands.length;if(len>0){for(;len--;){this._commands[len].dispose();}this._commands=[];const old=this._current;this._current=-1;this._changed(old,null);}}/**
         * 현 위치를 marking한다. dirty는 마지막 marking 시점과 다른 경우 true가 된다.
         */close(){this._closed=this._current;}getHistory(){let all=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this._commands.slice(0,all?undefined:this._current+1);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _changed(oldCurrent,cmd){const owner=this._owner;owner&&owner.editCommandStackChanged(this,cmd,this.canUndo,this.canRedo);if(this._current<0||oldCurrent<0){owner&&owner.editCommandStackDirtyChanged(this);}}$_shrink(index){const cmds=this._commands;if(index>=0&&index<cmds.length){for(let i=cmds.length-1;i>=index;i--){cmds[i].dispose();}cmds.splice(index,cmds.length-index);}}}////////////////////////////////////////////////////////////////////////////////
    // Messages.ts
    // 2021. 06. 11. created by woori
    // -----------------------------------------------------------------------------
    // Copyright (c) 2020-2021 Wooritech Inc.
    // All rights reserved.
    ////////////////////////////////////////////////////////////////////////////////
    /**
     */class Messages{}//-------------------------------------------------------------------------
    // errors
    //-------------------------------------------------------------------------
    // table
    Messages.E_TABLE_MOVE_MERGE_CELLS='병합된 셀의 일부를 이동할 수 없습니다.';Messages.E_TABLE_MOVE_TARGET_MERGE_CELLS='병합된 셀의 중간으로 이동할 수 없습니다.';////////////////////////////////////////////////////////////////////////////////
    /**
     * TableBase가 자동 생성한다.
     * 자식 하나만 가질 수 있다.
     */class TableCellItem extends CellGroup{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item){super(item,null);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * table
         */get table(){return this.parent;}/**
         * col
         */get col(){const c=this.item.getChildProp(TableBase.PROP_TABLE_COL);return isNaN(c)?0:c;}/**
         * row
         */get row(){const r=this.item.getChildProp(TableBase.PROP_TABLE_ROW);return isNaN(r)?0:r;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    canChangeChildProp(item,prop,value){return this.parent.canChangeChildProp(item,prop,value);}}/**
     * Table 행 모델.
     */class TableRow extends ReportItemCollectionItem{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(collection,src){super(collection,src);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._index=-1;}//-------------------------------------------------------------------------
    // IOutlineSource
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // IPropertySource
    //-------------------------------------------------------------------------
    getEditProps(){return TableRow.PROPINFOS;}getCollectionLabel(){return 'tableRow';}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** table */get table(){return this.collection.table;}/** index */get index(){return this._index;}/**
         * height
         */get height(){return this._height;}set height(value){if(typeof value==='string')value=value.trim();if(value!=this._height){const old=this._height;this._height=value;this._heightDim=new Dimension(value);this._changed(TableRow.PROP_HEIGHT,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getHeight(bounds){return this._heightDim?this._heightDim.getPixel(bounds):NaN;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get itemType(){return 'Row';}get page(){var _a;return (_a=this.collection)===null||_a===void 0?void 0:_a.table.page;}get displayPath(){if(this.collection){return this.collection.table.displayPath+'.rows['+this.index+']';}return 'row';}get collection(){return super.collection;}get marqueeParent(){var _a;return (_a=this.collection)===null||_a===void 0?void 0:_a.marqueeParent;}isAncestor(group){return group===this.collection.table;}canRemoveFrom(){return this.collection&&this.collection.count>1;}canSelectedWith(other){return other instanceof TableRow&&other.table===this.table;}_getStyleProps(){return TableRow.styleProps;}_doLoad(src){if(typeof src==='string'||typeof src=='number'){this.height=src;}else if(src){this._loadPropsOf(src,TableRow.PROPINFOS);}super._doLoad(src);}_doSave(target){this._savePropsOf(target,TableRow.PROPINFOS);super._doSave(target);return target;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //static readonly DEF_HEIGHT = '23px';
    // props
    TableRow.PROP_HEIGHT='height';TableRow.styleProps=["backgroundColor"];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    // prop infos
    TableRow.PROPINFOS=[{name:TableRow.PROP_HEIGHT,category:PropCategory.ROW,type:DimensionProperty,multiple:false,default:undefined}];/**
     * Table row object collection.
     */class TableRowCollection extends ReportItemCollection{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(table){super();this._rows=[];this._table=table;}//-------------------------------------------------------------------------
    // IOutlineSource
    //-------------------------------------------------------------------------
    get outlineParent(){return this._table;}get outlineLabel(){return '[Rows]';}get outlineExpandable(){return true;}get outlineItems(){this._rows.forEach((row,i)=>row.outlineOrder=i);return this._rows;}getSaveType(){return 'rows';}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get owner(){return this._table;}/** table */get table(){return this._table;}/** count */get count(){return this._rows.length;}set count(value){const old=this._rows.length;value=Math.max(0,Utils.toNumber(value));if(value!==old){try{if(value>old){for(let i=this._rows.length;i<value;i++){this._rows.push(new TableRow(this,null));}this._itemsAdded(this._rows.slice(old,value));}else {const rows=this._rows.slice(value,old);this._rows.length=value;this._itemsRemoved(rows);}}finally{this.$_invalidateRows();}}}get items(){return this._rows.slice(0);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    load(src,count){this._heights=null;this._rows=[];if(src&&src.length>0){for(let s of src){const row=new TableRow(this,s);this._rows.push(row);if(count>0&&this._rows.length===count){break;}}}if(count>0){while(this._rows.length<count){this._rows.push(new TableRow(this,null));}}this.$_invalidateRows();return this._rows.length;}save(target){this._rows.forEach(row=>target.push(row.save({})));}get(index){return index>=0&&index<this._rows.length?this._rows[index]:null;}/**
         * i1과 i2에 위치한 아이템과 그 사이에 포함된 아이템들을 순서대로 배열로 리턴한다.
         */getRange(i1,i2){if(i2>=i1){return this._rows.slice(i1,i2+1);}else {return this._rows.slice(i2,i1+1);}}indexOf(row){return this._rows.indexOf(row);}getHeights(){if(!this._heights){const dims=[];this._rows.forEach(row=>{dims.push(row["_heightDim"]);});this._heights=new DimensionCollection(null);this._heights["$_init"](dims);}else {this._rows.forEach((row,i)=>{this._heights.set(i,this._rows[i]['_heightDim']);});}return this._heights;}/**
         * @internal
         */add(row){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;index=index<0?this._rows.length:index;const f=this.$_add(row,index);if(f){this.$_invalidateRows();this._itemAdded(f);return f;}}/**
         * @internal
         */remove(index){if(index>=0&&index<this._rows.length){const f=this._rows.splice(index,1)[0];this.$_invalidateRows();this._itemRemoved(f,this._table);return true;}}/**
         * @internal
         */move(index,count,newRow){const rows=this._rows.splice(index,count);rows.forEach((row,i)=>this._rows.splice(newRow+i,0,row));this.$_invalidateRows();}/**
         * 아래쪽 이웃 행의 높이를 줄이거나 늘이면서 행의 높이를 변경한다.
         */adjustHeights(row,rowPoints,newSize){const oldSize=rowPoints[row+1]-rowPoints[row];const oldSize2=rowPoints[row+2]-rowPoints[row+1];const inc=newSize-oldSize;const incRate=inc/(oldSize+oldSize2);const dim=this._rows[row]['_heightDim']||new Dimension(oldSize);const dim2=this._rows[row+1]['_heightDim']||new Dimension(oldSize2);const h=dim.value;const h2=dim2.value;const heights=[];if(dim.fixed&&dim2.fixed){let v1=dim.getFixedPixel();let v2=dim2.getFixedPixel();const sum=v1+v2;v1=Math.round(v1+incRate*sum);v2=sum-v1;v1=getUnitsByPixels(dim.unit,v1);v2=getUnitsByPixels(dim2.unit,v2);heights.push(v1+dim.unit,v2+dim2.unit);}else if(dim.fixed||dim2.fixed){const domain=rowPoints[this._rows.length];let v1=dim.getPixel(domain);let v2=dim2.getPixel(domain);const sum=v1+v2;const unit=dim.fixed?dim.unit:dim2.unit;v1=Math.round(v1+incRate*sum);v2=sum-v1;v1=getUnitsByPixels(unit,v1);v2=getUnitsByPixels(unit,v2);heights.push(v1+unit,v2+unit);}else {const hSum=h+h2;const v1=+(h+incRate*hSum).toFixed(1);const v2=+(hSum-v1).toFixed(1);heights.push(v1+'%',v2+'%');}return heights;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get page(){var _a;return (_a=this._table)===null||_a===void 0?void 0:_a.page;}get displayPath(){return this._table?this._table.displayPath+'.rows':'rows';}get level(){return this._table?this._table.level+1:0;}get marqueeParent(){return this._table;}isAncestor(group){return group===this._table;}_doMoveItem(from,to){// 구현할 것!
    return false;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_add(row,index){if(!(row instanceof TableRow)){row=new TableRow(this,row);}if(row instanceof TableRow&&this._rows.indexOf(row)<0){this._rows.splice(Math.min(index,this._rows.length),0,row);return row;}}$_invalidateRows(){this._rows.forEach((row,i)=>{row['_parent']=this;row['_index']=i;});this._heights=null;this.$_rowChanged(null);}$_rowChanged(row){this._table&&this._table['$_rowChanged'](row);}}/**
     * Table cell model. {@link TableCellCollection} 구성 요소로 포함된다.
     */class TableCell extends ReportItemCollectionItem{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(collection,row,col,src){super(collection,src);this._applyEndStyles=false;//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._row=-1;this._col=-1;this._styleCallbackDelegate=(ctx,cell,row)=>{return this._styleCallbackFunc(ctx,cell,row);};this._row=row;this._col=col;}//-------------------------------------------------------------------------
    // IOutlineSource
    //-------------------------------------------------------------------------
    /** @internal */get outlineLabel(){const cell=this.table.getCell(this._row,this._col);const arr=['[',this._row,',',this._col,'] Cell'];if(cell){const rows=cell.rowspan;const cols=cell.colspan;if(rows>1){arr.push(' (',rows+' rows)');}if(cols>1){arr.push(' (',cols+' cols)');}}return arr.join('');}//-------------------------------------------------------------------------
    // IPropertySource
    //-------------------------------------------------------------------------
    getEditProps(){return TableCell.PROPINFOS;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get table(){return this.collection.table;}get row(){return this._row;}get col(){return this._col;}get height(){return this._rowspan||1;}get width(){return this._colspan||1;}get bottom(){return this._row+(isNaN(this._rowspan)?0:this._rowspan-1);}get right(){return this._col+(isNaN(this._colspan)?0:this._colspan-1);}get isSingle(){return this.width===1&&this.height===1;}/**
         * col span
         */get colspan(){return this._colspan;}set colspan(value){var _a;if(value<=1)value=undefined;if(value!==this._colspan){const old=this._colspan;this._colspan=value;this._changed(TableCell.PROP_COLSPAN,value,old);(_a=this.table)===null||_a===void 0?void 0:_a['_spanChanged'](this);}}/**
         * row span
         */get rowspan(){return this._rowspan;}set rowspan(value){var _a;if(value<=1)value=undefined;if(value!==this._rowspan){const old=this._rowspan;this._rowspan=value;this._changed(TableCell.PROP_ROWSPAN,value,old);(_a=this.table)===null||_a===void 0?void 0:_a['_spanChanged'](this);}}/**
         * true면 span 됐을 때 마지막 셀에 해당하는 tableRowStyles, tableColumnStyles를 적용한다.
         */get applyEndStyles(){return this._applyEndStyles;}set applyEndStyles(value){if(value!==this._applyEndStyles){this._applyEndStyles=value;this._changed(TableCell.PROP_APPLY_END_STYLES,value,!value);}}/** styleCallback */get styleCallback(){return this._styleCallback;}set styleCallback(value){if(value!==this._styleCallback){const old=this._styleCallback;this._styleCallback=value;this._changed(TableCell.PROP_STYLE_CALLBACK,value,old);}}/** onGetStyles */get onGetStyles(){return this._onGetStyles;}set onGetStyles(value){if(value!==this._onGetStyles){if(value){this._styleCallbackFunc=new Function('ctx, cell, row, value',value);this._styleCallback=this._styleCallbackDelegate;}else if(this._styleCallback===this._styleCallbackDelegate){this._styleCallback=null;}const old=this._onGetStyles;this._onGetStyles=value;this._changed(ReportItem.PROP_ON_GET_STYLES,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    adoptDragSource(source){return;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get itemType(){return 'cell';}get collection(){return super.collection;}get page(){var _a;return (_a=this.collection)===null||_a===void 0?void 0:_a.table.page;}get displayPath(){if(this.collection){return this.collection.table.displayPath+'.cells['+this._row+', '+this._col+']';}return 'cell';}get marqueeParent(){return this.table;}_getStyleProps(){return TableCell.styleProps;}setProps(src){super.setProps(src);if(src.hasOwnProperty('row'))this._row=src.row;if(src.hasOwnProperty('col'))this._col=src.col;}canSelectedWith(other){return other instanceof TableCell||other instanceof TableSelection;}_doLoad(src){this._loadPropsOf(src,TableCell.PROPINFOS);this._loadProps(src,'styleCallback');super._doLoad(src);}_doSave(target){target.r=this._row;target.c=this._col;this._savePropsOf(target,TableCell.PROPINFOS);delete target.col;delete target.row;if(target.colspan<=1)delete target.colspan;if(target.rowspan<=1)delete target.rowspan;this._saveProp(target,'styleCallback');super._doSave(target);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    TableCell.PROP_COL='col';TableCell.PROP_ROW='row';TableCell.PROP_COLSPAN='colspan';TableCell.PROP_ROWSPAN='rowspan';TableCell.PROP_APPLY_END_STYLES="applyEndStyles";TableCell.PROP_ON_GET_STYLES='onGetStyles';TableCell.PROP_STYLE_CALLBACK='styleCallback';//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    // prop infos
    TableCell.PROPINFOS=[{name:TableCell.PROP_ROW,category:PropCategory.CELL,type:NumberProperty,multiple:false,default:undefined,readonly:true},{name:TableCell.PROP_COL,category:PropCategory.CELL,type:NumberProperty,multiple:false,default:undefined,readonly:true},{name:TableCell.PROP_ROWSPAN,category:PropCategory.CELL,type:NumberProperty,multiple:false,default:undefined},{name:TableCell.PROP_COLSPAN,category:PropCategory.CELL,type:NumberProperty,multiple:false,default:undefined},{name:TableCell.PROP_APPLY_END_STYLES,category:PropCategory.CELL,type:BooleanProperty,multiple:false,default:false},{name:ReportItem.PROP_ON_GET_STYLES,category:PropCategory.EVENT,type:FunctionProperty,multiple:false,default:undefined,signature:'(ctx/* PrintContext*/, cell/*TableCell*/, row/*Number*/)/*any*/'}];TableCell.styleProps=['cellAlign','backgroundColor','paddingLeft','paddingRight','paddingTop','paddingBottom','borderLeft','borderRight','borderTop','borderBottom'];class TableSelection{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(cell,cols,rows){this.cols=1;this.rows=1;this.selectItem=this._cell=cell;this.cols=cols;this.rows=rows;}//-------------------------------------------------------------------------
    // tables
    //-------------------------------------------------------------------------
    get table(){return this.selectItem.table;}get cell(){return this._cell;}get col(){return this._cell.col;}get row(){return this._cell.row;}get right(){return this._cell.col+this.cols-1;}get bottom(){return this._cell.row+this.rows-1;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    canSelectedWith(other){return other instanceof TableCell||other instanceof TableSelection;}contains(row,col){return row>=this.row&&row<=this.bottom&&col>=this.col&&col<=this.right;}containsCell(cell){return cell.table===this.table&&this.contains(cell.row,cell.col);}isSingle(ignoreHiddens){const cell=this._cell;const table=cell.table;const row=cell.row;const col=cell.col;if(this.rows>1||this.cols>1){if(ignoreHiddens){let n=0;for(let r=0;r<this.rows;r++){for(let c=0;c<this.cols;c++){if(!table.isHiddenAt(row+r,col+c)){n++;if(n>1)return false;}}}return true;}else {return false;}}return true;}getCells(ignoreHiddens){const cell=this._cell;const table=cell.table;const row=cell.row;const col=cell.col;const cells=[];for(let r=0;r<this.rows;r++){for(let c=0;c<this.cols;c++){const tc=table.getCell(row+r,col+c);if(!ignoreHiddens||!table.isHiddenAt(row+r,col+c)){cells.push(tc);}}}return cells;}resizeTo(cell){if(cell){const table=this._cell.table;const oldRows=this.rows;const oldCols=this.cols;const rc=table.cells.getRectangle(this.selectItem,cell);this._cell=table.getCell(rc.y,rc.x);this.rows=rc.height;this.cols=rc.width;return oldRows!==this.rows||oldCols!==this.cols;}}resizeBy(dx,dy){const table=this.selectItem.table;let c1=this.selectItem.col;let r1=this.selectItem.row;let c2=this._cell.col;let r2=this._cell.row;if(c1===c2){c2=this.right+dx;}else {c2=c2+dx;}if(r1===r2){r2=this.bottom+dy;}else {r2=r2+dy;}// check spans
    if(dx>0){const c=c2;for(let r=Math.min(r1,r2);r<=Math.max(r1,r2);r++){const cell=table.getCell(r,c2);if(cell&&table.isHiddenCell(cell)){c2=Math.max(c,c+table.getHeadCell(cell).width-1);}}}if(dy>0){const r=r2;for(let c=Math.min(c1,c2);c<=Math.max(c1,c2);c++){const cell=table.getCell(r2,c);if(cell&&table.isHiddenCell(cell)){r2=Math.max(r,r+table.getHeadCell(cell).height-1);}}}c2=Math.max(0,Math.min(table.colCount,c2));r2=Math.max(0,Math.min(table.rowCount,r2));return this.resizeTo(table.getCell(r2,c2));}equals(cell){return this._cell===cell&&this.rows===cell.height&&this.cols===cell.width;}}/**
     * @internal
     * 테이블 셀 모델인 TabelCell들의 집합.
     */class TableCellCollection extends ReportItemCollection{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(table){super();this._cells=[];this._table=table;}//-------------------------------------------------------------------------
    // IOutlineSource
    //-------------------------------------------------------------------------
    get outlineParent(){return this._table;}get outlineLabel(){return '[Cells]';}get outlineExpandable(){return true;}get outlineItems(){return this._vcells;}getSaveType(){return 'cells';}//-------------------------------------------------------------------------
    // IPropertySource
    //-------------------------------------------------------------------------
    isCollectionProp(){return false;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get owner(){return this._table;}/** table */get table(){return this._table;}/** count */get count(){return this._vcells.length;}get items(){return this._vcells;}/** rowCount */get rowCount(){return this._cells.length;}/** colCount */get colCount(){return this._cells[0].length;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getColCount(row){return this._cells[row].length;}get(index){return index>=0&&index<this._vcells.length?this._vcells[index]:null;}getAt(row,col){if(row>=0&&row<this._cells.length){return this._cells[row][col];}}indexOf(item){return this._vcells.indexOf(item);}getRectangle(from,to){const table=this.table;const r1=Math.min(table.getTopRow(from),table.getTopRow(to));const r2=Math.max(from.bottom,to.bottom);const c1=Math.min(table.getLeftCol(from),table.getLeftCol(to));const c2=Math.max(from.right,to.right);return Rectangle.create(c1,r1,c2-c1+1,r2-r1+1);}getRectangleCells(from,to){let ignoreHiddens=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;const table=this.table;const rc=this.getRectangle(from,to);const cells=[];for(let r=rc.y;r<rc.y+rc.height;r++){for(let c=rc.x;c<rc.x+rc.width;c++){if(!ignoreHiddens||!table.isHiddenAt(r,c)){cells.push(this._cells[r][c]);}}}return cells;}/**
         * table rowCount, colCount 변경 시 table에서도 호출한다.
         * rowCount, colCount가 줄어들어도 기존 cell들은 제거하지 않는다.
         */prepareCells(){const table=this._table;const tcells=this._cells;const rowCount=table.rowCount;const colCount=table.colCount;while(tcells.length<rowCount){tcells.push([]);}for(let r=0;r<rowCount;r++){const row=tcells[r];while(row.length<colCount){row.push(this._createCell(r,row.length));}}}load(src){var _a;this.prepareCells();if(src&&src.length>0){const cells=this._cells;for(let s of src){const r=s.r;const c=s.c;const cell=(_a=cells[r])===null||_a===void 0?void 0:_a[c];cell===null||cell===void 0?void 0:cell.load(s);}}}save(target){this._cells.forEach(row=>{row.forEach(cell=>{const s=cell.save({});let has=false;for(let p in s){if(p!=='r'&&p!=='c'){has=true;break;}}has&&target.push(s);});});}resetVisibles(){const table=this._table;const cells=this._cells;const rowCount=table.rowCount;const colCount=table.colCount;const oldCells=this._vcells;const vcells=this._vcells=[];for(let r=0;r<rowCount;r++){for(let c=0;c<colCount;c++){if(!table.isHiddenAt(r,c)){vcells.push(cells[r][c]);}}}// outline에 반영되도록...
    if(oldCells&&!Utils.equalArrays(oldCells,vcells)){oldCells&&this._itemsRemoved(oldCells);this._itemsAdded(vcells);//vcells.forEach(c => console.log(c.row, c.col));
    }}/**
         * @internal
         * 모든 셀들의 속성들과 스타일값들을 저장한다.
         * restoreCells()로 복원시킬 수 있다.
         */saveCells(){const cells=this._cells;const rowCount=cells.length;const objs=[];for(let r=0;r<rowCount;r++){const list=[];for(let c=0,cnt=cells[r].length;c<cnt;c++){const cell=cells[r][c];list.push({props:cell.getProps(),styles:cell.styles});}objs.push(list);}return objs;}/**
         * @internal
         * saveCells()로 저장된 모든 셀들의 속성들과 스타일값들로 재설정한다.
         * RemoveTableRowCommand 참조.
         */restoreCells(src){const rowCount=src.length;const cells=this._cells;for(let r=0;r<rowCount;r++){for(let c=0,cnt=src[r].length;c<cnt;c++){const cell=cells[r][c];const obj=src[r][c];cell.setProps(obj.props);cell.styles=obj.styles;}}}/**
         * @internal
         * cell들은 남겨두고 row 이전 cell들의 span값들만 조정한다.
         * RemoveTableRowCommand 참조.
         */truncateRow(row){const cells=this._cells;const save=this.saveCells();for(let r=0;r<row;r++){for(let c=0,cnt=cells[r].length;c<cnt;c++){const cell=cells[r][c];const span=cell.rowspan;if(r+span>row){cell.rowspan=row-r;}}}return save;}/**
         * @internal
         * cell들은 남겨두고 col 이전 cell들의 span값들만 조정한다.
         */truncateCol(col){const cells=this._cells;const save=this.saveCells();for(let r=0;r<cells.length;r++){for(let c=0;c<col;c++){const cell=cells[r][c];const span=cell.colspan;if(c+span>col){cell.colspan=col-c;}}}return save;}removeRow(row){const cells=this._cells;const save=this.saveCells();cells.splice(row,1);// row 이후 셀의 row를 감소시킨다.
    for(let r=row;r<this._cells.length;r++){this._cells[r].forEach(cell=>{cell['_row']=cell.row-1;});}// row가 포함되는 셀의 rowspan을 감소시킨다.
    for(let r=0;r<row;r++){for(let c=0,cnt=cells[r].length;c<cnt;c++){const cell=cells[r][c];const span=cell.rowspan;if(r+span>row){cell.rowspan--;}}}return save;}removeRows(row,count){const cells=this._cells;const save=this.saveCells();cells.splice(row,count);for(let r=0;r<row;r++){for(let c=0,cnt=cells[r].length;c<cnt;c++){const cell=cells[r][c];const span=cell.rowspan;if(r+span>row+count){cell.rowspan=Math.max(1,span-count);}else if(r+span>row){cell.rowspan=Math.max(1,r-row);}}}return save;}addRow(row){const save=this.saveCells();const cells=[];const cnt=this._cells.length>0?this._cells[0].length:this.table.colCount;for(let c=0;c<cnt;c++){cells.push(this._createCell(row,c));}this._cells.splice(row,0,cells);// row 이후 셀들의 row를 증가시킨다.
    for(let r=row+1;r<this._cells.length;r++){this._cells[r].forEach(cell=>{cell['_row']=cell.row+1;});}// row가 중간에 포함되는 셀의 rowspan을 증가시킨다.
    for(let r=0;r<row;r++){this._cells[r].forEach(cell=>{if(r+cell.rowspan>row){cell.rowspan++;}});}return save;}removeCol(col){const cells=this._cells;const rowCount=cells.length;const save=this.saveCells();for(let r=0;r<rowCount;r++){cells[r].splice(col,1);}// col 이후 셀의 col을 감소시킨다.
    for(let r=0;r<rowCount;r++){for(let c=col;c<cells[r].length;c++){cells[r][c]['_col']=cells[r][c].col-1;}}// col이 포함되는 셀의 colspan을 감소시킨다.
    for(let r=0;r<rowCount;r++){for(let c=0,cnt=cells[r].length;c<cnt;c++){const cell=cells[r][c];const span=cell.colspan;if(c+span>col){cell.colspan--;}}}return save;}removeCols(col,count){return;}addCol(col){const save=this.saveCells();const cells=this._cells;const rowCount=cells.length;for(let r=0;r<rowCount;r++){cells[r].splice(col,0,this._createCell(r,col));}// col 이후 셀의 col을 감소시킨다.
    for(let r=0;r<cells.length;r++){for(let c=col+1;c<cells[r].length;c++){cells[r][c]['_col']=cells[r][c].col+1;}}// col이 중간에 포함된 셀의 colspan을 증가시킨다.
    for(let r=0;r<rowCount;r++){for(let c=0;c<col;c++){if(c+cells[r][c].colspan>col){cells[r][c].colspan++;}}}return save;}$_resetPositions(){const cells=this._cells;for(let r=0;r<cells.length;r++){const list=cells[r];for(let c=0;c<list.length;c++){list[c]['_row']=r;list[c]['_col']=c;}}}/**
         * 셀들에 설정된 스타일등을 유지하기 위해 cell 들의 위치를 변경 시킨다.
         * 병합된 셀을 분리해서 이동할 수 없다. 즉, span 상태는 변경되지 않는다.
         */moveRows(row,count,newRow){const save=this.saveCells();const cells=this._cells;const rowCount=this._table.rowCount;if(newRow!==row&&count>=1&&row>=0&&row+count<=rowCount&&newRow>=0&&newRow<rowCount){const rows=cells.splice(row,count);rows.forEach((row,i)=>cells.splice(newRow+i,0,row));this.$_resetPositions();return save;}}/**
         * 셀들에 설정된 스타일등을 유지하기 위해 cell 들의 위치를 변경 시킨다.
         * 병합된 셀을 분리해서 이동할 수 없다. 즉, span 상태는 변경되지 않는다.
         */moveCols(col,count,newCol){const save=this.saveCells();const rowCount=this._table.rowCount;const colCount=this._table.colCount;if(newCol!==col&&count>=1&&col>=0&&col+count<=colCount&&newCol>=0&&newCol<colCount){for(let r=0;r<rowCount;r++){const cells=this._cells[r];const list=cells.splice(col,count);list.forEach((cell,i)=>cells.splice(newCol+i,0,cell));}this.$_resetPositions();return save;}}/**
         * 지정한 범위와 범위에 속한 기존 병합을 모두 포함하는 병합 범위 리턴.
         */getMergeBounds(r1,c1,r2,c2){const cells=this._cells;let x1=c1;let x2=c2;for(let r=r1;r<=r2;r++){for(let i=c1-1;i>=0;i--){const span=cells[r][i].colspan;if(span>c1-i){x1=Math.min(x1,i);break;}}for(let i=c1;i<=c2;i++){const span=cells[r][i].colspan;if(i+span-1>c2){x2=Math.max(x2,i+span-1);break;}}}let y1=r1;let y2=r2;for(let c=c1;c<=c2;c++){for(let i=r1-1;i>=0;i--){const span=cells[i][c].rowspan;if(span>r1-i){y1=Math.min(y1,i);break;}}for(let i=r1;i<=r2;i++){const span=cells[i][c].rowspan;if(i+span-1>r2){y2=Math.max(y2,i+span-1);break;}}}return {r1:y1,c1:x1,r2:y2,c2:x2};}mergeBoundsOf(sel){return this.getMergeBounds(sel.row,sel.col,sel.bottom,sel.right);}merge(r1,c1,r2,c2){const cells=this._cells;const save=this.saveCells();for(let r=r1;r<=r2;r++){for(let c=c1;c<=c2;c++){cells[r][c].rowspan=cells[r][c].colspan=undefined;}}cells[r1][c1].rowspan=r2-r1+1;cells[r1][c1].colspan=c2-c1+1;return save;}mergeSelection(sel){return this.merge(sel.row,sel.col,sel.bottom,sel.right);}unmerge(cell){const save=this.saveCells();cell.rowspan=cell.colspan=undefined;return save;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get page(){var _a;return (_a=this._table)===null||_a===void 0?void 0:_a.page;}get displayPath(){return this._table?this._table.displayPath+'.cells':'cells';}get level(){return this._table?this._table.level+1:0;}get marqueeParent(){return this._table;}isAncestor(group){return group===this._table;}_doMoveItem(from,to){// 구현할 것!
    return false;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _createCell(row,col){return new TableCell(this,row,col);}}/**
     * 자식 item들을 TableCellItem에 추가해서 배치한다.
     * 페이지를 넘어갈 수 없다.
     * // TODO: columns(컬럼 단위 정보, width, style...), rows(행 단위 정보, height, style...) 추가할 것!
     */class TableBase extends CellContainer{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);this._fixed=false;//-------------------------------------------------------------------------
    // child property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._cellStyles={};this._cellMap=[];this._spans=[];this._spanDirty=true;this._itemDirty=false;this._rows=this._createRows();this._cells=this._createCells();this._resetCells();}_createCells(){return new TableCellCollection(this);}//-------------------------------------------------------------------------
    // IPropertySource override
    //-------------------------------------------------------------------------
    getSubStyleProps(prop){if(prop===TableBase.PROP_TABLE_CELL_STYLES){const infos=[];for(let p of TableBase.CELL_STYLES){const info={...STYLE_PROPS[p]};info.parent=prop;infos.push(info);}return infos;}return super.getSubStyleProps(prop);}_getSubStyle(prop,style){if(prop===TableBase.PROP_TABLE_CELL_STYLES){return this._cellStyles[style];}return super._getSubStyle(prop,style);}_setSubStyle(prop,style,value){if(prop===TableBase.PROP_TABLE_CELL_STYLES){const old=this._cellStyles[style];this._cellStyles[style]=value;this._changed(prop,value,old);}else {super._setSubStyle(prop,style,value);}}//-------------------------------------------------------------------------
    // IOutlineSource override
    //-------------------------------------------------------------------------
    get outlineItems(){return [this._rows,this._cells].concat(super.outlineItems);}/** rowCount */get rowCount(){return this._rowCount||0;}set rowCount(value){value=Math.max(1,Utils.toNumber(value));if(value!==this._rowCount){const old=this._rowCount;this._rowCount=value;this._rows.count=value;if(value<old){this._removeRows(value,old-value);}else {this._resetCells();}this._changed(TableBase.PROP_ROW_COUNT,value,old);}}/** rows */get rows(){return this._rows;}/** cells */get cells(){return this._cells;}// /**
    //  * minimum table cell width
    //  */
    //  get minCellWidth(): string {
    //     return this._minCellWidth;
    // }
    // set minCellWidth(value: string) {
    //     if (value != this._minCellWidth) {
    //         const old = this._minCellWidth;
    //         this._minCellWidth = value;
    //         this._minCellWidthDim = value ? new Dimension(value) : null;
    //         this._changed(TableBase.PROP_MIN_CELL_WIDTH, value, old);
    //     }
    // }
    /**
         * minimum table row height
         */get minRowHeight(){return this._minRowHeight;}set minRowHeight(value){if(value!=this._minRowHeight){const old=this._minRowHeight;this._minRowHeight=value;this._minRowHeightDim=value?new Dimension(value):null;this._changed(TableBase.PROP_MIN_ROW_HEIGHT,value,old);}}/** cellStyles */get cellStyles(){return this._cellStyles;}set cellStyles(value){const styles=this._cellStyles={};if(value){const props=TableBase.CELL_STYLES;for(let p of props){if(p in value){styles[p]=value[p];}}}if(styles){this._arrangePaddingStyles(styles);}}/**
         * true이면 내부 table element의 너비를 '100%'로 하지 않고,
         * colGroup 전체 너비로 설정한다.
         * 즉, 모든 컬럼들의 너비가 모두 고정인 경우, table의 너비가 부도 div 대신 컬럼 너비들의 합이 된다.
         */get fixed(){return this._fixed;}set fixed(value){if(value!==this._fixed){this._fixed=value;this._changed(TableBase.PROP_FIXED,value,!value);}}getRow(index){return this._rows.get(index);}getRowHeights(){return this._rows.getHeights();}getCell(row,col){return this._cells.getAt(row,col);}getCellItemAt(row,col){return row>=0&&row<this._cellMap.length?this._cellMap[row][col]:null;}getCellItem(cell){return this.getCellItemAt(cell.row,cell.col);}isHiddenAt(row,col){const span=this._spans[row][col];return span.r*span.c===0;}isHiddenCell(cell){const span=cell&&this._spans[cell.row][cell.col];return span&&span.r*span.c===0;}getHeadCell(cell){let r=cell.row;let c=cell.col;if(this.isHiddenAt(r,c)){while(r>0){if(!this.isHiddenAt(--r,c))break;}while(c>0){if(!this.isHiddenAt(r,--c))break;}}return this.getCell(r,c);}getLeftCol(cell){const r=cell.row;let c=cell.col;while(c>0){if(this.isHiddenAt(r,c))c--;else break;}return c;}getTopRow(cell){const c=cell.col;let r=cell.row;while(r>0){if(this.isHiddenAt(r,c))r--;else break;}return r;}getMinRowHeight(){return this._minRowHeightDim?this._minRowHeightDim.getFixedPixel():NaN;}// getMinCellWidth(): number {
    //     return this._minCellWidthDim ? this._minCellWidthDim.getFixedPixcel() : 0;
    // }
    getColItems(col){let same=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return this.filter(item=>{const c=item.col;return same?c===col:c!==col;}).map(item=>item.item);}getRowItems(row){let same=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return this.filter(item=>{const r=item.row;return same?r===row:r!==row;}).map(item=>item.item);}getRowItemsFrom(rowFrom){return this.filter(item=>{return item.row>=rowFrom;}).map(item=>item.item);}getRectItems(r1,c1,r2,c2){let exceptFirst=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;return this.filter(item=>{const r=item.row;const c=item.col;return !exceptFirst||r!==r1||c!==c1;}).map(item=>item.item);}prepareLayout(){if(this._spanDirty||this._itemDirty){this.$_resetSpans(this._cells,this._spanDirty);this._spanDirty=false;this._itemDirty=false;}return this._spans;}setFocus(focus){this._focus=focus&&{...focus};}/**
         * @internal
         * 이 함수를 통해 행을 삭제하면 undo할 수 없다.
         * 대신 {@link Report.removeItem}를 호출해야 한다.
         */removeRow(row){const map=this._cellMap;const r=typeof row==='number'?row:this._rows.indexOf(row);if(r>=0&&r<this._rowCount){this._rows.remove(r);for(let i=0;i<this.colCount;i++){const item=map[r][i];item&&this.remove(item.item);}map.splice(r,1);for(let i=r;i<map.length;i++){const rmap=map[i];if(rmap){for(let j=0;j<this.colCount;j++){const item=rmap[j];item&&item.item&&item.item['$_setChildProp']('row',item.item.row-1);}}}this._rowCount--;this._resetCells();this._changed(TableBase.PROP_ROW_COUNT,this._rowCount,this._rowCount+1);}}/**
         * @internal
         * 이 함수를 통해 행을 추가하면 undo할 수 없다.
         * 대신 {@link Report.addTableRow}를 호출해야 한다.
         */addRow(index,row){if(index>=0&&index<=this._rowCount){const obj=this._rows.add(row,index);this._rowCount++;this._addRows(index,1);this._resetCells();this._changed(TableBase.PROP_ROW_COUNT,this._rowCount,this._rowCount-1);return obj;}}/**
         * @internal
         * 옮기려는 행들에 범위를 벗어난 셀 병합이 존재하면 이동할 수 없다.
         * 옮기려는 위치에 병합된 셀의 끝이 아닌 것이 포함되면 그 자리로 이동시킬 수 없다.
         */canMoveRows(row,count,newRow){let alert=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const rowCount=this.rowCount;if(newRow!==row&&row>=0&&row+count<=rowCount&&newRow>=0&&newRow<rowCount){let r=row;const spans=this._spans;const colCount=this.colCount;// 시작 행에 hidden cell이 포함되면 불가.
    for(let c=0;c<colCount;c++){const span=spans[r][c];if(span.r===0&&span.v.row<r){if(alert)throw new AlertError(Messages.E_TABLE_MOVE_MERGE_CELLS);return false;}}// 마지막 행의 셀이 병합의 끝이 아니면 불가.
    r=row+count-1;for(let c=0;c<colCount;c++){const cell=spans[r][c].v;if(cell&&cell.row+cell.rowspan>r){if(alert)throw new AlertError(Messages.E_TABLE_MOVE_MERGE_CELLS);return false;}}if(newRow>row){// 이동 목적지의 아래쪽 셀이 행 병합셀이 포함되면 불가.
    newRow++;}if(newRow<rowCount){for(let c=0;c<colCount;c++){const span=spans[newRow][c];if(span.r===0){if(alert)throw new AlertError(Messages.E_TABLE_MOVE_TARGET_MERGE_CELLS);return false;}}}return true;}}getNearestMovableRow(row,count,delta){if(delta<0){while(row+delta>=0){if(this.canMoveRows(row,count,row+delta))return row+delta;delta--;}}else if(delta>0){while(row+count-1+delta<this.rowCount){if(this.canMoveRows(row,count,row+delta))return row+count-1+delta;delta++;}}return -1;}moveRows(row,count,newRow){let force=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(force||this.canMoveRows(row,count,newRow)){this._rows.move(row,count,newRow);this._moveRows(row,count,newRow);this.layoutChanged=true;this._changed(TableBase.PROP_CELL_LAYOUT,void 0,void 0);return true;}}/**
         * @internal
         * 옮기려는 컬럼셀들에 범위를 벗어난 셀 병합이 존재하면 이동할 수 없다.
         * 옮기려는 위치에 병합된 셀의 끝이 아닌 것이 포함되면 그 자리로 이동시킬 수 없다.
         */canMoveCols(col,count,newCol){let alert=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const colCount=this.colCount;if(newCol!==col&&col>=0&&col+count<=colCount&&newCol>=0&&newCol<colCount){let c=col;const spans=this._spans;const rowCount=this.rowCount;// 시작 컬럼에 hidden cell이 포함되면 불가.
    for(let r=0;r<rowCount;r++){const span=spans[r][c];if(span.c===0&&span.v.col<c){if(alert)throw new AlertError(Messages.E_TABLE_MOVE_MERGE_CELLS);return false;}}// 마지막 컬럼의 셀이 병합의 끝이 아니면 불가.
    c=col+count-1;for(let r=0;r<rowCount;r++){const cell=spans[r][c].v;if(cell&&cell.col+cell.colspan-1>c){if(alert)throw new AlertError(Messages.E_TABLE_MOVE_MERGE_CELLS);return false;}}if(newCol>col){// 이동 목적지의 오른쪽 셀이 컬럼 병합셀이 포함되면 불가.
    newCol++;}if(newCol<colCount){for(let r=0;r<rowCount;r++){const span=spans[r][newCol];if(span.c===0){if(alert)throw new AlertError(Messages.E_TABLE_MOVE_TARGET_MERGE_CELLS);return false;}}}return true;}}getNearestMovableColumn(col,count,delta){if(delta<0){while(col+delta>=0){if(this.canMoveCols(col,count,col+delta,false)){return col+delta;}delta--;}}else if(delta>0){while(col+count-1+delta<this.colCount){if(this.canMoveCols(col,count,col+count-1+delta,false)){return col+delta;}delta++;}}return -1;}/**
         * @internal
         * For debugging.
         */checkCounts(){const cols=this.colCount;const rows=this.rowCount;assert(this._spans.length===rows);this._spans.forEach(spans=>{assert(spans.length===cols);});}getSelection(cell){return new TableSelection(cell,cell.width,cell.height);}/**
         * 가장 상단의 item만 보존된다.
         */mergeCells(r1,c1,r2,c2){const map=this._cellMap;let t=r1;r1=Math.max(0,Math.min(r1,r2));r2=Math.min(this.rowCount-1,Math.max(t,r2));t=c1;c1=Math.max(0,Math.min(c1,c2));c2=Math.min(this.colCount-1,Math.max(t,c2));for(let r=r1;r<=r2;r++){for(let c=c1;c<=c2;c++){if(r!==r1||c!==c1){const item=map[r][c];item&&this.remove(item.item);}}}this._resetCells();}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getEditProps(){const props=super._getEditProps();return props.concat(TableBase.PROPINFOS);}_getStyleProps(){return TableBase.TABLE_STYLES;}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.minRowHeight='24px';}_doLoad(loader,src){super._doLoad(loader,src);if(src){this._loadProps(src,'rowCount','base',/*'minCellWidth',*/'minRowHeight','cellStyles');if(src.hasOwnProperty('rows')){this._rowCount=this._rows.load(src.rows,this._rowCount);}this._cells.load(src.cells);this.$_resetSpans(this._cells);}}_doSave(target){super._doSave(target);this._saveProps(target,'rowCount','base',/*'minCellWidth',*/'minRowHeight','cellStyles');this._rows.count&&this._rows.save(target.rows=[]);this._cells.save(target.cells=[]);}_doSaveItems(target,items){for(let item of items){const obj={};item.item.save(obj);target.push(obj);}}_getChildPropInfos(item){return TableBase.TABLE_CHILD_PROPS;}// child는 CellGroup.item이다.
    _doLoadChild(child,src){this._loadChildProps(child,[TableBase.PROP_TABLE_COL,TableBase.PROP_TABLE_ROW],src);}_prepareCellGroup(item){try{const col=item.getChildProp(TableBase.PROP_TABLE_COL,this._focus?this._focus.col:0);const row=item.getChildProp(TableBase.PROP_TABLE_ROW,this._focus?this._focus.row:0);const map=this._cellMap;if(col>=0&&row>=0){let cell=map[row]&&map[row][col];if(!cell){cell=this._createCell(item);if(!map[row])map[row]=[];item.setChildProp(TableBase.PROP_TABLE_COL,col);item.setChildProp(TableBase.PROP_TABLE_ROW,row);return map[row][col]=cell;}else if(cell.item!==item){throw Error("Only one item can exits in a table cell: "+(item.name||'')+"("+row+","+col+")");}}}finally{this._focus=null;}}_unprepareCellGroup(item){for(let y=0;y<this._cellMap.length;y++){const map=this._cellMap[y];if(map){for(let x=0;x<map.length;x++){if(map[x]&&map[x].item===item){const cell=map[x];map[x]=null;return cell;}}}}}_doItemAdded(item,index){this._itemDirty=true;}_doItemRemoved(item,index){this._itemDirty=true;}// 변경할 위치에 기존 cell이 없다고 전제한다.
    _doItemChanged(item,prop,value,oldValue){if(prop==='col'||prop==='row'){let cell;if(prop==='col'){cell=this._cellMap[item.row][oldValue];this._cellMap[item.row][oldValue]=null;}else {cell=this._cellMap[oldValue][item.col];this._cellMap[oldValue][item.col]=null;}this._cellMap[item.row][item.col]=cell;this.onCellChanged&&this.onCellChanged(item,prop,oldValue);}}isAncestorOf(item){return super.isAncestorOf(item)||item instanceof TableCell&&item.table===this;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _createRows(){return new TableRowCollection(this);}_spanChanged(cell){this._spanDirty=true;}_resetCells(){var _a;const oldLen=this._cellMap.length;const map=[];const rowCount=this.rowCount;const colCount=this.colCount;for(let r=0;r<rowCount;r++){const row=[];for(let c=0;c<colCount;c++){const cell=oldLen>r?(_a=this._cellMap[r])===null||_a===void 0?void 0:_a[c]:null;row.push(cell);}map.push(row);}this._cellMap=map;this._cells.prepareCells();this.$_resetSpans(this._cells);}_removeCols(index,count){let item;this._cellMap.forEach(row=>{for(let i=0;i<count;i++){item=row[i+index];item&&this.remove(item.item);}for(let i=index+count;i<row.length;i++){item=row[i];item&&item.item&&item.item['$_setChildProp']('col',item.item.col-count);}row.splice(index,count);});this.$_resetSpans(this._cells);}_addCols(col,count){this._cellMap.forEach(row=>{for(let i=0;i<count;i++){row.splice(col,0,null);}for(let i=col+count;i<row.length;i++){let item=row[i];item&&item.item&&item.item['$_setChildProp']('col',item.item.col+count);}});}_moveCols(col,count,newCol){this._cellMap.forEach(row=>{const list=row.splice(col,count);list.forEach((item,i)=>{row.splice(newCol+i,0,item);});for(let c=0;c<row.length;c++){const item=row[c];item&&item.item&&item.item['$_setChildProp']('col',c);}});this.$_resetSpans(this._cells);}_removeRows(index,count){const map=this._cellMap;let item;for(let i=0;i<count;i++){const row=map[i+index];if(row){for(let i=0;i<this.colCount;i++){item=row[i];item&&this.remove(item.item);}}}map.splice(index,count);for(let i=index;i<map.length;i++){const row=map[i+index];if(row){for(let i=0;i<this.colCount;i++){item=row[i];item&&item.item&&item.item['$_setChildProp']('row',item.item.row-count);}}}this.$_resetSpans(this._cells);}_addRows(index,count){const map=this._cellMap;for(let i=0;i<count;i++){map.splice(index,0,[]);}for(let i=index+count;i<map.length;i++){const cells=map[i];if(cells){cells.forEach(cell=>{cell&&cell.item&&cell.item['$_setChildProp']('row',cell.item.row+count);});}}}_moveRows(row,count,newRow){const map=this._cellMap;const rows=map.splice(row,count);rows.forEach((row,i)=>map.splice(newRow+i,0,row));for(let r=0;r<map.length;r++){const rmap=map[r];if(rmap){for(let c=0;c<this.colCount;c++){const item=rmap[c];item&&item.item&&item.item['$_setChildProp']('row',r);}}}this.$_resetSpans(this._cells);}canChangeChildProp(item,prop,value){if(prop==='col'||prop==='row'){const old=item.getProperty(prop);if(value!==old){const r=prop==='row'?value:item.getProperty('row');const c=prop==='col'?value:item.getProperty('col');if(r<0||r>=this._rowCount||c<0||c>=this.colCount){throw new Error('Out of bounds');}if(this.getCellItemAt(r,c)){throw new Error('Already a item exists at ('+r+', '+c+')');}}}return true;}$_rowChanged(row){this._changed(TableBase.PROP_ROWS,this._rows,this._rows);}$_resetSpans(cells){let clear=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;const rows=this._rowCount;const cols=this.colCount;let spans=this._spans;if(clear){spans=this._spans=[];for(let r=0;r<rows;r++){spans[r]=[];for(let c=0;c<cols;c++){spans[r][c]={r:1,c:1,m:null,v:null};}}}for(let r=0;r<rows;r++){spans[r]=[];for(let c=0;c<cols;c++){spans[r][c]={r:1,c:1,m:null,v:null};}}for(let r=0;r<rows;r++){for(let c=0;c<cols;c++){const span=spans[r][c];if(span.r>0&&span.c>0){const cell=cells.getAt(r,c);const item=this.getCellItemAt(r,c);if(cell){const w=Math.min(cols-c,Utils.pickNum(cell.colspan,1));const h=Math.min(rows-r,Utils.pickNum(cell.rowspan,1));if(w>1||h>1){for(let y=0;y<h;y++){for(let x=0;x<w;x++){const span2=spans[r+y][c+x];span2.m=item;if(x>0)span2.c=0;if(y>0)span2.r=0;span2.v=cell;}}}span.m=item;span.v=cell;span.r=h;span.c=w;}else {span.m=span.v=null;}}}}this._cells.resetVisibles();}_addColumn(index){this._addCols(index,1);this._resetCells();}_removeColumn(col){var _a,_b;const rowCount=this.rowCount;const colCount=this.colCount;const map=this._cellMap;for(let r=0;r<rowCount;r++){const rmap=map[r];const item=(_a=map[r][col])===null||_a===void 0?void 0:_a.item;item&&this.remove(item);if(rmap){rmap.splice(col,1);for(let i=col;i<colCount;i++){const item=(_b=rmap[i])===null||_b===void 0?void 0:_b.item;item&&item['$_setChildProp']('col',item.col-1);}}}this._resetCells();}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    TableBase.PROP_ROW_COUNT="rowCount";// static readonly PROP_MIN_CELL_WIDTH = "minCellWidth";
    TableBase.PROP_MIN_ROW_HEIGHT="minRowHeight";TableBase.PROP_ROWS="rows";TableBase.PROP_TABLE_CELL_STYLES="cellStyles";TableBase.PROP_CELL_LAYOUT='table_cell_layout';TableBase.PROP_FIXED='fixed';// child props
    TableBase.PROP_TABLE_COL="col";TableBase.PROP_TABLE_ROW="row";// prop infos
    TableBase.PROPINFOS=[{name:TableBase.PROP_ROW_COUNT,category:PropCategory.TABLE,type:NumberProperty,multiple:false,default:0},// {
    //     name: TableBase.PROP_MIN_CELL_WIDTH,
    //     category: PropCategory.TABLE,
    //     type: DimensionProperty,
    //     typeProps: {percentable: false},
    //     multiple: false,
    //     default: '10px'
    // },
    {name:TableBase.PROP_MIN_ROW_HEIGHT,category:PropCategory.TABLE,type:DimensionProperty,typeProps:{percentable:false},multiple:false,default:'15px'},{name:TableBase.PROP_TABLE_CELL_STYLES,category:PropCategory.BASIC,type:StylesProperty,multiple:false,default:undefined},{name:TableBase.PROP_FIXED,category:PropCategory.TABLE,type:BooleanProperty,multiple:true,default:undefined}];// child prop infos
    TableBase.TABLE_CHILD_PROPS=[{name:TableBase.PROP_TABLE_COL,category:PropCategory.TABLE,type:NumberProperty,multiple:false,default:undefined,domain:undefined},{name:TableBase.PROP_TABLE_ROW,category:PropCategory.TABLE,type:NumberProperty,multiple:false,default:undefined,domain:undefined}];TableBase.TABLE_STYLES=['fontFamily','fontSize','fontWeight','color','backgroundColor'//'border'
    ];TableBase.CELL_STYLES=['paddingLeft','paddingRight','paddingTop','paddingBottom','borderLeft','borderRight','borderTop','borderBottom'];class TableColumnBase extends ReportItemCollectionItem{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(collection,src){super(collection,src);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._index=-1;if(!this._widthDim){this.width='20%';}}//-------------------------------------------------------------------------
    // IOutlineSource
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // IPropertySource
    //-------------------------------------------------------------------------
    getEditProps(){return TableColumnBase.PROPINFOS;}getCollectionLabel(){return 'tableColumn';}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** index */get index(){return this._index;}/**
         * width
         */get width(){return this._width;}set width(value){if(value!=this._width){const old=this._width;this._width=value;this._widthDim=new Dimension(value);this._changed(TableColumnBase.PROP_WIDTH,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getWidth(bounds){return this._widthDim?this._widthDim.getPixel(bounds):NaN;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get itemType(){return 'Column';}get page(){var _a;return (_a=this.collection)===null||_a===void 0?void 0:_a.page;}canSelectedWith(other){return other instanceof TableColumnBase&&other.parent===this.parent;}_getStyleProps(){return TableColumnBase.styleProps;}_doLoad(src){if(typeof src==='string'||typeof src=='number'){this.width=src;}else if(src){this._loadPropsOf(src,TableColumnBase.PROPINFOS);}super._doLoad(src);}_doSave(target){this._savePropsOf(target,TableColumnBase.PROPINFOS);super._doSave(target);return target;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    TableColumnBase.PROP_WIDTH='width';// prop infos
    TableColumnBase.PROPINFOS=[{name:TableColumnBase.PROP_WIDTH,category:PropCategory.COLUMN,type:DimensionProperty,multiple:false,default:undefined}];TableColumnBase.styleProps=['cellAlign','backgroundColor'];class TableColumnCollectionBase extends ReportItemCollection{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(owner){super();this._columns=[];this._owner=owner;}//-------------------------------------------------------------------------
    // IOutlineSource
    //-------------------------------------------------------------------------
    get outlineParent(){return this._owner;}get outlineLabel(){return '[Columns]';}get outlineExpandable(){return true;}get outlineItems(){this._columns.forEach((col,i)=>col.outlineOrder=i);return this._columns;}getSaveType(){return 'columns';}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** owner */get owner(){return this._owner;}/** count */get count(){return this._columns.length;}set count(value){const old=this._columns.length;value=Math.max(0,Utils.toNumber(value));if(value!==old){try{if(value>old){for(let i=this._columns.length;i<value;i++){this._columns.push(this._createColumn(null));}this._itemsAdded(this._columns.slice(old,value));}else {this._itemsRemoved(this._columns.splice(value,old));}}finally{this.$_resetColumns();}}}get items(){return this.columns;}/** columns */get columns(){return this._columns.slice(0);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    load(src,count){this._widths=null;this._columns=[];if(src&&src.length>0){for(let s of src){const col=this._createColumn(s);this._columns.push(col);if(count>0&&this._columns.length===count){break;}}}if(count>0){while(this._columns.length<count){this._columns.push(this._createColumn(null));}}this.$_resetColumns();return this._columns.length;}save(target){this._columns.forEach(col=>target.push(col.save({})));}get(index){return index>=0&&index<this._columns.length?this._columns[index]:null;}/**
         * i1과 i2에 위치한 아이템과 그 사이에 포함된 아이템들을 순서대로 배열로 리턴한다.
         */getRange(i1,i2){if(i2>=i1){return this._columns.slice(i1,i2+1);}else {return this._columns.slice(i2,i1+1);}}indexOf(column){return this._columns.indexOf(column);}/**
         * 컬럼 너비들을 절대/상대 값으로 지정한다.
         * 지정하지 않은 컬럼 너비는 컬럼에 속한 셀들을 계산한 최대 너비로 설정된다.
         * 상대 너비는 '%'로 지정하고, 부모에서 절대 너비를 제외한 나머지 너비를 기준으로
         * 상대 너비를 모두 더한 값에 대한 비율로 설정된다.
         * 너비 합계가 부모 너비보다 클 수 있다.
         */getWidths(){if(!this._widths){const dims=[];this._columns.forEach(col=>{dims.push(col["_widthDim"]);});this._widths=new DimensionCollection(null);this._widths["$_init"](dims);}else {this._columns.forEach((col,i)=>{this._widths.set(i,col['_widthDim']);});}return this._widths;}add(column){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;index=index<0?this._columns.length:index;const f=this.$_add(column,index);if(f){this.$_resetColumns();this._itemAdded(f);return f;}}/**
         * @internal
         */remove(index){if(index>=0&&index<this._columns.length){const f=this._columns.splice(index,1)[0];this.$_resetColumns();this._itemRemoved(f,this._owner);return true;}}/**
         * @internal
         */clear(){if(this._columns.length>0){this._columns=[];this.$_resetColumns();return true;}}/**
         * @internal
         */move(index,count,newIndex){const columns=this._columns.splice(index,count);columns.forEach((column,i)=>this._columns.splice(newIndex+i,0,column));this.$_resetColumns();}/**
         * 오른쪽 이웃 컬럼의 너비를 줄이거나 늘이면서 컬럼의 너비를 변경한다.
         */adjustWidths(col,colPoints,newSize){const dim=this._columns[col]['_widthDim'];const dim2=this._columns[col+1]['_widthDim'];const w=dim.value;const w2=dim2.value;const oldSize=colPoints[col+1]-colPoints[col];const oldSize2=colPoints[col+2]-colPoints[col+1];const inc=newSize-oldSize;const incRate=inc/(oldSize+oldSize2);const widths=[];if(dim.fixed&&dim2.fixed){let v1=dim.getFixedPixel();let v2=dim2.getFixedPixel();const sum=v1+v2;v1=Math.round(v1+incRate*sum);v2=sum-v1;v1=getUnitsByPixels(dim.unit,v1);v2=getUnitsByPixels(dim2.unit,v2);widths.push(v1+dim.unit,v2+dim2.unit);}else if(dim.fixed||dim2.fixed){const domain=colPoints[this._columns.length];let v1=dim.getPixel(domain);let v2=dim2.getPixel(domain);const sum=v1+v2;const unit=dim.fixed?dim.unit:dim2.unit;v1=Math.round(v1+incRate*sum);v2=sum-v1;v1=getUnitsByPixels(unit,v1);v2=getUnitsByPixels(unit,v2);widths.push(v1+unit,v2+unit);}else {const wSum=w+w2;const v1=+(w+incRate*wSum).toFixed(1);const v2=+(wSum-v1).toFixed(1);widths.push(v1+'%',v2+'%');}return widths;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get page(){var _a;return (_a=this._owner)===null||_a===void 0?void 0:_a.page;}get displayPath(){return this._owner?this._owner.displayPath+'.columns':'columns';}get level(){return this._owner?this._owner.level+1:0;}get marqueeParent(){return this._owner;}isAncestor(group){return group===this._owner;}_doMoveItem(from,to){// 구현할 것!
    return false;}$_add(column,index){if(!(column instanceof TableColumnBase)){column=this._createColumn(column);}if(column instanceof TableColumnBase&&this._columns.indexOf(column)<0){this._columns.splice(Math.min(index,this._columns.length),0,column);return column;}}$_resetColumns(){this._columns.forEach((col,i)=>{col['_parent']=this;col['_index']=i;});this._widths=null;this.$_columnChanged(null);}$_columnChanged(column){this._owner&&this._owner['$_columnChanged'](column);}}////////////////////////////////////////////////////////////////////////////////
    const ID_SUM=0;const ID_COUNT=1;const ID_MIN=2;const ID_MAX=3;const ID_AVG=4;const IDENTS={sum:ID_SUM,count:ID_COUNT,min:ID_MIN,max:ID_MAX,avg:ID_AVG};const ID_FIELD=999;const ID_MASTER_FIELD=888;/**@internal */class DataBandSummaryRuntime extends ExpressionRuntime{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(band){super();this._fieldMap={};this._idxMap={};this._masterFieldMap={};this._masterIdxMap={};this._band=band;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    prepare(data,master){let d=this._data=data;this._fieldMap={};this._rowCount=NaN;if(d){for(let i=0;i<d.fieldCount;i++){const n=d.getField(i).fieldName;this._fieldMap[':'+n]=this._fieldMap[n]=ID_FIELD+i;this._idxMap[ID_FIELD+i]=n;}}if(master instanceof BandData){d=this._master=master;for(let i=0;i<d.fieldCount;i++){const n=d.getField(i).fieldName;this._masterFieldMap['master:'+n]=ID_MASTER_FIELD+i;this._masterIdxMap[ID_MASTER_FIELD+i]=n;}}return this;}setGroup(group){this._group=group;return this;}setRows(rows){let masterRow=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;this._rows=rows;this._masterRow=masterRow;return this;}setRowCount(count){this._rowCount=count;return this;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    isIdentifier(token){const t=token.toLocaleLowerCase();if(IDENTS.hasOwnProperty(t)){return IDENTS[t];}// 필드명은 대소문자를 유지하도록 한다.
    if(this._fieldMap.hasOwnProperty(token)){return this._fieldMap[token];}if(this._masterFieldMap.hasOwnProperty(token)){return this._masterFieldMap[token];}return super.isIdentifier(token);}evaluateIdentifier(idKey){// if (idKey >= ID_FIELD) {
    //     const rows = this.$_getRows();
    //     const r = rows ? rows[rows.length - 1] : this._rowCount - 1;
    //     return this._data.getRowValue(rows[r], this._idxMap[idKey]);
    // }
    if(idKey>=ID_FIELD){// 'sum(:salary)' 이런 식으로 사용된다.
    return this._idxMap[idKey];}if(idKey>=ID_MASTER_FIELD){return this._master.getRowValue(this._masterRow,this._masterIdxMap[idKey]);}super.evaluateIdentifier(idKey);}evaluateFunc(idKey,param){const rows=this.$_getRows();switch(idKey){case ID_SUM:return this._band.getSum(param,this._rowCount,rows);case ID_COUNT:return this._band.getCount(param,this._rowCount,rows);case ID_MIN:return this._band.getMin(param,this._rowCount,rows);case ID_MAX:return this._band.getMax(param,this._rowCount,rows);case ID_AVG:return this._band.getAvg(param,this._rowCount,rows);}return super.evaluateFunc(idKey,param);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_getRows(){let rows=this._rows;if(!rows&&this._group){rows=[];for(let r=0;r<this._group.count;r++){rows.push(r+this._group.row);}}return rows;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * DataBand row group base.
     */class DataBandRowGroup extends ReportGroupItem{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);}//-------------------------------------------------------------------------
    // IOutlineSource override
    //-------------------------------------------------------------------------
    get outlineLabel(){return '['+this.index+'] Group';}canRemoveFrom(){return true;}//-------------------------------------------------------------------------
    // IPropertySource override
    //-------------------------------------------------------------------------
    getEditProps(){return DataBandRowGroup.PROPINFOS;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** field */get field(){return this._field;}set field(value){if(value!=this._field){const old=this._field;this._field=value;this._changed(DataBandRowGroup.PROP_FIELD,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get pathLabel(){return 'group';}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,DataBandRowGroup.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,DataBandRowGroup.PROPINFOS);}getPropDomain(prop){if(prop.name=DataBandRowGroup.PROP_FIELD){return this.getDataFieldNames();}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    DataBandRowGroup.PROP_FIELD='field';// prop infos
    DataBandRowGroup.PROPINFOS=[{name:DataBandRowGroup.PROP_FIELD,category:PropCategory.BAND,type:ListableProperty,multiple:false,default:undefined}];/**
     * Data band base class.
     *
     * [제한 사항]
     * 1. detail band는 multi columns 불가. (TODO: master가 multi column이 아니면 가능하지 않을까?)
     */class DataBand extends ReportGroupItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._sectionCount=1;this._sectionLayout=BandSectionLayout.DOWN_ACROSS;this._sectionGap=10;this._repeatMastreRow=false;this._repeatDetailHeader=false;this._repeatDetailFooter=false;this._alwaysHeader=true;this.pageNo=0;this.prevHead=false;this.prevIndex=NaN;// 이어진 디테일인 경우 NaN이 아니다.
    this.rowIndex=NaN;this.detailRows=NaN;// print 시 사용, master행마다 detail에서 rowsPerMaster로 설정된다.
    this.add(this._detail=new DataBandCollection(this,'detail'));this._summaryRuntime=new DataBandSummaryRuntime(this);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get dataObj(){return this._dataObj;}get designData(){return this._designData;}/**
         * detail band.
         */get detail(){return this._detail;}/**
         * detail band인가?
         */get isDetail(){return !!this._master;}/**
         * master band.
         */get master(){return this._master;}/**
         * band level.
         * 최상위 band이면 0.
         */get bandLevel(){return this._master?this._master.bandLevel+1:0;}/**
         * section count
         */get sectionCount(){return this.isDetail?1:this._sectionCount;}set sectionCount(value){value=isNaN(value)?1:Math.max(1,value);if(value!==this._sectionCount){const old=this._sectionCount;this._sectionCount=value;this._changed(DataBand.PROP_DATA_BAND_SECTION_COUNT,value,old);}}/**
         * section layout
         */get sectionLayout(){return this._sectionLayout;}set sectionLayout(value){if(value!==this._sectionLayout){const old=this._sectionLayout;this._sectionLayout=value;this._changed(DataBand.PROP_DATA_BAND_SECTIONLAYOUT,value,old);}}/**
         * section gap
         */get sectionGap(){return this._sectionGap;}set sectionGap(value){value=Utils.toNumber(value,0);if(value!=this._sectionGap){const old=this._sectionGap;this._sectionGap=value;this._changed(DataBand.PROP_DATA_BAND_SECTION_GAP,value,old);}}/**
         * 최대 출력 행 수.
         * 0보다 큰 값으로 설정하면,
         * 디테일 밴드일 경우 해당 마스터 내에서 최대 행수이다.
         * rowsPerMaster로 표시할 디테일 행들을 설정하는 경우 이 속성을 지정할 필요가 없다(?)
         */get maxRowCount(){return this._maxRowCount;}set maxRowCount(value){if(isNaN(value))value=undefined;else value=value>>0;if(value!==this._maxRowCount){const old=this._maxRowCount;this._maxRowCount=value;this._changed(DataBand.PROP_DATA_BAND_MAX_ROW_COUNT,value,old);}}/**
         * 0보다 큰 값으로 설정하면,
         * 지정한 행 수만큼 최대 출력하고 다음 페이지로 넘어간다.
         * 또, 디테일인 경우 마스터행에 대한 디테일행들이 모두 출력되면 다음 페이지로 넘어간다.
         * 지정한 행 수만큼 한 페이지에 출력하지 못하면,
         * 다음 페이지에 나머지를 출력하고 페이지를 넘긴다.
         * 페이지 중단 없이 이어서 출력하려면 {@link maxRowsPerPage}로 설정한다.
         */get rowsPerPage(){return this._rowsPerPage;}set rowsPerPage(value){if(isNaN(value))value=undefined;else value=value>>0;if(value!==this._rowsPerPage){const old=this._rowsPerPage;this._rowsPerPage=value;this._changed(DataBand.PROP_DATA_BAND_ROWS_PER_PAGE,value,old);}}/**
         * 0보다 큰 값으로 설정하면,
         * 지정한 행 수만큼 최대 출력하고 다음 페이지로 넘어간다.
         * 또, 디테일인 경우 마스터행에 대한 디테일행들이 모두 출력되면 다음 페이지로 넘어간다.
         * 지정한 행 수만큼 한 페이지에 출력하지 못하면 중단하고
         * 다음 페이지에서 다음 행부터 다시 출력한다.
         * {@link rowsPerPage}가 0보다 큰 값으로 설정되면 이 속성은 무시된다.
         */get maxRowsPerPage(){return this._maxRowsPerPage;}set maxRowsPerPage(value){if(isNaN(value))value=undefined;else value=value>>0;if(value!==this._maxRowsPerPage){const old=this._maxRowsPerPage;this._maxRowsPerPage=value;this._changed(DataBand.PROP_DATA_BAND_MAX_ROWS_PER_PAGE,value,old);}}/**
         * 데이터행 수와 상관없이 마지막 페이지에 표시돼야 할 행수.
         * 0보다 큰 값으로 설정하면,
         * 실제 데이터행 이후 행은 빈 행으로 표시된다.
         * 마지막 페이지에 적용된다.
         * 마지막 페이지에 빈 행을 모두 출력할 수 없는 경우,
         * 다음 페이지에 나머지 빈 행을 출력하고 페이지를 넘긴다.
         * 페이지 중단 없이 남은 영역만 빈 행으로 채우려면 {@link maxEndRowCount}를 설정한다.
         *
         * 그룹 설정과 같이 적용할 수 없다. 즉, 그룹이 설정되면 이 속성은 무시된다.
         */get endRowCount(){return this._endRowCount;}set endRowCount(value){if(isNaN(value))value=undefined;else value=value>>0;if(value!==this._endRowCount){const old=this._endRowCount;this._endRowCount=value;this._changed(DataBand.PROP_DATA_BAND_END_ROW_COUNT,value,old);}}/**
         * 데이터행 수와 상관없이 마지막 페이지에 표시돼야 할 행수.
         * 0보다 큰 값으로 설정하면,
         * 실제 데이터행 이후 행은 빈 행으로 표시된다.
         * 마지막 페이지에 적용된다.
         * 마지막 페이지에 출력할 수 있는 만큼만 빈 행을 출력한다.
         * {@link endRowCount}가 0보다 큰 값으로 설정되면 이 속성은 무시된다.
         *
         * 그룹 설정과 같이 적용할 수 없다. 즉, 그룹이 설정되면 이 속성은 무시된다.
         */get maxEndRowCount(){return this._maxEndRowCount;}set maxEndRowCount(value){if(isNaN(value))value=undefined;else value=value>>0;if(value!==this._maxEndRowCount){const old=this._maxEndRowCount;this._maxEndRowCount=value;this._changed(DataBand.PROP_DATA_BAND_MAX_END_ROW_COUNT,value,old);}}/**
         * 실제 데이터행 수가 {@link endRowCount} 보다 적을 때,
         * 마자막 data 행 아래에 표시할 메시지.
         */get endRowMessage(){return this._endRowMessage;}set endRowMessage(value){if(value!==this._endRowMessage){const old=this._endRowMessage;this._endRowMessage=value;this._changed(DataBand.PROP_DATA_BAND_END_ROW_MESSAGE,value,old);}}/**
         * keyFields에 대응하는 master band data의 필드 목록.
         * 지정하지 않으면 keyFields와 동일한 필드 목록이 사용된다.
         * 디테일밴드에 지정.
         */get masterFields(){return this._masterFields;}set masterFields(value){if(value!=this._masterFields){const old=this._masterFields;this._masterFields=value;this._changed(DataBand.PROP_DATA_BAND_MASTER_FIELDS,value,old);}}/**
         * master band의 필드에 대응하는 필드 목록.
         * 이 필드들의 값이 master행의 값들과 동일한 행들이 master 행 다음에 출력된다.
         * 디테일밴드에 지정.
         */get keyFields(){return this._keyFields;}set keyFields(value){if(value!=this._keyFields){const old=this._keyFields;this._keyFields=value;this._changed(DataBand.PROP_DATA_BAND_KEY_FIELDS,value,old);}}/**
         * keyFields를 지정하지 않고, 0보다 큰 값으로 출력할 디테일 행수를 지정한다.
         * 이 밴드(master band) 행마다 출력해야할 최대 디테일 밴드 행 수.
         * keyFields가 지정되면 이 속성은 무시된다.
         * 디테일밴드에 지정.
         */get rowsPerMaster(){return this._rowsPerMaster;}set rowsPerMaster(value){if(isNaN(value))value=undefined;else value=value>>0;if(value!==this._rowsPerMaster){const old=this._rowsPerMaster;this._rowsPerMaster=value;this._changed(DataBand.PROP_DATA_BAND_ROWS_PER_MASTER,value,old);}}/**
         * 디테일이 페이지를 넘어가는 경우 매 페이지마다 마스터 행을 출력할 지 여부.
         * 마스터밴드에 지정.
         */get repeatMasterRow(){return this._repeatMastreRow;}set repeatMasterRow(value){if(value!==this._repeatMastreRow){this._repeatMastreRow=value;this._changed(DataBand.PROP_DATA_BAND_REPEAT_MASTER_ROW,value,!value);}}/**
         * 디테일이 페이지를 넘어가는 경우 이어지는 페이지들에 디테일밴드 header를 출력할 지 여부.
         * 디테일이 시작되는 페이지에는 이 속성과 관련 없이 출력된다.
         * 디테일밴드에 지정한다.
         */get repeatDetailHeader(){return this._repeatDetailHeader;}set repeatDetailHeader(value){if(value!==this._repeatDetailHeader){this._repeatDetailHeader=value;this._changed(DataBand.PROP_DATA_BAND_REPEAT_DETAIL_HEADER,value,!value);}}/**
         * 디테일이 페이지를 넘어가는 경우 디테일 완료 이전 페이지들에 디테일밴드 footer를 출력할 지 여부.
         * 디테일이 완료되는 페이지에는 이 속성과 관련 없이 출력된다.
         * 디테일밴드에 지정한다.
         */get repeatDetailFooter(){return this._repeatDetailFooter;}set repeatDetailFooter(value){if(value!==this._repeatDetailFooter){this._repeatDetailFooter=value;this._changed(DataBand.PROP_DATA_BAND_REPEAT_DETAIL_FOOTER,value,!value);}}/**
         * true면 데이터행 없이 footer만 표시되는 경우에도 header를 표시한다.
         */get alwaysHeader(){return this._alwaysHeader;}set alwaysHeader(value){if(value!==this._alwaysHeader){this._alwaysHeader=value;this._changed(DataBand.PROP_DATA_BAND_ALWAYS_HEADER,value,!value);}}/**
         * summary runtime
         */get summaryRuntime(){return this._summaryRuntime;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    prepareIndices(ctx){this._doPrepareIndices(ctx);for(let i=0;i<this._detail.count;i++){const d=this._detail.get(i);if(d instanceof DataBand){d.prepareIndices(ctx);}}}getColPoints(w){let x=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;const gap=this.sectionGap;const cols=this.sectionCount;const cw=(w-gap*(cols-1))/cols;const pts=[x];for(let i=0;i<cols-1;i++){pts.push(x+=cw);pts.push(x+=gap);}//pts.push(w) <-- 모든 컬럼의 너비를 동일하게 한다.
    pts.push(x+=cw);return pts;}getColWidth(w){const gap=this.sectionGap;const cols=this.sectionCount;const cw=(w-gap*(cols-1))/cols;return cw;}getValues(ctx,row,fields){if(fields){const data=ctx.dp.get(this.data);const vals=[];for(let i=0;i<fields.length;i++){vals.push(data.getRowValue(row,fields[i]));}return vals;}}_selectRow(data,row,idx){if(this._keyFlds){for(let i=0;i<Math.min(this._keyFlds.length,this._masterFlds.length);i++){const v1=data.getRowValue(row,this._keyFlds[i]);const v2=this.masterValues[i];if(v1!==v2){return false;}}return true;}else {return idx<this.detailRows;}}_getNextDetailRows(ctx,from){const rows=[];const data=ctx.dp.get(this.data);if(data){const count=data.rowCount;let r=from;let n=0;while(r<count){if(!this._selectRow(data,r,n))break;rows.push(r++);n++;}}return rows;}_skipDetailRows(ctx,from){if(this._keyFields){const data=ctx.dp.get(this.data);if(data){const count=data.rowCount;let r=from;while(r<count){if(!this._selectRow(data,r,0))break;r++;}return r-from;}}return 0;}getRowsPerPage(){let rowsPerPage=this._rowsPerPage;let breakRowsPerPage=false;if(rowsPerPage>0){breakRowsPerPage=true;}else if(this._maxRowsPerPage>0){rowsPerPage=this._maxRowsPerPage;}else {rowsPerPage=Number.MAX_SAFE_INTEGER;}return {rowsPerPage,breakRowsPerPage};}getEndRowCount(){let endMessage=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let endRowCount=this._endRowCount;let stopEndRow=true;if(endRowCount>0){endRowCount+=endMessage;stopEndRow=false;}else if(this._maxEndRowCount>0){endRowCount=this._maxEndRowCount+endMessage;}else {endRowCount=0;}return {endRowCount,stopEndRow};}getCount(field,count){let rows=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!isNaN(count)){return count;}else if(rows){return rows.length;}else {const summary=this.$_getSummary(field,count);return summary.count;}}getVCount(field,count){let rows=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(rows){if(count<rows.length)rows=rows.slice(0,count);return rows.length?this.$_getVCount(field,rows):0;}else {const summary=this.$_getSummary(field,count);return summary.count;}}getSum(field,count){let rows=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(rows){if(count<rows.length)rows=rows.slice(0,count);return rows.length?this.$_getSum(field,rows):0;}else {const summary=this.$_getSummary(field,count);return summary.sum;}}getMin(field,count){let rows=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(rows){if(count<rows.length)rows=rows.slice(0,count);return rows.length?this.$_getMin(field,rows):NaN;}else {const summary=this.$_getSummary(field,count);return summary.min;}}getMax(field,count){let rows=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(rows){if(count<rows.length)rows=rows.slice(0,count);return rows.length?this.$_getMax(field,rows):NaN;}else {const summary=this.$_getSummary(field,count);return summary.max;}}getAvg(field,count){let rows=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(rows){if(count<rows.length)rows=rows.slice(0,count);return rows.length?this.$_getSum(field,rows)/rows.length:NaN;}else {const summary=this.$_getSummary(field,count);return summary.avg;}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get designLevel(){return this.bandLevel;}get dataDominant(){return true;}_datable(){return true;}_getEditProps(){const props=super._getEditProps();return props.concat(DataBand.PROPINFOS);}_getStyleProps(){return ['fontFamily','fontSize','fontWeight','color','backgroundColor'].concat(super._getStyleProps());}canAddTo(group){// databand row에  추가될 수  없다.
    return super.canAddTo(group)&&!group.isDataRowContainer;}canResize(dir){return false;}canPageBreak(){return true;}_doLoad(loader,src){super._doLoad(loader,src);// TODO: 제거할 것!
    if(src.hasOwnProperty('columnCount'))this.sectionCount=src.columnCount;if(src.hasOwnProperty('columnLayout'))this.sectionLayout=src.columnLayout;if(src.hasOwnProperty('columnCount'))this.sectionGap=src.columnGap;this._loadPropsOf(src,DataBand.PROPINFOS);src.hasOwnProperty('detail')&&this._detail.load(loader,src.detail);}_doSave(target){super._doSave(target);this._savePropsOf(target,DataBand.PROPINFOS);this._detail.save(target['detail']={});}_doPreparePrint(ctx){var _a;super._doPreparePrint(ctx);this.detailRows=Number.MAX_SAFE_INTEGER;this._keyFlds=this.isDetail&&this._keyFields?this._keyFields.split(/\s*\,\s*/):null;if(this._keyFlds){for(let i=0;i<this._keyFlds.length;i++){this._keyFlds[i]=this._keyFlds[i].trim();}if(this._masterFields){this._masterFlds=this._masterFields?this._masterFields.split(/\s*\,\s*/):null;for(let i=0;i<this._masterFlds.length;i++){this._masterFlds[i]=this._masterFlds[i].trim();}// for (let i = this._masterFlds.length; i < this._keyFlds.length; i++) {
    //     this._masterFlds.push(this._keyFlds[i]);
    // }
    }else {this._masterFlds=this._keyFlds;}}this._dataObj=ctx.dp.get(this.data);this._designData=(_a=ctx.designDp)===null||_a===void 0?void 0:_a.get(this.data);this._fieldSummary={};this._summaryRuntime.prepare(this._dataObj,this._master&&this._master['_dataObj']);}clearSummary(){this._fieldSummary={};}/**
         * @Test
         */testPrepare(data){this._dataObj=data;this._fieldSummary={};}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_getSummary(field,count){let summary=this._fieldSummary[field];if(!summary){this._fieldSummary[field]=summary={};this.$_calcSummary(field,summary,count);}return summary;}$_calcSummary(field,summary,rowCount){const data=this._dataObj;const count=!isNaN(rowCount)?rowCount:data.rowCount;let n=0;let sum=0;let min=count?Number.MAX_VALUE:NaN;let max=count?Number.MIN_VALUE:NaN;for(let r=0;r<count;r++){const v=+data.getRowValue(r,field);if(!isNaN(v)){n++;sum+=v;min=Math.min(min,v);max=Math.max(max,v);}}summary.count=count;summary.vcount=n;summary.sum=sum;summary.min=min;summary.max=max;summary.avg=count?sum/count:NaN;}$_getVCount(field,rows){const data=this._dataObj;let count=0;for(let r of rows){const v=+data.getRowValue(r,field);if(!isNaN(v)){count++;}}return count;}$_getSum(field,rows){const data=this._dataObj;let sum=0;for(let r of rows){const v=+data.getRowValue(r,field);if(!isNaN(v)){sum+=v;}}return sum;}$_getMin(field,rows){const data=this._dataObj;let min=Number.MAX_VALUE;for(let r of rows){const v=+data.getRowValue(r,field);if(!isNaN(v)){min=Math.min(min,v);}}return min;}$_getMax(field,rows){const data=this._dataObj;let max=Number.MIN_VALUE;for(let r of rows){const v=+data.getRowValue(r,field);if(!isNaN(v)){max=Math.max(max,v);}}return max;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    DataBand.PROP_DATA_BAND_MASTER_FIELDS="masterFields";DataBand.PROP_DATA_BAND_KEY_FIELDS="keyFields";DataBand.PROP_DATA_BAND_ROWS_PER_MASTER="rowsPerMaster";// static readonly PROP_DATA_BAND_SECTIONS = "sections";
    DataBand.PROP_DATA_BAND_SECTION_COUNT="sectionCount";DataBand.PROP_DATA_BAND_SECTIONLAYOUT="sectionLayout";DataBand.PROP_DATA_BAND_SECTION_GAP="sectionGap";DataBand.PROP_DATA_BAND_MAX_ROW_COUNT="maxRowCount";DataBand.PROP_DATA_BAND_ROWS_PER_PAGE="rowsPerPage";DataBand.PROP_DATA_BAND_MAX_ROWS_PER_PAGE="maxRowsPerPage";DataBand.PROP_DATA_BAND_REPEAT_MASTER_ROW='repeatMasterRow';DataBand.PROP_DATA_BAND_REPEAT_DETAIL_HEADER='repeatDetailHeader';DataBand.PROP_DATA_BAND_REPEAT_DETAIL_FOOTER='repeatDetailFooter';DataBand.PROP_DATA_BAND_END_ROW_COUNT="endRowCount";DataBand.PROP_DATA_BAND_MAX_END_ROW_COUNT="maxEndRowCount";DataBand.PROP_DATA_BAND_END_ROW_MESSAGE="endRowMessage";DataBand.PROP_DATA_BAND_ALWAYS_HEADER="alwaysHeader";// prop infos
    DataBand.PROPINFOS=[{name:DataBand.PROP_DATA_BAND_MASTER_FIELDS,category:PropCategory.BAND,type:StringProperty,multiple:false,default:undefined,visible:source=>{return source.isDetail;}},{name:DataBand.PROP_DATA_BAND_KEY_FIELDS,category:PropCategory.BAND,type:StringProperty,multiple:false,default:undefined,visible:source=>{return source.isDetail;}},{name:DataBand.PROP_DATA_BAND_ROWS_PER_MASTER,category:PropCategory.BAND,type:NumberProperty,multiple:false,default:undefined,visible:source=>{return source.isDetail;}},{name:DataBand.PROP_DATA_BAND_SECTION_COUNT,category:PropCategory.BAND,type:NumberProperty,multiple:false,default:1},{name:DataBand.PROP_DATA_BAND_SECTIONLAYOUT,category:PropCategory.BAND,type:EnumProperty,multiple:false,default:BandSectionLayout.DOWN_ACROSS,domain:BandSectionLayout},{name:DataBand.PROP_DATA_BAND_SECTION_GAP,category:PropCategory.BAND,type:NumberProperty,multiple:false,default:10},{name:DataBand.PROP_DATA_BAND_MAX_ROW_COUNT,category:PropCategory.DATA,type:NumberProperty,multiple:false,default:undefined},{name:DataBand.PROP_DATA_BAND_ROWS_PER_PAGE,category:PropCategory.BAND,type:NumberProperty,multiple:false,default:undefined},{name:DataBand.PROP_DATA_BAND_MAX_ROWS_PER_PAGE,category:PropCategory.BAND,type:NumberProperty,multiple:false,default:undefined},{name:DataBand.PROP_DATA_BAND_REPEAT_MASTER_ROW,category:PropCategory.BAND,type:BooleanProperty,multiple:false,default:false,visible:source=>{return !source.isDetail;}},{name:DataBand.PROP_DATA_BAND_REPEAT_DETAIL_HEADER,category:PropCategory.BAND,type:BooleanProperty,multiple:false,default:false,visible:source=>{return source.isDetail;}},{name:DataBand.PROP_DATA_BAND_REPEAT_DETAIL_FOOTER,category:PropCategory.BAND,type:BooleanProperty,multiple:false,default:false,visible:source=>{return source.isDetail;}},{name:DataBand.PROP_DATA_BAND_END_ROW_COUNT,category:PropCategory.BAND,type:NumberProperty,multiple:false,default:undefined},{name:DataBand.PROP_DATA_BAND_MAX_END_ROW_COUNT,category:PropCategory.BAND,type:NumberProperty,multiple:false,default:undefined},{name:DataBand.PROP_DATA_BAND_END_ROW_MESSAGE,category:PropCategory.BAND,type:StringProperty,multiple:false,default:undefined},{name:DataBand.PROP_DATA_BAND_ALWAYS_HEADER,category:PropCategory.BAND,type:BooleanProperty,multiple:false,default:true}];/**
     */class DataBandCollection extends ReportGroupItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(owner,label){super('');this._owner=owner;this._label=label;this.width='100%';this.designHeight=24;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** owner */get owner(){return this._owner;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return this._label;}get outlineLabel(){return '['+Utils.capitalize(this._label)+']';}get designLevel(){return this._owner.designLevel;}get marqueeParent(){return this._owner;}canAdd(item){return item instanceof DataBand&&super.canAdd(item);}canContainsBand(){return true;}_doItemAdded(item,index){super._doItemAdded(item,index);if(item instanceof DataBand){item['_master']=this._owner;}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    //static readonly PROP_SIMPLE_BAND_COLUMN_COUNT = "columnCount";
    // prop infos
    DataBandCollection.PROPINFOS=[];////////////////////////////////////////////////////////////////////////////////
    class TableBandColumn extends TableColumnBase{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(collection,src){super(collection,src);}//-------------------------------------------------------------------------
    // IOutlineSource
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // IPropertySource
    //-------------------------------------------------------------------------
    getCollectionLabel(){return 'tableBandColumn';}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** band */get band(){return this.collection.band;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get displayPath(){if(this.collection){// TODO collection item에 대해 일반화해야 하지 않나?
    return this.collection.band.displayPath+'.columns['+this.index+']';}return 'column';}get collection(){return super.collection;}get marqueeParent(){var _a;return (_a=this.collection)===null||_a===void 0?void 0:_a.band;}isAncestor(group){return group===this.collection.band;}canRemoveFrom(){return this.collection&&this.collection.count>1;}_changed(prop,newValue,oldValue){this.collection&&this.collection['$_columnChanged'](this);}}class TableBandColumnCollection extends TableColumnCollectionBase{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(band){super(band);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** band */get band(){return this.owner;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _createColumn(src){return new TableBandColumn(this,src);}}/**
     * TableBand의 셀 모델.
     * span할 수 있다.
     * 자식 하나만 가질 수 있다.
     */class TableBandCellItem extends TableCellItem{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item){super(item);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    TableBandCellItem.$_ctor='TableBandCellItem';/**
     * TableBand의 행 영역 모델.
     * TableBandCellItem들로 구성된다.
     * field item들은 TableBand에 설정된 file item 설정에 따라 자동으로 추가한다.(?)
     */class TableBandSection extends TableBase{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(band){super(null);this._band=band;this.rowCount=TableBandSection.DEFAULT_ROWS;this.width='100%';}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** band */get band(){return this._band;}//-------------------------------------------------------------------------
    // child properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getStyleProps(){return TableBandSection.STYLE_PROPS;}needDesignWidth(){return false;}needDesignHeight(){return false;}canResize(dir){return dir===ResizeDirection.TOP||dir===ResizeDirection.BOTTOM;// return false;
    }get marqueeParent(){return this._band;}get colCount(){return this._band?this._band.colCount:0;}getColumn(col){return this._band.columns.get(col);}getCellWidths(){var _a;return (_a=this._band)===null||_a===void 0?void 0:_a.getCellWidths();}_createCell(item){return new TableBandCellItem(item);}isAncestorOf(item){if(super.isAncestorOf(item))return true;if(item===this.rows)return true;if(item instanceof TableRow&&item.collection===this.rows)return true;if(this.rows.isAncestorOf(item))return true;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    TableBandSection.PROP_LINES="lines";// style props
    TableBandSection.STYLE_PROPS=['fontFamily','fontSize','fontWeight','color','backgroundColor'];TableBandSection.DEFAULT_ROWS=1;class TableBandHeader extends TableBandSection{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(band){let pageSection=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;super(band);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._repeat=true;this._pageSection=pageSection;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** repeat */get repeat(){return this._repeat;}set repeat(value){if(value!=this._repeat){this._repeat=value;this._changed(TableBandHeader.PROP_TABLE_BAND_HEADER_REPEAT,value,!value);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return this._pageSection?'[Page Header]':'[Band Header]';}get pathLabel(){return 'header';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    TableBandHeader.PROP_TABLE_BAND_HEADER_REPEAT="repeat";//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    TableBandHeader.$_ctor='TableBandHeader';class TableBandFooter extends TableBandSection{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(band){let pageSection=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;super(band);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._attachToBody=false;this._pageSection=pageSection;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * true면 multi column 모드일 때 마지막 컬럼의 마지막 행에 붙여서 출력하고,
         * false면 모든 컬럼의 가장 아래쪽에 붙여서 출력한다.
         *
         * @default false
         */get attachToBody(){return this._attachToBody;}set attachToBody(value){if(value!==this._attachToBody){this._attachToBody=value;this._changed(TableBandFooter.PROP_ATTACH_TO_BODY,value,!value);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return this._pageSection?'[Page Footer]':'[Band Footer]';}get pathLabel(){return 'footer';}_getEditProps(){const props=super._getEditProps();return props.concat(TableBandFooter.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,TableBandFooter.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,TableBandFooter.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    TableBandFooter.PROP_ATTACH_TO_BODY="attachToBody";// prop infos
    TableBandFooter.PROPINFOS=[{name:TableBandFooter.PROP_ATTACH_TO_BODY,category:PropCategory.BAND,type:BooleanProperty,multiple:false,default:false}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    TableBandFooter.$_ctor='TableBandFooter';class TableBandRowCell extends TableCell{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._autoMerge=false;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * 자동 병합.
         * Grouping 상태가 아니고, 테이블 행 수가 1일 때만 적용.
         */get autoMerge(){return this._autoMerge;}set autoMerge(value){if(value!==this._autoMerge){this._autoMerge=value;this._changed(TableBandRowCell.PROP_AUTO_MERGE,value,!value);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getEditProps(){return super.getEditProps().concat(TableBandRowCell.PROPINFOS);}_doLoad(src){super._doLoad(src);this._loadPropsOf(src,TableBandRowCell.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,TableBandRowCell.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    TableBandRowCell.PROP_AUTO_MERGE='autoMerge';//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    TableBandRowCell.$_ctor='TableBandCellItem';// prop infos
    TableBandRowCell.PROPINFOS=[{name:TableBandRowCell.PROP_AUTO_MERGE,category:PropCategory.CELL,type:BooleanProperty,multiple:true,default:false}];class TableBandRowCellCollection extends TableCellCollection{//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getMergedCells(){return this['_vcells'].filter(cell=>cell.autoMerge);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _createCell(row,col){return new TableBandRowCell(this,row,col);}}/**
     * Data row template in table band.
     * 하나 이상의 table row로 구성할 수 있다.
     */class TableBandDataRow extends TableBandSection{constructor(){super(...arguments);this.masterRow=NaN;// print 시 사용, master행 번호. 
    }//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get blankItems(){return this._blankItems;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    canBlank(item,row){if(this.band.dataObj.equalRows(row,row-1,item[BLANK_FIELDS])){return true;}}getMergedColumns(){const cols=[];this.items.forEach(cell=>{const item=cell.item;if(item.mergedInGroup){const col=item.col;if(cols.indexOf(col)<0)cols.push(col);}});return cols.length?cols:null;}getMergedCells(){let cells=this.rowCount===1?this.cells.getMergedCells():null;if(cells&&cells.length>0){cells=cells.filter(cell=>{var _a;return !((_a=this.getCellItem(cell))===null||_a===void 0?void 0:_a.isEmpty);});}return cells;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return '[Data Row]';}get pathLabel(){return 'dataRow';}get dataDominant(){return true;}get isDataRowContainer(){return true;}_createCells(){return new TableBandRowCellCollection(this);}_getChildPropInfos(item){return TableBandDataRow.CHILD_PROPS.concat(super._getChildPropInfos(item));}_doLoadChild(child,src){super._doLoadChild(child,src);this._loadChildPropsOf(child,src,TableBandDataRow.CHILD_PROPS);}_doPreparePrint(ctx){super._doPreparePrint(ctx);this._blankItems=this.$_collectBlankItems();}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_collectBlankItems(){return this.collectBlankItems(this.items.map(cell=>cell.item));}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    // child props
    TableBandDataRow.PROP_EQUAL_BLANK='equalBlank';TableBandDataRow.PROP_BLANK_FIELDS='blankFields';TableBandDataRow.PROP_MERGED_IN_GROUP='mergedInGroup';// child prop infos
    TableBandDataRow.CHILD_PROPS=[{name:TableBandDataRow.PROP_EQUAL_BLANK,category:PropCategory.BAND,type:BooleanProperty,multiple:false,default:false},{name:TableBandDataRow.PROP_BLANK_FIELDS,category:PropCategory.BAND,type:StringProperty,multiple:false,default:undefined},{name:TableBandDataRow.PROP_MERGED_IN_GROUP,category:PropCategory.BAND,type:BooleanProperty,multiple:false,default:false}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    TableBandDataRow.$_ctor='TableBandRow';class TableBandRowGroupSection extends TableBase{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(group,name){super(name);this._group=group;this.rowCount=TableBandRowGroupSection.DEFAULT_ROWS;this.width='100%';}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** group */get group(){return this._group;}/** band */get band(){var _a;return (_a=this._group)===null||_a===void 0?void 0:_a.band;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getStyleProps(){return TableBandSection.STYLE_PROPS;}needDesignHeight(){return false;}needDesignWidth(){return false;}canResize(dir){return dir===ResizeDirection.TOP||dir===ResizeDirection.BOTTOM;// return false;
    }get marqueeParent(){return this.band;}get colCount(){return this.band?this.band.colCount:0;}getColumn(col){return this.band.columns.get(col);}getCellWidths(){var _a;return (_a=this.band)===null||_a===void 0?void 0:_a.getCellWidths();}_createCell(item){return new TableBandCellItem(item);}isAncestorOf(item){if(super.isAncestorOf(item))return true;if(item===this.rows)return true;if(this.rows.isAncestorOf(item))return true;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    // style props
    TableBandRowGroupSection.STYLE_PROPS=['fontFamily','fontSize','fontWeight','color','backgroundColor'];TableBandRowGroupSection.DEFAULT_ROWS=1;class TableBandRowGroupHeader extends TableBandRowGroupSection{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(group){super(group,'groupHeader');}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return '[Group Header]';}get pathLabel(){return 'header';}}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    TableBandRowGroupHeader.$_ctor='TableBandRowGroupHeader';class TableBandRowGroupFooter extends TableBandRowGroupSection{//-------------------------------------------------------------------------
    // constructors           
    //-------------------------------------------------------------------------
    constructor(group){super(group,'groupFooter');//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._merged=true;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * True면 병합 컬럼에 포함되는 셀은 병합 데이터셀에 포함시킨다.
         */get merged(){return this._merged;}set merged(value){if(value!=this._merged){this._merged=value;this._changed(TableBandRowGroupFooter.PROP_MERGED,value,!value);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return '[Group Footer]';}get pathLabel(){return 'footer';}getEditProps(){const props=super.getEditProps();return props.concat(TableBandRowGroupFooter.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,TableBandRowGroupFooter.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,TableBandRowGroupFooter.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    TableBandRowGroupFooter.PROP_MERGED="merged";// prop infos
    TableBandRowGroupFooter.PROPINFOS=[// TODO: v2.0
    // {
    //     name: TableBandRowGroupFooter.PROP_MERGED,
    //     category: PropCategory.BAND,
    //     type: BooleanProperty,
    //     multiple: true,
    //     default: true
    // }
    ];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    TableBandRowGroupFooter.$_ctor='TableBandRowGroupFooter';class TableBandRowGroup extends DataBandRowGroup{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(collection){super('tableBandRowGroup');//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._merged=true;this.add(this._header=new TableBandRowGroupHeader(this));this.add(this._footer=new TableBandRowGroupFooter(this));// NOTE: this.add(...) 전에 설정하면 this.page가 존재해서 
    //       이 item이 리포트에 추가되기 전에 
    //       리포트로 하위 아이템 추가 이벤트가 먼저 발생해서 문제가 된다.
    this._collection=collection;}//-------------------------------------------------------------------------
    // IOutlineSource override
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // IPropertySource override
    //-------------------------------------------------------------------------
    get outlineParent(){return this._collection;}get marqueeParent(){return this.band;}getEditProps(){const props=super.getEditProps();return props.concat(TableBandRowGroup.PROPINFOS);}getCollectionLabel(){return 'tableBandGroup';}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** header */get header(){return this._header;}/** footer */get footer(){return this._footer;}/** band */get band(){var _a;return (_a=this._collection)===null||_a===void 0?void 0:_a.band;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get page(){var _a;return (_a=this.band)===null||_a===void 0?void 0:_a.page;}get report(){var _a;return (_a=this.band)===null||_a===void 0?void 0:_a.report;}get collection(){return this._collection;}get dataParent(){return this.band;}get outlineLabel(){return '[Group]';}get displayPath(){if(this.collection){return this.collection.band.displayPath+'.groups['+this.index+']';}return 'group';}_ignoreItems(){return true;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,TableBandRowGroup.PROPINFOS);src.hasOwnProperty("header")&&this._header.load(loader,src.header);src.hasOwnProperty("footer")&&this._footer.load(loader,src.footer);}_doSave(target){super._doSave(target);this._savePropsOf(target,TableBandRowGroup.PROPINFOS);this._header.save(target['header']={});this._footer.save(target['footer']={});}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _changed(prop,newValue,oldValue){super._changed(prop,newValue,oldValue);this._collection&&this._collection['$_groupChanged'](this);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    // prop infos
    TableBandRowGroup.PROPINFOS=[];class TableBandRowGroupCollection extends ReportItemCollection{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(band){super();this._groups=[];this._band=band;}//-------------------------------------------------------------------------
    // IOutlineSource
    //-------------------------------------------------------------------------
    get outlineParent(){return this._band;}get outlineLabel(){return '[Groups]';}get outlineExpandable(){return true;}get outlineItems(){return this._groups;}getSaveType(){return 'groups';}//-------------------------------------------------------------------------
    // IPropertySource
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get owner(){return this._band;}/** band */get band(){return this._band;}/** count */get count(){return this._groups.length;}get items(){return this._groups.slice();}get visibleCount(){let n=0;for(let g of this._groups){g.visible&&n++;}return n;}/** groups */get groups(){return this._groups.slice();}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    load(loader,src){this._groups=[];if(src&&src.length>0){for(let s of src){if(s){const group=new TableBandRowGroup(this);group.load(loader,s);this._groups.push(group);}}this.$_invalidateGroups();}}save(target){for(let g of this._groups){const obj={};g.save(obj);target.push(obj);}}get(index){return this._groups[index];}indexOf(group){return this._groups.indexOf(group);}add(group){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;const g=this.$_add(group,index);if(g){this.$_invalidateGroups();this._itemAdded(g);return g;}}addAll(groups){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;if(!groups||groups.length<1)return;const len=this._groups.length;index=index<0?this._groups.length:Math.max(0,this._groups.length);for(let g of groups){if(this.$_add(g,index)){index++;}}if(this._groups.length!=len){this.$_invalidateGroups();return true;}}removeAt(index){if(index>=0&&index<this._groups.length){const g=this._groups.splice(index,1)[0];this.$_invalidateGroups();this._itemRemoved(g,this._band);return true;}}remove(group){return this.removeAt(this.indexOf(group));}clear(){if(this._groups.length>0){this._groups=[];this.$_invalidateGroups();return true;}}getValidGroups(data){if(data){const groups=[];for(let g of this._groups){const f=g.field;if(Utils.isNumber(f)){f>=0&&f<data.fieldCount&&groups.push(g);}else if(data.containsField(f)){groups.push(g);}}return groups.length?groups:null;}return null;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get page(){var _a;return (_a=this._band)===null||_a===void 0?void 0:_a.page;}get displayPath(){return this._band?this._band.displayPath+'.groups':'groups';}get level(){return this._band?this._band.level+1:0;}isAncestorOf(item){if(super.isAncestorOf(item))return true;if(this._groups.indexOf(item)>=0)return true;for(let g of this._groups){if(g.indexOf(item))return true;}}_doMoveItem(from,to){// 구현할 것!
    return false;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_add(group){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;if(!(group instanceof TableBandRowGroup)){const src=group;group=new TableBandRowGroup(this);src&&group.extend(src);group.header.cells.prepareCells();group.footer.cells.prepareCells();}if(group instanceof TableBandRowGroup&&this._groups.indexOf(group)<0){if(index<0){this._groups.push(group);}else {this._groups.splice(Math.min(index,this._groups.length),0,group);}return group;}}$_invalidateGroups(){for(let i=this._groups.length-1;i>=0;i--){this._groups[i]['_index']=i;}this._band&&this._band['$_groupChanged'](null);}$_groupChanged(field){this._band&&this._band['$_groupChanged'](field);}}/**
     * 페이지를 넘어갈 수 있다.
     * 한 row는 페이지를 넘어갈 수 없다.
     * header/footer와 row의 컬럼 너비를 반드시 맞춰야 하거나 컬럼 line을 표시해야 할 경우 사용.
     * header/footer/pageFooter 각 컬럼의 너비는 row의 컬럼 너비를 자동으로 따라간다.
     * design-time에는 section마다 별도의 table로 표시되지만 printing 시에는 하나의 table element로 구현한다.
     */class TableBand extends DataBand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);this._columns=new TableBandColumnCollection(this);this._groups=new TableBandRowGroupCollection(this);this.add(this._header=new TableBandHeader(this));this.add(this._footer=new TableBandFooter(this));this.add(this._dataRow=new TableBandDataRow(this));this._tables=[this._header,this._footer,this._dataRow];this._setOutlineOrders(1,this._dataRow,this._footer,this.detail);this.width='100%';}//-------------------------------------------------------------------------
    // IOutlineSource override
    //-------------------------------------------------------------------------
    get outlineItems(){return [this._columns,this._groups].concat(super.outlineItems);//return [this.sections, this._columns, this._groups].concat(super.outlineItems as any);
    }//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** cols */get colCount(){return this._colCount||0;}set colCount(value){value=Math.max(1,value);if(value!==this._colCount){const old=this._colCount;const dx=old-value;this._colCount=value;this._columns.count=value;if(value<old){this._tables.forEach(table=>{table['_removeCols'](value,dx);});}else {this._tables.forEach(table=>{table['_resetCells']();//table['_addCols'](old, dx);
    });}this._changed(TableBand.PROP_COL_COUNT,value,old);}}/** columns */get columns(){return this._columns;}/** groups */get groups(){return this._groups;}/** header */get header(){return this._header;}/** footer */get footer(){return this._footer;}/** dataRow */get dataRow(){return this._dataRow;}/**
         * Current printing data row index.
         */get pr(){return this._pr;}/**
         * Current printing table row index.
         */get tr(){return this._tr;}/**
         * Last printing tr count.
         */get lastTrs(){return this._lastTrs;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getColumn(index){return this._columns.get(index);}getGroup(index){return this._groups.get(index);}/**
         * @internal
         */getTables(){const groups=this._groups;const tables=[this._header,this._dataRow,this._footer];for(let i=0;i<groups.count;i++){const g=groups.get(i);tables.push(g.header,g.footer);}return tables;}removeColumn(col){const c=typeof col==='number'?col:this._columns.indexOf(col);if(c>=0&&c<this._colCount){this._columns.remove(c);this._colCount--;this.getTables().forEach(table=>{table['_removeColumn'](c);});this._changed(TableBand.PROP_COL_COUNT,this._colCount,this._colCount+1);}return;}addColumn(index,column){if(index>=0&&index<=this._colCount){const obj=this._columns.add(column,index);this._colCount++;this.getTables().forEach(table=>{table['_addColumn'](index);});this._changed(TableBand.PROP_COL_COUNT,this._colCount,this._colCount-1);return obj;}}canMoveColumns(col,count,newCol){let alert=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;return !this.getTables().some(table=>{return !table.canMoveCols(col,count,newCol,alert);});}getNearestMovableColumn(col,count,delta){let c=col+delta;this.getTables().forEach(table=>{const c2=table.getNearestMovableColumn(col,count,delta);c=delta>0?Math.max(c,c2):Math.min(c,c2);});return c;}moveColumns(col,count,delta){let force=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(force||this.canMoveColumns(col,count,delta)){this._columns.move(col,count,delta);this.getTables().forEach(table=>{table['_moveCols'](col,count,delta);});this.layoutChanged=true;this._changed(TableBase.PROP_CELL_LAYOUT,void 0,void 0);this._columns['_indexChanged']();return true;}}getCellWidths(){return this._columns.getWidths();}setPrinting(ctx,pr){let trows=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;ctx.row=this._pr=pr;this._tr+=trows;this._lastTrs=trows;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'tableband';}get outlineLabel(){return '[Table Band]';}get isBand(){return true;}_ignoreItems(){return true;}_getEditProps(){const props=super._getEditProps();return props.concat(TableBand.PROPINFOS);}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);if(isNaN(this._colCount)){this.colCount=TableBand.DEFAULT_COL_COUNT;}}isAncestorOf(item){if(super.isAncestorOf(item))return true;if(item instanceof TableBandColumn&&item.band===this)return true;if(item===this._groups)return true;if(this._groups.isAncestorOf(item))return true;}_doLoad(loader,src){super._doLoad(loader,src);if(src){// NOTE: col count를 먼저 설정한 후 section들을 로드해야 한다!
    this._loadProps(src,'colCount');// TODO: 제거할 것!
    if(src.hasOwnProperty('fields')){this._colCount=this._columns.load(src.fields,this._colCount);}if(src.hasOwnProperty('columns')){this._colCount=this._columns.load(src.columns,this._colCount);}src.hasOwnProperty('groups')&&this._groups.load(loader,src.groups);src.hasOwnProperty("header")&&this._header.load(loader,src.header);src.hasOwnProperty("footer")&&this._footer.load(loader,src.footer);// TODO: 제거할 것!
    src.hasOwnProperty("row")&&this._dataRow.load(loader,src.row);src.hasOwnProperty("dataRow")&&this._dataRow.load(loader,src.dataRow);}}_doSave(target){super._doSave(target);this._saveProps(target,'colCount');this._columns.count&&this._columns.save(target['columns']=[]);this._groups.count&&this._groups.save(target['groups']=[]);this._header.save(target['header']={});this._footer.save(target['footer']={});//this._pageFooter.save(target['pageFooter'] = {});
    this._dataRow.save(target['dataRow']={});}$_columnChanged(column){this._changed(TableBand.PROP_COLUMNS,this._columns,this._columns);}$_groupChanged(group){this._changed(TableBand.PROP_GROUPS,this._groups,this._groups);}_doPreparePrint(ctx){super._doPreparePrint(ctx);this._groups.preparePrint(ctx);}_doPrepareIndices(ctx){ctx.row=ctx.index=this._pr=this._tr=0;this._lastTrs=0;}remove(item){}getNextDetailRows(ctx){return this._getNextDetailRows(ctx,this._pr);}skipDetailRows(ctx){const n=this._skipDetailRows(ctx,this._pr);this._pr+=n;}containsInSection(item){return this._header.contains(item,true)||this._footer.contains(item,true);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    TableBand.PROP_COL_COUNT="colCount";TableBand.PROP_COLUMNS="columns";TableBand.PROP_GROUPS="groups";// prop infos
    TableBand.PROPINFOS=[{name:TableBand.PROP_COL_COUNT,category:PropCategory.TABLE,type:NumberProperty,multiple:false,default:0}];// defaults for designer
    TableBand.DEFAULT_COL_COUNT=5;//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    TableBand.$_ctor='TableBand';TableBand.ITEM_TYPE='Table Band';////////////////////////////////////////////////////////////////////////////////
    /**
     * TableBand.cols 변경.
     * 컬럼 수가 줄 때는 사라지는 컬럼에 포함된 아이템들은 제거한다.
     * TableCell 들은 제거되지 않고 유지돼서 undo 시 복구된다. (span 이 유지된다.)
     */class ChangeTableBandColCountCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(band,newCols){super('Change tableband cols');assert(!!band);this._band=band;this._oldCols=band.colCount;this._cols=newCols;if(newCols<this._oldCols){const deleted=this._deleted=[[],[],[]];band.getTables().forEach(table=>{let items=[];for(let i=newCols;i<this._oldCols;i++){items=items.concat(table.getColItems(i));}deleted.push(items);});// 보관 cells
    const cells=this._cells=[];band.getTables().forEach(table=>{cells.push(table.cells.truncateCol(newCols));});}}_doDispose(){this._band=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** band */get band(){return this._band;}/** cols */get cols(){return this._cols;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){// 아래 설정 중에 item들이 삭제된다.
    this._band.colCount=this._cols;}undo(){const band=this._band;const deleted=this._deleted;const cells=this._cells;band.colCount=this._oldCols;if(deleted){// restore items
    band.getTables().forEach((table,i)=>{deleted[i].forEach(item=>{table.add(item);});});// restore cells
    band.getTables().forEach((table,i)=>{table.cells.restoreCells(cells[i]);});}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._band;}}/**
     * TableBand에 column을 추가한다.
     */class AddTableBandColumnCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(band,index,config){super('Add Band Field');assert(!!band);this._band=band;this._index=index;this._config=config;}_doDispose(){this._band=this._column=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** band */get band(){return this._band;}/** index */get index(){return this._index;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){const band=this._band;const c=this._index;const cells=this._cells=[];band.getTables().forEach(table=>{cells.push(table.cells.addCol(c));});this._column=band.addColumn(c,this._config);}undo(){const band=this._band;const c=this._index;band.getTables().forEach(table=>{table.cells.removeCol(c);});band.removeColumn(this._column);band.getTables().forEach((table,i)=>{table.cells.restoreCells(this._cells[i]);});}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    get source(){return this._column;}}/**
     * Table band column을 제거한다.
     * 제거된 셀은 table.removedCells로 보관되고 사용된다.
     */class RemoveTableBandColumnCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(column){super('Remove TableBandColumn');this._deleted=[];assert(!!column);const band=this._band=column.band;assert(!!band);this._column=column;const index=this._index=band.columns.indexOf(column);// 삭제될 items
    band.getTables().forEach(table=>{this._deleted.push(table.getColItems(index));});}_doDispose(){this._band=this._column=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** band */get band(){return this._band;}/** column */get column(){return this._column;}/** index */get index(){return this._index;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._cells=[];this._band.getTables().forEach(table=>{this._cells.push(table.cells.removeCol(this._index));});this._band.removeColumn(this._column);}undo(){const band=this._band;const c=this._index;band.getTables().forEach((table,i)=>{table.cells.addCol(c);});band.addColumn(c,this._column);band.getTables().forEach((table,i)=>{this._deleted[i].forEach(item=>{table.add(item);});table.cells.restoreCells(this._cells[i]);});}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._column;}}/**
     * TableBand column들을 좌우로 이동한다.
     * 병합된 셀의 일부를 이동시킬수 없다.
     */class MoveTableBandColumnsCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(band,index,count,newIndex,force){super('Move TableBand Columns');this._band=band;assert(!!band);this._column=band.getColumn(this._index=index);this._count=count;this._newIndex=newIndex;this._force=force;}_doDispose(){this._band=this._column=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** band */get band(){return this._band;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._cells=[];this._band.getTables().forEach(table=>{this._cells.push(table.cells.moveCols(this._index,this._count,this._newIndex));if(!this._cells)throw new Error('TableCellCollection.moveCols failed: '+this._index+', '+this._count+', '+this._newIndex);});this._band.moveColumns(this._index,this._count,this._newIndex,this._force);}undo(){// this._band.getTables().forEach(table => {
    //     table.cells.moveCols(this._index + this._delta, this._count, -this._delta);
    // })
    this._band.getTables().forEach((table,i)=>{table.cells.restoreCells(this._cells[i]);});this._band.moveColumns(this._newIndex,this._count,this._index,true);// this._band.getTables().forEach((table, i) => {
    //     table.cells.restoreCells(this._cells[i])
    // })
    }//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._column;}}////////////////////////////////////////////////////////////////////////////////
    class TableColumn extends TableColumnBase{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    // prop infos
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(collection,src){super(collection,src);}//-------------------------------------------------------------------------
    // IOutlineSource
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // IPropertySource
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** table */get table(){return this.collection.table;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get displayPath(){if(this.collection){// TODO collection item에 대해 일반화해야 하지 않나?
    return this.collection.table.displayPath+'.columns['+this.index+']';}return 'column';}get collection(){return super.collection;}get marqueeParent(){var _a;return (_a=this.collection)===null||_a===void 0?void 0:_a.table;}isAncestor(group){return group===this.collection.table;}canRemoveFrom(){return this.collection&&this.collection.count>1;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _changed(prop,newValue,oldValue){this.collection&&this.collection['$_columnChanged'](this);}}class TableColumnCollection extends TableColumnCollectionBase{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(table){super(table);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** table */get table(){return this.owner;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _createColumn(src){return new TableColumn(this,src);}}/**
     * TableContainer가 자동 생성한다.
     * 자식 하나만 가질 수 있다.
     */class TableContainerCellItem extends TableCellItem{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item){super(item);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get pathLabel(){return 'cell['+this.row+','+this.col+']';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    TableContainerCellItem.$_ctor='TableCellItem';/**
     * 자식 item들을 TableCellItem에 추가해서 배치한다.
     * 페이지를 넘어갈 수 없다.
     */class TableContainer extends TableBase{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);this._columns=new TableColumnCollection(this);}//-------------------------------------------------------------------------
    // ITable
    //-------------------------------------------------------------------------
    changeColumnWidth(col,delta){}getColumnWidth(col){return this._columns.get(col).width;}//-------------------------------------------------------------------------
    // IOutlineSource override
    //-------------------------------------------------------------------------
    get outlineItems(){return [this._columns].concat(super.outlineItems);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * 기준 table의 name.
         * 기준 table의 cell 너비 설정을 따라간다.
         */get baseTable(){return this._baseTable;}set baseTable(value){if(value!=this._baseTable){const old=this._baseTable;this._baseTable=value;this._changed(TableContainer.PROP_BASE_TABLE,value,old);}}/** cols */get colCount(){return this._colCount||0;}set colCount(value){value=Math.max(1,value);if(value!==this._colCount){const old=this._colCount;this._colCount=value;this._columns.count=value;if(value<old){this._removeCols(value,old-value);}else {this._resetCells();}this._changed(TableContainer.PROP_COL_COUNT,value,old);}}/** columns */get columns(){return this._columns;}//-------------------------------------------------------------------------
    // child properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getColumn(index){return this._columns.get(index);}removeColumn(col){const c=typeof col==='number'?col:this._columns.indexOf(col);if(c>=0&&c<this._colCount){this._columns.remove(c);this._colCount--;this._removeColumn(c);this._changed(TableContainer.PROP_COL_COUNT,this._colCount,this._colCount+1);}}addColumn(index,column){if(index>=0&&index<=this._colCount){const obj=this._columns.add(column,index);this._colCount++;this._addColumn(index);this._changed(TableContainer.PROP_COL_COUNT,this._colCount,this._colCount-1);return obj;}}canMoveColumns(col,count,newCol){let alert=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;return this.canMoveCols(col,count,newCol,alert);}moveColumns(col,count,newCol){let force=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(force||this.canMoveCols(col,count,newCol)){this._columns.move(col,count,newCol);this._moveCols(col,count,newCol);this.layoutChanged=true;this._changed(TableBase.PROP_CELL_LAYOUT,void 0,void 0);this._columns['_indexChanged']();return true;}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'table';}get outlineLabel(){return '[Table] ('+this.rowCount+' x '+this.colCount+')';}get pathLabel(){return 'table';}needDesignWidth(){return false;}needDesignHeight(){return false;}_datable(){return true;}_getEditProps(){const props=super._getEditProps();return props.concat(TableContainer.PROPINFOS);}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);if(isNaN(this._colCount)){this.colCount=TableContainer.DEFAULT_COL_COUNT;this.rowCount=TableContainer.DEFAULT_ROW_COUNT;}const n=this.colCount;this.width='100%';this._columns.forEach((col,i)=>{const w=Math.floor(100/n);col.width=w+'%';});}_doLoad(loader,src){if(src){// NOTE: col count를 먼저 설정한 후 children 로드해야 한다!
    this._loadProps(src,'data','colCount','baseTable');if(src.hasOwnProperty('columns')){this._colCount=this._columns.load(src.columns,this._colCount);}super._doLoad(loader,src);}}_doLoadChild(child,src){super._doLoadChild(child,src);this._loadChildProps(child,[// TableBase.PROP_TABLE_APPLY_END_STYLES,
    ],src);// if (src.hasOwnProperty(TableContainer.PROP_TABLE_CELL_STYLES)) {
    //     const v = src[TableContainer.PROP_TABLE_CELL_STYLES];
    //     child.setChildProp(TableContainer.PROP_TABLE_CELL_STYLES, v && {...v})
    // }
    }_doSave(target){super._doSave(target);this._saveProps(target,'data','colCount','baseTable');this._columns.count&&this._columns.save(target['columns']=[]);}_createCell(item){return new TableContainerCellItem(item);}getCellWidths(){return this._baseContainer&&this._baseContainer.getCellWidths()||this._columns.getWidths();}prepareLayout(){this._baseContainer=this._baseTable&&this.page.getItem(this._baseTable);return super.prepareLayout();}isAncestorOf(item){return super.isAncestorOf(item)||item instanceof TableColumn&&item.collection.parent===this||item instanceof TableRow&&item.table===this;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_columnChanged(column){this._changed(TableContainer.PROP_COLUMNS,this._columns,this._columns);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    TableContainer.PROP_BASE_TABLE="baseTable";TableContainer.PROP_COL_COUNT="colCount";TableContainer.PROP_COLUMNS="columns";// child props
    // prop infos
    TableContainer.PROPINFOS=[{name:TableContainer.PROP_BASE_TABLE,category:PropCategory.TABLE,type:StringProperty,multiple:false,default:undefined},{name:TableContainer.PROP_COL_COUNT,category:PropCategory.TABLE,type:NumberProperty,multiple:false,default:0}];// defaults for designer
    TableContainer.DEFAULT_ROW_COUNT=4;TableContainer.DEFAULT_COL_COUNT=4;//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    TableContainer.$_ctor='TableContainer';TableContainer.ITEM_TYPE='Table';////////////////////////////////////////////////////////////////////////////////
    /**
     * TableContainer.cols 변경.
     * 컬럼 수가 줄 때는 사라지는 컬럼에 포함된 아이템들은 제거한다.
     * TableCell 들은 제거되지 않고 유지돼서 undo 시 복구된다. (span 이 유지된다.)
     */class ChangeTableColCountCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(table,newCols){super('Change table cols');assert(!!table);this._table=table;this._oldCols=table.colCount;this._cols=newCols;if(newCols<this._oldCols){this._deleted=[];this._indices=[];for(let r=0;r<table.rowCount;r++){for(let i=newCols;i<this._oldCols;i++){const item=table.getCellItemAt(r,i);if(item){this._deleted.push(item.item);this._indices.push(item.index);}}}this._deleted=this._deleted.sort((i1,i2)=>i1.parent.index-i2.parent.index);this._indices=this._indices.sort((i1,i2)=>i1-i2);this._cells=table.cells.truncateCol(newCols);}}_doDispose(){this._table=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** table */get table(){return this._table;}/** cols */get cols(){return this._cols;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){// 아래 설정 중에 item들이 삭제된다.
    this._table.colCount=this._cols;}undo(){const table=this._table;table.colCount=this._oldCols;if(this._deleted){this._deleted.forEach((item,i)=>{table.add(item,this._indices[i]);});table.cells.restoreCells(this._cells);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._table;}}/**
     * Table column을 제거한다.
     */class RemoveTableColumnCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(column){super('Remove TableColumn');this._deleted=[];assert(!!column);const table=this._table=column.table;assert(!!table);this._column=column;const index=this._index=table.columns.indexOf(column);// 삭제할 items
    this._deleted=table.getColItems(index);}_doDispose(){this._table=this._column=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** table */get table(){return this._table;}/** column */get column(){return this._column;}/** index */get index(){return this._index;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._cells=this._table.cells.removeCol(this._index);this._table.removeColumn(this._column);}undo(){const table=this._table;table.cells.addCol(this._index);table.addColumn(this._index,this._column);this._deleted.forEach(item=>{table.append(item,true);});table.cells.restoreCells(this._cells);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._column;}}/**
     * Table column을 추가한다.
     */class AddTableColumnCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(table,index){super('Add Table Column');this._table=table;assert(!!table);this._index=index;}_doDispose(){this._table=this._column=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** table */get table(){return this._table;}/** index */get index(){return this._index;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._cells=this._table.cells.addCol(this._index);this._column=this._table.addColumn(this._index,null);}undo(){this._table.cells.removeCol(this._index);this._table.removeColumn(this._index);this._table.cells.restoreCells(this._cells);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._column;}}/**
     * Table column들을 좌우로 이동한다.
     * 병합된 셀의 일부를 이동시킬수 없다.
     */class MoveTableColumnsCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(table,index,count,newIndex,force){super('Move Table Columns');this._table=table;assert(!!table);this._column=table.getColumn(this._index=index);this._count=count;this._newIndex=newIndex;this._force=force;}_doDispose(){this._table=this._column=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** table */get table(){return this._table;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._cells=this._table.cells.moveCols(this._index,this._count,this._newIndex);if(!this._cells)throw new Error('TableCellCollection.moveRows failed: '+this._index+', '+this._count+', '+this._newIndex);this._table.moveColumns(this._index,this._count,this._newIndex,this._force);}undo(){//this._table.cells.moveCols(this._index + this._delta, this._count, -this._delta);
    this._table.cells.restoreCells(this._cells);this._table.moveColumns(this._newIndex,this._count,this._index,true);//this._table.cells.restoreCells(this._cells);
    }//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._column;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * TableBase.rows 변경.
     * Rows 수가 줄 때는 사라지는 row에 포함된 아이템들은 제거한다.
     * TableCell 들은 제거되지 않고 유지돼서 undo 시 복구된다.
     */class ChangeTableRowCountCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(table,newRows){super('Change table rows');assert(!!table);const oldCount=this._oldCount=table.rowCount;const colCount=table.colCount;this._table=table;this._rows=newRows;if(newRows<oldCount){this._deleted=[];this._indices=[];for(let r=newRows;r<oldCount;r++){for(let i=0;i<colCount;i++){const item=table.getCellItemAt(r,i);if(item){this._deleted.push(item.item);this._indices.push(item.index);}}}this._deleted=this._deleted.sort((i1,i2)=>i1.parent.index-i2.parent.index);this._indices=this._indices.sort((i1,i2)=>i1-i2);this._cells=table.cells.truncateRow(newRows);}}_doDispose(){this._table=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** table */get table(){return this._table;}/** cols */get cols(){return this._rows;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){// 아래 설정 중에 item들이 삭제된다.
    this._table.rowCount=this._rows;}undo(){const table=this._table;table.rowCount=this._oldCount;if(this._deleted){this._deleted.forEach((item,i)=>{table.add(item,this._indices[i]);});table.cells.restoreCells(this._cells);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._table;}}/**
     * Table row를 제거한다.
     * 삭제된 아이템들을 보관하고 복원한다.
     * Cell들의 span 정보를 보관하고 복원한다.
     */class RemoveTableRowCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(row){super('Remove TableRow');assert(!!row);const table=this._table=row.table;assert(!!table);this._row=row;const index=this._index=table.rows.indexOf(row);// 삭제할 items
    this._deleted=table.getRowItems(index);}_doDispose(){this._table=this._row=this._cells=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** table */get table(){return this._table;}/** row */get row(){return this._row;}/** index */get index(){return this._index;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._cells=this._table.cells.removeRow(this._index);this._table.removeRow(this._row);}undo(){const table=this._table;table.cells.addRow(this._index);table.addRow(this._index,this._row);this._deleted.forEach(item=>{table.append(item,true);});table.cells.restoreCells(this._cells);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._row;}}/**
     * Table row를 추가한다.
     */class AddTableRowCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(table,index){super('Add TableRow');this._table=table;assert(!!table);this._index=index;}_doDispose(){this._table=this._row=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** table */get table(){return this._table;}/** index */get index(){return this._index;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._cells=this._table.cells.addRow(this._index);this._row=this._table.addRow(this._index,null);}undo(){this._table.cells.removeRow(this._index);this._table.removeRow(this._index);this._table.cells.restoreCells(this._cells);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._row;}}/**
     * Table row들을 상하로 이동한다.
     * 병합된 셀의 일부를 이동시킬수 없다.
     */class MoveTableRowsCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(table,row,count,newRow,force){super('Move Table Rows');this._table=table;assert(!!this._table);this._row=table.rows.get(this._index=row);this._count=count;this._newIndex=newRow;this._force=force;}_doDispose(){this._table=this._row=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** table */get table(){return this._table;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._cells=this._table.cells.moveRows(this._index,this._count,this._newIndex);if(!this._cells)throw new Error('TableCellCollection.moveRows failed: '+this._index+', '+this._count+', '+this._newIndex);this._table.moveRows(this._index,this._count,this._newIndex,this._force);}undo(){// this._table.cells.moveRows(this._index + this._delta, this._count, -this._delta);
    this._table.cells.restoreCells(this._cells);this._table.moveRows(this._newIndex,this._count,this._index,true);// this._table.cells.restoreCells(this._cells);
    }//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._row;}}/**
     * Table selection을 병합한다.
     * 병합된 셀의 일부를 이동시킬수 없다.
     */class MergeTableSelectionCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(selection){super('Merge Table Selection');this._table=selection.table;assert(!!this._table);this._sel=selection;const b=this._bounds=selection.table.cells.mergeBoundsOf(selection);// 삭제할 items
    this._deleted=this._table.getRectItems(b.r1,b.c1,b.r2,b.c2,true);}_doDispose(){this._table=this._bounds=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** table */get table(){return this._table;}/** bounds */get bounds(){return this._bounds;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){const b=this._bounds;this._cells=this._table.cells.merge(b.r1,b.c1,b.r2,b.c2);this._table.mergeCells(b.r1,b.c1,b.r2,b.c2);}undo(){const table=this._table;this._deleted.forEach(item=>{table.append(item,true);});table.cells.restoreCells(this._cells);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._sel.selectItem;}}/**
     * 병합된 Table cell을 분할한다.
     */class UnmergeTableCellsCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(cell){super('Unmerge Table Cell');this._table=cell.table;assert(!!this._table);this._cell=cell;}_doDispose(){this._table=this._cell=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** table */get table(){return this._table;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._cells=this._table.cells.unmerge(this._cell);}undo(){this._table.cells.restoreCells(this._cells);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._cell;}}/**
     * 테이블 너비가 고정된 경우,
     * 오른쪽 이웃 컬럼의 너비를 줄이거나 늘이면서 컬럼의 너비를 변경한다.
     */class AdjustColumnWidthsCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(table,col,colPoints,newSize){super('Adjust Table Column Widths');this._table=table;assert(!!this._table);this._column=table.getColumn(col);assert(!!this._column);this._sibling=table.getColumn(col+1);assert(!!this._sibling);this._colPoints=colPoints.slice(0);this._newSize=newSize;this._oldWidth=this._column.width;this._oldSiblingWidth=this._sibling.width;}_doDispose(){this._table=this._column=this._sibling=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){if(Utils.isNotDefined(this._newWidth)){const widths=this._table.columns.adjustWidths(this._column.index,this._colPoints,this._newSize);this._newWidth=widths[0];this._newSiblingWidth=widths[1];}this._column.width=this._newWidth;this._sibling.width=this._newSiblingWidth;}undo(){this._column.width=this._oldWidth;this._sibling.width=this._oldSiblingWidth;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._column;}}/**
     * 테이블 높이가 고정된 경우,
     * 오른쪽 이웃 행의 높이를 줄이거나 늘이면서 행의 높이를 변경한다.
     */class AdjustRowHeightsCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(table,row,rowPoints,newSize){super('Adjust Table Row Heights');this._table=table;assert(!!this._table);this._row=table.getRow(row);assert(!!this._row);this._sibling=table.getRow(row+1);assert(!!this._sibling);this._rowPoints=rowPoints.slice(0);this._newSize=newSize;this._oldHeight=this._row.height;this._oldSiblingHeight=this._sibling.height;}_doDispose(){this._table=this._row=this._sibling=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){if(Utils.isNotDefined(this._newHeight)){const heights=this._table.rows.adjustHeights(this._row.index,this._rowPoints,this._newSize);this._newHeight=heights[0];this._newSiblingHeight=heights[1];}this._row.height=this._newHeight;this._sibling.height=this._newSiblingHeight;}undo(){this._row.height=this._oldHeight;this._sibling.height=this._oldSiblingHeight;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._row;}}////////////////////////////////////////////////////////////////////////////////
    class ChartObject extends ReportItem{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(chart,name){super(name);this._chart=chart;this.visible=this._isDefaultVisible();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get chart(){return this._chart;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    canHide(){return true;}getWrapper(){return {enabled:this.visible};}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get page(){return this._chart.page;}get report(){return this._chart.report;}get dataParent(){return this._chart;}get marqueeParent(){return this._chart;}getSaveType(){return '';}_getEditProps(){return ChartObject.PROPINFOS;}_doLoad(loader,src){src.hasOwnProperty('visible')&&(this.visible=src.visible);this._loadProp(src,"styles");}_doSave(target){// if (this.visible !== this._isDefaultVisible()) 
    target.visible=this.visible;this._saveProp(target,'styles');}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _isDefaultVisible(){return true;}_getPropsWrapper(target,excludes,names){const props=this.getEditProps();props&&props.forEach(p=>{if(!excludes||excludes.indexOf(p.name)<0){const v=this[p.name];const name=names&&names[p.name]||p.name;if(v instanceof ChartObject);else if(v!==undefined){target[name]=v;}}});return target;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    // prop infos
    ChartObject.PROPINFOS=[{name:ReportItem.PROP_VISIBLE,category:PropCategory.BASIC,type:BooleanProperty,multiple:false,default:undefined,visible:source=>{return source.canHide();}}];class ChartTextObject extends ChartObject{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._text='Title';}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** text */get text(){return this._text;}set text(value){if(value!==this._text){const old=this._text;this._text=value;this._changed(ChartTextObject.PROP_TEXT,value,old);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getEditProps(){const props=super._getEditProps();return props.concat(ChartTextObject.PROPINFOS);}_getStyleProps(){return ['color','fontSize','fontWeight'];}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,ChartTextObject.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,ChartTextObject.PROPINFOS);}getWrapper(){const w=super.getWrapper();w.text=this.visible?this._text:'';w.style=Utils.extend({},this.styles);return w;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    ChartTextObject.PROP_TEXT="text";// prop infos
    ChartTextObject.PROPINFOS=[{name:ChartTextObject.PROP_TEXT,category:'',type:StringProperty,multiple:false,default:undefined}];class ChartSeries extends ChartObject{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);this._designVisible=true;this._values=Utils.iarandom(2,9,5);}//-------------------------------------------------------------------------
    // IPropertySource override
    //-------------------------------------------------------------------------
    getPropDomain(prop){const report=this.report;if(report){if(prop.name===ChartSeries.PROP_DATA){return [undefined].concat(this.chart.report.designData.getNames());}else if(prop.name===ChartSeries.PROP_VALUE_FIELD){return this.getDataFieldNames();}}}/**
         * id
         */get id(){return this._id;}set id(value){if(value!==this._id){const old=this._id;this._id=value;this._changed(ChartSeries.PROP_SERIES_ID,value,old);}}/**
         * design visible
         */get designVisible(){return this._designVisible;}set designVisible(value){if(value!=this._designVisible){this._designVisible=value;this._changed(ChartSeries.PROP_DESIGN_VISIBLE,value,!value);}}/**
         * valueField
         **/get valueField(){return this._valueField;}set valueField(value){if(value!==this._valueField){const old=this._valueField;this._valueField=value;this._changed(ChartSeries.PROP_VALUE_FIELD,value,old);}}/**
         * valueField가 지정되면 이 속성은 무시된다.
         */get values(){return this._values;}set values(value){if(value!==this._values){const old=this._values;this._values=value===null||value===void 0?void 0:value.slice();this._changed(ChartSeries.PROP_VALUES,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    hasValuesProp(){return true;}getValues(ctx,dp){if(ctx.printing&&this._valueField){const data=this.data||this._getParentData();if(data){return dp.getFieldValues(data,this._valueField);}}return this._values;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return this.seriesType;}get displayPath(){return this.chart.displayPath+'.series['+this.index+']';}get outlineLabel(){const t=Utils.capitalize(this.seriesType);return '['+this.index+'] '+(this.name?this.name+'('+t+')':t);}_getEditProps(){const props=super._getEditProps();return props.concat(ChartSeries.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,ChartSeries.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,ChartSeries.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    ChartSeries.PROP_SERIES_ID="id";ChartSeries.PROP_DESIGN_VISIBLE='designVisible';ChartSeries.PROP_VALUE_FIELD="valueField";ChartSeries.PROP_VALUES="values";// prop infos
    ChartSeries.PROPINFOS=[{name:ChartSeries.PROP_SERIES_ID,category:PropCategory.SERIES,type:StringProperty},{name:ChartSeries.PROP_DESIGN_VISIBLE,category:PropCategory.DESIGN,type:BooleanProperty,multiple:false,default:true},{name:ReportItem.PROP_NAME,category:PropCategory.BASIC,type:StringProperty,multiple:false,default:undefined},{name:ReportItem.PROP_DATA,category:PropCategory.DATA,type:ListableProperty,multiple:false,default:undefined},{name:ChartSeries.PROP_VALUE_FIELD,category:PropCategory.SERIES,type:ListableProperty,multiple:false,default:undefined,visible:source=>{return source.hasValuesProp();}},{name:ChartSeries.PROP_VALUES,category:PropCategory.SERIES,type:NumberArrayProperty,multiple:false,default:undefined,visible:source=>{return source.hasValuesProp();}}];class ChartSeriesCollection extends ReportItemCollection{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(chart){super();this._series=[];this._chart=chart;}//-------------------------------------------------------------------------
    // IOutlineSource
    //-------------------------------------------------------------------------
    get outlineParent(){return this._chart;}get outlineLabel(){return '[Series]';}get outlineExpandable(){return true;}get outlineItems(){return this._series;}//-------------------------------------------------------------------------
    // IPropertySource
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get owner(){return this._chart;}/** chart */get chart(){return this._chart;}/** count */get count(){return this._series.length;}get items(){return this._series.slice();}get visibleCount(){let n=0;for(let g of this._series){g.visible&&n++;}return n;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    load(loader,src){this._series=[];if(src&&src.length>0){for(let s of src){if(s){const series=this._createSeries(loader,s);series.load(loader,s);this._series.push(series);}}this.$_invalidateSeries();}}save(target){for(let ser of this._series){const obj={};ser.save(obj);target.push(obj);}}get(index){return this._series[index];}indexOf(series){return this._series.indexOf(series);}add(loader,series){let index=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;const ser=this.$_add(loader,series,index);if(ser){this.$_invalidateSeries();this._itemAdded(ser);return ser;}}addAll(loader,series){let index=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;if(!series||series.length<1)return;const len=this._series.length;index=index<0?this._series.length:Math.max(0,this._series.length);for(let ser of series){if(this.$_add(loader,ser,index)){index++;}}if(this._series.length!=len){this.$_invalidateSeries();return true;}}removeAt(index){if(index>=0&&index<this._series.length){const g=this._series.splice(index,1)[0];this.$_invalidateSeries();this._itemRemoved(g,this._chart);return true;}}remove(series){return this.removeAt(this.indexOf(series));}clear(){if(this._series.length>0){this._series=[];this.$_invalidateSeries();return true;}}select(series){for(let ser of this._series){ser.designVisible=!series||series===ser;}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'series';}get page(){var _a;return (_a=this._chart)===null||_a===void 0?void 0:_a.page;}get displayPath(){return this._chart?this._chart.displayPath+'.series':'series';}get level(){return this._chart?this._chart.level+1:0;}isAncestorOf(item){if(super.isAncestorOf(item))return true;if(this._series.indexOf(item)>=0)return true;// for (let g of this._series) {
    //     if (g.indexOf(item)) return true;
    // }
    }$_add(loader,series){let index=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;if(!(series instanceof ChartSeries)){const src=series;series=this._createSeries(loader,src);src&&series.load(loader,src);series.defaultInit();}if(series instanceof ChartSeries&&this._series.indexOf(series)<0){if(index<0){this._series.push(series);}else {this._series.splice(Math.min(index,this._series.length),0,series);}return series;}}$_invalidateSeries(){for(let i=this._series.length-1;i>=0;i--){this._series[i]['_index']=i;}this._seriesChanged(null);}$_seriesChanged(series){this._seriesChanged(null);}_doMoveItem(from,to){const s=this._series[to];this._series[to]=this._series[from];this._series[from]=s;this.$_invalidateSeries();return true;}}////////////////////////////////////////////////////////////////////////////////
    var HichartMarkerSymbol;(function(HichartMarkerSymbol){HichartMarkerSymbol["CIRCLE"]="circle";HichartMarkerSymbol["SQUARE"]="square";HichartMarkerSymbol["DIAMOND"]="diamond";HichartMarkerSymbol["TRIANGLE"]="triangle";HichartMarkerSymbol["TRIANGLE_DOWN"]="triangle-down";})(HichartMarkerSymbol||(HichartMarkerSymbol={}));var HichartDash;(function(HichartDash){HichartDash["DASH"]="Dash";HichartDash["DASH_DOT"]="DashDot";HichartDash["DOT"]="Dot";HichartDash["LONG_DASH"]="LongDash";HichartDash["LONG_DASH_DOT"]="LongDashDot";HichartDash["LONG_DASH_DOT_DOT"]="LongDashDotDot";HichartDash["SHORT_DASH"]="ShortDash";HichartDash["SHORT_DASH_DOT"]="ShortDashDot";HichartDash["SHORT_DASH_DOT_DOT"]="ShortDashDotDot";HichartDash["SHORT_DOT"]="ShortDot";HichartDash["SOLID"]="Solid";})(HichartDash||(HichartDash={}));/**
     * Chart title.
     */class HichartTitle extends ChartTextObject{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);this._x=0;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * align
         */get align(){return this._align;}set align(value){if(value!==this._align){const old=this._align;this._align=value;this._changed(HichartTitle.PROP_TITLE_ALIGN,value,old);}}/**
         * vertical align
         */get verticalAlign(){return this._verticalAlign;}set verticalAlign(value){if(value!==this.verticalAlign){const old=this._verticalAlign;this._verticalAlign=value;this._changed(HichartTitle.PROP_TITLE_VERTICAL_ALIGN,value,old);}}/**
         * x
         */get x(){return this._x;}set x(value){if(value!==this._x){const old=this._x;this._x=value;this._changed(HichartTitle.PROP_TITLE_X,value,old);}}/**
         * y
         */get y(){return this._y;}set y(value){if(value!==this._y){const old=this._y;this._y=value;this._changed(HichartTitle.PROP_TITLE_Y,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getWrapper(){const w=super.getWrapper();this.assignProps(w,['align','verticalAlign','x','y']);return w;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveLabel(){return 'title';}_getEditProps(){const props=super._getEditProps();return props.concat(HichartTitle.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartTitle.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartTitle.PROPINFOS);}_doDefaultInit(loader,parent,hintWidth,hintHeight){this.text='Title';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartTitle.PROP_TITLE_ALIGN='align';HichartTitle.PROP_TITLE_VERTICAL_ALIGN='verticalAlign';HichartTitle.PROP_TITLE_X='x';HichartTitle.PROP_TITLE_Y='y';// prop infos
    HichartTitle.PROPINFOS=[{name:HichartTitle.PROP_TITLE_ALIGN,category:PropCategory.TITLE,type:EnumProperty,multiple:false,default:undefined,domain:Align},{name:HichartTitle.PROP_TITLE_VERTICAL_ALIGN,category:PropCategory.TITLE,type:EnumProperty,multiple:false,default:undefined,domain:VerticalAlign},{name:HichartTitle.PROP_TITLE_X,category:PropCategory.TITLE,type:NumberProperty,multiple:true,default:undefined},{name:HichartTitle.PROP_TITLE_Y,category:PropCategory.TITLE,type:NumberProperty,multiple:true,default:undefined}];class HichartSubtitle extends HichartTitle{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);this.text='Subtitle';}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveLabel(){return 'subtitle';}_isDefaultVisible(){return false;}_doDefaultInit(loader,parent,hintWidth,hintHeight){this.text='Subtitle';}}var HichartStacking;(function(HichartStacking){HichartStacking["NORMAL"]="normal";HichartStacking["PERCENT"]="percent";})(HichartStacking||(HichartStacking={}));/**
     * Highcharts chart item.
     */class HichartItem extends ReportGroupItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);this._inverted=false;this._plotBorderColor='#cccccc';this._title=new HichartTitle(this);this._subtitle=new HichartSubtitle(this);this._xAxis=new HichartXAxis(this);this._yAxis=new HichartYAxis(this);this._legend=new HichartLegend(this);this._series=new HichartSeriesCollection(this);this._xAxis.title.visible=false;this._xAxis.title.text='Labels';this._yAxis.title.text='Values';}//-------------------------------------------------------------------------
    // IOutlineSource override
    //-------------------------------------------------------------------------
    get outlineItems(){return [this._series,this._xAxis,this._yAxis].concat(super.outlineItems);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** theme */get theme(){return this._theme;}set theme(value){if(value!=this._theme){const old=this._theme;this._theme=value;this._changed(HichartItem.PROP_HICHART_THEME,value,old);}}/** inverted */get inverted(){return this._inverted;}set inverted(value){if(value!==this._inverted){this._inverted=value;this._changed(HichartItem.PROP_HICHART_INVERTED,value,!value);}}/** stacking */get stacking(){return this._stacking;}set stacking(value){if(value!==this._stacking){const old=this._stacking;this._stacking=value;this._changed(HichartItem.PROP_HICHART_STACKING,value,old);}}/** plotBorderWidth */get plotBorderWidth(){return this._plotBorderWidth;}set plotBorderWidth(value){if(value!==this._plotBorderWidth){const old=value;this._plotBorderWidth=value;this._changed(HichartItem.PROP_HICHART_PLOT_BORDER_WIDTH,value,old);}}/** plotBorderColor */get plotBorderColor(){return this._plotBorderColor;}set plotBorderColor(value){if(value!==this._plotBorderColor){const old=value;this._plotBorderColor=value;this._changed(HichartItem.PROP_HICHART_PLOT_BORDER_COLOR,value,old);}}// 적용이 안되고 있다. seires.colors로 ...
    // get colors(): string[] {
    //     return this._colors?.slice(0);
    // }
    // set colors(value: string[]) {
    //     if (value !== this._colors) {
    //         const old = this._colors;
    //         this._colors = value?.slice(0);
    //         this._changed(HichartItem.PROP_HICHART_COLORS, value, old);
    //     }
    // }
    /** title */get title(){return this._title;}/** subtitle */get subtitle(){return this._subtitle;}/** xAxis */get xAxis(){return this._xAxis;}/** yAxis */get yAxis(){return this._yAxis;}/** legend */get legend(){return this._legend;}/** series */get series(){return this._series;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    /**
         * 시리즈들을 Hichart 모델이 아니라 HichartItem의 자식으로 설정한다.
         * 시리즈에 대응하는 별도의 view는 존재하지 않지만,
         * Outline view에는 별도의 항목으로 표시돼서 chart와 별도로 속성을 편집할 수 있게 한다.
         */addSeries(series,index){const report=this.report;if(report){return this._series.add(report.loader,series,index);}}removeSeries(series){this._series.remove(series);}selectSeries(series){this._series.select(series);}getParentBand(){let p=this.parent;while(p){if(p instanceof DataBand)return p;p=p.parent;}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'hichart';}get outlineLabel(){return '[High Chart]';}needDesignWidth(){return false;}needDesignHeight(){return false;}_getEditProps(){const props=super._getEditProps();return props.concat(HichartItem.PROPINFOS);}_getStyleProps(){return HichartItem.STYLE_PROPS;}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.width=340;this.height=270;this._title.defaultInit(loader,this,hintWidth,hintHeight);this._subtitle.defaultInit(loader,this,hintWidth,hintHeight);this._xAxis.defaultInit(loader,this,hintWidth,hintHeight);this._yAxis.defaultInit(loader,this,hintWidth,hintHeight);this._legend.defaultInit(loader,this,hintWidth,hintHeight);this._series.add(loader,{},0);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartItem.PROPINFOS);this._loadObjects([this._title,this._subtitle,this._xAxis,this._yAxis,this._legend],loader,src);src.hasOwnProperty('series')&&this._series.load(loader,src.series);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartItem.PROPINFOS);this._saveObjects([this._title,this._subtitle,this._xAxis,this._yAxis,this._legend],target);this._series.count&&this._series.save(target['series']=[]);}canAddTo(group){// databand row에  추가될 수  없다.
    return super.canAddTo(group)&&!group.isDataRowContainer;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_seriesChanged(series){this._changed(HichartItem.PROP_HICHART_SERIES,this._series,this._series);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartItem.PROP_HICHART_THEME="theme";HichartItem.PROP_HICHART_INVERTED="inverted";HichartItem.PROP_HICHART_STACKING="stacking";HichartItem.PROP_HICHART_PLOT_BORDER_WIDTH="plotBorderWidth";HichartItem.PROP_HICHART_PLOT_BORDER_COLOR="plotBorderColor";// static readonly PROP_HICHART_COLORS = "colors";
    HichartItem.PROP_HICHART_TITLE="title";HichartItem.PROP_HICHART_SUBTITLE="subtitle";HichartItem.PROP_HICHART_XAXIS="xAxis";HichartItem.PROP_HICHART_YAXIS="yAxis";HichartItem.PROP_HICHART_LEGEND="legend";HichartItem.PROP_HICHART_SERIES="series";// prop infos
    HichartItem.PROPINFOS=[{name:ReportItem.PROP_DATA,category:PropCategory.DATA,type:ListableProperty,multiple:false,default:undefined,domain:undefined},{name:HichartItem.PROP_HICHART_INVERTED,category:PropCategory.CHART,type:BooleanProperty,multiple:false,default:false},{name:HichartItem.PROP_HICHART_THEME,category:PropCategory.CHART,type:StringProperty,multiple:false,default:undefined},{name:HichartItem.PROP_HICHART_STACKING,category:PropCategory.CHART,type:EnumProperty,multiple:false,domain:HichartStacking,default:undefined},{name:HichartItem.PROP_HICHART_PLOT_BORDER_WIDTH,category:PropCategory.CHART,type:NumberProperty,multiple:false,default:undefined},{name:HichartItem.PROP_HICHART_PLOT_BORDER_COLOR,category:PropCategory.CHART,type:ColorProperty,multiple:false,default:undefined// }, {
    //     name: HichartItem.PROP_HICHART_COLORS,
    //     category: PropCategory.CHART,
    //     type: StringArrayProperty
    },{name:HichartItem.PROP_HICHART_TITLE,category:PropCategory.TITLE,type:ModelProperty,indented:true,multiple:false,default:undefined},{name:HichartItem.PROP_HICHART_SUBTITLE,category:PropCategory.SUBTITLE,type:ModelProperty,indented:true,multiple:false,default:undefined},{name:HichartItem.PROP_HICHART_LEGEND,category:'legend',type:ModelProperty,indented:true,multiple:false,default:undefined}];// style props
    HichartItem.STYLE_PROPS=['border','backgroundColor'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    HichartItem.$_ctor='HichartItem';HichartItem.ITEM_TYPE='Highchart';/**
     * Axis title.
     */class HichartAxisTitle extends ChartTextObject{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);this.rotation=undefined;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveLabel(){return 'title';}canRotate(){return true;}_getEditProps(){const props=super._getEditProps();return props.concat(HichartAxisTitle.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartAxisTitle.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartAxisTitle.PROPINFOS);}getWrapper(){const w=super.getWrapper();this.assignProps(w,[ReportItem.PROP_ROTATION]);return w;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    // prop infos
    HichartAxisTitle.PROPINFOS=[{name:ReportItem.PROP_ROTATION,category:PropCategory.TITLE,type:NumberProperty}];class HichartAxisLabels extends ChartObject{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);this._staggerLines=0;this._step=0;this.rotation=0;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** align */get align(){return this._align;}set align(value){if(value!==this._align){const old=this._align;this._align=value;this._changed(HichartAxisLabels.PROP_ALIGN,value,old);}}/** format */get format(){return this._format;}set format(value){if(value!==this._format){const old=this._format;this._format=value;this._changed(HichartAxisLabels.PROP_FORMAT,value,old);}}/** padding */get padding(){return this._padding;}set padding(value){if(value!==this._padding){const old=this._padding;this._padding=value;this._changed(HichartAxisLabels.PROP_PADDING,value,old);}}/** staggerLines */get staggerLines(){return this._staggerLines;}set staggerLines(value){if(value!==this._staggerLines){const old=this._staggerLines;this._staggerLines=value;this._changed(HichartAxisLabels.PROP_STAGGER_LINES,value,old);}}/** step */get step(){return this._step;}set step(value){if(value!==this._step){const old=this._step;this._step=value;this._changed(HichartAxisLabels.PROP_STEP,value,old);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    canRotate(){return true;}getSaveLabel(){return 'labels';}_getEditProps(){const props=super._getEditProps();return props.concat(HichartAxisLabels.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartAxisLabels.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartAxisLabels.PROPINFOS);}getWrapper(){const w=super.getWrapper();return this.assignProps(w,[HichartAxisLabels.PROP_ALIGN,HichartAxisLabels.PROP_FORMAT,HichartAxisLabels.PROP_PADDING,HichartAxisLabels.PROP_ROTATION,HichartAxisLabels.PROP_STAGGER_LINES,HichartAxisLabels.PROP_STEP]);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartAxisLabels.PROP_ALIGN='align';HichartAxisLabels.PROP_FORMAT='format';HichartAxisLabels.PROP_PADDING='padding';HichartAxisLabels.PROP_STAGGER_LINES='staggerLines';HichartAxisLabels.PROP_STEP='step';// prop infos
    HichartAxisLabels.PROPINFOS=[{name:HichartAxisLabels.PROP_ALIGN,category:PropCategory.LABELS,type:EnumProperty,multiple:false,domain:Align,default:undefined},{name:HichartAxisLabels.PROP_FORMAT,category:PropCategory.LABELS,type:StringProperty,multiple:false,default:undefined},{name:HichartAxisLabels.PROP_PADDING,category:PropCategory.LABELS,type:NumberProperty,multiple:false,default:undefined},{name:HichartAxisLabels.PROP_ROTATION,category:PropCategory.LABELS,type:NumberProperty,multiple:false,default:undefined},{name:HichartAxisLabels.PROP_STAGGER_LINES,category:PropCategory.LABELS,type:NumberProperty,multiple:false,default:undefined},{name:HichartAxisLabels.PROP_STEP,category:PropCategory.LABELS,type:NumberProperty,multiple:false,default:undefined}];class HichartAxisPlotLabel extends ChartObject{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** align */get align(){return this._align;}set align(value){if(value!==this._align){const old=this._align;this._align=value;this._changed(HichartAxisPlotLabel.PROP_ALIGN,value,old);}}/** verticalAlign */get verticalAlign(){return this._verticalAlign;}set verticalAlign(value){if(value!==this._verticalAlign){const old=this._verticalAlign;this._verticalAlign=value;this._changed(HichartAxisPlotLabel.PROP_VERTICAL_ALIGN,value,old);}}/** text */get text(){return this._text;}set text(value){if(value!==this._text){const old=this._text;this._text=value;this._changed(HichartAxisPlotLabel.PROP_TEXT,value,old);}}/** textAlign */get textAlign(){return this._textAlign;}set textAlign(value){if(value!==this._textAlign){const old=this._textAlign;this._textAlign=value;this._changed(HichartAxisPlotLabel.PROP_TEXT_ALIGN,value,old);}}/** x */get x(){return this._x;}set x(value){if(value!==this._x){const old=this._x;this._x=value;this._changed(HichartAxisPlotLabel.PROP_X,value,old);}}/** y */get y(){return this._y;}set y(value){if(value!==this._y){const old=this._y;this._y=value;this._changed(HichartAxisPlotLabel.PROP_Y,value,old);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveLabel(){return 'labels';}canRotate(){return true;}_getEditProps(){const props=super._getEditProps();return props.concat(HichartAxisPlotLabel.PROPINFOS);}_getStyleProps(){return HichartAxisPlotLabel.styleProps;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartAxisPlotLabel.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartAxisPlotLabel.PROPINFOS);}getWrapper(){const w=this.assignProps({},[HichartAxisPlotLabel.PROP_ALIGN,HichartAxisPlotLabel.PROP_VERTICAL_ALIGN,HichartAxisPlotLabel.PROP_TEXT,HichartAxisPlotLabel.PROP_TEXT_ALIGN,HichartAxisPlotLabel.PROP_X,HichartAxisPlotLabel.PROP_Y]);w.style=Utils.extend({},this.styles);return w;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartAxisPlotLabel.PROP_ALIGN='align';HichartAxisPlotLabel.PROP_VERTICAL_ALIGN='verticalAlign';HichartAxisPlotLabel.PROP_TEXT='text';HichartAxisPlotLabel.PROP_TEXT_ALIGN='textAlign';HichartAxisPlotLabel.PROP_X='x';HichartAxisPlotLabel.PROP_Y='y';// prop infos
    HichartAxisPlotLabel.PROPINFOS=[{name:HichartAxisPlotLabel.PROP_ALIGN,category:PropCategory.LABELS,type:EnumProperty,multiple:false,domain:Align,default:undefined},{name:HichartAxisPlotLabel.PROP_VERTICAL_ALIGN,category:PropCategory.LABELS,type:EnumProperty,multiple:false,default:undefined,domain:VerticalAlign},{name:HichartAxisPlotLabel.PROP_ROTATION,category:PropCategory.LABELS,type:NumberProperty,multiple:false,default:undefined},{name:HichartAxisPlotLabel.PROP_TEXT,category:PropCategory.LABELS,type:StringProperty,multiple:false,default:undefined},{name:HichartAxisPlotLabel.PROP_TEXT_ALIGN,category:PropCategory.LABELS,type:EnumProperty,multiple:false,default:undefined,domain:Align},{name:HichartAxisPlotLabel.PROP_X,category:PropCategory.LABELS,type:NumberProperty,multiple:false,default:undefined},{name:HichartAxisPlotLabel.PROP_Y,category:PropCategory.LABELS,type:NumberProperty,multiple:false,default:undefined}];HichartAxisPlotLabel.styleProps=['color','fontSize','fontWeight','fontFamily'];class HichartAxisPlotLine extends ReportItemCollectionItem{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(collection,src){super(collection);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._index=-1;this._label=new HichartAxisPlotLabel(collection.axis.chart);src&&this.load(src);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** value */get value(){return this._value;}set value(value){if(value!==this._value){const old=this._value;this._value=value;this._changed(HichartAxisPlotLine.PROP_VALUE,value,old);}}/** color */get color(){return this._color;}set color(value){if(value!==this._color){const old=this._color;this._color=value;this._changed(HichartAxisPlotLine.PROP_COLOR,value,old);}}/** width */get width(){return this._width;}set width(value){if(value!==this._width){const old=this._width;this._width=value;this._changed(HichartAxisPlotLine.PROP_WIDTH,value,old);}}/** dashStyle */get dashStyle(){return this._dashStyle;}set dashStyle(value){if(value!==this._dashStyle){const old=value;this._dashStyle=value;this._changed(HichartAxisPlotLine.PROP_DASH_STYLE,value,old);}}/** zIndex */get zIndex(){return this._zIndex;}set zIndex(value){if(value!==this._zIndex){const old=this._zIndex;this._zIndex=value;this._changed(HichartAxisPlotLine.PROP_Z_INDEX,value,old);}}get label(){return this._label;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get itemType(){return 'PlotLine';}get index(){return this._index;}get page(){var _a;return (_a=this.collection)===null||_a===void 0?void 0:_a.page;}get collection(){return super.collection;}get displayPath(){if(this.collection){return this.collection.axis.displayPath+'.plotLines['+this.index+']';}return 'plotLine';}get marqueeParent(){var _a;return (_a=this.collection)===null||_a===void 0?void 0:_a.owner;}_getStyleProps(){return [];}getEditProps(){return HichartAxisPlotLine.PROPINFOS;}_doLoad(src){this._loadPropsOf(src,HichartAxisPlotLine.PROPINFOS);this._label.load(null,src.label);}_doSave(target){this._savePropsOf(target,HichartAxisPlotLine.PROPINFOS);this._label.save(target.label={});}getWrapper(){const w={};w.label=this._label.getWrapper();this.assignProps(w,[HichartAxisPlotLine.PROP_VALUE,HichartAxisPlotLine.PROP_COLOR,HichartAxisPlotLine.PROP_WIDTH,HichartAxisPlotLine.PROP_DASH_STYLE,HichartAxisPlotLine.PROP_Z_INDEX]);w.label=this._label.getWrapper();return w;}getCollectionLabel(){return 'plotLine';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartAxisPlotLine.PROP_VALUE="value";HichartAxisPlotLine.PROP_COLOR="color";HichartAxisPlotLine.PROP_WIDTH="width";HichartAxisPlotLine.PROP_DASH_STYLE="dashStyle";HichartAxisPlotLine.PROP_LABEL="label";HichartAxisPlotLine.PROP_Z_INDEX='zIndex';// prop infos
    HichartAxisPlotLine.PROPINFOS=[{name:HichartAxisPlotLine.PROP_VALUE,category:'plotLine',type:NumberProperty},{name:HichartAxisPlotLine.PROP_COLOR,category:'plotLine',type:ColorProperty},{name:HichartAxisPlotLine.PROP_WIDTH,category:'plotLine',type:NumberProperty},{name:HichartAxisPlotLine.PROP_DASH_STYLE,category:'plotLine',type:EnumProperty,domain:HichartDash},{name:HichartAxisPlotLine.PROP_Z_INDEX,category:'plotLine',type:NumberProperty},{name:HichartAxisPlotLine.PROP_LABEL,category:PropCategory.LABEL,type:ModelProperty,indented:true}];class HichartAxisPlotLineCollection extends ReportItemCollection{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(owner){super();this._lines=[];this._owner=owner;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get owner(){return this._owner;}get axis(){return this._owner;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    load(src){const lines=this._lines=[];if(src&&src.length>0){for(let s of src){const line=new HichartAxisPlotLine(this,s);lines.push(line);}this.$_resetLines();}}save(target){this._lines.forEach(line=>target.push(line.save({})));}indexOf(item){return this._lines.indexOf(item);}add(line){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;line=line instanceof HichartAxisPlotLine?line:new HichartAxisPlotLine(this,line);if(line instanceof HichartAxisPlotLine&&this._lines.indexOf(line)<0){index=index<0?this._lines.length:index;this._lines.splice(Math.min(index,this._lines.length),0,line);this._itemAdded(line);this.$_resetLines();return line;}}remove(line){const i=this._lines.indexOf(line);if(i>=0){const line=this._lines.splice(i,1)[0];this._itemRemoved(line,this._owner.chart);this.$_resetLines();}}getWrapper(){const lines=[];this._lines.forEach(line=>{lines.push(line.getWrapper());});return lines;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get count(){return this._lines.length;}get items(){return this._lines.slice(0);}get outlineParent(){return this._owner;}get outlineExpandable(){return true;}get outlineLabel(){return '[PlotLines]';}get outlineItems(){return this._lines;}isEditableCollection(){return true;}getCollectionLabel(){return 'plotLines';}get page(){return this._owner.page;}get displayPath(){return this._owner?this._owner.displayPath+'.plotLines':'plotLines';}get level(){return this._owner?this._owner.level+1:0;}get marqueeParent(){return this._owner;}get(index){return this._lines[index];}getSaveType(){return 'plotLines';}_doMoveItem(from,to){// TODO: 구현할 것!
    return false;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_resetLines(){this._lines.forEach((line,i)=>{line['_parent']=this;line['_index']=i;});}}class HichartAxisPlotBand extends ReportItemCollectionItem{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(collection,src){super(collection);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._index=-1;this._label=new HichartAxisPlotLabel(collection.axis.chart);src&&this.load(src);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** color */get color(){return this._color;}set color(value){if(value!==this._color){const old=this._color;this._color=value;this._changed(HichartAxisPlotBand.PROP_COLOR,value,old);}}/** from */get from(){return this._from;}set from(value){if(value!==this._from){const old=this._from;this._from=value;this._changed(HichartAxisPlotBand.PROP_FROM,value,old);}}/** to */get to(){return this._to;}set to(value){if(value!==this._to){const old=this._to;this._to=value;this._changed(HichartAxisPlotBand.PROP_TO,value,old);}}/** zIndex */get zIndex(){return this._zIndex;}set zIndex(value){if(value!==this._zIndex){const old=this._zIndex;this._zIndex=value;this._changed(HichartAxisPlotBand.PROP_Z_INDEX,value,old);}}get label(){return this._label;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get itemType(){return 'PlotBand';}get index(){return this._index;}get page(){var _a;return (_a=this.collection)===null||_a===void 0?void 0:_a.page;}get collection(){return super.collection;}get displayPath(){if(this.collection){return this.collection.axis.displayPath+'.plotBands['+this.index+']';}return 'plotBand';}get marqueeParent(){var _a;return (_a=this.collection)===null||_a===void 0?void 0:_a.owner;}_getStyleProps(){return [];}getEditProps(){return HichartAxisPlotBand.PROPINFOS;}_doLoad(src){this._loadPropsOf(src,HichartAxisPlotBand.PROPINFOS);this._label.load(null,src.label);}_doSave(target){this._savePropsOf(target,HichartAxisPlotBand.PROPINFOS);this._label.save(target.label={});}getWrapper(){const w={};w.label=this._label.getWrapper();this.assignProps(w,[HichartAxisPlotBand.PROP_FROM,HichartAxisPlotBand.PROP_TO,HichartAxisPlotBand.PROP_COLOR,HichartAxisPlotBand.PROP_Z_INDEX]);w.label=this._label.getWrapper();return w;}getCollectionLabel(){return 'plotBand';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartAxisPlotBand.PROP_FROM="from";HichartAxisPlotBand.PROP_TO="to";HichartAxisPlotBand.PROP_COLOR="color";HichartAxisPlotBand.PROP_LABEL="label";HichartAxisPlotBand.PROP_Z_INDEX='zIndex';// prop infos
    HichartAxisPlotBand.PROPINFOS=[{name:HichartAxisPlotBand.PROP_FROM,category:'plotLine',type:NumberProperty},{name:HichartAxisPlotBand.PROP_TO,category:'plotLine',type:NumberProperty},{name:HichartAxisPlotBand.PROP_COLOR,category:'plotLine',type:ColorProperty,multiple:false,default:undefined},{name:HichartAxisPlotBand.PROP_Z_INDEX,category:'plotBand',type:NumberProperty},{name:HichartAxisPlotBand.PROP_LABEL,category:PropCategory.LABEL,type:ModelProperty,indented:true,multiple:false,default:undefined}];class HichartAxisPlotBandCollection extends ReportItemCollection{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(owner){super();this._bands=[];this._owner=owner;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get owner(){return this._owner;}get axis(){return this._owner;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    load(src){const bands=this._bands=[];if(src&&src.length>0){for(let s of src){const line=new HichartAxisPlotBand(this,s);bands.push(line);}this.$_resetBands();}}save(target){this._bands.forEach(band=>target.push(band.save({})));}indexOf(item){return this._bands.indexOf(item);}add(band){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;band=band instanceof HichartAxisPlotBand?band:new HichartAxisPlotBand(this,band);if(band instanceof HichartAxisPlotBand&&this._bands.indexOf(band)<0){index=index<0?this._bands.length:index;this._bands.splice(Math.min(index,this._bands.length),0,band);this._itemAdded(band);this.$_resetBands();return band;}}remove(line){const i=this._bands.indexOf(line);if(i>=0){const line=this._bands.splice(i,1)[0];this._itemRemoved(line,this._owner.chart);this.$_resetBands();}}getWrapper(){const bands=[];this._bands.forEach(band=>{bands.push(band.getWrapper());});return bands;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get count(){return this._bands.length;}get items(){return this._bands.slice(0);}get outlineParent(){return this._owner;}get outlineExpandable(){return true;}get outlineLabel(){return '[PlotBands]';}get outlineItems(){return this._bands;}isEditableCollection(){return true;}getCollectionLabel(){return 'plotBands';}get page(){return this._owner.page;}get displayPath(){return this._owner?this._owner.displayPath+'.plotBands':'plotBands';}get level(){return this._owner?this._owner.level+1:0;}get marqueeParent(){return this._owner;}get(index){return this._bands[index];}getSaveType(){return 'plotBands';}_doMoveItem(from,to){// TODO: 구현할 것.
    return false;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_resetBands(){this._bands.forEach((band,i)=>{band['_parent']=this;band['_index']=i;});}}class HichartAxis extends ChartObject{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);this._title=new HichartAxisTitle(chart);this._labels=new HichartAxisLabels(chart);this._plotLines=new HichartAxisPlotLineCollection(this);this._plotBands=new HichartAxisPlotBandCollection(this);}//-------------------------------------------------------------------------
    // IPropertySource override
    //-------------------------------------------------------------------------
    getPropDomain(prop){const report=this.report;if(report){/*if (prop.name === ReportItem.PROP_DATA) {
                    return [undefined].concat(page.report.designData.getNames());
                } else*/if(prop.name===HichartXAxis.PROP_CATEGORY_FIELD){return this.getDataFieldNames();}}}getPopupPropLabel(prop){if(prop===HichartAxis.PROP_PLOT_LINES){return "(".concat(this._plotLines.count," lines)");}else if(prop===HichartAxis.PROP_PLOT_BANDS){return "(".concat(this._plotBands.count," bands)");}}//-------------------------------------------------------------------------
    // IOutlineSource override
    //-------------------------------------------------------------------------
    get outlineItems(){return [this._plotLines,this._plotBands].concat(super.outlineItems);}get outlineExpandable(){return true;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get title(){return this._title;}get labels(){return this._labels;}/** categories */get categories(){return this._categories;}set categories(value){if(value!==this._categories){const old=this._categories;this._categories=value===null||value===void 0?void 0:value.slice();this._changed(HichartAxis.PROP_CATEGORIES,value,old);}}/** categoryField */get categoryField(){return this._categoryField;}set categoryField(value){if(value!==this._categoryField){const old=this._categoryField;this._categoryField=value;this._changed(HichartAxis.PROP_CATEGORY_FIELD,value,old);}}/** minPadding */get minPadding(){return this._minPadding;}set minPadding(value){if(value!==this._minPadding){const old=this._minPadding;this._minPadding=value;this._changed(HichartAxis.PROP_MIN_PADDING,value,old);}}/** minPadding */get maxPadding(){return this._maxPadding;}set maxPadding(value){if(value!==this._maxPadding){const old=this._maxPadding;this._maxPadding=value;this._changed(HichartAxis.PROP_MAX_PADDING,value,old);}}get plotLines(){return this._plotLines;}get plotBands(){return this._plotBands;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getCategories(ctx,dp){const printing=ctx&&ctx.printing;// testing 중에 ctx가 제공되지 않을 수 있다.
    if(!(printing&&this._categoryField))return this._categories;const data=this._getParentData();if(!data)return;const band=this.chart.getParentBand();if(band&&band.data===data&&band.containsInSection(this.chart)&&band.isDetail){return dp.getFieldValues(data,this.categoryField,ctx.detailRows);}return dp.getFieldValues(data,this.categoryField);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineParent(){return this.chart;}_getEditProps(){const props=super._getEditProps();return props.concat(HichartAxis.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartAxis.PROPINFOS);this._loadObject(this._title,loader,src);this._loadObject(this._labels,loader,src);this._plotLines.load(src.plotLines);this._plotBands.load(src.plotBands);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartAxis.PROPINFOS);this._saveObject(this._title,target);this._saveObject(this._labels,target);this._plotLines.count>0&&this._plotLines.save(target['plotLines']=[]);this._plotBands.count>0&&this._plotBands.save(target['plotBands']=[]);}getWrapper(){const w=super.getWrapper();w.visible=this.visible;// axis는 enabled가 아니라 visible이다.
    w.title=this._title.getWrapper();w.labels=this._labels.getWrapper();if(this._plotLines.count>0){w.plotLines=this._plotLines.getWrapper();}if(this._plotBands.count>0){w.plotBands=this._plotBands.getWrapper();}this.assignProps(w,[HichartAxis.PROP_MIN_PADDING,HichartAxis.PROP_MAX_PADDING]);return w;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartAxis.PROP_TITLE="title";HichartAxis.PROP_CATEGORIES="categories";HichartAxis.PROP_CATEGORY_FIELD="categoryField";HichartAxis.PROP_LABELS="labels";HichartAxis.PROP_MIN_PADDING="minPadding";HichartAxis.PROP_MAX_PADDING="maxPadding";HichartAxis.PROP_PLOT_LINES='plotLines';HichartAxis.PROP_PLOT_BANDS='plotBands';// prop infos
    HichartAxis.PROPINFOS=[{name:HichartAxis.PROP_TITLE,category:PropCategory.TITLE,type:ModelProperty,indented:true,multiple:false,default:undefined},{name:HichartAxis.PROP_CATEGORIES,category:PropCategory.AXIS,type:StringArrayProperty},{name:HichartAxis.PROP_CATEGORY_FIELD,category:PropCategory.AXIS,type:ListableProperty},{name:HichartAxis.PROP_LABELS,category:PropCategory.LABELS,type:ModelProperty,indented:true},{name:HichartAxis.PROP_MIN_PADDING,category:PropCategory.AXIS,type:NumberProperty},{name:HichartAxis.PROP_MAX_PADDING,category:PropCategory.AXIS,type:NumberProperty},{name:HichartAxis.PROP_PLOT_LINES,category:PropCategory.AXIS,type:PopupProperty,collection:true},{name:HichartAxis.PROP_PLOT_BANDS,category:PropCategory.AXIS,type:PopupProperty,collection:true}];class HichartXAxis extends HichartAxis{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);}//-------------------------------------------------------------------------
    // IPropertySource override
    //-------------------------------------------------------------------------
    getPropDomain(prop){const report=this.report;if(report){/*if (prop.name === ReportItem.PROP_DATA) {
                    return [undefined].concat(page.report.designData.getNames());
                } else*/if(prop.name===HichartXAxis.PROP_CATEGORY_FIELD){return this.getDataFieldNames();}}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveLabel(){return 'xAxis';}get displayPath(){return this.chart.displayPath+'.xAxis';}get outlineLabel(){return '[X Axis]';}_getEditProps(){const props=super._getEditProps();return props.concat(HichartXAxis.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartXAxis.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartXAxis.PROPINFOS);}getWrapper(){const w=super.getWrapper();return w;}getPlotLineConfig(){return;}getPlotBandConfig(){return;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    // prop infos
    HichartXAxis.PROPINFOS=[];class HichartYAxis extends HichartAxis{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** min */get min(){return this._min;}set min(value){if(value!==this._min){const old=this._min;this._min=value;this._changed(HichartYAxis.PROP_MIN,value,old);}}/** max */get max(){return this._max;}set max(value){if(value!==this._max){const old=this._max;this._max=value;this._changed(HichartYAxis.PROP_MAX,value,old);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveLabel(){return 'yAxis';}get displayPath(){return this.chart.displayPath+'.yAxis';}get outlineLabel(){return '[Y Axis]';}_getEditProps(){const props=super._getEditProps();return props.concat(HichartYAxis.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartYAxis.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartYAxis.PROPINFOS);}getWrapper(){const w=super.getWrapper();this.assignProps(w,['min','max']);return w;}getPlotLineConfig(){return {// value: 13,
    // color: 'blue',
    // label: {
    //     text: 'xxx'
    // }
    };}getPlotBandConfig(){return;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartYAxis.PROP_MIN="min";HichartYAxis.PROP_MAX="max";// prop infos
    HichartYAxis.PROPINFOS=[{name:HichartYAxis.PROP_MIN,category:PropCategory.AXIS,type:NumberProperty,multiple:false,default:undefined},{name:HichartYAxis.PROP_MAX,category:PropCategory.AXIS,type:NumberProperty,multiple:false,default:undefined}];var HichartSymbol;(function(HichartSymbol){HichartSymbol["ARC"]="arc";HichartSymbol["CALLOUT"]="callout";HichartSymbol["CIRCLE"]="circle";HichartSymbol["DIAMOND"]="diamond";HichartSymbol["SQUARE"]="square";HichartSymbol["TRIANGLE"]="triangle";})(HichartSymbol||(HichartSymbol={}));class HichartDataLabels extends ChartObject{constructor(){super(...arguments);this._borderRadius=0;this._borderWidth=0;this._padding=5;this._x=0;this._y=0;this._z=6;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * align
         */get align(){return this._align;}set align(value){if(value!==this._align){const old=this._align;this._align=value;this._changed(HichartDataLabels.PROP_DATA_LABELS_ALIGN,value,old);}}/**
         * vertical align
         */get verticalAlign(){return this._verticalAlign;}set verticalAlign(value){if(value!==this._verticalAlign){const old=this._verticalAlign;this._verticalAlign=value;this._changed(HichartDataLabels.PROP_DATA_LABELS_VERTICAL_ALIGN,value,old);}}/**
         * shape
         */get shape(){return this._shape;}set shape(value){if(value!==this._shape){const old=this._shape;this._shape=value;this._changed(HichartDataLabels.PROP_DATA_LABELS_SHAPE,value,old);}}/**
         * format
         */get format(){return this._format;}set format(value){if(value!==this._format){const old=this._format;this._format=value;this._changed(HichartDataLabels.PROP_DATA_LABELS_FORMAT,value,old);}}/**
         * background color
         */get backgroundColor(){return this._backgroundColor;}set backgroundColor(value){if(value!==this._backgroundColor){const old=this._backgroundColor;this._backgroundColor=value;this._changed(HichartDataLabels.PROP_DATA_LABELS_BACKGROUND_COLOR,value,old);}}/** shadow */get shadow(){return this._shadow;}set shadow(value){if(value!==this._shadow){this._shadow=value;this._changed(HichartDataLabels.PROP_DATA_LABELS_SHADOW,value,!value);}}/** textOutline */get textOutline(){return this._textOutline;}set textOutline(value){if(value!==this._textOutline){const old=this._textOutline;this._textOutline=value;this._changed(HichartDataLabels.PROP_DATA_LABELS_TEXT_OUTLINE,value,old);}}/** borderColor */get borderColor(){return this._borderColor;}set borderColor(value){if(value!==this._borderColor){const old=this._borderColor;this._borderColor=value;this._changed(HichartDataLabels.PROP_DATA_LABELS_BORDER_COLOR,value,old);}}/** borderRadius */get borderRadius(){return this._borderRadius;}set borderRadius(value){if(value!==this._borderRadius){const old=this._borderRadius;this._borderRadius=value;this._changed(HichartDataLabels.PROP_DATA_LABELS_BORDER_RADIUS,value,old);}}/** borderWidth */get borderWidth(){return this._borderWidth;}set borderWidth(value){if(value!==this._borderWidth){const old=this._borderWidth;this._borderWidth=value;this._changed(HichartDataLabels.PROP_DATA_LABELS_BORDER_WIDTH,value,old);}}/** padding */get padding(){return this._padding;}set padding(value){if(value!==this._padding){const old=this._padding;this._padding=value;this._changed(HichartDataLabels.PROP_DATA_LABELS_PADDING,value,old);}}/** x */get x(){return this._x;}set x(value){if(value!==this._x){const old=this._x;this._x=value;this._changed(HichartDataLabels.PROP_DATA_LABELS_X,value,old);}}/** y */get y(){return this._y;}set y(value){if(value!==this._y){const old=this._y;this._y=value;this._changed(HichartDataLabels.PROP_DATA_LABELS_Y,value,old);}}/** z */get z(){return this._z;}set z(value){if(value!==this._z){const old=this._z;this._z=value;this._changed(HichartDataLabels.PROP_DATA_LABELS_Z,value,old);}}/** inside */get inside(){return this._inside;}set inside(value){if(value!==this._inside){this._inside=value;this._changed(HichartDataLabels.PROP_DATA_LABELS_INSIDE,value,!value);}}//-------------------------------------------------------------------------
    // methdos
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getEditProps(){const props=super._getEditProps();return props.concat(HichartDataLabels.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartDataLabels.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartDataLabels.PROPINFOS);}canRotate(){return true;}getSaveLabel(){return 'dataLabels';}getWrappaer(){const w=super.getWrapper();this.assignProps(w,[HichartDataLabels.PROP_DATA_LABELS_ALIGN,HichartDataLabels.PROP_DATA_LABELS_VERTICAL_ALIGN,HichartDataLabels.PROP_DATA_LABELS_SHAPE,HichartDataLabels.PROP_DATA_LABELS_FORMAT,HichartDataLabels.PROP_DATA_LABELS_BACKGROUND_COLOR,HichartDataLabels.PROP_DATA_LABELS_SHADOW,HichartDataLabels.PROP_DATA_LABELS_TEXT_OUTLINE,HichartDataLabels.PROP_DATA_LABELS_BORDER_COLOR,HichartDataLabels.PROP_DATA_LABELS_BORDER_RADIUS,HichartDataLabels.PROP_DATA_LABELS_BORDER_WIDTH,HichartDataLabels.PROP_DATA_LABELS_PADDING,HichartDataLabels.PROP_DATA_LABELS_X,HichartDataLabels.PROP_DATA_LABELS_Y,HichartDataLabels.PROP_DATA_LABELS_Z,HichartDataLabels.PROP_DATA_LABELS_INSIDE]);w.style=Utils.extend({},this.styles);this.assignProps(w.style,['textOutline']);return w;}_getStyleProps(){return ['color','fontSize','fontWeight'];}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartDataLabels.PROP_DATA_LABELS_ALIGN='align';HichartDataLabels.PROP_DATA_LABELS_VERTICAL_ALIGN='verticalAlign';HichartDataLabels.PROP_DATA_LABELS_SHAPE='shape';HichartDataLabels.PROP_DATA_LABELS_FORMAT='format';HichartDataLabels.PROP_DATA_LABELS_BACKGROUND_COLOR='backgroundColor';HichartDataLabels.PROP_DATA_LABELS_SHADOW='shadow';HichartDataLabels.PROP_DATA_LABELS_TEXT_OUTLINE='textOutline';HichartDataLabels.PROP_DATA_LABELS_BORDER_COLOR='borderColor';HichartDataLabels.PROP_DATA_LABELS_BORDER_RADIUS='borderRadius';HichartDataLabels.PROP_DATA_LABELS_BORDER_WIDTH='borderWidth';HichartDataLabels.PROP_DATA_LABELS_PADDING='padding';HichartDataLabels.PROP_DATA_LABELS_X='x';HichartDataLabels.PROP_DATA_LABELS_Y='y';HichartDataLabels.PROP_DATA_LABELS_Z='z';HichartDataLabels.PROP_DATA_LABELS_INSIDE='inside';// prop infos
    HichartDataLabels.PROPINFOS=[{name:HichartDataLabels.PROP_DATA_LABELS_ALIGN,category:PropCategory.DATA_LABELS,type:EnumProperty,multiple:false,default:undefined,domain:Align},{name:HichartDataLabels.PROP_DATA_LABELS_VERTICAL_ALIGN,category:PropCategory.DATA_LABELS,type:EnumProperty,multiple:false,default:undefined,domain:VerticalAlign},{name:HichartDataLabels.PROP_ROTATION,category:PropCategory.DATA_LABELS,type:NumberProperty,multiple:false,default:undefined},{name:HichartDataLabels.PROP_DATA_LABELS_SHAPE,category:PropCategory.DATA_LABELS,type:EnumProperty,multiple:false,default:undefined,domain:HichartSymbol},{name:HichartDataLabels.PROP_DATA_LABELS_FORMAT,category:PropCategory.DATA_LABELS,type:StringProperty,multiple:false,default:undefined},{name:HichartDataLabels.PROP_DATA_LABELS_BACKGROUND_COLOR,category:PropCategory.DATA_LABELS,type:ColorProperty,multiple:false,default:undefined},{name:HichartDataLabels.PROP_DATA_LABELS_SHADOW,category:PropCategory.DATA_LABELS,type:BooleanProperty,multiple:false,default:undefined},{name:HichartDataLabels.PROP_DATA_LABELS_TEXT_OUTLINE,category:PropCategory.DATA_LABELS,type:StringProperty,multiple:false,default:undefined},{name:HichartDataLabels.PROP_DATA_LABELS_BORDER_COLOR,category:PropCategory.DATA_LABELS,type:ColorProperty,multiple:false,default:undefined},{name:HichartDataLabels.PROP_DATA_LABELS_BORDER_RADIUS,category:PropCategory.DATA_LABELS,type:NumberProperty,multiple:false,default:undefined},{name:HichartDataLabels.PROP_DATA_LABELS_BORDER_WIDTH,category:PropCategory.DATA_LABELS,type:NumberProperty,multiple:false,default:undefined},{name:HichartDataLabels.PROP_DATA_LABELS_PADDING,category:PropCategory.DATA_LABELS,type:NumberProperty,multiple:false,default:undefined},{name:HichartDataLabels.PROP_DATA_LABELS_X,category:PropCategory.DATA_LABELS,type:NumberProperty,multiple:false,default:0},{name:HichartDataLabels.PROP_DATA_LABELS_Y,category:PropCategory.DATA_LABELS,type:NumberProperty,multiple:false,default:0},{name:HichartDataLabels.PROP_DATA_LABELS_Z,category:PropCategory.DATA_LABELS,type:NumberProperty,multiple:false,default:6},{name:HichartDataLabels.PROP_DATA_LABELS_INSIDE,category:PropCategory.DATA_LABELS,type:BooleanProperty,multiple:false,default:undefined}];class HichartCartesianDataLabels extends HichartDataLabels{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartCartesianDataLabels.PROP_DATA_LABELS_ALIGN='align';var HichartRadialDataLabelsAlignTo;(function(HichartRadialDataLabelsAlignTo){HichartRadialDataLabelsAlignTo["CONNECTORS"]="connectors";HichartRadialDataLabelsAlignTo["PLOT_EDGES"]="plotEdges";})(HichartRadialDataLabelsAlignTo||(HichartRadialDataLabelsAlignTo={}));var HichartRadialDataLabelsConnectorShape;(function(HichartRadialDataLabelsConnectorShape){HichartRadialDataLabelsConnectorShape["FIXED_OFFSET"]="fixedOffset";HichartRadialDataLabelsConnectorShape["STRAIGHT"]="straight";HichartRadialDataLabelsConnectorShape["CROOKED_LINE"]="crookedLine";})(HichartRadialDataLabelsConnectorShape||(HichartRadialDataLabelsConnectorShape={}));class HichartRadialDataLabels extends HichartDataLabels{//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * alignTo
         */get alignTo(){return this._alignTo;}set alignTo(value){if(value!==this._alignTo){const old=this._alignTo;this._alignTo=value;this._changed(HichartRadialDataLabels.PROP_ALIGN_TO,old,value);}}/**
         * distance
         */get distance(){return this._distance;}set distance(value){if(value!==this._distance){const old=this._distance;this._distance=value;this._changed(HichartRadialDataLabels.PROP_DISTANCE,value,old);}}/**
         * connectorColor
         */get connectorColor(){return this._connectorColor;}set connectorColor(value){if(value!==this._connectorColor){const old=this._connectorColor;this._connectorColor=value;this._changed(HichartRadialDataLabels.PROP_CONNECTOR_COLOR,value,old);}}/**
         * connectorPadding
         */get connectorPadding(){return this._connectorPadding;}set connectorPadding(value){if(value!==this._connectorPadding){const old=this._connectorPadding;this._connectorPadding=value;this._changed(HichartRadialDataLabels.PROP_CONNECTOR_PADDING,value,old);}}/**
         * connectorShape
         */get connectorShape(){return this._connectorShape;}set connectorShape(value){if(value!==this._connectorShape){const old=this._connectorShape;this._connectorShape=value;this._changed(HichartRadialDataLabels.PROP_CONNECTOR_SHAPE,value,old);}}/**
         * connectorWidth
         */get connectorWidth(){return this._connectorWidth;}set connectorWidth(value){if(value!==this._connectorWidth){const old=this._connectorWidth;this._connectorWidth=value;this._changed(HichartRadialDataLabels.PROP_CONNECTOR_WIDTH,value,old);}}/**
         * crookDistance
         */get crookDistance(){return this._crookDistance;}set crookDistance(value){if(value!==this._crookDistance){const old=this._crookDistance;this._crookDistance=value;this._changed(HichartRadialDataLabels.PROP_CROOK_DISTANCE,value,old);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getEditProps(){const props=super._getEditProps();return props.concat(HichartRadialDataLabels.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartRadialDataLabels.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartRadialDataLabels.PROPINFOS);}getWrappaer(){const w=super.getWrappaer();this.assignProps(w,[HichartRadialDataLabels.PROP_ALIGN_TO,HichartRadialDataLabels.PROP_DISTANCE,HichartRadialDataLabels.PROP_CONNECTOR_COLOR,HichartRadialDataLabels.PROP_CONNECTOR_PADDING,HichartRadialDataLabels.PROP_CONNECTOR_SHAPE,HichartRadialDataLabels.PROP_CONNECTOR_WIDTH,HichartRadialDataLabels.PROP_CROOK_DISTANCE]);return w;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartRadialDataLabels.PROP_ALIGN_TO='alignTo';HichartRadialDataLabels.PROP_DISTANCE='distance';HichartRadialDataLabels.PROP_CONNECTOR_COLOR='connectorColor';HichartRadialDataLabels.PROP_CONNECTOR_PADDING='connectorPadding';HichartRadialDataLabels.PROP_CONNECTOR_SHAPE='connectorShape';HichartRadialDataLabels.PROP_CONNECTOR_WIDTH='connectorWidth';HichartRadialDataLabels.PROP_CROOK_DISTANCE='crookDistance';// prop infos
    HichartRadialDataLabels.PROPINFOS=[{name:HichartRadialDataLabels.PROP_ALIGN_TO,category:PropCategory.DATA_LABELS,type:EnumProperty,multiple:false,domain:HichartRadialDataLabelsAlignTo,default:undefined},{name:HichartRadialDataLabels.PROP_DISTANCE,category:PropCategory.DATA_LABELS,type:NumberProperty,multiple:true,default:undefined},{name:HichartRadialDataLabels.PROP_CONNECTOR_COLOR,category:PropCategory.DATA_LABELS,type:ColorProperty,multiple:true,default:undefined},{name:HichartRadialDataLabels.PROP_CONNECTOR_PADDING,category:PropCategory.DATA_LABELS,type:NumberProperty,multiple:true,default:undefined},{name:HichartRadialDataLabels.PROP_CONNECTOR_SHAPE,category:PropCategory.DATA_LABELS,type:EnumProperty,multiple:true,default:undefined,domain:HichartRadialDataLabelsConnectorShape},{name:HichartRadialDataLabels.PROP_CONNECTOR_WIDTH,category:PropCategory.DATA_LABELS,type:NumberProperty,multiple:true,default:undefined},{name:HichartRadialDataLabels.PROP_CROOK_DISTANCE,category:PropCategory.DATA_LABELS,type:StringProperty,multiple:true,default:undefined}];class HichartSeries extends ChartSeries{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);this._showInLegend=true;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * color
         */get color(){return this._color;}set color(value){if(value!==this._color){const old=this._color;this._color=value;this._changed(HichartSeries.PROP_SERIES_COLOR,value,old);}}/**
         * colors
         */get colors(){return this._colors&&this._colors.slice(0);}set colors(value){if(value!==this._colors){const old=this._colors;this._colors=value&&value.slice(0);this._changed(HichartSeries.PROP_SERIES_COLORS,value,old);}}/**
         * colorByPoint
         */get colorByPoint(){return this._colorByPoint;}set colorByPoint(value){if(value!==this._colorByPoint){this._colorByPoint=value;this._changed(HichartSeries.PROP_SERIES_COLOR_BY_POINT,value,!value);}}/**
         * showInLegend
         */get showInLegend(){return this._showInLegend;}set showInLegend(value){if(value!==this._showInLegend){this._showInLegend=value;this._changed(HichartSeries.PROP_SERIES_SHOW_IN_LEGEND,value,!value);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    canHideMarker(){return false;}wrap(target){Utils.extend(target,{type:this.seriesType,name:this.name});this.assignProps(target,[HichartSeries.PROP_SERIES_COLOR,HichartSeries.PROP_SERIES_COLORS,HichartSeries.PROP_SERIES_COLOR_BY_POINT,HichartSeries.PROP_SERIES_SHOW_IN_LEGEND]);return target;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineParent(){return this.chart.series;}_getEditProps(){const props=super._getEditProps();return props.concat(HichartSeries.PROPINFOS);}getPropDomain(prop){const page=this.page;if(page){const fieldProps=this._getFieldProps();if(fieldProps&&fieldProps.length>0){if(fieldProps.indexOf(prop.name)>=0){return this.getDataFieldNames();}}}return super.getPropDomain(prop);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartSeries.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartSeries.PROPINFOS);}getCollectionLabel(){return 'hichartSeries';}canRemoveFrom(){return true;}getValues(ctx,dp){const field=this.valueField;if(ctx.printing&&field){const data=this.data||this._getParentData();if(data){const band=this.chart.getParentBand();if(band&&band.data===data&&band.containsInSection(this.chart)&&band.isDetail){return dp.getFieldValues(data,field,ctx.detailRows);}else {return dp.getFieldValues(data,field);}}}return this.values;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _getFieldProps(){return;}_getValues(ctx,prop,dp){const field=this['_'+prop+'Field'];if(ctx.printing&&field){const data=this.data||this._getParentData();if(data){const band=this.chart.getParentBand();if(band&&band.containsInSection(this.chart)&&band.isDetail){return dp.getFieldValues(data,field,ctx.detailRows);}else {return dp.getFieldValues(data,field);}}}return this['_'+prop+'Values'];}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartSeries.PROP_SERIES_COLOR='color';HichartSeries.PROP_SERIES_COLORS="colors";HichartSeries.PROP_SERIES_COLOR_BY_POINT="colorByPoint";HichartSeries.PROP_SERIES_SHOW_IN_LEGEND="showInLegend";// prop infos
    HichartSeries.PROPINFOS=[{name:HichartSeries.PROP_SERIES_COLOR,category:PropCategory.SERIES,type:ColorProperty},{name:HichartSeries.PROP_SERIES_COLORS,category:PropCategory.SERIES,type:StringArrayProperty},{name:HichartSeries.PROP_SERIES_COLOR_BY_POINT,category:PropCategory.SERIES,type:BooleanProperty},{name:HichartSeries.PROP_SERIES_SHOW_IN_LEGEND,category:PropCategory.SERIES,type:BooleanProperty}];class HichartCartesianSeries extends HichartSeries{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);this._dataLabels=new HichartCartesianDataLabels(chart);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * dataLabels
         */get dataLabels(){return this._dataLabels;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getEditProps(){const props=super._getEditProps();return props.concat(HichartCartesianSeries.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartCartesianSeries.PROPINFOS);this._loadObjects([this._dataLabels],loader,src);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartCartesianSeries.PROPINFOS);this._saveObjects([this._dataLabels],target);}wrap(config){super.wrap(config);return Utils.extend(config,{dataLabels:this._dataLabels.getWrappaer()});}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartCartesianSeries.PROP_SERIES_DATA_LABELS='dataLabels';// prop infos
    HichartCartesianSeries.PROPINFOS=[{name:HichartCartesianSeries.PROP_SERIES_DATA_LABELS,category:PropCategory.DATA_LABELS,type:ModelProperty,indented:true,multiple:false,default:undefined}];class HichartSeriesCollection extends ChartSeriesCollection{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);}//-------------------------------------------------------------------------
    // IOutlineSource
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // IPropertySource
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getIds(exept){const ids=[];this._series.forEach(ser=>{if(ser.id&&ser.id!==exept){ids.push(ser.id);}});return ids;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getCollectionLabel(){return 'hichartSeries';}// series 하나가 너무 크다.
    isCollectionProp(){return false;}_createSeries(loader,src){return loader.createHichartSeries(this.chart,src);}_seriesChanged(series){var _a;(_a=this.chart)===null||_a===void 0?void 0:_a['$_seriesChanged'](series);}}var HichartLegendLayout;(function(HichartLegendLayout){HichartLegendLayout["HORIZONTAL"]="horizontal";HichartLegendLayout["VERTICAL"]="vertical";HichartLegendLayout["PROXIMATE"]="proximate";})(HichartLegendLayout||(HichartLegendLayout={}));class HichartLegend extends ChartObject{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._layout=HichartLegendLayout.HORIZONTAL;this._align=Align.CENTER;this._verticalAlign=VerticalAlign.BOTTOM;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** align */get align(){return this._align;}set align(value){if(value!==this._align){const old=this._align;this._align=value;this._changed(HichartLegend.PROP_HICHART_ALIGN,value,old);}}/** verticalAlign */get verticalAlign(){return this._verticalAlign;}set verticalAlign(value){if(value!==this._verticalAlign){const old=this._verticalAlign;this._verticalAlign=value;this._changed(HichartLegend.PROP_HICHART_VERTICAL_ALIGN,value,old);}}/** layout */get layout(){return this._layout;}set layout(value){if(value!==this._layout){const old=this._layout;this._layout=value;this._changed(HichartLegend.PROP_HICHART_LAYOUT,value,old);}}/**
         * flaoting
         */get floating(){return this._floating;}set floating(value){if(value!==this._floating){this._floating=value;this._changed(HichartLegend.PROP_HICHART_FLOATING,value,!value);}}/**
         * x
         */get x(){return this._x;}set x(value){if(value!==this._x){const old=this._x;this._x=value;this._changed(HichartLegend.PROP_HICHART_X,value,old);}}/**
         * y
         */get y(){return this._y;}set y(value){if(value!==this._y){const old=this._y;this._y=value;this._changed(HichartLegend.PROP_HICHART_Y,value,old);}}/**
         * border width
         */get borderWidth(){return this._borderWidth;}set borderWidth(value){if(value!==this._borderWidth){const old=this._borderWidth;this._borderWidth=value;this._changed(HichartLegend.PROP_HICHART_BORDER_WIDTH,value,old);}}/**
         * flaoting
         */get shadow(){return this._shadow;}set shadow(value){if(value!==this._shadow){this._shadow=value;this._changed(HichartLegend.PROP_HICHART_SHADOW,value,!value);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveLabel(){return 'legend';}_isDefaultVisible(){return false;}_getEditProps(){const props=super._getEditProps();return props.concat(HichartLegend.PROPINFOS);}_getStyleProps(){return ['backgroundColor'];}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartLegend.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartLegend.PROPINFOS);}getWrapper(){const w=super.getWrapper();this.assignProps(w,[HichartLegend.PROP_HICHART_ALIGN,HichartLegend.PROP_HICHART_VERTICAL_ALIGN,HichartLegend.PROP_HICHART_LAYOUT,HichartLegend.PROP_HICHART_FLOATING,HichartLegend.PROP_HICHART_X,HichartLegend.PROP_HICHART_Y,HichartLegend.PROP_HICHART_BORDER_WIDTH,HichartLegend.PROP_HICHART_SHADOW]);w['backgroundColor']=this.getStyle('backgroundColor');return w;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartLegend.PROP_HICHART_ALIGN="align";HichartLegend.PROP_HICHART_VERTICAL_ALIGN="verticalAlign";HichartLegend.PROP_HICHART_LAYOUT="layout";HichartLegend.PROP_HICHART_FLOATING="floating";HichartLegend.PROP_HICHART_X="x";HichartLegend.PROP_HICHART_Y="y";HichartLegend.PROP_HICHART_BORDER_WIDTH="borderWidth";HichartLegend.PROP_HICHART_SHADOW="shadow";// prop infos
    HichartLegend.PROPINFOS=[{name:HichartLegend.PROP_HICHART_ALIGN,category:PropCategory.LEGEND,type:EnumProperty,multiple:false,default:undefined,domain:Align},{name:HichartLegend.PROP_HICHART_VERTICAL_ALIGN,category:PropCategory.LEGEND,type:EnumProperty,multiple:false,default:undefined,domain:VerticalAlign},{name:HichartLegend.PROP_HICHART_LAYOUT,category:PropCategory.LEGEND,type:EnumProperty,multiple:false,default:undefined,domain:HichartLegendLayout},{name:HichartLegend.PROP_HICHART_FLOATING,category:PropCategory.LEGEND,type:BooleanProperty,multiple:false,default:undefined},{name:HichartLegend.PROP_HICHART_X,category:PropCategory.LEGEND,type:NumberProperty,multiple:false,default:undefined},{name:HichartLegend.PROP_HICHART_Y,category:PropCategory.LEGEND,type:NumberProperty,multiple:false,default:undefined},{name:HichartLegend.PROP_HICHART_BORDER_WIDTH,category:PropCategory.LEGEND,type:NumberProperty,multiple:false,default:undefined},{name:HichartLegend.PROP_HICHART_SHADOW,category:PropCategory.LEGEND,type:BooleanProperty,multiple:false,default:undefined}];/**
     * Line, bubble 시리즈 등의 marker 모델 기반.
     */class HichartSeriesMarker extends ChartObject{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(series){super(series.chart);this._series=series;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** symbol */get symbol(){return this._symbol;}set symbol(value){if(value!==this._symbol){const old=this._symbol;this._symbol=value;this._changed(HichartSeriesMarker.PROP_SYMBOL,value,old);}}/** fill color */get fillColor(){return this._fillColor;}set fillColor(value){if(value!==this._fillColor){const old=this._fillColor;this._fillColor=value;this._changed(HichartSeriesMarker.PROP_FILL_COLOR,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    canHide(){return this._series.canHideMarker();}getWrapper(){return this._getPropsWrapper({},null,{visible:'enabled'});}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getEditProps(){const props=super._getEditProps();return props.concat(HichartSeriesMarker.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartSeriesMarker.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartSeriesMarker.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartSeriesMarker.PROP_SYMBOL="symbol";HichartSeriesMarker.PROP_FILL_COLOR="fillColor";// prop infos
    HichartSeriesMarker.PROPINFOS=[{name:HichartSeriesMarker.PROP_SYMBOL,category:'marker',type:EnumProperty,indented:true,multiple:false,default:undefined,domain:HichartMarkerSymbol},{name:HichartSeriesMarker.PROP_FILL_COLOR,category:'marker',type:ColorProperty,multiple:true,default:undefined}];////////////////////////////////////////////////////////////////////////////////
    /**
     * Hichart series를 제거한다.
     */class RemoveHichartSeriesCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(series){super('Remove HichartSeries');assert(!!series);this._series=series;this._chart=series.chart;assert(!!series);this._index=this._chart.series.indexOf(series);}_doDispose(){this._chart=this._series=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** chart */get chart(){return this._chart;}/** series */get series(){return this._series;}/** index */get index(){return this._index;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._chart.removeSeries(this._series);}undo(){this._chart.addSeries(this._series,this._index);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._series;}}/**
     * Hichart series를 추가한다.
     */class AddHichartSeriesCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(chart,seriesType){super('Remove HichartSeries');assert(!!chart);this._chart=chart;this._seriesType=seriesType;}_doDispose(){this._chart=this._series=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** chart */get chart(){return this._chart;}get series(){return this._series;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._series=this._chart.addSeries(this._seriesType);}undo(){this._chart.removeSeries(this._series);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._series||this._chart;}}/**
     * Hichart axis plot line을 제거한다.
     */class RemoveHichartPlotLineCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(line){super('Remove HichartAxis PlotLine');assert(!!line);this._axis=line.collection.axis;this._line=line;this._index=this._axis.plotLines.indexOf(line);}_doDispose(){this._axis=this._line=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** axis */get axis(){return this._axis;}/** line */get line(){return this._line;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._axis.plotLines.remove(this._line);}undo(){this._axis.plotLines.add(this._line,this._index);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._axis.plotLines;}}/**
     * Hichart axis plot line을 추가한다.
     */class AddHichartPlotLineCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(axis,config){super('Add HichartAxis Plot Line');assert(!!axis);this._axis=axis;this._config=config;}_doDispose(){this._axis=this._config=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** axis */get axis(){return this._axis;}/** line */get line(){return this._line;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._line=this._axis.plotLines.add(this._config);}undo(){this._axis.plotLines.remove(this._line);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._axis.plotLines;}}/**
     * Hichart axis plot band를 제거한다.
     */class RemoveHichartPlotBandCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(band){super('Remove HichartAxis PlotBand');assert(!!band);this._axis=band.collection.axis;this._band=band;this._index=this._axis.plotBands.indexOf(band);}_doDispose(){this._axis=this._band=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** axis */get axis(){return this._axis;}/** band */get band(){return this._band;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._axis.plotBands.remove(this._band);}undo(){this._axis.plotBands.add(this._band,this._index);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._axis.plotBands;}}/**
     * Hichart axis plot band를 추가한다.
     */class AddHichartPlotBandCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(axis,config){super('Add HichartAxis Plot Band');assert(!!axis);this._axis=axis;this._config=config;}_doDispose(){this._axis=this._config=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** axis */get axis(){return this._axis;}/** band */get band(){return this._band;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._band=this._axis.plotBands.add(this._config);}undo(){this._axis.plotBands.remove(this._band);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._axis.plotBands;}}////////////////////////////////////////////////////////////////////////////////
    var CrosstabSummary;(function(CrosstabSummary){CrosstabSummary["SUM"]="sum";CrosstabSummary["AVG"]="avg";CrosstabSummary["MIN"]="min";CrosstabSummary["MAX"]="max";CrosstabSummary["COUNT"]="count";CrosstabSummary["DISTINCT"]="distinct";})(CrosstabSummary||(CrosstabSummary={}));const comparers={text:(data,field,r1,r2)=>{return Utils.compareText(data.getRowValue(r1,field),data.getRowValue(r2,field));},number:(data,field,r1,r2)=>{const v1=Utils.toNumber(data.getRowValue(r1,field),Number.MIN_VALUE);const v2=Utils.toNumber(data.getRowValue(r2,field),Number.MIN_VALUE);return v1-v2;},bool:(data,field,r1,r2)=>{return (data.getRowValue(r1,field)?1:0)-(data.getRowValue(r1,field)?1:0);}};/*
    export abstract class CrosstabObject extends ReportPageItem {

        //-------------------------------------------------------------------------
        // overriden members
        //-------------------------------------------------------------------------
        get outlineParent(): IOutlineSource { return; }
        get outlineExpandable(): boolean { return false; }
        get outlineLabel(): string { return; }

        canRemoveFrom(): boolean { return false;}
        getEditProps(): IPropInfo[] { return []; }
        getStyleProps(): IPropInfo[] { return []; }
        getSubStyleProps(prop: string): IPropInfo[] { return []; }
        getPlaceHolder(prop: IPropInfo): string { return; }
        getPropDomain(prop: IPropInfo): any[] { return; }
        setItemsProperty(sources: IPropertySource[], prop: string, value: any): void {}
        getStyle(style: string): string { return; }
        setStyle(style: string, value: string): void { return; }
        getStyleProperty(prop: string) {}
        setStyleProperty(prop: string, value: any): void {}
        isChildProp(prop: string): boolean { return false; }
        getSubStyleProperty(prop: string, style: string) {}
        setSubStyleProperty(prop: string, style: string, value: any): void {}
        setItemsSubStyleProperty(sources: IPropertySource[], prop: string, style: string, value: any): void {}
        canPropAdoptDragSource(prop: IPropInfo, source: any): boolean { return false; }
        adoptPropDragSource(prop: IPropInfo, source: any): IDropResult { return; }
        
        get displayPath(): string { return; }
        get level(): number { return 0; }
        get styles(): Styles { return; }
    }
    */class CrosstabFieldHeader extends ReportItem{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(field,source){super('');this._field=field;source&&this.load(null,source);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get field(){return this._field;}/** suffix */get suffix(){return this._suffix;}set suffix(value){if(value!==this._suffix){const old=this._suffix;this._suffix=value;this._changed(CrosstabFieldHeader.PROP_SUFFIX,value,old);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get page(){return this._field.page;}get outlineSource(){return this._field;}_getEditProps(){return CrosstabFieldHeader.PROPINFOS;}_getStyleProps(){return ['background','backgroundColor','color','fontSize','fontWeight'];}getSaveLabel(){return 'header';}_doLoad(loader,src){this._loadPropsOf(src,CrosstabFieldHeader.PROPINFOS);this._loadProps(src,"styles");}_doSave(target){this._savePropsOf(target,CrosstabFieldHeader.PROPINFOS);this._saveProp(target,'styles');}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    CrosstabFieldHeader.PROP_SUFFIX='suffix';// prop infos
    CrosstabFieldHeader.PROPINFOS=[{name:CrosstabFieldHeader.PROP_SUFFIX,category:'fieldHeader',type:StringProperty}];/**
     * 필드 summary 영역 (column 혹은 row)헤더 셀에 대한 설정.
     */class CrosstabFieldSummaryHeader extends ReportItem{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(summary,source){super('');this._summary=summary;source&&this.load(null,source);// if (!this._text) {
    //     this._text = this._getDefText();
    // }
    }//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get summary(){return this._summary;}get field(){return this._summary.field;}/** text */get text(){return this._text;}set text(value){if(value!==this._text){const old=this._text;this._text=value;this._changed(CrosstabFieldSummaryHeader.PROP_TEXT,value,old);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get page(){return this._summary.page;}get outlineSource(){return this._summary.field;}_getEditProps(){return CrosstabFieldSummaryHeader.PROPINFOS;}_getStyleProps(){return ['background','backgroundColor','color','fontSize','fontWeight'];}getSaveLabel(){return 'header';}_doLoad(loader,src){this._loadPropsOf(src,CrosstabFieldSummaryHeader.PROPINFOS);this._loadProps(src,"styles");}_doSave(target){this._savePropsOf(target,CrosstabFieldSummaryHeader.PROPINFOS);this._saveProp(target,'styles');}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    CrosstabFieldSummaryHeader.PROP_TEXT='text';// prop infos
    CrosstabFieldSummaryHeader.PROPINFOS=[{name:CrosstabFieldSummaryHeader.PROP_TEXT,category:'fieldSummryHeader',type:StringProperty}];/**
     * 필드 summary 영역 data 셀에 대한 설정.
     * row field 설정이 column field 설정보다 우선하고, column field 설정이 value field 설정보다 우선한다.
     */class CrosstabFieldSummary extends ReportItem{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(field,source){super('');this._field=field;this._header=new CrosstabFieldSummaryHeader(this,source&&source.header);source&&this.load(null,source);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get field(){return this._field;}get header(){return this._header;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get page(){return this._field.page;}get outlineSource(){return this._field;}_getEditProps(){return CrosstabFieldSummary.PROPINFOS;}_getStyleProps(){return ['background','backgroundColor','color','fontSize','fontWeight'];}getSaveLabel(){return 'summary';}_doLoad(loader,src){this._loadPropsOf(src,CrosstabFieldSummary.PROPINFOS);this._loadProps(src,"styles");}_doSave(target){this._savePropsOf(target,CrosstabFieldSummary.PROPINFOS);this._saveObject(this._header,target);this._saveProp(target,'styles');}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    // prop infos
    CrosstabFieldSummary.PROPINFOS=[{name:ReportItem.PROP_VISIBLE,category:'fieldSummary',type:BooleanProperty,default:true// }, {
    //     name: CrosstabFieldSummary.PROP_HEADER,
    //     category: 'header',
    //     type: ModelProperty,
    //     indented: true
    }];class CrosstabField extends ReportItemCollectionItem{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(collection,source){super(collection,source);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._index=-1;this.fieldIndex=-1;this._header=new CrosstabFieldHeader(this,source.header);this._summary=new CrosstabFieldSummary(this,source.summary);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** band */get band(){return this.collection.band;}/** index */get index(){return this._index;}/** field */get field(){return this._field;}set field(value){if(value!==this._field){const old=this._field;this._field=value;this._changed(CrosstabField.PROP_FIELD,value,old);}}/** header */get header(){return this._header;}/** summary */get summary(){return this._summary;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get itemType(){return 'CrosstabField';}get page(){var _a;return (_a=this.collection)===null||_a===void 0?void 0:_a.page;}get displayPath(){if(this.collection){return this.collection.displayPath+'['+this.index+']';}return Utils.uncapitalize(this.itemType);}get collection(){return super.collection;}get marqueeParent(){var _a;return (_a=this.collection)===null||_a===void 0?void 0:_a.band;}isAncestor(group){return group===this.collection.band;}getEditProps(){return CrosstabField.PROPINFOS;}_getStyleProps(){return CrosstabField.styleProps;}_changed(prop,newValue,oldValue){this.collection&&this.collection['_fieldChanged'](this);}_doLoad(src){this._loadPropsOf(src,CrosstabField.PROPINFOS);super._doLoad(src);}_doSave(target){this._savePropsOf(target,CrosstabField.PROPINFOS);super._doSave(target);this._saveObject(this._header,target);this._saveObject(this._summary,target);return target;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    CrosstabField.PROP_FIELD='field';// prop infos
    CrosstabField.PROPINFOS=[{name:CrosstabField.PROP_FIELD,category:PropCategory.FIELD,type:StringProperty}];CrosstabField.styleProps=[];class CrosstabFieldCollection extends ReportItemCollection{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(owner,type){super();this._fields=[];this._band=owner;this._type=type;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get band(){return this._band;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    load(src){this._fields=[];if(src&&src.length>0){for(let s of src){this.$_add(s,Number.MAX_SAFE_INTEGER);}}this._resetFields();}save(target){this._fields.forEach(field=>target.push(field.save({})));}contains(field){return !!this.getField(field);}getField(field){return this._fields.find(f=>f.field===field);}slice(count){return this._fields.slice(0,count);}indexOf(field){return this._fields.indexOf(field);}add(field){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;index=index<0?this._fields.length:index;const f=this.$_add(field,index);if(f){this._resetFields();this._itemAdded(f);}return f;}removeAt(index){if(index>=0&&index<this._fields.length){const f=this._fields.splice(index,1)[0];this._resetFields();this._itemRemoved(f,this._band);return true;}}remove(field){this.removeAt(this.indexOf(field));}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get owner(){return this._band;}get count(){return this._fields.length;}get items(){return this._fields;}get outlineLabel(){return "[".concat(Utils.capitalize(this._type),"]");}get outlineParent(){return this._band;}get outlineExpandable(){return true;}get outlineItems(){this._fields.forEach((field,i)=>field.outlineOrder=i);return this._fields;}get page(){var _a;return (_a=this._band)===null||_a===void 0?void 0:_a.page;}get displayPath(){return this._band?this._band.displayPath+'.'+this._type:this._type;}get level(){return this._band?this._band.level+1:0;}get(index){return this._fields[index];}getSaveType(){return this._type;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    $_add(src,index){const field=src instanceof CrosstabField?src:this._createField(src);this._fields.splice(Math.min(index,this._fields.length),0,field);return field;}_doMoveItem(from,to){// TODO: 구현할 것.
    return false;}_resetFields(){this._fields.forEach((field,i)=>{field['_parent']=this;field['_index']=i;});this._fieldChanged(null);}_fieldChanged(field){this._band._fieldsChanged(field);}}class CrosstabRowField extends CrosstabField{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get itemType(){return 'RowField';}getCollectionLabel(){return 'rowField';}}class CrosstabRowFieldCollection extends CrosstabFieldCollection{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(owner){super(owner,'rowFields');}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _createField(src){return new CrosstabRowField(this,src);}}class CrosstabColumnField extends CrosstabField{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // // props
    // static readonly PROP_SUMMARY = 'summary';
    // // prop infos
    // static readonly PROPINFOS: IPropInfo[] = [{
    //     name: CrosstabColumnField.PROP_SUMMARY,
    //     category: 'summary',
    //     type: ModelProperty,
    //     indented: true
    // }];
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(collection,source){super(collection,source);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get itemType(){return 'ColumnField';}getCollectionLabel(){return 'columnField';}// getEditProps(): IPropInfo[] {
    //     return super.getEditProps().concat(CrosstabColumnField.PROPINFOS);
    // }
    _doLoad(src){super._doLoad(src);// this._loadPropsOf(src, CrosstabColumnField.PROPINFOS);
    }_doSave(target){super._doSave(target);return target;}}class CrosstabColumnFieldCollection extends CrosstabFieldCollection{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(owner){super(owner,'columnFields');}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _createField(src){return new CrosstabColumnField(this,src);}}class CrosstabValueField extends CrosstabField{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(collection,source){super(collection,source);this._value=this._value||CrosstabSummary.SUM;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** value */get value(){return this._value;}set value(value){if(value!==this._value){const old=this._value;this._value=value;this._changed(CrosstabValueField.PROP_VALUE,value,old);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get itemType(){return 'ValueField';}getCollectionLabel(){return 'valueField';}getEditProps(){return super.getEditProps().concat(CrosstabValueField.PROPINFOS);}_doLoad(src){super._doLoad(src);this._loadPropsOf(src,CrosstabValueField.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,CrosstabValueField.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    CrosstabValueField.PROP_VALUE='value';// prop infos
    CrosstabValueField.PROPINFOS=[{name:CrosstabValueField.PROP_VALUE,category:PropCategory.FIELD,type:EnumProperty,domain:CrosstabSummary,default:CrosstabSummary.SUM}];class CrosstabValueFieldCollection extends CrosstabFieldCollection{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(owner){super(owner,'valueFields');}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _createField(src){return new CrosstabValueField(this,src);}}class CrosstabRec{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(keys,rows){this.sum=(data,field)=>{let v=0;for(let r of this._rows){v+=data.getRowValue(r,field);}return v;};this.count=(data,field)=>{return this._rows.length;};this.min=(data,field)=>{const rows=this._rows;let v=data.getRowValue(rows[0],field);for(let i=rows.length-1;i>0;i--){v=Math.min(v,data.getRowValue(rows[i],field));}return v;};this.max=(data,field)=>{const rows=this._rows;let v=data.getRowValue(rows[0],field);for(let i=rows.length-1;i>0;i--){v=Math.max(v,data.getRowValue(rows[i],field));}return v;};this.avg=(data,field)=>{let v=0;for(let r of this._rows){v+=data.getRowValue(r,field);}return v/this._rows.length;};this._keys=keys.slice(0);this._rows=rows.slice(0);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get rowCount(){return this._rows.length;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getKey(field){return this._keys[field];}getSummary(data,field,exp){return this[exp](data,field);// const s = this._summary[field] || (this._summary[field] = {});
    // let v = s[value];
    // if (typeof v === 'undefined') {
    //     s[value] = v = this[value](data, field);
    // }
    // return v;
    }}class RecCollection{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(band){this._recs=[];this._band=band;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get count(){return this._recs.length;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getKey(rec,field){return this._recs[rec].getKey(field);}getRec(index){return this._recs[index];}getRecs(){let start=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let end=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Number.MAX_SAFE_INTEGER;return this._recs.slice(Math.max(0,start),end);}setFilters(filters){this._filters=filters&&filters.length>0?filters.slice(0):null;}build(data){const fields=this._band.getGroupFields();fields.forEach(fld=>{fld.fieldIndex=data.getFieldIndex(fld.field);fld.dataType=data.getField(fld.fieldIndex).dataType;});this._recs=[];const rows=this.$_collectRows(data);this.$_sortRows(data,rows,fields);this.$_buildRecs(data,rows,fields);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_collectRows(data){const select=r=>{for(let filter of this._filters){if(!filter.select(data,r))return false;}return true;};const rows=[];if(this._filters){for(let r=0;r<data.rowCount;r++){if(select(r)){rows.push(r);}}}else {for(let i=0;i<data.rowCount;i++){rows.push(i);}}return rows;}$_sortRows(data,rows,fields){rows.sort((r1,r2)=>{let checkRow=false;let diff=0;for(let i=0,cnt=fields.length;i<cnt;i++){const f=fields[i].fieldIndex;diff=comparers[data.getField(f).dataType](data,f,r1,r2);if(diff!==0){checkRow=cnt===i+1;break;}}diff=diff===0&&checkRow?r1-r2:diff;return diff;});}$_buildRecs(data,rows,fields){const vals=[];let i=0;let r=rows[i++];const list=[r];for(let f=0;f<fields.length;f++){vals[f]=data.getRowValue(r,fields[f].fieldIndex);}while(i<rows.length){let diff=false;r=rows[i];for(let f=0;f<fields.length;f++){if(vals[f]!=data.getRowValue(r,fields[f].fieldIndex)){diff=true;break;}}if(diff){this._recs.push(new CrosstabRec(vals,list));list.length=0;for(let f=0;f<fields.length;f++){vals[f]=data.getRowValue(r,fields[f].fieldIndex);}}list.push(r);i++;}if(list.length>0){this._recs.push(new CrosstabRec(vals,list));}}}let _hash_=0;class CrosstabColumn{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(field,value){//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.hash=_hash_++;this._children=[];this._field=field;this._value=value;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get field(){return this._field;}get value(){return this._value;}get count(){return this._children.length;}get children(){return this._children.slice(0);}get level(){return this.parent?this.parent.level+1:-1;}get isLeaf(){return this._children.length===0;}get leafCount(){return this._children.length*this._children[0].leafCount;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getChild(index){return this._children[index];}clear(){this._children=[];}add(column){let force=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(column&&(force||this._children.indexOf(column)<0)){this._children.push(column);column.parent=this;}}addSummary(column){this._children.unshift(column);column.parent=this;}sort(){if(this._children.length>1){const bool=this._children[0].field.dataType==='bool';this._children=this._children.sort((c1,c2)=>{if(bool){return (c1.value?1:0)-(c2.value?1:0);}else {return c1.value-c2.value;}});}}getHeader(){const header=this._field.header;let s=this._value;if(header.suffix){s+=header.suffix;}return s;}}class CrosstabRootColumn extends CrosstabColumn{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){super(null,null);}}class CrosstabLeafColumn extends CrosstabColumn{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(field,valueField,value){super(field,value);this._valueField=valueField;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get valueField(){return this._valueField;}get leafCount(){return 1;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getHeader(){const header=this._valueField.header;let s=this._valueField.field;if(header.suffix){s+=header.suffix;}return s;}}class CrosstabSummaryColumn extends CrosstabColumn{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(summary){super(summary.field,undefined);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get summary(){return this._summary;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getHeader(){return this._field.summary.header.text||'요약';}}class CrosstabSummaryLeafColumn extends CrosstabLeafColumn{//-------------------------------------------------------------------------
    // field
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(summary,valueField,value){super(summary.field,valueField,value);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getHeader(){const header=this._valueField.summary.header;let s=header.text||this._valueField.field;return s;}}class ColumnCollection{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(band){this._root=new CrosstabRootColumn();this._leafs=[];this._band=band;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get root(){return this._root;}get count(){return this._root.count;}get leafCount(){return this._leafs.length;}get levels(){return this._leafs.length>0?this._leafs[0].level+1:0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    build(recs){this._root.clear();this._leafs=[];if(this._band.columnFields.count>0){this.$_collectColumns(recs,this._root,0);}}get(index){return this._root.getChild(index);}getLeaf(index){return this._leafs[index];}getColumns(parent,columns){const cols=[];columns.push(cols);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_collectColumns(recs,parent,col){const band=this._band;const rowFields=band.rowFields;const colFields=band.columnFields;const valFields=band.valueFields;const field=band.getColumnField(col);const fld=rowFields.count+col;const leaf=col==colFields.count-1;const recCount=recs.count;const colMap={};// values columns
    if(!(parent instanceof CrosstabSummaryColumn)){for(let r=0;r<recCount;r++){const v=recs.getKey(r,fld);let column=colMap[v];if(!column){column=new CrosstabColumn(field,v);parent.add(column,true);colMap[v]=column;}// band.columns[r] = column;
    parent.add(column);}}parent.sort();// summary columns
    const colField=colFields.get(col);if(colField.summary.visible){const column=new CrosstabSummaryColumn(colField.summary);parent.addSummary(column);}// deep
    for(let c of parent.children){if(leaf){for(let i=0;i<valFields.count;i++){const vf=valFields.get(i);const v=c.value;const lc=c instanceof CrosstabSummaryColumn?new CrosstabSummaryLeafColumn(c.field.summary,vf,v):new CrosstabLeafColumn(c.field,vf,v);c.add(lc,true);this._leafs.push(lc);}}else {//} if (!(c instanceof CrosstabSummaryColumn)) {
    this.$_collectColumns(recs,c,col+1);//, c.rows);
    }}}}class CrosstabRowBase{}/**
     * rowField들이 동일한 행들.
     */class CrosstabRow extends CrosstabRowBase{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(band,values,recs){super();this._map={};this._values=values.slice(0);this._recs=recs.slice(0);if(recs){const n=band.rowFields.count;const leafs=band._columns._leafs;for(let col of leafs){const rec=recs[col.hash-n];const c=n+col.field.index;if(rec&&rec.getKey(c)===col.value){this._map[col.hash]=rec;}else {for(let rec of recs){if(rec.getKey(c)===col.value){this._map[col.hash]=rec;break;}}}}}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    slice(count){return this._values.slice(0,count);}getRec(index){return this._recs[index];}getValue(index){return this._values[index];}getColumnRec(column){return this._map[column.hash];}getSummary(data,column,field,value){return;}}class CrosstabSummaryRow extends CrosstabRowBase{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(fields,rows){super();this._fields=fields;this._rows=rows.slice(0);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get fields(){return this._fields;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    slice(count){return this._rows[0].slice(count);}getValue(index){if(index>=this._fields.length-1)return this._rows[0].getValue(this._fields.length-1);return this._rows[0].getValue(index);}getColumnRec(column){return this._rows[0].getColumnRec(column);}}class CrosstabTotalRow extends CrosstabRowBase{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(rows){super();this._rows=rows;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    slice(count){return [];}getValue(index){return '전체 요약';}getColumnRec(column){return;}}class RowCollection{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(band){this._rows=[];this._band=band;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get rowCount(){return this._rows.length;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getRow(index){return this._rows[index];}build(data,recs){this._rows=[];if(this._band.columnFields.count>0&&recs.count>0){this.$_collectRows(data,recs);this._rows.unshift(new CrosstabTotalRow(this._rows));}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_collectRows(data,recs){const band=this._band;const rowFields=band.rowFields;const recCount=recs.count;const fields=[];const rowRecs=[];let rows=[];let pvals=[];let vals=[];let r=0;rowFields.forEach((f,i)=>{fields.push(data.getFieldByName(f.field));pvals.push(recs.getKey(r,i));});rowRecs.push(recs.getRec(r++));while(r<recCount){const rec=recs.getRec(r);let diff=false;for(let i=0;i<rowFields.count;i++){vals[i]=rec.getKey(i);}for(let i=0;i<rowFields.count;i++){if(vals[i]!==pvals[i]){diff=true;break;}}if(diff){rows.push(new CrosstabRow(band,pvals,rowRecs));rowRecs.length=0;pvals=vals.slice(0);}rowRecs.push(rec);r++;}rows.push(new CrosstabRow(band,pvals,rowRecs));// summary rows
    for(let i=rowFields.count-2;i>=0;i--){rows=this.$_collectSummaryRows(rows,rowFields.slice(i+1));}this._rows=rows;}$_collectSummaryRows(rows,fields){const nRow=rows.length;const nFld=fields.length;const sRows=[];let rPrev=0;let r=0;let row=rows[r];let list=[];let pvals;let vals;let sr;pvals=rows[r].slice(nFld);while(r<nRow){let diff=false;row=rows[r];//if (row instanceof CrosstabRow) {
    vals=row.slice(nFld);for(let i=0;i<nFld;i++){if(vals[i]!==pvals[i]){diff=true;break;}}if(diff){sr=new CrosstabSummaryRow(fields,list);sRows.push({row:sr,start:rPrev,end:r});list.length=0;pvals=vals;rPrev=r;}if(row instanceof CrosstabRow){list.push(row);}//}
    r++;}sr=new CrosstabSummaryRow(fields,list);sRows.push({row:sr,start:rPrev,end:r});// merge
    const newRows=[];for(let s of sRows){newRows.push(s.row);for(let i=s.start;i<s.end;i++){newRows.push(rows[i]);}}return newRows;}}/**
     * Crosstab band topLeft 모서리 셀에 표시되는 내용에 대한 모델.
     */class CrosstabBandTitle extends ReportItem{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(band){super(null);this._band=band;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** text */get text(){return this._text;}set text(value){if(value!==this._text){const old=this._text;this._text=value;this._changed(CrosstabBandTitle.PROP_TEXT,value,old);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getEditProps(){return [].concat(CrosstabBandTitle.PROPINFOS);}_getStyleProps(){return CrosstabBandTitle.styleProps;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,CrosstabBandTitle.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,CrosstabBandTitle.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    CrosstabBandTitle.PROP_TEXT='text';// prop infos
    CrosstabBandTitle.PROPINFOS=[{name:CrosstabBandTitle.PROP_TEXT,category:PropCategory.TITLE,type:StringProperty}];CrosstabBandTitle.styleProps=['background','backgroundColor','color','fontSize','fontWeight','fontFamily'];class CrosstabNullValue extends ReportItem{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(band){super(null);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._text='0';this._band=band;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** text */get text(){return this._text;}set text(value){if(value!==this._text){const old=this._text;this._text=value;this._changed(CrosstabNullValue.PROP_TEXT,value,old);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getEditProps(){return [].concat(CrosstabNullValue.PROPINFOS);}_getStyleProps(){return CrosstabNullValue.styleProps;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,CrosstabNullValue.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,CrosstabNullValue.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    CrosstabNullValue.PROP_TEXT='text';// prop infos
    CrosstabNullValue.PROPINFOS=[{name:CrosstabNullValue.PROP_TEXT,category:'nullValue',type:StringProperty}];CrosstabNullValue.styleProps=['background','backgroundColor','color','fontSize','fontWeight','fontFamily'];/**
     * Crosstab band
     */class CrosstabBand extends ReportGroupItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);this._recs=new RecCollection(this);this._columns=new ColumnCollection(this);this._rows=new RowCollection(this);this.pageNo=0;this.rowIndex=NaN;this._calcSummary={sum:vals=>{let s=0;for(let v of vals)s+=v;return s;},count:vals=>{let s=0;for(let v of vals)s+=v;return s;},avg:vals=>{let s=0;for(let v of vals)s+=v;return s/vals.length;},min:vals=>{let s=vals[0];for(let i=1;i<vals.length;i++)s=Math.min(s,vals[i]);return s;},max:vals=>{let s=vals[0];for(let i=1;i<vals.length;i++)s=Math.max(s,vals[i]);return s;}};this._title=new CrosstabBandTitle(this);this._nullValue=new CrosstabNullValue(this);this._rowFields=new CrosstabRowFieldCollection(this);this._columnFields=new CrosstabColumnFieldCollection(this);this._valueFields=new CrosstabValueFieldCollection(this);this.width='100%';}static isFieldCell(item){return item instanceof CrosstabField||item instanceof CrosstabFieldHeader||item instanceof CrosstabFieldSummary||item instanceof CrosstabFieldSummaryHeader;}static getFieldOf(cell){if(cell instanceof CrosstabField){return cell;}else {return cell.field;}}static getBandOf(cell){return this.getFieldOf(cell).band;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * Cross table 생성시 사용될 원본 데이터 최대 행 수.
         */get maxRowCount(){return this._maxRowCount;}set maxRowCount(value){if(isNaN(value))value=undefined;else value=value>>0;if(value!==this._maxRowCount){const old=this._maxRowCount;this._maxRowCount=value;this._changed(CrosstabBand.PROP_MAX_ROW_COUNT,value,old);}}/**
         * title
         */get title(){return this._title;}/**
         * null value
         */get nullValue(){return this._nullValue;}/** rowFields */get rowFields(){return this._rowFields;}/** columnFields */get columnFields(){return this._columnFields;}/** valueFields */get valueFields(){return this._valueFields;}get rows(){return this._rows;}get bandData(){return this.page.report.data.get(this.data);}get columnLevels(){return this._columns.levels;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    containsField(field){return this._rowFields.contains(field)||this._columnFields.contains(field)||this._valueFields.contains(field);}getRowField(index){return this._rowFields.get(index);}getColumnField(index){return this._columnFields.get(index);}getGroupFields(){return [].concat(this._rowFields.items,this._columnFields.items);}build(){var _a;const dp=(_a=this.page)===null||_a===void 0?void 0:_a.report.data;if(dp){const data=dp.get(this.data);if(!data)return;for(let f of this._rowFields.items){// f.index = data.getFieldIndex(f.field);
    }for(let f of this._columnFields.items){// f.index = data.getFieldIndex(f.field);
    }for(let f of this._valueFields.items){f.fieldIndex=data.getFieldIndex(f.field);}this._recs.build(data);this._columns.build(this._recs);this._rows.build(data,this._recs);}}// c는 합계 컬럼도 포함한 것이다.
    getCellValue(data,r,c){if(data){const row=this._rows.getRow(r);const col=this._columns.getLeaf(c);const fld=col.valueField.fieldIndex;const exp=col.valueField.value;if(row instanceof CrosstabTotalRow||row instanceof CrosstabSummaryRow){const rows=row._rows;if(col instanceof CrosstabSummaryLeafColumn){let vals=[];rows.forEach(row=>{if(row instanceof CrosstabRow){const recs=row._recs;recs.forEach(rec=>{vals.push(rec.getSummary(data,fld,exp));});}});return this._calcSummary[exp](vals);}else {let vals=[];rows.forEach(row=>{if(row instanceof CrosstabRow){const rec=row.getColumnRec(col);const exp=col.valueField.value;vals.push(rec?rec.getSummary(data,fld,exp):0);}});return this._calcSummary[exp](vals);}}else if(row instanceof CrosstabRow){if(col instanceof CrosstabSummaryLeafColumn){const recs=row._recs;let vals=[];recs.forEach(rec=>{vals.push(rec.getSummary(data,fld,exp));});return this._calcSummary[exp](vals);}else {const rec=row.getColumnRec(col);return rec?rec.getSummary(data,fld,exp):NaN;}}}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'crosstab';}get outlineLabel(){return '[Crosstab Band]';}get outlineItems(){return [this._rowFields,this._columnFields,this._valueFields].concat(super.outlineItems);}get isBand(){return true;}_datable(){return true;}_getEditProps(){const props=super._getEditProps();return props.concat(CrosstabBand.PROPINFOS);}isAncestorOf(item){return super.isAncestorOf(item)||item===this._rowFields||item===this._columnFields||item===this._valueFields;}_doLoad(loader,src){super._doLoad(loader,src);if(src){['row','column','value'].forEach(prop=>{const flds="".concat(prop,"Fields");if(src.hasOwnProperty(flds)){this["_".concat(flds)].load(src[flds]);}});this._title.load(null,src.title);this._nullValue.load(null,src.nullValue);}}_doSave(target){super._doSave(target);this._title.save(target.title={});this._nullValue.save(target.nullValue={});['row','column','value'].forEach(prop=>{const flds="".concat(prop,"Fields");this["_".concat(flds)].save(target[flds]=[]);});}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _fieldsChanged(field){var _a;(_a=this.page)===null||_a===void 0?void 0:_a["$_itemChanged"](this,'field',field,field);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    CrosstabBand.PROP_TITLE="title";CrosstabBand.PROP_NULL_VALUE='nullValue';CrosstabBand.PROP_MAX_ROW_COUNT="maxRowCount";// prop infos
    CrosstabBand.PROPINFOS=[{name:CrosstabBand.PROP_TITLE,category:PropCategory.TITLE,type:ModelProperty,indented:true},{name:CrosstabBand.PROP_NULL_VALUE,category:'nullValue',type:ModelProperty,indented:true},{name:CrosstabBand.PROP_MAX_ROW_COUNT,category:PropCategory.DATA,type:NumberProperty}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    CrosstabBand.$_ctor='CrosstabBand';////////////////////////////////////////////////////////////////////////////////
    /**
     * CrosstabBand에 field를 추가한다.
     */class AddCrosstabFieldCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(collection,index,config){super('Add Crosstab Field');assert(!!collection);this._collection=collection;this._index=index;this._config=config;}_doDispose(){this._collection=this._field=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** band */get band(){return this._collection.band;}/** collection */get collection(){return this._collection;}/** index */get index(){return this._index;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._field=this._collection.add(this._config,this._index);}undo(){this._collection.remove(this._field);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    get source(){return this._field;}}/**
     * Crosstab band field를 제거한다.
     */class RemoveCrosstabFieldCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(field){super('Remove Crosstab Field');assert(!!field);this._field=field;this._collection=field.collection;this._index=field.index;}_doDispose(){this._field=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** band */get band(){return this._field.band;}get collection(){return this._collection;}/** field */get field(){return this._field;}/** index */get index(){return this._index;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._collection.removeAt(this._index);}undo(){this._collection.add(this._field,this._index);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._field;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Report item을 제거한다.
     */class RemoveItemCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item){super('Remove Item');assert(!!item);this._parent=item.outlineParent instanceof CellGroup?item.outlineParent.outlineParent:item.outlineParent;assert(!!this._parent);this._item=item;this._index=this._parent.indexOf(item);}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static createCommands(items){if(items&&items.length>0){const cmds=[];for(let item of items){if(item&&item.canRemoveFrom()){let cmd;if(item instanceof TableRow){cmd=new RemoveTableRowCommand(item);}else if(item instanceof TableBandColumn){cmd=new RemoveTableBandColumnCommand(item);}else if(item instanceof TableColumn){cmd=new RemoveTableColumnCommand(item);}else if(item instanceof HichartSeries){cmd=new RemoveHichartSeriesCommand(item);}else if(item instanceof HichartAxisPlotLine){cmd=new RemoveHichartPlotLineCommand(item);}else if(item instanceof HichartAxisPlotBand){cmd=new RemoveHichartPlotBandCommand(item);}else if(item instanceof ReportItem){cmd=new RemoveItemCommand(item);}else if(item instanceof CrosstabField){cmd=new RemoveCrosstabFieldCommand(item);}cmd&&cmds.push(cmd);}}return cmds.length>0?cmds:null;}}_doDispose(){this._parent=this._item=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** parent */get parent(){return this._parent;}/** item */get item(){return this._item;}/** index */get index(){return this._index;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    undo(){this._parent.add(this._item,this._index);}redo(redoing){this._parent.remove(this._item);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._item;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * 하나 이상의 Report item들을 제거한다.
     */class RemoveItemsCommand extends EditCommandGroup{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(items){super('Remove Items',RemoveItemCommand.createCommands(items));}}////////////////////////////////////////////////////////////////////////////////
    /**
     * 리포트 페이지 모델. 하나 이상의 section들로 구성된다.
     *
     * 1. band는 body의 최상위 항목으로만 추가될 수 있다. 즉, 다른 항목의 자식이 될 수 없다.
     */class ReportPage extends ReportGroupItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(report){super("reportPage");this._events=new EventAware();this._nameMap={};this._loading=false;this._removing=false;this._report=report;this.add(this._reportHeader=new ReportHeader());this.add(this._reportFooter=new ReportFooter());this.add(this._pageHeader=new PageHeader());this.add(this._pageFooter=new PageFooter());this.add(this._body=new PageBody());this.add(this._backItems=new PageItemContainer('pageBackItems','Back Items'));this.add(this._frontItems=new PageItemContainer('pageFrontItems','Front Items'));this._sections=[this._pageHeader,this._reportHeader,this._body,this._backItems,this._frontItems,this._reportFooter,this._pageFooter];}//-------------------------------------------------------------------------
    // IEventAware
    //-------------------------------------------------------------------------
    addListener(listener){return this._events.addListener(listener);}removeListener(listener){return this._events.removeListener(listener);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * report
         */get report(){return this._report;}/**
         * reportHeader
         */get reportHeader(){return this._reportHeader;}/**
         * reportFooter
         */get reportFooter(){return this._reportFooter;}/**
         * pageHeader
         */get pageHeader(){return this._pageHeader;}/**
         * pageFooter
         */get pageFooter(){return this._pageFooter;}/**
         * body
         */get body(){return this._body;}get backContainer(){return this._backItems;}/**
         * backItems
         */get backItems(){return this._backItems.items;}get frontContainer(){return this._frontItems;}/**
         * frontItems
         */get frontItems(){return this._frontItems.items;}/**
         * loading
         */get loading(){return this._loading;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getItem(name){return this._nameMap[name];}// private $_itemByHash(hash: string): ReportItem {
    //     return this._hashMap[hash];
    // }
    removeItems(commands,items){items=items&&items.filter(item=>item.canRemoveFrom());if(!items||items.length==0)return 0;const items2=items.sort((item1,item2)=>{return item1.level-item2.level;});for(let i=items2.length-1;i>0;i--){const item=items2[i];for(let j=i+1;j>=0;j--){const p=items2[j];if(p instanceof ReportGroupItem){if(item instanceof ReportItem&&item.isAncestor(p)){items2.splice(i,1);break;}}}}// items2가 삭제되는 중에 다른 아이템들이 동시에 삭제될 수 있다.
    // 개별 event들이 outline 등에 반영되도록 한다.
    //this._removing = true;
    try{if(commands){commands.execute(new RemoveItemsCommand(items2));}else {new RemoveItemsCommand(items2).run();}//this._fireItemsRemoved(items2);
    }finally{//this._removing = false;
    }}search(key,options,results){if(!options.caseSensitive){key=key.toLowerCase();}this._sections.forEach(section=>section.search(key,options,results));}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return 'Page';}get pathLabel(){return 'page';}get page(){return this;}canMove(){return false;}getEditProps(){return [];}_getStyleProps(){return ['fontFamily','fontSize','fontWeight','color','backgroundColor'];}canDelete(){return false;}_doLoad(loader,src){this._loading=true;try{this._loadProps(src,'styles');src.hasOwnProperty("reportHeader")&&this._reportHeader.load(loader,src.reportHeader);src.hasOwnProperty("reportFooter")&&this._reportFooter.load(loader,src.reportFooter);src.hasOwnProperty("pageHeader")&&this._pageHeader.load(loader,src.pageHeader);src.hasOwnProperty("pageFooter")&&this._pageFooter.load(loader,src.pageFooter);src.hasOwnProperty("body")&&this._body.load(loader,src.body);src.hasOwnProperty("backItems")&&this._backItems.load(loader,src.backItems);src.hasOwnProperty("frontItems")&&this._frontItems.load(loader,src.frontItems);}finally{this._loading=false;}}_ignoreItems(){return true;}_doSave(target){let obj;if(this._pageHeader.save(obj={}))target['pageHeader']=obj;if(this._reportHeader.save(obj={}))target['reportHeader']=obj;if(this._reportFooter.save(obj={}))target['reportFooter']=obj;if(this._pageFooter.save(obj={}))target['pageFooter']=obj;if(this._body.save(obj={}))target['body']=obj;if(this._backItems.count>0){this._backItems.save(target['backItems']=[]);}if(this._frontItems.count>0){this._frontItems.save(target['frontItems']=[]);}}canResize(dir){return false;}getAllItems(root){let all=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(root){return root.getDescendants(all);}else {let items=[];this._sections.forEach(sec=>items=items.concat(sec.getDescendants(all)));return items;}}collectInvalids(report,invalids){this._sections.forEach(sec=>sec.collectInvalids(report,invalids));}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_itemAdded(item,index,silent){this.$_addItem(item);this._fireItemAdded(item,index,silent);}$_addItem(item){if(item instanceof ReportItem){if(item.name){this._nameMap[item.name]=item;}// this._hashMap[item.shash] = item;
    }if(item instanceof ReportGroupItem){for(let child of item["_items"]){this.$_addItem(child);}}}$_itemsAdded(items,index){items.forEach(item=>this.$_addItem(item));this._fireItemsAdded(items,index);}$_itemRemoved(item,oldParent){this.$_removeItem(item);if(!this._removing){this._fireItemRemoved(item,oldParent);}}$_removeItem(item){if(item instanceof ReportItem){item.name&&delete this._nameMap[item.name];// delete this._hashMap[item.shash];
    }if(item instanceof ReportGroupItem){for(let child of item["_items"]){this.$_removeItem(child);}}}$_itemsRemoved(items){for(let item of items){this.$_removeItem(item);}if(!this._removing){this._fireItemsRemoved(items);}}$_itemChanged(item,prop,value,oldValue){this._fireItemChanged(item,prop,value,oldValue);}$_collectionChanged(collection){this._fireCollectionChanged(collection);}/**
         * ReportItem.name에서 호출한다.
         */$_nameChanged(item,oldName){if(oldName)delete this._nameMap[oldName];if(item.name)this._nameMap[item.name]=item;}/**
         * Report.onDesignDataManagerNameChanged에서 호출한다.
         */$_dataNameChanged(data,oldName){this._sections.forEach(s=>s.dataNameChanged(data,oldName));}/**
         * Report.onDesignDataManagerFieldNameChanged 호출한다.
         */$_dataFieldNameChanged(data,newName,oldName){this._sections.forEach(s=>s.dataFieldNameChanged(data,newName,oldName));}//-------------------------------------------------------------------------
    // event members
    //-------------------------------------------------------------------------
    _fireItemAdded(item,index,silent){this._events.fireEvent(ReportPage.ITEM_ADDED,item,index,silent);}_fireItemsAdded(items,index){this._events.fireEvent(ReportPage.ITEMS_ADDED,items,index);}_fireItemRemoved(item,oldParent){this._events.fireEvent(ReportPage.ITEM_REMOVED,item,oldParent);}_fireItemsRemoved(items){this._events.fireEvent(ReportPage.ITEMS_REMOVED,items);}_fireItemChanged(item,prop,value,oldValue){this._events.fireEvent(ReportPage.ITEM_CHANGED,item,prop,value,oldValue);}_fireCollectionChanged(collection){this._events.fireEvent(ReportPage.COLLECTION_CHANGED,collection);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // events
    ReportPage.ITEM_ADDED="onPageItemAdded";ReportPage.ITEMS_ADDED="onPageItemsAdded";ReportPage.ITEM_REMOVED="onPageItemRemoved";ReportPage.ITEMS_REMOVED="onPageItemsRemoved";ReportPage.ITEM_CHANGED="onPageItemChanged";ReportPage.COLLECTION_CHANGED='onPageCollectionChanged';//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ReportPage.$_ctor='ReportPage';/**
     * page body item container.
     */class PageBodyItems extends ColumnBoxContainer{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){// return 'Body Items';
    return 'Items';}canContainsBand(){return true;}canContainsBandGroup(){return true;}canResize(dir){return false;}canMove(){return false;}needDesignWidth(){return false;}needDesignHeight(){return false;}_boundable(){return false;}_getStyleProps(){return PageBodyItems.STYLE_PROPS;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    PageBodyItems.STYLE_PROPS=['backgroundColor'];/**
     * Report header/footer, Page header/footer를 제외한 리포트 페이지 영역.
     */class PageBody extends PageSection{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){super("pageBody");this.add(this._bodyItems=new PageBodyItems('bodyItems'));this.add(this._backItems=new PageItemContainer('pageBackItems','Back Items'));this.add(this._frontItems=new PageItemContainer('pageFrontItems','Front Items'));}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * backItems
         */get backItems(){return this._backItems.items;}get backItemsContainer(){return this._backItems;}/**
         * frontItems
         */get frontItems(){return this._frontItems.items;}get frontItemsContainer(){return this._frontItems;}/**
         * items
         */get bodyItems(){return this._bodyItems.items;}get itemsContainer(){return this._bodyItems;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return 'Body';}canParentOf(itemType){return false;}canResize(dir){return false;}_doLoad(loader,src){if(src.hasOwnProperty('items')){this._bodyItems.load(loader,{items:src.items});this._bodyItems.loadProps(src);}src.hasOwnProperty("backItems")&&this._backItems.load(loader,src.backItems);//{ items: src.backItems });
    src.hasOwnProperty("frontItems")&&this._frontItems.load(loader,src.frontItems);// { items: src.frontItems });
    }_loadItems(loader,src){// 위에서 items를 _bodyItems로 읽어 들였다.
    }_ignoreItems(){return true;}_doSave(target){if(this._bodyItems.count>0){this._bodyItems.save(target);delete target['type'];delete target['name'];}if(this._backItems.count>0){this._backItems.save(target['backItems']=[]);}if(this._frontItems.count>0){this._frontItems.save(target['frontItems']=[]);}}canRemove(item){return false;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    PageBody.$_ctor='PageBody';////////////////////////////////////////////////////////////////////////////////
    var ImageFit;(function(ImageFit){ImageFit["CONTAINT"]="contain";ImageFit["COVER"]="cover";})(ImageFit||(ImageFit={}));var ImagePosition;(function(ImagePosition){ImagePosition["TOP"]="top";ImagePosition["BOTTOM"]="bottom";ImagePosition["LEFT"]="left";ImagePosition["RIGHT"]="right";ImagePosition["CENTER"]="center";})(ImagePosition||(ImagePosition={}));/**
     * 이미지를 표시한다.
     * value 속성으로 지정된 data 위치가 타당하면 그 값을,
     * 아니면 url 속성으로 지정한 위치의 이미지를 표시한다.
     */class ImageItem extends ReportItem{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);this._imageFit=ImageFit.COVER;this._imagePosition=ImagePosition.CENTER;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * image url.
         */get url(){return this._url;}set url(value){if(value!=this._url){const old=this._url;this._url=value;this._changed(ImageItem.PROP_URL,value,old);}}/**
         * asset image data path.
         */get image(){return this._image;}set image(value){if(value!=this._image){const old=this._image;this._image=value;this._changed(ImageItem.PROP_IMAGE,value,old);}}get imageFit(){return this._imageFit;}set imageFit(value){if(value!=this._imageFit){const old=this._imageFit;this._imageFit=value;this._changed(ImageItem.PROP_IMAGE_FIT,value,old);}}get imagePosition(){return this._imagePosition;}set imagePosition(value){if(value!=this._imagePosition){const old=this._imagePosition;this._imagePosition=value;this._changed(ImageItem.PROP_IMAGE_POSITION,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'image';}get outlineLabel(){return '[Image]';}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.width=52;this.height=52;}_getEditProps(){const props=super._getEditProps();return props.concat(ImageItem.PROPINFOS);}_getStyleProps(){return ImageItem.STYLE_PROPS;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,ImageItem.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,ImageItem.PROPINFOS);}canRotate(){return true;}canAdoptDragSource(source){return source instanceof ImageAsset;}adoptDragSource(source){if(source instanceof ImageAsset){return {type:DropResultType.PROP,prop:'image',value:source.name};}}canPropAdoptDragSource(prop,source){return prop.name==='image'&&source instanceof ImageAsset;}adoptPropDragSource(prop,source){if(prop.name==='image'&&source instanceof ImageAsset){return {type:DropResultType.PROP,prop:'image',value:source.name};}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    ImageItem.PROP_URL="url";ImageItem.PROP_IMAGE="image";ImageItem.PROP_IMAGE_FIT="imageFit";ImageItem.PROP_IMAGE_POSITION="imagePosition";// prop infos
    ImageItem.PROPINFOS=[{name:ImageItem.PROP_URL,category:"Image",type:StringProperty,multiple:false,default:undefined},{name:ImageItem.PROP_IMAGE,category:"Image",type:StringProperty,multiple:false,default:undefined},{name:ImageItem.PROP_IMAGE_FIT,category:"Image",type:EnumProperty,domain:ImageFit,default:ImageFit.COVER},{name:ImageItem.PROP_IMAGE_POSITION,category:"Image",type:EnumProperty,domain:ImagePosition,default:ImagePosition.CENTER}];// style props
    ImageItem.STYLE_PROPS=['opacity','border','borderLeft','borderRight','borderTop','borderBottom'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ImageItem.$_ctor='ImageItem';ImageItem.ITEM_TYPE='Image';////////////////////////////////////////////////////////////////////////////////
    /**
     */class CheckItem extends ReportItem{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._threeStates=false;this._checked=false;this._text='Check';this._falseText='Uncheck';}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** threeStates */get threeStates(){return this._threeStates;}set threeStates(value){if(value!=this._threeStates){this._threeStates=value;this._changed(CheckItem.PROP_THREE_STATES,value,!value);}}/** checked */get checked(){return this._checked;}set checked(value){if(value!=this._checked){const old=this._checked;this._checked=value;this._changed(CheckItem.PROP_CHECKED,value,old);}}/** text */get text(){return this._text;}set text(value){if(value!=this._text){const old=this._text;this._text=value;this._changed(CheckItem.PROP_TEXT,value,old);}}/** falseText */get falseText(){return this._falseText;}set falseText(value){if(value!=this._falseText){const old=this._falseText;this._falseText=value;this._changed(CheckItem.PROP_FALSE_TEXT,value,old);}}/** emptyText */get emptyText(){return this._emptyText;}set emptyText(value){if(value!=this._emptyText){const old=this._emptyText;this._emptyText=value;this._changed(CheckItem.PROP_EMPTY_TEXT,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getChecked(checked){if(checked){return '1';}else if(checked===false&&!this._threeStates){return '0';}else {return '-1';}}getText(checked){if(checked){return this._text;}else if(checked===false&&!this._threeStates){return this._falseText;}else {return this._emptyText;}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return '[Check]';}getSaveType(){return 'check';}_getEditProps(){const props=super._getEditProps();return props.concat(CheckItem.PROPINFOS);}_getStyleProps(){return CheckItem.STYLE_PROPS;}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.text='Check';}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,CheckItem.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,CheckItem.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    CheckItem.PROP_THREE_STATES="threeStates";CheckItem.PROP_CHECKED="checked";CheckItem.PROP_TEXT="text";CheckItem.PROP_FALSE_TEXT="falseText";CheckItem.PROP_EMPTY_TEXT="emptyText";// prop infos
    CheckItem.PROPINFOS=[{name:CheckItem.PROP_THREE_STATES,category:"Check",type:BooleanProperty,multiple:false,default:false},{name:CheckItem.PROP_CHECKED,category:"Check",type:BooleanProperty,multiple:false,default:false},{name:CheckItem.PROP_TEXT,category:PropCategory.TEXT,type:StringProperty,multiple:false,default:undefined},{name:CheckItem.PROP_FALSE_TEXT,category:PropCategory.TEXT,type:StringProperty,multiple:false,default:undefined},{name:CheckItem.PROP_EMPTY_TEXT,category:PropCategory.TEXT,type:StringProperty,multiple:false,default:undefined}];// style props
    CheckItem.STYLE_PROPS=['fontFamily','fontSize','fontStyle','textDecoration','fontWeight','color','backgroundColor','border'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    CheckItem.$_ctor='CheckItem';CheckItem.ITEM_TYPE='Check';////////////////////////////////////////////////////////////////////////////////
    /**
     * ListContainer가 자동 생성한다.
     */class ListCellItem extends CellGroup{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item){super(item,'tableCell');}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ListCellItem.$_ctor='ListCellItem';var ListContainerMarker;(function(ListContainerMarker){ListContainerMarker["CIRCLE"]="circle";ListContainerMarker["DISC"]="disc";ListContainerMarker["SQUARE"]="square";ListContainerMarker["DECIMAL"]="decimal";ListContainerMarker["LOWER_ROMAN"]="lower-roman";ListContainerMarker["UPPER_ROMAN"]="upper-roman";ListContainerMarker["LOWER_ALPHA"]="lower-alpha";ListContainerMarker["UPPER_ALPHA"]="upper-alpha";ListContainerMarker["NONE"]="none";})(ListContainerMarker||(ListContainerMarker={}));/**
     * Html <ul> <ol>을 이용해서 자식 item들을 표시하는 container.
     */class ListContainer extends CellContainer{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._ordered=false;this._start=1;this._indent=undefined;this.designHeight=50;this.designWidth=160;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** ordered */get ordered(){return this._ordered;}set ordered(value){if(value!=this._ordered){this._ordered=value;this._changed(ListContainer.PROP_ORDERED,value,!value);}}/** start */get start(){return this._start;}set start(value){if(value!==this._start){const old=this._start;this._start=value;this._changed(ListContainer.PROP_START,value,old);}}/** marker */get marker(){return this._marker;}set marker(value){if(value!==this._marker){const old=this._marker;this._marker=value;this._changed(ListContainer.PROP_MARKER,value,old);}}/** indent */get indent(){return this._indent;}set indent(value){if(value!==this._indent){const old=this._indent;this._indent=value;this._changed(ListContainer.PROP_INDENT,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'list';}get outlineLabel(){return '[List]';}_datable(){return true;}_getEditProps(){const props=super._getEditProps();return props.concat(ListContainer.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,ListContainer.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,ListContainer.PROPINFOS);}_doSaveItems(target,items){for(let item of items){const obj={};item.item.save(obj);target.push(obj);}}_prepareCellGroup(item){const cell=new ListCellItem(item);return cell;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    ListContainer.PROP_ORDERED="ordered";ListContainer.PROP_START="start";ListContainer.PROP_MARKER="marker";ListContainer.PROP_INDENT="indent";// prop infos
    ListContainer.PROPINFOS=[{name:ListContainer.PROP_ORDERED,category:PropCategory.MARKER,type:BooleanProperty,multiple:false,default:0},{name:ListContainer.PROP_START,category:PropCategory.MARKER,type:NumberProperty,multiple:false,default:1},{name:ListContainer.PROP_MARKER,category:PropCategory.MARKER,type:EnumProperty,multiple:false,default:undefined,domain:ListContainerMarker},{name:ListContainer.PROP_INDENT,category:PropCategory.MARKER,type:NumberProperty,multiple:false,default:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ListContainer.$_ctor='ListContainer';ListContainer.ITEM_TYPE='List';////////////////////////////////////////////////////////////////////////////////
    class SimpleBandSection extends StackContainer{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(band){super(null);//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._repeat=true;//-------------------------------------------------------------------------
    // child property fields
    //-------------------------------------------------------------------------
    this._child_field=null;assert(!!band);this._band=band;this.width='100%';this.designHeight=24;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** band */get band(){return this._band;}/** repeat */get repeat(){return this._repeat;}set repeat(value){if(value!=this._repeat){this._repeat=value;this._changed(SimpleBandSection.PROP_SIMPLE_BAND_SECTION_REPEAT,value,!value);}}//-------------------------------------------------------------------------
    // child properties
    //-------------------------------------------------------------------------
    /**
         * field
         */getFieldOf(item){return item.getChildProp(SimpleBandSection.PROP_FIELD,this._child_field);}setFieldOf(item,value){item.setChildProp(SimpleBandSection.PROP_FIELD,value);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get designLevel(){return this._band.designLevel;}get marqueeParent(){return this._band;}canResize(dir){return dir===ResizeDirection.BOTTOM;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,SimpleBand.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,SimpleBand.PROPINFOS);}_doLoadChild(child,src){super._doLoadChild(child,src);src.hasOwnProperty(SimpleBandSection.PROP_FIELD)&&this.setFieldOf(child,src.field);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    SimpleBandSection.PROP_SIMPLE_BAND_SECTION_REPEAT="repeat";// prop infos
    SimpleBandSection.PROPINFOS=[{name:SimpleBandSection.PROP_SIMPLE_BAND_SECTION_REPEAT,category:"Band",type:BooleanProperty,multiple:false,default:true}];// child props
    SimpleBandSection.PROP_FIELD="field";class SimpleBandHeader extends SimpleBandSection{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(band){super(band);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return '[Band Header]';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    SimpleBandHeader.$_ctor='SimpleBandHeader';class SimpleBandFooter extends SimpleBandSection{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._attachToBody=false;//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    }//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * true면 multi column 모드일 때 마지막 컬럼의 마지막 행에 붙여서 출력하고,
         * false면 모든 컬럼의 가장 아래쪽에 붙여서 출력한다.
         *
         * @default false
         */get attachToBody(){return this._attachToBody;}set attachToBody(value){if(value!==this._attachToBody){this._attachToBody=value;this._changed(SimpleBandFooter.PROP_ATTACH_TO_BODY,value,!value);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return '[Band Footer]';}_getEditProps(){const props=super._getEditProps();return props.concat(SimpleBandFooter.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,SimpleBandFooter.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,SimpleBandFooter.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    SimpleBandFooter.PROP_ATTACH_TO_BODY="attachToBody";// prop infos
    SimpleBandFooter.PROPINFOS=[{name:SimpleBandFooter.PROP_ATTACH_TO_BODY,category:PropCategory.BAND,type:BooleanProperty,multiple:false,default:false}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    SimpleBandFooter.$_ctor='SimpleBandFooter';class SimpleBandRow extends SimpleBandSection{constructor(){super(...arguments);this.masterRow=NaN;// print 시 사용, master행 번호. 
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    }//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get blankItems(){return this._blankItems;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    canBlank(item,row){if(this.band.dataObj.equalRows(row,row-1,item[BLANK_FIELDS])){return true;}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return '[Data Row]';}get dataDominant(){return true;}get isDataRowContainer(){return true;}_getChildPropInfos(item){return SimpleBandRow.CHILD_PROPS.concat(super._getChildPropInfos(item));}_doLoadChild(child,src){super._doLoadChild(child,src);this._loadChildPropsOf(child,src,SimpleBandRow.CHILD_PROPS);}_doPreparePrint(ctx){super._doPreparePrint(ctx);this._blankItems=this.collectBlankItems();}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    // child props
    SimpleBandRow.PROP_EQUAL_BLANK='equalBlank';SimpleBandRow.PROP_BLANK_FIELDS='blankFields';// child prop infos
    SimpleBandRow.CHILD_PROPS=[{name:SimpleBandRow.PROP_EQUAL_BLANK,category:PropCategory.BAND,type:BooleanProperty,multiple:false,default:false},{name:SimpleBandRow.PROP_BLANK_FIELDS,category:PropCategory.BAND,type:StringProperty,multiple:false,default:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    SimpleBandRow.$_ctor='SimpleBandRow';class SimpleBandRowGroupSection extends StackContainer{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(group,name){super(name);this._group=group;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** group */get group(){return this._group;}/** band */get band(){var _a;return (_a=this._group)===null||_a===void 0?void 0:_a.band;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    // style props
    SimpleBandRowGroupSection.STYLE_PROPS=['backgroundColor'];class SimpleBandRowGroupHeader extends SimpleBandRowGroupSection{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(group){super(group,'groupHeader');}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return 'Group Header';}}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    SimpleBandRowGroupHeader.$_ctor='SimpleBandRowGroupHeader';class SimpleBandRowGroupFooter extends SimpleBandRowGroupSection{//-------------------------------------------------------------------------
    // constructors           
    //-------------------------------------------------------------------------
    constructor(group){super(group,'groupFooter');}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return 'Group Footer';}}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    SimpleBandRowGroupFooter.$_ctor='SimpleBandRowGroupFooter';class SimpleBandRowGroup extends DataBandRowGroup{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(collection){super('simpleBandRowGroup');this.add(this._header=new SimpleBandRowGroupHeader(this));this.add(this._footer=new SimpleBandRowGroupFooter(this));// NOTE: this.add(...) 전에 설정하면 this.page가 존재해서 
    //       이 item이 리포트에 추가되기 전에 
    //       리포트로 하위 아이템 추가 이벤트가 먼저 발생해서 문제가 된다.
    this._collection=collection;}//-------------------------------------------------------------------------
    // IOutlineSource override
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // IPropertySource override
    //-------------------------------------------------------------------------
    get outlineParent(){return this._collection;}get marqueeParent(){return this.band;}getEditProps(){return SimpleBandRowGroup.PROPINFOS.concat(super.getEditProps());}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** header */get header(){return this._header;}/** footer */get footer(){return this._footer;}/** band */get band(){var _a;return (_a=this._collection)===null||_a===void 0?void 0:_a.band;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get page(){var _a;return (_a=this.band)===null||_a===void 0?void 0:_a.page;}get report(){var _a;return (_a=this.band)===null||_a===void 0?void 0:_a.report;}get collection(){return this._collection;}get dataParent(){return this.band;}_ignoreItems(){return true;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,SimpleBandRowGroup.PROPINFOS);src.hasOwnProperty("header")&&this._header.load(loader,src.header);src.hasOwnProperty("footer")&&this._footer.load(loader,src.footer);}_doSave(target){super._doSave(target);this._savePropsOf(target,SimpleBandRowGroup.PROPINFOS);this._header.save(target['header']={});this._footer.save(target['footer']={});}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _changed(prop,newValue,oldValue){super._changed(prop,newValue,oldValue);this._collection&&this._collection['$_groupChanged'](this);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // prop infos
    SimpleBandRowGroup.PROPINFOS=[];class SimpleBandRowGroupCollection extends ReportItemCollection{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(band){super();this._groups=[];this._band=band;}//-------------------------------------------------------------------------
    // IOutlineSource
    //-------------------------------------------------------------------------
    get outlineParent(){return this._band;}get outlineLabel(){return '[Groups]';}get outlineExpandable(){return true;}get outlineItems(){return this._groups;}getSaveType(){return 'groups';}canRemoveFrom(){return false;}canParentOf(itemType){return false;}//-------------------------------------------------------------------------
    // IPropertySource
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get owner(){return this._band;}/** band */get band(){return this._band;}/** count */get count(){return this._groups.length;}get items(){return this._groups.slice();}get visibleCount(){let n=0;for(let g of this._groups){g.visible&&n++;}return n;}/** groups */get groups(){return this._groups.slice();}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    load(loader,src){this._groups=[];if(src&&src.length>0){for(let s of src){if(s){const group=new SimpleBandRowGroup(this);group.load(loader,s);this._groups.push(group);}}this.$_invalidateGroups();}}save(target){for(let g of this._groups){const obj={};g.save(obj);target.push(obj);}}get(index){return this._groups[index];}indexOf(field){return this._groups.indexOf(field);}add(group){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;const g=this.$_add(group,index);if(g){this.$_invalidateGroups();this._itemAdded(g);return g;}}addAll(groups){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;if(!groups||groups.length<1)return;const len=this._groups.length;index=index<0?this._groups.length:Math.max(0,this._groups.length);for(let g of groups){if(this.$_add(g,index)){index++;}}if(this._groups.length!=len){this.$_invalidateGroups();return true;}}removeAt(index){if(index>=0&&index<this._groups.length){const g=this._groups.splice(index,1)[0];this.$_invalidateGroups();this._itemRemoved(g,this._band);return true;}}remove(group){return this.removeAt(this.indexOf(group));}clear(){if(this._groups.length>0){this._groups=[];this.$_invalidateGroups();return true;}}getValidGroups(data){if(data){const groups=[];for(let g of this._groups){const f=g.field;if(Utils.isNumber(f)){f>=0&&f<data.fieldCount&&groups.push(g);}else if(data.containsField(f)){groups.push(g);}}return groups.length?groups:null;}return null;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get page(){var _a;return (_a=this._band)===null||_a===void 0?void 0:_a.page;}get displayPath(){return this._band?this._band.displayPath+'.groups':'groups';}get level(){return this._band?this._band.level+1:0;}isAncestorOf(item){if(super.isAncestorOf(item))return true;if(this._groups.indexOf(item)>=0)return true;for(let g of this._groups){if(g.indexOf(item))return true;}}_doMoveItem(from,to){// 구현할 것!
    return false;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_add(group){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;if(!(group instanceof SimpleBandRowGroup)){const src=group;group=new SimpleBandRowGroup(this);src&&group.extend(src);}if(group instanceof SimpleBandRowGroup&&this._groups.indexOf(group)<0){if(index<0){this._groups.push(group);}else {this._groups.splice(Math.min(index,this._groups.length),0,group);}return group;}}$_invalidateGroups(){for(let i=this._groups.length-1;i>=0;i--){this._groups[i]['_index']=i;}this._band&&this._band['$_groupChanged'](null);}$_groupChanged(field){this._band&&this._band['$_groupChanged'](field);}}/**
     * 페이지를 넘어갈 수 있다.
     * 한 row는 페이지를 넘어갈 수 없다.
     * 페이지를 넘어갈 수 있으므로 매 페이지마다 header나 footer를 표시할 필요가 있을 수 있다.
     */class SimpleBand extends DataBand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);this._groups=new SimpleBandRowGroupCollection(this);this.add(this._header=new SimpleBandHeader(this));this.add(this._footer=new SimpleBandFooter(this));this.add(this._dataRow=new SimpleBandRow(this));this._setOutlineOrders(1,this._dataRow,this._footer,this.detail);this.width='100%';}//-------------------------------------------------------------------------
    // IOutlineSource override
    //-------------------------------------------------------------------------
    get outlineItems(){const groups=this._groups;return [groups].concat(super.outlineItems);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** groups */get groups(){return this._groups;}/** header */get header(){return this._header;}/** footer */get footer(){return this._footer;}/** dataRow */get dataRow(){return this._dataRow;}/**
         * Current printing data row
         */get pr(){return this._pr;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setPrinting(ctx,row){ctx.row=this._pr=row;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'simpleband';}get outlineLabel(){return '[Simple Band]';}get isBand(){return true;}_ignoreItems(){return true;}_getEditProps(){const props=super._getEditProps();return props.concat(SimpleBand.PROPINFOS);}isAncestorOf(item){if(super.isAncestorOf(item))return true;if(item===this._groups)return true;if(this._groups.isAncestorOf(item))return true;}_doLoad(loader,src){super._doLoad(loader,src);src.hasOwnProperty('groups')&&this._groups.load(loader,src.groups);src.hasOwnProperty("header")&&this.header.load(loader,src.header);src.hasOwnProperty("footer")&&this.footer.load(loader,src.footer);// TODO: 제거할 것!
    src.hasOwnProperty("row")&&this.dataRow.load(loader,src.row);src.hasOwnProperty("dataRow")&&this.dataRow.load(loader,src.dataRow);}_doSave(target){super._doSave(target);this._groups.save(target['groups']=[]);this._header.save(target['header']={});this._footer.save(target['footer']={});//this._pageFooter.save(target['pageFooter'] = {});
    this._dataRow.save(target['dataRow']={});}$_groupChanged(field){this._changed(SimpleBand.PROP_SIMPLE_BAND_GROUPS,this._groups,this._groups);}_doPreparePrint(ctx){super._doPreparePrint(ctx);this._groups.preparePrint(ctx);}_doPrepareIndices(ctx){ctx.row=ctx.index=this._pr=0;}canRemove(item){return false;}getNextDetailRows(ctx){return this._getNextDetailRows(ctx,this._pr);}skipDetailRows(ctx){const n=this._skipDetailRows(ctx,this._pr);this._pr+=n;}containsInSection(item){return this._header.contains(item,true)||this._footer.contains(item,true);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    SimpleBand.PROP_SIMPLE_BAND_GROUPS="groups";// prop infos
    SimpleBand.PROPINFOS=[];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    SimpleBand.$_ctor='SimpleBand';SimpleBand.ITEM_TYPE='Simple Band';////////////////////////////////////////////////////////////////////////////////
    var BarcodeFormat;(function(BarcodeFormat){BarcodeFormat["CODE39"]="code39";BarcodeFormat["CODE128"]="code128";BarcodeFormat["CODE128A"]="code128a";BarcodeFormat["CODE128B"]="code128b";BarcodeFormat["CODE128C"]="code128c";BarcodeFormat["EAN13"]="ean13";BarcodeFormat["EAN8"]="ean8";BarcodeFormat["EAN5"]="ean5";BarcodeFormat["EAN2"]="ean2";BarcodeFormat["UPC"]="upc";BarcodeFormat["UPCE"]="upce";BarcodeFormat["ITF"]="itf";BarcodeFormat["ITF14"]="itf14";BarcodeFormat["MSI10"]="msi10";BarcodeFormat["MSI11"]="msi11";BarcodeFormat["MSI1010"]="msi1010";BarcodeFormat["MSI1110"]="msi1110";BarcodeFormat["PHARMACODE"]="pharmacode";BarcodeFormat["CODABAR"]="codabar";})(BarcodeFormat||(BarcodeFormat={}));/**
     * 1차원 barcode item.
     */class BarcodeItem extends ReportItem{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._format=BarcodeFormat.CODE128;this._text='';this._barWidth=1;this._showText=false;this._textAlign=Align.CENTER;this._textPosition='bottom';this._textMargin=2;this._flat=false;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** format */get format(){return this._format;}set format(value){if(value!=this._format){const old=this._format;this._format=value;this._changed(BarcodeItem.PROP_FORMAT,value,old);}}/**
         * text
         */get text(){return this._text;}set text(value){if(value!=this._text){const old=this._text;this._text=value;this._changed(BarcodeItem.PROP_TEXT,value,old);}}/**
         * bar width
         */get barWidth(){return this._barWidth;}set barWidth(value){value=Utils.toNumber(value,1);if(value!==this._barWidth){const old=this._barWidth;this._barWidth=value;this._changed(BarcodeItem.PROP_BAR_WIDTH,value,old);}}/**
         * show text
         */get showText(){return this._showText;}set showText(value){if(value!==this._showText){this._showText=value;this._changed(BarcodeItem.PROP_SHOW_TEXT,value,!value);}}/**
         * text align
         */get textAlign(){return this._textAlign;}set textAlign(value){if(value!==this._textAlign){const old=this._textAlign;this._textAlign=value;this._changed(BarcodeItem.PROP_TEXT_ALIGN,value,old);}}get textPosition(){return this._textPosition;}set textPosition(value){if(value!==this._textPosition){const old=this._textPosition;this._textPosition=value;this._changed(BarcodeItem.PROP_TEXT_POSITION,value,old);}}/**
         * text margin
         */get textMargin(){return this._textMargin;}set textMargin(value){if(value!==this._textMargin){const old=this._textMargin;this._textMargin=value;this._changed(BarcodeItem.PROP_TEXT_MARGIN,value,old);}}/**
         * flat
         */get flat(){return this._flat;}set flat(value){if(value!==this._flat){this._flat=value;this._changed(BarcodeItem.PROP_FLAT,value,!value);}}get lastChar(){return this._lastChar;}set lastChar(value){if(value!==this._lastChar){const old=this._lastChar;this._lastChar=value;this._changed(BarcodeItem.PROP_LAST_CHAR,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    convertText(s){if(this._format)return s.toUpperCase();return s;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'barcode';}get outlineLabel(){return "Barcode";}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.text='12345';this.width=120;this.height=60;}_getEditProps(){const props=super._getEditProps();return props.concat(BarcodeItem.PROPINFOS);}_getStyleProps(){return BarcodeItem.STYLE_PROPS;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,BarcodeItem.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,BarcodeItem.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    BarcodeItem.PROP_FORMAT="format";BarcodeItem.PROP_TEXT="text";BarcodeItem.PROP_BAR_WIDTH="barWidth";BarcodeItem.PROP_SHOW_TEXT="showText";BarcodeItem.PROP_TEXT_POSITION="textPosition";BarcodeItem.PROP_TEXT_MARGIN="textMargin";BarcodeItem.PROP_TEXT_ALIGN="textAlign";BarcodeItem.PROP_FLAT="flat";BarcodeItem.PROP_LAST_CHAR="lastChar";// prop infos
    BarcodeItem.PROPINFOS=[{name:BarcodeItem.PROP_FORMAT,category:PropCategory.BARCODE,type:EnumProperty,default:BarcodeFormat.CODE128,domain:BarcodeFormat,refresh:true},{name:BarcodeItem.PROP_TEXT,category:PropCategory.BARCODE,type:StringProperty,default:''},{name:BarcodeItem.PROP_BAR_WIDTH,category:PropCategory.BARCODE,type:NumberProperty,default:1},{name:BarcodeItem.PROP_SHOW_TEXT,category:PropCategory.BARCODE,type:BooleanProperty,default:false},{name:BarcodeItem.PROP_TEXT_ALIGN,category:PropCategory.BARCODE,type:EnumProperty,domain:Align},{name:BarcodeItem.PROP_TEXT_POSITION,category:PropCategory.BARCODE,type:EnumProperty,domain:['top','bottom']},{name:BarcodeItem.PROP_TEXT_MARGIN,category:PropCategory.BARCODE,type:NumberProperty,default:2},{name:BarcodeItem.PROP_FLAT,category:PropCategory.BARCODE,type:BooleanProperty,default:false,visible:src=>src.format==='ean8'||src.format==='ean13'},{name:BarcodeItem.PROP_LAST_CHAR,category:PropCategory.BARCODE,type:StringProperty,visible:src=>src.format==='ean13'}];// style props
    BarcodeItem.STYLE_PROPS=['fontFamily','fontSize','fontStyle','color','backgroundColor','paddingLeft','paddingTop','paddingRight','paddingBottom','border'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    BarcodeItem.$_ctor='BarcodeItem';BarcodeItem.ITEM_TYPE='Barcode';////////////////////////////////////////////////////////////////////////////////
    /**
     * QRCode 오류복원레벨
     *
     * @remarks
     * {@link https://www.qrcode.com/en/about/error_correction.html | 오류복원레벨 설명} 참고
     */var QrcodeErrorCorrectionLevel;(function(QrcodeErrorCorrectionLevel){/** 레벨 L */QrcodeErrorCorrectionLevel["L"]="L";/** 레벨 M */QrcodeErrorCorrectionLevel["M"]="M";/** 레벨 Q */QrcodeErrorCorrectionLevel["Q"]="Q";/** 레벨 H */QrcodeErrorCorrectionLevel["H"]="H";})(QrcodeErrorCorrectionLevel||(QrcodeErrorCorrectionLevel={}));/**
     * QRCode 리포트 아이템
     */class QrcodeItem extends ReportItem{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    /** 텍스트 데이터 */this._text='';/** 에러복원레벨 */this._errorCorrectionLevel=QrcodeErrorCorrectionLevel.Q;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * 텍스트 데이터
         */get text(){return this._text;}set text(value){if(value!==this._text){const old=this._text;this._text=value;this._changed(QrcodeItem.PROP_QRCODE_TEXT,value,old);}}/**
         * 에러복원레벨
         */get errorCorrectionLevel(){return this._errorCorrectionLevel;}set errorCorrectionLevel(value){if(value!==this._errorCorrectionLevel){const old=this._errorCorrectionLevel;this._errorCorrectionLevel=value;this._changed(QrcodeItem.PROP_QRCODE_ERROR_CORRECTION_LEVEL,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'qrcode';}get outlineLabel(){return "Qrcode";}/**
         * QRCode 아이템 생성 시, 수행할 초기화 작업 정의
         *
         * @remarks
         * QRCode 아이템 크기 및 텍스트 데이터 지정
         */_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.text='https://www.real-report.com/';this.width=100;this.height=100;}_getEditProps(){const props=super._getEditProps();return props.concat(QrcodeItem.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,QrcodeItem.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,QrcodeItem.PROPINFOS);}canRotate(){return true;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    /** QRCode를 표현할 수 있는 영역의 최소 크기 (한 변 기준, px단위) */QrcodeItem.QRCODE_MIN_SIZE=50;/** 텍스트 데이터 PROP명 */QrcodeItem.PROP_QRCODE_TEXT='text';/** 오류복원레벨 PROP명 */QrcodeItem.PROP_QRCODE_ERROR_CORRECTION_LEVEL='errorCorrectionLevel';/** PROP 정보 */QrcodeItem.PROPINFOS=[{name:QrcodeItem.PROP_QRCODE_ERROR_CORRECTION_LEVEL,category:'qrcode',type:StringProperty,multiple:false,default:QrcodeErrorCorrectionLevel.Q,domain:[QrcodeErrorCorrectionLevel.L,QrcodeErrorCorrectionLevel.M,QrcodeErrorCorrectionLevel.Q,QrcodeErrorCorrectionLevel.H]},{name:QrcodeItem.PROP_QRCODE_TEXT,category:PropCategory.TEXT,type:StringProperty,multiple:false,default:''}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    /**
     * 아이템 클래스의 생성자명
     *
     * @remarks
     * 아이템 엘리먼트 생성 시 참조
     *
     * {@link ReportView.$_createElement} 내부코드 참고
     */QrcodeItem.$_ctor='QrcodeItem';/** QRCode 아이템 타입명 */QrcodeItem.ITEM_TYPE='Qrcode';////////////////////////////////////////////////////////////////////////////////
    // Shapes.ts
    // 2020. 08. 07. created by woori
    // -----------------------------------------------------------------------------
    // Copyright (c) 2020 Wooritech Inc.
    // All rights reserved.
    ////////////////////////////////////////////////////////////////////////////////
    class ShapeDrawing{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(className){this.className=className;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    draw(g,width,height){let border=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;let styleName=arguments.length>4?arguments[4]:undefined;return this._doDraw(g,width,height,border,styleName||'');}drawAt(x,y,g,width,height){let border=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;let styleName=arguments.length>6?arguments[6]:undefined;const elt=this._doDraw(g,width,height,border,styleName||'');elt.setAttribute('transform','translate('+x+','+y+')');this.className&&elt.classList.add(this.className);return elt;}}const $$_polygonShapes={rectangle:[0.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0],triangle:[0.5,0.0,0.0,1.0,1.0,1.0],itriangle:[0.0,0.0,0.5,1.0,1.0,0.0],diamond:[0.5,0.0,0.0,0.5,0.5,1.0,1.0,0.5],uparrow:[0.5,0.0,0.0,0.5,0.3,0.5,0.3,1.0,0.7,1.0,0.7,0.5,1.0,0.5],downarrow:[0.3,0.0,0.3,0.5,0.0,0.5,0.5,1.0,1.0,0.5,0.7,0.5,0.7,0.0],leftarrow:[0.0,0.5,0.5,1.0,0.5,0.7,1.0,0.7,1.0,0.3,0.5,0.3,0.5,0.0],rightarrow:[0.0,0.3,0.0,0.7,0.5,0.7,0.5,1.0,1.0,0.5,0.5,0.0,0.5,0.3],plus:[0.3,0.0,0.3,0.3,0.0,0.3,0.0,0.7,0.3,0.7,0.3,1.0,0.7,1.0,0.7,0.7,1.0,0.7,1.0,0.3,0.7,0.3,0.7,0.0],minus:[0.0,0.3,0.0,0.7,1.0,0.7,1.0,0.3],star:[0.5,0,0.6122,0.3454,0.9755,0.3454,0.6816,0.5590,0.7938,0.9045,0.5,0.6910,0.2061,0.9045,0.3183,0.5590,0.02447,0.3454,0.3877,0.3454]};const $$_pairShapes={equal:[[0.0,0.2,0.0,0.4,1.0,0.4,1.0,0.2],[0.0,0.6,0.0,0.8,1.0,0.8,1.0,0.6]]};class PolygonShape extends ShapeDrawing{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(shape,className){super(className);this._shape=shape;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** shape */get shape(){return this._shape;}set shape(value){this._shape=value?value==="inverted_triangle"?PolygonShape.INVERTED_TRIANLGE:value.toLowerCase():null;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doDraw(g,width,height,border,styleName){const shape=this._shape;width-=border;height-=border;if($$_polygonShapes.hasOwnProperty(shape)){let pts=$$_polygonShapes[shape];if(pts){let x=border/2;let y=border/2;pts=pts.slice();for(let i=0,cnt=pts.length/2;i<cnt;i++){pts[i*2]=x+pts[i*2]*width;pts[i*2+1]=y+pts[i*2+1]*height;}pts.push(pts[0],pts[1]);return g.polygon(styleName,pts);}}else if($$_pairShapes.hasOwnProperty(shape)){const points=$$_pairShapes[shape];if(points){let x=border/2;let y=border/2;let pts=points[0].slice();for(let i=0,cnt=pts.length/2;i<cnt;i++){pts[i*2]=x+pts[i*2]*width;pts[i*2+1]=y+pts[i*2+1]*height;}pts.push(pts[0],pts[1]);g.polygon(null,pts);pts=points[1];pts=pts.slice();for(let i=0,cnt=pts.length/2;i<cnt;i++){pts[i*2]=x+pts[i*2]*width;pts[i*2+1]=y+pts[i*2+1]*height;}pts.push(pts[0],pts[1]);return g.polygon(styleName,pts);}}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    PolygonShape.RECTANGLE="rectangle";PolygonShape.TRIANLGE="triangle";PolygonShape.INVERTED_TRIANLGE="itriangle";PolygonShape.DIAMOND="diamond";PolygonShape.UP_ARROW="uparrow";PolygonShape.DOWN_ARROW="downarrow";PolygonShape.LEFT_ARROW="leftarrow";PolygonShape.RIGHT_ARROW="rightarrow";PolygonShape.PLUS="plus";PolygonShape.MINUS="minus";PolygonShape.EQUAL="equal";PolygonShape.STAR="star";class EllipseShape extends ShapeDrawing{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this.circled=true;}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static isEllipse(shape){return shape in this.ELLIPSES;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doDraw(g,width,height,border,styleName){const bd=border/2;if(this.circled){const sz=Math.min(width,height)/2;return g.ellipse(styleName,width/2,height/2,sz-bd,sz-bd);}else {return g.ellipse(styleName,width/2,height/2,width/2-bd,height/2-bd);}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    EllipseShape.CIRCLE="circle";EllipseShape.ELLIPSE="ellipse";EllipseShape.ELLIPSES={circle:'',ellipse:''};class LineShape extends ShapeDrawing{//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static isLine(shape){return shape in this.LINES;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doDraw(g,width,height,border){let x;let y;// width -= border * 2;
    // height -= border * 2;
    switch(this.shape){case LineShape.HLINE:y=height/2;return g.line(null,0,y,width,y);case LineShape.VLINE:x=width/2;return g.line(null,x,0,x,height);case LineShape.DIAGONAL:return g.line(null,0,0,width,height);case LineShape.RDIAGONAL:return g.line(null,0,height,width,0);}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    LineShape.HLINE="hline";LineShape.VLINE="vline";LineShape.DIAGONAL="diagonal";LineShape.RDIAGONAL="rdiagonal";LineShape.LINES={hline:'',vline:'',diagonal:'',rdiagonal:''};const ShapeNames=[PolygonShape.RECTANGLE,PolygonShape.TRIANLGE,PolygonShape.INVERTED_TRIANLGE,PolygonShape.DIAMOND,PolygonShape.UP_ARROW,PolygonShape.DOWN_ARROW,PolygonShape.LEFT_ARROW,PolygonShape.RIGHT_ARROW,PolygonShape.PLUS,PolygonShape.MINUS,PolygonShape.EQUAL,PolygonShape.STAR,EllipseShape.CIRCLE,EllipseShape.ELLIPSE];const ShapeNamesEx=ShapeNames.concat([LineShape.HLINE,LineShape.VLINE,LineShape.DIAGONAL,LineShape.RDIAGONAL]);////////////////////////////////////////////////////////////////////////////////
    /**
     */class ShapeItemBase extends ReportItem{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._shape=PolygonShape.STAR;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * shape
         */get shape(){return this._shape;}set shape(value){if(value!==this._shape){const old=this._shape;this._shape=value;this._changed(ShapeItemBase.PROP_SHAPE,value,old);}}/**
         * shapeCallback
         */get shapeCallback(){return this._shapeCallback;}set shapeCallback(value){if(value!==this._shapeCallback){const old=this._shapeCallback;this._shapeCallback=value;this._changed(ShapeItemBase.PROP_SHAPE_CALLBACK,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getEditProps(){const props=super._getEditProps();return props.concat(ShapeItemBase.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,ShapeItemBase.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,ShapeItemBase.PROPINFOS);}setProperty(prop,value){super.setProperty(prop,value);if(prop==='shape'&&LineShape.isLine(value)&&!this._isLoading()){let s=this.getStyle('stroke');if(!s){this.setStyleProperty('stroke','green');s=this.getStyle('strokeWidth');if(!s){this.setStyleProperty('strokeWidth','2');}}}}canRotate(){return true;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    ShapeItemBase.PROP_SHAPE="shape";ShapeItemBase.PROP_SHAPE_CALLBACK="shapeCallback";// prop infos
    ShapeItemBase.PROPINFOS=[];/**
     */class ShapeItem extends ShapeItemBase{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'shape';}get outlineLabel(){return "Shape";}_doDefaultInit(loader,group,hintWidth,hintHeight){super._doDefaultInit(loader,group,hintWidth,hintHeight);this.shape='star';this.width=24;this.height=24;}_getEditProps(){const props=super._getEditProps();return props.concat(ShapeItem.PROPINFOS);}_getStyleProps(){return ShapeItem.STYLE_PROPS;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,ShapeItem.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,ShapeItem.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    // prop infos
    ShapeItem.PROPINFOS=[{name:ShapeItemBase.PROP_SHAPE,category:"Shape",type:StringProperty,multiple:false,default:undefined,domain:ShapeNamesEx}];// style props
    ShapeItem.STYLE_PROPS=['backgroundColor','fill','stroke','strokeWidth','strokeDasharray'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ShapeItem.$_ctor='ShapeItem';ShapeItem.ITEM_TYPE='Shape';////////////////////////////////////////////////////////////////////////////////
    /**
     */class SvgItem extends ReportItem{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * svg
         */get svg(){return this._svg;}set svg(value){if(value!=this._svg){const old=this._svg;this._svg=value;this._changed(SvgItem.PROP_SVG,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'svg';}get outlineLabel(){return "Svg";}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.width=52;this.height=52;}_getEditProps(){const props=super._getEditProps();return props.concat(SvgItem.PROPINFOS);}/**
         * 1.4.0에서 SVG 태그로 변경 후 활성화 필요 현재는 div 태그이기 때문에 해당 속성들이 적용되지 않는다.
         */ // protected _getStyleProps(): string[] {
    //     return SvgItem.STYLE_PROPS;
    // }
    _doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,SvgItem.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,SvgItem.PROPINFOS);}canAdoptDragSource(source){return source instanceof SvgAsset;}adoptDragSource(source){if(source instanceof SvgAsset){return {type:DropResultType.PROP,prop:'svg',value:source.name};}}canPropAdoptDragSource(prop,source){return prop.name==='svg'&&source instanceof SvgAsset;}adoptPropDragSource(prop,source){if(prop.name==='svg'&&source instanceof SvgAsset){return {type:DropResultType.PROP,prop:'svg',value:source.name};}}canRotate(){return true;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    SvgItem.PROP_SVG="svg";// prop infos
    SvgItem.PROPINFOS=[{name:SvgItem.PROP_SVG,category:"Svg",type:StringProperty,multiple:false,default:undefined}];// style props
    /**
     * 1.4.0에서 SVG 태그로 변경 후 활성화 필요 현재는 div 태그이기 때문에 해당 속성들이 적용되지 않는다.
     */ // static readonly STYLE_PROPS = [
    //     'backgroundColor', 'fill', 'stroke'
    // ];
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    SvgItem.$_ctor='SvgItem';SvgItem.ITEM_TYPE='Svg';////////////////////////////////////////////////////////////////////////////////
    /**
     */class RatingItem extends ShapeItemBase{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._shapeCount=5;this._countinuous=false;this._designValue=2;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * Shape 최대 개수. 1 이상으로 설정해야 한다.
         */get shapeCount(){return this._shapeCount;}set shapeCount(value){value=Math.max(1,Utils.toNumber(value));if(value!==this._shapeCount){const old=this._shapeCount;this._shapeCount=value;this._changed(RatingItem.PROP_RATING_SHAPE_COUNT,value,old);}}/**
         * TODO: v2
         * 연속된 값을 표시한다. 즉, shape 일부 영역을 활성 상태로 표시한다.
         */get countinuous(){return this._countinuous;}set countinuous(value){if(value!==this._countinuous){this._countinuous=value;this._changed(RatingItem.PROP_SHAPE,value,!this._countinuous);}}/** minimum */get minimum(){return this._minimum;}set minimum(value){value=Utils.toNumber(value,NaN);if(value!=this._minimum){const old=this._minimum;this._minimum=value;this._changed(RatingItem.PROP_RATING_MINIMUM,value,old);}}/** maximum */get maximum(){return this._maximum;}set maximum(value){value=Utils.toNumber(value,NaN);if(value!=this._maximum){const old=this._maximum;this._maximum=value;this._changed(RatingItem.PROP_RATING_MAXIMUM,value,old);}}/** designValue */get designValue(){return this._designValue;}set designValue(value){value=Utils.toNumber(value,0);if(value!=this._designValue){const old=this._designValue;this._designValue=value;this._changed(RatingItem.PROP_RATING_DESIGN_VALUE,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return '[Rating]';}getSaveType(){return 'rating';}_getEditProps(){const props=super._getEditProps();return props.concat(RatingItem.PROPINFOS);}_getStyleProps(){return RatingItem.STYLE_PROPS;}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.width=Math.min(100,hintWidth||100);this.height=Math.min(20,hintHeight||20);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,RatingItem.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,RatingItem.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    RatingItem.PROP_RATING_SHAPE_COUNT="shapeCount";RatingItem.PROP_RATING_CONTINUOUS="continuous";RatingItem.PROP_RATING_MINIMUM="minimum";RatingItem.PROP_RATING_MAXIMUM="maximum";RatingItem.PROP_RATING_DESIGN_VALUE="designValue";// prop infos
    RatingItem.PROPINFOS=[{name:ShapeItemBase.PROP_SHAPE,category:"Shape",type:StringProperty,multiple:false,default:undefined,domain:ShapeNames},{name:RatingItem.PROP_RATING_SHAPE_COUNT,category:"Rating",type:NumberProperty,multiple:false,default:5},// {
    //     name: RatingItem.PROP_RATING_CONTINUOUS,
    //     category: "Rating",
    //     type: BooleanProperty,
    //     multiple: false,
    //     default: false
    // },
    {name:RatingItem.PROP_RATING_MINIMUM,category:"Rating",type:NumberProperty,multiple:false,default:0},{name:RatingItem.PROP_RATING_MAXIMUM,category:"Rating",type:NumberProperty,multiple:false,default:100},{name:RatingItem.PROP_RATING_DESIGN_VALUE,category:"Rating",type:NumberProperty,multiple:false,default:50}];// style props
    RatingItem.STYLE_PROPS=['backgroundColor','fill','stroke','backFill','backStroke'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    RatingItem.$_ctor='RatingItem';RatingItem.ITEM_TYPE='Rating';////////////////////////////////////////////////////////////////////////////////
    /**
     * expression 속성에 summary 수식을 지정한다.
     */class SummaryItem extends TextItemBase{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * expression
         */get expression(){return this._expression;}set expression(value){if(value!=this._expression){const old=this._expression;this._expression=value;this._exprNode=value?ExpressionParser.Default.parse(value):null;this._changed(SummaryItem.PROP_EXPRESSION,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getSummary(runtime){if(this._exprNode){return this._exprNode.evaluate(runtime);}return NaN;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'summary';}get designText(){return this.value;}get outlineLabel(){let s=this.expression;return '[Summary]'+(s?' '+s:'');}get pathLabel(){return 'summary';}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);}_getEditProps(){const props=super._getEditProps();return props.concat(SummaryItem.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,SummaryItem.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,SummaryItem.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    SummaryItem.PROP_EXPRESSION="expression";// prop infos
    SummaryItem.PROPINFOS=[{name:SummaryItem.PROP_EXPRESSION,category:PropCategory.DATA,type:StringProperty,multiple:false,default:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    SummaryItem.$_ctor='SummaryItem';SummaryItem.ITEM_TYPE='Summary';////////////////////////////////////////////////////////////////////////////////
    /**
     */class BarItem extends ReportItem{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._minimum=0;this._maximum=100;this._position=35;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** minimum */get minimum(){return this._minimum;}set minimum(value){if(value!=this._minimum){const old=this._minimum;this._minimum=value;this._changed(BarItem.PROP_BAR_MINIMUM,value,old);}}/** maximum */get maximum(){return this._maximum;}set maximum(value){if(value!=this._maximum){const old=this._maximum;this._maximum=value;this._changed(BarItem.PROP_BAR_MAXIMUM,value,old);}}/** position */get position(){return this._position;}set position(value){value=Utils.toNumber(value,0);if(value!=this._position){const old=this._position;this._position=value;this._changed(BarItem.PROP_POSITION,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return '[Bar]';}getSaveType(){return 'bar';}_getEditProps(){const props=super._getEditProps();return props.concat(BarItem.PROPINFOS);}_getStyleProps(){return BarItem.STYLE_PROPS;}canRotate(){return true;}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.width=Math.min(60,hintWidth||60);this.height=Math.min(25,hintHeight||25);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,BarItem.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,BarItem.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    BarItem.PROP_BAR_MINIMUM="minimum";BarItem.PROP_BAR_MAXIMUM="maximum";BarItem.PROP_POSITION="position";// prop infos
    BarItem.PROPINFOS=[{name:BarItem.PROP_BAR_MINIMUM,category:"Bar",type:NumberProperty,multiple:false,default:0},{name:BarItem.PROP_BAR_MAXIMUM,category:"Bar",type:NumberProperty,multiple:false,default:100},{name:BarItem.PROP_POSITION,category:"Bar",type:NumberProperty,multiple:false,default:50}];// style props
    BarItem.STYLE_PROPS=['border','backgroundColor','barColor'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    BarItem.$_ctor='BarItem';BarItem.ITEM_TYPE='Bar';////////////////////////////////////////////////////////////////////////////////
    /**
     * Hichart column series model.
     */class HichartColumnSeries extends HichartCartesianSeries{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._grouping=true;this.dataLabels.visible=false;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * grouping
         */get grouping(){return this._grouping;}set grouping(value){if(value!==this._grouping){this._grouping=value;this._changed(HichartColumnSeries.PROP_GROUPING,value,!value);}}get stack(){return this._stack;}set stack(value){if(value!==this._stack){const old=this._stack;this._stack=value;this._changed(HichartColumnSeries.PROP_STACK,value,old);}}/**
         * pointPadding.
         */get pointPadding(){return this._pointPadding;}set pointPadding(value){if(value!==this._pointPadding){const old=this._pointPadding;this._pointPadding=value;this._changed(HichartColumnSeries.PROP_POINT_PADDING,value,old);}}/**
         * pointPlacement
         */get pointPlacement(){return this._pointPlacement;}set pointPlacement(value){const old=this._pointPlacement;this._pointPlacement=value;this._changed(HichartColumnSeries.PROP_POINT_PLACEMENT,value,old);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get seriesType(){return 'column';}_getEditProps(){const props=super._getEditProps();return props.concat(HichartColumnSeries.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartColumnSeries.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartColumnSeries.PROPINFOS);}wrap(target){super.wrap(target);if(this._grouping!==true){target[HichartColumnSeries.PROP_GROUPING]=this._grouping;}target[HichartColumnSeries.PROP_POINT_PLACEMENT]=Utils.toStrOrNum(this._pointPlacement);return this.assignProps(target,[HichartColumnSeries.PROP_STACK,HichartColumnSeries.PROP_POINT_PADDING]);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartColumnSeries.PROP_GROUPING='grouping';HichartColumnSeries.PROP_STACK='stack';HichartColumnSeries.PROP_POINT_PADDING='pointPadding';HichartColumnSeries.PROP_POINT_PLACEMENT='pointPlacement';// prop infos
    HichartColumnSeries.PROPINFOS=[{name:HichartColumnSeries.PROP_GROUPING,category:PropCategory.SERIES,type:BooleanProperty,multiple:false,default:true},{name:HichartColumnSeries.PROP_STACK,category:PropCategory.SERIES,type:StringProperty,multiple:false,default:undefined},{name:HichartColumnSeries.PROP_POINT_PADDING,category:PropCategory.SERIES,type:NumberProperty,multiple:false,default:undefined},{name:HichartColumnSeries.PROP_POINT_PLACEMENT,category:PropCategory.SERIES,type:StringProperty,multiple:false,default:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    HichartColumnSeries.$_ctor='HichartColumnSeries';/**
     * Hichart column range series model.
     */class HichartColumnRangeSeries extends HichartColumnSeries{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get seriesType(){return 'columnrange';}_doLoad(loader,src){super._doLoad(loader,src);}_doSave(target){super._doSave(target);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    HichartColumnRangeSeries.$_ctor='HichartColumnRangeSeries';////////////////////////////////////////////////////////////////////////////////
    /**
     * Hichart bar series model.
     */class HichartBarSeries extends HichartCartesianSeries{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._grouping=true;this.dataLabels.visible=false;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * grouping
         */get grouping(){return this._grouping;}set grouping(value){if(value!==this._grouping){this._grouping=value;this._changed(HichartBarSeries.PROP_GROUPING,value,!value);}}get stack(){return this._stack;}set stack(value){if(value!==this._stack){const old=this._stack;this._stack=value;this._changed(HichartBarSeries.PROP_STACK,value,old);}}/**
         * pointPadding.
         */get pointPadding(){return this._pointPadding;}set pointPadding(value){if(value!==this._pointPadding){const old=this._pointPadding;this._pointPadding=value;this._changed(HichartBarSeries.PROP_POINT_PADDING,value,old);}}/**
         * pointPlacement
         */get pointPlacement(){return this._pointPlacement;}set pointPlacement(value){const old=this._pointPlacement;this._pointPlacement=value;this._changed(HichartBarSeries.PROP_POINT_PLACEMENT,value,old);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get seriesType(){return 'bar';}_getEditProps(){const props=super._getEditProps();return props.concat(HichartBarSeries.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartBarSeries.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartBarSeries.PROPINFOS);}wrap(target){super.wrap(target);if(this._grouping!==true){target[HichartBarSeries.PROP_GROUPING]=this._grouping;}target[HichartBarSeries.PROP_POINT_PLACEMENT]=Utils.toStrOrNum(this._pointPlacement);return this.assignProps(target,[HichartBarSeries.PROP_STACK,HichartBarSeries.PROP_POINT_PADDING]);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartBarSeries.PROP_GROUPING='grouping';HichartBarSeries.PROP_STACK='stack';HichartBarSeries.PROP_POINT_PADDING='pointPadding';HichartBarSeries.PROP_POINT_PLACEMENT='pointPlacement';// prop infos
    HichartBarSeries.PROPINFOS=[{name:HichartBarSeries.PROP_GROUPING,category:PropCategory.SERIES,type:BooleanProperty,multiple:false,default:true},{name:HichartBarSeries.PROP_STACK,category:PropCategory.SERIES,type:StringProperty,multiple:false,default:undefined},{name:HichartBarSeries.PROP_POINT_PADDING,category:PropCategory.SERIES,type:NumberProperty,multiple:false,default:undefined},{name:HichartBarSeries.PROP_POINT_PLACEMENT,category:PropCategory.SERIES,type:StringProperty,multiple:false,default:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    HichartBarSeries.$_ctor='HichartBarSeries';////////////////////////////////////////////////////////////////////////////////
    /**
     * Line 시리즈 류의 marker 모델.
     */class HichartLineSeriesMarker extends HichartSeriesMarker{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(series){super(series);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** radius */get radius(){return this._radius;}set radius(value){if(value!==this._radius){const old=this._radius;this._radius=value;this._changed(HichartLineSeriesMarker.PROP_RADIUS,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getEditProps(){const props=super._getEditProps();return props.concat(HichartLineSeriesMarker.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartLineSeriesMarker.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartLineSeriesMarker.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartLineSeriesMarker.PROP_RADIUS="radius";// prop infos
    HichartLineSeriesMarker.PROPINFOS=[{name:HichartLineSeriesMarker.PROP_RADIUS,category:PropCategory.MARKER,type:NumberProperty,multiple:true,default:undefined}];/**
     * Hichart line series model.
     */class HichartLineSeries extends HichartCartesianSeries{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);this._marker=new HichartLineSeriesMarker(this);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** lineWidth */get lineWidth(){return this._lineWidth;}set lineWidth(value){if(value!==this._lineWidth){const old=this._lineWidth;this._lineWidth=value;this._changed(HichartLineSeries.PROP_LINE_WIDTH,value,old);}}/** lineColor */get lineColor(){return this._lineColor;}set lineColor(value){if(value!==this._lineColor){const old=this._lineColor;this._lineColor=value;this._changed(HichartLineSeries.PROP_LINE_COLOR,value,old);}}/** marker */get marker(){return this._marker;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get seriesType(){return 'line';}canHideMarker(){return true;}_getEditProps(){const props=super._getEditProps();return props.concat(HichartLineSeries.PROPINFOS);}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this._marker.defaultInit(loader,parent,hintWidth,hintHeight);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartLineSeries.PROPINFOS);this._loadObjects([this._marker],loader,src);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartLineSeries.PROPINFOS);this._saveObjects([this._marker],target);}wrap(config){super.wrap(config);const w=this._getPropsWrapper({});w.marker=this._marker.getWrapper();return Utils.extend(config,w);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartLineSeries.PROP_LINE_WIDTH="lineWidth";HichartLineSeries.PROP_LINE_COLOR="lineColor";HichartLineSeries.PROP_MARKER="marker";// prop infos
    HichartLineSeries.PROPINFOS=[{name:HichartLineSeries.PROP_LINE_WIDTH,category:PropCategory.SERIES,type:NumberProperty,multiple:true,default:undefined},{name:HichartLineSeries.PROP_LINE_COLOR,category:PropCategory.SERIES,type:ColorProperty,multiple:true,default:undefined},{name:HichartLineSeries.PROP_MARKER,category:PropCategory.MARKER,indented:true,type:ModelProperty,multiple:false,default:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    HichartLineSeries.$_ctor='HichartLineSeries';/**
     * Hichart spline series model.
     */class HichartSplineSeries extends HichartLineSeries{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get seriesType(){return 'spline';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    HichartSplineSeries.$_ctor='HichartSplineSeries';/**
     * Hichart area series model.
     */class HichartAreaSeries extends HichartLineSeries{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** fill color */get fillColor(){return this._fillColor;}set fillColor(value){if(value!==this._fillColor){const old=this._fillColor;this._fillColor=value;this._changed(HichartAreaSeries.PROP_FILL_COLOR,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get seriesType(){return 'area';}_getEditProps(){const props=super._getEditProps();return props.concat(HichartAreaSeries.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartAreaSeries.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartAreaSeries.PROPINFOS);}wrap(config){super.wrap(config);return Utils.extend(config,this._getPropsWrapper({}));}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartAreaSeries.PROP_FILL_COLOR="fillColor";// prop infos
    HichartAreaSeries.PROPINFOS=[{name:HichartAreaSeries.PROP_FILL_COLOR,category:PropCategory.SERIES,type:ColorProperty,multiple:true,default:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    HichartAreaSeries.$_ctor='HichartAreaSeries';/**
     * Hichart areaspline series model.
     */class HichartAreaSplineSeries extends HichartAreaSeries{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get seriesType(){return 'areaspline';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    HichartAreaSplineSeries.$_ctor='HichartAreaSplineSeries';/**
     * Hichart arearange series model.
     */class HichartAreaRangeSeries extends HichartAreaSeries{constructor(){super(...arguments);this._xValues=[1,2,3,4,5];this._lowValues=[7,5,3,8,6];this._highValues=[12,9,7,11,9];}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * x field
         **/get xField(){return this._xField;}set xField(value){if(value!==this._xField){const old=this._xField;this._xField=value;this._changed(HichartAreaRangeSeries.PROP_X_FIELD,value,old);}}/**
         * xField가 지정되면 이 속성은 무시된다.
         */get xValues(){return this._xValues;}set xValues(value){if(value!==this._xValues){const old=this._xValues;this._xValues=value===null||value===void 0?void 0:value.slice();this._changed(HichartAreaRangeSeries.PROP_X_VALUES,value,old);}}/**
         * low field
         **/get lowField(){return this._lowField;}set lowField(value){if(value!==this._lowField){const old=this._lowField;this._lowField=value;this._changed(HichartAreaRangeSeries.PROP_LOW_FIELD,value,old);}}/**
         * lowField가 지정되면 이 속성은 무시된다.
         */get lowValues(){return this._lowValues;}set lowValues(value){if(value!==this._lowValues){const old=this._lowValues;this._lowValues=value===null||value===void 0?void 0:value.slice();this._changed(HichartAreaRangeSeries.PROP_LOW_VALUES,value,old);}}/**
         * high field
         **/get highField(){return this._highField;}set highField(value){if(value!==this._highField){const old=this._highField;this._highField=value;this._changed(HichartAreaRangeSeries.PROP_HIGH_FIELD,value,old);}}/**
         * highField가 지정되면 이 속성은 무시된다.
         */get highValues(){return this._highValues;}set highValues(value){if(value!==this._highValues){const old=this._highValues;this._highValues=value===null||value===void 0?void 0:value.slice();this._changed(HichartAreaRangeSeries.PROP_HIGH_VALUES,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get seriesType(){return 'arearange';}hasValuesProp(){return false;}_getEditProps(){const props=super._getEditProps();return props.concat(HichartAreaRangeSeries.PROPINFOS);}_doDefaultInit(loader,parent,hintWidth,hintHeight){this._doDefaultInit(loader,parent,hintWidth,hintHeight);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartAreaRangeSeries.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartAreaRangeSeries.PROPINFOS);}getValues(ctx,dp){const vals=super.getValues(ctx,dp);const xvals=this._getValues(ctx,'x',dp);const lowvals=this._getValues(ctx,'low',dp);const highvals=this._getValues(ctx,'high',dp);const objs=[];if(vals&&xvals&&lowvals&&highvals){let i=0;for(let v of vals){objs.push({x:xvals[i],low:lowvals[i],high:highvals[i]});i++;}}return objs;}wrap(config){super.wrap(config);const w=this._getPropsWrapper({});return Utils.extend(config,w);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartAreaRangeSeries.PROP_X_FIELD='xField';HichartAreaRangeSeries.PROP_X_VALUES='xValues';HichartAreaRangeSeries.PROP_LOW_FIELD='lowField';HichartAreaRangeSeries.PROP_LOW_VALUES='lowValues';HichartAreaRangeSeries.PROP_HIGH_FIELD='highField';HichartAreaRangeSeries.PROP_HIGH_VALUES='highValues';// prop infos
    HichartAreaRangeSeries.PROPINFOS=[{name:HichartAreaRangeSeries.PROP_X_FIELD,category:PropCategory.SERIES,type:ListableProperty,multiple:false,default:undefined},{name:HichartAreaRangeSeries.PROP_X_VALUES,category:PropCategory.SERIES,type:NumberArrayProperty,multiple:false,default:undefined},{name:HichartAreaRangeSeries.PROP_LOW_FIELD,category:PropCategory.SERIES,type:ListableProperty,multiple:false,default:undefined},{name:HichartAreaRangeSeries.PROP_LOW_VALUES,category:PropCategory.SERIES,type:NumberArrayProperty,multiple:false,default:undefined},{name:HichartAreaRangeSeries.PROP_HIGH_FIELD,category:PropCategory.SERIES,type:ListableProperty,multiple:false,default:undefined},{name:HichartAreaRangeSeries.PROP_HIGH_VALUES,category:PropCategory.SERIES,type:NumberArrayProperty,multiple:false,default:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    HichartAreaRangeSeries.$_ctor='HichartAreaRangeSeries';////////////////////////////////////////////////////////////////////////////////
    /**
     * Hichart pie series model.
     */class HichartPieSeries extends HichartSeries{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);this._names=['사과','배','감','귤','수박'];this._startAngle=0;this._dataLabels=new HichartRadialDataLabels(chart);this.size='75%';this.innerSize='0%';this.colorByPoint=true;this.showInLegend=false;}//-------------------------------------------------------------------------
    // IPropertySource override
    //-------------------------------------------------------------------------
    getPropDomain(prop){const report=this.report;if(report){if(prop.name===HichartPieSeries.PROP_PIE_SERIES_NAME_FIELD){return this.getDataFieldNames();}}return super.getPropDomain(prop);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * dataLabels
         */get dataLabels(){return this._dataLabels;}/**
         * nameField
         **/get nameField(){return this._nameField;}set nameField(value){if(value!==this._nameField){const old=this._nameField;this._nameField=value;this._changed(HichartPieSeries.PROP_PIE_SERIES_NAME_FIELD,value,old);}}/**
         * nameField가 지정되면 이 속성은 무시된다.
         */get names(){return this._names;}set names(value){if(value!==this._names){const old=this._names;this._names=value===null||value===void 0?void 0:value.slice();this._changed(HichartPieSeries.PROP_PIE_SERIES_NAMES,value,old);}}/**
         * size
         */get size(){return this._size;}set size(value){value=this._validateSize(value);if(value!==this._size){const old=this._size;this._size=value;this._sizeDim=new Dimension(value);this._changed(HichartPieSeries.PROP_PIE_SERIES_SIZE,value,old);}}/**
         * inner size
         */get innerSize(){return this._innerSize;}set innerSize(value){value=this._validateSize(value);if(value!==this._innerSize){const old=this._innerSize;this._innerSize=value;this._innerSizeDim=new Dimension(value);this._changed(HichartPieSeries.PROP_PIE_SERIES_SIZE,value,old);}}/**
         * start angle
         */get startAngle(){return this._startAngle;}set startAngle(value){if(value!==this._startAngle){const old=this._startAngle;this._startAngle=value;this._changed(HichartPieSeries.PROP_PIE_SERIES_START_ANGLE,value,old);}}/**
         * end angle
         */get endAngle(){return this._endAngle;}set endAngle(value){if(value!==this._endAngle){const old=this._endAngle;this._endAngle=value;this._changed(HichartPieSeries.PROP_PIE_SERIES_END_ANGLE,value,old);}}/**
         * center x
         */get centerX(){return this._centerX;}set centerX(value){value=this._validateSize(value);if(value!==this._centerX){const old=this._centerX;this._centerX=value;this._centerXDim=new Dimension(value);this._changed(HichartPieSeries.PROP_PIE_SERIES_CENTER_X,value,old);}}/**
         * center y
         */get centerY(){return this._centerY;}set centerY(value){value=this._validateSize(value);if(value!==this._centerY){const old=this._centerY;this._centerY=value;this._centerYDim=new Dimension(value);this._changed(HichartPieSeries.PROP_PIE_SERIES_CENTER_Y,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get seriesType(){return 'pie';}_getEditProps(){const props=super._getEditProps();return props.concat(HichartPieSeries.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartPieSeries.PROPINFOS);this._loadObjects([this._dataLabels],loader,src);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartPieSeries.PROPINFOS);this._saveObjects([this._dataLabels],target);}wrap(config){var _a,_b,_c,_d;super.wrap(config);return Utils.extend(config,{size:(_a=this._sizeDim)===null||_a===void 0?void 0:_a.getValue(),innerSize:(_b=this._innerSizeDim)===null||_b===void 0?void 0:_b.getValue(),startAngle:this._startAngle,endAngle:this._endAngle,center:[(_c=this._centerXDim)===null||_c===void 0?void 0:_c.getValue(),(_d=this._centerYDim)===null||_d===void 0?void 0:_d.getValue()],dataLabels:this._dataLabels.getWrappaer()});}getValues(ctx,dp){const names=this._getNames(ctx.printing,dp);const vals=super.getValues(ctx,dp);const objs=[];if(vals){let i=0;for(let v of vals){objs.push({y:v,name:names&&names.length>i?names[i]:i});i++;}}return objs;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _getNames(printing,dp){if(printing&&this._nameField){const data=this.data||this._getParentData();if(data){return dp.getFieldValues(data,this._nameField);}}return this._names;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartPieSeries.PROP_PIE_SERIES_DATA_LABELS='dataLabels';HichartPieSeries.PROP_PIE_SERIES_NAME_FIELD='nameField';HichartPieSeries.PROP_PIE_SERIES_NAMES='names';HichartPieSeries.PROP_PIE_SERIES_SIZE='size';HichartPieSeries.PROP_PIE_SERIES_INNER_SIZE='innerSize';HichartPieSeries.PROP_PIE_SERIES_START_ANGLE='startAngle';HichartPieSeries.PROP_PIE_SERIES_END_ANGLE='endAngle';HichartPieSeries.PROP_PIE_SERIES_CENTER_X='centerX';HichartPieSeries.PROP_PIE_SERIES_CENTER_Y='centerY';// prop infos
    HichartPieSeries.PROPINFOS=[{name:HichartPieSeries.PROP_PIE_SERIES_DATA_LABELS,category:'data labels',type:ModelProperty,indented:true,multiple:false,default:undefined},{name:HichartPieSeries.PROP_PIE_SERIES_NAME_FIELD,category:PropCategory.SERIES,type:ListableProperty,multiple:false,default:undefined},{name:HichartPieSeries.PROP_PIE_SERIES_NAMES,category:PropCategory.SERIES,type:StringArrayProperty,multiple:false,default:undefined},{name:HichartPieSeries.PROP_PIE_SERIES_SIZE,category:PropCategory.SERIES,type:DimensionProperty,multiple:true,default:undefined},{name:HichartPieSeries.PROP_PIE_SERIES_INNER_SIZE,category:PropCategory.SERIES,type:DimensionProperty,multiple:true,default:undefined},{name:HichartPieSeries.PROP_PIE_SERIES_START_ANGLE,category:PropCategory.SERIES,type:NumberProperty,multiple:true,default:0},{name:HichartPieSeries.PROP_PIE_SERIES_END_ANGLE,category:PropCategory.SERIES,type:NumberProperty,multiple:true,default:undefined},{name:HichartPieSeries.PROP_PIE_SERIES_CENTER_X,category:PropCategory.SERIES,type:DimensionProperty,multiple:true,default:undefined},{name:HichartPieSeries.PROP_PIE_SERIES_CENTER_Y,category:PropCategory.SERIES,type:DimensionProperty,multiple:true,default:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    HichartPieSeries.$_ctor='HichartPieSeries';////////////////////////////////////////////////////////////////////////////////
    /**
     * Bubble 시리즈 류의 marker 모델.
     */class HichartBubbleSeriesMarker extends HichartSeriesMarker{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(series){super(series);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._fillOpacity=0.5;this._lineWidth=1;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** line width */get fillOpacity(){return this._fillOpacity;}set fillOpacity(value){if(value!==this._fillOpacity){const old=this._fillOpacity;this._fillOpacity=value;this._changed(HichartBubbleSeriesMarker.PROP_FILL_OPACITY,value,old);}}/** line color */get lineColor(){return this._lineColor;}set lineColor(value){if(value!==this._lineColor){const old=this._lineColor;this._lineColor=value;this._changed(HichartBubbleSeriesMarker.PROP_LINE_COLOR,value,old);}}/** lineWidth */get lineWidth(){return this._lineWidth;}set lineWidth(value){if(value!==this._lineWidth){const old=this._lineWidth;this._lineWidth=value;this._changed(HichartBubbleSeriesMarker.PROP_LINE_WIDTH,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getEditProps(){const props=super._getEditProps();return props.concat(HichartBubbleSeriesMarker.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartBubbleSeriesMarker.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartBubbleSeriesMarker.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartBubbleSeriesMarker.PROP_FILL_OPACITY="fillOpacity";HichartBubbleSeriesMarker.PROP_LINE_COLOR="lineColor";HichartBubbleSeriesMarker.PROP_LINE_WIDTH="lineWidth";// prop infos
    HichartBubbleSeriesMarker.PROPINFOS=[{name:HichartBubbleSeriesMarker.PROP_FILL_OPACITY,category:PropCategory.MARKER,type:NumberProperty,multiple:true,default:0.5},{name:HichartBubbleSeriesMarker.PROP_LINE_COLOR,category:PropCategory.MARKER,type:ColorProperty,multiple:true,default:undefined},{name:HichartBubbleSeriesMarker.PROP_LINE_WIDTH,category:PropCategory.MARKER,type:NumberProperty,multiple:true,default:1}];/**
     * Hichart bubble series model.
     */class HichartBubbleSeries extends HichartCartesianSeries{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);this._xValues=[1,2,3,4,5];this._yValues=[1,2,3,4,5];this._marker=new HichartBubbleSeriesMarker(this);this.dataLabels.visible=false;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * x field
         **/get xField(){return this._xField;}set xField(value){if(value!==this._xField){const old=this._xField;this._xField=value;this._changed(HichartBubbleSeries.PROP_X_FIELD,value,old);}}/**
         * xField가 지정되면 이 속성은 무시된다.
         */get xValues(){return this._xValues;}set xValues(value){if(value!==this._xValues){const old=this._xValues;this._xValues=value===null||value===void 0?void 0:value.slice();this._changed(HichartBubbleSeries.PROP_X_VALUES,value,old);}}/**
         * y field
         **/get yField(){return this._yField;}set yField(value){if(value!==this._yField){const old=this._yField;this._yField=value;this._changed(HichartBubbleSeries.PROP_Y_FIELD,value,old);}}/**
         * yField가 지정되면 이 속성은 무시된다.
         */get yValues(){return this._yValues;}set yValues(value){if(value!==this._yValues){const old=this._yValues;this._yValues=value===null||value===void 0?void 0:value.slice();this._changed(HichartBubbleSeries.PROP_Y_VALUES,value,old);}}/**
         * name field
         **/get nameField(){return this._nameField;}set nameField(value){if(value!==this._nameField){const old=this._nameField;this._nameField=value;this._changed(HichartBubbleSeries.PROP_NAME_FIELD,value,old);}}/**
         * nameField가 지정되면 이 속성은 무시된다.
         */get names(){return this._names&&this._names.slice(0);}set names(value){if(value!==this._names){const old=this._names;this._names=value&&value.slice(0);this._changed(HichartBubbleSeries.PROP_NAMES,value,old);}}/** marker */get marker(){return this._marker;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get seriesType(){return 'bubble';}_getEditProps(){const props=super._getEditProps();return props.concat(HichartBubbleSeries.PROPINFOS);}_getFieldProps(){return [HichartBubbleSeries.PROP_X_FIELD,HichartBubbleSeries.PROP_Y_FIELD];}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartBubbleSeries.PROPINFOS);this._loadObjects([this._marker],loader,src);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartBubbleSeries.PROPINFOS);this._saveObjects([this._marker],target);}getValues(ctx,dp){const vals=super.getValues(ctx,dp);const xvals=this._getValues(ctx,'x',dp);const yvals=this._getValues(ctx,'y',dp);const names=this._getValues(ctx,'name',dp);const objs=[];if(vals&&xvals&&yvals){vals.forEach((v,i)=>{const obj={x:xvals[i],y:yvals[i],z:v};if(names)obj.name=names[i];objs.push(obj);});}return objs;}wrap(config){const w=super.wrap(config);this._getPropsWrapper(w);w['marker']=this._marker.getWrapper();return Utils.extend(config,w);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartBubbleSeries.PROP_X_FIELD='xField';HichartBubbleSeries.PROP_X_VALUES='xValues';HichartBubbleSeries.PROP_Y_FIELD='yField';HichartBubbleSeries.PROP_Y_VALUES='yValues';HichartBubbleSeries.PROP_NAME_FIELD='nameField';HichartBubbleSeries.PROP_NAMES='names';HichartBubbleSeries.PROP_MARKER="marker";// prop infos
    HichartBubbleSeries.PROPINFOS=[{name:HichartBubbleSeries.PROP_X_FIELD,category:PropCategory.SERIES,type:ListableProperty,multiple:false,default:undefined},{name:HichartBubbleSeries.PROP_X_VALUES,category:PropCategory.SERIES,type:NumberArrayProperty,multiple:false,default:undefined},{name:HichartBubbleSeries.PROP_Y_FIELD,category:PropCategory.SERIES,type:ListableProperty,multiple:false,default:undefined},{name:HichartBubbleSeries.PROP_Y_VALUES,category:PropCategory.SERIES,type:NumberArrayProperty,multiple:false,default:undefined},{name:HichartBubbleSeries.PROP_NAME_FIELD,category:PropCategory.SERIES,type:ListableProperty,multiple:false,default:undefined},{name:HichartBubbleSeries.PROP_NAMES,category:PropCategory.SERIES,type:StringArrayProperty,multiple:false,default:undefined},{name:HichartBubbleSeries.PROP_MARKER,category:PropCategory.MARKER,indented:true,type:ModelProperty,multiple:false,default:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    HichartBubbleSeries.$_ctor='HichartBubbleSeries';////////////////////////////////////////////////////////////////////////////////
    /**
     * 데이터 전체 혹은 일부 행들을 나열하는 container.
     */class DataListContainer extends ReportGroupItem{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);this._rowGap=DataListContainer.DEF_ROW_GAP;this._rowAlign=DataListContainer.DEF_ROW_ALIGN;this._itemAlign=DataListContainer.DEF_ITEM_ALIGN;this.designWidth=100;this.designHeight=160;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** maxRows */get maxRows(){return this._maxRows;}set maxRows(value){if(value!=this._maxRows){const old=this._maxRows;this._maxRows=value;this._changed(DataListContainer.PROP_MAX_ROWS,value,old);}}/** rowGap */get rowGap(){return this._rowGap;}set rowGap(value){if(value!=this._rowGap){const old=this._rowGap;this._rowGap=value;this._changed(DataListContainer.PROP_ROW_GAP,value,old);}}/** rowAlign */get rowAlign(){return this._rowAlign;}set rowAlign(value){if(value!=this._rowAlign){const old=this._rowAlign;this._rowAlign=value;this._changed(DataListContainer.PROP_ROW_ALIGN,value,old);}}/** itemAlign */get itemAlign(){return this._itemAlign;}set itemAlign(value){if(value!=this._itemAlign){const old=this._itemAlign;this._itemAlign=value;this._changed(DataListContainer.PROP_ITEM_ALIGN,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'datalist';}get outlineLabel(){return '[DataList]';}_datable(){return true;}_getEditProps(){const props=super._getEditProps();return props.concat(DataListContainer.PROPINFOS);}_getStyleProps(){return DataListContainer.STYLE_PROPS;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,DataListContainer.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,DataListContainer.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // defaults
    DataListContainer.DEF_ROW_GAP=4;DataListContainer.DEF_ROW_ALIGN=Align.LEFT;DataListContainer.DEF_ITEM_ALIGN=VerticalAlign.TOP;// props
    DataListContainer.PROP_MAX_ROWS="maxRows";DataListContainer.PROP_ROW_GAP="rowGap";DataListContainer.PROP_ROW_ALIGN="rowAlign";DataListContainer.PROP_ITEM_ALIGN="itemAlign";// prop infos
    DataListContainer.PROPINFOS=[{name:DataListContainer.PROP_MAX_ROWS,category:"Data List",type:NumberProperty,multiple:false,default:undefined},{name:DataListContainer.PROP_ROW_GAP,category:"Data List",type:NumberProperty,multiple:false,default:DataListContainer.DEF_ROW_GAP},{name:DataListContainer.PROP_ROW_ALIGN,category:"Data List",type:EnumProperty,domain:Align,multiple:false,default:DataListContainer.DEF_ROW_ALIGN},{name:DataListContainer.PROP_ITEM_ALIGN,category:"Data List",type:EnumProperty,domain:VerticalAlign,multiple:false,default:DataListContainer.DEF_ITEM_ALIGN},ReportItem.VALUE_PROP];// style props
    DataListContainer.STYLE_PROPS=['fontFamily','fontSize','fontWeight','color','backgroundColor','paddingLeft','paddingTop','paddingRight','paddingBottom','border','borderLeft','borderRight','borderTop','borderBottom'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    DataListContainer.$_ctor='DataListContainer';DataListContainer.ITEM_TYPE='DataList';////////////////////////////////////////////////////////////////////////////////
    class BandCell extends ReportGroupItem{//-------------------------------------------------------------------------
    // child property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._weight=1;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get weight(){return this._weight;}set weight(value){value=Math.max(0,Utils.toNumber(value,1));if(value!==this._weight){const old=this._weight;this._weight=value;this._changed(BandCell.PROP_WEIGHT,value,old);}}//-------------------------------------------------------------------------
    // child properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    loadProps(src){this._loadPropsOf(src,BandCell.PROPINFOS);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'bandcell';}get displayPath(){return this.parent?this.parent.displayPath+'.cells['+this.index+']':'';}get outlineLabel(){return '[Band Cell]';}get marqueeParent(){return this.parent;}_getEditProps(){const props=super._getEditProps();return props.concat(BandCell.PROPINFOS);}_getStyleProps(){return BandCell.STYLE_PROPS;}canResize(dir){return false;}_sizable(){return false;}_maxChildCount(){return 1;}canSized(){return false;}needDesignWidth(){return false;}needDesignHeight(){return false;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,BandCell.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,BandCell.PROPINFOS);}canAdd(item){return item instanceof DataBand;}canContainsBand(){return true;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    BandCell.PROP_WEIGHT="weight";// prop infos
    BandCell.PROPINFOS=[{name:BandCell.PROP_WEIGHT,category:PropCategory.BAND_CELL,type:NumberProperty,multiple:false,default:undefined}];// style props
    BandCell.STYLE_PROPS=['backgroundColor'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    BandCell.$_ctor='BandCell';BandCell.ITEM_TYPE='Band Cell';class BandGroup extends ReportGroupItem{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._bandGap=4;this.bandCount=2;this.width='100%';this.designHeight=160;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * band count.
         */get bandCount(){return this.count;}set bandCount(value){value=Utils.toNumber(value,0);if(value!==this.bandCount){const old=this.bandCount;this.$_resetCells(value);this._changed(BandGroup.PROP_BAND_COUNT,value,old);}}/**
         * gap between bands.
         */get bandGap(){return this._bandGap;}set bandGap(value){if(Utils.isNotDefined(value)){value=0;}if(value!=this._bandGap){const old=this._bandGap;this._bandGap=value;this._changed(BandGroup.PROP_BAND_GAP,value,old);}}//-------------------------------------------------------------------------
    // child properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    /**
         * @internal
         * ReportPage에서 bodyItems를 통해 호출한다.
         */loadProps(src){this._loadPropsOf(src,BandGroup.PROPINFOS);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'bandgroup';}get outlineLabel(){return '[Band Group]';}_getEditProps(){const props=super._getEditProps();return props.concat(BandGroup.PROPINFOS);}_getStyleProps(){return BandGroup.STYLE_PROPS;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,BandGroup.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,BandGroup.PROPINFOS);}canAdd(item){return item instanceof BandCell;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_resetCells(count){while(this.count<count){const cell=new BandCell();this.add(cell);}while(this.count>count){this.removeLast();}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    BandGroup.PROP_BAND_COUNT="bandCount";BandGroup.PROP_BAND_GAP="bandGap";// prop infos
    BandGroup.PROPINFOS=[{name:BandGroup.PROP_BAND_COUNT,category:PropCategory.BAND_GROUP,type:NumberProperty,multiple:false,default:undefined,calculated:true},{name:BandGroup.PROP_BAND_GAP,category:PropCategory.BAND_GROUP,type:NumberProperty,multiple:false,default:undefined}];// style props
    BandGroup.STYLE_PROPS=[];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    BandGroup.$_ctor='BandGroup';BandGroup.ITEM_TYPE='Band Group';////////////////////////////////////////////////////////////////////////////////
    /**
     * 다른 페이지가 추가될 자리를 표시한다.
     */class PageItem extends ReportItem{//-------------------------------------------------------------------------
    // child property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * page name.
         */get pageName(){return this._pageName;}set pageName(value){if(value!==this._pageName){const old=this._pageName;this._pageName=old;this._changed(PageItem.PROP_PAGE_NAME,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outlineLabel(){return '[Page]';}getSaveType(){return 'page';}_datable(){return true;}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);// this.width = Math.min(hintWidth || 300, 300);
    // this.height = 100;
    }_getStyleProps(){return PageItem.STYLE_PROPS;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    PageItem.PROP_PAGE_NAME="pageName";// prop infos
    PageItem.PROPINFOS=[{name:PageItem.PROP_PAGE_NAME,category:'page',type:StringProperty,multiple:true,default:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    PageItem.$_ctor='PageItem';PageItem.ITEM_TYPE='Page';// style props
    PageItem.STYLE_PROPS=['fontFamily','fontSize','fontWeight','color','backgroundColor','paddingLeft','paddingTop','paddingRight','paddingBottom','border','borderLeft','borderRight','borderTop','borderBottom'];////////////////////////////////////////////////////////////////////////////////
    /**
     * Scatter 시리즈 류의 marker 모델.
     */class HichartScatterSeriesMarker extends HichartSeriesMarker{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(series){super(series);this._lineWidth=1;this._radius=4;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** line color */get lineColor(){return this._lineColor;}set lineColor(value){if(value!==this._lineColor){const old=this._lineColor;this._lineColor=value;this._changed(HichartScatterSeriesMarker.PROP_LINE_COLOR,value,old);}}/** lineWidth */get lineWidth(){return this._lineWidth;}set lineWidth(value){if(value!==this._lineWidth){const old=this._lineWidth;this._lineWidth=value;this._changed(HichartScatterSeriesMarker.PROP_LINE_WIDTH,value,old);}}/** radius */get radius(){return this._radius;}set radius(value){if(value!==this._radius){const old=this._radius;this._radius=value;this._changed(HichartScatterSeriesMarker.PROP_RADIUS,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getEditProps(){const props=super._getEditProps();return props.concat(HichartScatterSeriesMarker.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartScatterSeriesMarker.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartScatterSeriesMarker.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartScatterSeriesMarker.PROP_LINE_COLOR="lineColor";HichartScatterSeriesMarker.PROP_LINE_WIDTH="lineWidth";HichartScatterSeriesMarker.PROP_RADIUS='radius';// prop infos
    HichartScatterSeriesMarker.PROPINFOS=[{name:HichartScatterSeriesMarker.PROP_LINE_COLOR,category:PropCategory.MARKER,type:ColorProperty,multiple:true,default:undefined},{name:HichartScatterSeriesMarker.PROP_LINE_WIDTH,category:PropCategory.MARKER,type:NumberProperty,multiple:true,default:1},{name:HichartScatterSeriesMarker.PROP_RADIUS,category:PropCategory.MARKER,type:NumberProperty,multiple:true,default:undefined}];/**
     * Hichart Scatter series model.
     */class HichartScatterSeries extends HichartCartesianSeries{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);this._xValues=[161,170,172,147,159,174,154,162,168,167];this._yValues=[51,59,55,49,50,54,46,53,62,58];this._marker=new HichartScatterSeriesMarker(this);this.values=[3,4,7,9,4];this.dataLabels.visible=false;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * x field
         **/get xField(){return this._xField;}set xField(value){if(value!==this._xField){const old=this._xField;this._xField=value;this._changed(HichartScatterSeries.PROP_X_FIELD,value,old);}}/**
         * xField가 지정되면 이 속성은 무시된다.
         */get xValues(){return this._xValues;}set xValues(value){if(value!==this._xValues){const old=this._xValues;this._xValues=value===null||value===void 0?void 0:value.slice();this._changed(HichartScatterSeries.PROP_X_VALUES,value,old);}}/**
         * y field
         **/get yField(){return this._yField;}set yField(value){if(value!==this._yField){const old=this._yField;this._yField=value;this._changed(HichartScatterSeries.PROP_Y_FIELD,value,old);}}/**
         * yField가 지정되면 이 속성은 무시된다.
         */get yValues(){return this._yValues;}set yValues(value){if(value!==this._yValues){const old=this._yValues;this._yValues=value===null||value===void 0?void 0:value.slice();this._changed(HichartScatterSeries.PROP_Y_VALUES,value,old);}}/**
         * name field
         **/get nameField(){return this._nameField;}set nameField(value){if(value!==this._nameField){const old=this._nameField;this._nameField=value;this._changed(HichartScatterSeries.PROP_NAME_FIELD,value,old);}}/**
         * nameField가 지정되면 이 속성은 무시된다.
         */get names(){return this._names&&this._names.slice(0);}set names(value){if(value!==this._names){const old=this._names;this._names=value&&value.slice(0);this._changed(HichartScatterSeries.PROP_NAMES,value,old);}}/** marker */get marker(){return this._marker;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get seriesType(){return 'scatter';}hasValuesProp(){return false;}_getEditProps(){const props=super._getEditProps();return props.concat(HichartScatterSeries.PROPINFOS);}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this._marker.defaultInit(loader,parent,hintWidth,hintHeight);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartScatterSeries.PROPINFOS);this._loadObjects([this._marker],loader,src);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartScatterSeries.PROPINFOS);this._saveObjects([this._marker],target);}getValues(ctx,dp){const xvals=this._getValues(ctx,'x',dp);const yvals=this._getValues(ctx,'y',dp);const names=this._getValues(ctx,'name',dp);const objs=[];if(xvals&&yvals){xvals.forEach((v,i)=>{const obj={x:xvals[i],y:yvals[i]};if(names)obj.name=names[i];objs.push(obj);});}return objs;}wrap(config){const w=super.wrap(config);this._getPropsWrapper(w);w['marker']=this._marker.getWrapper();return Utils.extend(config,w);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartScatterSeries.PROP_X_FIELD='xField';HichartScatterSeries.PROP_X_VALUES='xValues';HichartScatterSeries.PROP_Y_FIELD='yField';HichartScatterSeries.PROP_Y_VALUES='yValues';HichartScatterSeries.PROP_NAME_FIELD='nameField';HichartScatterSeries.PROP_NAMES='names';HichartScatterSeries.PROP_MARKER="marker";// prop infos
    HichartScatterSeries.PROPINFOS=[{name:HichartScatterSeries.PROP_X_FIELD,category:PropCategory.SERIES,type:ListableProperty,multiple:false,default:undefined},{name:HichartScatterSeries.PROP_X_VALUES,category:PropCategory.SERIES,type:NumberArrayProperty,multiple:false,default:undefined},{name:HichartScatterSeries.PROP_Y_FIELD,category:PropCategory.SERIES,type:ListableProperty,multiple:false,default:undefined},{name:HichartScatterSeries.PROP_Y_VALUES,category:PropCategory.SERIES,type:NumberArrayProperty,multiple:false,default:undefined},{name:HichartScatterSeries.PROP_NAME_FIELD,category:PropCategory.SERIES,type:ListableProperty,multiple:false,default:undefined},{name:HichartScatterSeries.PROP_NAMES,category:PropCategory.SERIES,type:StringArrayProperty,multiple:false,default:undefined},{name:HichartScatterSeries.PROP_MARKER,category:PropCategory.MARKER,indented:true,type:ModelProperty,multiple:false,default:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    HichartScatterSeries.$_ctor='HichartScatterSeries';////////////////////////////////////////////////////////////////////////////////
    /**
     * DataMatrix 바코드 아이템.
     * https://github.com/datalog/datamatrix-svg 참조.
     */class DataMatrixItem extends ReportItem{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._text='';}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * 텍스트 데이터
         */get text(){return this._text;}set text(value){if(value!==this._text){const old=this._text;this._text=value;this._changed(DataMatrixItem.PROP_TEXT,value,old);}}/**
         * barcode pad.
         */get pad(){return this._pad;}set pad(value){if(value!==this._pad){const old=this._pad;this._pad=value;this._changed(DataMatrixItem.PROP_PAD,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'datamatrix';}get outlineLabel(){return "DataMatrix";}/**
         * DataMatrix 아이템 생성 시, 수행할 초기화 작업 정의
         *
         * @remarks
         * DataMatrix 아이템 크기 및 텍스트 데이터 지정
         */_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.text='https://www.real-report.com/';this.width=100;this.height=100;}_getEditProps(){const props=super._getEditProps();return props.concat(DataMatrixItem.PROPINFOS);}_getStyleProps(){return DataMatrixItem.STYLE_PROPS;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,DataMatrixItem.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,DataMatrixItem.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    DataMatrixItem.MIN_SIZE=10;// props
    DataMatrixItem.PROP_TEXT='text';DataMatrixItem.PROP_PAD='pad';// prop infos
    DataMatrixItem.PROPINFOS=[{name:DataMatrixItem.PROP_TEXT,category:PropCategory.BARCODE,type:StringProperty},{name:DataMatrixItem.PROP_PAD,category:PropCategory.BARCODE,type:NumberProperty}];// style props
    DataMatrixItem.STYLE_PROPS=['color','backgroundColor','border'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    DataMatrixItem.$_ctor='DataMatrixItem';DataMatrixItem.ITEM_TYPE='DataMatrix';////////////////////////////////////////////////////////////////////////////////
    /**
     * Hichart Boxplot series model.
     */class HichartBoxplotSeries extends HichartCartesianSeries{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);this._lowValues=[760,733,714,724,834];this._q1Values=[801,853,762,802,836];this._medianValues=[848,939,817,806,864];this._q3Values=[895,980,870,871,882];this._highValues=[965,1080,918,950,910];this.dataLabels.visible=false;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * low field
         **/get lowField(){return this._lowField;}set lowField(value){if(value!==this._lowField){const old=this._lowField;this._lowField=value;this._changed(HichartBoxplotSeries.PROP_LOW_FIELD,value,old);}}/**
         * lowField가 지정되면 이 속성은 무시된다.
         */get lowValues(){return this._lowValues;}set lowValues(value){if(value!==this._lowValues){const old=this._lowValues;this._lowValues=value===null||value===void 0?void 0:value.slice();this._changed(HichartBoxplotSeries.PROP_LOW_VALUES,value,old);}}/**
         * q1 field
         **/get q1Field(){return this._q1Field;}set q1Field(value){if(value!==this._q1Field){const old=this._q1Field;this._q1Field=value;this._changed(HichartBoxplotSeries.PROP_Q1_FIELD,value,old);}}/**
         * q1Field가 지정되면 이 속성은 무시된다.
         */get q1Values(){return this._q1Values;}set q1Values(value){if(value!==this._q1Values){const old=this._q1Values;this._q1Values=value===null||value===void 0?void 0:value.slice();this._changed(HichartBoxplotSeries.PROP_Q1_VALUES,value,old);}}/**
         * median field
         **/get medianField(){return this._medianField;}set medianField(value){if(value!==this._medianField){const old=this._medianField;this._medianField=value;this._changed(HichartBoxplotSeries.PROP_MEDIAN_FIELD,value,old);}}/**
         * medianField가 지정되면 이 속성은 무시된다.
         */get medianValues(){return this._medianValues;}set medianValues(value){if(value!==this._medianValues){const old=this._medianValues;this._medianValues=value===null||value===void 0?void 0:value.slice();this._changed(HichartBoxplotSeries.PROP_MEDIAN_VALUES,value,old);}}/**
         * q3 field
         **/get q3Field(){return this._q3Field;}set q3Field(value){if(value!==this._q3Field){const old=this._q3Field;this._q3Field=value;this._changed(HichartBoxplotSeries.PROP_Q3_FIELD,value,old);}}/**
         * q3Field가 지정되면 이 속성은 무시된다.
         */get q3Values(){return this._q3Values;}set q3Values(value){if(value!==this._q3Values){const old=this._q3Values;this._q3Values=value===null||value===void 0?void 0:value.slice();this._changed(HichartBoxplotSeries.PROP_Q3_VALUES,value,old);}}/**
         * high field
         **/get highField(){return this._highField;}set highField(value){if(value!==this._highField){const old=this._highField;this._highField=value;this._changed(HichartBoxplotSeries.PROP_HIGH_FIELD,value,old);}}/**
         * highField가 지정되면 이 속성은 무시된다.
         */get highValues(){return this._highValues;}set highValues(value){if(value!==this._highValues){const old=this._highValues;this._highValues=value===null||value===void 0?void 0:value.slice();this._changed(HichartBoxplotSeries.PROP_HIGH_VALUES,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get seriesType(){return 'boxplot';}hasValuesProp(){return false;}_getEditProps(){const props=super._getEditProps();return props.concat(HichartBoxplotSeries.PROPINFOS);}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartBoxplotSeries.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartBoxplotSeries.PROPINFOS);}getValues(ctx,dp){const lowvals=this._getValues(ctx,'low',dp);const q1vals=this._getValues(ctx,'q1',dp);const medianvals=this._getValues(ctx,'median',dp);const q3vals=this._getValues(ctx,'q3',dp);const highvals=this._getValues(ctx,'high',dp);const objs=[];if(lowvals&&q1vals&&medianvals&&q3vals&&highvals){lowvals.forEach((v,i)=>{const obj={low:lowvals[i],q1:q1vals[i],median:medianvals[i],q3:q3vals[i],high:highvals[i]};objs.push(obj);});}return objs;}wrap(config){const w=super.wrap(config);this._getPropsWrapper(w);return Utils.extend(config,w);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartBoxplotSeries.PROP_LOW_FIELD='lowField';HichartBoxplotSeries.PROP_LOW_VALUES='lowValues';HichartBoxplotSeries.PROP_Q1_FIELD='q1Field';HichartBoxplotSeries.PROP_Q1_VALUES='q1Values';HichartBoxplotSeries.PROP_MEDIAN_FIELD='medianField';HichartBoxplotSeries.PROP_MEDIAN_VALUES='medianValues';HichartBoxplotSeries.PROP_Q3_FIELD='q3Field';HichartBoxplotSeries.PROP_Q3_VALUES='q3Values';HichartBoxplotSeries.PROP_HIGH_FIELD='highField';HichartBoxplotSeries.PROP_HIGH_VALUES='highValues';// prop infos
    HichartBoxplotSeries.PROPINFOS=[{name:HichartBoxplotSeries.PROP_LOW_FIELD,category:PropCategory.SERIES,type:ListableProperty,multiple:false,default:undefined},{name:HichartBoxplotSeries.PROP_LOW_VALUES,category:PropCategory.SERIES,type:NumberArrayProperty,multiple:false,default:undefined},{name:HichartBoxplotSeries.PROP_Q1_FIELD,category:PropCategory.SERIES,type:ListableProperty,multiple:false,default:undefined},{name:HichartBoxplotSeries.PROP_Q1_VALUES,category:PropCategory.SERIES,type:NumberArrayProperty,multiple:false,default:undefined},{name:HichartBoxplotSeries.PROP_MEDIAN_FIELD,category:PropCategory.SERIES,type:ListableProperty,multiple:false,default:undefined},{name:HichartBoxplotSeries.PROP_MEDIAN_VALUES,category:PropCategory.SERIES,type:NumberArrayProperty,multiple:false,default:undefined},{name:HichartBoxplotSeries.PROP_Q3_FIELD,category:PropCategory.SERIES,type:ListableProperty,multiple:false,default:undefined},{name:HichartBoxplotSeries.PROP_Q3_VALUES,category:PropCategory.SERIES,type:NumberArrayProperty,multiple:false,default:undefined},{name:HichartBoxplotSeries.PROP_HIGH_FIELD,category:PropCategory.SERIES,type:ListableProperty,multiple:false,default:undefined},{name:HichartBoxplotSeries.PROP_HIGH_VALUES,category:PropCategory.SERIES,type:NumberArrayProperty,multiple:false,default:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    HichartBoxplotSeries.$_ctor='HichartBoxplotSeries';////////////////////////////////////////////////////////////////////////////////
    /**
     * Hichart Histogram series model.
     */class HichartHistogramSeries extends HichartCartesianSeries{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(chart){super(chart);this.dataLabels.visible=false;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * baseSeries.
         */get baseSeries(){return this._baseSeries;}set baseSeries(value){if(value!==this._baseSeries){const old=this._baseSeries;this._baseSeries=value;this._changed(HichartHistogramSeries.PROP_BASE_SERIES,value,old);}}/**
         * binsNumber
         */get binsNumber(){const v=+this._binsNumber;return isNaN(v)?this._binsNumber:v;}set binsNumber(value){if(value!==this._binsNumber){const old=this._binsNumber;this._binsNumber=value;this._changed(HichartHistogramSeries.PROP_BINS_NUMBER,value,old);}}/**
         * binWidth.
         */get binWidth(){return this._binWidth;}set binWidth(value){if(value!==this._binWidth){const old=this._binWidth;this._binWidth=value;this._changed(HichartHistogramSeries.PROP_BIN_WIDTH,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get seriesType(){return 'histogram';}_getEditProps(){const props=super._getEditProps();return props.concat(HichartHistogramSeries.PROPINFOS);}getPropDomain(prop){if(prop.name===HichartHistogramSeries.PROP_BASE_SERIES){return this.chart.series.getIds(this.id);}}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HichartHistogramSeries.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HichartHistogramSeries.PROPINFOS);}wrap(target){super.wrap(target);return this.assignProps(target,[HichartHistogramSeries.PROP_BASE_SERIES,HichartHistogramSeries.PROP_BINS_NUMBER,HichartHistogramSeries.PROP_BIN_WIDTH]);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HichartHistogramSeries.PROP_BASE_SERIES='baseSeries';HichartHistogramSeries.PROP_BINS_NUMBER='binsNumber';HichartHistogramSeries.PROP_BIN_WIDTH='binWidth';// prop infos
    HichartHistogramSeries.PROPINFOS=[{name:HichartHistogramSeries.PROP_BASE_SERIES,category:PropCategory.SERIES,type:ListableProperty},{name:HichartHistogramSeries.PROP_BINS_NUMBER,category:PropCategory.SERIES,type:EditListableProperty,domain:[undefined,"square-root","sturges","rice"]},{name:HichartHistogramSeries.PROP_BIN_WIDTH,category:PropCategory.SERIES,type:NumberProperty}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    HichartHistogramSeries.$_ctor='HichartHistogramSeries';////////////////////////////////////////////////////////////////////////////////
    const TAGS=['/','br','b','i','strong','em','mark','site','dfn','span','img'];/**
     * html 속성으로 지정한 문자열을 dom의 innerHtml로 설정한다.
     * 문자열에 포함된 '${value}'나 '@{value}'는 연결된 field의 값으로 대체되고,
     * 나머지 '${xxx}', '@{xxx}'는 'xxx' 필드의 값으로 대체된다.
     */class HtmlItem extends ReportItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         */get html(){return this._html;}set html(value){if(value){let prev=0;while(true){const i=value.indexOf('<',prev);if(i>=0){let found=false;for(const tag of TAGS){if(value.startsWith(tag,i+1)){found=true;prev=i+tag.length;break;}}if(!found){console.error('사용할 수 없는 tag입니다: '+value.substring(i));break;}}else {break;}}}if(value!=this._html){const old=this._html;this._html=value;this.$_parseValues(value);this._changed(HtmlItem.PROP_HTML,value,old);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getHtml(ctx){const toks=this._tokens;let s=this._html;if(ctx.printing&&toks&&toks.length>0){const data=this.data;let s2='';let prev=0;toks.forEach(tok=>{s2+=s.substring(prev,tok.from);let field=s.substring(tok.from+2,tok.to-1);if(field==='value')field=this.value;const v=ctx.dp.getValueAt(data,field,ctx.row);s2+=v===void 0?'':v;prev=tok.to;});s=s2+s.substring(prev,s.length);}return s||'';}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    getSaveType(){return 'html';}get outlineLabel(){return '[Html]';}_doDefaultInit(loader,parent,hintWidth,hintHeight){super._doDefaultInit(loader,parent,hintWidth,hintHeight);this.html='${value}';}_getEditProps(){const props=super._getEditProps();return props.concat(HtmlItem.PROPINFOS);}_getStyleProps(){return HtmlItem.STYLE_PROPS;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,HtmlItem.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,HtmlItem.PROPINFOS);}canRotate(){return true;}canAdoptDragSource(source){return source instanceof ReportDataPath;}adoptDragSource(source){if(source instanceof ReportDataPath){return {type:DropResultType.PROP,prop:'value',value:source.data+'::'+source.path};}}canPropAdoptDragSource(prop,source){return prop.name==='value'&&source instanceof ReportDataPath;}adoptPropDragSource(prop,source){if(prop.name==='value'&&source instanceof ReportDataPath){return {type:DropResultType.PROP,prop:'value',value:source.data+'::'+source.path};}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_parse(s,from,prefix){const i=s.indexOf(prefix,from);if(i>=0){const j=s.indexOf('}',i+prefix.length);if(j>=0){return {from:i,to:j+1};}}}$_parseValues(s){let toks=this._tokens=void 0;if(s){let i=0;while(true){const tok=this.$_parse(s,i,'${')||this.$_parse(s,i,'%{');if(tok){if(!toks){toks=this._tokens=[];}toks.push(tok);i=tok.to;}else {break;}}}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    HtmlItem.PROP_HTML="html";// prop infos
    HtmlItem.PROPINFOS=[{name:HtmlItem.PROP_HTML,category:PropCategory.TEXT,type:StringProperty,multiple:true,default:undefined}];// style props
    HtmlItem.STYLE_PROPS=['fontFamily','fontSize','fontStyle','textDecoration','fontWeight','lineHeight','color','backgroundColor','textAlign',/*'verticalAlign',*/ /*'whiteSpace',*/'writingMode','scale','paddingLeft','paddingTop','paddingRight','paddingBottom','border','borderLeft','borderRight','borderTop','borderBottom'];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    HtmlItem.$_ctor='HtmlItem';HtmlItem.ITEM_TYPE='Html';////////////////////////////////////////////////////////////////////////////////
    /**
     * ReportLoader 기본 구현체.
     */class ReportLoaderImpl extends Base{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){super();//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._itemCreators={text:name=>new TextItem(name),summary:name=>new SummaryItem(name),image:name=>new ImageItem(name),check:name=>new CheckItem(name),stack:name=>new StackContainer(name),cbox:name=>new ColumnBoxContainer(name),rbox:name=>new RowBoxContainer(name),dbox:name=>new DiagonalBoxContainer(name),list:name=>new ListContainer(name),table:name=>new TableContainer(name),space:name=>new SpaceItem(name),simpleband:name=>new SimpleBand(name),tableband:name=>new TableBand(name),bandgroup:name=>new BandGroup(name),bandcell:name=>new BandCell(name),crosstab:name=>new CrosstabBand(name),datalist:name=>new DataListContainer(name),floating:name=>new FloatingContainer(name),shape:name=>new ShapeItem(name),barcode:name=>new BarcodeItem(name),qrcode:name=>new QrcodeItem(name),datamatrix:name=>new DataMatrixItem(name),bar:name=>new BarItem(name),rating:name=>new RatingItem(name),html:name=>new HtmlItem(name),svg:name=>new SvgItem(name),chart:name=>new HichartItem(name),hichart:name=>new HichartItem(name),highchart:name=>new HichartItem(name),page:name=>new PageItem(name)};this._hichartSeriesCreators={column:chart=>new HichartColumnSeries(chart),bar:chart=>new HichartBarSeries(chart),line:chart=>new HichartLineSeries(chart),spline:chart=>new HichartSplineSeries(chart),area:chart=>new HichartAreaSeries(chart),areaspline:chart=>new HichartAreaSplineSeries(chart),arearange:chart=>new HichartAreaRangeSeries(chart),pie:chart=>new HichartPieSeries(chart),bubble:chart=>new HichartBubbleSeries(chart),scatter:chart=>new HichartScatterSeries(chart),boxplot:chart=>new HichartBoxplotSeries(chart),histogram:chart=>new HichartHistogramSeries(chart)// heatmap: (chart) => new HichartHeatmapSeries(chart),
    };}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // IReportLoader
    //-------------------------------------------------------------------------
    createItem(src){const type=typeof src==='string'?src:src.type;const name=src.name;const creator=this._itemCreators[type];let item=creator&&creator(name);if(!item&&(src.hasOwnProperty("text")||src.hasOwnProperty("value")||src.hasOwnProperty("title"))){item=new TextItem(name);}return item;}createHichartSeries(chart,src){let type=typeof src==='string'?src:src.type;const creator=this._hichartSeriesCreators[type]||this._hichartSeriesCreators['column'];return creator&&creator(chart);}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Report item을 추가한다.
     */class AddItemCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(parent,item){super('Add Item');assert(!!parent);assert(!!item);assert(parent!==item);this._parent=parent;this._item=item;}_doDispose(){this._parent=this._item=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** parent */get parent(){return this._parent;}/** item */get item(){return this._item;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    undo(){this._parent.remove(this._item);}redo(redoing){if(!this._parent.add(this._item)){throw new EditCommandFailed('Item is not added.');}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._item;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Report item의 속성을 변경한다.
     */class SetPropCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item,prop,value){super('Set Property');assert(!!item);assert(!!prop);this._item=item;this._prop=prop;this._childProp=item instanceof ReportItem&&item.isChildProp(prop);this._newValue=value;this._oldValue=this._childProp?item.getChildProp(prop):item[prop];}_doDispose(){this._item=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** item */get item(){return this._item;}/** prop */get prop(){return this._prop;}/** childProp */get childProp(){return this._childProp;}/** oldValue */get oldValue(){return this._oldValue;}/** newValue */get newValue(){return this._newValue;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    undo(){if(this._childProp){this._item.setChildProp(this._prop,this._oldValue);}else {this._item[this._prop]=this._oldValue;}}redo(redoing){if(this._childProp){this._item.setChildProp(this._prop,this._newValue);}else {this._item[this._prop]=this._newValue;}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get description(){return 'prop.'+this._prop+': '+this._oldValue+' -> '+this._newValue;}get source(){return this._item;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * BandData의 필드를 수정한다.
     */class UpdateDataBandFieldCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(data,index,field){super('Update Band Field');assert(!!data);assert(!!field);this._data=data;this._index=index;this._field=field;this._oldField={...data.getField(index)};}_doDispose(){this._data=this._field=this._oldField=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** data */get data(){return this._data;}/** index */get index(){return this._index;}/** field */get field(){return this._field;}/** oldField */get oldField(){return this._oldField;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    undo(){this._data.setField(this._index,this._oldField);}redo(redoing){this._data.setField(this._index,this._field);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    get source(){return this._data;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * BandData에 필드를 추가한다.
     */class AddDataBandFieldCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(data,index,field){super('Add Band Field');assert(!!data);assert(!!field);this._data=data;this._index=index;this._field=field;}_doDispose(){this._data=this._field=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** data */get data(){return this._data;}/** index */get index(){return this._index;}/** field */get field(){return this._field;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._data.addField(this._index,this._field);}undo(){this._data.removeField(this._field);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    get source(){return this._data;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * BandData에서 필드를 제거한다.
     */class RemoveBandDataFieldCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(data,index,field){super('Remove Band Field');assert(!!data);assert(!!field);this._data=data;this._index=index;this._field=field;}_doDispose(){this._data=this._field=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** data */get data(){return this._data;}/** index */get index(){return this._index;}/** field */get field(){return this._field;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._data.removeField(this._field);}undo(){this._data.addField(this._index,this._field);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    get source(){return this._data;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * 출력 시 데이터를 제공한다.
     */class ReportDataProvider extends Base{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){super();//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._dataMap={};}_doDispose(){this._dataMap=null;this._contextData=null;super._doDispose();}//-------------------------------------------------------------------------
    // IReportDataProvider
    //-------------------------------------------------------------------------
    preparePrint(ctx){this._contextData=new ContextData(ctx);for(let name in this._dataMap){const data=this._dataMap[name];if(data instanceof ReportData){data.preparePrint(ctx,false);}}}getAll(){const list=[];for(let name in this._dataMap){list.push(this._dataMap[name]);}return list;}get(name){return this._dataMap[name];}getContextValue(path){return this._contextData.getValue(path);}/**
         * @param path data name + "." + data path
         */getValue(path,row){if(path){const p=path.indexOf('::');const n=p>=0?path.substring(0,p):path;const data=this._dataMap[n];if(data){path=p>=0?path.substr(p+2):null;if(data instanceof BandData){if(row>=0){return data.getRowValue(row,path);}}else {return data.getValue(path);}}}}getValueAt(data,path,row){const d=this._dataMap[data];if(d){if(d instanceof BandData){return d.getRowValue(row,path);}else {return d.getValue(path);}}}getFieldValues(data,field,rows){const d=this._dataMap[data];if(d){if(d instanceof BandData){return d.getFieldValues(field,rows);}else {return [d.getValue(field)];}}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    clear(){this._dataMap={};this._contextData=null;return this;}register(name,data){if(!name)name=data.name;if(validateRegisterReportData(name,this._dataMap,data))this._dataMap[name]=data;return this;}load(source){validateLoadReportData(source,this);for(let key in source){const reportData=source[key];const values=reportData.values;let dataType=reportData.type;if(!dataType)dataType=validateReportDataType(key,values);switch(dataType){case'band':this.register(key,new BandArrayData(key,null,values));break;case'simple':this.register(key,new SimpleData(key,values));break;// validateReportDataType()에서 검수된다.
    default:throw new Error("데이터의 형식이 잘못되었습니다.");}}return this;}}function checkDataTypeValues(key,data){if(data.type===ReportDataType.SIMPLE&&Utils.isArray(data.values)){console.warn("[".concat(key,"] \uB370\uC774\uD130\uC758 type\uC740 ").concat(ReportDataType.SIMPLE,"\uB85C \uC120\uC5B8\uB410\uC73C\uB098 ").concat(ReportDataType.BAND," \uB370\uC774\uD130\uB85C \uB85C\uB4DC\uB429\uB2C8\uB2E4."));}if(data.type===ReportDataType.BAND&&Utils.isObject(data.values)){console.warn("[".concat(key,"] \uB370\uC774\uD130\uC758 type\uC740 ").concat(ReportDataType.BAND,"\uB85C \uC120\uC5B8\uB410\uC73C\uB098 ").concat(ReportDataType.SIMPLE," \uB370\uC774\uD130\uB85C \uB85C\uB4DC\uB429\uB2C8\uB2E4."));}}function validateDesignManagerData(key,data){if(!(data.hasOwnProperty('sample')||data.hasOwnProperty('fields')))throw new Error("".concat(key," ").concat(ReportDataErrorMessage.DATA_FORMAT_IS_INCORRECT));}function validateReportDataProvider(key,data){if(!data.hasOwnProperty('values'))throw new Error("".concat(key," \uB370\uC774\uD130\uC758 values \uB370\uC774\uD130\uAC00 \uC874\uC7AC\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4."));checkDataTypeValues(key,data);}function validateRegisterReportData(name,dataMap,data){if(!(data&&data.name))return false;if(dataMap[name])throw new Error("Data is already exists: ".concat(name));return true;}function validateLoadReportData(data,type){if(!data)throw new Error(ReportDataErrorMessage.DATA_FORMAT_IS_INCORRECT);// 빈 객체({})로 넘어오면 그냥 통과된다.
    for(let key in data){if(!(data[key]&&Utils.isObjectNotEmpty(data[key])))throw new Error("".concat(key," ").concat(ReportDataErrorMessage.DATA_FORMAT_IS_INCORRECT));if(type instanceof DesignDataManager)validateDesignManagerData(key,data[key]);if(type instanceof ReportDataProvider)validateReportDataProvider(key,data[key]);}}function validateReportDataType(key,data){if(Utils.isArray(data))return 'band';else if(Utils.isObject(data))return 'simple';throw new Error("".concat(key," ").concat(ReportDataErrorMessage.DATA_FORMAT_IS_INCORRECT));}////////////////////////////////////////////////////////////////////////////////
    /**
     * Design-time data provider
     */class DesignDataManager extends EventAware{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(commands){super();this._dataMap={};this._commands=commands;}_doDispose(){this._dataMap=null;this._contextData=null;super._doDispose();}//-------------------------------------------------------------------------
    // IReportDataProvider
    //-------------------------------------------------------------------------
    get designTime(){return true;}preparePrint(ctx){this._contextData=new ContextData(ctx);this._contextData.preparePrint(ctx,true);for(let name in this._dataMap){const data=this._dataMap[name];if(data instanceof ReportData){data.preparePrint(ctx,true);}}}getAll(){const list=[];for(let name in this._dataMap){list.push(this._dataMap[name]);}return list;}getNames(){const list=[];for(let name in this._dataMap){list.push(name);}return list;}get(name){return this._dataMap[name];}getContextValue(path){return this._contextData.getValue(path);}/**
         * @param path data name + "." + data path
         */getValue(path,row){if(path){const p=path.indexOf('::');const n=p>=0?path.substring(0,p):path;const data=this._dataMap[n];if(data){path=p>=0?path.substr(p+2):null;if(data instanceof BandData){return data.getRowValue(row,path);}else {return data.getValue(path);}}}}getValueAt(data,path,row){const d=this._dataMap[data];if(d){if(d instanceof BandData){return d.getRowValue(row,path);}else {return d.getValue(path);}}}getFieldValues(data,field,rows){const d=this._dataMap[data];if(d){if(d instanceof BandData){return d.getFieldValues(field,rows);}else {return [d.getValue(field)];}}}addData(data){if(data){this.$_register(null,data);this.$_fireDataAdded(data);return true;}}removeData(data){const name=typeof data==='string'?data:data.name;const d=this.get(name);if(d){this.$_unregister(d);this.$_fireDataRemoved(d);return d;}}dataNameChanged(data,oldName){this.fireEvent(DesignDataManager.NAME_CHANGED,data,oldName);}fieldNameChanged(data,newName,oldName){this.fireEvent(DesignDataManager.FIELD_NAME_CHANGED,data,newName,oldName);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    load(source){validateLoadReportData(source,this);for(let key in source){const src=source[key];const sample=src.sample;const fields=src.fields;let dataType=src.type;if(!dataType)dataType=validateReportDataType(key,sample);switch(dataType){// fields에 fieldName 없으면 BandArrayData 클래스 자체에서 생성할 때 에러처리
    case'band':this.$_register(key,new BandArrayData(key,fields,sample,src.sampleCount,this));break;case'simple':this.$_register(key,new SimpleData(key,sample));break;// validateReportDataType()에서 검수된다.
    default:throw new Error("데이터의 형식이 잘못되었습니다.");}}return this;}save(target){for(let d in this._dataMap){const data=this._dataMap[d];const sample=data.getSaveValues();const t=target[d]={type:data.getSaveType()};if(sample){t.sample=sample;}if(data instanceof BandData){t.fields=data.getSaveFields();}}}getFieldIndex(data,field){const d=this._dataMap[data];if(d instanceof BandData){return d.getFieldIndex(field);}return -1;}updateField(data,index,field){var _a;(_a=this._commands)===null||_a===void 0?void 0:_a.execute(new UpdateDataBandFieldCommand(data,index,field));this.$_fireDataUpdated(data);}addField(data,index,field){var _a;if(field&&data.indexOfField(field)<0){(_a=this._commands)===null||_a===void 0?void 0:_a.execute(new AddDataBandFieldCommand(data,index,field));this.$_fireDataUpdated(data);}}removeField(data,field){var _a;const index=data.indexOfField(field);if(index>=0){(_a=this._commands)===null||_a===void 0?void 0:_a.execute(new RemoveBandDataFieldCommand(data,index,field));this.$_fireDataUpdated(data);}}renameData(data,newName){delete this._dataMap[data.name];data.name=newName;this._dataMap[newName]=data;// TODO: report에서 사용된 이름 모두 변경.
    }//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_register(name,data){if(!name)name=data.name;if(validateRegisterReportData(name,this._dataMap,data)){data['_dp']=this;this._dataMap[name]=data;return data;}}$_unregister(data){if(data&&data['_dp']===this){delete this._dataMap[data.name];data['_dp']=null;}}//-------------------------------------------------------------------------
    // event members
    //-------------------------------------------------------------------------
    $_fireDataAdded(data){this.fireEvent(DesignDataManager.DATA_ADDED,data);}$_fireDataRemoved(data){this.fireEvent(DesignDataManager.DATA_REMOVED,data);}$_fireDataUpdated(data){this.fireEvent(DesignDataManager.DATA_UPDATED,data);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // events
    DesignDataManager.DATA_ADDED="onDesignDataManagerDataAdded";DesignDataManager.DATA_REMOVED="onDesignDataManagerDataRemoved";DesignDataManager.DATA_UPDATED="onDesignDataManagerDataUpdated";DesignDataManager.NAME_CHANGED="onDesignDataManagerNameChanged";DesignDataManager.FIELD_NAME_CHANGED="onDesignDataManagerFieldNameChanged";////////////////////////////////////////////////////////////////////////////////
    /**
     * Asset item을 추가한다.
     */class AddAssetCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(manager,group,item){super('Add Asset');assert(!!manager);assert(!!item);this._manager=manager;this._group=group||manager.root;this._item=item;}_doDispose(){this._group=this._item=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** manager */get manager(){return this._manager;}/** group */get group(){return this._group;}/** item */get item(){return this._item;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    undo(){this._manager.remove(this._item);}redo(redoing){this._manager.add(this._group,this._item);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._item;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Asset item을 제거한다.
     */class RemoveAssetCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(manager,item){super('Remove Asset');assert(!!manager);assert(!!item);this._manager=manager;this._group=item.parent;this._item=item;}_doDispose(){this._group=this._item=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** manager */get manager(){return this._manager;}/** group */get group(){return this._group;}/** item */get item(){return this._item;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    undo(){this._manager.add(this._group,this._item);}redo(redoing){this._manager.remove(this._item);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._group;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Design data provider의 data 이름을 변경한다.
     */class RenameDataCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(dm,data,newName){super('Set Property');assert(!!dm);assert(!!data);assert(!!newName);this._dm=dm;this._data=data;this._oldName=data.name;this._newName=newName;}_doDispose(){this._dm=null;this._data=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** data */get data(){return this._data;}/** oldName */get oldName(){return this._oldName;}/** newName */get newName(){return this._newName;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    undo(){this._dm.renameData(this._data,this._oldName);}redo(redoing){this._dm.renameData(this._data,this._newName);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get description(){return 'rename data: '+this._oldName+' -> '+this._newName;}get source(){return this._data;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Design data provider의 data를 추가한다.
     */class AddDataCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(dm,data){super('Add Data');assert(!!dm);assert(!!data);this._dm=dm;this._data=data;}_doDispose(){this._dm=null;this._data=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** data */get data(){return this._data;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    undo(){this._dm.removeData(this._data);}redo(redoing){this._dm.addData(this._data);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get description(){return 'Add data: '+this._data.name;}get source(){return this._data;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Design data provider의 data를 제거한다.
     */class RemoveDataCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(dm,data){super('Remove Data');assert(!!dm);assert(!!data);this._dm=dm;this._data=data;}_doDispose(){this._dm=null;this._data=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** data */get data(){return this._data;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    undo(){this._dm.addData(this._data);}redo(redoing){this._dm.removeData(this._data);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get description(){return 'Remove data: '+this._data.name;}get source(){return this._data;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Simple data 값들을 변경한다.
     */class SaveSimpleDataCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(data,values){super('Save Simple Data');assert(!!data);assert(!!values);this._data=data;this._values=values;}_doDispose(){this._data=null;this._values=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** data */get data(){return this._data;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    undo(){this._data.setSample(this._oldValues);}redo(redoing){this._data.setSample(this._values);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get description(){return 'Save simple data: '+this._data.name;}get source(){return this._data;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Report item의 style 속성을 변경한다.
     */class SetStyleCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item,style,value){super('Set Style');assert(!!item);assert(!!style);this._item=item;this._style=style;this._newValue=value;this._oldValue=this._item.getStyle(style);}_doDispose(){this._item=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** item */get item(){return this._item;}/** style */get style(){return this._style;}/** oldValue */get oldValue(){return this._oldValue;}/** newValue */get newValue(){return this._newValue;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    undo(){this._item.setStyle(this._style,this._oldValue);}redo(redoing){this._item.setStyle(this._style,this._newValue);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get description(){return 'style.'+this._style+': '+this._oldValue+' -> '+this._newValue;}get source(){return this._item;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Report item의 위치를 변경한다.
     */class MoveItemCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item,newX,newY){let persitant=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;super('Move Item');assert(!!item);this._item=item;this._oldLeft=item.left;this._oldRight=item.right;this._oldTop=item.top;this._oldBottom=item.bottom;this._newLeft=newX;this._newTop=newY;this._persistant=persitant;}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static createCommands(items,newPts){if(items&&items.length>0){const cmds=[];items.forEach((item,i)=>{cmds.push(new MoveItemCommand(item,newPts[i].x,newPts[i].y));});return cmds.length>0?cmds:null;}}_doDispose(){this._item=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._item.setChildProp('left',this._newLeft);!this._persistant&&this._item.setChildProp('right',undefined);this._item.setChildProp('top',this._newTop);!this._persistant&&this._item.setChildProp('bottom',undefined);}undo(){this._item.setChildProp('left',this._oldLeft);!this._persistant&&this._item.setChildProp('right',this._oldRight);this._item.setChildProp('top',this._oldTop);!this._persistant&&this._item.setChildProp('bottom',this._oldBottom);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get description(){return 'Move item: '+this._item.designText;}get source(){return this._item;}}/**
     * Report item들의 위치를 변경한다.
     */class MoveItemsCommand extends EditCommandGroup{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(items,newPts){super('Move Items',MoveItemCommand.createCommands(items,newPts));}}/**
     * Report item의 수평 혹은 수직 위치를 변경한다.
     */class MoveItemDirCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item,dir,newPt){super('Move Item One Way');assert(!!item);this._item=item;this._dir=dir;this._old=item[dir];this._new=newPt;}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static createCommands(items,dir,newPts){if(items&&items.length>0){const cmds=[];items.forEach((item,i)=>{cmds.push(new MoveItemDirCommand(item,dir,newPts[i]));});return cmds.length>0?cmds:null;}}_doDispose(){this._item=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._item.setChildProp(this._dir,this._new);}undo(){this._item.setChildProp(this._dir,this._old);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get description(){return 'Move item One Way: '+this._item.designText;}get source(){return this._item;}}/**
     * Report item들의 위치를 변경한다.
     */class MoveItemsDirCommand extends EditCommandGroup{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(items,dir,newPts){super('Move Items One Way',MoveItemDirCommand.createCommands(items,dir,newPts));}}/**
     * Report collection item의 위치를 변경한다.
     */class MoveCollectionItemCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(collection,from,to){super('Move Collection Item');assert(!!collection);this._collection=collection;this._from=from;this._to=to;}_doDispose(){this._collection=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._collection.moveItem(this._from,this._to);}undo(){this._collection.moveItem(this._to,this._from);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get description(){return 'Move collection item: '+this._from+' -> '+this._to;}get source(){return this._collection.get(this._to);}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Report item의 크기를 변경한다.
     */class ResizeItemCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item,saveWidth,saveHeight,oldWidth,oldHeight,dx,dy){super('Resize Item');assert(!!item);this._item=item;this._saveWidth=saveWidth;this._saveHeight=saveHeight;this._oldWidth=oldWidth;this._oldHeight=oldHeight;this._dx=dx;this._dy=dy;}_doDispose(){this._item=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){if(this._dx){this._item.width=this._oldWidth+this._dx;}if(this._dy){this._item.height=this._oldHeight+this._dy;}}undo(){if(this._dx){this._item.width=this._saveWidth;}if(this._dy){this._item.height=this._saveHeight;}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get description(){return 'Resize item: '+this._item.designText;}get source(){return this._item;}}class ResizeAndMoveCommand extends EditCommandGroup{//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static createCommand(item,saveWidth,saveHeight,oldWidth,oldHeight,dx,dy,newX,newY){return [new ResizeItemCommand(item,saveWidth,saveHeight,oldWidth,oldHeight,dx,dy),new MoveItemCommand(item,newX,newY,true)];}//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item,saveWidth,saveHeight,oldWidth,oldHeight,dx,dy,newX,newY){super('Resize and Move Item',ResizeAndMoveCommand.createCommand(item,saveWidth,saveHeight,oldWidth,oldHeight,dx,dy,newX,newY));}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Report item의 속성들을 변경한다.
     */class SetPropsCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item,props){super('Set Properties');assert(!!item);assert(!!props);this._item=item;this._props={...props};this._oldProps=item.getProperties(props);}_doDispose(){this._item=null;this._props=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** item */get item(){return this._item;}/** props */get props(){return this._props;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._item.setProperties(this._props);}undo(){this._item.setProperties(this._oldProps);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._item;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Report item의 (기본 styles 속성 외에) 추가 속성 styles의 style을 변경한다.
     * ex) cellStyles, prefixStyles, suffixStyles, ...
     */class SetChildStyleCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item,prop,style,value){super('Set Child Style');assert(!!item);assert(!!prop);assert(!!style);this._item=item;this._prop=prop;this._style=style;this._newValue=value;this._oldValue=this._item['_getSubStyle'](prop,style);}_doDispose(){this._item=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** item */get item(){return this._item;}/** prop */get prop(){return this._prop;}/** style */get style(){return this._style;}/** oldValue */get oldValue(){return this._oldValue;}/** newValue */get newValue(){return this._newValue;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    undo(){this._item['_setSubStyle'](this._prop,this._style,this._oldValue);}redo(redoing){this._item['_setSubStyle'](this._prop,this._style,this._newValue);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get description(){return this._prop+'.style.'+this._style+': '+this._oldValue+' -> '+this._newValue;}get source(){return this._item;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * TableBand에 field를 추가한다.
     */class AddTableBandGroupCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(band,index,config){super('Add Table Band Group');assert(!!band);this._band=band;this._index=Math.max(0,band.groups.count);this._config=config;}_doDispose(){this._band=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** band */get band(){return this._band;}/** index */get index(){return this._index;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._group=this._band.groups.add(this._config,this._index);}undo(){this._band.groups.remove(this._group);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    get source(){return this._band;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * 자식 item의 순서(index)를 변경한다.
     */class ChangeChildIndexCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item,newIndex){super('Change child index');assert(!!item);this._item=item;this._newIndex=newIndex;this._oldIndex=item.index;}_doDispose(){this._item=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._item.parent.changeChildIndex(this._item,this._newIndex);}undo(){this._item.parent.changeChildIndex(this._item,this._oldIndex);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get description(){return 'Change child index: '+this._item.designText;}get source(){return this._item;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * 복수 item의 속성을 동시에 변경한다.
     */class SetItemsPropCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(items,prop,value){super('Set Items Property');assert(!!items&&items.length>0);assert(!!prop);this._items=items.slice();this._prop=prop;this._childProps=[];this._oldValues=[];this._newValue=value;this._items.forEach(item=>{const child=item instanceof ReportItem&&item.isChildProp(prop);this._childProps.push(child);this._oldValues.push(child?item.getChildProp(prop):item[prop]);});}_doDispose(){this._items=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** item */get items(){return this._items.slice();}/** prop */get prop(){return this._prop;}/** newValue */get newValue(){return this._newValue;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    undo(){this._items.forEach((item,i)=>{if(this._childProps[i]){item.setChildProp(this._prop,this._oldValues[i]);}else if(Utils.hasSetter(item,this._prop)){item[this._prop]=this._oldValues[i];}});}redo(redoing){this._items.forEach((item,i)=>{if(this._childProps[i]){item.setChildProp(this._prop,this._newValue);}else if(Utils.hasSetter(item,this._prop)){item[this._prop]=this._newValue;}});}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get description(){return 'prop.'+this._prop+', '+this._newValue;}get source(){return this._items.slice();}}////////////////////////////////////////////////////////////////////////////////
    /**
     * 복수 item의 style 속성을 동시에 변경한다.
     */class SetItemsStyleCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(items,style,value){super('Set Items Style');assert(!!items&&items.length>0);assert(!!style);this._items=items.slice();this._style=style;this._newValue=value;this._oldValues=[];this._items.forEach(item=>{this._oldValues.push(item.getStyle(style));});}_doDispose(){this._items=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** item */get items(){return this._items.slice();}/** style */get style(){return this._style;}/** newValue */get newValue(){return this._newValue;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    undo(){this._items.forEach((item,i)=>{item.setStyle(this._style,this._oldValues[i]);});}redo(redoing){this._items.forEach((item,i)=>{item.setStyle(this._style,this._newValue);});}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get description(){return 'style.'+this._style+': '+this._newValue;}get source(){return this._items.slice();}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Report item들의 (기본 styles 속성 외에) 추가 속성 styles의 style을 변경한다.
     * ex) cellStyles, prefixStyles, suffixStyles, ...
     */class SetItemsChildStyleCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(items,prop,style,value){super('Set Child Style');assert(!!items&&items.length>0);assert(!!prop);assert(!!style);this._items=items.slice();this._prop=prop;this._style=style;this._newValue=value;this._oldValues=[];this._items.forEach(item=>{this._oldValues.push(item['_getSubStyle'](prop,style));});}_doDispose(){this._items=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** item */get items(){return this._items.slice();}/** prop */get prop(){return this._prop;}/** style */get style(){return this._style;}/** newValue */get newValue(){return this._newValue;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    undo(){this._items.forEach((item,i)=>{item['_setSubStyle'](this._prop,this._style,this._oldValues[i]);});}redo(redoing){this._items.forEach(item=>{item['_setSubStyle'](this._prop,this._style,this._newValue);});}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get description(){return this._prop+'.style.'+this._style+': '+this._newValue;}get source(){return this._items.slice();}}////////////////////////////////////////////////////////////////////////////////
    /**
     * 복수 item들의 복수 속성들을 변경한다.
     */class SetItemsPropsCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(items,props){super('Set Items Properties');assert(!!items&&items.length);assert(!!props);this._items=items.slice();this._props={...props};this._oldProps=[];this._items.forEach(item=>{this._oldProps.push(item.getProperties(props));});}_doDispose(){this._items=null;this._props=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** item */get items(){return this._items.slice();}/** props */get props(){return this._props;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._items.forEach((item,i)=>{item.setProperties(this._props);});}undo(){this._items.forEach((item,i)=>{item.setProperties(this._oldProps[i]);});}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._items.slice();}}////////////////////////////////////////////////////////////////////////////////
    /**
     * SimpleBand에 field를 추가한다.
     */class AddSimpleBandGroupCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(band,index,config){super('Add Simple Band Group');assert(!!band);this._band=band;this._index=Math.max(0,band.groups.count);this._config=config;}_doDispose(){this._band=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** band */get band(){return this._band;}/** index */get index(){return this._index;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._group=this._band.groups.add(this._config,this._index);}undo(){this._band.groups.remove(this._group);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    get source(){return this._band;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Space item의 크기를 변경한다.
     */class ResizeSpaceCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item,orgSize,oldSize,delta){super('Resize Space Item');assert(!!item);this._item=item;this._orgSize=orgSize;this._oldSize=oldSize;this._delta=delta;}_doDispose(){this._item=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._item.size=this._oldSize+this._delta;}undo(){this._item.size=this._orgSize;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get description(){return 'Resize space item';}get source(){return this._item;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * BandGroup.bandCount 변경.
     * 밴드 수가 줄 때는 사라지는 band cell에 포함된 밴드들을 제거한다.
     */class ChangeBandCountCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(group,newCount){super('Change table cols');assert(!!group);this._group=group;this._oldCount=group.bandCount;this._count=newCount;if(newCount<this._oldCount){this._deleted=[];for(let i=newCount;i<this._oldCount;i++){const item=group.get(i);this._deleted.push(item);}}}_doDispose(){this._group=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** table */get table(){return this._group;}/** cols */get cols(){return this._count;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){// 아래 설정 중에 item들이 삭제된다.
    this._group.bandCount=this._count;}undo(){const group=this._group;if(this._oldCount>this._count){this._deleted.forEach((item,i)=>{group.add(item);});}else {group.bandCount=this._oldCount;}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._group;}}////////////////////////////////////////////////////////////////////////////////
    var PaperSize;(function(PaperSize){PaperSize["A0"]="A0";PaperSize["A1"]="A1";PaperSize["A2"]="A2";PaperSize["A3"]="A3";PaperSize["A4"]="A4";PaperSize["A5"]="A5";PaperSize["A6"]="A6";PaperSize["A7"]="A7";PaperSize["A8"]="A8";})(PaperSize||(PaperSize={}));const PaperSizeMap={"A0":{w:841,h:1189},"A1":{w:594,h:841},"A2":{w:420,h:594},"A3":{w:297,h:420},"A4":{w:210,h:297},"A5":{w:148,h:210},"A6":{w:105,h:148},"A7":{w:74,h:105},"A8":{w:52,h:74}};var PaperOrientation;(function(PaperOrientation){PaperOrientation["PORTRAIT"]="portrait";PaperOrientation["LANDSCAPE"]="landscape";})(PaperOrientation||(PaperOrientation={}));/**
     * Paper options
     */class PaperOptions extends Base{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(report){super();//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._orientation=PaperOrientation.PORTRAIT;this._size=PaperSize.A4;this._width="210mm";this._height="297mm";this._marginLeft="12mm";this._marginRight="12mm";this._marginTop="15mm";this._marginBottom="15mm";this._widthDim=new Dimension(this._width);this._heightDim=new Dimension(this._height);this._marginLeftDim=new Dimension(this._marginLeft);this._marginRightDim=new Dimension(this._marginRight);this._marginTopDim=new Dimension(this._marginTop);this._marginBottomDim=new Dimension(this._marginBottom);this._report=report;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** orientation */get orientation(){return this._orientation;}set orientation(value){if(value!==this._orientation){this._orientation=value;this._changed();}}/** size */get size(){return this._size;}set size(value){if(value!=this._size){this._size=value;const d=PaperSizeMap[this._size];if(d){this.width=d.w+'mm';this.height=d.h+'mm';}// this._changed();
    }}/** width */get width(){return this._width;}set width(value){if(value!=this._width){this._width=value;this._widthDim=new Dimension(value);this._changed();}}/** height */get height(){return this._height;}set height(value){if(value!=this._height){this._height=value;this._heightDim=new Dimension(value);this._changed();}}/** marginLeft */get marginLeft(){return this._marginLeft;}set marginLeft(value){if(value!=this._marginLeft){this._marginLeft=value;this._marginLeftDim=new Dimension(value);this._changed();}}/** marginRight */get marginRight(){return this._marginRight;}set marginRight(value){if(value!=this._marginRight){this._marginRight=value;this._marginRightDim=new Dimension(value);this._changed();}}/** marginTop */get marginTop(){return this._marginTop;}set marginTop(value){if(value!=this._marginTop){this._marginTop=value;this._marginTopDim=new Dimension(value);this._changed();}}/** marginBottom */get marginBottom(){return this._marginBottom;}set marginBottom(value){if(value!=this._marginBottom){this._marginBottom=value;this._marginBottomDim=new Dimension(value);this._changed();}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    load(src){}getPageSize(){let w=this._widthDim.getFixedPixel();let h=this._heightDim.getFixedPixel();if(isNaN(w)||isNaN(h)){const d=PaperSizeMap[this._size]||PaperSizeMap['A4'];w=getPixelsByUnits(PrintUnit.MILLI,d.w);h=getPixelsByUnits(PrintUnit.MILLI,d.h);}// page 사이즈를 px로 변환하는 과정에서 생기는 서브 픽셀 때문에 Math.floor를 적용하지 않을 시 빈 페이지가 생성될 수 있다.
    return this._orientation===PaperOrientation.LANDSCAPE?new Size(h,Math.floor(w)):new Size(w,Math.floor(h));}getContentRect(r){r.topBy(this._marginTopDim.getFixedPixel());r.bottomBy(-this._marginBottomDim.getFixedPixel());r.leftBy(this._marginLeftDim.getFixedPixel());r.rightBy(-this._marginRightDim.getFixedPixel());return r;}getClientRect(){const sz=this.getPageSize();return new Rectangle(0,0,sz.width-this._marginLeftDim.getFixedPixel()-this._marginRightDim.getFixedPixel(),sz.height-this._marginTopDim.getFixedPixel()-this._marginBottomDim.getFixedPixel()).round();}applyExtents(css){const sz=this.getPageSize();const left=this._marginLeftDim.getFixedPixel();const right=this._marginRightDim.getFixedPixel();const top=this._marginTopDim.getFixedPixel();const bottom=this._marginBottomDim.getFixedPixel();css.width=sz.width-left-right+'px';css.height=sz.height-top-bottom+'px';}applyPreviewExtents(css){const sz=this.getPageSize();css.width=sz.width+'px';css.height=sz.height+'px';}applyClient(css){const sz=this.getPageSize();const left=this._marginLeftDim.getFixedPixel();const right=this._marginRightDim.getFixedPixel();const top=this._marginTopDim.getFixedPixel();const bottom=this._marginBottomDim.getFixedPixel();css.width=sz.width-left-right+'px';css.height=sz.height-top-bottom+'px';css.left='0';css.top='0';}applyPreviewClient(css){const sz=this.getPageSize();const left=this._marginLeftDim.getFixedPixel();const right=this._marginRightDim.getFixedPixel();const top=this._marginTopDim.getFixedPixel();const bottom=this._marginBottomDim.getFixedPixel();css.width=sz.width-left-right+'px';css.height=sz.height-top-bottom+'px';css.left=left+'px';css.top=top+'px';Utils.extend(css,this._report.page.styles);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _changed(){this._report&&this._report['_firePaperChanged']();}}/**
     * Report info.
     */class ReportInfo extends Base{constructor(report){super();this.paper=new PaperOptions(report);}}class ReportRootItem extends ReportGroupItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(report){super('reportRoot');this._report=report;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get report(){return this._report;}/** name */get name(){return this._report.info.name;}set name(value){const old=this.name;if(value!=old){this._report.info.name=value;this._changed(ReportRootItem.PROP_NAME,value,old);}}/** author */get author(){return this._report.info.author;}set author(value){this._report.info.author=value;}/** version */get version(){return this._report.info.version;}set version(value){this._report.info.version=value;}/** description */get description(){return this._report.info.description;}set description(value){this._report.info.description=value;}/** paperOrientation */get paperOrientation(){return this._report.info.paper.orientation;}set paperOrientation(value){this._report.info.paper.orientation=value;}/** paperSize */get paperSize(){return this._report.info.paper.size;}set paperSize(value){this._report.info.paper.size=value;}/** paperWidth */get paperWidth(){return this._report.info.paper.width;}set paperWidth(value){this._report.info.paper.width=value;}/** paperHeight */get paperHeight(){return this._report.info.paper.height;}set paperHeight(value){this._report.info.paper.height=value;}/** marginLeft */get marginLeft(){return this._report.info.paper.marginLeft;}set marginLeft(value){this._report.info.paper.marginLeft=value;}/** marginRight */get marginRight(){return this._report.info.paper.marginRight;}set marginRight(value){this._report.info.paper.marginRight=value;}/** marginTop */get marginTop(){return this._report.info.paper.marginTop;}set marginTop(value){this._report.info.paper.marginTop=value;}/** marginBottom */get marginBottom(){return this._report.info.paper.marginBottom;}set marginBottom(value){this._report.info.paper.marginBottom=value;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get pathLabel(){return 'report';}get displayPath(){return 'report';}_ignoreItems(){return true;}getEditProps(){return ReportRootItem.PROPINFOS;}getStyleProps(){return [];}canResize(dir){return false;}_doLoad(loader,src){super._doLoad(loader,src);this._loadPropsOf(src,ReportRootItem.PROPINFOS);}_doSave(target){super._doSave(target);this._savePropsOf(target,ReportRootItem.PROPINFOS);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // props
    ReportRootItem.PROP_REPORT_NAME="name";ReportRootItem.PROP_REPORT_AUTHOR="author";ReportRootItem.PROP_REPORT_VERSION="version";ReportRootItem.PROP_REPORT_DESCRIPTION="description";ReportRootItem.PROP_PAPER_ORIENTATION="paperOrientation";ReportRootItem.PROP_PAPER_SIZE="paperSize";ReportRootItem.PROP_PAPER_WIDTH="paperWidth";ReportRootItem.PROP_PAPER_HEIGHT="paperHeight";ReportRootItem.PROP_MARGIN_LEFT="marginLeft";ReportRootItem.PROP_MARGIN_RIGHT="marginRight";ReportRootItem.PROP_MARGIN_TOP="marginTop";ReportRootItem.PROP_MARGIN_BOTTOM="marginBottom";// prop infos
    ReportRootItem.PROPINFOS=[{name:ReportRootItem.PROP_REPORT_NAME,category:PropCategory.REPORT,type:StringProperty,multiple:false,default:undefined},{name:ReportRootItem.PROP_REPORT_AUTHOR,category:PropCategory.REPORT,type:StringProperty,multiple:false,default:undefined},{name:ReportRootItem.PROP_REPORT_VERSION,category:PropCategory.REPORT,type:StringProperty,multiple:false,default:undefined},{name:ReportRootItem.PROP_REPORT_DESCRIPTION,category:PropCategory.REPORT,type:StringProperty,multiple:false,default:undefined},{name:ReportRootItem.PROP_PAPER_ORIENTATION,category:PropCategory.PAPER,type:EnumProperty,multiple:false,default:PaperOrientation.PORTRAIT,domain:PaperOrientation},{name:ReportRootItem.PROP_PAPER_SIZE,category:PropCategory.PAPER,type:EnumProperty,multiple:false,default:undefined,domain:PaperSize},{name:ReportRootItem.PROP_PAPER_WIDTH,category:PropCategory.PAPER,type:DimensionProperty,multiple:false,default:undefined},{name:ReportRootItem.PROP_PAPER_HEIGHT,category:PropCategory.PAPER,type:DimensionProperty,multiple:false,default:undefined},{name:ReportRootItem.PROP_MARGIN_LEFT,category:PropCategory.PAPER,type:DimensionProperty,multiple:false,default:undefined},{name:ReportRootItem.PROP_MARGIN_RIGHT,category:PropCategory.PAPER,type:DimensionProperty,multiple:false,default:undefined},{name:ReportRootItem.PROP_MARGIN_TOP,category:PropCategory.PAPER,type:DimensionProperty,multiple:false,default:undefined},{name:ReportRootItem.PROP_MARGIN_BOTTOM,category:PropCategory.PAPER,type:DimensionProperty,multiple:false,default:undefined}];//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ReportRootItem.$_ctor='ReportRootItem';/**
     * Report model.
     */class Report extends EventAware{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(designTime,source){super();this._unit=PrintUnit.MILLI;// default unit?
    // private _width = 100;
    // private _height = 100;
    this._assetRoot='';this._loader=new ReportLoaderImpl();this._loading=false;this._invalids=[];this._designTime=designTime;this._commands=new EditCommandStack(this);this._info=new ReportInfo(this);this._page=new ReportPage(this);this._page.addListener(this);this._root=new ReportRootItem(this);this._root.add(this._page);this._assets=new AssetManager();this._designData=new DesignDataManager(this._commands);if(designTime){this._data=this._designData;this._designData.addListener(this);}source&&this.load(source);}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static isReportSource(source){return source&&Utils.isObject(source.page);}_doDispose(){this._designData.removeListener(this);this._designData=this._designData.dispose();super._doDispose();}//-------------------------------------------------------------------------
    // DesignDataManager
    //-------------------------------------------------------------------------
    onDesignDataManagerDataAdded(dm,data){this.fireEvent(Report.DATA_ADDED,data);this.$_refreshInvalids();}onDesignDataManagerDataRemoved(dm,data){this.fireEvent(Report.DATA_REMOVED,data);this.$_refreshInvalids();}onDesignDataManagerDataUpdated(dm,data){this.fireEvent(Report.DATA_UPDATED,data);this.$_refreshInvalids();}onDesignDataManagerNameChanged(dm,data,oldName){this._page['$_dataNameChanged'](data,oldName);this.fireEvent(Report.DATA_NAME_CHANGED,data,oldName);this.$_refreshInvalids();}onDesignDataManagerFieldNameChanged(dm,data,newName,oldName){this._page['$_dataFieldNameChanged'](data,newName,oldName);this.fireEvent(Report.DATA_FIELD_NAME_CHANGED,data,newName,oldName);this.$_refreshInvalids();}//-------------------------------------------------------------------------
    // IEditCommandStackOwner
    //-------------------------------------------------------------------------
    editCommandStackChanged(stack,cmd,undoable,redoable){this.fireEvent(Report.COMMANDS_STACK_CHANGED,cmd,undoable,redoable);this.$_refreshInvalids();}editCommandStackDirtyChanged(stack){this.fireEvent(Report.DIRTY_CHANGED);}//-------------------------------------------------------------------------
    // IPropertyContainer
    //-------------------------------------------------------------------------
    addCollectionItem(collection){if(collection instanceof HichartAxisPlotLineCollection){this.addHichartPlotLine(collection.axis);}else if(collection instanceof HichartAxisPlotBandCollection){this.addHichartPlotBand(collection.axis);}else;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** @internal */get loader(){return this._loader;}/** info */get info(){return this._info;}/** paper */get paper(){return this._info.paper;}/** unit */get unit(){return this._unit;}set unit(value){if(value!=this._unit){this._unit=value;}}/** assetRoot */get assetRoot(){return this._assetRoot;}set assetRoot(value){this._assetRoot=value;if(!this._assetRoot.endsWith('/')){this._assetRoot+='/';}}get root(){return this._root;}/** page */get page(){return this._page;}set page(value){this._page=value;}/** assets */get assets(){return this._assets;}/** data */get data(){return this._data;}/** desingData */get designData(){return this._designData;}/** canUndo */get canUndo(){return this._commands.canUndo;}/** canRedo */get canRedo(){return this._commands.canRedo;}get dirty(){return this._commands.dirty;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    load(src){if(src){this._loading=true;try{this._root.load(this._loader,src);src.report&&this._root.load(this._loader,src.report);src.page&&this._page.load(this._loader,src.page);src.assets&&this._assets.load(src.assets);src.data&&this._designData.load(src.data);this._fireReset();return this;}finally{this._loading=false;}}}setSaveTagging(tag){// ReportJsonModel에서 사용한다. save() 에서 초기화된다. 즉, 이 함수 후 반드시 save()가 호출돼야 한다.
    this._page.saveTag=tag;return this;}save(){let pageOnly=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;const target={report:{},page:{}};this._root.save(target.report);this._page.save(target.page);if(!pageOnly){this._assets.save(target['assets']={});this._data instanceof DesignDataManager&&this._data.save(target['data']={});}this._page.saveTag=null;return target;}prepareLayout(){this._page.prepareLayout(false);}preparePrint(ctx){this._page.preparePrint(ctx);this.models={};}getImageUrl(url){if(url){return this._assetRoot.indexOf(':')>=0?this._assetRoot+url:url;}}clearHistory(){this._commands.flush();}closeHistory(){this._commands.close();}undo(){return this._commands.undo();}redo(){return this._commands.redo();}execute(cmd){return cmd&&this._commands.execute(cmd);}getEditHistory(){let all=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this._commands.getHistory(all);}getCommand(id){return this._commands.get(id);}itemByName(name){return this._page.getItem(name);}defaultInit(item,group,hintWidth,hintHeight){item.defaultInit(this._loader,group,hintWidth,hintHeight);}addItem(parent,item){let index=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;if(parent&&item){if(!this._fireItemAdd(parent,item,index)){return false;}if(parent.contains(item)){throw new Error("Item is already contained in this group item.");}if(item.outlineParent){throw new Error("Item is already contained in other group item.");}if(item instanceof DataBand&&!parent.canContainsBand()){throw new Error("데이터밴드를 추가할 수 없는 영역입니다.");}if(item instanceof BandGroup&&!parent.canContainsBandGroup()){throw new Error("밴드그룹을 추가할 수 없는 영역입니다.");}if(index>=0&&index<parent.count);else {this.execute(new AddItemCommand(parent,item));if(item.parent instanceof CellGroup){return item.parent.parent===parent;}else {return item.parent===parent;}}}}moveCollectionItem(collection,from,to){if(collection&&from!==to){const cmd=new MoveCollectionItemCommand(collection,from,to);this.execute(cmd);}}addChartSeries(chart,seriesType){if(chart&&seriesType){const cmd=new AddHichartSeriesCommand(chart,seriesType);this.execute(cmd);return cmd.series;}}addHichartPlotLine(axis,config){if(axis){const cmd=new AddHichartPlotLineCommand(axis,config);this.execute(cmd);return cmd.line;}}addHichartPlotBand(axis,config){if(axis){const cmd=new AddHichartPlotBandCommand(axis,config);this.execute(cmd);return cmd.band;}}/**
         * 테이블 행을 추가한다.
         *
         * @param table - 테이블 객체. TableContainer 혹은 TableBand 구성 테이블들.
         * @param row - 추가 위치.
         */addTableRow(table,row){if(row<0)row=table.rowCount;this.execute(new AddTableRowCommand(table,row));}/**
         * 테이블 행들을 이동시킨다.
         *
         * @param table - 테이블 객체. TableContainer 혹은 TableBand 구성 테이블들.
         * @param row - 이동할 시작 행 위치.
         * @param count - 이동할 행 개수.
         * @param delta - 이동 간격. 음수면 위로, 양수면 아래로 이동한다.
         * @param alert - true로 설정하면, 이동 불가능한 상태일 때 예외를 발생시킨다.
         */moveTableRows(table,row,count,delta){// if (table.canMoveRows(row, count, delta, alert)) {
    }moveTableRowsToNearest(table,row,count,delta){let alert=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;try{const r=table.getNearestMovableRow(row,count,delta);if(r>=0){if(table.canMoveRows(row,count,r,alert)){this.execute(new MoveTableRowsCommand(table,row,count,r,true));}}}catch(err){if(err instanceof AlertError){this._fireAlert(table,err.message);}else {throw err;}}}/**
         * 테이블이나 테이블밴드에 컬럼을 추가한다.
         * 병함된 셀을 분할해서 이동할 수 없다.
         * 또, 이동 후 병합된 셀을 분할시킬 수 없다.
         *
         * @param table - 테이블 혹은 테이블밴드 객체.
         * @param col - 추가 위치.
         */addTableColumn(table,col){if(table instanceof TableBand){this.execute(new AddTableBandColumnCommand(table,col));}else if(table instanceof TableContainer){this.execute(new AddTableColumnCommand(table,col));}}/**
         * 테이블이나 테이블밴드의 컬럼들을 이동시킨다.
         * 병함된 셀을 분할해서 이동할 수 없다.
         * 또, 이동 후 병합된 셀을 분할시킬 수 없다.
         *
         * @param table - 테이블 혹은 테이블밴드 객체.
         * @param col - 이동할 시작 컬럼 위치.
         * @param count - 이동할 컬럼 개수.
         * @param delta - 이동 간격. 음수면 왼쪽으로, 양수면 오른쪽으로 이동한다.
         */moveTableColumns(table,col,count,delta){// try {
    //     if (table instanceof TableBand && table.canMoveColumns(col, count, delta, true)) {
    //         this.execute(new MoveTableBandColumnsCommand(table, col, count, delta, true));
    //     } else  if (table instanceof TableContainer && table.canMoveColumns(col, count, delta, true)) {
    //         this.execute(new MoveTableColumnsCommand(table, col, count, delta, true));
    //     }
    // } catch (err) {
    //     if (err instanceof AlertError) {
    //         this._fireAlert(table, err.message);
    //     } else {
    //         throw err;
    //     }
    // }
    }moveTableColumnsToNearest(table,col,count,delta){try{if(table instanceof TableBand){const c=table.getNearestMovableColumn(col,count,delta);if(c>=0&&c!==col){if(table.canMoveColumns(col,count,c,true)){this.execute(new MoveTableBandColumnsCommand(table,col,count,c,true));}}}else if(table instanceof TableContainer){const c=table.getNearestMovableColumn(col,count,delta);if(c>=0&&c!==col){if(table.canMoveColumns(col,count,c,true)){this.execute(new MoveTableColumnsCommand(table,col,count,c,true));}}}}catch(err){if(err instanceof AlertError){this._fireAlert(table,err.message);}else {throw err;}}}addCrosstabField(collection,field){if(collection.band.containsField(field)){alert('이미 포함된 필드입니다: '+field);}else {this.execute(new AddCrosstabFieldCommand(collection,collection.count,{field:field}));}}/**
         * 리포트 아이템을 제거한다.
         *
         * @param item - 제거할 리포트 아이템 객체.
         */removeItem(item){item&&this.removeItems([item]);}/**
         * 리포트 아이템들을 제거한다.
         *
         * @param items - 제거할 리포트 아이템 객체들의 배열.
         */removeItems(items){if(items&&items.length>0){this._page.removeItems(this._commands,items);}}setItemProperty(item,prop,value){if(item){if(item.isChildProp(prop)){if(!item.parent.canChangeChildProp(item,prop,value))return;}if(item instanceof BandGroup&&prop==='bandCount'){this.execute(new ChangeBandCountCommand(item,value));}else if(item instanceof TableBand&&prop==='colCount'){this.execute(new ChangeTableBandColCountCommand(item,value));}else if(item instanceof TableContainer&&prop==='colCount'){this.execute(new ChangeTableColCountCommand(item,value));}else if(item instanceof TableBase&&prop==='rowCount'){this.execute(new ChangeTableRowCountCommand(item,value));}else if(item instanceof BandGroup&&prop==='bandCount'){// this.execute(new ChangeTableRowCountCommand(item, value));
    this.execute(new SetPropCommand(item,prop,value));// debugger;
    }else if(prop){this.execute(new SetPropCommand(item,prop,value));}}}setItemProperties(item,props){if(item instanceof ReportItem&&props){this.execute(new SetPropsCommand(item,props));}}setItemsProperties(items,props){if(items&&items.length&&props){this.execute(new SetItemsPropsCommand(items,props));}}resetItemProperty(item,prop){if(item instanceof ReportItem&&prop){let p=false;if(item.isChildProp(prop.name)){if(item.getChildProp(prop.name)!==prop.default){p=true;}}else if(item[prop.name]!==prop.default){p=true;}if(p){this.execute(new SetPropCommand(item,prop.name,prop.default));return true;}}}setItemsProperty(items,prop,value){if(items&&items.length&&prop){this.execute(new SetItemsPropCommand(items,prop,value));}}setItemStyle(item,style,value){if(item&&style){this.execute(new SetStyleCommand(item,style,value));}}setItemsStyle(items,style,value){if(items&&items.length&&style){this.execute(new SetItemsStyleCommand(items,style,value));}}setChildStyleProperty(item,prop,style,value){if(item&&prop){this.execute(new SetChildStyleCommand(item,prop,style,value));}}setItemsChildStyleProperty(items,prop,style,value){if(items&&items.length&&prop){this.execute(new SetItemsChildStyleCommand(items,prop,style,value));}}addTableBandColumn(band,config){let index=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;band&&this.execute(new AddTableBandColumnCommand(band,index,config));}addTableBandGroup(band,config){let index=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;band&&this.execute(new AddTableBandGroupCommand(band,index,config));}addSimpleBandGroup(band,config){let index=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;band&&this.execute(new AddSimpleBandGroupCommand(band,index,config));}canMergeSelection(selection){return selection instanceof TableSelection&&!selection.isSingle(true);}mergeSelection(selection){if(this.canMergeSelection(selection)){const cmd=new MergeTableSelectionCommand(selection);this.execute(cmd);this._fireCellMerged(selection.table.getCell(cmd.bounds.r1,cmd.bounds.c1));}}canUnmergeCell(cell){return !cell.isSingle;}unmergeCell(cell){this.canUnmergeCell(cell)&&this.execute(new UnmergeTableCellsCommand(cell));}search(key,options){const results=[];this._page.search(key,options,results);return results.length>0?results:null;}applyDropResult(item,r){if(!item||!r)return;if(r.type===DropResultType.PROP){return this.execute(new SetPropCommand(item,r.prop,r.value));}}addAsset(group,item){if(item){const g=typeof group==='string'?this._assets.findGroup(group):group;this.execute(new AddAssetCommand(this._assets,g,item));}}removeAsset(item){if(item){this.execute(new RemoveAssetCommand(this._assets,item));}}renameData(data,newName){if(this._data instanceof DesignDataManager&&data&&newName&&data.name!=newName){this.execute(new RenameDataCommand(this._data,data,newName));return true;}}addData(data){if(this._data instanceof DesignDataManager){this.execute(new AddDataCommand(this._data,data));return true;}}removeData(data){if(this._data instanceof DesignDataManager){if(typeof data==='string'){data=this._data.get(data);}if(data){this.execute(new RemoveDataCommand(this._data,data));}return true;}}saveSimpleData(data,values){if(data&&values){this.execute(new SaveSimpleDataCommand(data,values));}}saveItems(items){if(items&&items.length>0){if(items.length>1){items=items.sort((i1,i2)=>i1.level-i2.level);for(let i=items.length-1;i>=0;i--){const p=items[i].parent;for(let j=i+1;j>=0;j--){if(items[j]===p){items.splice(j,1);break;}}}}const objs=[];for(let item of items){const obj={};if(item.save(obj)){objs.push(obj);}}return JSON.stringify(objs);}return;}pasteItems(sources,target){let cell;if(target instanceof TableCell){cell=target;target=target.table;}let g=(target instanceof ReportGroupItem?target:target===null||target===void 0?void 0:target.parent)||this.page.body['_bodyItems'];if(g){const objs=JSON.parse(sources);const items=[];for(let obj of objs){const item=this._loader.createItem(obj);if(item){if(g instanceof TableBase){g.noPrepareCell=true;// _prepareCellGroup은 아래 addItem()에서 호출되도록 한다.
    try{g['_loadChild'](this._loader,item,obj);item.setChildProp('row',cell.row);item.setChildProp('col',cell.col);}finally{g.noPrepareCell=false;}}else {//item.load(this._loader, obj); <= 이렇게 하면 child property들을 가져오지 못한다.
    g['_loadChild'](this._loader,item,obj);}if(this.addItem(g,item)){items.push(item);}}}return items;}}/**
         * 아이템의 위치를 변경한다. Undo 가능하다.
         *
         * @param item - 아이템 객체.
         * @param newX - x 위치.
         * @param newY - y 위치.
         */moveItem(item,newX,newY){if(item){this.execute(new MoveItemCommand(item,newX,newY));}}moveItemDir(item,dir,newPt){if(item){this.execute(new MoveItemDirCommand(item,dir,newPt));}}resizeItem(item,orgWidth,orgHeight,width,height,dx,dy){if(item){this.execute(new ResizeItemCommand(item,orgWidth,orgHeight,width,height,dx,dy));}}resizeSpace(item,orgSize,size,delta){if(item){this.execute(new ResizeSpaceCommand(item,orgSize,size,delta));}}resizeAndMove(item,orgWidth,orgHeight,width,height,dx,dy,newX,newY){if(item){this.execute(new ResizeAndMoveCommand(item,orgWidth,orgHeight,width,height,dx,dy,newX,newY));}}alignItem(item,align){// 테이블 컬럼 또는 셀인 경우 직접 cellAlign 적용.
    if(item instanceof TableColumn||item instanceof TableCell){this.setItemStyle(item,'cellAlign',align);}else if(item instanceof ReportItem){if(item.parent instanceof CellGroup){const cell=item.parent.parent.getCell(item.row,item.col);this.execute(new SetStyleCommand(cell,'cellAlign',align));}else if(item.parent.canAlign(item)){switch(align){case'left':this.setItemProperties(item,{left:0,right:undefined});break;case'right':this.setItemProperties(item,{left:undefined,right:0});break;case'top':this.setItemProperties(item,{top:0,bottom:undefined});break;case'bottom':this.setItemProperties(item,{top:undefined,bottom:0});break;case'center':this.setItemProperties(item,{left:undefined,right:undefined,top:undefined,bottom:undefined});break;}}}}alignItems(items,align){const commands=[];items.forEach(item=>{// onlydel: 테이블 컬럼 또는 셀인 경우 직접 cellAlign 적용.
    if(item instanceof TableCell||item instanceof TableColumn){commands.push(new SetStyleCommand(item,'cellAlign',align));}else if(item instanceof ReportItem){// onlydel: 테이블 셀에서 아이템이 선택된 경우 아이템이 소속된 셀을 찾아서 align 적용
    if(item.parent instanceof CellGroup){const cell=item.parent.parent.getCell(item.row,item.col);commands.push(new SetStyleCommand(cell,'cellAlign',align));}else if(item.parent.canAlign(item)){switch(align){case'left':commands.push(new SetPropsCommand(item,{left:0,right:undefined}));break;case'right':commands.push(new SetPropsCommand(item,{left:undefined,right:0}));break;case'top':commands.push(new SetPropsCommand(item,{top:0,bottom:undefined}));break;case'bottom':commands.push(new SetPropsCommand(item,{top:undefined,bottom:0}));break;case'center':commands.push(new SetPropsCommand(item,{left:undefined,right:undefined,top:undefined,bottom:undefined}));break;}}}});if(commands.length>0){this.execute(new EditCommandGroup('alignItems',commands));}}changeItemIndex(item,newIndex){newIndex=Math.max(0,Math.min(item.parent.count-1,newIndex));if(item&&item.index!==newIndex){this.execute(new ChangeChildIndexCommand(item,newIndex));return true;}}clearTexts(items){const commands=[];items.forEach(item=>{if(item instanceof TextItem&&item.text){commands.push(new SetPropCommand(item,'text',undefined));}else if(item instanceof CheckItem&&item.text){commands.push(new SetPropCommand(item,'text',undefined));}});if(commands.length){this.execute(new EditCommandGroup('',commands));}}/**
         * col + 1 컬럼의 너비를 줄이거나 늘이면서 col 컬럼의 너비를 변경한다.
         */adjustColumnWidths(table,col,colPoints,newSize){this.execute(new AdjustColumnWidthsCommand(table,col,colPoints,newSize));}/**
         * row + 1 행의 높이를 줄이거나 늘이면서 row 행의 높이를 변경한다.
         */adjustRowHeights(table,row,rowPoints,newSize){this.execute(new AdjustRowHeightsCommand(table,row,rowPoints,newSize));}getInvalids(){return this._invalids;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_refreshInvalids(){this._page.collectInvalids(this,this._invalids=[]);}//-------------------------------------------------------------------------
    // ReportPage event handlers
    //-------------------------------------------------------------------------
    onPageItemAdded(source,item,index,silent){if(!this._loading){this.fireEvent(Report.ITEM_ADDED,item,index,silent);}}onPageItemsAdded(source,items,index){if(!this._loading){this.fireEvent(Report.ITEMS_ADDED,items,index);}}onPageItemRemoved(source,item,oldParent){this.fireEvent(Report.ITEM_REMOVED,item,oldParent);}onPageItemsRemoved(source,items){this.fireEvent(Report.ITEMS_REMOVED,items);}onPageItemChanged(source,item,prop,value,oldValue){this.fireEvent(Report.ITEM_CHANGED,item,prop,value,oldValue);}onPageCollectionChanged(source,collection){this.fireEvent(Report.COLLECTION_CHANGED,collection);}//-------------------------------------------------------------------------
    // event members
    //-------------------------------------------------------------------------
    _fireReset(){this.fireEvent(Report.RESET);}_firePaperChanged(){this.fireEvent(Report.PAPER_CHANGED);}_fireItemAdd(group,item,index){return this.fireConfirmEvent(Report.ITEM_ADD,group,item,index);}_fireItemMoved(item,index){this.fireEvent(Report.ITEM_MOVED,item);}_fireCollectionChanged(collection){this.fireEvent(Report.COLLECTION_CHANGED,collection);}_fireCellMerged(cell){this.fireEvent(Report.CELL_MERGED,cell);}_fireAlert(item,message){this.fireEvent(Report.ALERT,item,message);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // events
    Report.RESET='onReportReset';Report.PAPER_CHANGED='onReportPaperChanged';Report.ITEM_ADD='onReportItemAdd';Report.ITEM_ADDED='onReportItemAdded';Report.ITEMS_ADDED='onReportItemsAdded';Report.ITEM_REMOVED='onReportItemRemoved';Report.ITEMS_REMOVED='onReportItemsRemoved';Report.ITEM_CHANGED='onReportItemChanged';Report.ITEM_MOVED='onReportItemMoved';Report.COLLECTION_CHANGED='onReportCollectionChanged';Report.COMMANDS_STACK_CHANGED='onReportCommandStackChanged';Report.DIRTY_CHANGED='onReportDirtyChanged';Report.DATA_ADDED='onReportDataAdded';Report.DATA_REMOVED='onReportDataRemoved';Report.DATA_UPDATED='onReportDataUpdated';Report.DATA_NAME_CHANGED='onReportDataNameChanged';Report.DATA_FIELD_NAME_CHANGED='onReportDataFieldNameChanged';Report.CELL_MERGED='onReportCellMerged';Report.ALERT='onReportAlert';////////////////////////////////////////////////////////////////////////////////
    /** @internal */class BoundedContainerElement extends ReportGroupItemElement{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model,name){super(doc,model,name);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _prepareChild(child){}_doMeasure(ctx,dom,hintWidth,hintHeight){if(!this.measureFixed){this._setModelSize(this.model,dom,hintWidth,hintHeight,true);}const sz=super._doMeasure(ctx,dom,hintWidth,hintHeight);const cnt=this.childCount;let w=0;let h=0;for(let i=0;i<cnt;i++){const elt=this.getChild(i);if(elt.visible){const m=elt.model;w=Math.max(w,elt.measuredWidth);h=Math.max(h,elt.measuredHeight);let n=m.getTop(hintHeight);if(n>0)h+=n;n=m.getBottom(hintHeight);if(n>0)h+=n;n=m.getLeft(hintWidth);if(n>0)w+=n;n=m.getRight(hintWidth);if(n>0)w+=n;}}sz.set(w,h);this._applyPaddings(dom,sz);return sz;}_layoutItem(ctx,child,model,x,y,width,height){const left=model.getLeft(width);const right=model.getRight(width);const top=model.getTop(height);const bottom=model.getBottom(height);if(!isNaN(left)&&!isNaN(right)){x+=left;child.width=Math.max(0,width-left-right);}else if(!isNaN(left)){x+=left;}else if(!isNaN(right)){x+=width-child.width-right;}else {x+=(width-child.width)/2;}if(!isNaN(top)&&!isNaN(bottom)){y+=top;child.height=Math.max(0,height-top-bottom);}else if(!isNaN(top)){y+=top;}else if(!isNaN(bottom)){y+=height-child.height-bottom;}else {y+=(height-child.height)/2;}child.move(x,y);child.setPrintStyles();}_layoutChild(ctx,child,x,y,width,height){x+=(width-child.width)/2;y+=(height-child.height)/2;child.move(x,y);child.setPrintStyles();}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class StackContainerElement extends BoundedContainerElement{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model,name){super(doc,model,name);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return 'stack';}_doSetStyles(model,dom){super._doSetStyles(model,dom);if(model&&model.overflow){dom.style.overflow='visible';}}_getPrev(item){const elts=this.$_getSorted('x');const i=elts.indexOf(item);return i>0?elts[i-1]:null;}_getNext(item){const elts=this.$_getSorted('x');const i=elts.indexOf(item);return i<elts.length-1?elts[i+1]:null;}getUpper(item){const elts=this.$_getSorted('y');const i=elts.indexOf(item);return i>0?elts[i-1]:null;}getLower(item){const elts=this.$_getSorted('y');const i=elts.indexOf(item);return i<elts.length-1?elts[i+1]:null;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_getSorted(prop){return this._getItemViews().sort((e1,e2)=>{return e1[prop]-e2[prop];});}}class StackContainerElementImpl extends StackContainerElement{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return 'stack';}_getCssSelector(){return 'rr-stack-container rr-group-element';}_needDesignBox(){return true;}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class SectionElement extends StackContainerElement{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model,name){super(doc,model,name);}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    // /**
    //  * 페이지 상태에 맞게 하위 아이템들의 값 등을 변경한다.
    //  */
    // refreshPage(ctx: PrintContext): void {
    //     this.refreshPrintValues(ctx);
    // }
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _needDesignBox(){return true;}_isContexable(){return false;}_doPrepareMeasure(ctx,dom){ctx.contextable=this._isContexable();super._doPrepareMeasure(ctx,dom);}_doMeasure(ctx,dom,hintWidth,hintHeight){const sz=super._doMeasure(ctx,dom,hintWidth,hintHeight);if(!(sz.height>0)&&!ctx.printing&&this.model.designHeight>0){sz.height=this.model.designHeight;}return sz;}measure(ctx,hintWidth,hintHeight){const sz=super.measure(ctx,hintWidth,hintHeight);if(ctx.printing){if(!isNaN(this._printWidth))this.width=this._printWidth;else if(!isNaN(this.measuredWidth))this.width=this.measuredWidth;if(!isNaN(this._printHeight))this.height=this._printHeight;else if(!isNaN(this.measuredHeight))this.height=this.measuredHeight;sz.width=this.width;sz.height=this.height;}return sz;}}/** @internal */class ReportHeaderElement extends SectionElement{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"reportHeaderView");}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return "report header";}_getCssSelector(){return 'rr-report-header rr-group-element';}}/** @internal */class ReportFooterElement extends SectionElement{//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"reportFooterView");}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return "report footer";}_getCssSelector(){return ReportFooterElement.STYLE_NAME;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ReportFooterElement.STYLE_NAME='rr-page-header rr-group-element';ReportFooterElement.isFooter=function(div){return div&&div.className===ReportFooterElement.STYLE_NAME;};/** @internal */class PageHeaderElement extends SectionElement{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"pageHeaderView");}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return "page header";}_getCssSelector(){return 'rr-page-header rr-group-element';}_isContexable(){return true;}}/** @internal */class PageFooterElement extends SectionElement{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"pageFooterView");}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return "page footer";}_getCssSelector(){return 'rr-page-footer rr-group-element';}_isContexable(){return true;}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class SpaceItemElement extends ReportItemElement{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"spaceItemView");}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return "rr-space rr-item-element";}get guardLabel(){return 'space';}get debugLabel(){return 'space';}get isSpace(){return true;}_doMeasure(ctx,dom,hintWidth,hintHeight){return Size.create(0,0);}}////////////////////////////////////////////////////////////////////////////////
    /**
     * @internal
     * View base for BoxContainer.
     */class BoxContainerElement extends ReportGroupItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model,name){super(doc,model,name);this._gap=0;this._container=this;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get gap(){return this._gap;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return '';}_needDesignBox(){return true;}_initDom(doc,dom){super._initDom(doc,dom);}_doSetStyles(model,dom){super._doSetStyles(model,dom);if(model&&model.overflow){dom.style.overflow='visible';}}_doMeasure(ctx,dom,hintWidth,hintHeight){if(!this.measureFixed){this._setModelSize(this.model,dom,hintWidth,hintHeight,true);}const w=this.measureFixed?this.width:Utils.pickNum(this._modelWidth,hintWidth);this._gap=this.model.getItemGap(w);const sz=super._doMeasure(ctx,dom,w,hintHeight);return sz;}_doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz){const w=this.measureFixed?this.width:hintWidth;if(!(sz.height>0)&&!ctx.printing&&this.model.designHeight>0){sz.height=this.model.designHeight;}if(!(sz.width>0)&&!ctx.printing&&this.model.designWidth>0){sz.width=this.model.designWidth;}if(this.childCount>0){this._applyPaddings(dom,sz);}super._doAfterMeasure(ctx,dom,w,hintHeight,sz);}}/**
     * View for RowBoxContainer
     */class RowBoxContainerElement extends BoxContainerElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){let name=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"rowBoxView";super(doc,model,name);}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getColPoints(){return this._points.slice();}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return 'rbox';}_getCssSelector(){return 'rr-box-container rr-rbox rr-group-element';}_initDom(doc,dom){super._initDom(doc,dom);}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;// padding이 적용된 크기.
    const r=this._paddings=ctx.reportView.getBoxPaddings(m);super._doMeasure(ctx,dom,hintWidth,hintHeight);const p=this;const cnt=p.childCount;let h=0;let w=this._gap*(cnt-1);for(let i=0;i<cnt;i++){const elt=p.getChild(i);if(elt.visible){if(elt instanceof SpaceItemElement){w+=elt['_measuredWidth']=elt.model.getSize(hintWidth);}else if(!elt.floating){h=Math.max(h,elt.measuredHeight);w+=elt.measuredWidth;}}}p.width=w;p.height=h;p.resetSizeStyle();// _afterDraw가 호출되게 한다.
    this.invalidate(true,true);// padding이 적용된 빈 크기와 _container의 크기를 더한다.
    return new Size(w+r.left+r.right,h+r.top+r.bottom);}_doLayoutContent(ctx){const p=this;for(let i=0,cnt=p.childCount;i<cnt;i++){const elt=p.getChild(i);if(elt.visible&&elt instanceof SpaceItemElement){elt['_measuredHeight']=this.height;}}super._doLayoutContent(ctx);const w=p.width;let x=0;const pts=this._points=[];let wItems=0;for(let i=0,cnt=p.childCount;i<cnt;i++){const elt=p.getChild(i);if(elt.visible&&!elt.floating){wItems+=elt.width+this._gap;}}if(wItems>0)wItems-=this._gap;switch(this.model.itemsAlign){case BoxItemsAlign.END:x=w-wItems;break;case BoxItemsAlign.MIDDLE:x=(w-wItems)/2;break;default:x=0;break;}for(let i=0,cnt=p.childCount;i<cnt;i++){const elt=p.getChild(i);if(elt.visible&&!elt.floating){elt.x=x;pts.push(x);x+=elt.width;pts.push(x);x+=this._gap;elt.setPrintStyles();}}}_layoutItem(ctx,child,model,x,y,width,height){const top=model.getTop(height);const bottom=model.getBottom(height);if(!isNaN(top)){y+=top;}else if(!isNaN(bottom)){y+=height-child.height-bottom;}else {y+=(height-child.height)/2;}child.move(this.x,y);child.setPrintStyles();}getUpper(view){return view;}getLower(view){return view;}}/**
     * View for ColumnBoxContainer
     */class ColumnBoxContainerElement extends BoxContainerElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){let name=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"columnBoxView";super(doc,model,name);}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getRowPoints(){return this._points.slice();}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return 'cbox';}_getCssSelector(){return 'rr-box-container rr-cbox rr-group-element';}_initDom(doc,dom){super._initDom(doc,dom);}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;// padding이 적용된 크기.
    const r=this._paddings=ctx.reportView.getBoxPaddings(m);super._doMeasure(ctx,dom,hintWidth,hintHeight);const p=this;//._container;
    const cnt=p.childCount;let h=this._gap*(cnt-1);let w=0;for(let i=0;i<cnt;i++){const elt=p.getChild(i);if(elt.visible){if(elt instanceof SpaceItemElement){h+=elt['_measuredHeight']=elt.model.getSize(hintHeight);}else if(!elt.floating){w=Math.max(w,elt.measuredWidth);h+=elt.measuredHeight;}}}p.width=w;p.height=h;p.resetSizeStyle();// _afterDraw가 호출되게 한다.
    this.invalidate(true,true);// padding이 적용된 빈 크기와 _container의 크기를 더한다.
    return new Size(w+r.left+r.right,h+r.top+r.bottom);}_doLayoutContent(ctx){const p=this;for(let i=0,cnt=p.childCount;i<cnt;i++){const elt=p.getChild(i);if(elt.visible&&elt instanceof SpaceItemElement){elt['_measuredWidth']=this.width;}}super._doLayoutContent(ctx);const h=p.height;let y=0;const pts=this._points=[];let hItems=0;for(let i=0,cnt=p.childCount;i<cnt;i++){const elt=p.getChild(i);if(elt.visible&&!elt.floating){hItems+=elt.height+this._gap;}}if(hItems>0)hItems-=this._gap;switch(this.model.itemsAlign){case BoxItemsAlign.END:y=h-hItems;break;case BoxItemsAlign.MIDDLE:y=(h-hItems)/2;break;default:y=0;break;}for(let i=0,cnt=p.childCount;i<cnt;i++){const elt=p.getChild(i);if(elt.visible&&!elt.floating){elt.y=y;pts.push(y);y+=elt.height;pts.push(y);y+=this._gap;elt.setPrintStyles();}}}_layoutItem(ctx,child,model,x,y,width,height){const left=model.getLeft(width);const right=model.getRight(width);if(!isNaN(left)){x+=left;}else if(!isNaN(right)){x+=width-child.width-right;}else {x+=(width-child.width)/2;}child.move(x,child.y);child.setPrintStyles();}getLeft(view){return view;}getRight(view){return view;}}/**
     * View for DiagonalBoxContainer.
     */class DiagonalBoxContainerElement extends ReportGroupItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,'diagonalBoxView');// this._container = this;
    }_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return 'dbox';}_getCssSelector(){return 'rr-box-container rr-dbox rr-group-element';}_needDesignBox(){return true;}_initDom(doc,dom){super._initDom(doc,dom);dom.appendChild(this._line=doc.createElement('span'));Utils.extend(this._line.style,{position:'absolute',boxSizing:'borderBox'});this._line.dataset.line='1';}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;const r=this._paddings=ctx.reportView.getBoxPaddings(m);if(!this.measureFixed){this._setModelSize(m,dom,hintWidth,hintHeight,true);}Utils.extend(this._line.style,m.lineStyles);super._doMeasure(ctx,dom,hintWidth,hintHeight);const v1=this.getChild(0);const v2=this.getChild(1);let w=0;let h=0;if(v1&&v2){w=v1.measuredWidth+v2.measuredWidth;h=v1.measuredHeight+v2.measuredHeight;}else if(v1){w=v1.measuredWidth;h=v1.measuredHeight;}if(ctx.printing){// for exporting
    this._line.dataset[T_MODEL]=dom.dataset[T_MODEL];}// padding이 적용된 빈 크기와 _container의 크기를 더한다.
    return new Size(w+r.left+r.right,h+r.top+r.bottom);}_doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz){if(!(sz.height>0)&&!ctx.printing&&this.model.designHeight>0){sz.height=this.model.designHeight;}if(!(sz.width>0)&&!ctx.printing&&this.model.designWidth>0){sz.width=this.model.designWidth;}if(this.childCount>0){this._applyPaddings(dom,sz);}super._doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz);dom.style.padding='0';}_doLayoutContent(ctx){const line=this._line;const w=this.width;const h=this.height;const len=Math.sqrt(Math.pow(w,2)+Math.pow(h,2));line.style.width=len+'px';if(this.model.reversed){line.style.transform='translateY('+h+'px) rotate(-'+Math.atan(h/w)+'rad)';line.style.transformOrigin='0% 0%';}else {line.style.transform='rotate('+Math.atan(h/w)+'rad)';line.style.transformOrigin='0% 0%';}super._doLayoutContent(ctx);}_layoutItem(ctx,child,model,x,y,width,height){const m=this.model;if(m.reversed){if(child.model===m.firstItem);else {x=this.width-child.width-this['_padRight'];y=this.height-child.height-this['_padBottom'];}}else {if(child.model===m.firstItem){y=this.height-child.height-this['_padBottom'];}else {x=this.width-child.width-this['_padRight'];}}child.move(x,y,true);}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class PageItemContainerElement extends BoundedContainerElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model,name){let emptySize=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;super(doc,model,name);this._findable=true;this._emptySize=emptySize;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get isLayer(){return true;}get findable(){return this._findable;}set findable(value){this._findable=value;}get debugLabel(){return '';}get lazyLayout(){// layout 시점에 measure한다.
    return true;}_getCssSelector(){return "rr-item-container "+this.name;}_needDesignBox(){return false;}_isEmptySize(){return this._emptySize;}_initDom(doc,dom){super._initDom(doc,dom);}_prepareChild(child){}_doMeasure(ctx,dom,hintWidth,hintHeight){if(ctx.printing){dom.style.pointerEvents='none';}const sz=super._doMeasure(ctx,dom,hintWidth,hintHeight);return sz.set(hintWidth,hintHeight);}}////////////////////////////////////////////////////////////////////////////////
    class BandGroupCellElement extends ReportGroupItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,'bandGroupCellView');}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return 'band group section';}_needDesignBox(){return true;}_getCssSelector(){return 'rr-bandgroupcell rr-group-element';}_doMeasure(ctx,dom,hintWidth,hintHeight){// band group에서 모델 너비를 계산해서 설정한다.
    this.width=this._getModelWidth(this.model,hintWidth);this.measureFixed=true;const sz=super._doMeasure(ctx,dom,hintWidth,hintHeight);if(this.childCount>0){sz.height=Math.max(sz.height,this.getChild(0).measuredHeight);}return sz;}}class BandGroupPrintInfo extends BandPrintInfo{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    isEnded(){for(const band of this.bands){if(!band.isEnded())return false;}return true;}getRows(){return;}getNextPage(doc,ctx,width,parent){const page=doc.createElement('div');const hPage=ctx.h;let n=0;let h=0;let x=0;page.style.position='relative';// page 위치는 container에서...
    parent.appendChild(page);this.bands.forEach((band,i)=>{const divBand=doc.createElement('div');const wCell=band.wCell;Object.assign(divBand.style,{position:'absolute',left:x+'px',width:wCell+'px'});page.appendChild(divBand);ctx.h=hPage;const div=band.getNextPage(doc,ctx,wCell,divBand);if(div){h=Math.max(h,div[T_HEIGHT]);n++;x+=wCell+this.gap;}});page.style.left=this.left;page[T_HEIGHT]=h;return n>0?page:null;}}/**
     * @internal
     * View for BandGroup.
     */class BandGroupElement extends ReportGroupItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,'bandGroupView');//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._gap=0;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    printGroup(doc,ctx,pages){const gap=this.model.bandGap;const ctxes=[];const pageList=[];let x=0;let nPage=0;this.elements.forEach(bandCell=>{const band=bandCell.getChild(0);const w=bandCell.width;if(band){const bandPages=[];ctx.saveBand();band.printBand(doc,ctx,w,bandPages);ctxes.push({n:bandPages.length,y:ctx.y,h:ctx.h});ctx.restoreBand();bandPages.forEach(p=>{// width 미지정 시 상위 컨테이너 넓이를 따라가기 때문에 print page 영역을 벗어남
    p.style.width=w+'px';p.style.left=x+'px';});pageList.push(bandPages);nPage=Math.max(nPage,bandPages.length);}else {ctxes.push(null);pageList.push(null);}x+=w+gap;});if(nPage>0){for(let i=0;i<nPage;i++){const page=doc.createElement('div');page.className='bg-page-container';page.style.position='relative';page.style.left=this.style.left;// #581
    for(let j=0;j<pageList.length;j++){if(pageList[j]){const p=pageList[j][i];p&&page.appendChild(p);}}pages.push(page);}let y=0;let h=Number.MAX_SAFE_INTEGER;ctxes.forEach(c=>{if(c.n===nPage){y=Math.max(y,c.y);h=Math.min(h,c.y);}});ctx.y=y;ctx.h=h;}}getCellPoints(){return this._cellPts;}prepareAsync(doc,ctx,width){const group=this.model;const cells=this.elements;const infos=[];cells.forEach(cell=>{const band=cell.getChild(0);const w=cell.width;if(band){const info=band.prepareAsync(doc,ctx,w,null,-1);info.wCell=w;infos.push(info);}});const info=new BandGroupPrintInfo();info.bands=infos;info.left=this.style.left;info.gap=group.bandGap;return info;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return 'band group';}_needDesignBox(){return true;}_getCssSelector(){return 'rr-bandgroup rr-group-element';}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;// padding이 적용된 크기.
    this._paddings=ctx.reportView.getBoxPaddings(m);this._setModelSize(m,dom,hintWidth,hintHeight);this._gap=Utils.toNumber(m.bandGap,0);let w=Utils.pickNum(this._modelWidth,hintWidth);w-=this._paddings.left+this._paddings.right;// band group cell이 모델 width를 기준으로 measure할 수 있도록 너비를 설정한다.
    const wCols=this.$_calcColWidths(w,this._gap);for(let i=0,cnt=m.count;i<cnt;i++){const elt=m.get(i);elt.width=wCols[i];}const sz=super._doMeasure(ctx,dom,w,hintHeight);// band group 높이를 명시적으로 설정하지 않은 경우 band들이 넘쳐서 표시되지 않도록 한다.
    if(isNaN(this._modelHeight)){for(let i=0;i<this.childCount;i++){sz.height=Math.max(sz.height,this.getChild(i).measuredHeight);}}return sz;}_doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz){if(!(sz.height>0)&&!ctx.printing&&this.model.designHeight>0){sz.height=this.model.designHeight;}if(!(sz.width>0)&&!ctx.printing&&this.model.designWidth>0){sz.width=this.model.designWidth;}if(this.childCount>0){this._applyPaddings(dom,sz);}super._doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz);}_doLayoutContent(ctx){const p=this;super._doLayoutContent(ctx);const pts=this._cellPts=[];if(this.childCount>0){const h=this.height;const gap=this._gap;let x=this._paddings.left;pts.push(x);for(let i=0,cnt=p.childCount;i<cnt;i++){const elt=p.getChild(i);elt.x=x;elt.height=h;x+=elt.width+gap;elt.setPrintStyles();pts.push(x);}}}_setDesignContent(empty,designView){super._setDesignContent(empty,designView);designView.style.backgroundColor='#0088ff10';}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_calcColWidths(width,gap){const cells=this.model.items;const nCell=cells.length;const widths=[];width-=Math.max(0,gap)*(cells.length-1);if(nCell>1){let sum=0;cells.forEach(cell=>sum+=cell.weight);cells.forEach(cell=>{widths.push(width*cell.weight/sum);});if(gap<0){for(let i=1;i<nCell;i++){widths[i]-=gap;}}}else if(nCell===1){widths.push(width);}return widths;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * @internal
     * Table element의 child가 아니다.
     * Td cell에 표시되는 element의 부모 conatiner 역할을 한다.
     */class TableCellElementBase extends ReportGroupItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,table,model,name){super(doc,model,name);this._table=table;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get table(){return this._table;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get container(){return this._table.container;}get debugLabel(){return '';}get designable(){return false;}get navigable(){return false;}get navigableParent(){return this._table;}_getCssSelector(){return TableCellElementBase.STYLE;}_needContentBox(){return false;}_initDom(doc,dom){super._initDom(doc,dom);dom.className=TableCellElementBase.STYLE;// dom.style.display = "flex";
    // dom.style.justifyContent = "center";// "flex-start", "flex-end";
    // dom.style.alignContent = "center";
    }_prepareChild(child){const css=child.dom.style;css.position="relative";// 이렇게 해야 debug layer가 그려진다.
    // css.flex = '0 0 auto';      // 이렇게 하지 않으면 printing 시 width가 0이 된다.
    //child.positionable = false;
    }_doLayoutContent(ctx){super._doLayoutContent(ctx);const m=this.model;const table=this._table;const cell=table.model.getCell(m.row,m.col);const child=this.getChild(0);const colStyles=table.model.getColumn(m.col).styles;const styles=cell.styles;const align=styles&&styles.cellAlign||colStyles&&colStyles.cellAlign;let x=0;switch(align){case'left':break;case'right':x=this.offsetWidth-child.offsetWidth;break;default:x=(this.offsetWidth-child.offsetWidth)/2;break;}child.x=x;child.setPrintStyles();// 조정
    child.dom.style.display='table';child.dom.style.top='';child.y=NaN;if(ctx.printing){// for exporting
    const td=table.$_td(this._row,this._col);td.dataset[T_ALIGN]=align?align.charAt(0):'c';}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    TableCellElementBase.STYLE='rr-table-cell';/** @internal */class TableElement extends ReportGroupItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model,name){super(doc,model,name);this._tcells=[];this._ecells=[];// empty cells
    // r이 0이면 span된 셀이다.
    this._spans=[];}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static setTableStyle(table){let fill=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;const css=table.style;css.setProperty("table-layout","fixed","important");fill&&css.setProperty("width","100%","important");css.setProperty("border-collapse","collapse","important");css.height='100%';table.className="rr-table";}static getTable(elt){let t;if(elt instanceof TableElement){t=elt;}if(!t&&elt instanceof TableCellElementBase){t=elt.table;}if(!t&&elt&&elt.parent instanceof TableCellElementBase){t=elt.parent.table;}if(t instanceof TableElement){return t;}}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get rowCount(){return this._tbody.rows.length;}get cellCount(){return this._tcells.length;}get cellViews(){return this._tcells.slice(0);}get hasCells(){return this._tcells.length>0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    /**
         * designer에서 호출한다.
         */getColPoints(){let x=0;const pts=[x];if(this._cellWidths){for(let w of this._cellWidths){pts.push(x+=parseFloat(w));}}return pts;}getColWidth(col){return this._colPts[col+1]-this._colPts[col];}getRowPoints(){const zoom=this.container.zoom;const rows=this._tbody.rows;let y=0;const pts=[y];for(let i=0;i<rows.length;i++){//pts.push(y += rows[i].offsetHeight); <= 소수점 이하 값이 잘려져 리턴된다.
    pts.push(y+=rows[i].getBoundingClientRect().height*100/zoom);}return pts;}getRowRect(row){let count=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;const rows=this._tbody.rows;const r=Rectangle.create(0,0,this.width,0);for(let i=0;i<row;i++){r.y+=rows[i].getBoundingClientRect().height;}for(let i=0,cnt=Math.min(count,this.rowCount-row);i<cnt;i++){r.height+=rows[i+row].getBoundingClientRect().height;}return r;}getColRect(col){let count=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;const r=Rectangle.create(0,0,0,this.height);r.x=this._colPts[col];count=Math.min(count,this._colPts.length-col);r.width=this._colPts[col+count]-r.x;return r;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    // get isLayer(): boolean {
    //     return true;
    // }
    get blockable(){return true;}get debugLabel(){return "table";}_needContentBox(){return false;}getCellOf(target,deep){if(!target)return null;let td;if(deep){let p=target;while(p){if(p instanceof HTMLTableCellElement){td=p;break;}p=p.parentElement;}}else if(target.parentElement instanceof HTMLTableCellElement){td=target.parentElement;}else if(target instanceof HTMLTableCellElement){td=target;}if(td){const row=td.parentElement.rowIndex;return this.model.getCell(row,td.cellIndex);}}findChildAt(x,y,hitTesting){const target=this.container.activeTool.mouseEventTarget;for(let c of this._tcells){if(c.isDom(target)){return c;}let child=c.getChild(0);if(child.isDom(target)){return child;}let child2=child.findDescendantOf(target);if(child2){return child2;}if(child.containsDom(target)){return child;}}}findChildOf(dom){for(let c of this._tcells){if(c.isDom(dom))return c;const elt=c.findChildOf(dom);if(elt)return elt;}}findElement(modelName){const elt=super.findElement(modelName);if(!elt){for(let c of this._tcells){const child=c.getChild(0);if(child instanceof ReportItemElement){const elt2=child.findElement(modelName);if(elt2){return elt2;}}}}return elt;}findElementOf(dom){const elt=super.findElementOf(dom);if(!elt){for(let c of this._tcells){const child=c.getChild(0);if(child instanceof ReportItemElement){// cell을 클릭할 때 child가 있으면 child를 리턴한다.
    if(c.isDom(dom)){return child;}const elt2=child.findElementOf(dom);if(elt2)return elt2;}}}if(!elt){// #237
    if(dom instanceof HTMLTableCellElement||dom.classList.contains(TableCellElementBase.STYLE)){if(this.containsDom(dom))return this;}}return elt;}getElementOf(model){for(let c of this._tcells){const child=c.getChild(0);if(child instanceof ReportItemElement){if(child.model==model)return child;}if(child instanceof ReportGroupItemElement){const elt=child.getElementOf(model);if(elt)return elt;}}}setCellDoms(to,from){const toCells=to.cells;const fromCells=from.cells;for(let i=fromCells.length-1;i>=0;i--){const fromDom=fromCells[i].firstElementChild;if(fromDom){toCells[i].appendChild(fromDom);}}for(let cell of this['_tcells']){if(cell['_row']===to.rowIndex){cell['_dom']=toCells[cell['_col']].lastElementChild;}}}unsetCellDoms(to,from){const toCells=to.cells;const fromCells=from.cells;for(let i=fromCells.length-1;i>=0;i--){const fromDom=fromCells[i].lastElementChild;if(fromDom){toCells[i].appendChild(fromDom);}}for(let cell of this['_tcells']){if(cell['_row']===to.rowIndex){cell['_dom']=toCells[cell['_col']].firstElementChild;}}}// @@ 이 놈이 범인 !
    replaceCellDoms(to,from){const toCells=to.cells;const fromCells=from.cells;for(let i=fromCells.length-1;i>=0;i--){const fromDom=fromCells[i].firstElementChild;const toDom=toCells[i].firstElementChild;if(fromDom&&toDom){fromCells[i].removeChild(fromDom);fromCells[i].appendChild(toDom);toCells[i].appendChild(fromDom);}}for(let cell of this['_tcells']){if(cell['_row']===to.rowIndex){cell['_dom']=toCells[cell['_col']].firstElementChild;}}// const cells = other.cells;
    // for (let cell of this['_tcells']) {
    //     if (cell['_row'] === row.rowIndex) {
    //         cell['_dom'] = cells[cell['_col']].firstElementChild as HTMLElement;
    //     }
    // }
    }_setTableStyles(table){TableElement.setTableStyle(table);}_createDom(doc){const div=super._createDom(doc);// TODO: 현재 table col들의 합이 div의 너비도다 큰 경우가 발생할 수 있다.
    //       사용자들은 이 div의 존재를 모르고 table을 상대하므로 'hidden'할 필요가 없을 듯.
    // div.style.overflow = 'hidden';
    // div.style.overflow = 'visible';
    const table=this._table=doc.createElement("table");this._setTableStyles(table);this._colgroup=doc.createElement('colgroup');table.appendChild(this._colgroup);this._tbody=doc.createElement("tbody");table.appendChild(this._tbody);div.appendChild(table);return div;}_doModelChanged(oldModel){oldModel&&(oldModel.onCellChanged=null);this.model&&(this.model.onCellChanged=this.$_cellChanged.bind(this));}$_refreshRowCells(ctx,hintWidth,hintHeight){let force=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const container=this.container;for(let c of this._tcells){if(force)c['_modelChanged']=true;// 무조건 내용을 빌드하게 한다.
    //const w = this.measureFixed ? c.dom.offsetWidth : hintWidth;
    const w=Utils.pickNum(c.dom.offsetWidth,hintWidth);c.measure(ctx,w,hintHeight);const c2=c.getChild(0);// _tcells 들이 이 element의 child가 아니므로 
    // VisualElement.draw cell 바로 아래 element들과 그 자식들의 위치와 크기를 강제로 draw() 한다.
    c.layoutContent(ctx);// testing 중에 container가 설정되지 않을 수 있다.
    container?container["_drawElement"](c2):c2.drawRecursive();}const hMin=this.model.getMinRowHeight();if(!isNaN(hMin)){const sMin=hMin+'px';const rows=this._tbody.rows;for(let i=0;i<rows.length;i++){const h=rows[i].offsetHeight;if(h<hMin)rows[i].style.height=sMin;}}}_isEmpty(){return this.model.colCount==0;// return this._tcells.length < 1;
    }_doMeasure(ctx,dom,hintWidth,hintHeight){const model=this.model;this._table.style.height='';this.$_prepareTable(model,this._tbody);// !ctx.printing && this.$_prepareFocus();
    this._setModelSize(model,dom,hintWidth,hintHeight,true);// this._fixedHeight = !!dom.style.height;
    // 모델에 지정된 컬럼 너비들을 기준으로 셀 너비들을 조정한다.
    this.$_measureCellWidths(model,this._modelWidth||hintWidth);// this.offsetWidth || hintWidth);
    // 모델에 지정된 행 높이들을 기준으로 행 높이들을 지정한다.
    this.$_measureRowHeights(model,this._modelHeight||NaN);// this.offsetHeight);
    super._doMeasure(ctx,dom,hintWidth,hintHeight);this.$_refreshRowCells(ctx,hintWidth,hintHeight);if(ctx.printing){// for exporting
    this._table.dataset[T_MODEL]=dom.dataset[T_MODEL];}else {this._table.dataset[T_MODEL]=model.shash;// #625
    // preview/design-time border 스타일이 동일해야 한다. 
    // 그렇지 않으면 디자인과 preview에서 미세하게 달라질 수 있다.
    // td의 기본 border가 설정되므로 table border를 강제할 필요가 없다.
    // this._table.style.border = '1px solid rgba(55, 55, 55, 0.1)'; 
    }return new Size(this._table.offsetWidth,this._table.offsetHeight);}_doLayoutContent(ctx){super._doLayoutContent(ctx);// div 크기에 table 높이를 맞춘다. #625
    this._table.style.height=this.height+'px';}clear(){if(this._ecells&&this._ecells.length){this._ecells.forEach(elt=>Utils.remove(elt));this._ecells=null;}if(this._tcells&&this._tcells.length){this._tcells.forEach(elt=>Utils.remove(elt['_dom']));this._tcells=null;return true;}}_buildItems(ctx,report,model){function maxHeight(r,span){// 고정 아닌 것이 존재하면 maxHeight가 설정되지 않도록 한다.
    let h=parseInt(heights[r]);for(let i=1;i<span;i++){h+=parseInt(heights[r+1]);}return h>0?h+'px':'';}function padHeight(h,pad){if(h&&pad!==0){return Math.max(0,parseInt(h)-pad)+'px';}return h;}const doc=this.doc;const rows=model.rowCount;const cols=model.colCount;const trows=this._tbody.rows;const spans=this._spans;// const minHeight = model.getMinRowHeight();
    const heights=this._rowHeights;this._tcells=[];this._ecells=[];for(let r=0;r<rows;r++){const tr=trows[r];for(let c=0;c<cols;c++){const td=tr.cells[c];const cellItem=model.getCellItemAt(r,c);if(!ctx.printing){td.dataset.design='';}if(spans[r][c].r===0||spans[r][c].c===0){td.removeAttribute('colspan');td.removeAttribute('rowspan');td.style.display="none";}else {this._prepareCellStyles(ctx,model,r,c,td);const rspan=spans[r][c].r;const hMax=rspan>1?maxHeight(r,rspan):heights[r];const cs=getComputedStyle(td);const pad=Utils.toInt(cs.paddingTop)+Utils.toInt(cs.paddingBottom);// const pad = Utils.toInt(cell.getStyle('paddingTop')) + Utils.toInt(cell.getStyle('paddingBottom'));
    td.colSpan=spans[r][c].c;td.rowSpan=rspan;//assert(td.childElementCount == 0);        
    if(cellItem){const elt=this._createCellElement(doc,cellItem);elt['_row']=r;elt['_col']=c;// elt["_dom"].style.minHeight = padHeight(minHeight, pad);
    // 이렇게 해야 table 행 높이를 고정할 수 있다!
    // maxHeight대신 height로 설정하면 tr offsetHeight가 1 증가한다.
    elt["_dom"].style.maxHeight=padHeight(hMax,pad);this._prepareChild(elt);td.appendChild(elt["_dom"]);this._tcells.push(elt);}else {const elt=doc.createElement('div');elt.className=TableCellElementBase.STYLE;// 이 설정에 의해 다른 height 설정들이 없는 경우에도 tr의 행 높이가 fontSize에 따라 기본 설정된다.
    // 이 설저이 없으면 tr 높이는 1 table은 2 정도가 된다.
    elt.innerHTML=ZWSP;// #627
    // elt.style.minHeight = padHeight(minHeight, 0);
    // 이렇게 해야 table 행 높이를 고정할 수 있다!
    // maxHeight대신 height로 설정하면 tr offsetHeight가 1 증가한다.
    elt.style.maxHeight=padHeight(hMax,0);td.appendChild(elt);this._ecells.push(elt);}}}}}_prepareCellStyles(ctx,table,row,col,td){const tcell=table.getCell(row,col);const apply=tcell.applyEndStyles;// default cell styles
    let styles=table.cellStyles;this._setStyles(table,styles,td.style);// column styles
    styles=table.getColumn(col).styles;this._setStyles(table,styles,td.style);if(apply&&td.colSpan>1){styles=table.getColumn(col+td.colSpan-1).styles;this._setStyles(table,styles,td.style);}// row styles
    styles=table.rows.get(row).styles;this._setStyles(table,styles,td.style);if(apply&&td.rowSpan>1){styles=table.rows.get(row+td.rowSpan-1).styles;this._setStyles(table,styles,td.style);}// cell styles
    styles=tcell.styles;if(styles){if(CELL_ALIGN in styles){styles={...styles};delete styles[CELL_ALIGN];this._setStyles(table,styles,td.style);}else {this._setStyles(table,styles,td.style);}}const cb=tcell.styleCallback;if(cb){try{const styles=cb(ctx,tcell,ctx.row);if(styles){this._setStyles(table,styles,td.style);}}catch(err){console.error('StyleCallback Error',err);}}}_prepareChild(child){const css=child["_dom"].style;css.position='relative';// 기본이 absolute다. 또, 'relatvie'를 설정하지 않으면 debug box가 위치를 못 잡는다.
    child.positionable=false;}/**
         * 테이블 내에서 첫번째 item.
         */getFirst(){const spans=this._spans;for(let r=0;r<spans.length;r++){const row=spans[r];for(let c=0;c<row.length;c++){if(row[c].r){const cell=row[c].m;if(cell){return this._findCell(cell).firstChild;}}}}}getLast(){const spans=this._spans;for(let r=spans.length-1;r>=0;r--){const row=spans[r];for(let c=row.length-1;c>=0;c--){if(row[c].r){const cell=row[c].m;if(cell){return this._findCell(cell).firstChild;}}}}}_getPrev(item){const m=item.model;const spans=this._spans;let c=m.col;if(c>0){const r=m.row;const rows=spans[r][c].v.rowspan||1;while(--c>=0){for(let i=0;i<rows;i++){const cell=spans[r+i][c].m;if(cell&&cell.item!==m){return this._findCell(cell).firstChild;}}}}}_getNext(item){const spans=this._spans;const m=item.model;const r=m.row;let c=m.col;if(c<spans[r].length-1){const rows=spans[r][c].v.rowspan||1;while(++c<spans[r].length){for(let i=0;i<rows;i++){const cell=spans[r+i][c].m;if(cell&&cell.item!==m){return this._findCell(cell).firstChild;}}}}}getUpper(item){const spans=this._spans;const m=item.model;let r=m.row;if(r>0){const c=m.col;const cols=spans[r][c].v.colspan||1;while(--r>=0){for(let i=0;i<cols;i++){const cell=spans[r][c+i].m;if(cell&&cell.item!==m){return this._findCell(cell).firstChild;}}}}}getLower(item){const spans=this._spans;const m=item.model;let r=m.row;if(r<spans.length-1){const c=m.col;const cols=spans[r][c].v.colspan||1;while(++r<spans.length){for(let i=0;i<cols;i++){const cell=spans[r][c+i].m;if(cell&&cell.item!==m){return this._findCell(cell).firstChild;}}}}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    get $_trows(){return this._tbody.rows;}get $_trowsCopy(){return Array.from(this._tbody.rows);}$_cloneRow(tr){const trow=tr.cloneNode(false);const cells=tr.cells;for(let i=0,n=cells.length;i<n;i++){const td=cells[i].cloneNode(false);const child=cells[i].firstElementChild;child&&td.appendChild(child.cloneNode(false));trow.appendChild(td);}return trow;}$_td(row,col){return this._tbody.rows[row].cells[col];}$_cellChanged(item,prop,oldValue){}$_prepareTable(model,body){const doc=getDoc(body);const rows=model.rowCount;const cols=model.colCount;this._spans=model.prepareLayout();this.$_prepareColGroup(doc,this._colgroup,cols);// tbody
    while(body.childElementCount<rows){const tr=doc.createElement("tr");body.appendChild(tr);}while(body.childElementCount>rows){body.removeChild(body.lastChild);}const children=body.children;for(let i=0;i<rows;i++){const tr=children[i];this.$_prepareTableRow(doc,model,i,tr,cols);}}// private $_prepareFocus(): void {
    //     if (!this._focusView) {
    //         // 주의! addChild 하지말 것. 현재 table dom이 child로 포함되지 않아서
    //         //      clear()시 table dom이 제거되지 않고 있다.
    //         //      addChild하면 measure내에서 clear가 호출되고 table까지 제거된다.
    //         this._focusView = new TableCellFocusView(this.doc);
    //         this.dom.appendChild(this._focusView.dom);
    //     }
    // }
    _setRowStyles(tr,row){}$_prepareColGroup(doc,group,count){let i=group.childElementCount;while(i++<count){const col=doc.createElement("col");group.appendChild(col);}while(group.childElementCount>count){group.removeChild(group.lastElementChild);}}$_prepareTableRow(doc,model,row,tr,count){this._setRowStyles(tr,row);this.$_prepareTableRowCells(doc,tr,count);}$_prepareTableRowCells(doc,tr,count){let i=tr.childElementCount;while(i++<count){const td=doc.createElement("td");tr.appendChild(td);}while(tr.childElementCount>count){tr.removeChild(tr.lastChild);}return tr.childElementCount;}$_calcCellWidths(model,domain){const cols=model.colCount;const widths=(model.getCellWidths()||DimensionCollection.Empty).getSizes(cols,domain,model['_minCellWidthDim'],false);const cellWidths=[];const pts=this._colPts=[0];// widths의 sum은 domain을 넘어서지 않지만, 실제 테이블 너비가 domain 보다 커지는 경우가 있다!
    // 테이블 너비 이내로 설정한 경우 비율로 설정한다.  
    let sum=0;for(let i=0;i<widths.length;i++){sum+=widths[i];}const unit=sum<=domain?'%':'px';for(let i=0;i<cols;i++){cellWidths[i]=widths[i]+unit;pts.push(pts[i]+widths[i]);}return cellWidths;}$_measureCellWidths(model,w){if(this._masterView){this._cellWidths=this._masterView._cellWidths;this._colPts=this._masterView._colPts;}else {const cols=model.colCount;const rows=this._tbody.rows;if(rows.length>0&&cols>0){this._cellWidths=this.$_calcCellWidths(model,w);}else {this._cellWidths=[];}}let sum=0;// colgroup
    if(this._cellWidths.length>0){const cells=this._colgroup.children;for(let i=cells.length-1;i>=0;i--){const dom=cells[i];const css=dom.style;const wCell=parseFloat(this._cellWidths[i]);dom[T_WIDTH]=wCell;dom.dataset.width=String(wCell);css.width=this._cellWidths[i];sum+=wCell;}}if(model.fixed){this._table.style.setProperty("width",Utils.pickNum(sum,0)+'px',"important");}else {this._table.style.setProperty("width","100%","important");}}$_calcRowHeights(model,domain){const heights=(model.getRowHeights()||DimensionCollection.Empty).getSizes(model.rowCount,domain,model['_minRowHeightDim']);const rowHeights=[];for(let i=0,cnt=model.rowCount;i<cnt;i++){if(isNaN(heights[i])){rowHeights[i]='';}else {rowHeights[i]=heights[i]+'px';}}return rowHeights;}$_measureRowHeights(model,h){const rows=this._tbody.rows;const heights=this._rowHeights=this.$_calcRowHeights(model,h);for(let i=0;i<rows.length;i++){const h=heights[i];rows[i].style.height=h;}}getCellBoundingRect(col,row,width,height){const rows=this._tbody.rows;const d=this._colPts[0]-rows[0].cells[0].offsetLeft;let x=this._colPts[col]-d;let y=rows[row].offsetTop;let w=this._colPts[col+width]-d-x-1;let h=0;for(let r=0;r<height;r++){h+=rows[row+r].offsetHeight;}return {x:x,y:y,width:w,height:h};}$_layoutViewInCell(view,cell){const m=this.model;let row=-1;let col=-1;// TODO: 이게 필요없어야 한다! tablecontainer와 tableband의 table이 다르다!
    const hMargin=cell instanceof TableCell&&cell.table instanceof TableContainer?1:0;if(cell instanceof TableCell&&cell.table===m){row=cell.row;col=cell.col;}if(view.visible=col>=0&&row<m.rowCount){const td=this._tbody.rows[row].cells[col];const cspan=td.colSpan||1;const rspan=td.rowSpan||1;const x=this._colPts[col];const w=this._colPts[col+cspan]-x;const rows=this._tbody.rows;let h=rows[row].offsetHeight;let y=0;for(let r=0;r<row;r++){y+=rows[r].offsetHeight;}for(let r=0;r<rspan-1;r++){h+=rows[row+r+1].offsetHeight;}view.dom.dataset.focused='';view.setBounds(x,y+1,w,h+hMargin);view.draw();return true;}}// private $_layoutFocus(): boolean {
    //     const cell = this._getFocusedItem();
    //     if (cell instanceof TableCell) {
    //         return this.$_layoutViewInCell(this._focusView, cell);
    //     } else {
    //         this._focusView.visible = false;
    //     }
    // }
    // private $_clearSelection(): void {
    //     this._selectViews.forEach(v => {
    //         v.dom.remove();
    //         this._selectPool.push(v);
    //     });
    //     this._selectViews.length = 0;
    // }
    // private $_layoutSelection(focused: TableCell): void {
    //     const sels = this.container['getSelection']();
    //     if (sels) {
    //         sels.forEach((sel: any) => {
    //             if (sel instanceof TableSelection && sel.selectItem !== focused) {
    //                 let v = this._selectPool.pop();
    //                 if (!v) {
    //                     v = new TableCellSelectView(this.doc);
    //                 }
    //                 this.dom.appendChild(v.dom);
    //                 this.$_layoutViewInCell(v, sel.selectItem);
    //                 this._selectViews.push(v);
    //             }
    //         })
    //     }
    // }
    _findCell(model){for(let cell of this._tcells){if(cell.model===model)return cell;}}createColGroup(doc,width){const model=this.model;const cols=model.colCount;const group=doc.createElement('colgroup');const widths=this.$_calcCellWidths(model,width);for(let i=0;i<cols;i++){const col=doc.createElement("col");group.appendChild(col);col.style.width=widths[i];col[T_WIDTH]=parseFloat(widths[i]);}return group;}}class TableLine{constructor(table){this._rows=table.tBodies[0].rows;}get height(){const doms=this._doms||this._rows;let h=0;for(let i=0;i<doms.length;i++){h+=doms[i].offsetHeight;}return h;}appendTo(target,className){if(!this._doms){this._doms=[];for(let i=0;i<this._rows.length;i++){const dom=this._rows[i].cloneNode(true);this._doms.push(dom);}}for(let dom of this._doms){dom.classList.add(className);target.appendChild(dom);}// NOTE: 이렇게 tr들을 모두 추가한 후에 offsetHeight를 참조해야 한다.
    //       그렇지 않으면 병합셀이 있는 경우 tr의 높이가 큰 값으로 설정될 수 있다.
    for(let dom of this._doms){dom.style.height=dom.offsetHeight+'px';}}remove(){if(this._doms){for(let i=this._doms.length-1;i>=0;i--){const dom=this._doms[i];const p=dom.parentElement;p&&p.removeChild(dom);}this._doms=null;}}}////////////////////////////////////////////////////////////////////////////////
    const DEC_SEP=".";const GRP_SEP=",";const decimalPlaces=function(num){var match=(''+num).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(!match){return 0;}return Math.max(0,// Number of digits right of decimal point.
    (match[1]?match[1].length:0// Adjust for scientific notation.
    )-(match[2]?+match[2]:0));};const _isRoundChar=function(c){return Utils.included(c,"c","f","C","F","a","A");};/** @internal */class NumberFormatter{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(format){this._optDecimal=false;this._groupPos=0;this._replacement="$&,";this._minDigits=0;this._maxDigits=0;this._minInts=0;this._maxInts=0;this.parse(this._format=format);}static getFormatter(format){let f=NumberFormatter.Formatters[format];if(!f){NumberFormatter.Formatters[format]=f=new NumberFormatter(format);}return f;}static get Default(){return NumberFormatter.getFormatter(NumberFormatter.DEFAULT_FORMAT);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** format */get format(){return this._format;}/** separator */get separator(){return this._seperator;}/** groupSep */get groupSep(){return this._groupSep;}/** minDigits */get minDigits(){return this._minDigits;}/** maxDigits */get maxDigits(){return this._maxDigits;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    parse(format){this._minDigits=0;this._maxDigits=0;this._minInts=0;this._maxInts=0;this._parse(format);}getText(value){let minusZero=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;let v=Number(value);if(isNaN(v)){return "";}else {let digits=this._minDigits;let p=0;if(this._optDecimal){const dlen=decimalPlaces(v);digits=Math.min(Math.max(dlen,this._minDigits),this._maxDigits);}if(digits>0&&this._round){p=Math.pow(10,digits);switch(this._round){case"c":v=Math.ceil(p*v)/p;break;case"f":// v = Math.floor(p * v) / p;
    // 5.1 * 100 === 510 => false
    // 5.1 * 1000 === 5100 => true
    // 곱하고 짜르고 나누고 해서는 원하는 값이 안나온다.
    const arr=v.toString().split(".");v=parseFloat(arr.length>1?arr[0]+"."+arr[1].substr(0,digits):arr[0]);break;}}v=this._round==="a"?Math.abs(v):v;v=Number(v.toPrecision(15));let fixed=v.toFixed(digits);// displayMinusZero => -0.00 처럼 표시되는것을 0.00으로 표시되도록 한다.
    // 1.0에서는 column별로 formatter가 존재했지만 2.0에서는 통합되었다. getText할때 넘겨주자.
    try{!minusZero&&(p=parseFloat(fixed))===Math.abs(parseFloat(fixed))&&p===0&&(fixed=Math.abs(v).toFixed(digits));}catch(e){}if(this._seperator){fixed=fixed.replace(DEC_SEP,this._seperator);}if(this._reg){if(digits)return fixed.replace(this._regDecimal,this._replacement);else return fixed.replace(this._reg,this._replacement);}else {return fixed;}}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _parse(format){if(format){format=format.trim();}if(!format){return;}var seperator=DEC_SEP;var groupSep=GRP_SEP;if(format.indexOf(";")>-1){const fmts=format.split(";");format=fmts[0];if(fmts.length>1&&fmts[1]&&!_isRoundChar(fmts[1])){seperator=fmts[1];}if(fmts.length>2&&fmts[2]&&!_isRoundChar(fmts[2])){groupSep=fmts[2];}this._round=fmts[3]||fmts[2]||fmts[1];this._round=_isRoundChar(this._round)?this._round.toLowerCase():this._round;}this._seperator=seperator==DEC_SEP?null:seperator;this._groupSep=groupSep==GRP_SEP?null:groupSep;const len=format.length;const period=format.indexOf(DEC_SEP);this._optDecimal=format.indexOf("#",period)>0;if(period>=0){let i=period+1;for(;i<len;i++){if(format.charAt(i)=="0"){this._minDigits++;this._maxDigits++;}else {break;}}for(;i<len;i++){if(format.charAt(i)=="#"){this._maxDigits++;}else {break;}}format=format.substr(0,period);}if(format){const len=format.length;if(format.charAt(len-1)==GRP_SEP){this._groupPos=3;// locale default
    format=format.substr(0,len-1);}}if(format){const len=format.length;let zero=true;for(let i=len-1;i>=0;i--){const c=format.charAt(i);if(c=="0"&&zero){this._minInts++;this._maxInts++;}else if(this._groupPos==0&&c==GRP_SEP){this._groupPos=len-i-1;}else if(c=="#"){zero=false;}else {break;}}}if(this._groupPos>0){this._replacement="$&"+groupSep;this._reg=new RegExp('\\d(?=(\\d{'+this._groupPos+'})+($|\\'+seperator+'))','g');this._regDecimal=new RegExp('\\d(?=(\\d{'+this._groupPos+'})+\\'+seperator+')','g');}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    NumberFormatter.DEFAULT_FORMAT="#,##0.0";//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    NumberFormatter.Formatters={};////////////////////////////////////////////////////////////////////////////////
    const LEV='_lev';class FieldContainer extends ReportElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'fieldContainer');//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._divs=[];}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setFields(doc,band,fields){const dom=this.dom;const divs=this._divs;const count=fields?fields.length:0;dom.dataset.empty=count>0?'0':'1';while(divs.length<count){const div=doc.createElement('div');const span=doc.createElement('span');const arrow=doc.createElement('span');span.style.flexGrow='1';span.style.whiteSpace='nowrap';div.appendChild(span);arrow.className=FieldContainer.ARROW_CLASS;arrow.textContent='‣';div.appendChild(arrow);div.className=FieldContainer.FIELD_CLASS;div.style.display='flex';div.style.alignItems='center';dom.appendChild(div);divs.push(div);}while(divs.length>count){const span=this._divs.pop();dom.removeChild(span);}divs.forEach((div,i)=>{const f=fields[i].fieldName;// const c = band.containsField(f);
    // div.style.color = c ? '#999' : '';
    div.firstElementChild.textContent=f;div.children[1][T_FIELD]=f;// arrow
    // (div.children[1] as HTMLElement).style.color = c ? '#999' : '';
    // (div.children[1] as HTMLElement).style.pointerEvents = c ? 'none' : '';
    });}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return FieldContainer.CLSS_NAME;}_initDom(doc,dom){super._initDom(doc,dom);Object.assign(dom.style,{display:'flex',flexDirection:'column',overflowY:'scroll',overflowX:'hidden',paddingRight:'4px',minWidth:'150px'});}_doMeasure(ctx,dom,hintWidth,hintHeight){return Size.create(dom.offsetWidth,dom.offsetHeight);}_doLayoutContent(ctx){}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    FieldContainer.CLSS_NAME='rr-crosstab-field-container';FieldContainer.FIELD_CLASS='rr-crosstab-field';FieldContainer.ARROW_CLASS='rr-crosstab-field-arrow';class CrosstabFieldsView extends ReportPageItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,name,rowCount){super(doc,name);this.$_createSectionTable(doc,this.dom,rowCount);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get fields(){return this._fields;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setFields(fields){this._fields=fields;}getFieldOf(target){if(target instanceof HTMLTableCellElement&&this._tbody.contains(target)&&target.cellIndex>0){const fld=this._fields.get(target.cellIndex-1);if(target.dataset.type==='summaryHeader'){return fld.summary.header;}else if(target.dataset.type==='summary'){return fld.summary;}else if(target.dataset.type==='header'){return fld.header;}else {return fld;}}}getFieldCellRow(cell){const r=cell instanceof CrosstabFieldSummaryHeader?3:cell instanceof CrosstabFieldSummary?2:cell instanceof CrosstabFieldHeader?1:0;const n=1;return {r,n};}getFieldBoundingRect(cell){const field=CrosstabBand.getFieldOf(cell);const r=this.getFieldCellRow(cell);const td=this._tbody.rows[r.r].cells[field.index+1];let height=td.offsetHeight;if(r.n>1){height+=this._tbody.rows[r.r+1].cells[field.index+1].offsetHeight;}return {x:td.offsetLeft,y:td.offsetTop,width:td.offsetWidth,height:height};}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    isViewOf(model){return model===this._fields;}_initDom(doc,dom){super._initDom(doc,dom);Object.assign(dom.style,{backgroundColor:'#f8f8f8'});}_doMeasure(ctx,dom,hintWidth,hintHeight){this._doPrepareCells(this.doc,this._tbody);return Size.create(dom.offsetWidth,this._table.offsetHeight);// dom.offsetHeight);
    }_doLayoutContent(ctx){}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_createSectionTable(doc,dom,rowCount){this._table=doc.createElement('table');TableElement.setTableStyle(this._table,false);this._table.style.position='absolute';this._table.style.backgroundColor='white';this._table.className=CrosstabFieldsView.TABLE_CLASS;const body=this._tbody=doc.createElement('tbody');let tr;let td;for(let i=0;i<rowCount;i++){body.appendChild(tr=doc.createElement('tr'));tr.appendChild(td=doc.createElement('td'));td.dataset.empty='1';td.style.backgroundColor='#f0f0f0';}this._table.appendChild(body);dom.appendChild(this._table);}_prepareRow(doc,tr){const n=this._fields.count+1;while(tr.cells.length<n){const td=doc.createElement('td');td.className='rr-crosstab-field-cell';tr.appendChild(td);}while(tr.cells.length>n){Utils.remove(tr.lastElementChild);}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    CrosstabFieldsView.TABLE_CLASS='rr-crosstab-section-table';class RowFieldsView extends CrosstabFieldsView{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'rowFieldsView',4);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doPrepareCells(doc,body){const trs=body.rows;const count=this._fields.count;for(let i=0;i<4;i++){this._prepareRow(doc,trs[i]);}['Field','Header','Summary','Summary Header'].forEach((t,i)=>{trs[i].cells[0].textContent=t;});if(count>0){for(let i=0;i<count;i++){const field=this._fields.get(i);trs[0].cells[i+1].textContent="[".concat(field.field,"]");Object.assign(trs[0].cells[i+1].style,field.styles);trs[1].cells[i+1].textContent="[".concat(field.field,"]");trs[1].cells[i+1].dataset.type='header';Object.assign(trs[1].cells[i+1].style,field.header.styles);trs[2].cells[i+1].textContent="[".concat(field.field,"]");//`[${field.summary.summary}]`;
    trs[2].cells[i+1].dataset.type='summary';Object.assign(trs[2].cells[i+1].style,field.summary.styles);let s=field.summary.header.text;if(!s){if(i===0)s='전체 요약';else s="[".concat(this._fields.get(i-1).field,"]");}trs[3].cells[i+1].textContent=s;trs[3].cells[i+1].dataset.type='summaryHeader';Object.assign(trs[3].cells[i+1].style,field.summary.header.styles);}}}}class ColumnFieldsView extends CrosstabFieldsView{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'columnFieldsView',4);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doPrepareCells(doc,body){const trs=body.rows;const count=this._fields.count;for(let i=0;i<4;i++){this._prepareRow(doc,trs[i]);}['Field','Header','Summary','Summary Header'].forEach((t,i)=>{trs[i].cells[0].textContent=t;});if(count>0){for(let i=0;i<count;i++){const field=this._fields.get(i);trs[0].cells[i+1].textContent="[".concat(field.field,"]");Object.assign(trs[0].cells[i+1].style,field.styles);trs[1].cells[i+1].textContent="[".concat(field.field,"]");trs[1].cells[i+1].dataset.type='header';Object.assign(trs[1].cells[i+1].style,field.header.styles);trs[2].cells[i+1].textContent="[".concat(field.field,"]");//`[${field.summary.summary}]`;
    trs[2].cells[i+1].dataset.type='summary';Object.assign(trs[2].cells[i+1].style,field.summary.styles);trs[3].cells[i+1].textContent=field.summary.header.text||"[".concat(field.field,"]");trs[3].cells[i+1].dataset.type='summaryHeader';Object.assign(trs[3].cells[i+1].style,field.summary.header.styles);}}}}class ValueFieldsView extends CrosstabFieldsView{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'valueFieldsView',5);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doPrepareCells(doc,body){const trs=body.rows;const count=this._fields.count;for(let i=0;i<5;i++){this._prepareRow(doc,trs[i]);}['Field','Value','Header','Summary','Summary Header'].forEach((t,i)=>{trs[i].cells[0].textContent=t;});if(count>0){for(let i=0;i<count;i++){const field=this._fields.get(i);trs[0].cells[i+1].textContent="[".concat(field.field,"]");Object.assign(trs[0].cells[i+1].style,field.styles);trs[1].cells[i+1].style.color='#008';trs[1].cells[i+1].textContent="[ ".concat(field.value," ]");// Object.assign(trs[1].cells[i + 1].style, field.styles);
    trs[2].cells[i+1].textContent="[".concat(field.field,"]");trs[2].cells[i+1].dataset.type='header';Object.assign(trs[2].cells[i+1].style,field.header.styles);trs[3].cells[i+1].textContent="[".concat(field.field,"]");trs[3].cells[i+1].dataset.type='summary';Object.assign(trs[3].cells[i+1].style,field.summary.styles);trs[4].cells[i+1].textContent=field.summary.header.text||"[".concat(field.field,"]");trs[4].cells[i+1].dataset.type='summaryHeader';Object.assign(trs[4].cells[i+1].style,field.summary.header.styles);}}}getFieldCellRow(cell){const r=cell instanceof CrosstabFieldSummaryHeader?4:cell instanceof CrosstabFieldSummary?3:cell instanceof CrosstabFieldHeader?2:0;const n=r===0?2:1;return {r,n};}}class CrosstabBandPrintInfo extends BandPrintInfo{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    isEnded(){return this.trows.length===0;}getRows(){return;}getNextPage(doc,ctx,width,parent){function mergeRowHeadCells(trs,nFld){for(let i=0;i<nFld;i++){let prevCell;let prev;let span=0;trs.forEach(tr=>{const td=tr.cells[i];const s=td.textContent;if(s!==prev){if(prevCell){prevCell.rowSpan=span;}prevCell=td;span=1;prev=s;}else {td.style.display='none';span++;}});if(prevCell){prevCell.rowSpan=span;}}trs.forEach(tr=>{const cells=tr.cells;const lev=tr[LEV];if(lev>0){cells[nFld-lev].colSpan=lev;for(let i=nFld-lev+1;i<nFld;i++){cells[i].style.display='none';}}});}const hSave=ctx.h;let hPage=ctx.h;if(this.trows.length>0){const band=this.band;const page=doc.createElement('div');const table=doc.createElement('table');const tbody=doc.createElement('tbody');const headers=this.headers;const trows=this.trows;const trs=[];let h=0;table.appendChild(tbody);page.appendChild(table);page.style.position='relative';parent.appendChild(page);table.style.position='absolute';TableElement.setTableStyle(table);// header
    for(let i=0;i<headers.length;i++){h+=headers[i].offsetHeight;if(h>hPage){ctx.h=0;// 호출하는 쪾에서 페이지 하단에 더 추가하지 못하도록 한다.
    return;}}for(let i=0;i<headers.length;i++){const tr=headers[i].cloneNode(true);tbody.appendChild(tr);}hPage-=h;while(hPage>0&&trows.length>0){let tr=trows[0];// 먼저 추가해야 offsetHeight가 제대로 계산된다.
    // 기존 tr이 포함됐던 table 높이는 고정된 채 tr들이 빠지므로 나머지 tr들의 높이가 높아진다.
    tbody.appendChild(tr);h=tr.offsetHeight;if(h>hPage){tr.remove();ctx.h=0;break;}hPage-=h;trs.push(trows.shift());}mergeRowHeadCells(trs,band.rowFields.count);page[T_HEIGHT]=hSave-hPage;return page;}}}/** @internal */class CrosstabBandElement extends ReportGroupItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"crosstabBandView");// run-time views
    this._nullBand=false;this._nHeader=0;this._nRowHead=0;this._nRow=0;this._rowContainer=doc.createElement('div');this._rowContainer.className='rr-crosstab-rows';this['_dom'].appendChild(this._rowContainer);}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static isFieldArrow(dom){return dom.className===FieldContainer.ARROW_CLASS;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getFieldOf(target){return this._rowFieldsView.getFieldOf(target)||this._columnFieldsView.getFieldOf(target)||this._valueFieldsView.getFieldOf(target);}getFieldsOf(target){for(let s of [this._rowFieldsView,this._columnFieldsView,this._valueFieldsView]){if(s.containsDom(target)){return s.fields;}}}getFieldBoundingRect(cell){const m=this.model;const field=CrosstabBand.getFieldOf(cell);let section;let r;if(m.rowFields.indexOf(field)>=0){section=this._rowFieldsView;}else if(m.columnFields.indexOf(field)>=0){section=this._columnFieldsView;}else if(m.valueFields.indexOf(field)>=0){section=this._valueFieldsView;}if(section){r=section.getFieldBoundingRect(cell);r.x+=section.x;r.y+=section.y;return r;}}$_createTableContainer(doc,x,y){const div=doc.createElement('div');Utils.extend(div.style,{position:'absolute',left:x+'px',top:y+'px',width:'100%'});return div;}$_createTable(doc){const table=doc.createElement('table');const tbody=doc.createElement('tbody');table.appendChild(tbody);table.style.position='absolute';TableElement.setTableStyle(table);return table;}$_addTable(doc,page,x,y){const div=this.$_createTableContainer(doc,x,y);const table=this.$_createTable(doc);div.dataset[T_MODEL]=this.model.shash;table.dataset[T_MODEL]=this.model.shash;// for exporting
    div.appendChild(table);page.appendChild(div);return table;}$_createPage(doc){const page=doc.createElement('div');page.className='rr-crosstab-page';page.style.position='relative';// page 위치는 container에서...
    this._rowContainer.appendChild(page);return page;}printBand(doc,ctx,w,pages){function addTable(self,page){table=self.$_addTable(doc,page,x,y);tbody=table.tBodies[0];}function addPage(self,initY){const page=self.$_createPage(doc);ctx.yBand=y=0;if(initY){cy=ctx.y=ctx.bodyTop;}pageRows=[];addTable(self,page);pages.push(page);initY&&band.pageNo++;return page;}function addHeader(self){let h=0;for(let i=0;i<nHeader;i++){h+=trows[i].offsetHeight;}if(cy+h>cBottom){addPage(self,true);}for(let i=0;i<nHeader;i++){const tr=trows[i].cloneNode(true);tbody.appendChild(tr);}cy+=h;}function mergeRowHeadCells(){const nFld=band.rowFields.count;for(let i=0;i<nFld;i++){let prevCell;let prev;let span=0;pageRows.forEach(tr=>{const td=tr.cells[i];const s=td.textContent;if(s!==prev){if(prevCell){prevCell.rowSpan=span;}prevCell=td;span=1;prev=s;}else {td.style.display='none';span++;}});if(prevCell){prevCell.rowSpan=span;}}pageRows.forEach(tr=>{const cells=tr.cells;const lev=tr[LEV];if(lev>0){cells[nFld-lev].colSpan=lev;for(let i=nFld-lev+1;i<nFld;i++){cells[i].style.display='none';}}});}if(this._nullBand)return;const band=this.model;const trows=this._tbody.rows;let pageRows;let cy=ctx.y;let cBottom=ctx.bodyBottom;let x=0;let y=ctx.yBand;let nHeader=this._nHeader;let nRow=this._nRow;let nRowHead=this._nRowHead;let r=0;let table;let tbody;// first page
    addPage(this,false);// first header
    addHeader(this);// rows
    while(r<nRow){const tr=trows[nHeader];const h=tr.offsetHeight;if(cy+h>cBottom){mergeRowHeadCells();addPage(this,true);addHeader(this);}const tds=tr.cells;for(let i=0;i<nRowHead;i++){tds[i].colSpan=1;tds[i].rowSpan=1;tds[i].style.display='';}tbody.appendChild(tr);pageRows.push(tr);cy+=h;ctx.y=cy;r++;}mergeRowHeadCells();}prepareAsync(doc,ctx,width){const band=this.model;const trs=Array.from(this._tbody.rows);const nHeader=this._nHeader;const info=new CrosstabBandPrintInfo();info.band=band;info.headers=trs.slice(0,nHeader);info.trows=trs.slice(nHeader);info.nHeader=nHeader;info.nRowHead=this._nRowHead;return info;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return 'crosstab';}_getCssSelector(){return "rr-crosstab rr-group-element";}_needDesignBox(){return true;}findElementOf(dom){// if (this._rowFieldsView.containsDom)
    if(this.dom.contains(dom))return this;return super.findElementOf(dom);}_doPrepareMeasure(ctx,dom){super._doPrepareMeasure(ctx,dom);if(ctx.printing){const band=this.model;if(band){dom.dataset[T_MODEL]=band.shash;// for exporting, testing 중이면 ctx.report가 미설정일 수 있다.
    if(ctx.report){ctx.report.models[band.shash]=band;}band.build();}if(!this._table){const doc=dom.ownerDocument;const table=this._table=doc.createElement("table");TableElement.setTableStyle(table);this._colgroup=doc.createElement('colgroup');table.appendChild(this._colgroup);this._tbody=doc.createElement("tbody");table.appendChild(this._tbody);dom.appendChild(table);}}}_doMeasure(ctx,dom,hintWidth,hintHeight){var _a;const doc=this.doc;const printing=ctx.printing;const band=this.model;if(printing){// 현재, 컬럼들의 너비를 지정하지 않고 있으므로 여기서 table의 너비를 지정해주지 않으면,
    // table의 높이가 잘못 계산된다.
    this._table.style.width=hintWidth+'px';this.$_prepareTable(doc,band,this._tbody);return new Size(this._table.offsetWidth,this._table.offsetHeight);}else {let w=0;let h=0;let sz;this.$_prepareDesign(doc,ctx,band);this.$_prepareHeads(doc);sz=this._fieldsView.measure(ctx,hintWidth,hintHeight);hintWidth-=sz.width;this._rowFieldsView.setFields(band.rowFields);sz=this._rowFieldsView.measure(ctx,hintWidth,hintHeight);h+=sz.height;this._columnFieldsView.setFields(band.columnFields);sz=this._columnFieldsView.measure(ctx,hintWidth,hintHeight);h+=sz.height;this._valueFieldsView.setFields(band.valueFields);sz=this._valueFieldsView.measure(ctx,hintWidth,hintHeight);h+=sz.height;// testing 중에 container 밖일 수 있다.
    const f=(_a=this.container)===null||_a===void 0?void 0:_a.focusedItem;for(let p in this._headViews){const v=this._headViews[p];sz=v.measure(ctx,hintWidth,hintHeight);w=Math.max(w,sz.width);h+=sz.height+2;v.setSelected(f);}h-=this._headViews[this.hash].measuredHeight+2;return Size.create(w,h);}}_doLayoutContent(ctx){const m=this.model;let x=0;let y=0;if(ctx.printing);else {let head;let section;let w=this.width;x=2;// fields
    let h=this._headViews[this.hash].measuredHeight;head=this._headViews[this.hash];head.setBounds(x,y+2,head.measuredWidth,head.measuredHeight);this._fieldsView.setBounds(x,y+2+h,this._fieldsView.measuredWidth,this.height-h-2);w-=this._fieldsView.width+2+x-1;x+=this._fieldsView.width+2;// head + sections
    head=this._headViews[m.rowFields.hash];head.setBounds(x,y+2,head.measuredWidth,head.measuredHeight);y+=head.height+2;section=this._rowFieldsView;h=section.measuredHeight;section.setBounds(x,y,w,h);y+=h;head=this._headViews[m.columnFields.hash];head.setBounds(x,y+2,head.measuredWidth,head.measuredHeight);y+=head.height+2;section=this._columnFieldsView;h=section.measuredHeight;section.setBounds(x,y,w,h);y+=h;head=this._headViews[m.valueFields.hash];head.setBounds(x,y+2,head.measuredWidth,head.measuredHeight);y+=head.height+2;section=this._valueFieldsView;h=section.measuredHeight;section.setBounds(x,y,w,h);y+=h;}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_prepareDesign(doc,ctx,band){const data=band.getData();// data fields container
    if(!this._fieldsView){this.addChild(this._fieldsView=new FieldContainer(doc));}this._fieldsView.setFields(doc,band,data?data.fields:[]);// row fields view
    if(!this._rowFieldsView){this.addChild(this._rowFieldsView=new RowFieldsView(doc));}// column fields view
    if(!this._columnFieldsView){this.addChild(this._columnFieldsView=new ColumnFieldsView(doc));}// value fields view
    if(!this._valueFieldsView){this.addChild(this._valueFieldsView=new ValueFieldsView(doc));}}$_prepareHeads(doc){// 모델이 변경되면 band view 자체가 다시 생성되고 아래를 실행한다.
    if(!this._headViews){const m=this.model;this._headViews={};this.addChild(this._headViews[this.hash]=new SectionHeadView(doc,m,'CROSSTAB BAND','CrosstabBand','rr-band-head'));this.addChild(this._headViews[m.rowFields.hash]=new SectionHeadView(doc,m.rowFields,'ROW FIELDS','RowFields','rr-band-head'));this.addChild(this._headViews[m.columnFields.hash]=new SectionHeadView(doc,m.columnFields,'COLUMN FIELDS','ColumnFields','rr-band-head'));this.addChild(this._headViews[m.valueFields.hash]=new SectionHeadView(doc,m.valueFields,'VALUE FIELDS','ValueFields','rr-band-head'));}}$_prepareTable(doc,band,body){function fillHead(parent,start){const lev=parent.level+1;const tr=trs[lev];const tds=tr.cells;const cols=parent.children;let t=band.rowFields.count+lev*nVal+start;let nSib=0;for(let c=0;c<cols.length;c++){const col=cols[c];const tStart=t;const td=tds[t++];let nLeaf=col.leafCount;td.textContent=col.getHeader();td.colSpan=nLeaf;for(let i=1;i<nLeaf;i++){tds[t++].style.display='none';}Object.assign(td.style,col.field.header.styles);if(col instanceof CrosstabSummaryColumn){const levels=band.columnLevels-1;Object.assign(td.style,col.field.summary.header.styles);for(let r=lev+1;r<levels;r++){for(let c=0;c<nLeaf;c++){trs[r].cells[tStart+c].style.display='none';}}td.rowSpan=levels-lev;}else if(!col.children[0].isLeaf){fillHead(col,nSib);nSib+=nLeaf;}}}const levels=band._columns.levels;// const nCol = band._columns.count;
    const nRow=band.rowFields.count;const nVal=band.valueFields.count;const nLeaf=band._columns.leafCount;const cols=nRow+nLeaf;if(levels<1||nRow<1||nVal<1){this._nullBand=true;return;}this.$_prepareColGroup(doc,this._colgroup,cols);// heads
    const trs=[];for(let r=0;r<levels;r++){const tr=doc.createElement('tr');for(let c=0;c<cols;c++){const td=doc.createElement('td');td.className='rr-crosstab-head';tr.appendChild(td);}body.appendChild(tr);trs.push(tr);}// band title
    for(let r=0;r<levels;r++){for(let c=0;c<nRow;c++){trs[r].cells[c].style.display='none';}}const td=trs[0].cells[0];td.rowSpan=levels;td.colSpan=nRow;td.style.display='';td.textContent=band.title.text;Object.assign(td.style,band.title.styles);// leaf column headers
    let tr=trs[levels-1];let cells=tr.cells;for(let i=nRow;i<cells.length;i++){const td=cells[i];const leaf=band._columns.getLeaf(i-nRow);td.textContent=leaf.getHeader();Object.assign(td.style,leaf.valueField.header.styles);if(leaf instanceof CrosstabSummaryLeafColumn){Object.assign(td.style,leaf.valueField.summary.header.styles);}}fillHead(band._columns.root,0);this._nHeader=body.rows.length;const data=band.bandData;const rows=band.rows;const rowCount=rows.rowCount;// const heads: {td: HTMLTableCellElement, value: any, span: number}[] = [];
    const nanText=band.nullValue.text;const nanStyles=band.nullValue.styles;// for (let i = 0; i < nRow - 1; i++) {
    //     heads.push({td: null, value: undefined, span: 0});
    // }
    for(let r=0;r<rowCount;r++){const tr=doc.createElement('tr');const row=rows.getRow(r);// row heads
    for(let i=0;i<nRow;i++){const field=band.getRowField(i);const td=doc.createElement('td');const v=row.getValue(i);const s=v+(field.header.suffix||'');td.className='rr-crosstab-head';// if (i < nRow - 1) {
    //     const h = heads[i];
    //     if (h.value === v) {
    //         td.style.display = 'none';
    //         h.span++;
    //     } else {
    //         if (h.td) {
    //             h.td.rowSpan = h.span;
    //         } 
    //         h.td = td;
    //         h.span = 1;
    //         h.value = v;
    //         td.textContent = v;
    //         Object.assign(td.style, field.header.styles);
    //     }
    // } else {
    td.textContent=s;Object.assign(td.style,field.header.styles);// }
    tr.appendChild(td);}if(r===0){// total row
    //tr.cells[0].colSpan = nRow;
    const summaryHeader=band.rowFields.get(0).summary.header;const td=tr.cells[0];if(summaryHeader.text)td.textContent=summaryHeader.text;Object.assign(td.style,summaryHeader.styles);tr[LEV]=nRow;//for (let i = 1; i < nRow; i++) tr.cells[i].style.display = 'none';
    }else if(row instanceof CrosstabSummaryRow){const n=row.fields.length;//tr.cells[n].colSpan = nRow - n;
    const summaryHeader=band.rowFields.get(n).summary.header;const td=tr.cells[n];if(summaryHeader.text)td.textContent=summaryHeader.text;Object.assign(td.style,summaryHeader.styles);tr[LEV]=nRow-n;//for (let i = n + 1; i < nRow; i++) tr.cells[i].style.display = 'none';
    }// TODO: 모델에서 지정해야 한다!
    const fm=new NumberFormatter('#,##0');// value cells
    for(let i=0;i<nLeaf;i++){const td=doc.createElement('td');const v=band.getCellValue(data,r,i);td.className='rr-crosstab-value';if(isNaN(v)){td.classList.add('rr-crosstab-null');Object.assign(td.style,nanStyles);}td.textContent=isNaN(v)?nanText:fm.getText(v);const leaf=band._columns.getLeaf(i);if(leaf instanceof CrosstabSummaryLeafColumn){Object.assign(td.style,leaf.valueField.summary.styles);}if(r===0){Object.assign(td.style,band.rowFields.get(0).summary.styles);}else if(row instanceof CrosstabSummaryRow){const n=row.fields.length;Object.assign(td.style,band.rowFields.get(n).summary.styles);}tr.appendChild(td);}body.appendChild(tr);}// for (let i = 0; i < nRow - 1; i++) {
    //     heads[i].td.rowSpan = heads[i].span;
    // }
    this._nRow=body.rows.length-this._nHeader;this._nRowHead=band.rowFields.count;}$_prepareColGroup(doc,group,count){let i=group.childElementCount;while(i++<count){const col=doc.createElement("col");group.appendChild(col);}while(group.childElementCount>count){group.removeChild(group.lastElementChild);}}}////////////////////////////////////////////////////////////////////////////////
    class BodyItemsElement extends ColumnBoxContainerElement{//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getLines(){const views=[];for(let i=0;i<this._container.childCount;i++){const child=this._container.getChild(i);if(child instanceof ReportItemElement&&!child.isSpace&&!child.floating){views.push(child);}}return views;}getLine(index){const cnt=this._container.childCount;if(cnt>0){if(index>=0){for(let i=0,n=0;i<cnt;i++){const child=this._container.getChild(i);if(child instanceof ReportItemElement&&!child.isSpace&&!child.floating){if(n==index)return child;n++;}}}else {for(let i=cnt-1,n=-1;i>=0;i--){const child=this._container.getChild(i);if(child instanceof ReportItemElement&&!child.isSpace&&!child.floating){if(n==index)return child;n--;}}}}}isLine(view){return !view.isSpace&&!view.floating&&this._container.contains(view);}getLineOf(view){if(this.isLine(view))return view;let p=view;while(p){const np=p.navigableParent;if(np===this._container||np instanceof BandElement){return p;}p=np;}}getSiblingLine(line,delta){let c=line.navigableParent;if(c instanceof BandElement){const sib=c.getSibling(line,delta);if(sib)return sib;line=c;}c=this._container;let idx=c.indexOf(line);if(idx>=0){if(delta>0){for(let i=idx+1;i<c.childCount;i++){const v=c.getChild(i);if(v instanceof ReportItemElement&&!v.isSpace&&!v.floating){return v;}}}else if(delta<0){for(let i=idx-1;i>=0;i--){const v=c.getChild(i);if(v instanceof ReportItemElement&&!v.isSpace&&!v.floating){return v;}}}}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get isLayer(){return true;}get debugLabel(){return '';}get designable(){return false;}_debugBorder(){return "none";}_doMeasure(ctx,dom,hintWidth,hintHeight){const h=ctx.printing?Math.ceil(ctx.bodyHeight)-Math.ceil(ctx.reportHeaderHeight)-Math.ceil(ctx.reportFooterHeight)-Math.ceil(ctx.headerHeight)-Math.ceil(ctx.footerHeight):hintHeight;return super._doMeasure(ctx,dom,hintWidth,h);}}/** @internal */class PageBodyElement extends ReportElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,"pageBody");this._findable=true;this._modelChanged=false;this._model=model;this.addChild(this._backContainerView=new PageItemContainerElement(doc,null,"backView"));this.addChild(this._itemsView=new BodyItemsElement(doc,null));this.addChild(this._frontContainerView=new PageItemContainerElement(doc,null,"frontView"));}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** model */get model(){return this._model;}set model(value){if(value!==this._model){this._model=value;this._modelChanged=true;if(value){this._backContainerView.model=value.backItemsContainer;this._frontContainerView.model=value.frontItemsContainer;this._itemsView.model=value.itemsContainer;}}}/** empty */get empty(){return this._itemsView.childCount==0&&this._backContainerView.childCount==0&&this._frontContainerView.childCount==0;}get itemsView(){return this._itemsView;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    isPageDom(dom){return this.isDom(dom)||this._itemsView.isDom(dom)||this._itemsView.isContentDom(dom);}findElement(modelName){return this._itemsView.findElement(modelName)||this._backContainerView.findElement(modelName)||this._frontContainerView.findElement(modelName);}findElementOf(dom){return this._itemsView.findElementOf(dom)||this._backContainerView.findElementOf(dom)||this._frontContainerView.findElementOf(dom);}getElementOf(model){return this._itemsView.getElementOf(model)||this._backContainerView.getElementOf(model)||this._frontContainerView.getElementOf(model);}/**
         * 페이지의 한 행을 전부 차지하는가?
         */isLine(view){return this._itemsView.isLine(view);}/**
         * view가 포함된 line.
         * view가 line이면 view.
         */getLineOf(view){return this._itemsView.getLineOf(view);}getSiblingLine(line,delta){return this._itemsView.getSiblingLine(line,delta);}/**
         * @param index 0보다 작으면 뒤에서 부터. -1이면 마지막 line.
         */getLine(index){return this._itemsView.getLine(index);}getLines(){return this._itemsView.getLines();}printAll(doc,ctx){const output={// startPage: 0,
    pages:new Array()// floatings: new Array<HTMLDivElement[]>()
    };this.print(doc,ctx);if(!this.empty){this.layoutFloating(ctx);this.$_buildPages(doc,ctx,output);}return output;}// 비동기 출력을 준비한다.
    prepareAsync(doc,ctx){this.print(doc,ctx);if(!this.empty){this.layoutFloating(ctx);// this.$_buildPages(doc, ctx, output);
    return this.$_prepareAsync(doc,ctx);}return [];}itemOfDom(dom){let item;if(item=this._frontContainerView.itemOfDom(dom))return item;if(item=this._itemsView.itemOfDom(dom))return item;if(item=this._backContainerView.itemOfDom(dom))return item;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return "rr-page-body";}get debugLabel(){return "page body";}get findable(){return this._findable;}set findable(value){this._findable=value;}_debugBorder(){return "1px solid rgba(0, 0, 255, 0.3)";}_debugColor(){return "rgba(0, 0, 255, 0.4)";}_doMeasure(ctx,dom,hintWidth,hintHeight){if(this._modelChanged){this._modelChanged=false;}this._backContainerView.setFixedSize(hintWidth).measure(ctx,hintWidth,hintHeight);this._itemsView.setFixedSize(hintWidth).measure(ctx,hintWidth,hintHeight);this._frontContainerView.setFixedSize(hintWidth).measure(ctx,hintWidth,hintHeight);const h=Math.max(this.itemsView.measuredHeight,hintHeight);return new Size(hintWidth,h);}_doLayoutContent(ctx){const w=this.width;const h=this.height;let view;view=this._backContainerView;view.setBounds(0,0,w,h);view.layoutContent(ctx);view=this._itemsView;view.setBounds(0,0,w,h);view.layoutContent(ctx);view=this._frontContainerView;view.setBounds(0,0,w,h);view.layoutContent(ctx);}layoutFloating(ctx){this._backContainerView.layoutFloating(ctx);this._itemsView.layoutFloating(ctx);this._frontContainerView.layoutContent(ctx);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_buildPages(doc,ctx,output){function newPage(){const page=[];pages.push(page);let y=ctx.bodyTop;ctx.h=ctx.bodyHeight;if(i==0){ctx.h-=ctx.reportHeaderHeight;y+=ctx.reportHeaderHeight;}ctx.y=y;started=true;return page;}const container=this._itemsView;const cnt=container.childCount;if(cnt<1)return;const pages=output.pages;const wPage=ctx.pageWidth;const gap=container.gap;let i=0;let started;let page;ctx.h=0;while(i<cnt){started=false;if(ctx.h<=0){page=newPage();}const inner=i<cnt-1;let elt=container.getChild(i++);let div;let h;if(!elt.printable){elt.visible=false;}else {if(elt instanceof ReportItemElement&&elt.model.isBreakBefore()){page=newPage();}if(elt instanceof BandElement||elt instanceof BandGroupElement){let y1=ctx.y;const divs=[];if(elt instanceof BandElement){elt.printBand(doc,ctx,wPage,divs);}else {elt.printGroup(doc,ctx,divs);}for(let d=0;d<divs.length;d++){if(d>0){pages.push(page=[]);y1=ctx.bodyTop;}div=divs[d];div.style.top=y1+'px';// NOTE: PrintContainer.$_createPages() 에서 사용한다.
    div[T_HEIGHT]=ctx.y-y1+(inner&&d===divs.length-1?gap:0);page.push(div);}ctx.h-=gap;}else if(elt instanceof CrosstabBandElement){let y1=ctx.y;const divs=[];elt.printBand(doc,ctx,wPage,divs);for(let d=0;d<divs.length;d++){if(d>0){pages.push(page=[]);y1=ctx.bodyTop;}div=divs[d];div.style.top=y1+'px';// NOTE: PrintContainer.$_createPages() 에서 사용한다.
    div[T_HEIGHT]=ctx.y-y1+(inner&&d===divs.length-1?gap:0);page.push(div);}ctx.h-=gap;}else {h=elt.height;if(h>ctx.h){// NOTE: space나 %높이 아이템은 페이지를 넘기지 못한다.  
    if(elt instanceof SpaceItemElement){//if (elt instanceof SpaceItemElement || (elt instanceof ReportItemElement && elt.isRelativeHeight)) {
    h=ctx.h;}}div=elt['_dom'];if(elt instanceof ReportItemElement&&elt.floating){page.push(div);elt=null;}else if(h<=ctx.h){div.style.top=ctx.y+'px';div[T_HEIGHT]=h+=inner?gap:0;page.push(div);ctx.h-=h;ctx.y+=h;}else if(started){// 아이템의 높이가 남아있는 페이지 높이보다 크면,
    // (페이지 첫 아이템이 아니면 페이지를 넘겨서 다음 페이지에)
    // 넘치도록 출력하고 페이지를 넘긴다. #424
    div.style.top=ctx.y+'px';div[T_HEIGHT]=h+=inner?gap:0;page.push(div);ctx.h=0;}else {ctx.h=0;i--;elt=null;}}if(elt instanceof ReportItemElement&&elt.model.isBreakAfter()&&i<cnt/* #241 */){page=newPage();}}}// report footer 출력 공간이 부족하면...
    if(ctx.h<ctx.reportFooterHeight){newPage();}// console.log(pages.length + ' page(s) printed.');
    }// 비동기 출력 준비를 한다.
    $_prepareAsync(doc,ctx){const container=this._itemsView;const cnt=container.childCount;if(cnt<1)return [];const lines=[];let i=0;while(i<cnt){let elt=container.getChild(i++);if(!elt.printable){elt.visible=false;}else {if(elt instanceof ReportItemElement&&elt.model.isBreakBefore()){lines.push(new PageBreaker());}if(elt instanceof BandElement||elt instanceof BandGroupElement||elt instanceof CrosstabBandElement){lines.push(elt.prepareAsync(doc,ctx,ctx.pageWidth,null,-1));}else {elt.dom[T_HEIGHT]=elt.height;lines.push(elt.dom);}if(elt instanceof ReportItemElement&&elt.model.isBreakAfter()&&i<cnt){lines.push(new PageBreaker());}}}return lines;}}////////////////////////////////////////////////////////////////////////////////
    class PageSectionGuard extends ReportItemElement{get guardLabel(){return '[page]';}}/** @internal */class PageView extends LayerElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,"pageView");this.addChild(this._backView=new PageItemContainerElement(doc,null,"rr-back-container",false));this.addChild(this._reportHeaderView=new ReportHeaderElement(doc));this.addChild(this._reportFooterView=new ReportFooterElement(doc));this.addChild(this._pageHeaderView=new PageHeaderElement(doc));this.addChild(this._pageFooterView=new PageFooterElement(doc));this.addChild(this._bodyView=new PageBodyElement(doc));this.addChild(this._frontView=new PageItemContainerElement(doc,null,"rr-front-container",false));this._sections=[this._pageHeaderView,this._reportHeaderView,this._bodyView,this._reportFooterView,this._pageFooterView];this._sectionGuard=new PageSectionGuard(doc);}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** model */get model(){return this._model;}/** reportHeaderView */get reportHeaderView(){return this._reportHeaderView;}/** reportFooterView */get reportFooterView(){return this._reportFooterView;}/** pageHeaderView */get pageHeaderView(){return this._pageHeaderView;}/** pageFooterView */get pageFooterView(){return this._pageFooterView;}/** bodyView */get bodyView(){return this._bodyView;}/** backFloatingView */get backFloatingView(){return this._backView;}/** frontFloatingView */get frontFloatingView(){return this._frontView;}get sections(){return this._sections;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    isPageDom(dom){return this.isDom(dom)||this.bodyView.isPageDom(dom);}measure(ctx,bounds){const w=bounds.width-2;// border를 표시햘 때
    const h=bounds.height-2;let x=0;let y=0;this._sectionGuard.model=this._model;this._model.clearStyles(this.dom.style);applyStyles(this._model,this._model.styles,this.dom.style);// background items
    let fview=this._backView;fview.measureFixed=true;fview.measure(ctx,w,h);fview.setBounds(0,0,w,h);// page header
    const header=this._pageHeaderView.model;let view=this._pageHeaderView;let sz=view.setFixedSize(w).measure(ctx,w,h);y+=Utils.toNumber(header.spaceTop);view.setBounds(x,y,w,sz.height);y+=sz.height+Utils.toNumber(header.spaceBottom);// report header
    const reportHeader=this._reportHeaderView.model;view=this._reportHeaderView;sz=view.setFixedSize(w).measure(ctx,w,h);y+=Utils.toNumber(reportHeader.spaceTop);view.setBounds(x,y,w,sz.height);y+=sz.height+Utils.toNumber(reportHeader.spaceBottom);// page footer
    let y2=h;const footer=this._pageFooterView.model;view=this._pageFooterView;sz=view.setFixedSize(w).measure(ctx,w,h);y2-=sz.height-Utils.toNumber(footer.spaceBottom);view.setBounds(x,y2,w,sz.height);y2-=Utils.toNumber(footer.spaceTop);// report footer
    const reportFooter=this._reportFooterView.model;view=this._reportFooterView;sz=view.setFixedSize(w).measure(ctx,w,h);y2-=sz.height-Utils.toNumber(reportFooter.spaceBottom);view.setBounds(x,y2,w,sz.height);y2-=Utils.toNumber(reportFooter.spaceTop);// body 
    const bview=this._bodyView;sz=bview.measure(ctx,w,y2-y);bview.setBounds(x,y,w,sz.height);const dy=sz.height-(y2-y);if(dy>0){this.pageFooterView.y+=dy;this._reportFooterView.y+=dy;}// front items
    fview=this._frontView;fview.setFixedSize(w).measure(ctx,w,h);fview.setBounds(0,0,w,h);const h2=this._pageHeaderView.measuredHeight+this._reportHeaderView.measuredHeight+this._bodyView.measuredHeight+this._pageFooterView.measuredHeight+this._reportFooterView.measuredHeight;return {width:w,height:h2};}layout(ctx,bounds){let view=this._pageHeaderView;view.layoutContent(ctx);view=this._reportHeaderView;view.layoutContent(ctx);view=this._reportFooterView;view.layoutContent(ctx);view=this._pageFooterView;view.layoutContent(ctx);this._bodyView.layoutContent(ctx);this._backView.layoutContent(ctx);this._frontView.layoutContent(ctx);}layoutFloating(ctx){this._pageHeaderView.layoutFloating(ctx);this._reportHeaderView.layoutFloating(ctx);this._reportFooterView.layoutFloating(ctx);this._pageFooterView.layoutFloating(ctx);this._bodyView.layoutFloating(ctx);this._backView.layoutFloating(ctx);this._frontView.layoutFloating(ctx);}afterRender(ctx){const w=this._backView.width;const h=this._backView.height;this._backView.measure(ctx,w,h);this._backView.layoutContent(ctx);this._frontView.measure(ctx,w,h);this._frontView.layoutContent(ctx);}findElement(modelName){return this._bodyView.findElement(modelName)||this._backView.findElement(modelName)||this._frontView.findElement(modelName)||this._pageHeaderView.findElement(modelName)||this._pageFooterView.findElement(modelName)||this._reportHeaderView.findElement(modelName)||this._reportFooterView.findElement(modelName);}findElementOf(dom){return this._pageHeaderView.findElementOf(dom)||this._pageFooterView.findElementOf(dom)||this._reportHeaderView.findElementOf(dom)||this._reportFooterView.findElementOf(dom)||this._bodyView.findElementOf(dom)||this._backView.findElementOf(dom)||this._frontView.findElementOf(dom);}getElementOf(model){if(model===this._bodyView.model){return this._bodyView;}for(let v of this._sections){if(v instanceof ReportItemElement&&v.model===model)return v;}return this._bodyView.getElementOf(model)||this._backView.getElementOf(model)||this._frontView.getElementOf(model)||this._pageHeaderView.getElementOf(model)||this._pageFooterView.getElementOf(model)||this._reportHeaderView.getElementOf(model)||this._reportFooterView.getElementOf(model);}getAllElements(root,bounds){function collect(p,views){const elts=p instanceof TableElement?p.cellViews:p.elements;elts.forEach(elt=>{if(elt instanceof TableCellElementBase){if(elt.getChild(0)instanceof ReportItemElement){views.push(elt.getChild(0));}}else if(elt instanceof ReportGroupItemElement){collect(elt,views);}else if(elt instanceof ReportItemElement){views.push(elt);}});}const views=[];if(root){bounds.translate(-root.dom.offsetLeft,-root.dom.offsetTop);collect(root,views);bounds.translate(root.dom.offsetLeft,root.dom.offsetTop);}else {this.sections.forEach(section=>{bounds.translate(-section.dom.offsetLeft,-section.dom.offsetTop);collect(section,views);bounds.translate(section.dom.offsetLeft,section.dom.offsetTop);});}const r2=this.getBoundingRect();bounds.translate(r2.x,r2.y);return views.filter(view=>{const r=view.getBoundingRect();return bounds.intersects(r);});}// preparePrint(doc: Document, ctx: PrintContext): PageBodyOutput {
    //     function calcSection(view: SectionElement<PageSection>, prop: string): void {
    //         const m = view.model as SpaceableSection;
    //         if (m.visible) {
    //             const sz = view.print(doc, ctx, w);
    //             ctx[prop + 'Height'] = view[T_HEIGHT] = sz + Utils.toNumber(m.spaceTop) + Utils.toNumber(m.spaceBottom);
    //         } else {
    //             ctx[prop + 'Height'] = view[T_HEIGHT] = 0;
    //             view._clearDesign();
    //         }
    //     }
    //     const w = this.width;
    //     this._model.clearStyles(this.dom.style);
    //     applyStyles(this._model, this._model.styles, this.dom.style);
    //     this.setPrintStyles();
    //     this._backView.setBounds(0, 0, w, this.height);
    //     this._backView.print(doc, ctx, w);
    //     this._frontView.setBounds(0, 0, w, this.height);
    //     this._frontView.print(doc, ctx, w);
    //     [[this._pageHeaderView, 'header'], [this._pageFooterView, 'footer'], 
    //      [this._reportHeaderView, 'reportHeader'], [this._reportFooterView, 'reportFooter']].forEach(v => {
    //          calcSection(v[0] as SectionElement<any>, v[1] as string);
    //     });
    //     ctx.bodyTop = ctx.headerHeight;
    //     ctx.bodyBottom = ctx.pageHeight - ctx.footerHeight;
    //     ctx.bodyHeight = ctx.bodyBottom - ctx.bodyTop;
    //     const pagebodyOutput = this._bodyView.printAll(doc, ctx);
    //     ctx.finishPrint(Math.max(1, pagebodyOutput.pages.length));
    //     return pagebodyOutput;
    // }
    // print(ctx: PrintContext, pagebodyOutput: PageBodyOutput, currentPrintedPageCount: number = 0): PrintPage[] {
    //     const pages: PrintPage[] = [];
    //     const pageCount = ctx.pageCount;
    //     for (let i = 0; i < pageCount; i++) {
    //         const page = new PrintPage();
    //         const contents = page.contents;
    //         let div: HTMLDivElement;
    //         ctx.preparePage(i);
    //         ctx.setCompositePage(currentPrintedPageCount);
    //         pages.push(page);
    //         // page header/footer에 있는 page count등을 다시 표시한다.
    //         for (let v of ctx.contextValues) {
    //             v.refreshPrintValues(ctx);
    //         }
    //         // background items
    //         page.background = this._backView.cloneNode() as HTMLDivElement;
    //         // page header
    //         // this._pageHeaderView.refreshPage(ctx);
    //         div = this._pageHeaderView.cloneNode() as HTMLDivElement;
    //         div[T_HEIGHT] = this._pageHeaderView[T_HEIGHT];
    //         page.pageHeader = div as HTMLDivElement;
    //         // page footer
    //         // this._pageFooterView.refreshPage(ctx);
    //         div = this._pageFooterView.cloneNode() as HTMLDivElement;
    //         div[T_HEIGHT] = this._pageFooterView[T_HEIGHT];
    //         page.pageFooter = div as HTMLDivElement;
    //         // report header
    //         if (i == 0) {
    //             div = this._reportHeaderView.cloneNode() as HTMLDivElement;
    //             div[T_HEIGHT] = this._reportHeaderView[T_HEIGHT];
    //             contents.push(div);
    //         }
    //         // body
    //         if (pagebodyOutput.pages.length > i) {
    //             const page = pagebodyOutput.pages[i];
    //             for (let div of page) {
    //                 contents.push(div);
    //             }
    //         }
    //         // report footer
    //         if (i == pageCount - 1) {
    //             div = this._reportFooterView.cloneNode() as HTMLDivElement;
    //             div[T_HEIGHT] = this._reportFooterView[T_HEIGHT];
    //             contents.push(div);
    //         }
    //         // foreground items
    //         page.foreground = this._frontView.cloneNode() as HTMLDivElement;
    //     }
    //     return pages;
    // }
    prepareAsync(doc,ctx){function calcSection(view,prop){const m=view.model;if(m.visible){ctx[prop+'Height']=view[T_HEIGHT]=view.print(doc,ctx,w)+Utils.toNumber(m.spaceTop)+Utils.toNumber(m.spaceBottom);}else {ctx[prop+'Height']=view[T_HEIGHT]=0;}}const dom=this.dom;const w=this.width;this._model.clearStyles(dom.style);applyStyles(this._model,this._model.styles,dom.style);this.setPrintStyles();this._backView.setBounds(0,0,w,this.height);this._backView.print(doc,ctx,w);this._frontView.setBounds(0,0,w,this.height);this._frontView.print(doc,ctx,w);[[this._pageHeaderView,'header'],[this._pageFooterView,'footer'],[this._reportHeaderView,'reportHeader'],[this._reportFooterView,'reportFooter']].forEach(v=>{calcSection(v[0],v[1]);});ctx.bodyTop=ctx.headerHeight;ctx.bodyBottom=ctx.pageHeight-ctx.footerHeight;ctx.bodyHeight=ctx.bodyBottom-ctx.bodyTop;ctx.pages=[];const lines=this._bodyView.prepareAsync(doc,ctx);return lines;}refreshPageHeader(doc,ctx){this.pageHeaderView.print(doc,ctx,this.width);const div=this._pageHeaderView.cloneNode();return div;}getSections(){let views=[this._sectionGuard];if(this._pageHeaderView.visible)views.push(this._pageHeaderView);if(this._reportHeaderView.visible)views.push(this._reportHeaderView);views=views.concat(this._bodyView.getLines());if(this._reportFooterView.visible)views.push(this._reportFooterView);if(this._pageFooterView.visible)views.push(this._pageFooterView);return views;}/**
         * 페이지의 한 행을 전부 차지하는가?
         */isLine(view){return view instanceof SectionElement||this._bodyView.isLine(view);}getFirst(){if(this._pageHeaderView.visible)return this._pageHeaderView.getFirst();return;}getLast(){if(this._pageFooterView.visible)return this._pageFooterView.getLast();return;}getFirstInGroup(group){return group===null||group===void 0?void 0:group.getFirst();}getLastInGroup(group){return group===null||group===void 0?void 0:group.getLast();}getPrev(elt){var _a;if(elt instanceof SectionElement);else if(elt){let elt2=(_a=elt.navigableParent)===null||_a===void 0?void 0:_a.getPrev(elt);if(elt2&&elt2!==elt)return elt2;}}getNext(elt){if(elt instanceof SectionElement);else if(elt){let p=elt.navigableParent;if(p){let elt2=p.getNext(elt);if(elt2&&elt2!==elt)return elt2;p=p.navigableParent;while(p){p.getLeaves();p=p.navigableParent;}}}}getLeft(elt){var _a;if(elt instanceof SectionElement);else if(elt){let elt2=(_a=elt.navigableParent)===null||_a===void 0?void 0:_a.getLeft(elt);if(elt2&&elt2!==elt)return elt2;if(this._bodyView.isLine(elt))return;}}getRight(elt){var _a;if(elt instanceof SectionElement);else if(elt){let elt2=(_a=elt.navigableParent)===null||_a===void 0?void 0:_a.getRight(elt);if(elt2&&elt2!==elt)return elt2;if(this._bodyView.isLine(elt))return;}}getUpper(elt){var _a;if(elt instanceof SectionElement){const sections=this._sections;const i=sections.indexOf(elt);if(i>0){const elt=this._sections[i-1];if(elt instanceof ReportItemElement){return elt;}return this._bodyView.getLine(-1);}}else if(elt){let elt2=(_a=elt.navigableParent)===null||_a===void 0?void 0:_a.getUpper(elt);if(elt2&&elt2!==elt)return elt2;if(elt.navigableParent===this._reportHeaderView){return this._pageHeaderView;}elt2=this._bodyView.getLineOf(elt);if(elt2){elt2=this._bodyView.getSiblingLine(elt2,-1);if(elt2)return elt2;}}return this.getFirst();}getLower(elt){var _a;if(elt instanceof SectionElement){const i=this._sections.indexOf(elt);if(i<this._sections.length-1){const elt=this._sections[i+1];if(elt instanceof ReportItemElement){return elt;}return this._bodyView.getLine(0);}}else if(elt){let elt2=(_a=elt.navigableParent)===null||_a===void 0?void 0:_a.getLower(elt);if(elt2&&elt2!==elt)return elt2;if(elt.navigableParent===this._pageHeaderView){return this._reportHeaderView;}if(elt.navigableParent===this._reportHeaderView){return this._bodyView.getLine(0);}elt2=this._bodyView.getLineOf(elt);if(elt2){elt2=this._bodyView.getSiblingLine(elt2,1);if(elt2)return elt2;elt2=this._reportFooterView;if(elt2.visible)return elt2;elt2=this._pageFooterView;if(elt2.visible)return elt2;return;}}return this.getFirst();}itemOfDom(dom){let item;if(item=this._frontView.itemOfDom(dom))return item;for(let section of this._sections){if(section instanceof ReportGroupItemElement){if(item=section.itemOfDom(dom))return item;}}if(item=this._bodyView.itemOfDom(dom))return item;if(item=this._backView.itemOfDom(dom))return item;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return this.container.printing?'':'rr-page';}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    // ReportView.model 에서 호출.
    $_setModel(model){this._model=model;if(model){this._reportHeaderView.model=model.reportHeader;this._reportFooterView.model=model.reportFooter;this._pageHeaderView.model=model.pageHeader;this._pageFooterView.model=model.pageFooter;this._bodyView.model=model.body;this._backView.model=model["_backItems"];this._frontView.model=model["_frontItems"];}else {this._reportHeaderView.model=null;this._reportFooterView.model=null;this._pageHeaderView.model=null;this._pageFooterView.model=null;this._bodyView.model=null;this._backView.model=null;this._frontView.model=null;}}}/**
     * print page model.
     */class PrintPage{constructor(){this.contents=[];}}////////////////////////////////////////////////////////////////////////////////
    // BooleanFormatter.ts
    // 2020. 08. 05. created by woori
    // -----------------------------------------------------------------------------
    // Copyright (c) 2020 Wooritech Inc.
    // All rights reserved.
    ////////////////////////////////////////////////////////////////////////////////
    /**
     * @internal
     */class BooleanFormatter{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(format){this.$_parse(this._format=format);}static getFormatter(format){let f=BooleanFormatter.Formatters[format];if(!f){BooleanFormatter.Formatters[format]=f=new BooleanFormatter(format);}return f;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** format */get format(){return this._format;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getText(v){return v===undefined?this._nullText:v?this._trueText:this._falseText;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_parse(format){this._falseText=this._trueText=null;if(format){var arr=format.split(/[;\:]/);this._falseText=arr[0];if(arr.length>0){this._trueText=arr[1];}if(arr.length>1){this._nullText=arr[2];}}}}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    BooleanFormatter.Formatters={};////////////////////////////////////////////////////////////////////////////////
    const DUMMY_PATTERN=/(.*)/;const DUMMY_REPLACE="$1";class TextFormatter{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(format){this._pattern=DUMMY_PATTERN;this._replace=DUMMY_REPLACE;this.$_parse(this._format=format);}static getFormatter(format){let f=TextFormatter.Formatters[format];if(!f){TextFormatter.Formatters[format]=f=new TextFormatter(format);}return f;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get format(){return this._format;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getText(text){return text&&text.replace(this._pattern,this._replace);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_parse(fmt){if(fmt){const arr=fmt.trim().split(Utils.colonreg);if(arr.length>1){let p=arr[0].trim();let f=arr[1].trim();if(p&&f){if(p.charAt(0)=='"'){p=p.substr(1,p.length-2);}if(p){if(f.charAt(0)=='"'){f=p.substr(1,f.length-2);}if(f){this._pattern=new RegExp(p,arr[2]||'');this._replace=f;}}}}}}}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    TextFormatter.Formatters={};////////////////////////////////////////////////////////////////////////////////
    /** @internal */class TextItemElementBase extends ReportItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model,name){super(doc,model,name);}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return '';}_initDom(doc,dom){super._initDom(doc,dom);dom.style.overflow='hidden';// 이렇게 하지 않으면 명시적 높이 설정에 문제가 발생한다.
    // this._table = doc.createElement('div');
    // this._table.style.display = 'inline-table';
    // this._table.style.height = '100%';
    // dom.appendChild(this._table);
    this._span=doc.createElement('span');this._span.style.display='table-cell';// this._span.style.verticalAlign = 'middle'; // measure에서 설정. 세로쓰기일 때 기본으로 설정하면 안됨.
    // this._table.appendChild(this._span);
    dom.appendChild(this._span);}_doPrepareMeasure(ctx,dom){super._doPrepareMeasure(ctx,dom);if(ctx.contextable&&this.model.isContextValue()){ctx.contextValues.push(this);this._span.dataset['rr_ctx_val']=this.model.value;}if(ctx.printing){// for exporting
    this._span.dataset[T_MODEL]=dom.dataset[T_MODEL]||String(this.model.hash);this._span.classList.add(TextItemElement.SPAN);}}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;const span=this._span;const css=dom.style;let dw=1;let s;// Utils.addChild(dom, this._table);
    // 현재 개발 상태에서 style 적용 시점에 문제가 있는 것 같다.
    // css file 대신 여기서 설정하지 않으면 편집 중 깜빡거림이 발생한다.
    dom.style.display='inline-table';// dom.style.lineHeight = m.getStyle('lineHeight') || '1.1em';
    // dom 대신 span에 설정한다.
    s=m.getStyle('verticalAlign');if(!s){const s2=m.getStyle('writingMode');if(!s2||!s2.startsWith('vertical')){s='middle';}}this._span.style.verticalAlign=s;this._span.style.textDecoration=m.getStyle('textDecoration');dom.style.width='';dom.style.height='';// 모델 크기가 설정됐는 지 확인한다.
    this._setModelSize(m,dom,hintWidth,hintHeight);css.whiteSpace=m.wrap&&m.width?'pre-wrap':'pre';css.wordBreak=m.wrap&&m.width?'break-all':'keep-all';if(ctx.printing){s=this._getPrintText(ctx,m);this._setBindMarker(false);}else {const v=m.value;const sys=v&&v.startsWith('${');s=this._getDesignText(m,sys);v?this._setBindMarker(true,sys):this._setBindMarker(false);}this._text=s=s||'';//span.textContent = m.wrap ? s.replace(/(<br>|<br\/>)/gm, '\n') : s.replace(/(\r\n|\r|\n|\<br\>|<br\/>)/gm, ' ');
    // 리포트는 html이 아니다. <br>은 그냥 놔둔다.
    if(m.multiLine){const regex=/(\r|\n|\r\n|\<br\>|\<br\/\>)/gm;// \r, \n, \r\n, <br>, <br/> 문자열을 만나면 줄바꿈 처리한다.
    span.innerHTML=s.replace(regex,'<br/>');}else {span.textContent=s;}if(ctx.printing&&!s){span.innerHTML=ZWSP;// tr 높이를 유지하게 한다. #627
    }if(!ctx.printing&&s){dom.title=s;}let w=this._modelWidth;let h=this._modelHeight;if(isNaN(w)){span.style.maxWidth='';w=dom.offsetWidth;if(m.getStyle('fontStyle')==='italic'){w+=Math.max(1,span.offsetWidth*0.04);}w=Math.ceil(w)+dw;}else {span.style.maxWidth=w+'px';}if(isNaN(h)){span.style.maxHeight='';h=Math.round(dom.offsetHeight);}return new Size(w,h);}_doLayoutContent(ctx){}refreshPrintValues(ctx){this._span.textContent=this._getPrintText(ctx,this.model);}isDom(dom){return dom===this._span||super.isDom(dom);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _getText(m,v){const t=typeof v;let s=v;if(t==='string'){if(v){const f=m.textFormat;if(f){const fmt=TextFormatter.getFormatter(f);if(fmt)s=fmt.getText(v);}}}else if(t==='number'){const f=m.numberFormat;if(f){const fmt=NumberFormatter.getFormatter(f);if(fmt)s=fmt.getText(v);}}else if(v instanceof Date){const f=m.dateFormat;if(f){const fmt=DatetimeFormatter.getFormatter(f);if(fmt)s=fmt.getText(v);}}else if(t==='boolean'){const f=m.booleanFormat;if(f){const fmt=BooleanFormatter.getFormatter(f);if(fmt)s=fmt.getText(v);}}if(Utils.isDefined(s)&&s!==''){if(m.prefix||m.suffix){return (m.prefix||'')+s+(m.suffix||'');}else {return String(s);}}return s;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    TextItemElementBase.CLASS_NAME='rr-text';TextItemElementBase.CLASS_LIST=TextItemElementBase.CLASS_NAME+' rr-item-element';TextItemElementBase.SPAN='_rr_span_';/** @internal */class TextItemElement extends TextItemElementBase{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,'textItemView');}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return TextItemElementBase.CLASS_LIST;}get guardLabel(){return 'text';}get editable(){return true;}getEditText(){return this.model.text;}setEditText(report,text){report.setItemProperty(this.model,'text',text);}_getPrintText(ctx,m){const cb=m.contextValueCallback;if(cb){if(ctx.contextElements){// 비동기 방식 출력에서 사용된다.
    this['_span'].dataset['rr_ctx_call']=ctx.page+'';this['_span'].dataset['rr_ctx_all_call']=ctx.compositePage+'';this['_span'].dataset['rr_ctx_view']=this.shash;ctx.contextElements[this.shash]=this;}const v=cb(ctx);return this._getText(m,v);}else if(m.value){const v=this.getPrintValue(ctx,m);return this._getText(m,v);}else {const v=this._runValueCallback(ctx,m,void 0);return v!==void 0?this._getText(m,v):m.text;}}_getDesignText(m,system){if(m.value){if(system){return m.value;}else {return '['+m.value+']';}}return m.text||'[text]';}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;if(!ctx.printing){const s=m.value||m.text;if(s){delete dom.dataset.empty;}else {dom.dataset.empty='';}}const sz=super._doMeasure(ctx,dom,hintWidth,hintHeight);return sz;}isDom(dom){if(!super.isDom(dom)){return this._spans&&this._spans.indexOf(dom)>=0;}return true;}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class ImageItemElement extends ReportItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"imageItemView");}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return 'image';}_getCssSelector(){return 'rr-image rr-item-element';}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;const imgData=m.image&&ctx.assets.getImage(m.image);const css=dom.style;let url=imgData||m.url;if(ctx.printing&&!this._image){this._image=new Image();}if(ctx.printing&&!url){url=this.getPrintValue(ctx,m);}this._setModelSize(m,dom,hintWidth,hintHeight);if(url){css.overflow=css.overflow||"hidden";css.backgroundImage="url("+url+")";css.backgroundRepeat="no-repeat";css.backgroundSize=m.imageFit;css.backgroundPosition=m.imagePosition;css["-webkit-print-color-adjust"]="exact";// 빠뜨리면 이미지가 그려지지 않을 수 있다!
    delete dom.dataset.empty;dom.innerHTML='';if(this._image){this._image.src=url;}}else {dom.dataset.empty='true';dom.innerHTML='<span></span>';}return new Size(dom.offsetWidth,dom.offsetHeight);}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class CheckItemElement extends ReportItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"checkItemView");}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return "rr-check rr-item-element";}get debugLabel(){return '';}isDom(dom){return dom===this._check||dom===this._text||dom===this._text.parentElement||super.isDom(dom);}_initDom(doc,dom){super._initDom(doc,dom);dom.style.overflow='hidden';dom.style.whiteSpace='nowrap';const div=doc.createElement('div');div.style.display='table-cell';div.style.verticalAlign='middle';dom.appendChild(div);this._check=doc.createElement('span');this._check.className=CheckItemElement.CHECK_CLASS;this._check.style.display='inline-block';this._check.style.verticalAlign='middle';div.appendChild(this._check);this._text=doc.createElement('span');this._text.className=CheckItemElement.TEXT_CLASS;div.appendChild(this._text);}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;const v=ctx.printing?Utils.pick(this.getPrintValue(ctx,m),m.checked):m.checked;const check=this._check;const text=this._text;// 모델에 크기가 설정되지 않은 경우 반드시 크기 스타일을 초기화해야 한다.
    this._setModelSize(m,dom,hintWidth,hintHeight,true);check.dataset.checked=m.getChecked(v);text.textContent=m.getText(v);// dom offset 크기로 계산하면 디자인 중 틀어지는 시점이 있다.
    let h=Math.ceil(Math.max(check.offsetHeight,text.offsetHeight));let w=Math.ceil(check.offsetWidth)+Math.ceil(text.offsetWidth)+1;if(m.getStyle('fontStyle')==='italic'){w+=Math.max(1,text.offsetWidth*0.04);}w=Math.ceil(w);if(ctx.printing){// for exporting
    this._check.dataset[T_MODEL]=dom.dataset[T_MODEL];}return Size.create(w,h);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    CheckItemElement.CHECK_CLASS='rr-check-check';CheckItemElement.TEXT_CLASS='rr-check-text';////////////////////////////////////////////////////////////////////////////////
    /** @internal */class ListCellElement extends ReportGroupItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,list,model){super(doc,model,'listCellView');this._list=list;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return '';}get navigable(){return false;}get navigableParent(){return this._list;}_needContentBox(){return false;}_isEmptySize(){return true;}_getParentDom(){return this._div;}_createDom(doc){const li=doc.createElement("li");const div=this._div=doc.createElement('div');li.appendChild(div);div.className='rr-list-cell';div.style.position='relative';div.style.display='inline-flex';div.style.verticalAlign='text-top';return li;}_prepareChild(child){const css=child["_dom"].style;css.position='relative';// 기본이 absolute다. 또, 'relatvie'를 설정하지 않으면 debug box가 위치를 못 잡는다.
    child.positionable=false;}_doMeasure(ctx,dom,hintWidth,hintHeight){const sz=super._doMeasure(ctx,dom,hintWidth,hintHeight);return sz;}}/** @internal */class ListContainerElement extends ReportGroupItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,(model&&model.ordered?"o":"u")+"listContainerView");}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return "list";}_getCssSelector(){return 'rr-list-container rr-group-element';}_needDesignBox(){return true;}_needContentBox(){return false;}_getParentDom(){return this._list;}_createDom(doc){const div=super._createDom(doc);div.style.overflow='hidden';const list=this._list=doc.createElement(this.name.startsWith("o")?"ol":"ul");div.appendChild(list);return div;}_initDom(doc,dom){super._initDom(doc,dom);const css=this._list.style;css.marginBlockStart="0";css.marginBlockEnd="0";}_createElement(report,parent,item){const elt=new ListCellElement(this.doc,this,item);const childItem=item.item;if(childItem instanceof ListContainer){const li=elt.dom;li.style.listStyleType='none';}this._prepareChild(elt);parent.addChild(elt);return elt;}// protected _buildItems(report: ReportView, model: ReportGroupItem): void {
    //     const doc = this.doc;
    //     const list = model as ListContainer;
    //     const cells = list["_cells"];
    //     if (cells && cells.length > 0) {
    //         for (let cell of cells) {
    //             const elt = new ListCellElement(this.doc, cell, 'listCellView');
    //             this._prepareChild(elt);
    //             this.addChild(elt);
    //         }
    //     }
    // }
    _prepareChild(child){const css=child["_dom"].style;css.position='relative';// 기본이 absolute다. 또, 'relatvie'를 설정하지 않으면 debug box가 위치를 못 잡는다.
    child.positionable=false;}_doMeasure(ctx,dom,hintWidth,hintHeight){// 이렇게 초기화하지 않으면 _doAfterMeasured의 applyBorders를 통해 크기가 계속 늘어난다.
    // TODO: 좀 더 깔끔하게 처리?
    const model=this.model;if(!this.measureFixed){this._setModelSize(model,dom,hintWidth,hintHeight,true);}else {dom.style.width='';dom.style.height='';}const list=this._list;switch(model.marker){case ListContainerMarker.CIRCLE:case ListContainerMarker.DISC:case ListContainerMarker.SQUARE:if(list instanceof HTMLUListElement){list.style.listStyleType=model.marker;}break;case ListContainerMarker.DECIMAL:case ListContainerMarker.LOWER_ROMAN:case ListContainerMarker.UPPER_ROMAN:case ListContainerMarker.LOWER_ALPHA:case ListContainerMarker.UPPER_ALPHA:if(list instanceof HTMLOListElement){list.style.listStyleType=model.marker;}break;case ListContainerMarker.NONE:list.style.listStyleType=model.marker;break;}if(list instanceof HTMLOListElement&&model.start){list.start=model.start;}if(model.indent!==undefined)list.style.paddingInlineStart=model.indent+"px";// 기본값 - mac chrome에서 40px
    return super._doMeasure(ctx,dom,hintWidth,hintHeight);}_doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz){if(this.childCount>0){this._applyBorders(dom,sz);}else if(!ctx.printing){if(!this.model.height&&this.model.designHeight>0){sz.height=this.model.designHeight;}if(!this.model.width&&this.model.designWidth>0){sz.width=this.model.designWidth;}}super._doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz);}_doLayout(ctx){}getLower(item){for(let i=0,cnt=this.childCount;i<cnt;i++){if(this.getChild(i).firstChild===item&&i<cnt-1){return this.getChild(i+1).firstChild;}}}getUpper(item){for(let i=0,cnt=this.childCount;i<cnt;i++){if(this.getChild(i).firstChild===item&&i>0){return this.getChild(i-1).firstChild;}}}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class TableCellElement extends TableCellElementBase{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,table,model){super(doc,table,model,'tableCellView');}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-table-cell';}}/** @internal */class TableContainerElement extends TableElement{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"tableContainerView");}//-------------------------------------------------------------------------
    // ITable
    //-------------------------------------------------------------------------
    get columns(){return this.model.columns;}get colCount(){return this.model.colCount;}getColumn(index){return this.model.getColumn(index);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-table-container rr-group-element';}_createCellElement(doc,cell){return new TableCellElement(doc,this,cell);}_prepareCellStyles(ctx,table,row,col,td){super._prepareCellStyles(ctx,table,row,col,td);if(ctx.printing){const cell=table.getCell(row,col);const cb=cell.styleCallback;if(cb){try{const styles=cb(ctx,cell,ctx.row);if(styles){Utils.extend(td.style,styles);}}catch(err){console.error('CellStyleCallback Error',err);}}}}}////////////////////////////////////////////////////////////////////////////////
    /**
     */class BandCollectionElement extends ReportGroupItemElement{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,'bandCollectionView');}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return '';}_getCssSelector(){return 'rr-band-collection rr-group-element';}_needDesignBox(){return true;}_initDom(doc,dom){super._initDom(doc,dom);}_doMeasure(ctx,dom,hintWidth,hintHeight){const sz=super._doMeasure(ctx,dom,hintWidth,hintHeight);sz.height=0;for(let i=0;i<this.childCount;i++){sz.height+=this.getChild(i).measuredHeight;}return sz;}_doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz){if(this.childCount>0){this._applyBorders(dom,sz);}else if(!ctx.printing){if(!this.model.height&&this.model.designHeight>0){sz.height=this.model.designHeight;}if(!this.model.width&&this.model.designWidth>0){sz.width=this.model.designWidth;}}super._doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz);}_doLayoutContent(ctx){super._doLayoutContent(ctx);const p=this;//._container;
    const w=p.width;let y=0;let x=0;//const pts = this._points = [];
    for(let i=0,cnt=p.childCount;i<cnt;i++){const elt=p.getChild(i);if(!elt.floating){elt.y=y;elt.x=x+(w-elt.width)/2;//pts.push(y);
    y+=elt.height;//pts.push(y);
    y+=0;//this._gap;
    elt.setPrintStyles();}}}}////////////////////////////////////////////////////////////////////////////////
    class SimpleBandSectionElement extends StackContainerElement{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model,name,styleName){super(doc,model,name);this.styleName=styleName;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return '';}_getCssSelector(){return this.styleName+' rr-group-element';}_needDesignBox(){return true;}_doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz){if(this.childCount>0);else if(!ctx.printing){if(!this.model.height&&this.model.designHeight>0){sz.height=this.model.designHeight;}if(!this.model.width&&this.model.designWidth>0){sz.width=this.model.designWidth;}}super._doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz);}}class SimpleBandGroupSectionElement extends StackContainerElement{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model,name){super(doc,model,name);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    applyGroupStyles(elt){Utils.extend(elt.style,this.model.styles);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _needDesignBox(){return true;}_doMeasure(ctx,dom,hintWidth,hintHeight){const sz=super._doMeasure(ctx,dom,hintWidth,hintHeight);sz.width=hintWidth;sz.height=Math.max(24,sz.height);// 임시로...
    return sz;}_doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz){if(this.childCount>0){this._applyBorders(dom,sz);}else if(!ctx.printing){if(!this.model.height&&this.model.designHeight>0){sz.height=Math.max(sz.height,this.model.designHeight);}if(!this.model.width&&this.model.designWidth>0){sz.width=Math.max(sz.width,this.model.designWidth);}}super._doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz);}}class SimpleBandGroupHeaderElement extends SimpleBandGroupSectionElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,'simpleBandGroupHeader');}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-simpleband-group-header  rr-group-element';}measure(ctx,hintWidth,hintHeight){return super.measure(ctx,hintWidth,hintHeight);}}class SimpleBandGroupFooterElement extends SimpleBandGroupSectionElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,'simpleBandGroupFooter');}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-simpleband-group-footer  rr-group-element';}}/** @internal */class SimpleBandGroupElement extends ReportGroupItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,'simpleBandGroupView');}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get header(){return this._header;}get footer(){return this._footer;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-simpleband-group rr-group-element';}_needDesignBox(){return true;}_doMeasure(ctx,dom,hintWidth,hintHeight){super._doMeasure(ctx,dom,hintWidth,hintHeight);const f=this.container.focusedItem;this._header=this.getChild(0);this._footer=this.getChild(1);if(!ctx.printing&&!this._headerHead){this._headerHead=new SectionHeadView(this.doc,this.model.header,'GROUP HEADER','SimpleBand Group Header');this._footerHead=new SectionHeadView(this.doc,this.model.footer,'GROUP FOOTER','SimpleBand Group FOOTER');this.addChild(this._headerHead);this.addChild(this._footerHead);}let h=this._header.measuredHeight+this._footer.measuredHeight;if(!ctx.printing){let v=this._headerHead;let sz=v.measure(ctx,hintWidth,hintHeight);v.setSelected(f);h+=sz.height+2;v=this._footerHead;sz=v.measure(ctx,hintWidth,hintHeight);v.setSelected(f);h+=sz.height+2;}return Size.create(Math.max(this._header.measuredWidth,this._footer.measuredWidth),h);}_doLayoutContent(ctx){super._doLayoutContent(ctx);if(!ctx.printing){// this._header.y = 0;
    // this._footer.y = this._header.y + this._header.height;
    let y=0;let head=this._headerHead;head.applyMeasure();head.x=0;head.y=y+2;y+=head.height+2;this._header.y=y;y+=this._header.height;head=this._footerHead;head.applyMeasure();head.x=0;head.y=y+2;y+=head.height+2;this._footer.y=y;}}}class SimpleBandPrintInfo extends BandPrintInfo{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    isEnded(){return this.rows.length===0;}getRows(){return this.rows;}getNextPage(doc,ctx,width,parent){function endPage(){self.rpp=rpp;self.erc=erc>0?erc:NaN;}const self=this;const band=this.bandView.model;// ctx.band as SimpleBand;
    const level=band.bandLevel;// 최상위 master이면 0.  
    const rows=this.rows;const footerView=this.footerView;const hSave=ctx.h;const{endRowCount,stopEndRow}=band.getEndRowCount(0);const bHeader=!band.prevHead&&(isNaN(band.rowIndex)||level===0&&!(rows[0]instanceof BandPrintInfo)||level>0&&band.repeatDetailHeader);let hPage=ctx.h;let erc=this.erc;let rpp;if(isNaN(erc)){erc=endRowCount||0;}if(band.maxRowCount>0){this.setMaxCount(rows,band.maxRowCount);}if(bHeader||rows.length>0||erc>0){const cols=band.sectionCount;if(cols>1){const pts=this.ptsBand;const page=this._createPage(doc,parent);let cpages;width=pts[1]-pts[0];if(band.sectionLayout==BandSectionLayout.ACROSS_DOWN){cpages=this.$_getAcrossPages(doc,ctx,cols,width,page);}else {cpages=this.$_getDownPages(doc,ctx,cols,width,page);}if(cpages.length>=cols){for(let c=0;c<cols;c++){this._setX(cpages[c],pts[c*2]);}}page[T_HEIGHT]=cpages[T_HEIGHT];return page;}const{rowsPerPage,breakRowsPerPage}=band.getRowsPerPage();let y=0;let nRow=0;let startRow;let prevRow;let h;// page
    const page=this._createPage(doc,parent);rpp=this.rpp;if(isNaN(rpp)||!breakRowsPerPage||rpp<=0){rpp=rowsPerPage;}// header
    if(bHeader){if(isNaN(band.rowIndex)||level===0&&!(rows[0]instanceof BandPrintInfo)||level>0&&band.repeatDetailHeader){h=this.$_addHeader(page);hPage-=h;y+=h;band.prevHead=true;}}// group header
    // group 상태이고 페이지 첫 행이 group headre가 아니면 먼저 그룹 헤더를 표시한다.
    if(hPage>0&&this.prevGroup&&rows.length>0&&(this.isRow(rows[0])||!this.isGroupHeader(rows[0]))){const div=this.prevGroup.cloneNode(true);page.appendChild(div);div.style.top=y+'px';h=div.offsetHeight;if(h<=hPage){hPage-=h;y+=h;band.prevHead=false;}else {page.removeChild(div);hPage=0;// 더 이상 진행할 필요가 없게 한다.
    }}if(isNaN(band.rowIndex)){band.rowIndex=0;}while(hPage>0&&rows.length>0){const row=rows.shift();if(rpp<=0&&!(row instanceof BandPrintInfo)){rows.unshift(row);ctx.h=0;break;}let div;if(typeof row==='number'){div=this.bandView.printRow(ctx,row);if(div){h=div[T_HEIGHT];prevRow=row;if(isNaN(startRow)){startRow=row;}else if(row>startRow){SimpleBandElement.checkBlanks(band,row,div);}}}else if(row instanceof BandPrintInfo){// detail
    const saveIndex=ctx.index;ctx.h=hPage;div=row.getNextPage(doc,ctx,width,parent);ctx.index=saveIndex;ctx.h=hSave;h=div[T_HEIGHT];}else {// group
    if(this.isGroupFooter(row)&&this.prevRow){// 저번 페이지에 출력하지 못했던 group footer를 재출력한다.
    div=this.prevRow;}else {const g=this.$_addGroup(ctx,band,row,width);div=g.div;div[T_HEIGHT]=g.height;}h=div[T_HEIGHT];}if(hPage>=h){if(div){// printRow()가 void를 리턴할 수 있다.
    page.appendChild(div);div.style.top=y+'px';}hPage-=h;y+=h;if(typeof row==='number'){band.rowIndex++;ctx.index++;rpp--;nRow++;}else if(row instanceof BandPrintInfo){if(row.getRows().length===0&&isNaN(row.erc)){row.band.rowIndex=NaN;row.band.prevIndex=0;}else {row.band.prevIndex=ctx.index;rows.unshift(row);if(band.repeatMasterRow){rows.unshift(prevRow);this.rpp=NaN;band.rowIndex--;}ctx.h=0;break;}}band.prevHead=false;}else {rows.unshift(row);// callback들을 다시 호출하지 않도록 다음 페이지에 재사용해야 한다.
    if(div&&this.isGroupFooter(row)){this.prevRow=div;}break;}}if(rows.length===0){erc-=nRow;while(hPage>0&&erc>0){let ev=this.endMessageView;if(ev){page.appendChild(ev);ev[T_HEIGHT]=ev.offsetHeight;}const h=(this.endMessageView||this.endRowView)[T_HEIGHT];if(hPage>h){ev=ev||this.endRowView.cloneNode(true);ev.style.top=y+'px';ev[BAND_ROW_TYPE]=BAND_DUMMY;!this.endMessageView&&page.append(ev);hPage-=h;y+=h;erc--;this.endMessageView=null;}else {if(this.endMessageView){this.endMessageView.remove();}break;}}if(stopEndRow){erc=0;}if(erc==0){if(footerView){h=footerView.height;if(hPage>=h){this.$_addFooter(ctx,page,this.wBand,y);hPage-=h;}}}else {ctx.h=0;// 호출하는 쪾에서 페이지 하단에 더 추가하지 못하도록 한다.
    }}else if(level>0&&band.repeatDetailFooter){// 다음 page로 넘어가는 detail
    if(footerView){const hSave=hPage;const deletes=[];h=footerView.height;while(hPage<h){const div=page.lastElementChild;if(div&&div.classList.contains(SimpleBandElement.ROW_CLASS)){hPage+=div.offsetHeight;div.remove();rows.unshift(--prevRow);deletes.push({div:div,row:prevRow});ctx.index--;band.rowIndex--;}else {break;}}// footer 높이가 이전 데이터행들의 높이 합보다 높아서 footer가 출력되지 못할 수도 있다.
    if(hPage>=h){y-=hPage-hSave;this.$_addFooter(ctx,page,this.wBand,y);this.footerView=footerView;// $_addFooter에서 undefined로 설정한다.
    hPage-=h;}// 위에서 삭제했던 행들을 다시 돌려 놓는다.
    else {while(deletes.length>0){const{div,row}=deletes.pop();rows.push(row);page.appendChild(div);hPage-=div.offsetHeight;ctx.index++;}}}}else {ctx.h=0;}page[T_HEIGHT]=hSave-hPage;endPage();return page;}else if(footerView){const page=doc.createElement('div');const h=this.$_addFooter(ctx,page,this.wBand,0);hPage-=h;page[T_HEIGHT]=hSave-hPage;endPage();return page;}else {return null;}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_addHeader(page){if(this.headerView){const h=this.headerView.height;const header=this.headerView.dom.cloneNode(true);page.appendChild(header);return h;}return 0;}$_addFooter(ctx,page,width,y){const band=this.band;const view=this.footerView;if(band.bandLevel>0){band.clearSummary();ctx.bandSummaryRuntime=band.summaryRuntime.setRows(this.detailRows,this.masterRow).setRowCount(this.detailRows.length);view.measure(ctx,width,ctx.pageHeight);view.resize(view.measuredWidth,view.measuredHeight);view.setPrintStyles();view.layoutContent(ctx);}const footer=view.dom.cloneNode(true);footer.style.top=y+'px';page.appendChild(footer);this.footerView=undefined;return view.height;}$_addGroup(ctx,band,g,width){const v=g.view;const save=v.dom;const div=save.cloneNode(false);band.summaryRuntime.setRows(null,-1);div[BAND_ROW_TYPE]=g.rowType;ctx.bandSummaryRuntime=band.summaryRuntime;ctx.bandSummaryRuntime.setGroup(g.group);band.setPrinting(ctx,g.row);v.replaceDom(div);v['_modelChanged']=true;// 컨텐트를 새로 빌드하게 한다.
    v.measure(ctx,width,ctx.pageHeight);v.resize(v.measuredWidth,v.measuredHeight);v.setPrintStyles();v.layoutContent(ctx);const height=v.height;v.replaceDom(save);if(g.rowType===BAND_GROUP_HEADER){this.prevGroup=div;}return {div,height};}$_getAcrossPages(doc,ctx,cols,width,parent){const rows=this.rows;// 현재, group, detail을 지원하지 않는다.
    const pages=[];if(rows.length>0){const band=this.bandView.model;const footerView=this.footerView;const hSave=ctx.h;let hPage=ctx.h;const heights=[];let y=0;let h=0;// pages & headers
    for(let i=0;i<cols;i++){pages.push(this._createPage(doc,parent));h=Math.max(h,this.$_addHeader(pages[i]));heights.push(h);}hPage-=h;y+=h;// rows
    while(hPage>0&&rows.length>0){let divs=[];let h=0;for(let c=0;c<cols&&rows.length>c;c++){const row=rows[c];const div=this.bandView.printRow(ctx,row);if(div){divs.push(div);h=Math.max(h,div[T_HEIGHT]);heights[c]+=h;}}if(hPage>=h){for(let i=0;i<divs.length;i++){pages[i].appendChild(divs[i]);divs[i].style.top=y+'px';}hPage-=h;y+=h;ctx.index+=divs.length;rows.splice(0,divs.length);}else {ctx.h=0;// 호출하는 쪾에서 페이지 하단에 더 추가하지 못하도록 한다.
    break;}}// footer
    if(rows.length===0){if(footerView){const h=footerView.height;if(hPage>=h){const c=pages.length-1;const attach=band.footer.attachToBody;y=attach?heights[c]:y;this.$_addFooter(ctx,pages[c],this.wBand,y);if(attach){hPage=hSave-(y+h);}else {hPage-=h;}}}}else {ctx.h=0;// 호출하는 쪾에서 페이지 하단에 더 추가하지 못하도록 한다.
    }pages[T_HEIGHT]=hSave-hPage;}return pages;}$_getDownPages(doc,ctx,cols,width,parent){function resetHeights(divs){let y=hHeader;divs.forEach(div=>{div.style.top=y+'px';y+=div[T_HEIGHT];});return y-hHeader;}const rows=this.rows;// 현재, group, detail을 지원하지 않는다.
    const pages=[];let hHeader=0;if(rows.length>0){const band=this.bandView.model;const footerView=this.footerView;const hSave=ctx.h;let hPage=ctx.h;const heights=[];const cdivs=[];let y=0;let h=0;// pages & headers
    for(let i=0;i<cols;i++){pages.push(this._createPage(doc,parent));h=hHeader=Math.max(h,this.$_addHeader(pages[i]));heights.push(0);cdivs.push([]);}hPage-=h;y+=h;// rows
    const ySave=y;const hSavePage=hPage;for(let c=0;c<cols&&rows.length>0;c++){const page=pages[c];while(hPage>0&&rows.length>0){const row=rows.shift();const div=this.bandView.printRow(ctx,row);if(div){h=div[T_HEIGHT];if(hPage>=h){page.appendChild(div);cdivs[c].push(div);hPage-=h;heights[c]+=h;div.style.top=y+'px';y+=h;ctx.index++;}else {rows.unshift(row);break;}}}if(c<cols-1){y=ySave;hPage=hSavePage;}}// 마지막 페이지에서 각 컬럼의 높이를 최대한 맞춘다.
    if(rows.length===0){// 1. 전체 pixel 높이를 기준으로 등분한 후 맞춘다.
    const hAll=heights.reduce((prev,curr)=>prev+curr);// const divAll = cdivs.reduce((prev, curr) => prev.concat(curr));
    const hCol=Math.round(hAll/cols);// 첫번째 컬럼부터 hCol 이상 해당되는 행들을 다음 컬럼으로 넘긴다.
    for(let c=0;c<cols-1;c++){const divs=cdivs[c];let h=0;let i=0;let h2;while(i<divs.length){h+=h2=divs[i][T_HEIGHT];if(h>hCol){i--;h-=h2;break;}else {i++;}}heights[c]=h;// 다음 컬럼 위쪽으로 이동
    const page2=pages[c+1];const divs2=cdivs[c+1];while(divs.length>i){const div=divs.pop();page2.insertBefore(div,divs2[0]);divs2.unshift(div);}// 다음 컬럼행들 높이 조정
    heights[c+1]=resetHeights(divs2);}// 앞쪽 컬럼들의 높이가 더 높도록 재배치한다.
    // TODO: 두 번 호출하지 않는 방법?
    for(let i=0;i<2;i++){(()=>{for(let i=cols-1;i>0;i--){while(heights[i]>heights[i-1]){const page1=pages[i-1];const divs1=cdivs[i-1];const divs2=cdivs[i];// 첫번째 행을 이전 컬럼의 마지막 행으로 이동
    const div=divs2.shift();divs1.push(div);page1.appendChild(div);heights[i-1]=resetHeights(divs1);heights[i]=resetHeights(divs2);}}})();}}// footers
    if(rows.length===0){let hFooter=0;if(footerView){hFooter=footerView.height;if(hPage>=hFooter){const c=pages.length-1;const attach=band.footer.attachToBody;y=attach?heights[c]+hHeader:y;this.$_addFooter(ctx,pages[c],this.wBand,y);if(attach){heights[c]+=hFooter;hFooter=0;}}}const hMax=heights.reduce((prev,curr)=>Math.max(prev,curr));pages[T_HEIGHT]=hHeader+hMax+hFooter;}else {pages[T_HEIGHT]=hSave-hPage;ctx.h=0;// 호출하는 쪾에서 페이지 하단에 더 추가하지 못하도록 한다.
    }}return pages;}}/**
     * @internal
     *
     * 1. 한 행은 페이지를 넘어갈 수 없다. 현재 상태에서 넘치면 다음 페이지에 출력한다.
     **/class SimpleBandElement extends BandElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"simpleBandView");this._groupViews=[];this._colSpans=[];this._grouped=false;this._masterRow=-1;this._printedRows=NaN;this.addChild(this._headerView=new SimpleBandSectionElement(doc,model&&model.header,"bandHeaderView",SimpleBandElement.HEADER_CLASS));this.addChild(this._footerView=new SimpleBandSectionElement(doc,model&&model.footer,"bandFooterView",SimpleBandElement.FOOTER_CLASS));this.addChild(this._rowView=new SimpleBandSectionElement(doc,model&&model.dataRow,"bandRowTemplateView",SimpleBandElement.ROW_CLASS));this.addChild(this._detailView=new BandCollectionElement(doc,model&&model.detail));this._rowContainer=doc.createElement('div');this['_dom'].appendChild(this._rowContainer);}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static isRow(div){return div.classList.contains(SimpleBandElement.ROW_CLASS)&&div[BAND_ROW_TYPE]===BAND_ROW;}static checkBlanks(band,r,div){const blankItems=band.dataRow.blankItems;blankItems&&blankItems.forEach(item=>{if(band.dataRow.canBlank(item,r)){const children=div.children;for(let i=children.length-1;i>=0;i--){const elt=children[i];if(elt.dataset[T_MODEL]===item.shash){div.removeChild(elt);break;}}}});}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // BandView
    //-------------------------------------------------------------------------
    /**
         * ctx.h, ctx.yBand를 재설정해서 리턴해야 한다.
         *
         * acrossDown: 각 컬럼의 같은 행 시작점이 동일하다.
         * downAcross: 각 컬럼의 행 높이가 다를 수 있다.
         *
         * TODO: header + 첫행을 표시할 수 없으면 다음 페이지로
         */printBand(doc,ctx,w,pages,subRows){let masterRow=arguments.length>5&&arguments[5]!==undefined?arguments[5]:-1;const band=this.model;const data=band.dataObj;const wBand=band.getWidth(w);const xBand=band.getLeft(w);let x=xBand||0;if(!isNaN(wBand)){if(isNaN(xBand)){x=Math.floor((w-wBand)/2);}w=wBand;}const cols=band.sectionCount;const single=cols<2;let divs=this._rowDivs;const pts=single?null:band.getColPoints(w,x);const h=ctx.pageHeight;if(!subRows){band.prepareIndices(ctx);}this._masterRow=masterRow;band.dataRow.masterRow=masterRow>=0?masterRow:NaN;// for testing
    band.summaryRuntime.setRows(subRows,masterRow);if(pts){w=pts[1]-pts[0];}ctx.band=band;// detail인 경우에도 한 번만 measure한다. => chart 등을 위해 매번 실행한다.
    if(isNaN(this._rowView.measuredHeight)){// header
    let view=this._headerView;if(view.visible=view.model.visible){view.measure(ctx,w,h);view.resize(view.measuredWidth,view.measuredHeight);view.x=x;view.setPrintStyles();view.layoutContent(ctx);}// rows
    view=this._rowView;if(!divs){if(view.visible=view.model.visible){view.measure(ctx,w,h);view.resize(view.measuredWidth,view.measuredHeight);view.x=x;view.setPrintStyles();view.layoutContent(ctx);}if(single){ctx.bandSummaryRuntime=band.summaryRuntime;const desingData=band.designData;const groupViews=this.$_getGroupViews(ctx,band.groups.getValidGroups(desingData),w,h);divs=this._rowDivs=this.$_printRows(ctx,data,groupViews,view,w,subRows);}}// footer
    view=this._footerView;if(view.visible=view.model.visible){ctx.bandSummaryRuntime=band.summaryRuntime;view.measure(ctx,w,h);view.resize(view.measuredWidth,view.measuredHeight);view.x=x;view.setPrintStyles();view.layoutContent(ctx);}}else if(!divs){// detail의 첫번째 table 이후 datarow들을 다시 생성한다.
    // header
    let view=this._headerView;if(view.visible=view.model.visible){view.measure(ctx,w,h);view.resize(view.measuredWidth,view.measuredHeight);view.x=x;view.setPrintStyles();view.layoutContent(ctx);}if(single){ctx.bandSummaryRuntime=band.summaryRuntime;const desingData=band.designData;const groupViews=this.$_getGroupViews(ctx,band.groups.getValidGroups(desingData),w,h);divs=this._rowDivs=this.$_printRows(ctx,data,groupViews,this._rowView,w,subRows);}// footer
    view=this._footerView;if(view.visible=view.model.visible){ctx.bandSummaryRuntime=band.summaryRuntime;view.measure(ctx,w,h);view.resize(view.measuredWidth,view.measuredHeight);view.x=x;view.setPrintStyles();view.layoutContent(ctx);}}// print
    if(single){this.$_printLinear(doc,ctx,band,data,w,divs,pages);}else {if(band.sectionLayout==BandSectionLayout.ACROSS_DOWN){this.$_printAcross(doc,ctx,pts,band,cols,data,pages);}else {this.$_printDown(doc,ctx,pts,band,cols,data,pages);}}// detail이면
    if(subRows){this._rowDivs=null;}}prepareAsync(doc,ctx,width,subRows,masterRow){function prepareDetail(r,rows){for(let i=0;i<details.count;i++){const detailBand=details.get(i);const detailView=detailViews.getChild(i);// detailBand.pageNo = 0;
    detailBand.masterValues=band.getValues(ctx,r,detailBand['_masterFlds']);detailBand.detailRows=detailBand.rowsPerMaster;const detailRows=detailBand.getNextDetailRows(ctx);if(detailRows.length>0){const info=detailView.prepareAsync(doc,ctx,width,detailRows,r);detailBand['_pr']+=detailRows.length;info.masterValues=band.getValues(ctx,r,detailBand['_masterFlds']);rows.push(info);// info.getRows()?.forEach(drow => {
    //     rows.push({
    //         view: detailView,
    //         row: drow
    //     })
    // })
    }}}function prepareRows(){const rowCount=subRows?subRows.length:data?data.rowCount:0;const rows=[];if(groupViews){const fields=groupViews.map(g=>g.visible&&g.model.field).filter(f=>!!f);const grows=data.groupBy(fields,subRows);grows.forEach(row=>{if(Utils.isNumber(row)){// data row
    rows.push(row);details&&prepareDetail(row,rows);}else if(row['parent']){// group header
    const g=groupViews[row['level']-1];if(g.header&&g.header.visible){rows.push({view:g.header,row:row['row'],rowType:BAND_GROUP_HEADER,group:row});}}else {// group footer
    const g=groupViews[row['group']['level']-1];if(g.footer&&g.footer.visible){rows.push({view:g.footer,row:row['row'],rowType:BAND_GROUP_FOOTER,group:row['group']});}}});}else if(subRows){for(const r of subRows){rows.push(r);details&&prepareDetail(r,rows);}}else {for(let r=0;r<rowCount;r++){rows.push(r);details&&prepareDetail(r,rows);}}return rows;}const band=this.model;const level=band.bandLevel;const details=band.detail&&band.detail.count>0?band.detail:null;const detailViews=this._detailView;const data=band.dataObj;let groupViews;const wBand=band.getWidth(width);const xBand=band.getLeft(width);let x=xBand||0;if(details){for(let i=0;i<details.count;i++){const dband=details.get(i);dband['_pr']=0;// getNextDetailRows()에서 필요.
    }}if(!isNaN(wBand)){if(isNaN(xBand)){x=Math.floor((width-wBand)/2);}width=wBand;}const cols=band.sectionCount;const single=cols<2;let divs=this._rowDivs;const pts=single?null:band.getColPoints(width,x);this._masterRow=masterRow;band.dataRow.masterRow=masterRow>=0?masterRow:NaN;// for testing
    band.summaryRuntime.setRows(subRows,masterRow);if(pts){width=pts[1]-pts[0];}ctx.band=band;if(level===0){band.prepareIndices(ctx);}if(isNaN(this._rowView.measuredHeight)){const h=ctx.pageHeight;// NOTE: chart 구성할 때 사용한다
    ctx.detailRows=subRows?subRows.slice(0):void 0;// header
    let view=this._headerView;if(view.visible=view.model.visible){view.measure(ctx,width,h);view.resize(view.measuredWidth,view.measuredHeight);view.x=x;view.setPrintStyles();view.layoutContent(ctx);}// rows
    view=this._rowView;if(!divs){if(view.visible=view.model.visible){view.measure(ctx,width,h);view.resize(view.measuredWidth,view.measuredHeight);view.x=x;view.setPrintStyles();view.layoutContent(ctx);}if(single){groupViews=this.$_getGroupViews(ctx,band.groups.getValidGroups(band.designData),width,h);}}// footer
    view=this._footerView;if(view.visible=view.model.visible){ctx.bandSummaryRuntime=band.summaryRuntime;view.measure(ctx,width,h);view.resize(view.measuredWidth,view.measuredHeight);view.x=x;view.setPrintStyles();view.layoutContent(ctx);}}const info=new SimpleBandPrintInfo();info.band=band;info.bandView=this;info.headerView=this._headerView.visible?this._headerView:null;info.footerView=this._footerView.visible?this._footerView:null;info.rowView=this._rowView;info.groupViews=groupViews;info.rows=prepareRows()||[];info.xBand=x;info.wBand=width;info.ptsBand=pts;info.masterRow=masterRow;info.detailRows=subRows?subRows.slice(0):null;if(!groupViews&&band.getEndRowCount().endRowCount>0){// 아래 printRow 중에 다른 값으로 설정된다. getNextDetailRows() 에서 연속 사용하므로 유지해야 한다.
    const savePr=band['_pr'];// end row view
    const v=this.printRow(ctx,0);if(v){info.endRowView=v;v.classList.add('rr-simpleband-end-row');Utils.clearChildren(v);// end message view
    if(band.endRowMessage){info.endMessageView=this.$_addEndRowMessage();}}band['_pr']=savePr;}return info;}addMasterRow(page,headerView,rowView,x,y){const vHeader=headerView.cloneNode(true);const vRow=rowView.cloneNode(true);page.appendChild(vHeader);vHeader.style.top=y+'px';const h=vHeader.offsetHeight;y+=h;page.appendChild(vRow);vRow.style.top=y+'px';return h+vRow.offsetHeight;}printRow(ctx,row){const rowView=this._rowView;if(!rowView.visible)return void 0;const band=this.model;const scb=band.dataRow.styleCallback;const save=rowView.dom;const v=rowView;const r=row;// cloneNode(false): 아래 measure에서 내부는 새로 생성한다.
    const div=v.dom.cloneNode(false);v.replaceDom(div);// div[BAND_ROW_BLANK] = blank;
    div[BAND_ROW_TYPE]=BAND_ROW;band.setPrinting(ctx,r);if(scb){const styles=scb(ctx,band.dataRow,r,undefined);if(styles){Utils.extend(div.style,styles);}}ctx.bandSummaryRuntime=band.summaryRuntime;ctx.bandSummaryRuntime.setGroup(null);v['_modelChanged']=true;// 컨텐츠를 새로 빌드하게 한다.
    v.measure(ctx,v.measuredWidth,v.measuredHeight);// width, ctx.pageHeight);
    v.resize(v.measuredWidth,v.measuredHeight);v.setPrintStyles();v.layoutContent(ctx);v.replaceDom(save);div[T_HEIGHT]=v.height;return div;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get headerView(){return this._headerView;}/** footerView */get footerView(){return this._footerView;}/** rowTemplateView */get rowTemplateView(){return this._rowView;}get groupCount(){return this._groupViews.length;}/** detailView */get detailView(){return this._detailView;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getGroupView(index){return this._groupViews[index];}indexOfGroup(group){let i=-1;for(let v of this._groupViews){if(v.visible){i++;if(v.model===group)return i;}}return i;}getRowPoints(){const pts=[];this.headerView.visible&&pts.push(this._headerView.y,this.headerView.height);pts.push(this._rowView.y,this._rowView.height);this._footerView.visible&&pts.push(this._footerView.y,this._footerView.height);for(let v of this._groupViews){v.visible&&pts.push(v.y,v.height);}this.detailView.visible&&pts.push(this._detailView.y,this._detailView.height);return pts;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return 'simple band';}_getCssSelector(){return "rr-band rr-group-element";}_needDesignBox(){return true;}get rowView(){return this._rowView;}_isEmpty(){return this.model.sectionCount<2&&super._isEmpty();}$_prepareHeads(doc){if(!this._headViews){const m=this.model;this._headViews={};this.addChild(this._headViews[this.shash]=new SectionHeadView(doc,m,'SIMPLE BAND','SimpleBand','rr-band-head'));this.addChild(this._headViews[this._headerView.shash]=new SectionHeadView(doc,m.header,'HEADER','SimpleBand Header'));this.addChild(this._headViews[this._footerView.shash]=new SectionHeadView(doc,m.footer,'FOOTER','SimpleBand Footer'));this.addChild(this._headViews[this._rowView.shash]=new SectionHeadView(doc,m.dataRow,'DATA ROW','SimpleBand Row Template'));for(let v of this._groupViews){this.addChild(this._headViews[v.shash]=new SectionHeadView(doc,v.model,'GROUP-'+(v.model.index+1),'SimpleBand Group'));}this.addChild(this._headViews[this._detailView.shash]=new SectionHeadView(doc,m.detail,'DETAILS','SimpleBand Details'));}}_doMeasure(ctx,dom,hintWidth,hintHeight){const printing=ctx.printing;const band=this.model;let w=0;let h=0;let sz;const wBand=band.getWidth(hintWidth);if(!isNaN(wBand)){hintWidth=wBand;}hintWidth=band.getColWidth(hintWidth);// header
    let view=this._headerView;if(!printing&&(view.visible=view.model.visible)){sz=view.measure(ctx,hintWidth,hintHeight);w=Math.max(w,sz.width);h+=sz.height;}// row template
    view=this._rowView;if(!printing&&(view.visible=view.model.visible)){sz=view.measure(ctx,hintWidth,hintHeight);w=Math.max(w,sz.width);h+=sz.height;}// footer
    view=this._footerView;if(!printing&&(view.visible=view.model.visible)){ctx.bandSummaryRuntime=band.summaryRuntime;sz=view.measure(ctx,hintWidth,hintHeight);w=Math.max(w,sz.width);h+=sz.height;}// groups
    if(this.$_prepareGroupViews(band,this.doc)>0){if(!ctx.printing){h+=this.$_measureGroupViews(band,ctx,hintWidth,hintHeight);}}// detail
    view=this._detailView;if(view.visible=view.model.visible){sz=view.measure(ctx,hintWidth,hintHeight);w=Math.max(w,sz.width);h+=sz.height;}// head views
    if(!printing){this.$_prepareHeads(this.doc);if(this._headViews){const c=this.container;const f=c===null||c===void 0?void 0:c.focusedItem;for(let p in this._headViews){const v=this._headViews[p];const m=v.model;sz=v.measure(ctx,hintWidth,hintHeight);w=Math.max(w,sz.width);h+=sz.height+2;if(m.isAncestorOf(f)){v.dom.dataset.selected='';}else {delete v.dom.dataset.selected;}}}}return new Size(w,h);}_doLayoutContent(ctx){const m=this.model;const visHead=!!this._headViews;const cols=m.sectionCount;const w=m.getColWidth(this.width);const xHead=2+m.bandLevel*8;const headIndent=8;let y=0;let view;let head;const lines=ctx.printing?null:this._lines=[];// band head
    if(visHead){head=this._headViews[this.shash];head.setBounds(xHead,y+2,head.measuredWidth,head.measuredHeight);y+=head.height+2;}// header
    view=this._headerView;if(visHead){head=this._headViews[view.shash];head.setBounds(xHead+headIndent,y+2,head.measuredWidth,head.measuredHeight);y+=head.height+2;}if(view.visible){view.setBounds((w-view.measuredWidth)/2,y,view.measuredWidth,view.measuredHeight);y+=view.height;view.setPrintStyles();view.layoutContent(ctx);}lines===null||lines===void 0?void 0:lines.push(view);// row template
    view=this._rowView;if(visHead){head=this._headViews[view.shash];head.setBounds(xHead+headIndent,y+2,head.measuredWidth,head.measuredHeight);y+=head.height+2;}if(view.visible){view.setBounds((w-view.measuredWidth)/2,y,view.measuredWidth,view.measuredHeight);y+=view.height;view.setPrintStyles();view.layoutContent(ctx);}lines===null||lines===void 0?void 0:lines.push(view);// footer
    view=this._footerView;if(visHead){head=this._headViews[view.shash];head.setBounds(xHead+headIndent,y+2,head.measuredWidth,head.measuredHeight);y+=head.height+2;}if(view.visible){view.setBounds((w-view.measuredWidth)/2,y,view.measuredWidth,view.measuredHeight);view.setPrintStyles();view.layoutContent(ctx);y+=view.height;}lines===null||lines===void 0?void 0:lines.push(view);// groups
    for(let v of this._groupViews){if(visHead){head=this._headViews[v.shash];head.setBounds(xHead+headIndent,y+2,head.measuredWidth,head.measuredHeight);y+=head.height+2;}v.setBounds((w-v.measuredWidth)/2,y,w,v.measuredHeight);v.setPrintStyles();v.layoutContent(ctx);y+=v.height;lines===null||lines===void 0?void 0:lines.push(v);}// detail
    view=this._detailView;if(visHead){head=this._headViews[view.shash];head.setBounds(xHead+headIndent,y+2,head.measuredWidth,head.measuredHeight);y+=head.height+2;}if(view.visible){view.setBounds((w-view.measuredWidth)/2,y,view.measuredWidth,view.measuredHeight);y+=view.height;view.setPrintStyles();view.layoutContent(ctx);}lines===null||lines===void 0?void 0:lines.push(view);// columns
    if(this._designView){this.$_layoutCols(this.doc,cols);}}$_getHeadHeight(){return this._headViews[this.shash].height+1;}_setDesignContent(empty,designView){const h=this.$_getHeadHeight();this._designView.style.top=h+'px';this._designView.style.height=this.height-h+'px';if(empty){super._setDesignContent(empty,designView);}designView.style.backgroundColor='white';}getLines(){return this._lines;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    // TODO: 머지 후 $_printRows의 addEndRowMessage() 제거할 것!
    $_addEndRowMessage(){const band=this.model;const v=this._rowView;const div=v.cloneNode();const span=v.doc.createElement('span');div.classList.add('rr-simpleband-end-row');div[BAND_ROW_TYPE]=BAND_DUMMY;div[T_HEIGHT]=div.offsetHeight;Utils.clearChildren(div);span.textContent=band.endRowMessage;span.className=BandElement.END_ROW_MESSAGE_CLASS;div.append(span);Object.assign(div.style,{display:'flex',alignItems:'center',justifyContent:'center',width:v.measuredWidth+'px',height:v.measuredHeight+'px'});return div;}$_printRows(ctx,data,groups,v,w,subRows){function addRow(r,model,cb){let blank=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;const save=v.dom;// TODO: canvas가 포함된 경우 (예, qrcode) 문제가 발생한다.
    const needBuild=true;//(force || r > 0) && blank === 0;
    const div=save.cloneNode(!needBuild);// 두 번째 행부터는 컨텐트가 새로 build된다.
    v.replaceDom(div);div[BAND_ROW_BLANK]=blank;div[BAND_ROW_TYPE]=BAND_ROW;band.setPrinting(ctx,r);if(cb){const styles=cb(ctx,model,r,undefined);if(styles){Utils.extend(div.style,styles);}}// 첫번째 행은 이미 meausre/layout이 실행된 상태다.
    {ctx.bandSummaryRuntime=band.summaryRuntime;ctx.bandSummaryRuntime.setGroup(null);v['_modelChanged']=true;// 컨텐트를 새로 빌드하게 한다.
    v.measure(ctx,w,ctx.pageHeight);v.resize(v.measuredWidth,v.measuredHeight);v.setPrintStyles();v.layoutContent(ctx);}v.replaceDom(save);// for testing
    if(!isNaN(model.masterRow)){div.dataset[BAND_MASTER]=String(model.masterRow);}if(blank){div.classList.add('rr-simpleband-end-row');}ctx.index++;return div;}function addEndRowMessage(){const div=v.cloneNode();const span=v.doc.createElement('span');div.classList.add('rr-simpleband-end-row');div[BAND_ROW_TYPE]=BAND_DUMMY;Utils.clearChildren(div);span.textContent=band.endRowMessage;span.className=BandElement.END_ROW_MESSAGE_CLASS;div.append(span);Object.assign(div.style,{display:'flex',alignItems:'center',justifyContent:'center',width:v.measuredWidth+'px',height:v.measuredHeight+'px'});return div;}function addGroup(r,v,group,rowType){const save=v.dom;const div=save.cloneNode(false);div[BAND_ROW_TYPE]=rowType;ctx.bandSummaryRuntime=band.summaryRuntime;ctx.bandSummaryRuntime.setGroup(group);band.setPrinting(ctx,r);v.replaceDom(div);v['_modelChanged']=true;// 컨텐트를 새로 빌드하게 한다.
    v.measure(ctx,w,ctx.pageHeight);v.resize(v.measuredWidth,v.measuredHeight);v.setPrintStyles();v.layoutContent(ctx);v.replaceDom(save);return div;}const band=this.model;const model=band.dataRow;const scb=model.styleCallback;const divs=[];let rowCount=subRows?subRows.length:data?data.rowCount:0;const saveCount=rowCount;if(band.maxRowCount>0){rowCount=Math.min(rowCount,band.maxRowCount);}const dc=band.getEndRowCount();if(!groups&&dc.endRowCount>0){if(!this._endRowView){// dummy row - 첫번째 data 행의 스타일에 맞춘다.
    this._endRowView=addRow(0,model,scb,false,1);Utils.clearChildren(this._endRowView);}// end message view
    if(band.endRowMessage){this._endMessageView=addEndRowMessage();}}if(rowCount===0&&!this._endRowView){return divs;}this._printedRows=rowCount!==saveCount?rowCount:NaN;const saveRow=band.pr;ctx.index=0;if(groups&&rowCount>0){const fields=groups.map(g=>g.visible&&g.model.field).filter(f=>!!f);const rows=data.groupBy(fields,subRows);for(let i=0;i<rows.length;i++){const row=rows[i];if(Utils.isNumber(row)){// data row
    divs.push(addRow(row,model,scb));}else if(row['parent']){// group header
    const g=groups[row['level']-1];if(g.header&&g.header.visible){divs.push(addGroup(row['row'],g.header,row,BAND_GROUP_HEADER));}}else {// group footer
    const g=groups[row['group']['level']-1];if(g.footer&&g.footer.visible){divs.push(addGroup(g['row'],g.footer,row['group'],BAND_GROUP_FOOTER));}}}this._grouped=true;}else if(subRows){for(let i=0;i<rowCount;i++){divs.push(addRow(subRows[i],model,scb,true));}}else {for(let i=0;i<rowCount;i++){divs.push(addRow(i,model,scb));}}band.setPrinting(ctx,saveRow);return divs;}$_prepareGroupViews(band,doc){const groups=band.groups;const count=groups.count;const views=this._groupViews;while(views.length>count){const view=views.pop();view.dispose();this.removeChild(view);}while(views.length<count){const view=new SimpleBandGroupElement(doc,null);this.addChild(view);views.push(view);}return views.length;}$_measureGroupViews(band,ctx,hintWidth,hintHeight){const groups=band.groups;const views=this._groupViews;let h=0;for(let i=0;i<groups.count;i++){views[i].model=groups.get(i);h+=views[i].measure(ctx,hintWidth,hintHeight).height;}return h;}$_getGroupViews(ctx,groups,w,h){if(groups){const views=[];for(let g of groups){const v=this._groupViews[g.index];v.model=g;ctx.noValueCallback=true;try{v.measure(ctx,w,h);}finally{ctx.noValueCallback=false;}views.push(v);}return views.length?views:null;}}$_layoutCols(doc,count){const spans=this._colSpans;while(spans.length<count-1){const span=doc.createElement('span');span.className='rr-band-col';spans.push(span);this._designView.appendChild(span);}const gap=this.model.sectionGap;const w=this.model.getColWidth(this.width);const h=this.height-this.$_getHeadHeight();const y=0;let x=w+gap;for(let i=0;i<count-1;i++){const span=spans[i];delete span.dataset.hidden;span.textContent=i+2+'';Utils.setBounds(span,x,y,w,h);x+=w+gap;}for(let i=count-1;i<spans.length;i++){spans[i].dataset.hidden='1';}}$_createPage(doc){const page=doc.createElement('div');page.dataset[T_MODEL]=this.model.shash;page.dataset[T_PAGE]='1';page.style.position='relative';// page 위치는 container에서...
    this._rowContainer.appendChild(page);return page;}$_cloneRow(ctx,band,r,w){const t=this._rowView;const tdom=t.dom;const div=t.cloneNode();ctx.bandSummaryRuntime=band.summaryRuntime;t.replaceDom(div);t.measure(ctx,w,ctx.pageHeight);t.resize(t.measuredWidth,t.measuredHeight);t.setPrintStyles();t.layoutContent(ctx);t.replaceDom(tdom);return div;}$_printLinear(doc,ctx,band,data,w,rowDivs,pages){function addPage(self,initY){const page=self.$_createPage(doc);ctx.yBand=y=0;if(initY){// 이 밴드부터 시작하는 페이지.
    cy=ctx.y=ctx.bodyTop;assert(band.pr>=0);// 헤더가 한 페이지를 채웠을 수 있다.
    }// 초기화 or maxRowsPerPage or rowsPerPage가 끝난 경우
    if(isNaN(rpp)||!breakRowsPerPage||rpp<=0){rpp=rowsPerPage;}// dummy 출력 중이면 출력 중단이거나 나머지 출력
    if(dummies.length);else {nRow=0;}// repeatMasterRow, repeatDetailHeader in detail band
    if(level>0&&band.pageNo>0){if(band.master.repeatMasterRow&&!nRow){reapeatMaster(self,page);}if(band.repeatDetailHeader){addHeader(self,page);}}pages.push(page);initY&&band.pageNo++;return page;}function reapeatMaster(self,page){const masterView=self.rowView['masterBandView'];const headerView=self.rowView['masterHeaderView'];const rowView=self.rowView['masterRowView'];const h=masterView.addMasterRow(page,headerView,rowView,rowView.x,y);y+=h;cy+=h;}function addHeader(self,page){if(self._headerView.visible){header=self._headerView.dom.cloneNode(true);page.appendChild(header);const h=header.offsetHeight;if(h>0){self._setY(header,y);y+=h;cy+=h;band.prevHead=true;}}}function addFooter(self){const view=self._footerView;// detail이거나 data행 수와 달라진 경우 summary runtime에 group을 설정해서 다시 render한다.
    if(rows||!isNaN(self._printedRows)){band.clearSummary();ctx.bandSummaryRuntime=band.summaryRuntime.setRows(rows,self._masterRow).setRowCount(self._printedRows);view.measure(ctx,w,ctx.pageHeight);view.resize(view.measuredWidth,view.measuredHeight);view.setPrintStyles();view.layoutContent(ctx);}let footer=view.cloneNode();// h = footer.offsetHeight // page에 추가되지 않은 상태이므로 0이 된다. 아래에서 할 것!
    self._setY(footer,y);page.appendChild(footer);y+=h=footer.offsetHeight;cy+=h;// 페이지를 넘어가면, 
    // 더미들을 출력한 상태고 다음페이지에 더미를 출력할 필요가 없다면
    // 페이지를 추가하기 전에 더미들을 먼저 삭제해 본다.
    if(cy>cBottom&&dummies.length&&stopEndRow){let cy2=cy;let i=dummies.length-1;while(i>=0&&cy2>cBottom){cy2-=dummies[i--].offsetHeight;}if(cy2<=cBottom){y-=cy-cy2;self._setY(footer,y-h);cy=cy2;for(let j=dummies.length-1;j>i;j--){page.removeChild(dummies[j]);}}}// 그래도 페이지를 넘어가면, 취소하고 새 페이지에 다시 추가한다.
    if(cy>cBottom){page.removeChild(footer);page=addPage(self,true);cy+=h;self._setY(footer,y);page.appendChild(footer);}ctx.yBand=y;ctx.y=cy;ctx.h=ctx.bodyHeight-(cy-ctx.bodyTop);}const rowCount=data?data.rowCount:0;const level=band.bandLevel;// 최상위 master이면 0.  
    const details=band.detail;const grouped=this._grouped;const{rowsPerPage,breakRowsPerPage}=band.getRowsPerPage();const startRow=band.pr;const rows=level>0?[]:null;const endRowView=this._endRowView;let endMessageView=this._endMessageView;const{endRowCount,stopEndRow}=band.getEndRowCount(endMessageView?1:0);const dummies=[];let dummyRowView;let nRow=0;let cy=ctx.y;let cBottom=ctx.bodyBottom;let y=ctx.yBand;let page;let header;let rpp;let rowDiv;let prevRow;let prevGroup;let h=0;let footed=false;// console.log('SATRT', startRow)
    // first page
    if(level==0){// detail이 아니면 첫 페이지를 생성한다.
    page=addPage(this,false);}else {page=pages[pages.length-1];band.pageNo++;rpp=rowsPerPage;}// first header
    addHeader(this,page);// rows
    while(rowDivs.length>0||endRowCount>0&&nRow<endRowCount){const bandPr=band.pr;const bHead=!band.prevHead&&y===ctx.yBand&&(level===0||band.pageNo===0);if(bHead){// 페이지 첫 부분이 아니면서 페이지를 넘어가면 페이지 추가
    if(cy+h>cBottom&&y>0){//debugger;
    page=addPage(this,true);}// 디테일밴드가 page를 추가한 경우에도 cy가 초기화 되므로 nRow도 체크한다.
    if(cy===ctx.bodyTop&&(level===0||nRow===0)){addHeader(this,page);}}// data row
    rowDiv=prevRow;if(!rowDiv){if(rowDivs.length>0){rowDiv=rowDivs[0];}else if(endMessageView){rowDiv=endMessageView;dummies.push(rowDiv);}else {rowDiv=dummyRowView=endRowView.cloneNode(true);rowDiv[BAND_ROW_TYPE]=BAND_DUMMY;dummies.push(rowDiv);}}// group 상태이고 페이지 첫 행이 그룹 헤더가 아니면 먼저 그룹 헤더를 표시한다.
    if(bHead&&prevGroup&&rowDiv[BAND_ROW_TYPE]!==BAND_GROUP_HEADER){rowDiv=prevGroup.cloneNode(true);this._setY(rowDiv,y);page.appendChild(rowDiv);rowDiv[T_HEIGHT]=rowDiv.offsetHeight;y+=h=rowDiv[T_HEIGHT];cy+=h;prevGroup=rowDiv;band.prevHead=false;continue;}this._setY(rowDiv,y);page.appendChild(rowDiv);rowDiv[T_HEIGHT]=h=rowDiv.offsetHeight;y+=h;cy+=h;prevRow=null;// page overflow 됐다면 (단, 최상위 master의 첫 행은 무조건 출력)
    if(cy>cBottom&&(band.prevHead||level>0||bandPr>0)){page.removeChild(rowDiv);dummies.pop();prevRow=rowDiv;if(nRow>0)band.prevHead=false;// 더미 채우는 중이고 다음 페이지로 넘길 필요 없다면 중지.
    if(dummies.length&&stopEndRow){// 중지 시킨다.
    nRow=endRowCount;}// 새 페이지 추가
    else {page=addPage(this,true);}}else {//const div = endMessageView || dummyRowView || rowDivs.shift();
    const div=rowDivs.shift()||endMessageView||dummyRowView;const bRow=div[BAND_ROW_TYPE]===BAND_ROW;if(rows&&bRow){rows.push(bandPr);}if(bandPr>0&&!grouped&&bRow){SimpleBandElement.checkBlanks(band,bandPr,div);}if(!div[BAND_ROW_BLANK]&&bRow){band.setPrinting(ctx,bandPr+1);}if(grouped&&div[BAND_ROW_TYPE]===BAND_GROUP_HEADER){prevGroup=div;}if(bRow||div===endMessageView||div===dummyRowView){rpp--;nRow++;if(div===endMessageView){endMessageView=null;}}const nPage=pages.length;// detail bands
    if(bRow&&details.count>0){ctx.row=0;ctx.y=cy;ctx.h=ctx.bodyHeight-(cy-ctx.bodyTop);ctx.yBand=y;for(let i=0;i<details.count;i++){const view=this._detailView.getChild(i);const detailBand=view.model;view.rowView['masterBandView']=this;view.rowView['masterHeaderView']=this._headerView.dom;view.rowView['masterRowView']=rowDiv;detailBand.pageNo=0;detailBand.masterValues=band.getValues(ctx,bandPr,detailBand['_masterFlds']);detailBand.detailRows=detailBand.rowsPerMaster;// keyFields가 설정되지 않은 경우, 이 개수만큼 출력된다.
    const nextRows=ctx.detailRows=detailBand.getNextDetailRows(ctx)||[];view.printBand(doc,ctx,w,pages,nextRows,bandPr);}page=pages[pages.length-1];cy=ctx.y;y=ctx.yBand;}// (0보다 큰 값으로 설정된 경우)rowsPerPage를 초과했다면
    footed=false;if(rpp<=0&&(rowDivs.length>0||endRowCount<=0||nRow===endRowCount)&&band.pr<rowCount){if(level>0&&band.repeatDetailFooter){addFooter(this);footed=true;}if(rowDivs.length>0||footed){if(bandPr<rowCount){if(pages.length===nPage||footed){page=addPage(this,true);}}}}}}// footer
    if(level==0||band.pr>startRow){if(!footed){addFooter(this);footed=false;if(level>0&&rowsPerPage<Number.MAX_SAFE_INTEGER&&band.pr<rowCount){const page=this.$_createPage(doc);ctx.yBand=y=0;ctx.y=ctx.bodyTop;cy=ctx.bodyTop;pages.push(page);}}}else if(header){// level > 0, footer를 출력할 필요없는 상황이면 header도 제거.
    // debugger;
    // header 제거
    const h=header.offsetHeight;Utils.remove(header);y-=h;cy-=h;}if(!footed){ctx.yBand=y;ctx.y=cy;ctx.h=ctx.bodyHeight-(cy-ctx.bodyTop);}}/**
         * 왼쪽에서 오른쪽으로 먼저 끝에서 첫번째 컬럼으로 다시.
         * 최대한 모든 컬럼에 골고루 배치.
         * header는 밴드가 포함된 모든 페이지의 모든 컬럼 시작 위치에 표시.
         * footer는 마지막 페이지 마지막 행이 속한 컬럼 아래.
         *
         * 모든 컬럼의 같은 행 높이가 같게 표시된다.
         * 컬럼들 중 하나라도 페이지를 넘치면 중단하고 다음 페이지로 넘어간다.
         *
         * TODO: 직접 dom 들을 이동하는 것이 성능상 문제라면 먼저 모델 수준에서 배치를 완료한 후 한 번에 재배치시킨다.
         * TODO: 홀짝 구분된 스타일이 있을 때 재배치 후에 컬럼 기준으로 홀짝을 다시 적용해야 할까?
         */$_printAcross(doc,ctx,pts,band,cols,data,pages){function addHeaders(self){if(self._headerView.visible){let h=0;for(let c=0;c<cols;c++){const header=self._headerView.cloneNode();self._setPos(header,pts[c*2],y);page.appendChild(header);h=Math.max(h,header.offsetHeight);}y+=h;yLast=cy+=h;}}const rowCount=Math.min(band.endRowCount>=0?band.endRowCount:Number.MAX_SAFE_INTEGER,data?data.rowCount:0);const hHeader=this._headerView.offsetHeight;let cy=ctx.y;let cBottom=ctx.bodyBottom;let yLast=cy;// 마지막 컬럼의 현재 위치
    let y1=cy;// page 시작 위치
    let y=0;let nCol=Math.min(cols,rowCount);const crows=new Array(cols);const divs=new Array();const prevs=new Array();let page;// first page
    page=this.$_createPage(doc);pages.push(page);// first headers
    hHeader&&addHeaders(this);for(let c=0;c<nCol;c++){crows[c]=[];}while(band.pr<rowCount){// header
    if(y===0){hHeader&&addHeaders(this);}// rows
    let overflow=-1;let h=0;divs.length=0;for(let c=0;c<nCol&&band.pr<rowCount;c++){const x=pts[c*2];const w=pts[c*2+1]-x;const rowDiv=prevs.pop()||this.$_cloneRow(ctx,band,band.pr,w);divs.push(rowDiv);this._setPos(rowDiv,x,y);page.appendChild(rowDiv);const hDiv=rowDiv[T_HEIGHT]=rowDiv.offsetHeight;if(cy+hDiv>cBottom){overflow=c;break;}else {crows[c].push(rowDiv);band.setPrinting(ctx,band.pr+1);}if(c===cols-1)yLast+=hDiv;h=Math.max(h,hDiv);}if(overflow>=0){for(let div of divs){page.removeChild(div);prevs.push(div);}yLast=cy=ctx.bodyTop;y=0;overflow=-1;y1=ctx.bodyTop;page=this.$_createPage(doc);pages.push(page);}else {cy+=h;y+=h;prevs.length=0;}}// footer
    let nCol2=0;if(rowCount>0){for(let c=0;c<nCol;c++){if(crows[c].length)nCol2++;}}const footer=this._footerView.cloneNode();const attach=band.footer.attachToBody;const c=attach?Math.min(nCol2,cols-1):cols-1;this._setPos(footer,pts[c*2],(attach?yLast:cy)-y1);page.appendChild(footer);const hFooter=footer.offsetHeight;if(attach){cy=Math.max(cy,yLast+hFooter);}else {cy+=hFooter;}// footer가 넘치면
    if(cy>cBottom){page.removeChild(footer);page=this.$_createPage(doc);pages.push(page);this._setY(footer,0);page.appendChild(footer);cy=ctx.bodyTop+hFooter;}ctx.y=cy;ctx.h=ctx.bodyHeight-(cy-ctx.bodyTop);}/**
         * 아래로 내려간 후 다음 컬럼 처음으로.
         * 최대한 모든 컬럼에 골고루 배치.
         * header는 밴드가 포함된 모든 페이지의 모든 컬럼 시작 위치에 표시.
         * footer는 마지막 페이지 마지막 행이 속한 컬럼 아래.
         *
         * TODO: 직접 dom 들을 이동하는 것이 성능상 문제라면 먼저 모델 수준에서 배치를 완료한 후 한 번에 재배치시킨다.
         * TODO: 홀짝 구분된 스타일이 있을 때 재배치 후에 컬럼 기준으로 홀짝을 다시 적용해야 할까?
         */$_printDown(doc,ctx,pts,band,cols,data,pages){function addHeaders(self){for(let c=0;c<cols;c++){cys[c]=cy;crows[c]=[];}hHeader=0;if(self._headerView.visible){// header는 컬럼 수 만큼
    for(let c=0;c<cols;c++){const header=self._headerView.cloneNode();self._setPos(header,pts[c*2],y);page.appendChild(header);hHeader=Math.max(hHeader,header.offsetHeight);}y+=hHeader;cy+=hHeader;}}let cy=ctx.y;let cBottom=ctx.bodyBottom;let y1=cy;let y=0;const rowCount=Math.min(band.endRowCount>=0?band.endRowCount:Number.MAX_SAFE_INTEGER,data?data.rowCount:0);let nCol=Math.min(cols,rowCount);const cys=new Array(cols);const crows=new Array(cols);let hHeader=0;let prevRow;let page;// first page
    page=this.$_createPage(doc);pages.push(page);// first headers
    addHeaders(this);// rows
    do{for(let c=0;c<cols;c++){const x=pts[c*2];const w=pts[c*2+1]-x;// headers
    if(y===0){if(c===0){addHeaders(this);}else {y+=hHeader;cy+=hHeader;}}// rows
    while(band.pr<rowCount){const rowDiv=prevRow||this.$_cloneRow(ctx,band,band.pr,w);prevRow=null;this._setPos(rowDiv,x,y);page.appendChild(rowDiv);rowDiv[T_HEIGHT]=rowDiv.offsetHeight;const h=rowDiv[T_HEIGHT];y+=h;cy+=h;cys[c]=cy;crows[c].push(rowDiv);if(cy>cBottom){page.removeChild(rowDiv);prevRow=rowDiv;crows[c].pop();y=0;if(c==cols-1){page=this.$_createPage(doc);pages.push(page);y1=ctx.bodyTop;}else {y1=pages.length>1?ctx.bodyTop:ctx.y;}cy=y1;break;// 다음 컬럼으로
    }else {band.setPrinting(ctx,band.pr+1);}}}}while(band.pr<rowCount);let nCol2=0;// 각 컬럼의 높이를 최대한 맞춘다.
    // 전체 pixel 높이를 기준으로 등분한 후 맞춘다.
    // (개수로 맞춰가는 알고리즘 구현 필요?)
    if(rowCount>1){let hAll=0;for(let c=0;c<crows.length;c++){for(let r=0;r<crows[c].length;r++){hAll+=crows[c][r][T_HEIGHT];}}const heights=new Array(nCol);let hCol=Math.round(hAll/nCol);// 첫번째 컬럼부터 hCol 이상 해당되는 행들을 다음 컬럼으로 넘긴다.
    for(let c=0;c<nCol-1;c++){let rows=crows[c];let r=0;let h=0;let h2;while(r<rows.length){h+=h2=rows[r][T_HEIGHT];if(h>hCol){h-=h2;break;}else {r++;}}heights[c]=h;// 다음 컬럼 윗쪽으로 이동.
    const rows2=crows[c+1];let r2=0;while(r<rows.length){const div=rows.splice(r,1)[0];rows2.splice(r2++,0,div);}// 다음 컬럼 행들 위치 조정
    let y=hHeader;for(let i=0;i<rows2.length;i++){this._setPos(rows2[i],pts[(c+1)*2],y);y+=rows2[i][T_HEIGHT];}}heights[cols-1]=0;for(let i=0;i<crows[cols-1].length;i++){heights[cols-1]+=crows[cols-1][i][T_HEIGHT];}// 앞쪽 컬럼들의 높이가 더 높도록 재배치한다.
    // TODO: 두 번 호출하지 않는 방법?
    for(let i=0;i<2;i++){(()=>{for(let i=nCol-1;i>0;i--){while(heights[i]>heights[i-1]){const rows1=crows[i];const rows2=crows[i-1];// 첫번째 행을 이전 컬럼의 마지막 행으로 이동
    const div=rows1.shift();const h=div[T_HEIGHT];let y=hHeader;for(let r=0;r<rows1.length;r++){this._setY(rows1[r],y);y+=rows1[r][T_HEIGHT];}heights[i]-=h;rows2.push(div);this._setX(div,pts[(i-1)*2]);this._setY(div,heights[i-1]+hHeader);heights[i-1]+=h;}}})();}// cys 재계산
    for(let c=0;c<nCol;c++){let rows=crows[c];cys[c]=y1+hHeader;if(rows.length>0){nCol2=c+1;for(let r=0;r<rows.length;r++){cys[c]+=rows[r][T_HEIGHT];}}}}else {for(let c=0;c<cols;c++){cys[c]=y1+hHeader;}nCol2=rowCount;if(nCol2)cys[0]+=crows[0][0][T_HEIGHT];}// footer
    const footer=this._footerView.cloneNode();const attach=band.footer.attachToBody;const c=attach?Math.min(nCol2,cols-1):cols-1;const yLast=attach?cys[c]:0;cy=cys[0];for(let c=1;c<nCol;c++){cy=Math.max(cy,cys[c]);}this._setPos(footer,pts[c*2],(attach?yLast:cy)-y1);page.appendChild(footer);const hFooter=footer.offsetHeight;if(attach){cy=Math.max(cy,yLast+hFooter);}else {cy+=hFooter;}// footer가 넘치면
    if(cy>cBottom){page.removeChild(footer);page=this.$_createPage(doc);pages.push(page);this._setY(footer,y=0);page.appendChild(footer);cy=ctx.bodyTop+hFooter;}ctx.y=cy;ctx.h=ctx.bodyHeight-(cy-ctx.bodyTop);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    SimpleBandElement.HEADER_CLASS='rr-band-header';SimpleBandElement.FOOTER_CLASS='rr-band-footer';SimpleBandElement.ROW_CLASS='rr-band-rowtemplate';////////////////////////////////////////////////////////////////////////////////
    /** @internal */class TableBodyLine{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(trows,row,nRow){this._rows=[];for(let i=0;i<nRow;i++){this._rows.push(trows[row+i]);}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get count(){return this._rows.length;}get height(){if(isNaN(this._height)){this._height=0;for(let tr of this._rows){this._height+=tr.offsetHeight;}}return this._height;}get group(){return this._rows[0][T_GROUP];}get isGroup(){return !!this._rows[0][T_GROUP];}get row(){return this._rows[0][BAND_ROW_INDEX];}get isRow(){return this._rows[0][BAND_ROW_TYPE]===BAND_ROW;}get isGroupHeader(){return this._rows[0][BAND_ROW_TYPE]===BAND_GROUP_HEADER;}get isGroupFooter(){return this._rows[0][BAND_ROW_TYPE]===BAND_GROUP_FOOTER;}get first(){return this._rows[0];}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    get(index){return this._rows[index];}getCell(r,c){return this._rows[r].cells[c];}appendTo(target){for(let tr of this._rows){const h=parseFloat(tr.style.height);//tr.offsetHeight;
    target.appendChild(tr);if(!isNaN(h)){tr.style.height=h+'px';}else {tr.style.height=tr.offsetHeight+'px';}}}insertTo(body){const rows=this._rows;let prev=body.children[0];for(let i=rows.length-1;i>=0;i--){const tr=rows[i];const h=parseFloat(tr.style.height);//tr.offsetHeight;
    if(!isNaN(h)){tr.style.height=h+'px';}else {tr.style.height=tr.offsetHeight+'px';}body.insertBefore(tr,prev);prev=tr;}}detach(){for(let i=this._rows.length-1;i>=0;i--){Utils.detach(this._rows[i]);}}makeBlank(row,col){const td=this._rows[row].cells[col];Utils.remove(td.firstChild.firstChild);}hide(row,col){const td=this._rows[row].cells[col];td.style.display='none';}clone(){const trows=this._rows.map(tr=>tr.cloneNode(true));const rows=new TableBodyLine(trows,0,trows.length);return rows;}}/** @internal */class TableDummyLine extends TableBodyLine{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(trows,row,nRow){super(trows,row,nRow);this._rows.forEach(tr=>{tr[BAND_ROW_TYPE]=BAND_DUMMY;const cells=tr.cells;const len=cells.length;if(len>0){for(let i=0;i<len;i++){Utils.clearChildren(cells[i]);}cells[0].innerHTML='&#160;';}});}}/** @internal */class TableBandCellElement extends TableCellElementBase{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,table,model){super(doc,table,model,'tableBandCellView');}}/** @internal */class TableBandSectionElement extends TableElement{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model,name,styleName){super(doc,model,name);this.styleName=styleName;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return '';}_getCssSelector(){return this.styleName+' rr-group-element';}_needDesignBox(){return true;}// protected _getModelHeight(model: ReportItem, height: number): number {
    //     return NaN;
    // }
    _createCellElement(doc,cell){return new TableBandCellElement(doc,this,cell);}_doMeasure(ctx,dom,hintWidth,hintHeight){const sz=super._doMeasure(ctx,dom,hintWidth,hintHeight);//sz.height = Math.max(10, sz.height); // 임시로...
    return sz;}_doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz){if(this.childCount>0){this._applyBorders(dom,sz);}else if(!ctx.printing){if(!this.model.height&&this.model.designHeight>0){sz.height=Math.max(sz.height,this.model.designHeight);}if(!this.model.width&&this.model.designWidth>0){sz.width=Math.max(sz.width,this.model.designWidth);}}super._doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz);}}class TableBandHeaderElement extends TableBandSectionElement{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _setTableStyles(table){super._setTableStyles(table);table.style.setProperty("height","100%","important");}_setRowStyles(tr,row){super._setRowStyles(tr,row);Utils.extend(tr.style,this.model.styles);}}class TableBandFooterElement extends TableBandSectionElement{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _setTableStyles(table){super._setTableStyles(table);table.style.setProperty("height","100%","important");}_setRowStyles(tr,row){super._setRowStyles(tr,row);Utils.extend(tr.style,this.model.styles);}}class TableBandDataRowElement extends TableBandSectionElement{//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    applyCellStyles(ctx,band,tr,trow,rowStyles){function extend(css,props,prevs){Object.assign(css,props);// 해당 셀에 적용된 style들을 누적시킨다.
    for(const p in props)prevs.push(p);}const model=this.model;const tds=tr.cells;for(let i=0;i<tds.length;i++){const td=tds[i];const cell=model.getCell(trow,td.cellIndex);const css=td.style;let prevs=cell['$_prevStyles'];if(prevs){for(let p of prevs){css[p]='';// css.removeProperty()는 'background-color'로 전달해야 한다.
    }}else {prevs=cell['$_prevStyles']=[];}this._styles&&extend(css,this._styles,prevs);rowStyles&&extend(css,rowStyles,prevs);// cell styles - tableElement._prepareCellStyles()를 통해 이미 설정된 상태이지만 
    // rowStyle보다 우선해야 하므로...
    const cb=cell.styleCallback;let styles=cell.styles;if(styles){extend(css,styles,prevs);}if(cb){try{const styles=cb(ctx,cell,ctx.row);if(styles){extend(css,styles,prevs);}}catch(err){console.error('CellStyleCallback Error',err);}}}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _setTableStyles(table){super._setTableStyles(table);table.style.setProperty("height","100%","important");}// TODO: 여기에서 기본 행 style이 지정되고, body에서 행별 style을 지정하게 한다.
    _setRowStyles(tr,row){super._setRowStyles(tr,row);// row 스타일을 tr이 아니라 td들에 설정한다!
    //Utils.extend(tr.style, this.model.styles);
    this._styles={...this.model.styles};}}/** @internal */class TableBandBodyElement extends TableBandSectionElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,'tableBandBodyView','rr-tableband-body');//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._bandRowCount=0;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get bandRowCount(){return this._bandRowCount;}get endMessageView(){return this._endMessageView;}get endRowView(){return this._endRowView;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    addEndRowMessage(band,template){// TODO: cloneNode(false)?  
    const tr=template.$_trows[0].cloneNode(true);const line=new TableDummyLine([tr],0,1);const td=tr.cells[0];td.colSpan=tr.cells.length;td.textContent=band.endRowMessage;td.className=BandElement.END_ROW_MESSAGE_CLASS;td.style.textAlign='center';tr.classList.add(TableBandElement.ROW_CLASS);return line;}printRows(ctx,data,groups,template,w,subRows){function addRow(r){let force=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let blank=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;const needBuild=force||r>0;const trows=template.$_trows;const cnt=trows.length;const trs=[];band.setPrinting(ctx,r);for(let i=0;i<cnt;i++){const trow=trows[i];const tr=needBuild?template.$_cloneRow(trow):trow.cloneNode(true);let rowStyles;if(scb){rowStyles=scb(ctx,model,r,undefined);// row 스타일을 tr이 아니라 td들에 설정한다! TableBandDataRowElement 참조.
    // if (styles) {
    //     Utils.extend(tr.style, styles); 
    // }
    }tr[BAND_ROW_TYPE]=BAND_ROW;tr[BAND_ROW_INDEX]=r;tr[BAND_ROW_BLANK]=blank;//template.replaceCellDoms(trow, tr);
    template.setCellDoms(trow,tr);template.applyCellStyles(ctx,band,tr,i,rowStyles);trs.push(tr);}// 첫번째 행은 이미 meausre/layout이 실행된 상태다.
    // TODO: canvas가 포함된 경우 (예, qrcode) 문제가 발생한다.
    // if (needBuild) {
    ctx.bandSummaryRuntime=band.summaryRuntime;ctx.bandSummaryRuntime.setGroup(null);template['$_refreshRowCells'](ctx,w,h,true);// }
    for(let i=0;i<cnt;i++){const tr=trs[i];//template.replaceCellDoms(tr, trows[i]);
    template.unsetCellDoms(tr,trows[i]);tr.classList.add(TableBandElement.ROW_CLASS);// for testing
    if(!isNaN(model.masterRow)){tr.dataset[BAND_MASTER]=String(model.masterRow);}blank==0&&tbody.appendChild(tr);}ctx.index++;return trs;}function addGroup(r,v,group,rowType){const grows=v.$_trows;const cnt=grows.length;const trs=[];for(let i=0;i<cnt;i++){const grow=grows[i];//const tr = grow.cloneNode(false) as HTMLTableRowElement;
    const tr=v.$_cloneRow(grow);tr[BAND_ROW_TYPE]=rowType;v.replaceCellDoms(grow,tr);v.applyGroupStyles(tr);trs.push(tr);}ctx.bandSummaryRuntime=band.summaryRuntime;ctx.bandSummaryRuntime.setGroup(group);band.setPrinting(ctx,r);v['$_refreshRowCells'](ctx,w,h,true);group.trows=cnt;for(let i=0;i<cnt;i++){trs[i][T_GROUP]=group;v.replaceCellDoms(trs[i],grows[i]);tbody.appendChild(trs[i]);}}if(subRows){this._bandRowCount=0;}else if(this._bandRowCount>0){// 한 번만 준비한다.
    return;}const model=this.model;const band=model.band;const detail=!!subRows;const tbody=this["_tbody"];const scb=model.styleCallback;const h=ctx.pageHeight;let rowCount=detail?subRows.length:data?data.rowCount:0;const saveCount=rowCount;if(band.maxRowCount>0){rowCount=Math.min(rowCount,band.maxRowCount);}const dc=band.getEndRowCount();if(!groups&&dc.endRowCount>0){if(!this._endRowView){// dummy row - 첫번째 data 행의 스타일에 맞춘다.
    const trs=addRow(0,false,1);this._endRowView=new TableDummyLine(trs,0,trs.length);//Utils.clearChildren(this._displayCountView);
    }// end message view
    if(band.endRowMessage){this._endMessageView=this.addEndRowMessage(band,template);}}if(rowCount===0&&!this._endRowView){return;}const printedRows=rowCount!==saveCount?rowCount:NaN;const saveRow=band.pr;ctx.index=0;if(groups){const fields=groups.map(g=>g.visible&&g.model.field).filter(f=>!!f);const rows=data.groupBy(fields,subRows);for(let i=0;i<rows.length;i++){const row=rows[i];if(Utils.isNumber(row)){// data row
    addRow(row);this._bandRowCount++;}else if(row['parent']){// group header
    const g=groups[row['level']-1];if(g.header&&g.header.visible){addGroup(row['row'],g.header,row,BAND_GROUP_HEADER);this._bandRowCount++;}}else {// group footer
    const g=groups[row['group']['level']-1];if(g.footer){if(g.footer.visible){addGroup(g['row'],g.footer,row['group'],BAND_GROUP_FOOTER);this._bandRowCount++;}// group header, footer 모두 visible이 false면 (병합가능하도록)가상 행 추가.
    // TODO: merged col이 존재할 때만.
    else if(!g.header.visible){const tr=this.doc.createElement('tr');tr.className=TableBandElement.DUMMY_GROUP_FOOTER;tbody.appendChild(tr);}}}}}else if(subRows){for(let i=0;i<rowCount;i++){addRow(subRows[i],true);this._bandRowCount++;}}else {for(let i=0;i<rowCount;i++){addRow(i);this._bandRowCount++;}}band.setPrinting(ctx,saveRow);return printedRows;}}class TableBandGroupSectionElement extends TableElement{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model,name){super(doc,model,name);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    applyGroupStyles(tr){Utils.extend(tr.style,this.model.styles);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _needDesignBox(){return true;}// protected _getModelHeight(model: ReportItem, height: number): number {
    //     return NaN;
    // }
    _createCellElement(doc,cell){return new TableBandCellElement(doc,this,cell);}_doMeasure(ctx,dom,hintWidth,hintHeight){const sz=super._doMeasure(ctx,dom,hintWidth,hintHeight);sz.height=Math.max(10,sz.height);// 임시로...
    return sz;}_doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz){if(this.childCount>0){this._applyBorders(dom,sz);}else if(!ctx.printing){if(!this.model.height&&this.model.designHeight>0){sz.height=Math.max(sz.height,this.model.designHeight);}if(!this.model.width&&this.model.designWidth>0){sz.width=Math.max(sz.width,this.model.designWidth);}}super._doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz);}}class TableBandGroupHeaderElement extends TableBandGroupSectionElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,'tableBandGroupHeader');}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-tableband-group-header  rr-group-element';}_setTableStyles(table){super._setTableStyles(table);table.style.setProperty("height","100%","important");}}class TableBandGroupFooterElement extends TableBandGroupSectionElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,'tableBandGroupFooter');}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-tableband-group-footer  rr-group-element';}_setTableStyles(table){super._setTableStyles(table);table.style.setProperty("height","100%","important");}}/** @internal */class TableBandGroupElement extends ReportGroupItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,'tableBandGroupView');this.headIndent=0;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get header(){return this._header;}get footer(){return this._footer;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-tableband-group rr-group-element';}_needDesignBox(){return true;}_doMeasure(ctx,dom,hintWidth,hintHeight){super._doMeasure(ctx,dom,hintWidth,hintHeight);const f=this.container.focusedItem;this._header=this.getChild(0);!ctx.printing&&(this._header['_masterView']=this._masterView);this._footer=this.getChild(1);!ctx.printing&&(this._footer['_masterView']=this._masterView);if(!ctx.printing&&!this._headerHead){this.addChild(this._headerHead=new SectionHeadView(this.doc,this.model.header,'GROUP HEADER','TableBand RowGroup Header'));this.addChild(this._footerHead=new SectionHeadView(this.doc,this.model.footer,'GROUP FOOTER','TableBand RowGroup Footer'));}let h=this._header.measuredHeight+this._footer.measuredHeight;if(!ctx.printing){let v=this._headerHead;let sz=v.measure(ctx,hintWidth,hintHeight);v.setSelected(f);h+=sz.height+2;v=this._footerHead;sz=v.measure(ctx,hintWidth,hintHeight);v.setSelected(f);h+=sz.height+2;}return Size.create(Math.max(this._header.measuredWidth,this._footer.measuredWidth),h);}_doLayoutContent(ctx){super._doLayoutContent(ctx);if(!ctx.printing){let y=0;let head=this._headerHead;head.applyMeasure();head.x=this.headIndent;head.y=y+2;y+=head.height+2;this._header.y=y;y+=this._header.height;head=this._footerHead;head.applyMeasure();head.x=this.headIndent;head.y=y+2;y+=head.height+2;this._footer.y=y;}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_setMasterView(view){this._masterView=view;}}class AutoMerger{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(band,mergeCells){this._lines=[];this._band=band;this._cells=mergeCells;}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static create(band,mergeCells){if(mergeCells&&mergeCells.length>0){return new AutoMerger(band,mergeCells);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    pushLine(line){if(line instanceof TableBodyLine){this._lines.push(line);}else {this.merge();}}popLine(){this._lines.pop();}merge(){function mergeCells(col,from,to){const span=to-from;if(span>1){const tdStart=lines[from].getCell(0,col);tdStart.rowSpan=span;const tableCell=tdStart.firstChild;const mxh=tableCell.style.maxHeight.replace('px','');tableCell.style.maxHeight=Number(mxh)*span+'px';for(let j=from+1;j<to;j++){lines[j].getCell(0,col).style.display='none';}}}const cells=this._cells;const lines=this._lines.length>1?this._lines:null;if(lines){// td 의 textContent로 하려면...
    // cells.forEach(cell => {
    //     const col = cell.col;
    //     let start = 0;
    //     let line = lines[0];
    //     let td = line.getCell(0, col);
    //     let prev = td.textContent;
    //     let i = 1;
    //     for (const n = lines.length; i < n; i++) {
    //         line = lines[i];
    //         td = line.getCell(0, col);
    //         const v = td.textContent;
    //         if (v !== prev) {
    //             mergeCells(col, start, i);
    //             start = i;
    //         }
    //         prev = v;
    //     }
    //     mergeCells(col, start, i);
    // })
    let data=this._band.dataObj;let dataRow=this._band.dataRow;cells.forEach(cell=>{var _a;const cellItem=dataRow.getCellItem(cell);const item=cellItem&&cellItem.item;const fld=item&&item.value;if(fld){const col=cell.col;const isDate=((_a=data.getFieldByName(fld))===null||_a===void 0?void 0:_a.dataType)==='datetime';let start=0;let line=lines[0];let row=line.row;let prev=data.getRowValue(row,fld);let i=1;if(isDate)prev=+prev;for(const n=lines.length;i<n;i++){line=lines[i];row=line.row;let v=data.getRowValue(row,fld);if(isDate)v=+v;if(v!==prev){mergeCells(col,start,i);start=i;}prev=v;}mergeCells(col,start,i);}});// clear
    this._lines=[];}}}class TableBandPrintInfo extends BandPrintInfo{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    isEnded(){return this.rows.length===0;}getRows(){return this.rows;}getNextPage(doc,ctx,width,parent){function createTable(y,w){if(needTable){const div=self.$_createContainer(doc,y,w);table=doc.createElement('table');tbody=doc.createElement('tbody');table.style.position='absolute';TableElement.setTableStyle(table);table.appendChild(bandView['_bodyView'].createColGroup(doc,width));table.appendChild(tbody);// tr 들이 offsetParent를 가질 수 있도록 미리 추가한다.
    // 대신 추가된 row가 하나도 없으면 나중에 제거한다.
    div.appendChild(table);page.appendChild(div);needTable=false;}}function mergeGroupLines(){if(groupLines){mergeCols.forEach(col=>{// TODO: 첫 셀의 colspan이 1보다 큰 경우!
    const cells=[];groupLines.forEach(line=>{for(let i=0;i<line.count;i++){cells.push(line.getCell(i,col));}});cells[0].rowSpan=cells.length;for(let i=1;i<cells.length;i++){cells[i].style.display='none';}});groupLines=null;}}function endPage(){self.rpp=rpp;self.erc=erc>0?erc:NaN;}const self=this;const bandView=this.bandView;let needTable=true;let page;let table;let tbody;const band=bandView.model;// ctx.band as TableBand;
    const level=band.bandLevel;// 최상위 master이면 0.  
    const rows=this.rows;const hSave=ctx.h;let hPage=ctx.h;const hLine=band.dataRow.rowCount;const mergeCols=this.groupViews&&band.dataRow.getMergedColumns();const{endRowCount,stopEndRow}=band.getEndRowCount(0);const bHeader=!band.prevHead&&(isNaN(band.rowIndex)||level===0&&!this.isBand(rows[0])||level>0&&band.repeatDetailHeader);let erc=this.erc;let rpp;let groupLines;if(isNaN(erc)){erc=endRowCount||0;}if(band.maxRowCount>0){this.setMaxCount(rows,band.maxRowCount);}if(bHeader||rows.length>0||erc>0){const cols=band.sectionCount;if(cols>1){const pts=this.ptsBand;const page=this._createPage(doc,parent);let cpages;width=pts[1]-pts[0];if(band.sectionLayout==BandSectionLayout.ACROSS_DOWN){cpages=this.$_getAcrossPages(doc,ctx,cols,width,page);}else {cpages=this.$_getDownPages(doc,ctx,cols,width,page);}for(let c=0;c<cols;c++){this._setX(cpages[c],pts[c*2]);}page[T_HEIGHT]=cpages[T_HEIGHT];return page;}const merger=!this.groupViews&&AutoMerger.create(band,band.dataRow.getMergedCells());const rowView=this.rowView;const footerView=this.footerView;const{rowsPerPage,breakRowsPerPage}=band.getRowsPerPage();let rowAdded=false;let bodyLine;const w2=rowView.measuredWidth;let y=0;let nRow=0;let startRow;let prevRow;let h;// page
    page=this._createPage(doc,parent);page.style.left=Math.floor((width-w2)/2)+'px';page.style.width=w2+'px';width=w2;rpp=this.rpp;if(isNaN(rpp)||!breakRowsPerPage||rpp<=0){rpp=rowsPerPage;}// table
    createTable(y,w2);// header
    if(bHeader){if(isNaN(band.rowIndex)||level===0&&!this.isBand(rows[0])||level>0&&band.repeatDetailHeader){h=this.$_addHeader(tbody,hPage);if(isNaN(h)){ctx.h=0;return null;}hPage-=h;y+=h;band.prevHead=true;}}// group header
    // group 상태이고 페이지 첫 행이 group headre가 아니면 먼저 그룹 헤더를 표시한다.
    if(hPage>0&&this.prevGroup&&rows.length>0&&(this.isRow(rows[0])||!this.isGroupHeader(rows[0]))){bodyLine=this.prevGroup.clone();bodyLine.appendTo(tbody);if(hPage>=bodyLine.height){hPage-=bodyLine.height;band.prevHead=false;}else {bodyLine.detach();hPage=0;// 더 이상 진행할 필요가 없게 한다.
    }}if(isNaN(band.rowIndex)){band.rowIndex=0;}// rows
    while(hPage>0&&rows.length>0){const row=rows.shift();if(row===DUMMY_FOOTER){mergeGroupLines();continue;}if(rpp<=0&&!this.isBand(row)){rows.unshift(row);ctx.h=0;break;}const trows=rowView.$_trows;const cnt=trows.length;let trs;bodyLine=null;createTable(y,w2);if(this.isRow(row)){if(isNaN(startRow))startRow=row;bodyLine=this.bandView.printRow(ctx,row);if(bodyLine){trs=bodyLine['_rows'];prevRow=row;if(row>startRow){TableBandElement.checkBlanks(band,row,bodyLine);}//const footerMerged = false;// group && group.footer.merged; // TODO: v2.0
    if(mergeCols){//if (!bodyLine.isGroup || (footerMerged && trs[0][BAND_ROW_TYPE] === BAND_GROUP_FOOTER)) {
    if(!groupLines)groupLines=[];groupLines.push(bodyLine);//}
    }merger&&merger.pushLine(bodyLine);}}else if(this.isBand(row)){// detail
    const p=doc.createElement('div');Utils.extend(p.style,{position:'absolute',top:y+'px',width:w2+'px'});page.appendChild(p);const saveIndex=ctx.index;ctx.h=hPage;row.getNextPage(doc,ctx,width,p);ctx.index=saveIndex;ctx.h=hSave;h=0;if(row instanceof TableBandPrintInfo){const tbl=p.getElementsByClassName('rr-table')[0];if(tbl){h=tbl.offsetHeight;}}else {const childs=p.firstElementChild.children;for(let i=0;i<childs.length;i++){h+=childs[i].offsetHeight;}}needTable=true;table=null;}else {// group
    const g=row;const group=g.group;const v=g.view;const grows=v.$_trows;const cnt=grows.length;// prepareAsync 중에 마자믹 group (header/footer)view들을 제외하고 groupElement에서 remove된 상태다.
    if(!v.parent){this.groupViews[0].addChild(v);}if(this.isGroupFooter(g)&&this.prevLine){// 저번 페이지에 출력하지 못했던 group footer를 재출력한다.
    trs=this.prevLine;this.prevLine=null;}else {trs=[];mergeGroupLines();for(let i=0;i<cnt;i++){const grow=grows[i];const tr=v.$_cloneRow(grow);tr[BAND_ROW_TYPE]=g.rowType;v.replaceCellDoms(grow,tr);v.applyGroupStyles(tr);trs.push(tr);}band.summaryRuntime.setRows(null,-1);ctx.bandSummaryRuntime=band.summaryRuntime;ctx.bandSummaryRuntime.setGroup(group);band.setPrinting(ctx,g.row);v['$_refreshRowCells'](ctx,width,h,true);group.trows=cnt;for(let i=0;i<cnt;i++){trs[i][T_GROUP]=group;v.replaceCellDoms(trs[i],grows[i]);}}bodyLine=new TableBodyLine(trs,0,cnt);if(g.rowType===BAND_GROUP_HEADER){this.prevGroup=bodyLine;}}if(!(row instanceof BandPrintInfo)){if(bodyLine){bodyLine.appendTo(tbody);h=bodyLine.height;}else {h=0;}}if(hPage>=h){rowAdded=true;hPage-=h;y+=h;if(typeof row==='number'){band.rowIndex++;ctx.index++;rpp--;nRow++;}else if(row instanceof BandPrintInfo){if(row.getRows().length===0&&isNaN(row.erc)){row.band.prevIndex=0;row.band.rowIndex=NaN;}else {row.band.prevIndex=ctx.index;rows.unshift(row);if(band.repeatMasterRow){rows.unshift(prevRow);this.rpp=NaN;band.rowIndex--;}ctx.h=0;break;}}band.prevHead=false;}else if(trs){// printRow()가 void를 리턴해서 빈 행이었을 수 있다.
    for(let i=0;i<cnt;i++){tbody.removeChild(trs[i]);}rows.unshift(row);// callback들을 다시 호출하지 않도록 다음 페이지에 재사용해야 한다.
    if(this.isGroupFooter(row)){this.prevLine=trs;}break;}}// 데이터행이 없으면 header/groupheader를 출력하지 않는다.
    if(table&&!rowAdded&&erc===0&&(!bHeader||!(band.alwaysHeader&&footerView&&footerView.height>0))){page.firstElementChild.removeChild(table);hPage=hSave;}else {if(nRow>0){mergeGroupLines();merger&&merger.merge();}// footer
    if(rows.length===0){erc-=nRow;while(hPage>0&&erc>0){let h;let ev=this.endMessageView;if(ev){ev.appendTo(tbody);h=ev.height;if(hPage>h){hPage-=h;erc--;this.endMessageView=null;}else {ev.detach();break;}}else {ev=this.endRowView.clone();ev.appendTo(tbody);h=ev.height;if(hPage>h){hPage-=h;erc--;}else {ev.detach();break;}}}if(stopEndRow){erc=0;}if(erc===0){if(footerView){if(hPage>=footerView.height){createTable(y,w2);hPage-=this.$_addFooter(ctx,tbody,w2);}}}}else if(level>0&&band.repeatDetailFooter){if(footerView){const trows=tbody.rows;const deletes=[];h=footerView.height;while(hPage<h&&trows.length>0&&trows[trows.length-1].classList.contains(TableBandElement.ROW_CLASS)){const trs=[];for(let i=0;i<hLine;i++){const tr=trows[trows.length-1];hPage+=tr.offsetHeight;tr.remove();trs.push(tr);}rows.unshift(--prevRow);deletes.push({trs:trs,row:prevRow});ctx.index--;band.rowIndex--;}// footer 높이가 이전 데이터행들의 높이 합보다 높아서 footer가 출력되지 못할 수도 있다.
    if(hPage>=h){hPage-=this.$_addFooter(ctx,tbody,w2);this.footerView=footerView;// $_addFooter에서 undefined로 설정한다.
    }// 위에서 삭제했던 행들을 다시 돌려 놓는다.
    else {while(deletes.length>0){const{trs,row}=deletes.pop();rows.push(row);trs.forEach(tr=>{tbody.appendChild(tr);hPage-=tr.offsetHeight;});ctx.index++;}}}}}if(rows.length>0||erc>0){ctx.h=0;// 호출하는 쪾에서 페이지 하단에 더 추가하지 못하도록 한다.
    }page[T_HEIGHT]=hSave-hPage;endPage();return page;}else {return null;}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_createContainer(doc,y,w){const div=doc.createElement('div');Utils.extend(div.style,{position:'absolute',top:y+'px',width:w+'px'});return div;}$_createTable(doc,page,y,w){const div=this.$_createContainer(doc,y,w);const table=doc.createElement('table');const tbody=doc.createElement('tbody');table.style.position='absolute';TableElement.setTableStyle(table);table.appendChild(this.bandView['_bodyView'].createColGroup(doc,w));table.appendChild(tbody);// tr 들이 offsetParent를 가질 수 있도록 미리 추가한다.
    // 대신 추가된 row가 하나도 없으면 나중에 제거한다.
    div.appendChild(table);page.appendChild(div);return table;}$_addFooter(ctx,tbody,w){const band=this.band;const view=this.footerView;if(band.bandLevel>0){// footer
    if(view.visible=view.model.visible){view.resetStyleName();this.band.clearSummary();ctx.bandSummaryRuntime=this.band.summaryRuntime.setGroup(null).setRows(this.detailRows,this.masterRow).setRowCount(this.detailRows.length);view.measure(ctx,w,ctx.pageHeight);view.resize(view.measuredWidth,view.measuredHeight);view.setPrintStyles();view.layoutContent(ctx);}}const footers=new TableLine(view.dom.firstChild);footers.appendTo(tbody,TableBandElement.HEADER_CLASS);return footers.height;}$_addHeader(tbody,hPage){if(this.headerView){const headers=new TableLine(this.headerView.dom.firstChild);headers.appendTo(tbody,TableBandElement.HEADER_CLASS);const h=headers.height;if(hPage>=h){return h;}else {headers.remove();return NaN;}}return 0;}$_getAcrossPages(doc,ctx,cols,width,parent){const rows=this.rows;// 현재, group, detail을 지원하지 않는다.
    const pages=[];const tbodies=[];if(rows.length>0){const hSave=ctx.h;let hPage=ctx.h;let y=0;let h=0;// page & headers
    for(let i=0;i<cols;i++){const page=this._createPage(doc,parent);const table=this.$_createTable(doc,page,y,width);const tbody=table.tBodies[0];pages.push(page);tbodies.push(tbody);const h2=this.$_addHeader(tbody,hPage);if(isNaN(h2)){ctx.h=0;return null;}h=Math.max(h,h2);}hPage-=h;y+=h;// rows
    while(hPage>0&&rows.length>0){const lines=[];const rows2=[];let h=0;let line;for(let c=0;c<cols&&rows.length>0;c++){const row=rows.shift();rows2.push(row);line=this.bandView.printRow(ctx,row);if(line){line.appendTo(tbodies[c]);lines.push(line);const hRows=line.height;h=Math.max(h,hRows);}}if(hPage>=h){hPage-=h;y+=h;}else {for(let c=0;c<cols&&rows.length>0;c++){rows.unshift(rows2.pop());lines.pop().detach();}break;}}// footer
    if(rows.length===0){if(this.footerView){if(hPage>=this.footerView.height){hPage-=this.$_addFooter(ctx,tbodies[cols-1],0);}}}else {ctx.h=0;// 호출하는 쪾에서 페이지 하단에 더 추가하지 못하도록 한다.
    }pages[T_HEIGHT]=hSave-hPage;}return pages;}$_getDownPages(doc,ctx,cols,width,parent){const rows=this.rows;// 현재, group, detail을 지원하지 않는다.
    const pages=[];const tbodies=[];if(rows.length>0){const hSave=ctx.h;let hPage=ctx.h;const colHeights=[];const colLines=[];let y=0;let h=0;// page & headers
    for(let i=0;i<cols;i++){const page=this._createPage(doc,parent);const table=this.$_createTable(doc,page,y,width);const tbody=table.tBodies[0];pages.push(page);tbodies.push(tbody);const h2=this.$_addHeader(tbody,hPage);if(isNaN(h2)){ctx.h=0;return null;}h=Math.max(h,h2);}hPage-=h;y+=h;const ySave=y;const pageSave=hPage;for(let c=0;c<cols;c++){const lines=[];let h=0;let line;while(hPage>0&&rows.length>0){const row=rows.shift();line=this.bandView.printRow(ctx,row);if(line){line.appendTo(tbodies[c]);lines.push(line);h=line.height;if(hPage>=h){hPage-=h;y+=h;}else {line.detach();rows.unshift(row);break;}}}colHeights.push(pageSave-hPage);colLines.push(lines);y=ySave;hPage=pageSave;}// 마지막 페이지에서 각 컬럼의 높이를 최대한 맞춘다.
    if(rows.length==0){// 1. 전체 pixel 높이를 기준으로 등분한 후 맞춘다.
    const hAll=colHeights.reduce((prev,curr)=>prev+curr);const hCol=Math.round(hAll/cols);// 첫번째 컬럼부터 hCol 이상 해당되는 행들을 다음 컬럼으로 넘긴다.
    for(let c=0;c<cols-1;c++){const lines=colLines[c];let r=0;let h=0;let h2;while(r<lines.length){h+=h2=lines[r].height;if(h>hCol){h-=h2;break;}r++;}colHeights[c]=h;const lines2=colLines[c+1];while(r<lines.length){const line=lines.splice(r,1)[0];line.insertTo(tbodies[c+1]);lines2.unshift(line);colHeights[c+1]+=line.height;}}}hPage=pageSave-colHeights[cols-1];// footer
    if(rows.length===0){if(this.footerView){if(hPage>=this.footerView.height){hPage-=this.$_addFooter(ctx,tbodies[cols-1],0);}}}else {ctx.h=0;// 호출하는 쪾에서 페이지 하단에 더 추가하지 못하도록 한다.
    }pages[T_HEIGHT]=hSave-hPage;// hSave - hMax;// hPage;
    }return pages;}}const DUMMY_FOOTER=-999;/**
     * @internal
     *
     * 1. 한 행(복수 tr 가능)은 페이지를 넘어갈 수 없다. 현재 상태에서 넘치면 다음 페이지에 출력한다.
     **/class TableBandElement extends BandElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"TableBandView");this._groupViews=[];this._rowGap=2;this._colSpans=[];this._colWidth=0;this._grouped=false;this._masterRow=-1;this._printedRowCount=NaN;this._headers=0;this.addChild(this._headerView=new TableBandHeaderElement(doc,model&&model.header,"bandHeaderView","rr-tableband-header"));this.addChild(this._rowView=new TableBandDataRowElement(doc,model&&model.dataRow,"bandRowTemplateView","rr-tableband-row-template"));this.addChild(this._bodyView=new TableBandBodyElement(doc,model&&model.dataRow));this._bodyView.visible=false;this.addChild(this._footerView=new TableBandFooterElement(doc,model&&model.footer,"bandFooterView","rr-tableband-footer"));this.addChild(this._detailView=new BandCollectionElement(doc,model&&model.detail));this._lines=[this._headerView,this._rowView,this._footerView,this._detailView];this._rowContainer=doc.createElement('div');this['_dom'].appendChild(this._rowContainer);}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static checkBlanks(band,r,rows){const blankItems=band.dataRow.blankItems;blankItems&&blankItems.forEach(item=>{if(band.dataRow.canBlank(item,r)){rows.makeBlank(item.row,item.col);}});}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // ITable
    //-------------------------------------------------------------------------
    get columns(){return this.model.columns;}get colCount(){return this.model.colCount;}getColumn(index){return this.model.getColumn(index);}//-------------------------------------------------------------------------
    // BandView
    //-------------------------------------------------------------------------
    /**
         * ctx.h, ctx.y를 재설정해서 리턴해야 한다.
         *
         * acrossDown: 각 컬럼의 같은 행 시작점이 동일하다.
         * downAcross: 각 컬럼의 행 높이가 다를 수 있다.
         */printBand(doc,ctx,w,pages,rows){let masterRow=arguments.length>5&&arguments[5]!==undefined?arguments[5]:-1;const band=this.model;const data=band.dataObj;const wBand=band.getWidth(w);const xBand=band.getLeft(w);let x=xBand||0;if(!isNaN(wBand)){if(isNaN(xBand)){x=Math.floor((w-wBand)/2);}w=wBand;}const cols=band.sectionCount;const single=cols<2;const pts=single?null:band.getColPoints(w,x);if(!rows){band.prepareIndices(ctx);}this._masterRow=masterRow;band.dataRow.masterRow=masterRow>=0?masterRow:NaN;// for testing
    band.summaryRuntime.setRows(rows,masterRow);this._colWidth=band.getColWidth(w);if(pts){w=this._colWidth;}ctx.band=band;// detail인 경우에도 한 번만 measure한다. => chart 등을 위해 매번 실행한다.
    if(isNaN(this._rowView.measuredHeight)){// header
    let view=this._headerView;if(view.visible=view.model.visible){view.resetStyleName();view.measure(ctx,w,ctx.pageHeight);view.resize(w,view.measuredHeight);view.x=x;view.setPrintStyles();view.layoutContent(ctx);}// rows
    view=this._rowView;view.visible=view.model.visible;if(!this._printingRows){view.resetStyleName();view.measure(ctx,w,ctx.pageHeight);view.resize(w,view.measuredHeight);view.x=x;view.setPrintStyles();view.layoutContent(ctx);this._bodyView.visible=true;ctx.bandSummaryRuntime=band.summaryRuntime.setGroup(null).setRows(null,this._masterRow);const desingData=band.designData;const groupViews=this.$_getGroupViews(ctx,band.groups.getValidGroups(desingData),w,ctx.pageHeight);this._printedRowCount=this._bodyView.printRows(ctx,data,groupViews,this._rowView,w,rows);this._printingRows=this._bodyView.$_trowsCopy;this._grouped=!!groupViews;}// footer
    view=this._footerView;if(view.visible=view.model.visible){view.resetStyleName();ctx.bandSummaryRuntime=band.summaryRuntime.setGroup(null).setRows(null,this._masterRow);view.measure(ctx,w,ctx.pageHeight);view.resize(view.measuredWidth,view.measuredHeight);view.x=x;view.setPrintStyles();view.layoutContent(ctx);}}else if(!this._printingRows){// detail의 첫번째 table 이후 datarow들을 다시 생성한다.
    // header
    let view=this._headerView;if(view.visible=view.model.visible){view.resetStyleName();view.measure(ctx,w,ctx.pageHeight);view.resize(w,view.measuredHeight);view.x=x;view.setPrintStyles();view.layoutContent(ctx);}ctx.bandSummaryRuntime=band.summaryRuntime.setGroup(null).setRows(null,this._masterRow);const desingData=band.designData;const groupViews=this.$_getGroupViews(ctx,band.groups.getValidGroups(desingData),w,ctx.pageHeight);this._printedRowCount=this._bodyView.printRows(ctx,data,groupViews,this._rowView,w,rows);this._printingRows=this._bodyView.$_trowsCopy;// footer
    view=this._footerView;if(view.visible=view.model.visible){view.resetStyleName();ctx.bandSummaryRuntime=band.summaryRuntime.setGroup(null).setRows(null,this._masterRow);view.measure(ctx,w,ctx.pageHeight);view.resize(view.measuredWidth,view.measuredHeight);view.x=x;view.setPrintStyles();view.layoutContent(ctx);}}// print
    const trows=this._printingRows;const rowCount=this._bodyView.bandRowCount;if(!this._tempRow){this._tempRow=trows[0];}if(single){this.$_printLinear(doc,ctx,band,data,x,w,trows,pages);}else {if(band.sectionLayout==BandSectionLayout.ACROSS_DOWN){this.$_printAcross(doc,ctx,band,pts,cols,w,trows,rowCount,pages);}else {this.$_printDown(doc,ctx,band,pts,cols,w,trows,rowCount,pages);}}// detail이면
    if(rows){this._printingRows=null;}// 디테일인 경우 이 함수가 여러번 호출된다.
    // this._headerView.visible = false;
    // this._footerView.visible = false;
    // this._rowView.visible = false;
    // Utils.detach(this._headerView['_dom']);
    // Utils.detach(this._footerView['_dom']);
    // Utils.detach(this._rowView['_dom']);
    return rowCount;}prepareAsync(doc,ctx,w,subRows,masterRow){function prepareDetail(r,rows){for(let i=0;i<details.count;i++){const detailBand=details.get(i);const detailView=detailViews.getChild(i);// detailBand.pageNo = 0;
    detailBand.masterValues=band.getValues(ctx,r,detailBand['_masterFlds']);detailBand.detailRows=detailBand.rowsPerMaster;const detailRows=detailBand.getNextDetailRows(ctx)||[];if(detailRows.length>0){const info=detailView.prepareAsync(doc,ctx,w,detailRows,r);detailBand['_pr']+=detailRows.length;info.masterValues=band.getValues(ctx,r,detailBand['_masterFlds']);rows.push(info);// detailBand['_pr'] += detailRows.length;
    // info.getRows()?.forEach(drow => {
    //     rows.push({
    //         view: detailView,
    //         row: drow
    //     })
    // })
    }}}function prepareRows(){const rowCount=data?data.rowCount:0;const rows=[];if(groupViews){const fields=groupViews.map(g=>g.visible&&g.model.field).filter(f=>!!f);const grows=data.groupBy(fields,subRows);grows.forEach(row=>{if(Utils.isNumber(row)){// data row
    rows.push(row);details&&prepareDetail(row,rows);}else if(row['parent']){// group header
    const g=groupViews[row['level']-1];if(g.header&&g.header.visible){rows.push({view:g.header,row:row['row'],rowType:BAND_GROUP_HEADER,group:row});}}else {// group footer
    const g=groupViews[row['group']['level']-1];if(g.footer){if(g.footer.visible){rows.push({view:g.footer,row:row['row'],rowType:BAND_GROUP_FOOTER,group:row['group']});}// group header, footer 모두 visible이 false면 (병합가능하도록)가상 행 추가.
    // TODO: merged col이 존재할 때만.
    else if(!g.header.visible){rows.push(DUMMY_FOOTER);}}}});}else if(subRows){for(const r of subRows){rows.push(r);details&&prepareDetail(r,rows);}}else {for(let r=0;r<rowCount;r++){rows.push(r);details&&prepareDetail(r,rows);}}return rows;}const band=this.model;const level=band.bandLevel;const details=band.detail&&band.detail.count>0?band.detail:null;const detailViews=this._detailView;const data=band.dataObj;const desingData=band.designData;const groupViews=this.$_getGroupViews(ctx,band.groups.getValidGroups(desingData),w,ctx.pageHeight);const wBand=band.getWidth(w);const xBand=band.getLeft(w);let x=xBand||0;let view;if(details){for(let i=0;i<details.count;i++){const dband=details.get(i);dband['_pr']=0;// getNextDetailRows()에서 필요.
    }}if(!isNaN(wBand)){if(isNaN(xBand)){x=Math.floor((w-wBand)/2);}w=wBand;}const cols=band.sectionCount;const single=cols<2;const pts=single?null:band.getColPoints(w,x);// this._masterRow = masterRow;
    // band.dataRow.masterRow = masterRow >= 0 ? masterRow : NaN; // for testing
    // band.summaryRuntime.setRows(subRows, masterRow);
    this._colWidth=band.getColWidth(w);if(pts){w=this._colWidth;}ctx.band=band;if(level===0){band.prepareIndices(ctx);}if(isNaN(this._rowView.measuredHeight)){// NOTE: chart 구성할 때 사용한다
    ctx.detailRows=subRows?subRows.slice(0):void 0;// header
    view=this._headerView;if(view.visible=view.model.visible){view.resetStyleName();view.measure(ctx,w,ctx.pageHeight);view.resize(w,view.measuredHeight);view.x=x;view.setPrintStyles();view.layoutContent(ctx);}// rows
    view=this._rowView;view.visible=view.model.visible;if(!this._printingRows){view.resetStyleName();view.measure(ctx,w,ctx.pageHeight);view.resize(w,view.measuredHeight);view.x=x;view.setPrintStyles();view.layoutContent(ctx);// this._bodyView.visible = true;
    // const desingData = band.designData;
    // const groupViews = this.$_getGroupViews(ctx, band.groups.getValidGroups(desingData), w, ctx.pageHeight);
    // this._printedRowCount = this._bodyView.printRows(ctx, data, groupViews, this._rowView, w, rows);
    // this._printingRows = this._bodyView.$_trowsCopy;
    // this._grouped = !!groupViews;
    }// footer
    view=this._footerView;if(view.visible=view.model.visible){view.resetStyleName();ctx.bandSummaryRuntime=band.summaryRuntime.setGroup(null).setRows(subRows,this._masterRow);view.measure(ctx,w,ctx.pageHeight);view.resize(view.measuredWidth,view.measuredHeight);view.x=x;view.setPrintStyles();view.layoutContent(ctx);}}const info=new TableBandPrintInfo();info.band=band;info.bandView=this;info.headerView=this._headerView.visible?this._headerView:null;info.footerView=this._footerView.visible?this._footerView:null;info.rowView=this._rowView;info.groupViews=groupViews;info.rows=prepareRows()||[];info.xBand=x;info.wBand=w;info.ptsBand=pts;info.masterRow=masterRow;info.detailRows=subRows?subRows.slice(0):null;if(!groupViews&&band.getEndRowCount().endRowCount>0){// 아래 printRow 중에 다른 값으로 설정된다. getNextDetailRows() 에서 연속 사용하므로 유지해야 한다.
    const savePr=band['_pr'];// end row view
    const line=this.printRow(ctx,0);if(line){const trs=line['_rows'];info.endRowView=new TableDummyLine(trs,0,trs.length);// end message view
    if(band.endRowMessage){info.endMessageView=this._bodyView.addEndRowMessage(band,this._rowView);}}band['_pr']=savePr;}return info;}addMasterRow(page,headerView,rowView,x,y){const table=this.$_addTable(this.doc,page,x,y);const lHeader=new TableLine(headerView);lHeader.appendTo(table.tBodies[0],TableBandElement.HEADER_CLASS);const h=lHeader.height;const lRow=rowView.clone();lRow.appendTo(table.tBodies[0]);return h+lRow.height;}printRow(ctx,row){const rowView=this._rowView;if(!rowView.visible)return void 0;const band=this.model;const scb=band.dataRow.styleCallback;const hLine=band.dataRow.rowCount;const width=rowView.measuredWidth;const trows=rowView.$_trows;const cnt=trows.length;const trs=[];band.setPrinting(ctx,row);for(let i=0;i<cnt;i++){const trow=trows[i];const tr=rowView.$_cloneRow(trow);let rowStyles;if(scb){rowStyles=scb(ctx,band.dataRow,row,undefined);}tr[BAND_ROW_TYPE]=BAND_ROW;tr[BAND_ROW_INDEX]=ctx.row;// tr[BAND_ROW_BLANK] = blank;
    rowView.setCellDoms(trow,tr);rowView.applyCellStyles(ctx,band,tr,i,rowStyles);trs.push(tr);}ctx.bandSummaryRuntime=band.summaryRuntime;ctx.bandSummaryRuntime.setGroup(null);rowView['$_refreshRowCells'](ctx,width,100000,true);for(let i=0;i<cnt;i++){const tr=trs[i];rowView.unsetCellDoms(tr,trows[i]);tr.classList.add(TableBandElement.ROW_CLASS);}let bodyLine;// bodyLine = prevLine;
    // if (!bodyLine) {
    if(trs.length>0){bodyLine=new TableBodyLine(trs,0,hLine);// } else if (endMessageView) {
    //     bodyLine = endMessageView;
    // } else {
    //     bodyLine = dummyLine = endRowView.clone();
    //     dummies.push(bodyLine);
    }// }
    return bodyLine;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** headerView */get headerView(){return this._headerView;}/** footerView */get footerView(){return this._footerView;}/** dataRowView */get dataRowView(){return this._rowView;}get groupCount(){return this._groupViews.length;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getGroupView(index){return this._groupViews[index];}indexOfGroup(group){let i=-1;for(let v of this._groupViews){if(v.visible){i++;if(v.model===group)return i;}}return i;}getRowPoints(){const pts=[];pts.push(this._headerView.y,this.headerView.height);pts.push(this._rowView.y,this._rowView.height);pts.push(this._footerView.y,this._footerView.height);for(let v of this._groupViews){v.visible&&pts.push(v.y,v.height);}return pts;}getColPoints(){return this._rowView.getColPoints();}getColRect(col){let count=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;const r=this._rowView.getColRect(col,count);r.height=this.height;return r;}getTableView(table){for(let v of [this._headerView,this._footerView,this._rowView]){if(v.model===table)return v;}for(let v of this._groupViews){if(v.header.model===table)return v.header;if(v.footer.model===table)return v.footer;}}getTableViews(){const tables=[this._headerView,this._footerView,this._rowView];for(let v of this._groupViews){tables.push(v.header,v.footer);}return tables;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return 'table band';}_getCssSelector(){return "rr-table-band rr-group-element";}_needDesignBox(){return true;}get rowView(){return this._rowView;}$_prepareHeads(doc){// 모델이 변경되면 band view 자체가 다시 생성되고 아래를 실행한다.
    if(!this._headViews){const m=this.model;this._headViews={};this.addChild(this._headViews[this.hash]=new SectionHeadView(doc,m,'TABLE BAND','TableBand','rr-band-head'));this.addChild(this._headViews[this._headerView.hash]=new SectionHeadView(doc,m.header,'HEADER','SimpleBand Header'));this.addChild(this._headViews[this._footerView.hash]=new SectionHeadView(doc,m.footer,'FOOTER','TableBand Footer'));this.addChild(this._headViews[this._rowView.hash]=new SectionHeadView(doc,m.dataRow,'DATA ROW','TableBand Data Row'));for(let v of this._groupViews){this.addChild(this._headViews[v.hash]=new SectionHeadView(doc,v.model,'GROUP-'+(v.model.index+1),'TableBand RowGroup'));}this.addChild(this._headViews[this._detailView.hash]=new SectionHeadView(doc,m.detail,'DETAILS','TableBand Details'));}}_doMeasure(ctx,dom,hintWidth,hintHeight){var _a;const printing=ctx.printing;const band=this.model;let w=0;let h=0;let sz;if(!printing){this._headerView['_masterView']=this._bodyView['_masterView']=this._footerView['_masterView']=this._rowView;}const wBand=band.getWidth(hintWidth);if(!isNaN(wBand)){hintWidth=wBand;}hintWidth=band.getColWidth(hintWidth);// row template
    let view=this._rowView;if(!printing){// printing && view.resetStyleName();
    sz=view.measure(ctx,hintWidth,hintHeight);view.visible=view.model.visible;if(view.visible){w=Math.max(w,sz.width);h+=sz.height+this._rowGap;}}// header
    view=this._headerView;if(!printing&&(view.visible=view.model.visible)){// printing && view.resetStyleName();
    sz=view.measure(ctx,hintWidth,hintHeight);w=Math.max(w,sz.width);h+=sz.height+this._rowGap;}// footer
    // 출력 중이면 data 행들 후에 처리해야 한다.
    view=this._footerView;if(!printing&&(view.visible=view.model.visible)){// printing && view.resetStyleName();
    ctx.bandSummaryRuntime=band.summaryRuntime;sz=view.measure(ctx,hintWidth,hintHeight);w=Math.max(w,sz.width);h+=sz.height;}// groups
    this.$_prepareGroupViews(band,this.doc);if(!printing){h+=this.$_measureGroupViews(band,ctx,hintWidth,hintHeight);}// detail
    view=this._detailView;if(view.visible=view.model.visible){sz=view.measure(ctx,hintWidth,hintHeight);w=Math.max(w,sz.width);h+=sz.height;}// head views
    if(!printing){this.$_prepareHeads(this.doc);if(this._headViews){// testing 중에 container 밖일 수 있다.
    const f=(_a=this.container)===null||_a===void 0?void 0:_a.focusedItem;for(let p in this._headViews){const v=this._headViews[p];sz=v.measure(ctx,hintWidth,hintHeight);w=Math.max(w,sz.width);h+=sz.height+2;v.setSelected(f);}}}return new Size(w,h);}_doLayoutContent(ctx){const m=this.model;const visHead=!!this._headViews;const cols=m.sectionCount;const w=m.getColWidth(this.width);const xHead=2+m.bandLevel*8;const headIndent=8;let y=0;let view;let head;let lines=ctx.printing?null:this._lines=[];// band head
    if(visHead){head=this._headViews[this.hash];head.setBounds(xHead,y+2,head.measuredWidth,head.measuredHeight);y+=head.height+2;}// header
    view=this._headerView;if(visHead){head=this._headViews[view.hash];head.setBounds(xHead+headIndent,y+2,head.measuredWidth,head.measuredHeight);y+=head.height+2;}if(view.visible){view.setBounds((w-view.measuredWidth)/2,y,w,view.measuredHeight);view.setPrintStyles();y+=view.height+this._rowGap;view.layoutContent(ctx);}lines===null||lines===void 0?void 0:lines.push(view);// data row
    view=this._rowView;if(visHead){head=this._headViews[view.hash];head.setBounds(xHead+headIndent,y+2,head.measuredWidth,head.measuredHeight);y+=head.height+2;}if(view.visible){view.setBounds((w-view.measuredWidth)/2,y,w,view.measuredHeight);view.setPrintStyles();y+=view.height+this._rowGap;view.layoutContent(ctx);}lines===null||lines===void 0?void 0:lines.push(view);// footer
    view=this._footerView;if(visHead){head=this._headViews[view.hash];head.setBounds(xHead+headIndent,y+2,head.measuredWidth,head.measuredHeight);y+=head.height+2;}if(view.visible){view.setBounds((w-view.measuredWidth)/2,y,w,view.measuredHeight);view.setPrintStyles();view.layoutContent(ctx);y+=view.height;}lines===null||lines===void 0?void 0:lines.push(view);// groups
    for(let v of this._groupViews){if(visHead){head=this._headViews[v.hash];head.setBounds(xHead+headIndent,y+2,head.measuredWidth,head.measuredHeight);y+=head.height+2;}v.setBounds((w-v.measuredWidth)/2,y,w,v.measuredHeight);v.setPrintStyles();v.headIndent=xHead+headIndent*2;v.layoutContent(ctx);y+=v.height;lines===null||lines===void 0?void 0:lines.push(v);}// detail
    view=this._detailView;if(visHead){head=this._headViews[view.hash];head.setBounds(xHead+headIndent,y+2,head.measuredWidth,head.measuredHeight);y+=head.height+2;}if(view.visible){view.setBounds((w-view.measuredWidth)/2,y,view.measuredWidth,view.measuredHeight);y+=view.height;view.setPrintStyles();view.layoutContent(ctx);}lines===null||lines===void 0?void 0:lines.push(view);// columns
    if(this._designView){this.$_layoutCols(this.doc,cols);}}$_getHeadHeight(){return this._headViews[this.hash].height+1;}_setDesignContent(empty,designView){const h=this.$_getHeadHeight();designView.style.top=h+'px';designView.style.height=this.height-h+'px';if(empty){super._setDesignContent(empty,designView);}designView.style.backgroundColor='white';}getLines(){return this._lines;}_isPrintDataRow(){return this.model.pr<this._bodyView.bandRowCount;}_isPrintEndRow(){return this.model.endRowCount>0;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_prepareGroupViews(band,doc){const groups=band.groups;const count=groups.count;const views=this._groupViews;while(views.length>count){const view=views.pop();view.dispose();this.removeChild(view);}while(views.length<count){const view=new TableBandGroupElement(doc,null);this.addChild(view);views.push(view);view['$_setMasterView'](this._rowView);}}$_measureGroupViews(band,ctx,hintWidth,hintHeight){const groups=band.groups;const views=this._groupViews;let h=0;for(let i=0;i<groups.count;i++){views[i].model=groups.get(i);h+=views[i].measure(ctx,hintWidth,hintHeight).height;}return h;}$_getGroupViews(ctx,groups,w,h){if(groups){const views=[];for(let g of groups){const v=this._groupViews[g.index];v.model=g;ctx.noValueCallback=true;try{v.measure(ctx,w,h);}finally{ctx.noValueCallback=false;}// #287 - 헤더 푸터가 표시되지 않아도 그룹 단위 셀 병합할 수 있어야 한다.
    //if (v.header.hasCells || v.footer.hasCells) {
    views.push(v);//}
    }return views.length?views:[];// NOTE: null을 리턴하면 호출하는 쪽에서 grouping이 안된 줄 안다.
    }}$_layoutCols(doc,count){const spans=this._colSpans;while(spans.length<count-1){const span=doc.createElement('span');span.className='rr-band-col';spans.push(span);this._designView.appendChild(span);}const gap=this.model.sectionGap;const w=this.model.getColWidth(this.width);const h=this.height-this.$_getHeadHeight();const y=0;let x=w+gap;for(let i=0;i<count-1;i++){const span=spans[i];delete span.dataset.hidden;span.textContent=i+2+'';Utils.setBounds(span,x,y,w,h);x+=w+gap;}for(let i=count-1;i<spans.length;i++){spans[i].dataset.hidden='1';}}$_createPage(doc){const page=doc.createElement('div');page.style.position='relative';// page 위치는 container에서...
    this._rowContainer.appendChild(page);return page;}$_createTableContainer(doc,x,y){const div=doc.createElement('div');Utils.extend(div.style,{position:'absolute',left:x+'px',top:y+'px',width:this._colWidth+'px'});return div;}$_createTable(doc){const table=doc.createElement('table');const tbody=doc.createElement('tbody');table.appendChild(this._bodyView.createColGroup(doc,this._colWidth));table.appendChild(tbody);table.style.position='absolute';TableElement.setTableStyle(table);return table;}$_cloneEmptyRow(trow){const tr=trow.cloneNode(true);const cells=tr.cells;tr.style.height='0px';for(let i=0;i<cells.length;i++){const cell=cells[i];const css=cell.style;cell.colSpan=1;cell.rowSpan=1;cell.innerHTML='';css.height='0';css.border='none';css.borderRight='1px solid black';// report table td border가 1px이서서 이렇게 하지 않으면 너비가 틀어질 수 있다.
    css.margin='0';css.padding='0';}return tr;}$_addTable(doc,page,x,y){const div=this.$_createTableContainer(doc,x,y);const table=this.$_createTable(doc);div.dataset[T_MODEL]=this.model.shash;div.appendChild(table);page.appendChild(div);return table;}$_printLinear(doc,ctx,band,data,x,w,trows,pages){function mergeGroupLines(){if(groupLines){mergeCols.forEach(col=>{// TODO: 첫 셀의 colspan이 1보다 큰 경우!
    const cells=[];groupLines.forEach(line=>{for(let i=0;i<line.count;i++){cells.push(line.getCell(i,col));}});cells[0].rowSpan=cells.length;for(let i=1;i<cells.length;i++){cells[i].style.display='none';}});groupLines=null;}}function addTable(self,page){table=self.$_addTable(doc,page,x,y);tbody=table.tBodies[0];needTable=false;}function addPage(self,initY){let noHeader=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;merger&&merger.merge();mergeGroupLines();const page=self.$_createPage(doc);ctx.yBand=y=0;if(initY){cy=ctx.y=ctx.bodyTop;}// 초기화 or maxRowsPerPage or rowsPerPage가 끝난 경우
    if(isNaN(rpp)||!breakRowsPerPage||rpp<=0){rpp=rowsPerPage;}// dummy 출력 중이면 출력 중단이거나 나머지 출력
    if(dummies.length);else {nRow=0;}// repeatMasterRow in detail band
    if(level>0&&band.pageNo>0){if(band.master.repeatMasterRow&&!nRow){reapeatMaster(self,page);}}addTable(self,page);// repeatMasterRow in detail band
    if(level>0&&band.pageNo>0){if(!noHeader&&band.repeatDetailHeader){addHeader(self);}}pages.push(page);initY&&band.pageNo++;return page;}function reapeatMaster(self,page){const masterView=self.rowView['masterBandView'];const headerView=self.rowView['masterHeaderView'];const rowView=self.rowView['masterRowView'];const h=masterView.addMasterRow(page,headerView,rowView,rowView.x,y);y+=h;cy+=h;}function addHeader(self){if(level>0){self._headers++;// console.log('HEADERS', self._headers);
    // if (self._headers === 3) debugger;
    }if(self._headerView.visible){headers=new TableLine(self._headerView['_dom'].firstChild);// TODO: this._headerView.measuredHeight가 적용돼야 한다!
    const h=headers.height;if(h>0){headers.appendTo(tbody,TableBandElement.HEADER_CLASS);y+=h;cy+=h;band.prevHead=true;}}}function addFooter(self){merger&&merger.merge();// detail인 경우 summary runtime에 group을 설정해서 다시 render한다.
    if(rows||!isNaN(self._printedRowCount)){const view=self._footerView;view.resetStyleName();band.clearSummary();ctx.bandSummaryRuntime=band.summaryRuntime.setRows(rows,self._masterRow).setRowCount(self._printedRowCount);view.measure(ctx,w,ctx.pageHeight);view.resize(view.measuredWidth,view.measuredHeight);view.setPrintStyles();view.layoutContent(ctx);}const footerLine=new TableLine(self._footerView['_dom'].firstChild);const hFooter=footerLine.height;if(hFooter){if(cy+hFooter>cBottom){// 새 페이지 추가. 
    // repeat header인 경우라도, footer만 있으므로 이 때는 header가 추가되지 않도록 한다.   
    page=addPage(self,true,!band.alwaysHeader);// footer 셀의 colSpan이 적용될 수 있게 빈 행을 하나 추가한다.
    tbody.appendChild(self.$_cloneEmptyRow(self._tempRow));}else if(needTable){table=self.$_addTable(doc,page,0,y);tbody=table.tBodies[0];needTable=false;}footerLine.appendTo(tbody,TableBandElement.FOOTER_CLASS);y+=hFooter;cy+=hFooter;// 페이지를 넘어가면, 
    // 더미들을 출력한 상태고 다음페이지에 더미를 출력할 필요가 없다면
    // 페이지를 추가하기 전에 더미들을 먼저 삭제해 본다.
    if(cy>cBottom&&dummies.length&&stopEndRow){debugger;}// 그래도 페이지를 넘어가면, 취소하고 새 페이지에 다시 추가한다.
    if(cy>cBottom){debugger;footerLine.remove();if(tbody.rows.length===0){page.removeChild(table);}// 새 페이지 추가   
    page=addPage(self,true);// footer 셀의 colSpan이 적용될 수 있게 빈 행을 하나 추가한다.
    tbody.appendChild(self.$_cloneEmptyRow(self._tempRow));footerLine.appendTo(tbody,TableBandElement.FOOTER_CLASS);y+=hFooter;cy+=hFooter;}}ctx.yBand=y;// TODO: 이것을 빼면 흐트러진다.
    ctx.y=cy;ctx.h=ctx.bodyHeight-(cy-ctx.bodyTop);}const rowCount=data?data.rowCount:0;const level=band.bandLevel;// 최상위 master이면 0.  
    const details=band.detail;const grouped=this._grouped;const mergeCols=grouped&&band.dataRow.getMergedColumns();const merger=!grouped&&AutoMerger.create(band,band.dataRow.getMergedCells());const{rowsPerPage,breakRowsPerPage}=band.getRowsPerPage();const hLine=band.dataRow.rowCount;const startRow=band.pr;const rows=level>0?[]:null;const endRowView=this._bodyView.endRowView;let endMessageView=this._bodyView.endMessageView;const{endRowCount,stopEndRow}=band.getEndRowCount(endMessageView?1:0);const dummies=[];let dummyLine;let nRow=0;let cy=ctx.y;let cBottom=ctx.bodyBottom;let y=ctx.yBand;let needTable=false;let page;let headers;let table;let tbody;let rpp;let bodyLine;let prevLine;let prevGroup;let groupLines;let h=0;let footed=false;// console.log('SATRT', startRow)
    // first page
    if(level===0){// detail이 아니면 첫 페이지를 생성한다.
    page=addPage(this,false);}else {page=pages[pages.length-1];band.pageNo++;rpp=rowsPerPage;addTable(this,page);}// first header
    addHeader(this);// rows
    // table 일관성(border, span,...)을 유지하기 위해 header와 footer를 div에서 꺼내서 body table에 추가한다.
    // 또, row가 없는 경우에도 header나 footer는 출력되도록 한다.
    while(trows.length>0||endRowCount>0&&nRow<endRowCount){const g=trows[0]&&trows[0][T_GROUP];// const group = g && band.groups.get(g.level - 1);
    const bandPr=band.pr;const bHead=!band.prevHead&&y===ctx.yBand&&(level===0||band.pageNo===0);if(bHead){// 페이지 첫 부분이 아니면서 페이지를 넘어가면 페이지 추가
    if(cy+h>cBottom&&y>0){page=addPage(this,true);}else if(needTable){addTable(this,page);}if(cy===ctx.bodyTop&&(level===0||nRow===0)){addHeader(this);}}else if(needTable){addTable(this,page);}// 그룹일 때
    if(trows.length>0&&trows[0].className===TableBandElement.DUMMY_GROUP_FOOTER){trows.splice(0,1);mergeGroupLines();continue;}// data row
    bodyLine=prevLine;if(!bodyLine){if(trows.length>0){if(g){bodyLine=new TableBodyLine(trows,0,g.trows);}else {bodyLine=new TableBodyLine(trows,0,hLine);}}else if(endMessageView){bodyLine=endMessageView;}else {bodyLine=dummyLine=endRowView.clone();dummies.push(bodyLine);}}// group 상태이고 페이지 첫 행이 data row면 먼저 그룹 헤더를 표시한다.
    if(bHead&&prevGroup&&bodyLine.first[BAND_ROW_TYPE]!==BAND_GROUP_HEADER){bodyLine=prevGroup.clone();bodyLine.appendTo(tbody);y+=h=bodyLine.height;cy+=h;rpp--;band.prevHead=false;continue;}if(this.rowView.visible){bodyLine.appendTo(tbody);h=bodyLine.height;y+=h;cy+=h;prevLine=null;}// page overflow 됐다면 (단, 최상위 master의 첫 행은 무조건 출력)
    if(cy>cBottom&&(band.prevHead||level>0||bandPr>0)){bodyLine.detach();dummies.pop();prevLine=bodyLine;if(nRow>0)band.prevHead=false;// 더미 채우는 중이고 다음 페이지로 넘길 필요 없다면 중지.
    if(dummies.length&&stopEndRow){// 중지 시킨다.
    nRow=endRowCount;}// 새 페이지 추가
    else {page=addPage(this,true);}}else {const footerMerged=false;// group && group.footer.merged; // TODO: v2.0
    if(bodyLine.isGroup&&!footerMerged){mergeGroupLines();}let tr;if(trows.length){tr=trows.splice(0,bodyLine.count)[0];}else if(endMessageView){tr=endMessageView.first;}else {tr=dummyLine.first;}const bRow=tr[BAND_ROW_TYPE]===BAND_ROW;if(rows&&bRow){rows.push(bandPr);}if(bandPr>0&&!bodyLine.isGroup&&bRow){TableBandElement.checkBlanks(band,bandPr,bodyLine);}if(!tr[BAND_ROW_BLANK]&&bRow){const pr=bodyLine.isGroup?bandPr:bandPr+1;band.setPrinting(ctx,pr,bodyLine.count);}if(grouped&&tr[BAND_ROW_TYPE]===BAND_GROUP_HEADER){prevGroup=bodyLine;}if(mergeCols){if(!bodyLine.isGroup||footerMerged){if(!groupLines)groupLines=[];groupLines.push(bodyLine);}}if(bRow||endMessageView&&tr===endMessageView.first||dummyLine&&tr===dummyLine.first){rpp--;nRow++;if(endMessageView&&tr===endMessageView.first){endMessageView=null;}}merger&&merger.pushLine(bodyLine);// // (0보다 큰 값으로 설정된 경우)rowsPerPage를 초과했다면
    // footed = false;
    // if (rpp <= 0 && (trows.length > 0 || endRowCount <= 0 || nRow === endRowCount) && band.pr < rowCount) {
    //     if (level > 0 && band.repeatDetailFooter) {
    //         addFooter(this);
    //         footed = true;
    //     }
    //     if (trows.length > 0 || footed) {
    //         if (bandPr < rowCount) {
    //             page = addPage(this, true);
    //         }
    //     }
    // }
    // if (bodyLine.isGroupFooter && footerMerged) {
    //     mergeGroupLines();
    // }
    const nPage=pages.length;// detail bands
    if(bRow&&details.count>0){ctx.row=0;ctx.y=cy;ctx.h=ctx.bodyHeight-(cy-ctx.bodyTop);ctx.yBand=y;for(let i=0;i<details.count;i++){const view=this._detailView.getChild(i);const detailBand=view.model;view.rowView['masterBandView']=this;view.rowView['masterHeaderView']=this._headerView.dom.firstChild;view.rowView['masterRowView']=bodyLine;detailBand.pageNo=0;detailBand.masterValues=band.getValues(ctx,bandPr,detailBand['_masterFlds']);detailBand.detailRows=detailBand.rowsPerMaster;// keyFields가 설정되지 않은 경우, 이 개수만큼 출력된다.
    const nextRows=ctx.detailRows=detailBand.getNextDetailRows(ctx)||[];view.printBand(doc,ctx,w,pages,nextRows,bandPr);}page=pages[pages.length-1];needTable=ctx.y!==cy;cy=ctx.y;y=ctx.yBand;}// (0보다 큰 값으로 설정된 경우)rowsPerPage를 초과했다면
    footed=false;if(rpp<=0&&(trows.length>0||endRowCount<=0||nRow===endRowCount)&&band.pr<rowCount){if(level>0&&band.repeatDetailFooter){addFooter(this);footed=true;}if(trows.length>0||footed){if(bandPr<rowCount){if(pages.length===nPage||footed){page=addPage(this,true,trows.length===0);}}}}if(bodyLine.isGroupFooter&&footerMerged){mergeGroupLines();}}}// footer
    if(level==0||band.pr>startRow){if(!footed){mergeGroupLines();addFooter(this);footed=true;if(level>0&&rowsPerPage<Number.MAX_SAFE_INTEGER&&band.pr<rowCount){const page=this.$_createPage(doc);ctx.yBand=y=0;ctx.y=ctx.bodyTop;cy=ctx.bodyTop;pages.push(page);addTable(this,page);}}}else if(headers){// detail이고 한 행도 출력될 수 없다면 header도 출력하지 않는다...
    const h=headers.height;headers.remove();y-=h;cy-=h;}if(!footed){ctx.yBand=y;ctx.y=cy;ctx.h=ctx.bodyHeight-(cy-ctx.bodyTop);}}/**
         * 왼쪽에서 오른쪽으로 먼저 끝에서 첫번째 컬럼으로 다시.
         * 최대한 모든 컬럼에 골고루 배치.
         * header는 밴드가 포함된 모든 페이지의 모든 컬럼 시작 위치에 표시.
         * footer는 마지막 페이지 마지막 행이 속한 컬럼 아래.
         *
         * 모든 컬럼의 같은 행 높이가 같게 표시된다.
         * 컬럼들 중 하나라도 페이지를 넘치면 중단하고 다음 페이지로 넘어간다.
         */$_printAcross(doc,ctx,band,colPts,cols,w,trows,rowCount,pages){function setTables(self){tbodies.length=0;for(let c=0;c<cols;c++){table=self.$_addTable(doc,page,colPts[c*2],y);tbodies.push(table.tBodies[0]);}}function addHeaders(self){let maxHeight=0;for(let c=0;c<cols;c++){const headers=new TableLine(self._headerView['_dom'].firstChild);maxHeight=Math.max(maxHeight,headers.height);if(maxHeight)headers.appendTo(tbodies[c],TableBandElement.HEADER_CLASS);}y+=maxHeight;yLast=cy+=maxHeight;}const footers=new TableLine(this._footerView['_dom'].firstChild);const hFooter=footers.height;const bandDataRowCount=band.dataRow.rowCount;// dataRow의 행 Count
    let nCol=rowCount===0?cols:Math.min(cols,rowCount);let cy=ctx.y;let cBottom=ctx.bodyBottom;let yLast=cy;// 마지막 컬럼의 현재 위치
    let y1=cy;let y=0;const colLines=new Array(cols);const lines=new Array();const prevLines=new Array();let page;let table;let tbody;const tbodies=[];let line;const endRowView=this._bodyView.endRowView;let endMessageView=this._bodyView.endMessageView;const{endRowCount}=band.getEndRowCount(0);const dummies=[];let dummyLine;let currentPagePrintedCount=0;const endPrintCount=rowCount<endRowCount?endRowCount:rowCount;// first page & headers
    page=this.$_createPage(doc);pages.push(page);setTables(this);addHeaders(this);// table 일관성(border, span,...)을 유지하기 위해 header와 footer를 div에서 꺼내서 body table에 추가한다.
    // 또, row가 없는 경우에도 header나 footer는 출력되도록 한다.
    for(let c=0;c<nCol;c++){colLines[c]=[];}while(this._isPrintDataRow()||this._isPrintEndRow()){if(currentPagePrintedCount>=endPrintCount)break;// header
    if(y===0)addHeaders(this);// rows
    let overflow=-1;let h=0;lines.length=0;for(let c=0;c<nCol;c++){if(currentPagePrintedCount>=endPrintCount)break;if(band.pr<rowCount){line=prevLines.pop()||new TableBodyLine(trows,band.tr,bandDataRowCount);}else if(endMessageView&&dummies.length===0){dummyLine=endMessageView;dummies.push(dummyLine);line=dummyLine;}else {dummyLine=endRowView.clone();dummies.push(dummyLine);line=dummyLine;}line.appendTo(tbodies[c]);lines.push(line);const hRows=line.height;if(cy+hRows>cBottom){overflow=c;break;}else {currentPagePrintedCount++;colLines[c].push(line);band.setPrinting(ctx,band.pr+1,line.count);}if(c===cols-1)yLast+=hRows;h=Math.max(h,hRows);}if(overflow>=0){for(let rows of lines){rows.detach();prevLines.push(rows);}dummies.pop();if(dummies.length===0)currentPagePrintedCount=0;yLast=cy=ctx.bodyTop;y=0;overflow=-1;y1=ctx.bodyTop;page=this.$_createPage(doc);pages.push(page);setTables(this);}else {cy+=h;y+=h;prevLines.length=0;}}// footer
    let nCol2=0;if(rowCount>0){for(let c=0;c<nCol;c++){if(colLines[c].length)nCol2++;}}const attach=band.footer.attachToBody;const c=attach?Math.min(nCol2,cols-1):cols-1;if(attach){tbody=tbodies[c];}if(!tbody){tbody=this.$_addTable(doc,page,colPts[c*2],cy-y1).tBodies[0];}hFooter&&footers.appendTo(tbody,TableBandElement.FOOTER_CLASS);if(attach){cy=Math.max(cy,yLast+hFooter);}else {cy+=hFooter;}// footer가 넘치면
    if(cy>cBottom){footers.remove();page=this.$_createPage(doc);pages.push(page);setTables(this);tbody=tbodies[c];hFooter&&footers.appendTo(tbody,TableBandElement.FOOTER_CLASS);cy=ctx.bodyTop+hFooter;}ctx.y=cy;ctx.h=ctx.bodyHeight-(cy-ctx.bodyTop);}/**
         * 아래로 내려간 후 다음 컬럼 처음으로.
         * 최대한 모든 컬럼에 골고루 배치.
         * header는 밴드가 포함된 모든 페이지의 모든 컬럼 시작 위치에 표시.
         * footer는 마지막 페이지 마지막 행이 속한 컬럼 아래.
         *
         * 각 컬럼의 헤더 높이는 최대 높이로 동일하게 맞춘다.
         * 하지만, 각 컬럼의 행 높이들이 다를 수 있다.
         */$_printDown(doc,ctx,band,colPts,cols,w,trows,rowCount,pages){function addHeaders(self){headerHeight=0;for(let c=0;c<cols;c++){cys[c]=cy;colLines[c]=[];tbody=self.$_addTable(doc,page,colPts[c*2],y).tBodies[0];tbodies[c]=tbody;const headers=new TableLine(self._headerView['_dom'].firstChild);headerHeight=Math.max(headerHeight,headers.height);if(headerHeight)headers.appendTo(tbody,TableBandElement.HEADER_CLASS);}y+=headerHeight;cy+=headerHeight;}const footers=new TableLine(this._footerView['_dom'].firstChild);const hFooter=footers.height;let nCol=rowCount===0?cols:Math.min(cols,rowCount);let cy=ctx.y;let cBottom=ctx.bodyBottom;let y1=cy;let y=0;const cys=new Array(cols);const colLines=new Array(cols);let bodyLine;let prevLines;let headerHeight=0;let page;let tbody;const tbodies=new Array(cols);const dataRowCount=band.dataRow.rowCount;const endRowView=this._bodyView.endRowView;let endMessageView=this._bodyView.endMessageView;const{endRowCount}=band.getEndRowCount(0);const dummies=[];let dummyLine;let currentPagePrintedCount=0;const endPrintCount=rowCount<endRowCount?endRowCount:rowCount;// first page & headers
    page=this.$_createPage(doc);pages.push(page);addHeaders(this);// table 일관성(border, span,...)을 유지하기 위해
    // header와 footer를 div에서 꺼내서 body table에 추가한다.
    do{if(currentPagePrintedCount>=endPrintCount)break;for(let c=0;c<cols;c++){// header
    if(y===0){if(c===0){addHeaders(this);}else {y+=headerHeight;cy+=headerHeight;}}// rows
    while(this._isPrintDataRow()||this._isPrintEndRow()){if(currentPagePrintedCount>=endPrintCount)break;bodyLine=prevLines;if(band.pr<rowCount){bodyLine=new TableBodyLine(trows,band.tr,dataRowCount);}else if(endMessageView&&dummies.length===0){dummyLine=endMessageView;dummies.push(dummyLine);bodyLine=dummyLine;}else {dummyLine=endRowView.clone();dummies.push(dummyLine);bodyLine=dummyLine;}prevLines=null;tbody=tbodies[c];bodyLine.appendTo(tbody);const h=bodyLine.height;y+=h;cy+=h;cys[c]=cy;colLines[c].push(bodyLine);// page를 넘어간다면
    if(cy>cBottom){bodyLine.detach();prevLines=bodyLine;colLines[c].pop();dummies.pop();y=0;// 마지막 컬럼이면
    if(c===cols-1){if(dummies.length===0)currentPagePrintedCount=0;page=this.$_createPage(doc);pages.push(page);// tbody = this.$_addTable(doc, page, pts[c * 2], y).tBodies[0];
    // tbodies[c] = tbody;
    y1=ctx.bodyTop;}else {y1=pages.length>1?ctx.bodyTop:ctx.y;}cy=y1;break;// 다음 컬럼으로
    }else {currentPagePrintedCount++;band.setPrinting(ctx,band.pr+1,bodyLine.count);}}}}while(this._isPrintDataRow()||this._isPrintEndRow());let nCol2=0;// 각 컬럼의 높이를 최대한 맞춘다.
    // 전체 pixel 높이를 기준으로 등분한 후 맞춘다.
    // (개수로 맞춰가는 알고리즘 구현 필요?)
    if(rowCount>1){let hAll=0;for(let c=0;c<cys.length;c++){for(let r=0;r<colLines[c].length;r++){hAll+=colLines[c][r].height;}}const heights=new Array(nCol);let hCol=Math.round(hAll/nCol);// 첫번째 컬럼부터 hCol 이상 해당되는 행들을 다음 컬럼으로 넘긴다.
    for(let c=0;c<nCol-1;c++){let rows=colLines[c];let r=0;let h=0;let h2;while(r<rows.length){h+=h2=rows[r].height;if(h>hCol){h-=h2;break;}else {r++;}}heights[c]=h;// 다음 컬럼 윗쪽으로 이동.
    const rows2=colLines[c+1];let r2=0;while(r<rows.length){const div=rows[r];rows.splice(r,1);rows2.splice(r2++,0,div);}// 다음 컬럼 행들 위치 조정
    y=headerHeight;for(let i=0;i<rows2.length;i++){rows2[i].detach();rows2[i].appendTo(tbodies[c+1]);}}heights[cols-1]=0;for(let i=0;i<colLines[cols-1].length;i++){heights[cols-1]+=colLines[cols-1][i].height;}// 앞쪽 컬럼들의 높이가 더 높도록 재배치한다.
    // TODO: 두 번 호출하지 않는 방법?
    for(let i=0;i<2;i++){(()=>{for(let i=nCol-1;i>0;i--){while(heights[i]>heights[i-1]){const rows1=colLines[i];const rows2=colLines[i-1];// 첫번째 행을 이전 컬럼의 마지막 행으로 이동
    const div=rows1.shift();const h=div.height;div.detach();heights[i]-=h;rows2.push(div);div.appendTo(tbodies[i-1]);heights[i-1]+=h;}}})();}// cys 재계산
    for(let c=0;c<cols;c++){let rows=colLines[c];cys[c]=y1+headerHeight;if(rows.length>0){nCol2=c+1;for(let r=0;r<rows.length;r++){cys[c]+=rows[r].height;}}}}else {for(let c=0;c<cols;c++){cys[c]=y1+headerHeight;}nCol2=rowCount;if(nCol2)cys[0]+=colLines[0][0].height;}// footer
    const attach=band.footer.attachToBody;const c=attach?Math.min(nCol2,cols-1):cols-1;const yLast=attach?cys[c]:0;cy=cys[0];for(let c=1;c<nCol;c++){cy=Math.max(cy,cys[c]);}if(attach){tbody=tbodies[c];}else {tbody=this.$_addTable(doc,page,colPts[c*2],cy-y1).tBodies[0];}hFooter&&footers.appendTo(tbody,TableBandElement.FOOTER_CLASS);if(attach){cy=Math.max(cy,yLast+hFooter);}else {cy+=hFooter;}// footer가 넘치면
    if(cy>cBottom){footers.remove();page=this.$_createPage(doc);pages.push(page);tbody=this.$_addTable(doc,page,colPts[c*2],y=0).tBodies[0];hFooter&&footers.appendTo(tbody,TableBandElement.FOOTER_CLASS);cy=ctx.bodyTop+hFooter;}ctx.y=cy;ctx.h=ctx.bodyHeight-(cy-ctx.bodyTop);}$_printMulti(doc,ctx,band,colPts,cols,w,trows,rowCount,pages){function addHeaders(self){let h=0;for(let c=0;c<cols;c++){const headers=new TableLine(self._headerView['_dom'].firstChild);h=Math.max(h,headers.height);if(h){headers.appendTo(tbodies[c],TableBandElement.HEADER_CLASS);}}y+=h;}let page;let table;let nCol=Math.min(cols,rowCount);const tbodies=[];const colLines=new Array(cols);let y=0;// first page
    page=this.$_createPage(doc);pages.push(page);for(let c=0;c<cols;c++){table=this.$_addTable(doc,page,colPts[c*2],y);tbodies.push(table.tBodies[0]);}// first headers
    addHeaders(this);for(let c=0;c<nCol;c++){colLines[c]=[];}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    TableBandElement.HEADER_CLASS='-rrp-tableband-header';TableBandElement.FOOTER_CLASS='-rrp-tableband-footer';TableBandElement.ROW_CLASS='-rrp-tableband-row';TableBandElement.DUMMY_GROUP_FOOTER='_dummy_group_footer_';////////////////////////////////////////////////////////////////////////////////
    /** @internal */class FloatingContainerElement extends ReportGroupItemElement{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,'floatingContainerView');}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return "rr-floating-container rr-group-element";}get debugLabel(){return 'floating';}get floating(){return true;}_needDesignBox(){return true;}_doMeasure(ctx,dom,hintWidth,hintHeight){if(!this.measureFixed){this._setModelSize(this.model,dom,hintWidth,hintHeight,true);}super._doMeasure(ctx,dom,hintWidth,hintHeight);if(this.childCount>0){const elt=this.getChild(0);return new Size(elt.measuredWidth,elt.measuredHeight);}return new Size();}_doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz){//if (!(sz.height > 0) && !ctx.printing && this.model.designHeight > 0) {
    if(!ctx.printing&&this.model.designHeight>0){sz.height=this.model.designHeight;}//if (!(sz.width > 0) && !ctx.printing && this.model.designWidth > 0) {
    if(!ctx.printing&&this.model.designWidth>0){sz.width=this.model.designWidth;}super._doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz);if(!ctx.printing){if(!this._isEmpty()){this.dom.style.background='#ff880010';this.dom.style.border=ctx.reportView['focusedElement']===this.getChild(0)?'1px dashed #000':'1px dashed #55000080';}else {this.dom.style.background='';}}}_setDesignContent(empty,designView){// 항상 empty text가 표시되도록 한다.
    super._setDesignContent(true,designView);}_layoutItem(ctx,child,model,x,y,width,height){x=(width-child.width)/2;y=(height-child.height)/2;child.move(x,y);child.setPrintStyles();}}////////////////////////////////////////////////////////////////////////////////
    const SVGNS="http://www.w3.org/2000/svg";let $_clip=0;class SvgRenderer extends Base{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(defs,element){super();this._transforms=[];this._defs=defs;this._element=element;}_doDispose(){this.clear();super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get doc(){return getDoc(this._element)||document;}get element(){return this._element;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    init(defs,element){this._defs=defs;this._element=element;return this;}clear(){this._defs=null;this._element=null;this._transforms=null;}save(){this._transforms.push(this._trans);this._trans="";}restore(){this._trans=this._transforms.pop();}translate(x,y){this._trans+="translate("+x+","+y+")";}rotate(angle){this._trans+="rotate("+angle*180/Math.PI+")";}rotateAt(angle,x,y){this._trans+="rotate("+angle*180/Math.PI+","+x+",)";}scale(x,y){this._trans+="scale("+x+","+y+")";}clipRect(r){this.clip(r.x,r.y,r.width,r.height);}clip(x,y,w,h){const doc=this.doc;const id=$_clip++;const clip=doc.createElementNS(SVGNS,"clipPath");clip.setAttributeNS(null,"id","clip"+id);const rect=doc.createElementNS(SVGNS,"rect");rect.x.baseVal.value=x;rect.y.baseVal.value=y;rect.width.baseVal.value=w;rect.height.baseVal.value=h;clip.appendChild(rect);this._defs.appendChild(clip);}line(style,x1,y1,x2,y2){const elt=this.doc.createElementNS(SVGNS,"line");this._element.appendChild(elt);elt.x1.baseVal.value=x1;elt.y1.baseVal.value=y1;elt.x2.baseVal.value=x2;elt.y2.baseVal.value=y2;this.$_setStyles(elt,style);return elt;}sline(style,x1,y1,x2,y2){const elt=this.doc.createElementNS(SVGNS,"line");this._element.appendChild(elt);elt.x1.baseVal.valueAsString=x1;elt.y1.baseVal.valueAsString=y1;elt.x2.baseVal.valueAsString=x2;elt.y2.baseVal.valueAsString=y2;this.$_setStyles(elt,style);return elt;}// iline(color: string, width: number, x1: number, y1: number, x2: number, y2: number): void {
    //     const elt = this.doc.createElementNS(SVGNS, "line");
    //     this._element.appendChild(elt);
    //     const d = width > 0 ? (width % 2) / 2 : 0;
    //     if (x1 == x2) {
    //         elt.x1.baseVal.value = x1 + d;
    //         elt.y1.baseVal.value = y1;
    //         elt.x2.baseVal.value = x2 + d;
    //         elt.y2.baseVal.value = y2;
    //     } else if (y1 == y2) {
    //         elt.x1.baseVal.value = x1;
    //         elt.y1.baseVal.value = y1 + d;
    //         elt.x2.baseVal.value = x2;
    //         elt.y2.baseVal.value = y2 + d;
    //     } else {
    //         elt.x1.baseVal.value = x1;
    //         elt.y1.baseVal.value = y1;
    //         elt.x2.baseVal.value = x2;
    //         elt.y2.baseVal.value = y2;
    //     }
    //     this.$_stroke(elt, color, width);
    // }
    lines(style){for(var _len16=arguments.length,pts=new Array(_len16>1?_len16-1:0),_key16=1;_key16<_len16;_key16++){pts[_key16-1]=arguments[_key16];}if(pts==null||pts.length<4)return;const elt=this.doc.createElementNS(SVGNS,"polyline");const points=[];points.push(pts[0]+","+pts[1]);for(let i=2;i<pts.length;i+=2){points.push(pts[i]+","+pts[i+1]);}elt.setAttributeNS(null,'points',points.join(" "));this.$_setStyles(elt,style);this._element.appendChild(elt);}// ilines(color: string, width: number, ...pts: number[]) {
    //     if (pts == null || pts.length < 2) return;
    //     const elt = this.doc.createElementNS(SVGNS, "polyline");
    //     this._element.appendChild(elt);
    //     const points = [];
    //     const d = width > 0 ? (width % 2) / 2 : 0;
    //     points.push(pts[0] + "," + pts[1]);
    //     for (let i = 2; i < pts.length; i += 2) {
    //         points.push(pts[i] + "," + pts[i + 1]);
    //     }
    //     elt.setAttributeNS(null, 'points', points.join(" "));
    //     this.$_stroke(elt, color, width);
    // }
    polygon(style,pts){if(pts==null||pts.length<4)return;const elt=this.doc.createElementNS(SVGNS,"polygon");const points=[];points.push(pts[0]+","+pts[1]);for(let i=2;i<pts.length;i+=2){points.push(pts[i]+","+pts[i+1]);}this._trans&&elt.setAttributeNS(null,'transform',this._trans);elt.setAttributeNS(null,'points',points.join(" "));this.$_setStyles(elt,style);this._element.appendChild(elt);return elt;}quadratic(style,x1,y1,x2,y2,x3,y3){const elt=this.doc.createElementNS(SVGNS,"path");elt.setAttributeNS(null,'d',['M',x1,y1,'Q',x2,y2,x3,y3].join(' '));this.$_setStyles(elt,style);this._element.appendChild(elt);}squadratic(style,x1,y1,x2,y2,x3,y3){const elt=this.doc.createElementNS(SVGNS,"path");elt.setAttributeNS(null,'d',['M',x1+"%",y1+"%",'Q',x2+"%",y2+"%",x3+"%",y3+"%"].join(' '));this.$_setStyles(elt,style);this._element.appendChild(elt);}curve(style){for(var _len17=arguments.length,pts=new Array(_len17>1?_len17-1:0),_key17=1;_key17<_len17;_key17++){pts[_key17-1]=arguments[_key17];}const cmds=this.$_getCurvedLinePath(pts,0,pts.length-1);if(cmds){const elt=this.doc.createElementNS(SVGNS,"path");elt.setAttributeNS(null,'d',cmds.join(' '));this.$_setStyles(elt,style);this._element.appendChild(elt);}}scurve(style){for(var _len18=arguments.length,pts=new Array(_len18>1?_len18-1:0),_key18=1;_key18<_len18;_key18++){pts[_key18-1]=arguments[_key18];}const cmds=this.$_getCurvedLinePath(pts,0,pts.length-1);if(cmds){const elt=this.doc.createElementNS(SVGNS,"path");for(let i=0;i<cmds.length;i++){if(typeof cmds[i]==="number"){cmds[i]=cmds[i]+"%";}}elt.setAttributeNS(null,'d',cmds.join(' '));this.$_setStyles(elt,style);this._element.appendChild(elt);}}curveRange(fill,stroke,width,pts1,pts2){if(pts1&&pts1.length>1&&pts2&&pts2.length>1&&(fill||stroke)){let cmds1=this.$_getCurvedLinePath(pts1,0,pts1.length/2-1,true);if(cmds1){cmds1.push("L",pts2[pts2.length-2],[pts2.length-1]);const cmds2=this.$_getCurvedLinePath(pts2,pts2.length/2-1,0,false);if(cmds2){cmds1=cmds1.concat(cmds2);}cmds1.push("L",pts1[0],pts1[1]);const elt=this.doc.createElementNS(SVGNS,"path");elt.setAttributeNS(null,'d',cmds1.join(' '));this.$_fillOrStroke(elt,fill,stroke,width);this._element.appendChild(elt);}}}rect(style,r){const elt=this.doc.createElementNS(SVGNS,"rect");elt.x.baseVal.value=r.x;elt.y.baseVal.value=r.y;elt.width.baseVal.value=r.width;elt.height.baseVal.value=r.height;this.$_setStyles(elt,style);this._element.appendChild(elt);}srect(style,r){const elt=this.doc.createElementNS(SVGNS,"rect");elt.x.baseVal.valueAsString=r.x+"%";elt.y.baseVal.valueAsString=r.y+"%";elt.width.baseVal.valueAsString=r.width+"%";elt.height.baseVal.valueAsString=r.height+"%";this.$_setStyles(elt,style);this._element.appendChild(elt);}bounds(style,x,y,w,h){const elt=this.doc.createElementNS(SVGNS,"rect");elt.x.baseVal.value=x;elt.y.baseVal.value=h<0?y+h:y;elt.width.baseVal.value=w;elt.height.baseVal.value=Math.abs(h);this.$_setStyles(elt,style);this._element.appendChild(elt);}pbounds(style,x,y,w,h){const elt=this.doc.createElementNS(SVGNS,"rect");elt.x.baseVal.valueAsString=x+"%";elt.y.baseVal.valueAsString=(h<0?y+h:y)+"%";elt.width.baseVal.valueAsString=w+"%";elt.height.baseVal.valueAsString=Math.abs(h)+"%";this.$_setStyles(elt,style);this._element.appendChild(elt);}sbounds(style,x,y,w,h){const elt=this.doc.createElementNS(SVGNS,"rect");elt.x.baseVal.valueAsString=x;elt.y.baseVal.valueAsString=y;elt.width.baseVal.valueAsString=w;elt.height.baseVal.valueAsString=h;this.$_setStyles(elt,style);this._element.appendChild(elt);}circle(style,cx,cy,rd){const elt=this.doc.createElementNS(SVGNS,"circle");elt.cx.baseVal.value=cx;elt.cy.baseVal.value=cy;elt.r.baseVal.value=rd;this.$_setStyles(elt,style);this._element.appendChild(elt);}scircle(style,cx,cy,rd){const elt=this.doc.createElementNS(SVGNS,"circle");elt.cx.baseVal.valueAsString=cx;elt.cy.baseVal.valueAsString=cy;elt.r.baseVal.valueAsString=rd;this.$_setStyles(elt,style);this._element.appendChild(elt);}circleRect(style,width,x,y,w,h){const elt=this.doc.createElementNS(SVGNS,"circle");const cx=x+w/2;const cy=y+h/2;const rd=Math.min(w,h)/2;elt.cx.baseVal.value=cx;elt.cy.baseVal.value=cy;elt.r.baseVal.value=rd;this.$_setStyles(elt,style);this._element.appendChild(elt);}scircleRect(style,x,y,w,h){const elt=this.doc.createElementNS(SVGNS,"circle");const cx=x+w/2;const cy=y+h/2;const rd=Math.min(w,h)/2;elt.cx.baseVal.valueAsString=cx+"%";elt.cy.baseVal.valueAsString=cy+"%";elt.r.baseVal.valueAsString=rd+"%";this.$_setStyles(elt,style);this._element.appendChild(elt);}ellipse(style,cx,cy,rx,ry){const elt=this.doc.createElementNS(SVGNS,"ellipse");elt.cx.baseVal.value=cx;elt.cy.baseVal.value=cy;elt.rx.baseVal.value=rx;elt.ry.baseVal.value=ry;this.$_setStyles(elt,style);this._element.appendChild(elt);return elt;}sellipse(style,cx,cy,rx,ry){const elt=this.doc.createElementNS(SVGNS,"ellipse");elt.cx.baseVal.valueAsString=cx+"%";elt.cy.baseVal.valueAsString=cy+"%";elt.rx.baseVal.valueAsString=rx+"%";elt.ry.baseVal.valueAsString=ry+"%";this.$_setStyles(elt,style);this._element.appendChild(elt);}ellipseRect(style,x,y,w,h){const elt=this.doc.createElementNS(SVGNS,"ellipse");const rx=w/2;const ry=h/2;elt.cx.baseVal.value=x+rx;elt.cy.baseVal.value=y+ry;elt.rx.baseVal.value=rx;elt.ry.baseVal.value=ry;this.$_setStyles(elt,style);this._element.appendChild(elt);return elt;}sellipseRect(style,x,y,w,h){const elt=this.doc.createElementNS(SVGNS,"ellipse");const rx=w/2;const ry=h/2;elt.cx.baseVal.valueAsString=x+rx+"%";elt.cy.baseVal.valueAsString=y+ry+"%";elt.rx.baseVal.valueAsString=rx+"%";elt.ry.baseVal.valueAsString=ry+"%";this.$_setStyles(elt,style);this._element.appendChild(elt);}text(style,font,fontSize,color,deco,text,x,y,align){const elt=this.doc.createElementNS(SVGNS,"text");font=font||"Verdana";elt.setAttributeNS(null,"y",y+"");elt.setAttributeNS(null,"dy","top");// top : 1em, middle: .5em, bottom : "".
    elt.setAttributeNS(null,"x",x+"");elt.setAttributeNS(null,"text-anchor",align);elt.setAttributeNS(null,"font-family",font);elt.setAttributeNS(null,"font-size",fontSize+"");deco&&elt.setAttributeNS(null,"text-decoration",deco);elt[Utils.TextProp]=text;this.$_setStyles(elt,style);this._element.appendChild(elt);}stext(style,text,x,y,align){const elt=this.doc.createElementNS(SVGNS,"text");elt.setAttributeNS(null,"y",y+"%");elt.setAttributeNS(null,"dy","top");// top : 1em, middle: .5em, bottom : "".
    elt.setAttributeNS(null,"x",x+"%");elt[Utils.TextProp]=text;this.$_setStyles(elt,style);this._element.appendChild(elt);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_setStyles(elt,styles){if(typeof styles==='string'){elt.setAttribute("class",styles);}else if(styles){Utils.extend(elt.style,styles);}}$_stroke(elt,color,width){elt.style.fill="none";elt.style.stroke=color;if(!isNaN(width)){elt.style.strokeWidth=width+"";}}$_fill(elt,color){elt.style.fill=color;}$_fillOrStroke(elt,fill,stroke,width){if(stroke){elt.style.stroke=stroke;if(!isNaN(width)){elt.style.strokeWidth=width+"";}}if(fill){elt.style.fill=fill;}else {elt.style.fill="none";}}$_getCurvedLinePath(pts,start,end){let moving=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(pts&&end!=start&&pts.length/2>end){const points=[];const reverse=start>end;const delta=reverse?-1:1;let p=start;if(moving){points.push("M",pts[p*2],pts[p*2+1]);}if(Math.abs(end-start)==2){points.push("L",pts[(p+delta)*2],pts[(p+delta)*2+1]);return points;}const tension=0.25;const tanLeft={x:0,y:0};const tanRight={x:0,y:0};const v1={x:0,y:0};const v2={x:pts[(p+delta)*2]-pts[p*2],y:pts[(p+delta)*2+1]-pts[p*2+1]};let tan={x:0,y:0};const p1={x:0,y:0};const p2={x:0,y:0};const mp={x:0,y:0};let len=Math.sqrt(v2.x*v2.x+v2.y*v2.y);v2.x/=len;v2.y/=len;let tanLenFactor=pts[(p+delta)*2]-pts[p*2];let prevX=pts[p*2];let prevY=pts[p*2+1];for(p+=delta;p!=end;p+=delta){v1.x=-v2.x;v1.y=-v2.y;v2.x=pts[(p+delta)*2]-pts[p*2];v2.y=pts[(p+delta)*2]-pts[p*2+1];len=Math.sqrt(v2.x*v2.x+v2.y*v2.y);v2.x/=len;v2.y/=len;if(v2.x<v1.x){tan.x=v1.x-v2.x;tan.y=v1.y-v2.y;}else {tan.x=v2.x-v1.x;tan.y=v2.y-v1.y;}const tanlen=Math.sqrt(tan.x*tan.x+tan.y*tan.y);tan.x/=tanlen;tan.y/=tanlen;if(v1.y*v2.y>=0){tan={x:1,y:0};}tanLeft.x=-tan.x*tanLenFactor*tension;tanLeft.y=-tan.y*tanLenFactor*tension;if(p==delta+start){points.push("Q",pts[p*2]+tanLeft.x,pts[p*2+1]+tanLeft.y,pts[p*2],pts[p*2+1]);}else {p1.x=prevX+tanRight.x;p1.y=prevY+tanRight.y;p2.x=pts[p*2]+tanLeft.x;p2.y=pts[p*2+1]+tanLeft.y;mp.x=(p1.x+p2.x)/2;mp.y=(p1.y+p2.y)/2;points.push("Q",p1.x,p1.y,mp.x,mp.y);points.push("Q",p2.x,p2.y,pts[p*2],pts[p*2+1]);}tanLenFactor=pts[(p+delta)*2]-pts[p*2];tanRight.x=tan.x*tanLenFactor*tension;tanRight.y=tan.y*tanLenFactor*tension;prevX=pts[p*2];prevY=pts[p*2+1];}points.push("Q",prevX+tanRight.x,prevY+tanRight.y,pts[p*2],pts[p*2+1]);return points;}return null;}}class SvgElement extends Base{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(parent){super();const doc=getDoc(parent);const elt=this._element=doc.createElementNS(SVGNS,"svg");const css=elt.style;const defs=this._defs=doc.createElementNS(SVGNS,"defs");//elt.innerHTML = "Your browser does not support SVG";
    elt.appendChild(defs);css.background="";css.border="none";css.pointerEvents="none";parent.appendChild(elt);this._renderer=new SvgRenderer(this._defs);}static createSVG(parent,className,styles){const doc=getDoc(parent);const elt=doc.createElementNS(SVGNS,"svg");elt.appendChild(doc.createElementNS(SVGNS,"defs"));elt.appendChild(doc.createElementNS(SVGNS,"g"));if(className){elt.setAttribute("class",'rr-rating-shape');}Utils.extend(elt.style,{background:"",border:"none",pointerEvents:"none"});if(styles){Utils.extend(elt.style,styles);}//elt.innerHTML = "Your browser does not support SVG";
    parent.appendChild(elt);return elt;}static renderSVG(self,ctx,svg,callback){const g=svg.lastElementChild;const renderer=this._renderer.init(svg.firstChild,g);Utils.clearChildren(g);callback.call(self,ctx,renderer,svg.clientWidth,svg.clientHeight);renderer.clear();}static setAttr(elt,attr,value){elt.setAttribute(attr,value);}static setStyle(elt,prop,value){elt.style[prop]=value;}static prepareExport(svg,w,h){if(!svg.attributes['viewBox']){svg.setAttribute('viewBox',[0,0,w,h].join(' '));}// exporting 시 svg에 직접 설정되지 않은 style이 반영되지 않는다.
    const css=svg.style;if(!css.fill||!css.stroke){const cs=getComputedStyle(svg);if(!css.fill){css.fill=cs.fill;}if(!css.stroke){css.stroke=cs.stroke;}}}_doDispose(){this._renderer=this._renderer.dispose();this._element.parentElement.removeChild(this._element);this._element=this._defs=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** element */get element(){return this._element;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    render(callback){this._clear();if(callback){//callback.call(this, renderer, this._element.width.baseVal.value, this._height);
    callback.call(this,this._renderer,this._element.clientWidth,this._element.clientHeight);}else {this._doRender(this._renderer,this._element.clientWidth,this._element.clientHeight);}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _clear(){if(this._element.childElementCount>1){this._element.removeChild(this._element.lastElementChild);}const doc=getDoc(this._element);const g=doc.createElementNS(SVGNS,"g");this._element.appendChild(g);this._renderer["_element"]=g;}_doRender(renderer,width,height){}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    SvgElement._renderer=new SvgRenderer();var commonjsGlobal=typeof globalThis!=='undefined'?globalThis:typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!=='undefined'?self:{};function getDefaultExportFromCjs(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,'default')?x['default']:x;}function createCommonjsModule(fn){var module={exports:{}};return fn(module,module.exports),module.exports;}function commonjsRequire(target){throw new Error('Could not dynamically require "'+target+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.');}function _classCallCheck$o(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var Barcode=function Barcode(data,options){_classCallCheck$o(this,Barcode);this.data=data;this.text=options.text||data;this.options=options;};var _default$y=Barcode;var Barcode_1=/*#__PURE__*/Object.defineProperty({default:_default$y},'__esModule',{value:true});var CODE39_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.CODE39=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Barcode3=_interopRequireDefault(Barcode_1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}// Encoding documentation:
    // https://en.wikipedia.org/wiki/Code_39#Encoding
    var CODE39=function(_Barcode){_inherits(CODE39,_Barcode);function CODE39(data,options){_classCallCheck(this,CODE39);data=data.toUpperCase();// Calculate mod43 checksum if enabled
    if(options.mod43){data+=getCharacter(mod43checksum(data));}return _possibleConstructorReturn(this,(CODE39.__proto__||Object.getPrototypeOf(CODE39)).call(this,data,options));}_createClass(CODE39,[{key:"encode",value:function encode(){// First character is always a *
    var result=getEncoding("*");// Take every character and add the binary representation to the result
    for(var i=0;i<this.data.length;i++){result+=getEncoding(this.data[i])+"0";}// Last character is always a *
    result+=getEncoding("*");return {data:result,text:this.text};}},{key:"valid",value:function valid(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1;}}]);return CODE39;}(_Barcode3.default);// All characters. The position in the array is the (checksum) value
    var characters=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"];// The decimal representation of the characters, is converted to the
    // corresponding binary with the getEncoding function
    var encodings=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];// Get the binary representation of a character by converting the encodings
    // from decimal to binary
    function getEncoding(character){return getBinary(characterValue(character));}function getBinary(characterValue){return encodings[characterValue].toString(2);}function getCharacter(characterValue){return characters[characterValue];}function characterValue(character){return characters.indexOf(character);}function mod43checksum(data){var checksum=0;for(var i=0;i<data.length;i++){checksum+=characterValue(data[i]);}checksum=checksum%43;return checksum;}exports.CODE39=CODE39;});var constants$2=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _SET_BY_CODE;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else {obj[key]=value;}return obj;}// constants for internal usage
    var SET_A=exports.SET_A=0;var SET_B=exports.SET_B=1;var SET_C=exports.SET_C=2;// Special characters
    exports.SHIFT=98;var START_A=exports.START_A=103;var START_B=exports.START_B=104;var START_C=exports.START_C=105;exports.MODULO=103;exports.STOP=106;exports.FNC1=207;// Get set by start code
    exports.SET_BY_CODE=(_SET_BY_CODE={},_defineProperty(_SET_BY_CODE,START_A,SET_A),_defineProperty(_SET_BY_CODE,START_B,SET_B),_defineProperty(_SET_BY_CODE,START_C,SET_C),_SET_BY_CODE);// Get next set by code
    exports.SWAP={101:SET_A,100:SET_B,99:SET_C};exports.A_START_CHAR=String.fromCharCode(208);// START_A + 105
    exports.B_START_CHAR=String.fromCharCode(209);// START_B + 105
    exports.C_START_CHAR=String.fromCharCode(210);// START_C + 105
    // 128A (Code Set A)
    // ASCII characters 00 to 95 (0–9, A–Z and control codes), special characters, and FNC 1–4
    exports.A_CHARS="[\x00-\x5F\xC8-\xCF]";// 128B (Code Set B)
    // ASCII characters 32 to 127 (0–9, A–Z, a–z), special characters, and FNC 1–4
    exports.B_CHARS="[\x20-\x7F\xC8-\xCF]";// 128C (Code Set C)
    // 00–99 (encodes two digits with a single code point) and FNC1
    exports.C_CHARS="(\xCF*[0-9]{2}\xCF*)";// CODE128 includes 107 symbols:
    // 103 data symbols, 3 start symbols (A, B and C), and 1 stop symbol (the last one)
    // Each symbol consist of three black bars (1) and three white spaces (0).
    exports.BARS=[11011001100,11001101100,11001100110,10010011000,10010001100,10001001100,10011001000,10011000100,10001100100,11001001000,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011000,11011000110,11000110110,10100011000,10001011000,10001000110,10110001000,10001101000,10001100010,11010001000,11000101000,11000100010,10110111000,10110001110,10001101110,10111011000,10111000110,10001110110,11101110110,11010001110,11000101110,11011101000,11011100010,11011101110,11101011000,11101000110,11100010110,11101101000,11101100010,11100011010,11101111010,11001000010,11110001010,10100110000,10100001100,10010110000,10010000110,10000101100,10000100110,10110010000,10110000100,10011010000,10011000010,10000110100,10000110010,11000010010,11001010000,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111000,10100011110,10001011110,10111101000,10111100010,11110101000,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,11010010000,11010011100,1100011101011];});var _createClass$h=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Barcode3$7=_interopRequireDefault$o(Barcode_1);function _interopRequireDefault$o(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$n(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$j(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$j(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}// This is the master class,
    // it does require the start code to be included in the string
    var CODE128$1=function(_Barcode){_inherits$j(CODE128,_Barcode);function CODE128(data,options){_classCallCheck$n(this,CODE128);// Get array of ascii codes from data
    var _this=_possibleConstructorReturn$j(this,(CODE128.__proto__||Object.getPrototypeOf(CODE128)).call(this,data.substring(1),options));_this.bytes=data.split('').map(function(char){return char.charCodeAt(0);});return _this;}_createClass$h(CODE128,[{key:'valid',value:function valid(){// ASCII value ranges 0-127, 200-211
    return /^[\x00-\x7F\xC8-\xD3]+$/.test(this.data);}// The public encoding function
    },{key:'encode',value:function encode(){var bytes=this.bytes;// Remove the start code from the bytes and set its index
    var startIndex=bytes.shift()-105;// Get start set by index
    var startSet=constants$2.SET_BY_CODE[startIndex];if(startSet===undefined){throw new RangeError('The encoding does not start with a start character.');}if(this.shouldEncodeAsEan128()===true){bytes.unshift(constants$2.FNC1);}// Start encode with the right type
    var encodingResult=CODE128.next(bytes,1,startSet);return {text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,''):this.text,data:// Add the start bits
    CODE128.getBar(startIndex)+// Add the encoded bits
    encodingResult.result+// Add the checksum
    CODE128.getBar((encodingResult.checksum+startIndex)%constants$2.MODULO)+// Add the end bits
    CODE128.getBar(constants$2.STOP)};}// GS1-128/EAN-128
    },{key:'shouldEncodeAsEan128',value:function shouldEncodeAsEan128(){var isEAN128=this.options.ean128||false;if(typeof isEAN128==='string'){isEAN128=isEAN128.toLowerCase()==='true';}return isEAN128;}// Get a bar symbol by index
    }],[{key:'getBar',value:function getBar(index){return constants$2.BARS[index]?constants$2.BARS[index].toString():'';}// Correct an index by a set and shift it from the bytes array
    },{key:'correctIndex',value:function correctIndex(bytes,set){if(set===constants$2.SET_A){var charCode=bytes.shift();return charCode<32?charCode+64:charCode-32;}else if(set===constants$2.SET_B){return bytes.shift()-32;}else {return (bytes.shift()-48)*10+bytes.shift()-48;}}},{key:'next',value:function next(bytes,pos,set){if(!bytes.length){return {result:'',checksum:0};}var nextCode=void 0,index=void 0;// Special characters
    if(bytes[0]>=200){index=bytes.shift()-105;var nextSet=constants$2.SWAP[index];// Swap to other set
    if(nextSet!==undefined){nextCode=CODE128.next(bytes,pos+1,nextSet);}// Continue on current set but encode a special character
    else {// Shift
    if((set===constants$2.SET_A||set===constants$2.SET_B)&&index===constants$2.SHIFT){// Convert the next character so that is encoded correctly
    bytes[0]=set===constants$2.SET_A?bytes[0]>95?bytes[0]-96:bytes[0]:bytes[0]<32?bytes[0]+96:bytes[0];}nextCode=CODE128.next(bytes,pos+1,set);}}// Continue encoding
    else {index=CODE128.correctIndex(bytes,set);nextCode=CODE128.next(bytes,pos+1,set);}// Get the correct binary encoding and calculate the weight
    var enc=CODE128.getBar(index);var weight=index*pos;return {result:enc+nextCode.result,checksum:weight+nextCode.checksum};}}]);return CODE128;}(_Barcode3$7.default);var _default$x=CODE128$1;var CODE128_1=/*#__PURE__*/Object.defineProperty({default:_default$x},'__esModule',{value:true});// Match Set functions
    var matchSetALength=function matchSetALength(string){return string.match(new RegExp('^'+constants$2.A_CHARS+'*'))[0].length;};var matchSetBLength=function matchSetBLength(string){return string.match(new RegExp('^'+constants$2.B_CHARS+'*'))[0].length;};var matchSetC=function matchSetC(string){return string.match(new RegExp('^'+constants$2.C_CHARS+'*'))[0];};// CODE128A or CODE128B
    function autoSelectFromAB(string,isA){var ranges=isA?constants$2.A_CHARS:constants$2.B_CHARS;var untilC=string.match(new RegExp('^('+ranges+'+?)(([0-9]{2}){2,})([^0-9]|$)'));if(untilC){return untilC[1]+String.fromCharCode(204)+autoSelectFromC(string.substring(untilC[1].length));}var chars=string.match(new RegExp('^'+ranges+'+'))[0];if(chars.length===string.length){return string;}return chars+String.fromCharCode(isA?205:206)+autoSelectFromAB(string.substring(chars.length),!isA);}// CODE128C
    function autoSelectFromC(string){var cMatch=matchSetC(string);var length=cMatch.length;if(length===string.length){return string;}string=string.substring(length);// Select A/B depending on the longest match
    var isA=matchSetALength(string)>=matchSetBLength(string);return cMatch+String.fromCharCode(isA?206:205)+autoSelectFromAB(string,isA);}// Detect Code Set (A, B or C) and format the string
    var _default$w=function(string){var newString=void 0;var cLength=matchSetC(string).length;// Select 128C if the string start with enough digits
    if(cLength>=2){newString=constants$2.C_START_CHAR+autoSelectFromC(string);}else {// Select A/B depending on the longest match
    var isA=matchSetALength(string)>matchSetBLength(string);newString=(isA?constants$2.A_START_CHAR:constants$2.B_START_CHAR)+autoSelectFromAB(string,isA);}return newString.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,// Any sequence between 205 and 206 characters
    function(match,char){return String.fromCharCode(203)+char;});};var auto=/*#__PURE__*/Object.defineProperty({default:_default$w},'__esModule',{value:true});var _CODE3$3=_interopRequireDefault$n(CODE128_1);var _auto2=_interopRequireDefault$n(auto);function _interopRequireDefault$n(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$m(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$i(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$i(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var CODE128AUTO=function(_CODE){_inherits$i(CODE128AUTO,_CODE);function CODE128AUTO(data,options){_classCallCheck$m(this,CODE128AUTO);// ASCII value ranges 0-127, 200-211
    if(/^[\x00-\x7F\xC8-\xD3]+$/.test(data)){var _this=_possibleConstructorReturn$i(this,(CODE128AUTO.__proto__||Object.getPrototypeOf(CODE128AUTO)).call(this,(0, _auto2.default)(data),options));}else {var _this=_possibleConstructorReturn$i(this,(CODE128AUTO.__proto__||Object.getPrototypeOf(CODE128AUTO)).call(this,data,options));}return _possibleConstructorReturn$i(_this);}return CODE128AUTO;}(_CODE3$3.default);var _default$v=CODE128AUTO;var CODE128_AUTO=/*#__PURE__*/Object.defineProperty({default:_default$v},'__esModule',{value:true});var _createClass$g=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _CODE3$2=_interopRequireDefault$m(CODE128_1);function _interopRequireDefault$m(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$l(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$h(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$h(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var CODE128A=function(_CODE){_inherits$h(CODE128A,_CODE);function CODE128A(string,options){_classCallCheck$l(this,CODE128A);return _possibleConstructorReturn$h(this,(CODE128A.__proto__||Object.getPrototypeOf(CODE128A)).call(this,constants$2.A_START_CHAR+string,options));}_createClass$g(CODE128A,[{key:'valid',value:function valid(){return new RegExp('^'+constants$2.A_CHARS+'+$').test(this.data);}}]);return CODE128A;}(_CODE3$2.default);var _default$u=CODE128A;var CODE128A_1=/*#__PURE__*/Object.defineProperty({default:_default$u},'__esModule',{value:true});var _createClass$f=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _CODE3$1=_interopRequireDefault$l(CODE128_1);function _interopRequireDefault$l(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$k(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$g(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$g(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var CODE128B=function(_CODE){_inherits$g(CODE128B,_CODE);function CODE128B(string,options){_classCallCheck$k(this,CODE128B);return _possibleConstructorReturn$g(this,(CODE128B.__proto__||Object.getPrototypeOf(CODE128B)).call(this,constants$2.B_START_CHAR+string,options));}_createClass$f(CODE128B,[{key:'valid',value:function valid(){return new RegExp('^'+constants$2.B_CHARS+'+$').test(this.data);}}]);return CODE128B;}(_CODE3$1.default);var _default$t=CODE128B;var CODE128B_1=/*#__PURE__*/Object.defineProperty({default:_default$t},'__esModule',{value:true});var _createClass$e=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _CODE3=_interopRequireDefault$k(CODE128_1);function _interopRequireDefault$k(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$j(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$f(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$f(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var CODE128C=function(_CODE){_inherits$f(CODE128C,_CODE);function CODE128C(string,options){_classCallCheck$j(this,CODE128C);return _possibleConstructorReturn$f(this,(CODE128C.__proto__||Object.getPrototypeOf(CODE128C)).call(this,constants$2.C_START_CHAR+string,options));}_createClass$e(CODE128C,[{key:'valid',value:function valid(){return new RegExp('^'+constants$2.C_CHARS+'+$').test(this.data);}}]);return CODE128C;}(_CODE3.default);var _default$s=CODE128C;var CODE128C_1=/*#__PURE__*/Object.defineProperty({default:_default$s},'__esModule',{value:true});var CODE128=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.CODE128C=exports.CODE128B=exports.CODE128A=exports.CODE128=undefined;var _CODE128_AUTO2=_interopRequireDefault(CODE128_AUTO);var _CODE128A2=_interopRequireDefault(CODE128A_1);var _CODE128B2=_interopRequireDefault(CODE128B_1);var _CODE128C2=_interopRequireDefault(CODE128C_1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.CODE128=_CODE128_AUTO2.default;exports.CODE128A=_CODE128A2.default;exports.CODE128B=_CODE128B2.default;exports.CODE128C=_CODE128C2.default;});var constants$1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});// Standard start end and middle bits
    exports.SIDE_BIN='101';exports.MIDDLE_BIN='01010';exports.BINARIES={'L':[// The L (left) type of encoding
    '0001101','0011001','0010011','0111101','0100011','0110001','0101111','0111011','0110111','0001011'],'G':[// The G type of encoding
    '0100111','0110011','0011011','0100001','0011101','0111001','0000101','0010001','0001001','0010111'],'R':[// The R (right) type of encoding
    '1110010','1100110','1101100','1000010','1011100','1001110','1010000','1000100','1001000','1110100'],'O':[// The O (odd) encoding for UPC-E
    '0001101','0011001','0010011','0111101','0100011','0110001','0101111','0111011','0110111','0001011'],'E':[// The E (even) encoding for UPC-E
    '0100111','0110011','0011011','0100001','0011101','0111001','0000101','0010001','0001001','0010111']};// Define the EAN-2 structure
    exports.EAN2_STRUCTURE=['LL','LG','GL','GG'];// Define the EAN-5 structure
    exports.EAN5_STRUCTURE=['GGLLL','GLGLL','GLLGL','GLLLG','LGGLL','LLGGL','LLLGG','LGLGL','LGLLG','LLGLG'];// Define the EAN-13 structure
    exports.EAN13_STRUCTURE=['LLLLLL','LLGLGG','LLGGLG','LLGGGL','LGLLGG','LGGLLG','LGGGLL','LGLGLG','LGLGGL','LGGLGL'];});// Encode data string
    var encode$1=function encode(data,structure,separator){var encoded=data.split('').map(function(val,idx){return constants$1.BINARIES[structure[idx]];}).map(function(val,idx){return val?val[data[idx]]:'';});if(separator){var last=data.length-1;encoded=encoded.map(function(val,idx){return idx<last?val+separator:val;});}return encoded.join('');};var _default$r=encode$1;var encoder=/*#__PURE__*/Object.defineProperty({default:_default$r},'__esModule',{value:true});var _createClass$d=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _encoder2$4=_interopRequireDefault$j(encoder);var _Barcode3$6=_interopRequireDefault$j(Barcode_1);function _interopRequireDefault$j(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$i(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$e(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$e(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}// Base class for EAN8 & EAN13
    var EAN=function(_Barcode){_inherits$e(EAN,_Barcode);function EAN(data,options){_classCallCheck$i(this,EAN);// Make sure the font is not bigger than the space between the guard bars
    var _this=_possibleConstructorReturn$e(this,(EAN.__proto__||Object.getPrototypeOf(EAN)).call(this,data,options));_this.fontSize=!options.flat&&options.fontSize>options.width*10?options.width*10:options.fontSize;// Make the guard bars go down half the way of the text
    _this.guardHeight=options.height+_this.fontSize/2+options.textMargin;return _this;}_createClass$d(EAN,[{key:'encode',value:function encode(){return this.options.flat?this.encodeFlat():this.encodeGuarded();}},{key:'leftText',value:function leftText(from,to){return this.text.substr(from,to);}},{key:'leftEncode',value:function leftEncode(data,structure){return (0, _encoder2$4.default)(data,structure);}},{key:'rightText',value:function rightText(from,to){return this.text.substr(from,to);}},{key:'rightEncode',value:function rightEncode(data,structure){return (0, _encoder2$4.default)(data,structure);}},{key:'encodeGuarded',value:function encodeGuarded(){var textOptions={fontSize:this.fontSize};var guardOptions={height:this.guardHeight};return [{data:constants$1.SIDE_BIN,options:guardOptions},{data:this.leftEncode(),text:this.leftText(),options:textOptions},{data:constants$1.MIDDLE_BIN,options:guardOptions},{data:this.rightEncode(),text:this.rightText(),options:textOptions},{data:constants$1.SIDE_BIN,options:guardOptions}];}},{key:'encodeFlat',value:function encodeFlat(){var data=[constants$1.SIDE_BIN,this.leftEncode(),constants$1.MIDDLE_BIN,this.rightEncode(),constants$1.SIDE_BIN];return {data:data.join(''),text:this.text};}}]);return EAN;}(_Barcode3$6.default);var _default$q=EAN;var EAN_1=/*#__PURE__*/Object.defineProperty({default:_default$q},'__esModule',{value:true});var _createClass$c=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get$1=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else {return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else {var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _EAN3$1=_interopRequireDefault$i(EAN_1);function _interopRequireDefault$i(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$h(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$d(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$d(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}// Encoding documentation:
    // https://en.wikipedia.org/wiki/International_Article_Number_(EAN)#Binary_encoding_of_data_digits_into_EAN-13_barcode
    // Calculate the checksum digit
    // https://en.wikipedia.org/wiki/International_Article_Number_(EAN)#Calculation_of_checksum_digit
    var checksum$4=function checksum(number){var res=number.substr(0,12).split('').map(function(n){return +n;}).reduce(function(sum,a,idx){return idx%2?sum+a*3:sum+a;},0);return (10-res%10)%10;};var EAN13=function(_EAN){_inherits$d(EAN13,_EAN);function EAN13(data,options){_classCallCheck$h(this,EAN13);// Add checksum if it does not exist
    if(data.search(/^[0-9]{12}$/)!==-1){data+=checksum$4(data);}// Adds a last character to the end of the barcode
    var _this=_possibleConstructorReturn$d(this,(EAN13.__proto__||Object.getPrototypeOf(EAN13)).call(this,data,options));_this.lastChar=options.lastChar;return _this;}_createClass$c(EAN13,[{key:'valid',value:function valid(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===checksum$4(this.data);}},{key:'leftText',value:function leftText(){return _get$1(EAN13.prototype.__proto__||Object.getPrototypeOf(EAN13.prototype),'leftText',this).call(this,1,6);}},{key:'leftEncode',value:function leftEncode(){var data=this.data.substr(1,6);var structure=constants$1.EAN13_STRUCTURE[this.data[0]];return _get$1(EAN13.prototype.__proto__||Object.getPrototypeOf(EAN13.prototype),'leftEncode',this).call(this,data,structure);}},{key:'rightText',value:function rightText(){return _get$1(EAN13.prototype.__proto__||Object.getPrototypeOf(EAN13.prototype),'rightText',this).call(this,7,6);}},{key:'rightEncode',value:function rightEncode(){var data=this.data.substr(7,6);return _get$1(EAN13.prototype.__proto__||Object.getPrototypeOf(EAN13.prototype),'rightEncode',this).call(this,data,'RRRRRR');}// The "standard" way of printing EAN13 barcodes with guard bars
    },{key:'encodeGuarded',value:function encodeGuarded(){var data=_get$1(EAN13.prototype.__proto__||Object.getPrototypeOf(EAN13.prototype),'encodeGuarded',this).call(this);// Extend data with left digit & last character
    if(this.options.displayValue){data.unshift({data:'000000000000',text:this.text.substr(0,1),options:{textAlign:'left',fontSize:this.fontSize}});if(this.options.lastChar){data.push({data:'00'});data.push({data:'00000',text:this.options.lastChar,options:{fontSize:this.fontSize}});}}return data;}}]);return EAN13;}(_EAN3$1.default);var _default$p=EAN13;var EAN13_1=/*#__PURE__*/Object.defineProperty({default:_default$p},'__esModule',{value:true});var _createClass$b=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else {return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else {var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _EAN3=_interopRequireDefault$h(EAN_1);function _interopRequireDefault$h(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$g(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$c(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$c(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}// Encoding documentation:
    // http://www.barcodeisland.com/ean8.phtml
    // Calculate the checksum digit
    var checksum$3=function checksum(number){var res=number.substr(0,7).split('').map(function(n){return +n;}).reduce(function(sum,a,idx){return idx%2?sum+a:sum+a*3;},0);return (10-res%10)%10;};var EAN8=function(_EAN){_inherits$c(EAN8,_EAN);function EAN8(data,options){_classCallCheck$g(this,EAN8);// Add checksum if it does not exist
    if(data.search(/^[0-9]{7}$/)!==-1){data+=checksum$3(data);}return _possibleConstructorReturn$c(this,(EAN8.__proto__||Object.getPrototypeOf(EAN8)).call(this,data,options));}_createClass$b(EAN8,[{key:'valid',value:function valid(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===checksum$3(this.data);}},{key:'leftText',value:function leftText(){return _get(EAN8.prototype.__proto__||Object.getPrototypeOf(EAN8.prototype),'leftText',this).call(this,0,4);}},{key:'leftEncode',value:function leftEncode(){var data=this.data.substr(0,4);return _get(EAN8.prototype.__proto__||Object.getPrototypeOf(EAN8.prototype),'leftEncode',this).call(this,data,'LLLL');}},{key:'rightText',value:function rightText(){return _get(EAN8.prototype.__proto__||Object.getPrototypeOf(EAN8.prototype),'rightText',this).call(this,4,4);}},{key:'rightEncode',value:function rightEncode(){var data=this.data.substr(4,4);return _get(EAN8.prototype.__proto__||Object.getPrototypeOf(EAN8.prototype),'rightEncode',this).call(this,data,'RRRR');}}]);return EAN8;}(_EAN3.default);var _default$o=EAN8;var EAN8_1=/*#__PURE__*/Object.defineProperty({default:_default$o},'__esModule',{value:true});var _createClass$a=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _encoder2$3=_interopRequireDefault$g(encoder);var _Barcode3$5=_interopRequireDefault$g(Barcode_1);function _interopRequireDefault$g(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$f(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$b(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$b(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}// Encoding documentation:
    // https://en.wikipedia.org/wiki/EAN_5#Encoding
    var checksum$2=function checksum(data){var result=data.split('').map(function(n){return +n;}).reduce(function(sum,a,idx){return idx%2?sum+a*9:sum+a*3;},0);return result%10;};var EAN5=function(_Barcode){_inherits$b(EAN5,_Barcode);function EAN5(data,options){_classCallCheck$f(this,EAN5);return _possibleConstructorReturn$b(this,(EAN5.__proto__||Object.getPrototypeOf(EAN5)).call(this,data,options));}_createClass$a(EAN5,[{key:'valid',value:function valid(){return this.data.search(/^[0-9]{5}$/)!==-1;}},{key:'encode',value:function encode(){var structure=constants$1.EAN5_STRUCTURE[checksum$2(this.data)];return {data:'1011'+(0, _encoder2$3.default)(this.data,structure,'01'),text:this.text};}}]);return EAN5;}(_Barcode3$5.default);var _default$n=EAN5;var EAN5_1=/*#__PURE__*/Object.defineProperty({default:_default$n},'__esModule',{value:true});var _createClass$9=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _encoder2$2=_interopRequireDefault$f(encoder);var _Barcode3$4=_interopRequireDefault$f(Barcode_1);function _interopRequireDefault$f(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$e(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$a(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$a(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}// Encoding documentation:
    // https://en.wikipedia.org/wiki/EAN_2#Encoding
    var EAN2=function(_Barcode){_inherits$a(EAN2,_Barcode);function EAN2(data,options){_classCallCheck$e(this,EAN2);return _possibleConstructorReturn$a(this,(EAN2.__proto__||Object.getPrototypeOf(EAN2)).call(this,data,options));}_createClass$9(EAN2,[{key:'valid',value:function valid(){return this.data.search(/^[0-9]{2}$/)!==-1;}},{key:'encode',value:function encode(){// Choose the structure based on the number mod 4
    var structure=constants$1.EAN2_STRUCTURE[parseInt(this.data)%4];return {// Start bits + Encode the two digits with 01 in between
    data:'1011'+(0, _encoder2$2.default)(this.data,structure,'01'),text:this.text};}}]);return EAN2;}(_Barcode3$4.default);var _default$m=EAN2;var EAN2_1=/*#__PURE__*/Object.defineProperty({default:_default$m},'__esModule',{value:true});var _createClass$8=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var checksum_1=checksum$1;var _encoder2$1=_interopRequireDefault$e(encoder);var _Barcode3$3=_interopRequireDefault$e(Barcode_1);function _interopRequireDefault$e(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$d(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$9(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$9(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}// Encoding documentation:
    // https://en.wikipedia.org/wiki/Universal_Product_Code#Encoding
    var UPC=function(_Barcode){_inherits$9(UPC,_Barcode);function UPC(data,options){_classCallCheck$d(this,UPC);// Add checksum if it does not exist
    if(data.search(/^[0-9]{11}$/)!==-1){data+=checksum$1(data);}var _this=_possibleConstructorReturn$9(this,(UPC.__proto__||Object.getPrototypeOf(UPC)).call(this,data,options));_this.displayValue=options.displayValue;// Make sure the font is not bigger than the space between the guard bars
    if(options.fontSize>options.width*10){_this.fontSize=options.width*10;}else {_this.fontSize=options.fontSize;}// Make the guard bars go down half the way of the text
    _this.guardHeight=options.height+_this.fontSize/2+options.textMargin;return _this;}_createClass$8(UPC,[{key:"valid",value:function valid(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==checksum$1(this.data);}},{key:"encode",value:function encode(){if(this.options.flat){return this.flatEncoding();}else {return this.guardedEncoding();}}},{key:"flatEncoding",value:function flatEncoding(){var result="";result+="101";result+=(0, _encoder2$1.default)(this.data.substr(0,6),"LLLLLL");result+="01010";result+=(0, _encoder2$1.default)(this.data.substr(6,6),"RRRRRR");result+="101";return {data:result,text:this.text};}},{key:"guardedEncoding",value:function guardedEncoding(){var result=[];// Add the first digit
    if(this.displayValue){result.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}});}// Add the guard bars
    result.push({data:"101"+(0, _encoder2$1.default)(this.data[0],"L"),options:{height:this.guardHeight}});// Add the left side
    result.push({data:(0, _encoder2$1.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}});// Add the middle bits
    result.push({data:"01010",options:{height:this.guardHeight}});// Add the right side
    result.push({data:(0, _encoder2$1.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}});// Add the end bits
    result.push({data:(0, _encoder2$1.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}});// Add the last digit
    if(this.displayValue){result.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}});}return result;}}]);return UPC;}(_Barcode3$3.default);// Calulate the checksum digit
    // https://en.wikipedia.org/wiki/International_Article_Number_(EAN)#Calculation_of_checksum_digit
    function checksum$1(number){var result=0;var i;for(i=1;i<11;i+=2){result+=parseInt(number[i]);}for(i=0;i<11;i+=2){result+=parseInt(number[i])*3;}return (10-result%10)%10;}var _default$l=UPC;var UPC_1=/*#__PURE__*/Object.defineProperty({checksum:checksum_1,default:_default$l},'__esModule',{value:true});var _createClass$7=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _encoder2=_interopRequireDefault$d(encoder);var _Barcode3$2=_interopRequireDefault$d(Barcode_1);function _interopRequireDefault$d(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$c(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$8(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$8(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}// Encoding documentation:
    // https://en.wikipedia.org/wiki/Universal_Product_Code#Encoding
    //
    // UPC-E documentation:
    // https://en.wikipedia.org/wiki/Universal_Product_Code#UPC-E
    var EXPANSIONS=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"];var PARITIES=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]];var UPCE=function(_Barcode){_inherits$8(UPCE,_Barcode);function UPCE(data,options){_classCallCheck$c(this,UPCE);var _this=_possibleConstructorReturn$8(this,(UPCE.__proto__||Object.getPrototypeOf(UPCE)).call(this,data,options));// Code may be 6 or 8 digits;
    // A 7 digit code is ambiguous as to whether the extra digit
    // is a UPC-A check or number system digit.
    _this.isValid=false;if(data.search(/^[0-9]{6}$/)!==-1){_this.middleDigits=data;_this.upcA=expandToUPCA(data,"0");_this.text=options.text||''+_this.upcA[0]+data+_this.upcA[_this.upcA.length-1];_this.isValid=true;}else if(data.search(/^[01][0-9]{7}$/)!==-1){_this.middleDigits=data.substring(1,data.length-1);_this.upcA=expandToUPCA(_this.middleDigits,data[0]);if(_this.upcA[_this.upcA.length-1]===data[data.length-1]){_this.isValid=true;}else {// checksum mismatch
    return _possibleConstructorReturn$8(_this);}}else {return _possibleConstructorReturn$8(_this);}_this.displayValue=options.displayValue;// Make sure the font is not bigger than the space between the guard bars
    if(options.fontSize>options.width*10){_this.fontSize=options.width*10;}else {_this.fontSize=options.fontSize;}// Make the guard bars go down half the way of the text
    _this.guardHeight=options.height+_this.fontSize/2+options.textMargin;return _this;}_createClass$7(UPCE,[{key:'valid',value:function valid(){return this.isValid;}},{key:'encode',value:function encode(){if(this.options.flat){return this.flatEncoding();}else {return this.guardedEncoding();}}},{key:'flatEncoding',value:function flatEncoding(){var result="";result+="101";result+=this.encodeMiddleDigits();result+="010101";return {data:result,text:this.text};}},{key:'guardedEncoding',value:function guardedEncoding(){var result=[];// Add the UPC-A number system digit beneath the quiet zone
    if(this.displayValue){result.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}});}// Add the guard bars
    result.push({data:"101",options:{height:this.guardHeight}});// Add the 6 UPC-E digits
    result.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}});// Add the end bits
    result.push({data:"010101",options:{height:this.guardHeight}});// Add the UPC-A check digit beneath the quiet zone
    if(this.displayValue){result.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}});}return result;}},{key:'encodeMiddleDigits',value:function encodeMiddleDigits(){var numberSystem=this.upcA[0];var checkDigit=this.upcA[this.upcA.length-1];var parity=PARITIES[parseInt(checkDigit)][parseInt(numberSystem)];return (0, _encoder2.default)(this.middleDigits,parity);}}]);return UPCE;}(_Barcode3$2.default);function expandToUPCA(middleDigits,numberSystem){var lastUpcE=parseInt(middleDigits[middleDigits.length-1]);var expansion=EXPANSIONS[lastUpcE];var result="";var digitIndex=0;for(var i=0;i<expansion.length;i++){var c=expansion[i];if(c==='X'){result+=middleDigits[digitIndex++];}else {result+=c;}}result=''+numberSystem+result;return ''+result+(0, UPC_1.checksum)(result);}var _default$k=UPCE;var UPCE_1=/*#__PURE__*/Object.defineProperty({default:_default$k},'__esModule',{value:true});var EAN_UPC=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.UPCE=exports.UPC=exports.EAN2=exports.EAN5=exports.EAN8=exports.EAN13=undefined;var _EAN2=_interopRequireDefault(EAN13_1);var _EAN4=_interopRequireDefault(EAN8_1);var _EAN6=_interopRequireDefault(EAN5_1);var _EAN8=_interopRequireDefault(EAN2_1);var _UPC2=_interopRequireDefault(UPC_1);var _UPCE2=_interopRequireDefault(UPCE_1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.EAN13=_EAN2.default;exports.EAN8=_EAN4.default;exports.EAN5=_EAN6.default;exports.EAN2=_EAN8.default;exports.UPC=_UPC2.default;exports.UPCE=_UPCE2.default;});var constants=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.START_BIN='1010';exports.END_BIN='11101';exports.BINARIES=['00110','10001','01001','11000','00101','10100','01100','00011','10010','01010'];});var _createClass$6=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Barcode3$1=_interopRequireDefault$c(Barcode_1);function _interopRequireDefault$c(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$b(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$7(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$7(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ITF$1=function(_Barcode){_inherits$7(ITF,_Barcode);function ITF(){_classCallCheck$b(this,ITF);return _possibleConstructorReturn$7(this,(ITF.__proto__||Object.getPrototypeOf(ITF)).apply(this,arguments));}_createClass$6(ITF,[{key:'valid',value:function valid(){return this.data.search(/^([0-9]{2})+$/)!==-1;}},{key:'encode',value:function encode(){var _this2=this;// Calculate all the digit pairs
    var encoded=this.data.match(/.{2}/g).map(function(pair){return _this2.encodePair(pair);}).join('');return {data:constants.START_BIN+encoded+constants.END_BIN,text:this.text};}// Calculate the data of a number pair
    },{key:'encodePair',value:function encodePair(pair){var second=constants.BINARIES[pair[1]];return constants.BINARIES[pair[0]].split('').map(function(first,idx){return (first==='1'?'111':'1')+(second[idx]==='1'?'000':'0');}).join('');}}]);return ITF;}(_Barcode3$1.default);var _default$j=ITF$1;var ITF_1=/*#__PURE__*/Object.defineProperty({default:_default$j},'__esModule',{value:true});var _createClass$5=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _ITF3=_interopRequireDefault$b(ITF_1);function _interopRequireDefault$b(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$a(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$6(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$6(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}// Calculate the checksum digit
    var checksum=function checksum(data){var res=data.substr(0,13).split('').map(function(num){return parseInt(num,10);}).reduce(function(sum,n,idx){return sum+n*(3-idx%2*2);},0);return Math.ceil(res/10)*10-res;};var ITF14=function(_ITF){_inherits$6(ITF14,_ITF);function ITF14(data,options){_classCallCheck$a(this,ITF14);// Add checksum if it does not exist
    if(data.search(/^[0-9]{13}$/)!==-1){data+=checksum(data);}return _possibleConstructorReturn$6(this,(ITF14.__proto__||Object.getPrototypeOf(ITF14)).call(this,data,options));}_createClass$5(ITF14,[{key:'valid',value:function valid(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===checksum(this.data);}}]);return ITF14;}(_ITF3.default);var _default$i=ITF14;var ITF14_1=/*#__PURE__*/Object.defineProperty({default:_default$i},'__esModule',{value:true});var ITF=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.ITF14=exports.ITF=undefined;var _ITF2=_interopRequireDefault(ITF_1);var _ITF4=_interopRequireDefault(ITF14_1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.ITF=_ITF2.default;exports.ITF14=_ITF4.default;});var _createClass$4=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Barcode3=_interopRequireDefault$a(Barcode_1);function _interopRequireDefault$a(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$9(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$5(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$5(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}// Encoding documentation
    // https://en.wikipedia.org/wiki/MSI_Barcode#Character_set_and_binary_lookup
    var MSI$1=function(_Barcode){_inherits$5(MSI,_Barcode);function MSI(data,options){_classCallCheck$9(this,MSI);return _possibleConstructorReturn$5(this,(MSI.__proto__||Object.getPrototypeOf(MSI)).call(this,data,options));}_createClass$4(MSI,[{key:"encode",value:function encode(){// Start bits
    var ret="110";for(var i=0;i<this.data.length;i++){// Convert the character to binary (always 4 binary digits)
    var digit=parseInt(this.data[i]);var bin=digit.toString(2);bin=addZeroes(bin,4-bin.length);// Add 100 for every zero and 110 for every 1
    for(var b=0;b<bin.length;b++){ret+=bin[b]=="0"?"100":"110";}}// End bits
    ret+="1001";return {data:ret,text:this.text};}},{key:"valid",value:function valid(){return this.data.search(/^[0-9]+$/)!==-1;}}]);return MSI;}(_Barcode3.default);function addZeroes(number,n){for(var i=0;i<n;i++){number="0"+number;}return number;}var _default$h=MSI$1;var MSI_1=/*#__PURE__*/Object.defineProperty({default:_default$h},'__esModule',{value:true});var mod10_1=mod10;var mod11_1=mod11;function mod10(number){var sum=0;for(var i=0;i<number.length;i++){var n=parseInt(number[i]);if((i+number.length)%2===0){sum+=n;}else {sum+=n*2%10+Math.floor(n*2/10);}}return (10-sum%10)%10;}function mod11(number){var sum=0;var weights=[2,3,4,5,6,7];for(var i=0;i<number.length;i++){var n=parseInt(number[number.length-1-i]);sum+=weights[i%weights.length]*n;}return (11-sum%11)%11;}var checksums=/*#__PURE__*/Object.defineProperty({mod10:mod10_1,mod11:mod11_1},'__esModule',{value:true});var _MSI3$3=_interopRequireDefault$9(MSI_1);function _interopRequireDefault$9(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$8(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$4(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$4(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var MSI10=function(_MSI){_inherits$4(MSI10,_MSI);function MSI10(data,options){_classCallCheck$8(this,MSI10);return _possibleConstructorReturn$4(this,(MSI10.__proto__||Object.getPrototypeOf(MSI10)).call(this,data+(0, checksums.mod10)(data),options));}return MSI10;}(_MSI3$3.default);var _default$g=MSI10;var MSI10_1=/*#__PURE__*/Object.defineProperty({default:_default$g},'__esModule',{value:true});var _MSI3$2=_interopRequireDefault$8(MSI_1);function _interopRequireDefault$8(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$7(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$3(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$3(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var MSI11=function(_MSI){_inherits$3(MSI11,_MSI);function MSI11(data,options){_classCallCheck$7(this,MSI11);return _possibleConstructorReturn$3(this,(MSI11.__proto__||Object.getPrototypeOf(MSI11)).call(this,data+(0, checksums.mod11)(data),options));}return MSI11;}(_MSI3$2.default);var _default$f=MSI11;var MSI11_1=/*#__PURE__*/Object.defineProperty({default:_default$f},'__esModule',{value:true});var _MSI3$1=_interopRequireDefault$7(MSI_1);function _interopRequireDefault$7(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$6(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$2(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$2(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var MSI1010=function(_MSI){_inherits$2(MSI1010,_MSI);function MSI1010(data,options){_classCallCheck$6(this,MSI1010);data+=(0, checksums.mod10)(data);data+=(0, checksums.mod10)(data);return _possibleConstructorReturn$2(this,(MSI1010.__proto__||Object.getPrototypeOf(MSI1010)).call(this,data,options));}return MSI1010;}(_MSI3$1.default);var _default$e=MSI1010;var MSI1010_1=/*#__PURE__*/Object.defineProperty({default:_default$e},'__esModule',{value:true});var _MSI3=_interopRequireDefault$6(MSI_1);function _interopRequireDefault$6(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$5(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn$1(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits$1(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var MSI1110=function(_MSI){_inherits$1(MSI1110,_MSI);function MSI1110(data,options){_classCallCheck$5(this,MSI1110);data+=(0, checksums.mod11)(data);data+=(0, checksums.mod10)(data);return _possibleConstructorReturn$1(this,(MSI1110.__proto__||Object.getPrototypeOf(MSI1110)).call(this,data,options));}return MSI1110;}(_MSI3.default);var _default$d=MSI1110;var MSI1110_1=/*#__PURE__*/Object.defineProperty({default:_default$d},'__esModule',{value:true});var MSI=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.MSI1110=exports.MSI1010=exports.MSI11=exports.MSI10=exports.MSI=undefined;var _MSI2=_interopRequireDefault(MSI_1);var _MSI4=_interopRequireDefault(MSI10_1);var _MSI6=_interopRequireDefault(MSI11_1);var _MSI8=_interopRequireDefault(MSI1010_1);var _MSI10=_interopRequireDefault(MSI1110_1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.MSI=_MSI2.default;exports.MSI10=_MSI4.default;exports.MSI11=_MSI6.default;exports.MSI1010=_MSI8.default;exports.MSI1110=_MSI10.default;});var pharmacode_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.pharmacode=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Barcode3=_interopRequireDefault(Barcode_1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}// Encoding documentation
    // http://www.gomaro.ch/ftproot/Laetus_PHARMA-CODE.pdf
    var pharmacode=function(_Barcode){_inherits(pharmacode,_Barcode);function pharmacode(data,options){_classCallCheck(this,pharmacode);var _this=_possibleConstructorReturn(this,(pharmacode.__proto__||Object.getPrototypeOf(pharmacode)).call(this,data,options));_this.number=parseInt(data,10);return _this;}_createClass(pharmacode,[{key:"encode",value:function encode(){var z=this.number;var result="";// http://i.imgur.com/RMm4UDJ.png
    // (source: http://www.gomaro.ch/ftproot/Laetus_PHARMA-CODE.pdf, page: 34)
    while(!isNaN(z)&&z!=0){if(z%2===0){// Even
    result="11100"+result;z=(z-2)/2;}else {// Odd
    result="100"+result;z=(z-1)/2;}}// Remove the two last zeroes
    result=result.slice(0,-2);return {data:result,text:this.text};}},{key:"valid",value:function valid(){return this.number>=3&&this.number<=131070;}}]);return pharmacode;}(_Barcode3.default);exports.pharmacode=pharmacode;});var codabar_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.codabar=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Barcode3=_interopRequireDefault(Barcode_1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}// Encoding specification:
    // http://www.barcodeisland.com/codabar.phtml
    var codabar=function(_Barcode){_inherits(codabar,_Barcode);function codabar(data,options){_classCallCheck(this,codabar);if(data.search(/^[0-9\-\$\:\.\+\/]+$/)===0){data="A"+data+"A";}var _this=_possibleConstructorReturn(this,(codabar.__proto__||Object.getPrototypeOf(codabar)).call(this,data.toUpperCase(),options));_this.text=_this.options.text||_this.text.replace(/[A-D]/g,'');return _this;}_createClass(codabar,[{key:"valid",value:function valid(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1;}},{key:"encode",value:function encode(){var result=[];var encodings=this.getEncodings();for(var i=0;i<this.data.length;i++){result.push(encodings[this.data.charAt(i)]);// for all characters except the last, append a narrow-space ("0")
    if(i!==this.data.length-1){result.push("0");}}return {text:this.text,data:result.join('')};}},{key:"getEncodings",value:function getEncodings(){return {"0":"101010011","1":"101011001","2":"101001011","3":"110010101","4":"101101001","5":"110101001","6":"100101011","7":"100101101","8":"100110101","9":"110100101","-":"101001101","$":"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011","A":"1011001001","B":"1001001011","C":"1010010011","D":"1010011001"};}}]);return codabar;}(_Barcode3.default);exports.codabar=codabar;});var GenericBarcode_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.GenericBarcode=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Barcode3=_interopRequireDefault(Barcode_1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var GenericBarcode=function(_Barcode){_inherits(GenericBarcode,_Barcode);function GenericBarcode(data,options){_classCallCheck(this,GenericBarcode);return _possibleConstructorReturn(this,(GenericBarcode.__proto__||Object.getPrototypeOf(GenericBarcode)).call(this,data,options));// Sets this.data and this.text
    }// Return the corresponding binary numbers for the data provided
    _createClass(GenericBarcode,[{key:"encode",value:function encode(){return {data:"10101010101010101010101010101010101010101",text:this.text};}// Resturn true/false if the string provided is valid for this encoder
    },{key:"valid",value:function valid(){return true;}}]);return GenericBarcode;}(_Barcode3.default);exports.GenericBarcode=GenericBarcode;});var _default$c={CODE39:CODE39_1.CODE39,CODE128:CODE128.CODE128,CODE128A:CODE128.CODE128A,CODE128B:CODE128.CODE128B,CODE128C:CODE128.CODE128C,EAN13:EAN_UPC.EAN13,EAN8:EAN_UPC.EAN8,EAN5:EAN_UPC.EAN5,EAN2:EAN_UPC.EAN2,UPC:EAN_UPC.UPC,UPCE:EAN_UPC.UPCE,ITF14:ITF.ITF14,ITF:ITF.ITF,MSI:MSI.MSI,MSI10:MSI.MSI10,MSI11:MSI.MSI11,MSI1010:MSI.MSI1010,MSI1110:MSI.MSI1110,pharmacode:pharmacode_1.pharmacode,codabar:codabar_1.codabar,GenericBarcode:GenericBarcode_1.GenericBarcode};var barcodes=/*#__PURE__*/Object.defineProperty({default:_default$c},'__esModule',{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _default$b=function(old,replaceObj){return _extends({},old,replaceObj);};var merge=/*#__PURE__*/Object.defineProperty({default:_default$b},'__esModule',{value:true});var _default$a=linearizeEncodings;// Encodings can be nestled like [[1-1, 1-2], 2, [3-1, 3-2]
    // Convert to [1-1, 1-2, 2, 3-1, 3-2]
    function linearizeEncodings(encodings){var linearEncodings=[];function nextLevel(encoded){if(Array.isArray(encoded)){for(var i=0;i<encoded.length;i++){nextLevel(encoded[i]);}}else {encoded.text=encoded.text||"";encoded.data=encoded.data||"";linearEncodings.push(encoded);}}nextLevel(encodings);return linearEncodings;}var linearizeEncodings_1=/*#__PURE__*/Object.defineProperty({default:_default$a},'__esModule',{value:true});var _default$9=fixOptions;function fixOptions(options){// Fix the margins
    options.marginTop=options.marginTop||options.margin;options.marginBottom=options.marginBottom||options.margin;options.marginRight=options.marginRight||options.margin;options.marginLeft=options.marginLeft||options.margin;return options;}var fixOptions_1=/*#__PURE__*/Object.defineProperty({default:_default$9},'__esModule',{value:true});var _default$8=optionsFromStrings;// Convert string to integers/booleans where it should be
    function optionsFromStrings(options){var intOptions=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var intOption in intOptions){if(intOptions.hasOwnProperty(intOption)){intOption=intOptions[intOption];if(typeof options[intOption]==="string"){options[intOption]=parseInt(options[intOption],10);}}}if(typeof options["displayValue"]==="string"){options["displayValue"]=options["displayValue"]!="false";}return options;}var optionsFromStrings_1=/*#__PURE__*/Object.defineProperty({default:_default$8},'__esModule',{value:true});var defaults={width:2,height:100,format:"auto",displayValue:true,fontOptions:"",font:"monospace",text:undefined,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:undefined,marginBottom:undefined,marginLeft:undefined,marginRight:undefined,valid:function valid(){}};var _default$7=defaults;var defaults_1=/*#__PURE__*/Object.defineProperty({default:_default$7},'__esModule',{value:true});var _optionsFromStrings2$1=_interopRequireDefault$5(optionsFromStrings_1);var _defaults2$1=_interopRequireDefault$5(defaults_1);function _interopRequireDefault$5(obj){return obj&&obj.__esModule?obj:{default:obj};}function getOptionsFromElement(element){var options={};for(var property in _defaults2$1.default){if(_defaults2$1.default.hasOwnProperty(property)){// jsbarcode-*
    if(element.hasAttribute("jsbarcode-"+property.toLowerCase())){options[property]=element.getAttribute("jsbarcode-"+property.toLowerCase());}// data-*
    if(element.hasAttribute("data-"+property.toLowerCase())){options[property]=element.getAttribute("data-"+property.toLowerCase());}}}options["value"]=element.getAttribute("jsbarcode-value")||element.getAttribute("data-value");// Since all atributes are string they need to be converted to integers
    options=(0, _optionsFromStrings2$1.default)(options);return options;}var _default$6=getOptionsFromElement;var getOptionsFromElement_1=/*#__PURE__*/Object.defineProperty({default:_default$6},'__esModule',{value:true});var shared=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.getTotalWidthOfEncodings=exports.calculateEncodingAttributes=exports.getBarcodePadding=exports.getEncodingHeight=exports.getMaximumHeightOfEncodings=undefined;var _merge2=_interopRequireDefault(merge);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function getEncodingHeight(encoding,options){return options.height+(options.displayValue&&encoding.text.length>0?options.fontSize+options.textMargin:0)+options.marginTop+options.marginBottom;}function getBarcodePadding(textWidth,barcodeWidth,options){if(options.displayValue&&barcodeWidth<textWidth){if(options.textAlign=="center"){return Math.floor((textWidth-barcodeWidth)/2);}else if(options.textAlign=="left"){return 0;}else if(options.textAlign=="right"){return Math.floor(textWidth-barcodeWidth);}}return 0;}function calculateEncodingAttributes(encodings,barcodeOptions,context){for(var i=0;i<encodings.length;i++){var encoding=encodings[i];var options=(0, _merge2.default)(barcodeOptions,encoding.options);// Calculate the width of the encoding
    var textWidth;if(options.displayValue){textWidth=messureText(encoding.text,options,context);}else {textWidth=0;}var barcodeWidth=encoding.data.length*options.width;encoding.width=Math.ceil(Math.max(textWidth,barcodeWidth));encoding.height=getEncodingHeight(encoding,options);encoding.barcodePadding=getBarcodePadding(textWidth,barcodeWidth,options);}}function getTotalWidthOfEncodings(encodings){var totalWidth=0;for(var i=0;i<encodings.length;i++){totalWidth+=encodings[i].width;}return totalWidth;}function getMaximumHeightOfEncodings(encodings){var maxHeight=0;for(var i=0;i<encodings.length;i++){if(encodings[i].height>maxHeight){maxHeight=encodings[i].height;}}return maxHeight;}function messureText(string,options,context){var ctx;if(context){ctx=context;}else if(typeof document!=="undefined"){ctx=document.createElement("canvas").getContext("2d");}else {// If the text cannot be messured we will return 0.
    // This will make some barcode with big text render incorrectly
    return 0;}ctx.font=options.fontOptions+" "+options.fontSize+"px "+options.font;// Calculate the width of the encoding
    var measureTextResult=ctx.measureText(string);if(!measureTextResult){// Some implementations don't implement measureText and return undefined.
    // If the text cannot be measured we will return 0.
    // This will make some barcode with big text render incorrectly
    return 0;}var size=measureTextResult.width;return size;}exports.getMaximumHeightOfEncodings=getMaximumHeightOfEncodings;exports.getEncodingHeight=getEncodingHeight;exports.getBarcodePadding=getBarcodePadding;exports.calculateEncodingAttributes=calculateEncodingAttributes;exports.getTotalWidthOfEncodings=getTotalWidthOfEncodings;});var _createClass$3=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _merge2$2=_interopRequireDefault$4(merge);function _interopRequireDefault$4(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$4(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var CanvasRenderer$1=function(){function CanvasRenderer(canvas,encodings,options){_classCallCheck$4(this,CanvasRenderer);this.canvas=canvas;this.encodings=encodings;this.options=options;}_createClass$3(CanvasRenderer,[{key:"render",value:function render(){// Abort if the browser does not support HTML5 canvas
    if(!this.canvas.getContext){throw new Error('The browser does not support canvas.');}this.prepareCanvas();for(var i=0;i<this.encodings.length;i++){var encodingOptions=(0, _merge2$2.default)(this.options,this.encodings[i].options);this.drawCanvasBarcode(encodingOptions,this.encodings[i]);this.drawCanvasText(encodingOptions,this.encodings[i]);this.moveCanvasDrawing(this.encodings[i]);}this.restoreCanvas();}},{key:"prepareCanvas",value:function prepareCanvas(){// Get the canvas context
    var ctx=this.canvas.getContext("2d");ctx.save();(0, shared.calculateEncodingAttributes)(this.encodings,this.options,ctx);var totalWidth=(0, shared.getTotalWidthOfEncodings)(this.encodings);var maxHeight=(0, shared.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=totalWidth+this.options.marginLeft+this.options.marginRight;this.canvas.height=maxHeight;// Paint the canvas
    ctx.clearRect(0,0,this.canvas.width,this.canvas.height);if(this.options.background){ctx.fillStyle=this.options.background;ctx.fillRect(0,0,this.canvas.width,this.canvas.height);}ctx.translate(this.options.marginLeft,0);}},{key:"drawCanvasBarcode",value:function drawCanvasBarcode(options,encoding){// Get the canvas context
    var ctx=this.canvas.getContext("2d");var binary=encoding.data;// Creates the barcode out of the encoded binary
    var yFrom;if(options.textPosition=="top"){yFrom=options.marginTop+options.fontSize+options.textMargin;}else {yFrom=options.marginTop;}ctx.fillStyle=options.lineColor;for(var b=0;b<binary.length;b++){var x=b*options.width+encoding.barcodePadding;if(binary[b]==="1"){ctx.fillRect(x,yFrom,options.width,options.height);}else if(binary[b]){ctx.fillRect(x,yFrom,options.width,options.height*binary[b]);}}}},{key:"drawCanvasText",value:function drawCanvasText(options,encoding){// Get the canvas context
    var ctx=this.canvas.getContext("2d");var font=options.fontOptions+" "+options.fontSize+"px "+options.font;// Draw the text if displayValue is set
    if(options.displayValue){var x,y;if(options.textPosition=="top"){y=options.marginTop+options.fontSize-options.textMargin;}else {y=options.height+options.textMargin+options.marginTop+options.fontSize;}ctx.font=font;// Draw the text in the correct X depending on the textAlign option
    if(options.textAlign=="left"||encoding.barcodePadding>0){x=0;ctx.textAlign='left';}else if(options.textAlign=="right"){x=encoding.width-1;ctx.textAlign='right';}// In all other cases, center the text
    else {x=encoding.width/2;ctx.textAlign='center';}ctx.fillText(encoding.text,x,y);}}},{key:"moveCanvasDrawing",value:function moveCanvasDrawing(encoding){var ctx=this.canvas.getContext("2d");ctx.translate(encoding.width,0);}},{key:"restoreCanvas",value:function restoreCanvas(){// Get the canvas context
    var ctx=this.canvas.getContext("2d");ctx.restore();}}]);return CanvasRenderer;}();var _default$5=CanvasRenderer$1;var canvas=/*#__PURE__*/Object.defineProperty({default:_default$5},'__esModule',{value:true});var _createClass$2=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _merge2$1=_interopRequireDefault$3(merge);function _interopRequireDefault$3(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck$3(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var svgns="http://www.w3.org/2000/svg";var SVGRenderer=function(){function SVGRenderer(svg,encodings,options){_classCallCheck$3(this,SVGRenderer);this.svg=svg;this.encodings=encodings;this.options=options;this.document=options.xmlDocument||document;}_createClass$2(SVGRenderer,[{key:"render",value:function render(){var currentX=this.options.marginLeft;this.prepareSVG();for(var i=0;i<this.encodings.length;i++){var encoding=this.encodings[i];var encodingOptions=(0, _merge2$1.default)(this.options,encoding.options);var group=this.createGroup(currentX,encodingOptions.marginTop,this.svg);this.setGroupOptions(group,encodingOptions);this.drawSvgBarcode(group,encodingOptions,encoding);this.drawSVGText(group,encodingOptions,encoding);currentX+=encoding.width;}}},{key:"prepareSVG",value:function prepareSVG(){// Clear the SVG
    while(this.svg.firstChild){this.svg.removeChild(this.svg.firstChild);}(0, shared.calculateEncodingAttributes)(this.encodings,this.options);var totalWidth=(0, shared.getTotalWidthOfEncodings)(this.encodings);var maxHeight=(0, shared.getMaximumHeightOfEncodings)(this.encodings);var width=totalWidth+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(width,maxHeight);if(this.options.background){this.drawRect(0,0,width,maxHeight,this.svg).setAttribute("style","fill:"+this.options.background+";");}}},{key:"drawSvgBarcode",value:function drawSvgBarcode(parent,options,encoding){var binary=encoding.data;// Creates the barcode out of the encoded binary
    var yFrom;if(options.textPosition=="top"){yFrom=options.fontSize+options.textMargin;}else {yFrom=0;}var barWidth=0;var x=0;for(var b=0;b<binary.length;b++){x=b*options.width+encoding.barcodePadding;if(binary[b]==="1"){barWidth++;}else if(barWidth>0){this.drawRect(x-options.width*barWidth,yFrom,options.width*barWidth,options.height,parent);barWidth=0;}}// Last draw is needed since the barcode ends with 1
    if(barWidth>0){this.drawRect(x-options.width*(barWidth-1),yFrom,options.width*barWidth,options.height,parent);}}},{key:"drawSVGText",value:function drawSVGText(parent,options,encoding){var textElem=this.document.createElementNS(svgns,'text');// Draw the text if displayValue is set
    if(options.displayValue){var x,y;textElem.setAttribute("style","font:"+options.fontOptions+" "+options.fontSize+"px "+options.font);if(options.textPosition=="top"){y=options.fontSize-options.textMargin;}else {y=options.height+options.textMargin+options.fontSize;}// Draw the text in the correct X depending on the textAlign option
    if(options.textAlign=="left"||encoding.barcodePadding>0){x=0;textElem.setAttribute("text-anchor","start");}else if(options.textAlign=="right"){x=encoding.width-1;textElem.setAttribute("text-anchor","end");}// In all other cases, center the text
    else {x=encoding.width/2;textElem.setAttribute("text-anchor","middle");}textElem.setAttribute("x",x);textElem.setAttribute("y",y);textElem.appendChild(this.document.createTextNode(encoding.text));parent.appendChild(textElem);}}},{key:"setSvgAttributes",value:function setSvgAttributes(width,height){var svg=this.svg;svg.setAttribute("width",width+"px");svg.setAttribute("height",height+"px");svg.setAttribute("x","0px");svg.setAttribute("y","0px");svg.setAttribute("viewBox","0 0 "+width+" "+height);svg.setAttribute("xmlns",svgns);svg.setAttribute("version","1.1");svg.setAttribute("style","transform: translate(0,0)");}},{key:"createGroup",value:function createGroup(x,y,parent){var group=this.document.createElementNS(svgns,'g');group.setAttribute("transform","translate("+x+", "+y+")");parent.appendChild(group);return group;}},{key:"setGroupOptions",value:function setGroupOptions(group,options){group.setAttribute("style","fill:"+options.lineColor+";");}},{key:"drawRect",value:function drawRect(x,y,width,height,parent){var rect=this.document.createElementNS(svgns,'rect');rect.setAttribute("x",x);rect.setAttribute("y",y);rect.setAttribute("width",width);rect.setAttribute("height",height);parent.appendChild(rect);return rect;}}]);return SVGRenderer;}();var _default$4=SVGRenderer;var svg=/*#__PURE__*/Object.defineProperty({default:_default$4},'__esModule',{value:true});var _createClass$1=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck$2(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var ObjectRenderer=function(){function ObjectRenderer(object,encodings,options){_classCallCheck$2(this,ObjectRenderer);this.object=object;this.encodings=encodings;this.options=options;}_createClass$1(ObjectRenderer,[{key:"render",value:function render(){this.object.encodings=this.encodings;}}]);return ObjectRenderer;}();var _default$3=ObjectRenderer;var object=/*#__PURE__*/Object.defineProperty({default:_default$3},'__esModule',{value:true});var _canvas2=_interopRequireDefault$2(canvas);var _svg2=_interopRequireDefault$2(svg);var _object2=_interopRequireDefault$2(object);function _interopRequireDefault$2(obj){return obj&&obj.__esModule?obj:{default:obj};}var _default$2={CanvasRenderer:_canvas2.default,SVGRenderer:_svg2.default,ObjectRenderer:_object2.default};var renderers=/*#__PURE__*/Object.defineProperty({default:_default$2},'__esModule',{value:true});function _classCallCheck$1(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var InvalidInputException=function(_Error){_inherits(InvalidInputException,_Error);function InvalidInputException(symbology,input){_classCallCheck$1(this,InvalidInputException);var _this=_possibleConstructorReturn(this,(InvalidInputException.__proto__||Object.getPrototypeOf(InvalidInputException)).call(this));_this.name="InvalidInputException";_this.symbology=symbology;_this.input=input;_this.message='"'+_this.input+'" is not a valid input for '+_this.symbology;return _this;}return InvalidInputException;}(Error);var InvalidElementException=function(_Error2){_inherits(InvalidElementException,_Error2);function InvalidElementException(){_classCallCheck$1(this,InvalidElementException);var _this2=_possibleConstructorReturn(this,(InvalidElementException.__proto__||Object.getPrototypeOf(InvalidElementException)).call(this));_this2.name="InvalidElementException";_this2.message="Not supported type to render on";return _this2;}return InvalidElementException;}(Error);var NoElementException=function(_Error3){_inherits(NoElementException,_Error3);function NoElementException(){_classCallCheck$1(this,NoElementException);var _this3=_possibleConstructorReturn(this,(NoElementException.__proto__||Object.getPrototypeOf(NoElementException)).call(this));_this3.name="NoElementException";_this3.message="No element to render on.";return _this3;}return NoElementException;}(Error);var InvalidInputException_1=InvalidInputException;var InvalidElementException_1=InvalidElementException;var NoElementException_1=NoElementException;var exceptions=/*#__PURE__*/Object.defineProperty({InvalidInputException:InvalidInputException_1,InvalidElementException:InvalidElementException_1,NoElementException:NoElementException_1},'__esModule',{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};/* global HTMLImageElement */ /* global HTMLCanvasElement */ /* global SVGElement */var _getOptionsFromElement2=_interopRequireDefault$1(getOptionsFromElement_1);var _renderers2=_interopRequireDefault$1(renderers);function _interopRequireDefault$1(obj){return obj&&obj.__esModule?obj:{default:obj};}// Takes an element and returns an object with information about how
    // it should be rendered
    // This could also return an array with these objects
    // {
    //   element: The element that the renderer should draw on
    //   renderer: The name of the renderer
    //   afterRender (optional): If something has to done after the renderer
    //     completed, calls afterRender (function)
    //   options (optional): Options that can be defined in the element
    // }
    function getRenderProperties(element){// If the element is a string, query select call again
    if(typeof element==="string"){return querySelectedRenderProperties(element);}// If element is array. Recursivly call with every object in the array
    else if(Array.isArray(element)){var returnArray=[];for(var i=0;i<element.length;i++){returnArray.push(getRenderProperties(element[i]));}return returnArray;}// If element, render on canvas and set the uri as src
    else if(typeof HTMLCanvasElement!=='undefined'&&element instanceof HTMLImageElement){return newCanvasRenderProperties(element);}// If SVG
    else if(element&&element.nodeName&&element.nodeName.toLowerCase()==='svg'||typeof SVGElement!=='undefined'&&element instanceof SVGElement){return {element:element,options:(0, _getOptionsFromElement2.default)(element),renderer:_renderers2.default.SVGRenderer};}// If canvas (in browser)
    else if(typeof HTMLCanvasElement!=='undefined'&&element instanceof HTMLCanvasElement){return {element:element,options:(0, _getOptionsFromElement2.default)(element),renderer:_renderers2.default.CanvasRenderer};}// If canvas (in node)
    else if(element&&element.getContext){return {element:element,renderer:_renderers2.default.CanvasRenderer};}else if(element&&(typeof element==="undefined"?"undefined":_typeof(element))==='object'&&!element.nodeName){return {element:element,renderer:_renderers2.default.ObjectRenderer};}else {throw new exceptions.InvalidElementException();}}function querySelectedRenderProperties(string){var selector=document.querySelectorAll(string);if(selector.length===0){return undefined;}else {var returnArray=[];for(var i=0;i<selector.length;i++){returnArray.push(getRenderProperties(selector[i]));}return returnArray;}}function newCanvasRenderProperties(imgElement){var canvas=document.createElement('canvas');return {element:canvas,options:(0, _getOptionsFromElement2.default)(imgElement),renderer:_renderers2.default.CanvasRenderer,afterRender:function afterRender(){imgElement.setAttribute("src",canvas.toDataURL());}};}var _default$1=getRenderProperties;var getRenderProperties_1=/*#__PURE__*/Object.defineProperty({default:_default$1},'__esModule',{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}/*eslint no-console: 0 */var ErrorHandler=function(){function ErrorHandler(api){_classCallCheck(this,ErrorHandler);this.api=api;}_createClass(ErrorHandler,[{key:"handleCatch",value:function handleCatch(e){// If babel supported extending of Error in a correct way instanceof would be used here
    if(e.name==="InvalidInputException"){if(this.api._options.valid!==this.api._defaults.valid){this.api._options.valid(false);}else {throw e.message;}}else {throw e;}this.api.render=function(){};}},{key:"wrapBarcodeCall",value:function wrapBarcodeCall(func){try{var result=func.apply(undefined,arguments);this.api._options.valid(true);return result;}catch(e){this.handleCatch(e);return this.api;}}}]);return ErrorHandler;}();var _default=ErrorHandler;var ErrorHandler_1=/*#__PURE__*/Object.defineProperty({default:_default},'__esModule',{value:true});var _barcodes2=_interopRequireDefault(barcodes);var _merge2=_interopRequireDefault(merge);var _linearizeEncodings2=_interopRequireDefault(linearizeEncodings_1);var _fixOptions2=_interopRequireDefault(fixOptions_1);var _getRenderProperties2=_interopRequireDefault(getRenderProperties_1);var _optionsFromStrings2=_interopRequireDefault(optionsFromStrings_1);var _ErrorHandler2=_interopRequireDefault(ErrorHandler_1);var _defaults2=_interopRequireDefault(defaults_1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}// The protype of the object returned from the JsBarcode() call
    // Help functions
    var API=function API(){};// The first call of the library API
    // Will return an object with all barcodes calls and the data that is used
    // by the renderers
    // Default values
    // Exceptions
    // Import all the barcodes
    var JsBarcode=function JsBarcode(element,text,options){var api=new API();if(typeof element==="undefined"){throw Error("No element to render on was provided.");}// Variables that will be pased through the API calls
    api._renderProperties=(0, _getRenderProperties2.default)(element);api._encodings=[];api._options=_defaults2.default;api._errorHandler=new _ErrorHandler2.default(api);// If text is set, use the simple syntax (render the barcode directly)
    if(typeof text!=="undefined"){options=options||{};if(!options.format){options.format=autoSelectBarcode();}api.options(options)[options.format](text,options).render();}return api;};// To make tests work TODO: remove
    JsBarcode.getModule=function(name){return _barcodes2.default[name];};// Register all barcodes
    for(var name$1 in _barcodes2.default){if(_barcodes2.default.hasOwnProperty(name$1)){// Security check if the propery is a prototype property
    registerBarcode(_barcodes2.default,name$1);}}function registerBarcode(barcodes,name){API.prototype[name]=API.prototype[name.toUpperCase()]=API.prototype[name.toLowerCase()]=function(text,options){var api=this;return api._errorHandler.wrapBarcodeCall(function(){// Ensure text is options.text
    options.text=typeof options.text==='undefined'?undefined:''+options.text;var newOptions=(0, _merge2.default)(api._options,options);newOptions=(0, _optionsFromStrings2.default)(newOptions);var Encoder=barcodes[name];var encoded=encode(text,Encoder,newOptions);api._encodings.push(encoded);return api;});};}// encode() handles the Encoder call and builds the binary string to be rendered
    function encode(text,Encoder,options){// Ensure that text is a string
    text=""+text;var encoder=new Encoder(text,options);// If the input is not valid for the encoder, throw error.
    // If the valid callback option is set, call it instead of throwing error
    if(!encoder.valid()){throw new exceptions.InvalidInputException(encoder.constructor.name,text);}// Make a request for the binary data (and other infromation) that should be rendered
    var encoded=encoder.encode();// Encodings can be nestled like [[1-1, 1-2], 2, [3-1, 3-2]
    // Convert to [1-1, 1-2, 2, 3-1, 3-2]
    encoded=(0, _linearizeEncodings2.default)(encoded);// Merge
    for(var i=0;i<encoded.length;i++){encoded[i].options=(0, _merge2.default)(options,encoded[i].options);}return encoded;}function autoSelectBarcode(){// If CODE128 exists. Use it
    if(_barcodes2.default["CODE128"]){return "CODE128";}// Else, take the first (probably only) barcode
    return Object.keys(_barcodes2.default)[0];}// Sets global encoder options
    // Added to the api by the JsBarcode function
    API.prototype.options=function(options){this._options=(0, _merge2.default)(this._options,options);return this;};// Will create a blank space (usually in between barcodes)
    API.prototype.blank=function(size){var zeroes=new Array(size+1).join("0");this._encodings.push({data:zeroes});return this;};// Initialize JsBarcode on all HTML elements defined.
    API.prototype.init=function(){// Should do nothing if no elements where found
    if(!this._renderProperties){return;}// Make sure renderProperies is an array
    if(!Array.isArray(this._renderProperties)){this._renderProperties=[this._renderProperties];}var renderProperty;for(var i in this._renderProperties){renderProperty=this._renderProperties[i];var options=(0, _merge2.default)(this._options,renderProperty.options);if(options.format=="auto"){options.format=autoSelectBarcode();}this._errorHandler.wrapBarcodeCall(function(){var text=options.value;var Encoder=_barcodes2.default[options.format.toUpperCase()];var encoded=encode(text,Encoder,options);render(renderProperty,encoded,options);});}};// The render API call. Calls the real render function.
    API.prototype.render=function(){if(!this._renderProperties){throw new exceptions.NoElementException();}if(Array.isArray(this._renderProperties)){for(var i=0;i<this._renderProperties.length;i++){render(this._renderProperties[i],this._encodings,this._options);}}else {render(this._renderProperties,this._encodings,this._options);}return this;};API.prototype._defaults=_defaults2.default;// Prepares the encodings and calls the renderer
    function render(renderProperties,encodings,options){encodings=(0, _linearizeEncodings2.default)(encodings);for(var i=0;i<encodings.length;i++){encodings[i].options=(0, _merge2.default)(options,encodings[i].options);(0, _fixOptions2.default)(encodings[i].options);}(0, _fixOptions2.default)(options);var Renderer=renderProperties.renderer;var renderer=new Renderer(renderProperties.element,encodings,options);renderer.render();if(renderProperties.afterRender){renderProperties.afterRender();}}// Export to browser
    if(typeof window!=="undefined"){window.JsBarcode=JsBarcode;}// Export to jQuery
    /*global jQuery */if(typeof jQuery!=='undefined'){jQuery.fn.JsBarcode=function(content,options){var elementArray=[];jQuery(this).each(function(){elementArray.push(this);});return JsBarcode(elementArray,content,options);};}// Export to commonJS
    var JsBarcode_1=JsBarcode;////////////////////////////////////////////////////////////////////////////////
    /** @internal */class BarcodeItemElement extends ReportItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"barcodeItemView");}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return "rr-barcode rr-item-element";}get debugLabel(){return '';}isDom(dom){return super.isDom(dom)||this.dom.contains(dom);}_initDom(doc,dom){super._initDom(doc,dom);dom.style.textAlign='center';dom.appendChild(this._svg=doc.createElementNS(SVGNS,'svg'));Object.assign(this._svg.style,{height:"100%",background:'',border:'none',pointerEvents:'none'});}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;const cs=getComputedStyle(dom);const svg=this._svg;const s=this.$_getText(ctx,m);let font='';let hFont=0;let hText=0;this._setModelSize(m,dom,hintWidth,hintHeight,true);if(m.showText){font=cs.fontFamily;hFont=parseFloat(cs.fontSize);hText=hFont+m.textMargin+1;}const style=dom.style;const h=(m.height?dom.offsetHeight:60)-Utils.toInt(cs.paddingTop)-Utils.toInt(cs.paddingBottom);try{const opts={format:m.format||BarcodeFormat.CODE128,displayValue:m.showText,margin:0,width:m.barWidth,height:h-hText,font:font,fontSize:hFont,background:'transparent',textAlign:m.textAlign,textPosition:m.textPosition};if(style.color)opts.lineColor=style.color;JsBarcode_1(svg,s,opts);}catch(err){console.error(err);dom.style.backgroundColor='#ff000010';dom.style.color='red';dom.textContent=err;}const w=dom.offsetWidth;svg.style.width=w+'px';if(ctx.printing){SvgElement.prepareExport(this._svg,w,h);}return Size.create(w,h);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_getText(ctx,m){let s='';if(m.value){if(ctx.printing){s=this.getPrintValue(ctx,m);}else {s=m.value;}s=Utils.toStr(s);}else if(m.text){s=m.text;}return s&&m.convertText(s);}}var qrCodeStyling=createCommonjsModule(function(module,exports){!function(t,e){module.exports=e();}(self,function(){return (()=>{var t={192:(t,e)=>{var r,n,o=function(){var t=function(t,e){var r=t,n=a[e],o=null,i=0,u=null,v=[],y={},_=function(t,e){o=function(t){for(var e=new Array(t),r=0;r<t;r+=1){e[r]=new Array(t);for(var n=0;n<t;n+=1)e[r][n]=null;}return e;}(i=4*r+17),m(0,0),m(i-7,0),m(0,i-7),x(),b(),S(t,e),r>=7&&M(t),null==u&&(u=P(r,n,v)),C(u,e);},m=function(t,e){for(var r=-1;r<=7;r+=1)if(!(t+r<=-1||i<=t+r))for(var n=-1;n<=7;n+=1)e+n<=-1||i<=e+n||(o[t+r][e+n]=0<=r&&r<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=n&&n<=4);},b=function(){for(var t=8;t<i-8;t+=1)null==o[t][6]&&(o[t][6]=t%2==0);for(var e=8;e<i-8;e+=1)null==o[6][e]&&(o[6][e]=e%2==0);},x=function(){for(var t=s.getPatternPosition(r),e=0;e<t.length;e+=1)for(var n=0;n<t.length;n+=1){var i=t[e],a=t[n];if(null==o[i][a])for(var u=-2;u<=2;u+=1)for(var c=-2;c<=2;c+=1)o[i+u][a+c]=-2==u||2==u||-2==c||2==c||0==u&&0==c;}},M=function(t){for(var e=s.getBCHTypeNumber(r),n=0;n<18;n+=1){var a=!t&&1==(e>>n&1);o[Math.floor(n/3)][n%3+i-8-3]=a;}for(n=0;n<18;n+=1)a=!t&&1==(e>>n&1),o[n%3+i-8-3][Math.floor(n/3)]=a;},S=function(t,e){for(var r=n<<3|e,a=s.getBCHTypeInfo(r),u=0;u<15;u+=1){var c=!t&&1==(a>>u&1);u<6?o[u][8]=c:u<8?o[u+1][8]=c:o[i-15+u][8]=c;}for(u=0;u<15;u+=1)c=!t&&1==(a>>u&1),u<8?o[8][i-u-1]=c:u<9?o[8][15-u-1+1]=c:o[8][15-u-1]=c;o[i-8][8]=!t;},C=function(t,e){for(var r=-1,n=i-1,a=7,u=0,c=s.getMaskFunction(e),h=i-1;h>0;h-=2)for(6==h&&(h-=1);;){for(var d=0;d<2;d+=1)if(null==o[n][h-d]){var l=!1;u<t.length&&(l=1==(t[u]>>>a&1)),c(n,h-d)&&(l=!l),o[n][h-d]=l,-1==(a-=1)&&(u+=1,a=7);}if((n+=r)<0||i<=n){n-=r,r=-r;break;}}},P=function(t,e,r){for(var n=h.getRSBlocks(t,e),o=d(),i=0;i<r.length;i+=1){var a=r[i];o.put(a.getMode(),4),o.put(a.getLength(),s.getLengthInBits(a.getMode(),t)),a.write(o);}var u=0;for(i=0;i<n.length;i+=1)u+=n[i].dataCount;if(o.getLengthInBits()>8*u)throw "code length overflow. ("+o.getLengthInBits()+">"+8*u+")";for(o.getLengthInBits()+4<=8*u&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*u||(o.put(236,8),o.getLengthInBits()>=8*u));)o.put(17,8);return function(t,e){for(var r=0,n=0,o=0,i=new Array(e.length),a=new Array(e.length),u=0;u<e.length;u+=1){var h=e[u].dataCount,d=e[u].totalCount-h;n=Math.max(n,h),o=Math.max(o,d),i[u]=new Array(h);for(var l=0;l<i[u].length;l+=1)i[u][l]=255&t.getBuffer()[l+r];r+=h;var f=s.getErrorCorrectPolynomial(d),p=c(i[u],f.getLength()-1).mod(f);for(a[u]=new Array(f.getLength()-1),l=0;l<a[u].length;l+=1){var g=l+p.getLength()-a[u].length;a[u][l]=g>=0?p.getAt(g):0;}}var v=0;for(l=0;l<e.length;l+=1)v+=e[l].totalCount;var y=new Array(v),w=0;for(l=0;l<n;l+=1)for(u=0;u<e.length;u+=1)l<i[u].length&&(y[w]=i[u][l],w+=1);for(l=0;l<o;l+=1)for(u=0;u<e.length;u+=1)l<a[u].length&&(y[w]=a[u][l],w+=1);return y;}(o,n);};y.addData=function(t,e){var r=null;switch(e=e||"Byte"){case"Numeric":r=l(t);break;case"Alphanumeric":r=f(t);break;case"Byte":r=p(t);break;case"Kanji":r=g(t);break;default:throw "mode:"+e;}v.push(r),u=null;},y.isDark=function(t,e){if(t<0||i<=t||e<0||i<=e)throw t+","+e;return o[t][e];},y.getModuleCount=function(){return i;},y.make=function(){if(r<1){for(var t=1;t<40;t++){for(var e=h.getRSBlocks(t,n),o=d(),i=0;i<v.length;i++){var a=v[i];o.put(a.getMode(),4),o.put(a.getLength(),s.getLengthInBits(a.getMode(),t)),a.write(o);}var u=0;for(i=0;i<e.length;i++)u+=e[i].dataCount;if(o.getLengthInBits()<=8*u)break;}r=t;}_(!1,function(){for(var t=0,e=0,r=0;r<8;r+=1){_(!0,r);var n=s.getLostPoint(y);(0==r||t>n)&&(t=n,e=r);}return e;}());},y.createTableTag=function(t,e){t=t||2;var r="";r+='<table style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",r+='">',r+="<tbody>";for(var n=0;n<y.getModuleCount();n+=1){r+="<tr>";for(var o=0;o<y.getModuleCount();o+=1)r+='<td style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: 0px;",r+=" width: "+t+"px;",r+=" height: "+t+"px;",r+=" background-color: ",r+=y.isDark(n,o)?"#000000":"#ffffff",r+=";",r+='"/>';r+="</tr>";}return (r+="</tbody>")+"</table>";},y.createSvgTag=function(t,e,r,n){var o={};"object"==typeof arguments[0]&&(t=(o=arguments[0]).cellSize,e=o.margin,r=o.alt,n=o.title),t=t||2,e=void 0===e?4*t:e,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-description":null,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-title":null;var i,a,s,u,c=y.getModuleCount()*t+2*e,h="";for(u="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",h+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',h+=o.scalable?"":' width="'+c+'px" height="'+c+'px"',h+=' viewBox="0 0 '+c+" "+c+'" ',h+=' preserveAspectRatio="xMinYMin meet"',h+=n.text||r.text?' role="img" aria-labelledby="'+O([n.id,r.id].join(" ").trim())+'"':"",h+=">",h+=n.text?'<title id="'+O(n.id)+'">'+O(n.text)+"</title>":"",h+=r.text?'<description id="'+O(r.id)+'">'+O(r.text)+"</description>":"",h+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',h+='<path d="',a=0;a<y.getModuleCount();a+=1)for(s=a*t+e,i=0;i<y.getModuleCount();i+=1)y.isDark(a,i)&&(h+="M"+(i*t+e)+","+s+u);return (h+='" stroke="transparent" fill="black"/>')+"</svg>";},y.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var r=y.getModuleCount()*t+2*e,n=e,o=r-e;return w(r,r,function(e,r){if(n<=e&&e<o&&n<=r&&r<o){var i=Math.floor((e-n)/t),a=Math.floor((r-n)/t);return y.isDark(a,i)?0:1;}return 1;});},y.createImgTag=function(t,e,r){t=t||2,e=void 0===e?4*t:e;var n=y.getModuleCount()*t+2*e,o="";return o+="<img",o+=' src="',o+=y.createDataURL(t,e),o+='"',o+=' width="',o+=n,o+='"',o+=' height="',o+=n,o+='"',r&&(o+=' alt="',o+=O(r),o+='"'),o+"/>";};var O=function(t){for(var e="",r=0;r<t.length;r+=1){var n=t.charAt(r);switch(n){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=n;}}return e;};return y.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;var e,r,n,o,i,a=1*y.getModuleCount()+2*t,s=t,u=a-t,c={"██":"█","█ ":"▀"," █":"▄","  ":" "},h={"██":"▀","█ ":"▀"," █":" ","  ":" "},d="";for(e=0;e<a;e+=2){for(n=Math.floor((e-s)/1),o=Math.floor((e+1-s)/1),r=0;r<a;r+=1)i="█",s<=r&&r<u&&s<=e&&e<u&&y.isDark(n,Math.floor((r-s)/1))&&(i=" "),s<=r&&r<u&&s<=e+1&&e+1<u&&y.isDark(o,Math.floor((r-s)/1))?i+=" ":i+="█",d+=t<1&&e+1>=u?h[i]:c[i];d+="\n";}return a%2&&t>0?d.substring(0,d.length-a-1)+Array(a+1).join("▀"):d.substring(0,d.length-1);}(e);t-=1,e=void 0===e?2*t:e;var r,n,o,i,a=y.getModuleCount()*t+2*e,s=e,u=a-e,c=Array(t+1).join("██"),h=Array(t+1).join("  "),d="",l="";for(r=0;r<a;r+=1){for(o=Math.floor((r-s)/t),l="",n=0;n<a;n+=1)i=1,s<=n&&n<u&&s<=r&&r<u&&y.isDark(o,Math.floor((n-s)/t))&&(i=0),l+=i?c:h;for(o=0;o<t;o+=1)d+=l+"\n";}return d.substring(0,d.length-1);},y.renderTo2dContext=function(t,e){e=e||2;for(var r=y.getModuleCount(),n=0;n<r;n++)for(var o=0;o<r;o++)t.fillStyle=y.isDark(n,o)?"black":"white",t.fillRect(n*e,o*e,e,e);},y;};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],r=0;r<t.length;r+=1){var n=t.charCodeAt(r);e.push(255&n);}return e;}}).default,t.createStringToBytes=function(t,e){var r=function(){for(var r=y(t),n=function(){var t=r.read();if(-1==t)throw "eof";return t;},o=0,i={};;){var a=r.read();if(-1==a)break;var s=n(),u=n()<<8|n();i[String.fromCharCode(a<<8|s)]=u,o+=1;}if(o!=e)throw o+" != "+e;return i;}(),n="?".charCodeAt(0);return function(t){for(var e=[],o=0;o<t.length;o+=1){var i=t.charCodeAt(o);if(i<128)e.push(i);else {var a=r[t.charAt(o)];"number"==typeof a?(255&a)==a?e.push(a):(e.push(a>>>8),e.push(255&a)):e.push(n);}}return e;};};var e,r,n,o,i,a={L:1,M:0,Q:3,H:2},s=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],r=1335,n=7973,i=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e;},(o={}).getBCHTypeInfo=function(t){for(var e=t<<10;i(e)-i(r)>=0;)e^=r<<i(e)-i(r);return 21522^(t<<10|e);},o.getBCHTypeNumber=function(t){for(var e=t<<12;i(e)-i(n)>=0;)e^=n<<i(e)-i(n);return t<<12|e;},o.getPatternPosition=function(t){return e[t-1];},o.getMaskFunction=function(t){switch(t){case 0:return function(t,e){return (t+e)%2==0;};case 1:return function(t,e){return t%2==0;};case 2:return function(t,e){return e%3==0;};case 3:return function(t,e){return (t+e)%3==0;};case 4:return function(t,e){return (Math.floor(t/2)+Math.floor(e/3))%2==0;};case 5:return function(t,e){return t*e%2+t*e%3==0;};case 6:return function(t,e){return (t*e%2+t*e%3)%2==0;};case 7:return function(t,e){return (t*e%3+(t+e)%2)%2==0;};default:throw "bad maskPattern:"+t;}},o.getErrorCorrectPolynomial=function(t){for(var e=c([1],0),r=0;r<t;r+=1)e=e.multiply(c([1,u.gexp(r)],0));return e;},o.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw "mode:"+t;}else if(e<27)switch(t){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw "mode:"+t;}else {if(!(e<41))throw "type:"+e;switch(t){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw "mode:"+t;}}},o.getLostPoint=function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n+=1)for(var o=0;o<e;o+=1){for(var i=0,a=t.isDark(n,o),s=-1;s<=1;s+=1)if(!(n+s<0||e<=n+s))for(var u=-1;u<=1;u+=1)o+u<0||e<=o+u||0==s&&0==u||a==t.isDark(n+s,o+u)&&(i+=1);i>5&&(r+=3+i-5);}for(n=0;n<e-1;n+=1)for(o=0;o<e-1;o+=1){var c=0;t.isDark(n,o)&&(c+=1),t.isDark(n+1,o)&&(c+=1),t.isDark(n,o+1)&&(c+=1),t.isDark(n+1,o+1)&&(c+=1),0!=c&&4!=c||(r+=3);}for(n=0;n<e;n+=1)for(o=0;o<e-6;o+=1)t.isDark(n,o)&&!t.isDark(n,o+1)&&t.isDark(n,o+2)&&t.isDark(n,o+3)&&t.isDark(n,o+4)&&!t.isDark(n,o+5)&&t.isDark(n,o+6)&&(r+=40);for(o=0;o<e;o+=1)for(n=0;n<e-6;n+=1)t.isDark(n,o)&&!t.isDark(n+1,o)&&t.isDark(n+2,o)&&t.isDark(n+3,o)&&t.isDark(n+4,o)&&!t.isDark(n+5,o)&&t.isDark(n+6,o)&&(r+=40);var h=0;for(o=0;o<e;o+=1)for(n=0;n<e;n+=1)t.isDark(n,o)&&(h+=1);return r+Math.abs(100*h/e/e-50)/5*10;},o),u=function(){for(var t=new Array(256),e=new Array(256),r=0;r<8;r+=1)t[r]=1<<r;for(r=8;r<256;r+=1)t[r]=t[r-4]^t[r-5]^t[r-6]^t[r-8];for(r=0;r<255;r+=1)e[t[r]]=r;return {glog:function(t){if(t<1)throw "glog("+t+")";return e[t];},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e];}};}();function c(t,e){if(void 0===t.length)throw t.length+"/"+e;var r=function(){for(var r=0;r<t.length&&0==t[r];)r+=1;for(var n=new Array(t.length-r+e),o=0;o<t.length-r;o+=1)n[o]=t[o+r];return n;}(),n={getAt:function(t){return r[t];},getLength:function(){return r.length;},multiply:function(t){for(var e=new Array(n.getLength()+t.getLength()-1),r=0;r<n.getLength();r+=1)for(var o=0;o<t.getLength();o+=1)e[r+o]^=u.gexp(u.glog(n.getAt(r))+u.glog(t.getAt(o)));return c(e,0);},mod:function(t){if(n.getLength()-t.getLength()<0)return n;for(var e=u.glog(n.getAt(0))-u.glog(t.getAt(0)),r=new Array(n.getLength()),o=0;o<n.getLength();o+=1)r[o]=n.getAt(o);for(o=0;o<t.getLength();o+=1)r[o]^=u.gexp(u.glog(t.getAt(o))+e);return c(r,0).mod(t);}};return n;}var h=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var r={};return r.totalCount=t,r.dataCount=e,r;},r={getRSBlocks:function(r,n){var o=function(e,r){switch(r){case a.L:return t[4*(e-1)+0];case a.M:return t[4*(e-1)+1];case a.Q:return t[4*(e-1)+2];case a.H:return t[4*(e-1)+3];default:return;}}(r,n);if(void 0===o)throw "bad rs block @ typeNumber:"+r+"/errorCorrectionLevel:"+n;for(var i=o.length/3,s=[],u=0;u<i;u+=1)for(var c=o[3*u+0],h=o[3*u+1],d=o[3*u+2],l=0;l<c;l+=1)s.push(e(h,d));return s;}};return r;}(),d=function(){var t=[],e=0,r={getBuffer:function(){return t;},getAt:function(e){var r=Math.floor(e/8);return 1==(t[r]>>>7-e%8&1);},put:function(t,e){for(var n=0;n<e;n+=1)r.putBit(1==(t>>>e-n-1&1));},getLengthInBits:function(){return e;},putBit:function(r){var n=Math.floor(e/8);t.length<=n&&t.push(0),r&&(t[n]|=128>>>e%8),e+=1;}};return r;},l=function(t){var e=t,r={getMode:function(){return 1;},getLength:function(t){return e.length;},write:function(t){for(var r=e,o=0;o+2<r.length;)t.put(n(r.substring(o,o+3)),10),o+=3;o<r.length&&(r.length-o==1?t.put(n(r.substring(o,o+1)),4):r.length-o==2&&t.put(n(r.substring(o,o+2)),7));}},n=function(t){for(var e=0,r=0;r<t.length;r+=1)e=10*e+o(t.charAt(r));return e;},o=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw "illegal char :"+t;};return r;},f=function(t){var e=t,r={getMode:function(){return 2;},getLength:function(t){return e.length;},write:function(t){for(var r=e,o=0;o+1<r.length;)t.put(45*n(r.charAt(o))+n(r.charAt(o+1)),11),o+=2;o<r.length&&t.put(n(r.charAt(o)),6);}},n=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw "illegal char :"+t;}};return r;},p=function(e){var r=t.stringToBytes(e);return {getMode:function(){return 4;},getLength:function(t){return r.length;},write:function(t){for(var e=0;e<r.length;e+=1)t.put(r[e],8);}};},g=function(e){var r=t.stringToBytesFuncs.SJIS;if(!r)throw "sjis not supported.";!function(t,e){var n=r("友");if(2!=n.length||38726!=(n[0]<<8|n[1]))throw "sjis not supported.";}();var n=r(e);return {getMode:function(){return 8;},getLength:function(t){return ~~(n.length/2);},write:function(t){for(var e=n,r=0;r+1<e.length;){var o=(255&e[r])<<8|255&e[r+1];if(33088<=o&&o<=40956)o-=33088;else {if(!(57408<=o&&o<=60351))throw "illegal char at "+(r+1)+"/"+o;o-=49472;}o=192*(o>>>8&255)+(255&o),t.put(o,13),r+=2;}if(r<e.length)throw "illegal char at "+(r+1);}};},v=function(){var t=[],e={writeByte:function(e){t.push(255&e);},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8);},writeBytes:function(t,r,n){r=r||0,n=n||t.length;for(var o=0;o<n;o+=1)e.writeByte(t[o+r]);},writeString:function(t){for(var r=0;r<t.length;r+=1)e.writeByte(t.charCodeAt(r));},toByteArray:function(){return t;},toString:function(){var e="";e+="[";for(var r=0;r<t.length;r+=1)r>0&&(e+=","),e+=t[r];return e+"]";}};return e;},y=function(t){var e=t,r=0,n=0,o=0,i={read:function(){for(;o<8;){if(r>=e.length){if(0==o)return -1;throw "unexpected end of file./"+o;}var t=e.charAt(r);if(r+=1,"="==t)return o=0,-1;t.match(/^\s$/)||(n=n<<6|a(t.charCodeAt(0)),o+=6);}var i=n>>>o-8&255;return o-=8,i;}},a=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw "c:"+t;};return i;},w=function(t,e,r){for(var n=function(t,e){var r=t,n=e,o=new Array(t*e),i={setPixel:function(t,e,n){o[e*r+t]=n;},write:function(t){t.writeString("GIF87a"),t.writeShort(r),t.writeShort(n),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(r),t.writeShort(n),t.writeByte(0);var e=a(2);t.writeByte(2);for(var o=0;e.length-o>255;)t.writeByte(255),t.writeBytes(e,o,255),o+=255;t.writeByte(e.length-o),t.writeBytes(e,o,e.length-o),t.writeByte(0),t.writeString(";");}},a=function(t){for(var e=1<<t,r=1+(1<<t),n=t+1,i=s(),a=0;a<e;a+=1)i.add(String.fromCharCode(a));i.add(String.fromCharCode(e)),i.add(String.fromCharCode(r));var u,c,h,d=v(),l=(u=d,c=0,h=0,{write:function(t,e){if(t>>>e!=0)throw "length over";for(;c+e>=8;)u.writeByte(255&(t<<c|h)),e-=8-c,t>>>=8-c,h=0,c=0;h|=t<<c,c+=e;},flush:function(){c>0&&u.writeByte(h);}});l.write(e,n);var f=0,p=String.fromCharCode(o[f]);for(f+=1;f<o.length;){var g=String.fromCharCode(o[f]);f+=1,i.contains(p+g)?p+=g:(l.write(i.indexOf(p),n),i.size()<4095&&(i.size()==1<<n&&(n+=1),i.add(p+g)),p=g);}return l.write(i.indexOf(p),n),l.write(r,n),l.flush(),d.toByteArray();},s=function(){var t={},e=0,r={add:function(n){if(r.contains(n))throw "dup key:"+n;t[n]=e,e+=1;},size:function(){return e;},indexOf:function(e){return t[e];},contains:function(e){return void 0!==t[e];}};return r;};return i;}(t,e),o=0;o<e;o+=1)for(var i=0;i<t;i+=1)n.setPixel(i,o,r(i,o));var a=v();n.write(a);for(var s=function(){var t=0,e=0,r=0,n="",o={},i=function(t){n+=String.fromCharCode(a(63&t));},a=function(t){if(t<0);else {if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47;}throw "n:"+t;};return o.writeByte=function(n){for(t=t<<8|255&n,e+=8,r+=1;e>=6;)i(t>>>e-6),e-=6;},o.flush=function(){if(e>0&&(i(t<<6-e),t=0,e=0),r%3!=0)for(var o=3-r%3,a=0;a<o;a+=1)n+="=";},o.toString=function(){return n;},o;}(),u=a.toByteArray(),c=0;c<u.length;c+=1)s.writeByte(u[c]);return s.flush(),"data:image/gif;base64,"+s;};return t;}();o.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&t.charCodeAt(r)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n));}return e;}(t);},void 0===(n="function"==typeof(r=function(){return o;})?r.apply(e,[]):r)||(t.exports=n);},796:(t,e,r)=>{r.d(e,{default:()=>W});var n=function(){return (n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t;}).apply(this,arguments);},o=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n;},i=function(t){return !!t&&"object"==typeof t&&!Array.isArray(t);};function a(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!e.length)return t;var s=e.shift();return void 0!==s&&i(t)&&i(s)?(t=n({},t),Object.keys(s).forEach(function(e){var r=t[e],n=s[e];Array.isArray(r)&&Array.isArray(n)?t[e]=n:i(r)&&i(n)?t[e]=a(Object.assign({},r),n):t[e]=n;}),a.apply(void 0,o([t],e))):t;}function s(t,e){var r=document.createElement("a");r.download=e,r.href=t,document.body.appendChild(r),r.click(),document.body.removeChild(r);}function u(t){var e=t.originalHeight,r=t.originalWidth,n=t.maxHiddenDots,o=t.maxHiddenAxisDots,i=t.dotSize,a={x:0,y:0},s={x:0,y:0};if(e<=0||r<=0||n<=0||i<=0)return {height:0,width:0,hideYDots:0,hideXDots:0};var u=e/r;return a.x=Math.floor(Math.sqrt(n/u)),a.x<=0&&(a.x=1),o&&o<a.x&&(a.x=o),a.x%2==0&&a.x--,s.x=a.x*i,a.y=1+2*Math.ceil((a.x*u-1)/2),s.y=Math.round(s.x*u),(a.y*a.x>n||o&&o<a.y)&&(o&&o<a.y?(a.y=o,a.y%2==0&&a.x--):a.y-=2,s.y=a.y*i,a.x=1+2*Math.ceil((a.y/u-1)/2),s.x=Math.round(s.y/u)),{height:s.y,width:s.x,hideYDots:a.y,hideXDots:a.x};}const c={L:.07,M:.15,Q:.25,H:.3},h="dots",d="rounded",l="classy",f="classy-rounded",p="square",g="extra-rounded";var v=function(){return (v=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t;}).apply(this,arguments);};const y=function(){function t(t){var e=t.context,r=t.type;this._context=e,this._type=r;}return t.prototype.draw=function(t,e,r,n){var o,i=this._context;switch(this._type){case h:o=this._drawDot;break;case l:o=this._drawClassy;break;case f:o=this._drawClassyRounded;break;case d:o=this._drawRounded;break;case g:o=this._drawExtraRounded;break;case p:default:o=this._drawSquare;}o.call(this,{x:t,y:e,size:r,context:i,getNeighbor:n});},t.prototype._rotateFigure=function(t){var e=t.x,r=t.y,n=t.size,o=t.context,i=t.rotation,a=void 0===i?0:i,s=t.draw,u=e+n/2,c=r+n/2;o.translate(u,c),a&&o.rotate(a),s(),o.closePath(),a&&o.rotate(-a),o.translate(-u,-c);},t.prototype._basicDot=function(t){var e=t.size,r=t.context;this._rotateFigure(v(v({},t),{draw:function(){r.arc(0,0,e/2,0,2*Math.PI);}}));},t.prototype._basicSquare=function(t){var e=t.size,r=t.context;this._rotateFigure(v(v({},t),{draw:function(){r.rect(-e/2,-e/2,e,e);}}));},t.prototype._basicSideRounded=function(t){var e=t.size,r=t.context;this._rotateFigure(v(v({},t),{draw:function(){r.arc(0,0,e/2,-Math.PI/2,Math.PI/2),r.lineTo(-e/2,e/2),r.lineTo(-e/2,-e/2),r.lineTo(0,-e/2);}}));},t.prototype._basicCornerRounded=function(t){var e=t.size,r=t.context;this._rotateFigure(v(v({},t),{draw:function(){r.arc(0,0,e/2,-Math.PI/2,0),r.lineTo(e/2,e/2),r.lineTo(-e/2,e/2),r.lineTo(-e/2,-e/2),r.lineTo(0,-e/2);}}));},t.prototype._basicCornerExtraRounded=function(t){var e=t.size,r=t.context;this._rotateFigure(v(v({},t),{draw:function(){r.arc(-e/2,e/2,e,-Math.PI/2,0),r.lineTo(-e/2,e/2),r.lineTo(-e/2,-e/2);}}));},t.prototype._basicCornersRounded=function(t){var e=t.size,r=t.context;this._rotateFigure(v(v({},t),{draw:function(){r.arc(0,0,e/2,-Math.PI/2,0),r.lineTo(e/2,e/2),r.lineTo(0,e/2),r.arc(0,0,e/2,Math.PI/2,Math.PI),r.lineTo(-e/2,-e/2),r.lineTo(0,-e/2);}}));},t.prototype._basicCornersExtraRounded=function(t){var e=t.size,r=t.context;this._rotateFigure(v(v({},t),{draw:function(){r.arc(-e/2,e/2,e,-Math.PI/2,0),r.arc(e/2,-e/2,e,Math.PI/2,Math.PI);}}));},t.prototype._drawDot=function(t){var e=t.x,r=t.y,n=t.size,o=t.context;this._basicDot({x:e,y:r,size:n,context:o,rotation:0});},t.prototype._drawSquare=function(t){var e=t.x,r=t.y,n=t.size,o=t.context;this._basicSquare({x:e,y:r,size:n,context:o,rotation:0});},t.prototype._drawRounded=function(t){var e=t.x,r=t.y,n=t.size,o=t.context,i=t.getNeighbor,a=i?+i(-1,0):0,s=i?+i(1,0):0,u=i?+i(0,-1):0,c=i?+i(0,1):0,h=a+s+u+c;if(0!==h){if(h>2||a&&s||u&&c)this._basicSquare({x:e,y:r,size:n,context:o,rotation:0});else {if(2===h){var d=0;return a&&u?d=Math.PI/2:u&&s?d=Math.PI:s&&c&&(d=-Math.PI/2),void this._basicCornerRounded({x:e,y:r,size:n,context:o,rotation:d});}if(1===h)return d=0,u?d=Math.PI/2:s?d=Math.PI:c&&(d=-Math.PI/2),void this._basicSideRounded({x:e,y:r,size:n,context:o,rotation:d});}}else this._basicDot({x:e,y:r,size:n,context:o,rotation:0});},t.prototype._drawExtraRounded=function(t){var e=t.x,r=t.y,n=t.size,o=t.context,i=t.getNeighbor,a=i?+i(-1,0):0,s=i?+i(1,0):0,u=i?+i(0,-1):0,c=i?+i(0,1):0,h=a+s+u+c;if(0!==h){if(h>2||a&&s||u&&c)this._basicSquare({x:e,y:r,size:n,context:o,rotation:0});else {if(2===h){var d=0;return a&&u?d=Math.PI/2:u&&s?d=Math.PI:s&&c&&(d=-Math.PI/2),void this._basicCornerExtraRounded({x:e,y:r,size:n,context:o,rotation:d});}if(1===h)return d=0,u?d=Math.PI/2:s?d=Math.PI:c&&(d=-Math.PI/2),void this._basicSideRounded({x:e,y:r,size:n,context:o,rotation:d});}}else this._basicDot({x:e,y:r,size:n,context:o,rotation:0});},t.prototype._drawClassy=function(t){var e=t.x,r=t.y,n=t.size,o=t.context,i=t.getNeighbor,a=i?+i(-1,0):0,s=i?+i(1,0):0,u=i?+i(0,-1):0,c=i?+i(0,1):0;0!==a+s+u+c?a||u?s||c?this._basicSquare({x:e,y:r,size:n,context:o,rotation:0}):this._basicCornerRounded({x:e,y:r,size:n,context:o,rotation:Math.PI/2}):this._basicCornerRounded({x:e,y:r,size:n,context:o,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:r,size:n,context:o,rotation:Math.PI/2});},t.prototype._drawClassyRounded=function(t){var e=t.x,r=t.y,n=t.size,o=t.context,i=t.getNeighbor,a=i?+i(-1,0):0,s=i?+i(1,0):0,u=i?+i(0,-1):0,c=i?+i(0,1):0;0!==a+s+u+c?a||u?s||c?this._basicSquare({x:e,y:r,size:n,context:o,rotation:0}):this._basicCornerExtraRounded({x:e,y:r,size:n,context:o,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:e,y:r,size:n,context:o,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:r,size:n,context:o,rotation:Math.PI/2});},t;}(),w="square",_="extra-rounded";var m=function(){return (m=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t;}).apply(this,arguments);};const b=function(){function t(t){var e=t.context,r=t.type;this._context=e,this._type=r;}return t.prototype.draw=function(t,e,r,n){var o,i=this._context;switch(this._type){case w:o=this._drawSquare;break;case _:o=this._drawExtraRounded;break;case"dot":default:o=this._drawDot;}o.call(this,{x:t,y:e,size:r,context:i,rotation:n});},t.prototype._rotateFigure=function(t){var e=t.x,r=t.y,n=t.size,o=t.context,i=t.rotation,a=void 0===i?0:i,s=t.draw,u=e+n/2,c=r+n/2;o.translate(u,c),a&&o.rotate(a),s(),o.closePath(),a&&o.rotate(-a),o.translate(-u,-c);},t.prototype._basicDot=function(t){var e=t.size,r=t.context,n=e/7;this._rotateFigure(m(m({},t),{draw:function(){r.arc(0,0,e/2,0,2*Math.PI),r.arc(0,0,e/2-n,0,2*Math.PI);}}));},t.prototype._basicSquare=function(t){var e=t.size,r=t.context,n=e/7;this._rotateFigure(m(m({},t),{draw:function(){r.rect(-e/2,-e/2,e,e),r.rect(-e/2+n,-e/2+n,e-2*n,e-2*n);}}));},t.prototype._basicExtraRounded=function(t){var e=t.size,r=t.context,n=e/7;this._rotateFigure(m(m({},t),{draw:function(){r.arc(-n,-n,2.5*n,Math.PI,-Math.PI/2),r.lineTo(n,-3.5*n),r.arc(n,-n,2.5*n,-Math.PI/2,0),r.lineTo(3.5*n,-n),r.arc(n,n,2.5*n,0,Math.PI/2),r.lineTo(-n,3.5*n),r.arc(-n,n,2.5*n,Math.PI/2,Math.PI),r.lineTo(-3.5*n,-n),r.arc(-n,-n,1.5*n,Math.PI,-Math.PI/2),r.lineTo(n,-2.5*n),r.arc(n,-n,1.5*n,-Math.PI/2,0),r.lineTo(2.5*n,-n),r.arc(n,n,1.5*n,0,Math.PI/2),r.lineTo(-n,2.5*n),r.arc(-n,n,1.5*n,Math.PI/2,Math.PI),r.lineTo(-2.5*n,-n);}}));},t.prototype._drawDot=function(t){var e=t.x,r=t.y,n=t.size,o=t.context,i=t.rotation;this._basicDot({x:e,y:r,size:n,context:o,rotation:i});},t.prototype._drawSquare=function(t){var e=t.x,r=t.y,n=t.size,o=t.context,i=t.rotation;this._basicSquare({x:e,y:r,size:n,context:o,rotation:i});},t.prototype._drawExtraRounded=function(t){var e=t.x,r=t.y,n=t.size,o=t.context,i=t.rotation;this._basicExtraRounded({x:e,y:r,size:n,context:o,rotation:i});},t;}(),x="square";var M=function(){return (M=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t;}).apply(this,arguments);};const S=function(){function t(t){var e=t.context,r=t.type;this._context=e,this._type=r;}return t.prototype.draw=function(t,e,r,n){var o,i=this._context;switch(this._type){case x:o=this._drawSquare;break;case"dot":default:o=this._drawDot;}o.call(this,{x:t,y:e,size:r,context:i,rotation:n});},t.prototype._rotateFigure=function(t){var e=t.x,r=t.y,n=t.size,o=t.context,i=t.rotation,a=void 0===i?0:i,s=t.draw,u=e+n/2,c=r+n/2;o.translate(u,c),a&&o.rotate(a),s(),o.closePath(),a&&o.rotate(-a),o.translate(-u,-c);},t.prototype._basicDot=function(t){var e=t.size,r=t.context;this._rotateFigure(M(M({},t),{draw:function(){r.arc(0,0,e/2,0,2*Math.PI);}}));},t.prototype._basicSquare=function(t){var e=t.size,r=t.context;this._rotateFigure(M(M({},t),{draw:function(){r.rect(-e/2,-e/2,e,e);}}));},t.prototype._drawDot=function(t){var e=t.x,r=t.y,n=t.size,o=t.context,i=t.rotation;this._basicDot({x:e,y:r,size:n,context:o,rotation:i});},t.prototype._drawSquare=function(t){var e=t.x,r=t.y,n=t.size,o=t.context,i=t.rotation;this._basicSquare({x:e,y:r,size:n,context:o,rotation:i});},t;}(),C="radial";var P=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],O=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];const z=function(){function t(t){this._canvas=document.createElement("canvas"),this._canvas.width=t.width,this._canvas.height=t.height,this._options=t;}return Object.defineProperty(t.prototype,"context",{get:function(){return this._canvas.getContext("2d");},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._canvas.width;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._canvas.height;},enumerable:!1,configurable:!0}),t.prototype.getCanvas=function(){return this._canvas;},t.prototype.clear=function(){var t=this.context;t&&t.clearRect(0,0,this._canvas.width,this._canvas.height);},t.prototype.drawQR=function(t){return e=this,r=void 0,o=function(){var e,r,n,o,i,a,s,h,d,l=this;return function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1];},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this;}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue;}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break;}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break;}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break;}o[2]&&a.ops.pop(),a.trys.pop();continue;}i=e.call(t,a);}catch(t){i=[6,t],n=0;}finally{r=o=0;}if(5&i[0])throw i[1];return {value:i[0]?i[1]:void 0,done:!0};}([i,s]);};}}(this,function(f){switch(f.label){case 0:return e=t.getModuleCount(),r=Math.min(this._options.width,this._options.height)-2*this._options.margin,n=Math.floor(r/e),o={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=t,this._options.image?[4,this.loadImage()]:[3,2];case 1:if(f.sent(),!this._image)return [2];i=this._options,a=i.imageOptions,s=i.qrOptions,h=a.imageSize*c[s.errorCorrectionLevel],d=Math.floor(h*e*e),o=u({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:d,maxHiddenAxisDots:e-14,dotSize:n}),f.label=2;case 2:return this.clear(),this.drawBackground(),this.drawDots(function(t,r){var n,i,a,s,u,c;return !(l._options.imageOptions.hideBackgroundDots&&t>=(e-o.hideXDots)/2&&t<(e+o.hideXDots)/2&&r>=(e-o.hideYDots)/2&&r<(e+o.hideYDots)/2||(null===(n=P[t])||void 0===n?void 0:n[r])||(null===(i=P[t-e+7])||void 0===i?void 0:i[r])||(null===(a=P[t])||void 0===a?void 0:a[r-e+7])||(null===(s=O[t])||void 0===s?void 0:s[r])||(null===(u=O[t-e+7])||void 0===u?void 0:u[r])||(null===(c=O[t])||void 0===c?void 0:c[r-e+7]));}),this.drawCorners(),this._options.image&&this.drawImage({width:o.width,height:o.height,count:e,dotSize:n}),[2];}});},new((n=void 0)||(n=Promise))(function(t,i){function a(t){try{u(o.next(t));}catch(t){i(t);}}function s(t){try{u(o.throw(t));}catch(t){i(t);}}function u(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n(function(t){t(r);})).then(a,s);}u((o=o.apply(e,r||[])).next());});var e,r,n,o;},t.prototype.drawBackground=function(){var t=this.context,e=this._options;if(t){if(e.backgroundOptions.gradient){var r=e.backgroundOptions.gradient,n=this._createGradient({context:t,options:r,additionalRotation:0,x:0,y:0,size:this._canvas.width>this._canvas.height?this._canvas.width:this._canvas.height});r.colorStops.forEach(function(t){var e=t.offset,r=t.color;n.addColorStop(e,r);}),t.fillStyle=n;}else e.backgroundOptions.color&&(t.fillStyle=e.backgroundOptions.color);t.fillRect(0,0,this._canvas.width,this._canvas.height);}},t.prototype.drawDots=function(t){var e=this;if(!this._qr)throw "QR code is not defined";var r=this.context;if(!r)throw "QR code is not defined";var n=this._options,o=this._qr.getModuleCount();if(o>n.width||o>n.height)throw "The canvas is too small.";var i=Math.min(n.width,n.height)-2*n.margin,a=Math.floor(i/o),s=Math.floor((n.width-o*a)/2),u=Math.floor((n.height-o*a)/2),c=new y({context:r,type:n.dotsOptions.type});r.beginPath();for(var h=function(r){for(var n=function(n){return t&&!t(r,n)?"continue":d._qr.isDark(r,n)?void c.draw(s+r*a,u+n*a,a,function(i,a){return !(r+i<0||n+a<0||r+i>=o||n+a>=o)&&!(t&&!t(r+i,n+a))&&!!e._qr&&e._qr.isDark(r+i,n+a);}):"continue";},i=0;i<o;i++)n(i);},d=this,l=0;l<o;l++)h(l);if(n.dotsOptions.gradient){var f=n.dotsOptions.gradient,p=this._createGradient({context:r,options:f,additionalRotation:0,x:s,y:u,size:o*a});f.colorStops.forEach(function(t){var e=t.offset,r=t.color;p.addColorStop(e,r);}),r.fillStyle=r.strokeStyle=p;}else n.dotsOptions.color&&(r.fillStyle=r.strokeStyle=n.dotsOptions.color);r.fill("evenodd");},t.prototype.drawCorners=function(t){var e=this;if(!this._qr)throw "QR code is not defined";var r=this.context;if(!r)throw "QR code is not defined";var n=this._options,o=this._qr.getModuleCount(),i=Math.min(n.width,n.height)-2*n.margin,a=Math.floor(i/o),s=7*a,u=3*a,c=Math.floor((n.width-o*a)/2),h=Math.floor((n.height-o*a)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(function(i){var d,l,f,p,g,v,w,_,m,x,M=i[0],C=i[1],z=i[2];if(!t||t(M,C)){var D=c+M*a*(o-7),I=h+C*a*(o-7);if(null===(d=n.cornersSquareOptions)||void 0===d?void 0:d.type){var A=new b({context:r,type:null===(l=n.cornersSquareOptions)||void 0===l?void 0:l.type});r.beginPath(),A.draw(D,I,s,z);}else {var k=new y({context:r,type:n.dotsOptions.type});r.beginPath();for(var q=function(t){for(var e=function(e){if(!(null===(f=P[t])||void 0===f?void 0:f[e]))return "continue";k.draw(D+t*a,I+e*a,a,function(r,n){var o;return !!(null===(o=P[t+r])||void 0===o?void 0:o[e+n]);});},r=0;r<P[t].length;r++)e(r);},R=0;R<P.length;R++)q(R);}if(null===(p=n.cornersSquareOptions)||void 0===p?void 0:p.gradient){var B=n.cornersSquareOptions.gradient,E=e._createGradient({context:r,options:B,additionalRotation:z,x:D,y:I,size:s});B.colorStops.forEach(function(t){var e=t.offset,r=t.color;E.addColorStop(e,r);}),r.fillStyle=r.strokeStyle=E;}else (null===(g=n.cornersSquareOptions)||void 0===g?void 0:g.color)&&(r.fillStyle=r.strokeStyle=n.cornersSquareOptions.color);if(r.fill("evenodd"),null===(v=n.cornersDotOptions)||void 0===v?void 0:v.type){var L=new S({context:r,type:null===(w=n.cornersDotOptions)||void 0===w?void 0:w.type});r.beginPath(),L.draw(D+2*a,I+2*a,u,z);}else {k=new y({context:r,type:n.dotsOptions.type}),r.beginPath();var N=function(t){for(var e=function(e){if(!(null===(_=O[t])||void 0===_?void 0:_[e]))return "continue";k.draw(D+t*a,I+e*a,a,function(r,n){var o;return !!(null===(o=O[t+r])||void 0===o?void 0:o[e+n]);});},r=0;r<O[t].length;r++)e(r);};for(R=0;R<O.length;R++)N(R);}if(null===(m=n.cornersDotOptions)||void 0===m?void 0:m.gradient){B=n.cornersDotOptions.gradient;var T=e._createGradient({context:r,options:B,additionalRotation:z,x:D+2*a,y:I+2*a,size:u});B.colorStops.forEach(function(t){var e=t.offset,r=t.color;T.addColorStop(e,r);}),r.fillStyle=r.strokeStyle=T;}else (null===(x=n.cornersDotOptions)||void 0===x?void 0:x.color)&&(r.fillStyle=r.strokeStyle=n.cornersDotOptions.color);r.fill("evenodd");}});},t.prototype.loadImage=function(){var t=this;return new Promise(function(e,r){var n=t._options,o=new Image();if(!n.image)return r("Image is not defined");"string"==typeof n.imageOptions.crossOrigin&&(o.crossOrigin=n.imageOptions.crossOrigin),t._image=o,o.onload=function(){e();},o.src=n.image;});},t.prototype.drawImage=function(t){var e=t.width,r=t.height,n=t.count,o=t.dotSize,i=this.context;if(!i)throw "canvasContext is not defined";if(!this._image)throw "image is not defined";var a=this._options,s=Math.floor((a.width-n*o)/2),u=Math.floor((a.height-n*o)/2),c=s+a.imageOptions.margin+(n*o-e)/2,h=u+a.imageOptions.margin+(n*o-r)/2,d=e-2*a.imageOptions.margin,l=r-2*a.imageOptions.margin;i.drawImage(this._image,c,h,d<0?0:d,l<0?0:l);},t.prototype._createGradient=function(t){var e,r=t.context,n=t.options,o=t.additionalRotation,i=t.x,a=t.y,s=t.size;if(n.type===C)e=r.createRadialGradient(i+s/2,a+s/2,0,i+s/2,a+s/2,s/2);else {var u=((n.rotation||0)+o)%(2*Math.PI),c=(u+2*Math.PI)%(2*Math.PI),h=i+s/2,d=a+s/2,l=i+s/2,f=a+s/2;c>=0&&c<=.25*Math.PI||c>1.75*Math.PI&&c<=2*Math.PI?(h-=s/2,d-=s/2*Math.tan(u),l+=s/2,f+=s/2*Math.tan(u)):c>.25*Math.PI&&c<=.75*Math.PI?(d-=s/2,h-=s/2/Math.tan(u),f+=s/2,l+=s/2/Math.tan(u)):c>.75*Math.PI&&c<=1.25*Math.PI?(h+=s/2,d+=s/2*Math.tan(u),l-=s/2,f-=s/2*Math.tan(u)):c>1.25*Math.PI&&c<=1.75*Math.PI&&(d+=s/2,h+=s/2/Math.tan(u),f-=s/2,l-=s/2/Math.tan(u)),e=r.createLinearGradient(Math.round(h),Math.round(d),Math.round(l),Math.round(f));}return e;},t;}();var D=function(){return (D=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t;}).apply(this,arguments);};const I=function(){function t(t){var e=t.svg,r=t.type;this._svg=e,this._type=r;}return t.prototype.draw=function(t,e,r,n){var o;switch(this._type){case h:o=this._drawDot;break;case l:o=this._drawClassy;break;case f:o=this._drawClassyRounded;break;case d:o=this._drawRounded;break;case g:o=this._drawExtraRounded;break;case p:default:o=this._drawSquare;}o.call(this,{x:t,y:e,size:r,getNeighbor:n});},t.prototype._rotateFigure=function(t){var e,r=t.x,n=t.y,o=t.size,i=t.rotation,a=void 0===i?0:i,s=r+o/2,u=n+o/2;(0, t.draw)(),null===(e=this._element)||void 0===e||e.setAttribute("transform","rotate("+180*a/Math.PI+","+s+","+u+")");},t.prototype._basicDot=function(t){var e=this,r=t.size,n=t.x,o=t.y;this._rotateFigure(D(D({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),e._element.setAttribute("cx",String(n+r/2)),e._element.setAttribute("cy",String(o+r/2)),e._element.setAttribute("r",String(r/2));}}));},t.prototype._basicSquare=function(t){var e=this,r=t.size,n=t.x,o=t.y;this._rotateFigure(D(D({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),e._element.setAttribute("x",String(n)),e._element.setAttribute("y",String(o)),e._element.setAttribute("width",String(r)),e._element.setAttribute("height",String(r));}}));},t.prototype._basicSideRounded=function(t){var e=this,r=t.size,n=t.x,o=t.y;this._rotateFigure(D(D({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M "+n+" "+o+"v "+r+"h "+r/2+"a "+r/2+" "+r/2+", 0, 0, 0, 0 "+-r);}}));},t.prototype._basicCornerRounded=function(t){var e=this,r=t.size,n=t.x,o=t.y;this._rotateFigure(D(D({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M "+n+" "+o+"v "+r+"h "+r+"v "+-r/2+"a "+r/2+" "+r/2+", 0, 0, 0, "+-r/2+" "+-r/2);}}));},t.prototype._basicCornerExtraRounded=function(t){var e=this,r=t.size,n=t.x,o=t.y;this._rotateFigure(D(D({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M "+n+" "+o+"v "+r+"h "+r+"a "+r+" "+r+", 0, 0, 0, "+-r+" "+-r);}}));},t.prototype._basicCornersRounded=function(t){var e=this,r=t.size,n=t.x,o=t.y;this._rotateFigure(D(D({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M "+n+" "+o+"v "+r/2+"a "+r/2+" "+r/2+", 0, 0, 0, "+r/2+" "+r/2+"h "+r/2+"v "+-r/2+"a "+r/2+" "+r/2+", 0, 0, 0, "+-r/2+" "+-r/2);}}));},t.prototype._drawDot=function(t){var e=t.x,r=t.y,n=t.size;this._basicDot({x:e,y:r,size:n,rotation:0});},t.prototype._drawSquare=function(t){var e=t.x,r=t.y,n=t.size;this._basicSquare({x:e,y:r,size:n,rotation:0});},t.prototype._drawRounded=function(t){var e=t.x,r=t.y,n=t.size,o=t.getNeighbor,i=o?+o(-1,0):0,a=o?+o(1,0):0,s=o?+o(0,-1):0,u=o?+o(0,1):0,c=i+a+s+u;if(0!==c){if(c>2||i&&a||s&&u)this._basicSquare({x:e,y:r,size:n,rotation:0});else {if(2===c){var h=0;return i&&s?h=Math.PI/2:s&&a?h=Math.PI:a&&u&&(h=-Math.PI/2),void this._basicCornerRounded({x:e,y:r,size:n,rotation:h});}if(1===c)return h=0,s?h=Math.PI/2:a?h=Math.PI:u&&(h=-Math.PI/2),void this._basicSideRounded({x:e,y:r,size:n,rotation:h});}}else this._basicDot({x:e,y:r,size:n,rotation:0});},t.prototype._drawExtraRounded=function(t){var e=t.x,r=t.y,n=t.size,o=t.getNeighbor,i=o?+o(-1,0):0,a=o?+o(1,0):0,s=o?+o(0,-1):0,u=o?+o(0,1):0,c=i+a+s+u;if(0!==c){if(c>2||i&&a||s&&u)this._basicSquare({x:e,y:r,size:n,rotation:0});else {if(2===c){var h=0;return i&&s?h=Math.PI/2:s&&a?h=Math.PI:a&&u&&(h=-Math.PI/2),void this._basicCornerExtraRounded({x:e,y:r,size:n,rotation:h});}if(1===c)return h=0,s?h=Math.PI/2:a?h=Math.PI:u&&(h=-Math.PI/2),void this._basicSideRounded({x:e,y:r,size:n,rotation:h});}}else this._basicDot({x:e,y:r,size:n,rotation:0});},t.prototype._drawClassy=function(t){var e=t.x,r=t.y,n=t.size,o=t.getNeighbor,i=o?+o(-1,0):0,a=o?+o(1,0):0,s=o?+o(0,-1):0,u=o?+o(0,1):0;0!==i+a+s+u?i||s?a||u?this._basicSquare({x:e,y:r,size:n,rotation:0}):this._basicCornerRounded({x:e,y:r,size:n,rotation:Math.PI/2}):this._basicCornerRounded({x:e,y:r,size:n,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:r,size:n,rotation:Math.PI/2});},t.prototype._drawClassyRounded=function(t){var e=t.x,r=t.y,n=t.size,o=t.getNeighbor,i=o?+o(-1,0):0,a=o?+o(1,0):0,s=o?+o(0,-1):0,u=o?+o(0,1):0;0!==i+a+s+u?i||s?a||u?this._basicSquare({x:e,y:r,size:n,rotation:0}):this._basicCornerExtraRounded({x:e,y:r,size:n,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:e,y:r,size:n,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:r,size:n,rotation:Math.PI/2});},t;}();var A=function(){return (A=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t;}).apply(this,arguments);};const k=function(){function t(t){var e=t.svg,r=t.type;this._svg=e,this._type=r;}return t.prototype.draw=function(t,e,r,n){var o;switch(this._type){case w:o=this._drawSquare;break;case _:o=this._drawExtraRounded;break;case"dot":default:o=this._drawDot;}o.call(this,{x:t,y:e,size:r,rotation:n});},t.prototype._rotateFigure=function(t){var e,r=t.x,n=t.y,o=t.size,i=t.rotation,a=void 0===i?0:i,s=r+o/2,u=n+o/2;(0, t.draw)(),null===(e=this._element)||void 0===e||e.setAttribute("transform","rotate("+180*a/Math.PI+","+s+","+u+")");},t.prototype._basicDot=function(t){var e=this,r=t.size,n=t.x,o=t.y,i=r/7;this._rotateFigure(A(A({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("clip-rule","evenodd"),e._element.setAttribute("d","M "+(n+r/2)+" "+o+"a "+r/2+" "+r/2+" 0 1 0 0.1 0zm 0 "+i+"a "+(r/2-i)+" "+(r/2-i)+" 0 1 1 -0.1 0Z");}}));},t.prototype._basicSquare=function(t){var e=this,r=t.size,n=t.x,o=t.y,i=r/7;this._rotateFigure(A(A({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("clip-rule","evenodd"),e._element.setAttribute("d","M "+n+" "+o+"v "+r+"h "+r+"v "+-r+"zM "+(n+i)+" "+(o+i)+"h "+(r-2*i)+"v "+(r-2*i)+"h "+(2*i-r)+"z");}}));},t.prototype._basicExtraRounded=function(t){var e=this,r=t.size,n=t.x,o=t.y,i=r/7;this._rotateFigure(A(A({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("clip-rule","evenodd"),e._element.setAttribute("d","M "+n+" "+(o+2.5*i)+"v "+2*i+"a "+2.5*i+" "+2.5*i+", 0, 0, 0, "+2.5*i+" "+2.5*i+"h "+2*i+"a "+2.5*i+" "+2.5*i+", 0, 0, 0, "+2.5*i+" "+2.5*-i+"v "+-2*i+"a "+2.5*i+" "+2.5*i+", 0, 0, 0, "+2.5*-i+" "+2.5*-i+"h "+-2*i+"a "+2.5*i+" "+2.5*i+", 0, 0, 0, "+2.5*-i+" "+2.5*i+"M "+(n+2.5*i)+" "+(o+i)+"h "+2*i+"a "+1.5*i+" "+1.5*i+", 0, 0, 1, "+1.5*i+" "+1.5*i+"v "+2*i+"a "+1.5*i+" "+1.5*i+", 0, 0, 1, "+1.5*-i+" "+1.5*i+"h "+-2*i+"a "+1.5*i+" "+1.5*i+", 0, 0, 1, "+1.5*-i+" "+1.5*-i+"v "+-2*i+"a "+1.5*i+" "+1.5*i+", 0, 0, 1, "+1.5*i+" "+1.5*-i);}}));},t.prototype._drawDot=function(t){var e=t.x,r=t.y,n=t.size,o=t.rotation;this._basicDot({x:e,y:r,size:n,rotation:o});},t.prototype._drawSquare=function(t){var e=t.x,r=t.y,n=t.size,o=t.rotation;this._basicSquare({x:e,y:r,size:n,rotation:o});},t.prototype._drawExtraRounded=function(t){var e=t.x,r=t.y,n=t.size,o=t.rotation;this._basicExtraRounded({x:e,y:r,size:n,rotation:o});},t;}();var q=function(){return (q=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t;}).apply(this,arguments);};const R=function(){function t(t){var e=t.svg,r=t.type;this._svg=e,this._type=r;}return t.prototype.draw=function(t,e,r,n){var o;switch(this._type){case x:o=this._drawSquare;break;case"dot":default:o=this._drawDot;}o.call(this,{x:t,y:e,size:r,rotation:n});},t.prototype._rotateFigure=function(t){var e,r=t.x,n=t.y,o=t.size,i=t.rotation,a=void 0===i?0:i,s=r+o/2,u=n+o/2;(0, t.draw)(),null===(e=this._element)||void 0===e||e.setAttribute("transform","rotate("+180*a/Math.PI+","+s+","+u+")");},t.prototype._basicDot=function(t){var e=this,r=t.size,n=t.x,o=t.y;this._rotateFigure(q(q({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),e._element.setAttribute("cx",String(n+r/2)),e._element.setAttribute("cy",String(o+r/2)),e._element.setAttribute("r",String(r/2));}}));},t.prototype._basicSquare=function(t){var e=this,r=t.size,n=t.x,o=t.y;this._rotateFigure(q(q({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),e._element.setAttribute("x",String(n)),e._element.setAttribute("y",String(o)),e._element.setAttribute("width",String(r)),e._element.setAttribute("height",String(r));}}));},t.prototype._drawDot=function(t){var e=t.x,r=t.y,n=t.size,o=t.rotation;this._basicDot({x:e,y:r,size:n,rotation:o});},t.prototype._drawSquare=function(t){var e=t.x,r=t.y,n=t.size,o=t.rotation;this._basicSquare({x:e,y:r,size:n,rotation:o});},t;}();var B=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],E=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];const L=function(){function t(t){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(t.width)),this._element.setAttribute("height",String(t.height)),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._options=t;}return Object.defineProperty(t.prototype,"width",{get:function(){return this._options.width;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._options.height;},enumerable:!1,configurable:!0}),t.prototype.getElement=function(){return this._element;},t.prototype.clear=function(){var t,e=this._element;this._element=e.cloneNode(!1),null===(t=null==e?void 0:e.parentNode)||void 0===t||t.replaceChild(this._element,e),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs);},t.prototype.drawQR=function(t){return e=this,r=void 0,o=function(){var e,r,n,o,i,a,s,h,d,l=this;return function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1];},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this;}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue;}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break;}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break;}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break;}o[2]&&a.ops.pop(),a.trys.pop();continue;}i=e.call(t,a);}catch(t){i=[6,t],n=0;}finally{r=o=0;}if(5&i[0])throw i[1];return {value:i[0]?i[1]:void 0,done:!0};}([i,s]);};}}(this,function(f){switch(f.label){case 0:return e=t.getModuleCount(),r=Math.min(this._options.width,this._options.height)-2*this._options.margin,n=Math.floor(r/e),o={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=t,this._options.image?[4,this.loadImage()]:[3,2];case 1:if(f.sent(),!this._image)return [2];i=this._options,a=i.imageOptions,s=i.qrOptions,h=a.imageSize*c[s.errorCorrectionLevel],d=Math.floor(h*e*e),o=u({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:d,maxHiddenAxisDots:e-14,dotSize:n}),f.label=2;case 2:return this.clear(),this.drawBackground(),this.drawDots(function(t,r){var n,i,a,s,u,c;return !(l._options.imageOptions.hideBackgroundDots&&t>=(e-o.hideXDots)/2&&t<(e+o.hideXDots)/2&&r>=(e-o.hideYDots)/2&&r<(e+o.hideYDots)/2||(null===(n=B[t])||void 0===n?void 0:n[r])||(null===(i=B[t-e+7])||void 0===i?void 0:i[r])||(null===(a=B[t])||void 0===a?void 0:a[r-e+7])||(null===(s=E[t])||void 0===s?void 0:s[r])||(null===(u=E[t-e+7])||void 0===u?void 0:u[r])||(null===(c=E[t])||void 0===c?void 0:c[r-e+7]));}),this.drawCorners(),this._options.image&&this.drawImage({width:o.width,height:o.height,count:e,dotSize:n}),[2];}});},new((n=void 0)||(n=Promise))(function(t,i){function a(t){try{u(o.next(t));}catch(t){i(t);}}function s(t){try{u(o.throw(t));}catch(t){i(t);}}function u(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n(function(t){t(r);})).then(a,s);}u((o=o.apply(e,r||[])).next());});var e,r,n,o;},t.prototype.drawBackground=function(){var t,e,r=this._element,n=this._options;if(r){var o=null===(t=n.backgroundOptions)||void 0===t?void 0:t.gradient,i=null===(e=n.backgroundOptions)||void 0===e?void 0:e.color;(o||i)&&this._createColor({options:o,color:i,additionalRotation:0,x:0,y:0,height:n.height,width:n.width,name:"background-color"});}},t.prototype.drawDots=function(t){var e,r,n=this;if(!this._qr)throw "QR code is not defined";var o=this._options,i=this._qr.getModuleCount();if(i>o.width||i>o.height)throw "The canvas is too small.";var a=Math.min(o.width,o.height)-2*o.margin,s=Math.floor(a/i),u=Math.floor((o.width-i*s)/2),c=Math.floor((o.height-i*s)/2),h=new I({svg:this._element,type:o.dotsOptions.type});this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:null===(e=o.dotsOptions)||void 0===e?void 0:e.gradient,color:o.dotsOptions.color,additionalRotation:0,x:u,y:c,height:i*s,width:i*s,name:"dot-color"});for(var d=function(e){for(var o=function(o){return t&&!t(e,o)?"continue":(null===(r=l._qr)||void 0===r?void 0:r.isDark(e,o))?(h.draw(u+e*s,c+o*s,s,function(r,a){return !(e+r<0||o+a<0||e+r>=i||o+a>=i)&&!(t&&!t(e+r,o+a))&&!!n._qr&&n._qr.isDark(e+r,o+a);}),void(h._element&&l._dotsClipPath&&l._dotsClipPath.appendChild(h._element))):"continue";},a=0;a<i;a++)o(a);},l=this,f=0;f<i;f++)d(f);},t.prototype.drawCorners=function(){var t=this;if(!this._qr)throw "QR code is not defined";var e=this._element,r=this._options;if(!e)throw "Element code is not defined";var n=this._qr.getModuleCount(),o=Math.min(r.width,r.height)-2*r.margin,i=Math.floor(o/n),a=7*i,s=3*i,u=Math.floor((r.width-n*i)/2),c=Math.floor((r.height-n*i)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(function(e){var o,h,d,l,f,p,g,v,y,w,_,m,b=e[0],x=e[1],M=e[2],S=u+b*i*(n-7),C=c+x*i*(n-7),P=t._dotsClipPath,O=t._dotsClipPath;if(((null===(o=r.cornersSquareOptions)||void 0===o?void 0:o.gradient)||(null===(h=r.cornersSquareOptions)||void 0===h?void 0:h.color))&&((P=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-square-color-"+b+"-"+x),t._defs.appendChild(P),t._cornersSquareClipPath=t._cornersDotClipPath=O=P,t._createColor({options:null===(d=r.cornersSquareOptions)||void 0===d?void 0:d.gradient,color:null===(l=r.cornersSquareOptions)||void 0===l?void 0:l.color,additionalRotation:M,x:S,y:C,height:a,width:a,name:"corners-square-color-"+b+"-"+x})),null===(f=r.cornersSquareOptions)||void 0===f?void 0:f.type){var z=new k({svg:t._element,type:r.cornersSquareOptions.type});z.draw(S,C,a,M),z._element&&P&&P.appendChild(z._element);}else for(var D=new I({svg:t._element,type:r.dotsOptions.type}),A=function(t){for(var e=function(e){if(!(null===(p=B[t])||void 0===p?void 0:p[e]))return "continue";D.draw(S+t*i,C+e*i,i,function(r,n){var o;return !!(null===(o=B[t+r])||void 0===o?void 0:o[e+n]);}),D._element&&P&&P.appendChild(D._element);},r=0;r<B[t].length;r++)e(r);},q=0;q<B.length;q++)A(q);if(((null===(g=r.cornersDotOptions)||void 0===g?void 0:g.gradient)||(null===(v=r.cornersDotOptions)||void 0===v?void 0:v.color))&&((O=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-dot-color-"+b+"-"+x),t._defs.appendChild(O),t._cornersDotClipPath=O,t._createColor({options:null===(y=r.cornersDotOptions)||void 0===y?void 0:y.gradient,color:null===(w=r.cornersDotOptions)||void 0===w?void 0:w.color,additionalRotation:M,x:S+2*i,y:C+2*i,height:s,width:s,name:"corners-dot-color-"+b+"-"+x})),null===(_=r.cornersDotOptions)||void 0===_?void 0:_.type){var L=new R({svg:t._element,type:r.cornersDotOptions.type});L.draw(S+2*i,C+2*i,s,M),L._element&&O&&O.appendChild(L._element);}else {D=new I({svg:t._element,type:r.dotsOptions.type});var N=function(t){for(var e=function(e){if(!(null===(m=E[t])||void 0===m?void 0:m[e]))return "continue";D.draw(S+t*i,C+e*i,i,function(r,n){var o;return !!(null===(o=E[t+r])||void 0===o?void 0:o[e+n]);}),D._element&&O&&O.appendChild(D._element);},r=0;r<E[t].length;r++)e(r);};for(q=0;q<E.length;q++)N(q);}});},t.prototype.loadImage=function(){var t=this;return new Promise(function(e,r){var n=t._options,o=new Image();if(!n.image)return r("Image is not defined");"string"==typeof n.imageOptions.crossOrigin&&(o.crossOrigin=n.imageOptions.crossOrigin),t._image=o,o.onload=function(){e();},o.src=n.image;});},t.prototype.drawImage=function(t){var e=t.width,r=t.height,n=t.count,o=t.dotSize,i=this._options,a=Math.floor((i.width-n*o)/2),s=Math.floor((i.height-n*o)/2),u=a+i.imageOptions.margin+(n*o-e)/2,c=s+i.imageOptions.margin+(n*o-r)/2,h=e-2*i.imageOptions.margin,d=r-2*i.imageOptions.margin,l=document.createElementNS("http://www.w3.org/2000/svg","image");l.setAttribute("href",i.image||""),l.setAttribute("x",String(u)),l.setAttribute("y",String(c)),l.setAttribute("width",h+"px"),l.setAttribute("height",d+"px"),this._element.appendChild(l);},t.prototype._createColor=function(t){var e=t.options,r=t.color,n=t.additionalRotation,o=t.x,i=t.y,a=t.height,s=t.width,u=t.name,c=s>a?s:a,h=document.createElementNS("http://www.w3.org/2000/svg","rect");if(h.setAttribute("x",String(o)),h.setAttribute("y",String(i)),h.setAttribute("height",String(a)),h.setAttribute("width",String(s)),h.setAttribute("clip-path","url('#clip-path-"+u+"')"),e){var d;if(e.type===C)(d=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")).setAttribute("id",u),d.setAttribute("gradientUnits","userSpaceOnUse"),d.setAttribute("fx",String(o+s/2)),d.setAttribute("fy",String(i+a/2)),d.setAttribute("cx",String(o+s/2)),d.setAttribute("cy",String(i+a/2)),d.setAttribute("r",String(c/2));else {var l=((e.rotation||0)+n)%(2*Math.PI),f=(l+2*Math.PI)%(2*Math.PI),p=o+s/2,g=i+a/2,v=o+s/2,y=i+a/2;f>=0&&f<=.25*Math.PI||f>1.75*Math.PI&&f<=2*Math.PI?(p-=s/2,g-=a/2*Math.tan(l),v+=s/2,y+=a/2*Math.tan(l)):f>.25*Math.PI&&f<=.75*Math.PI?(g-=a/2,p-=s/2/Math.tan(l),y+=a/2,v+=s/2/Math.tan(l)):f>.75*Math.PI&&f<=1.25*Math.PI?(p+=s/2,g+=a/2*Math.tan(l),v-=s/2,y-=a/2*Math.tan(l)):f>1.25*Math.PI&&f<=1.75*Math.PI&&(g+=a/2,p+=s/2/Math.tan(l),y-=a/2,v-=s/2/Math.tan(l)),(d=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")).setAttribute("id",u),d.setAttribute("gradientUnits","userSpaceOnUse"),d.setAttribute("x1",String(Math.round(p))),d.setAttribute("y1",String(Math.round(g))),d.setAttribute("x2",String(Math.round(v))),d.setAttribute("y2",String(Math.round(y)));}e.colorStops.forEach(function(t){var e=t.offset,r=t.color,n=document.createElementNS("http://www.w3.org/2000/svg","stop");n.setAttribute("offset",100*e+"%"),n.setAttribute("stop-color",r),d.appendChild(n);}),h.setAttribute("fill","url('#"+u+"')"),this._defs.appendChild(d);}else r&&h.setAttribute("fill",r);this._element.appendChild(h);},t;}(),N="canvas";for(var T={},j=0;j<=40;j++)T[j]=j;const F={type:N,width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:T[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{color:"#fff"}};var Q=function(){return (Q=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t;}).apply(this,arguments);};function H(t){var e=Q({},t);if(!e.colorStops||!e.colorStops.length)throw "Field 'colorStops' is required in gradient";return e.rotation?e.rotation=Number(e.rotation):e.rotation=0,e.colorStops=e.colorStops.map(function(t){return Q(Q({},t),{offset:Number(t.offset)});}),e;}function G(t){var e=Q({},t);return e.width=Number(e.width),e.height=Number(e.height),e.margin=Number(e.margin),e.imageOptions=Q(Q({},e.imageOptions),{hideBackgroundDots:Boolean(e.imageOptions.hideBackgroundDots),imageSize:Number(e.imageOptions.imageSize),margin:Number(e.imageOptions.margin)}),e.margin>Math.min(e.width,e.height)&&(e.margin=Math.min(e.width,e.height)),e.dotsOptions=Q({},e.dotsOptions),e.dotsOptions.gradient&&(e.dotsOptions.gradient=H(e.dotsOptions.gradient)),e.cornersSquareOptions&&(e.cornersSquareOptions=Q({},e.cornersSquareOptions),e.cornersSquareOptions.gradient&&(e.cornersSquareOptions.gradient=H(e.cornersSquareOptions.gradient))),e.cornersDotOptions&&(e.cornersDotOptions=Q({},e.cornersDotOptions),e.cornersDotOptions.gradient&&(e.cornersDotOptions.gradient=H(e.cornersDotOptions.gradient))),e.backgroundOptions&&(e.backgroundOptions=Q({},e.backgroundOptions),e.backgroundOptions.gradient&&(e.backgroundOptions.gradient=H(e.backgroundOptions.gradient))),e;}var X=r(192),U=r.n(X),Y=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t));}catch(t){i(t);}}function s(t){try{u(n.throw(t));}catch(t){i(t);}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e);})).then(a,s);}u((n=n.apply(t,e||[])).next());});},$=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1];},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this;}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue;}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break;}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break;}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break;}o[2]&&a.ops.pop(),a.trys.pop();continue;}i=e.call(t,a);}catch(t){i=[6,t],n=0;}finally{r=o=0;}if(5&i[0])throw i[1];return {value:i[0]?i[1]:void 0,done:!0};}([i,s]);};}};const W=function(){function t(t){this._options=t?G(a(F,t)):F,this.update();}return t._clearContainer=function(t){t&&(t.innerHTML="");},t.prototype._getQRStylingElement=function(t){return void 0===t&&(t="png"),Y(this,void 0,void 0,function(){var e,r,n;return $(this,function(o){switch(o.label){case 0:if(!this._qr)throw "QR code is empty";return "svg"!==t.toLowerCase()?[3,2]:(r=void 0,e=void 0,this._svg&&this._svgDrawingPromise?(e=this._svg,r=this._svgDrawingPromise):(e=new L(this._options),r=e.drawQR(this._qr)),[4,r]);case 1:return o.sent(),[2,e];case 2:return r=void 0,n=void 0,this._canvas&&this._canvasDrawingPromise?(n=this._canvas,r=this._canvasDrawingPromise):(n=new z(this._options),r=n.drawQR(this._qr)),[4,r];case 3:return o.sent(),[2,n];}});});},t.prototype.update=function(e){t._clearContainer(this._container),this._options=e?G(a(this._options,e)):this._options,this._options.data&&(this._qr=U()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(t){switch(!0){case /^[0-9]*$/.test(t):return "Numeric";case /^[0-9A-Z $%*+\-./:]*$/.test(t):return "Alphanumeric";default:return "Byte";}}(this._options.data)),this._qr.make(),this._options.type===N?(this._canvas=new z(this._options),this._canvasDrawingPromise=this._canvas.drawQR(this._qr),this._svgDrawingPromise=void 0,this._svg=void 0):(this._svg=new L(this._options),this._svgDrawingPromise=this._svg.drawQR(this._qr),this._canvasDrawingPromise=void 0,this._canvas=void 0),this.append(this._container));},t.prototype.append=function(t){if(t){if("function"!=typeof t.appendChild)throw "Container should be a single DOM node";this._options.type===N?this._canvas&&t.appendChild(this._canvas.getCanvas()):this._svg&&t.appendChild(this._svg.getElement()),this._container=t;}},t.prototype.getRawData=function(t){return void 0===t&&(t="png"),Y(this,void 0,void 0,function(){var e,r,n;return $(this,function(o){switch(o.label){case 0:if(!this._qr)throw "QR code is empty";return [4,this._getQRStylingElement(t)];case 1:return e=o.sent(),"svg"===t.toLowerCase()?(r=new XMLSerializer(),n=r.serializeToString(e.getElement()),[2,new Blob(['<?xml version="1.0" standalone="no"?>\r\n'+n],{type:"image/svg+xml"})]):[2,new Promise(function(r){return e.getCanvas().toBlob(r,"image/"+t,1);})];}});});},t.prototype.download=function(t){return Y(this,void 0,void 0,function(){var e,r,n,o,i;return $(this,function(a){switch(a.label){case 0:if(!this._qr)throw "QR code is empty";return e="png",r="qr","string"==typeof t?(e=t,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):"object"==typeof t&&null!==t&&(t.name&&(r=t.name),t.extension&&(e=t.extension)),[4,this._getQRStylingElement(e)];case 1:return n=a.sent(),"svg"===e.toLowerCase()?(o=new XMLSerializer(),i='<?xml version="1.0" standalone="no"?>\r\n'+(i=o.serializeToString(n.getElement())),s("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(i),r+".svg")):s(n.getCanvas().toDataURL("image/"+e),r+"."+e),[2];}});});},t;}();}},e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports;}return r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e;},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]});},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r(796);})().default;});});var QRCodeStyling=/*@__PURE__*/getDefaultExportFromCjs(qrCodeStyling);////////////////////////////////////////////////////////////////////////////////
    /** @internal */class QrcodeItemElement extends ReportItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"qrcodeItemView");}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return "rr-qrcode rr-item-element";}get guardLabel(){return 'qrcode';}get debugLabel(){return 'qrcode';}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;this._setModelSize(m,dom,hintWidth,hintHeight);if(!this._isTesting()){this.$_render(ctx,m,dom);}return Size.create(dom.offsetWidth,dom.offsetHeight);}isDom(dom){return dom.parentElement===this.dom||super.isDom(dom);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_getText(ctx,m){let s='';if(m.value){if(ctx.printing){s=this.getPrintValue(ctx,m);}else {s=m.value;}s=Utils.toStr(s);}else if(m.text){s=m.text;}return s;}$_render(ctx,m,dom){const w=this._modelWidth||0;const h=this._modelHeight||0;const minSize=QrcodeItem.QRCODE_MIN_SIZE;if(w<minSize||h<minSize){return;}const s=this.$_getText(ctx,m);if(!this._qrcode){this._qrcode=new QRCodeStyling({// type: 'svg',
    width:w,height:h,data:s,qrOptions:{errorCorrectionLevel:m.errorCorrectionLevel}});this._qrcode.append(dom);const canvasElement=dom.querySelector("canvas");dom.removeChild(canvasElement);const mimeImageData=canvasElement.toDataURL();const imageElement=document.createElement('img');imageElement.src=mimeImageData;imageElement.alt='QR코드';dom.appendChild(imageElement);}else {const{width,height}=this._qrcode._options;if(w!==width||h!==height){this._qrcode.update({width:w,height:h});}}}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class ShapeItemBaseElement extends ReportItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _getShape(ctx,m){const cb=m.shapeCallback;let s=m.shape;if(m.value&&cb){let v;if(ctx.printing){v=this.getPrintValue(ctx,m);}else {v=m.value;}s=cb(ctx.getUserData(),m,v)||s;}return s;}_getDrawing(shape,className){let drawing;if(shape){shape=shape.toLowerCase();if(EllipseShape.isEllipse(shape)){drawing=this._ellipse?this._ellipse:this._ellipse=new EllipseShape();this._ellipse.circled=shape===EllipseShape.CIRCLE;}else if(LineShape.isLine(shape)){drawing=this._line?this._line:this._line=new LineShape();this._line.shape=shape;}else {drawing=this._polygon?this._polygon:this._polygon=new PolygonShape(shape);this._polygon.shape=shape;}}drawing.className=className;return drawing;}}/** @internal */class ShapeItemElement extends ShapeItemBaseElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"shapeItemView");this.$_render=(ctx,renderer,width,height)=>{const shape=this._getShape(ctx,this.model);if(shape){const drawing=this._getDrawing(shape);if(drawing){const cs=getComputedStyle(this._svg);const sz=parseFloat(cs.strokeWidth)||0;const d=shape!=='star'?1:0;if(!this._isTesting()){drawing.drawAt(d,d,renderer,width-d*2,height-d*2,sz);}}}};}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    prepareExport(){const dom=this.dom;this._svg.setAttribute('viewBox',[0,0,dom.offsetWidth,dom.offsetHeight].join(' '));}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return "rr-shape rr-item-element";}get debugLabel(){return '';}_initDom(doc,dom){super._initDom(doc,dom);this._svg=SvgElement.createSVG(dom,'rr-shape-shape',{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"});}_setStyles(model,styles,css){super._setStyles(model,styles,css);ShapeItem.STYLE_PROPS.forEach(v=>{if(v in styles){this._svg.style[v]=styles[v];}});}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;this._setModelSize(m,dom,hintWidth,hintHeight);SvgElement.renderSVG(null,ctx,this._svg,this.$_render);const w=dom.offsetWidth;const h=dom.offsetHeight;if(ctx.printing){SvgElement.prepareExport(this._svg,w,h);}return Size.create(w,h);}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class SvgItemElement extends ReportItemElement{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"svgItemView");if(!SvgItemElement.SVG){SvgItemElement.SVG=doc.createElement('div');}}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return "rr-svg rr-item-element";}get debugLabel(){return '';}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;const css=dom.style;let svg=m.svg&&ctx.assets.getSvg(m.svg);if(ctx.printing&&!svg){svg=this.getPrintValue(ctx,m);}this._setModelSize(m,dom,hintWidth,hintHeight);// IE를 지원할 필요가 없을 경우 해당 코드 삭제 필요
    if(Utils.isIE){const div=SvgItemElement.SVG;div.innerHTML=svg.substring(svg.indexOf('<svg'));const elt=div.lastChild;if(elt instanceof SVGSVGElement){elt.setAttribute('viewbox','0 0 '+elt.getAttribute('width')+' '+elt.getAttribute('height'));//elt.setAttribute('preserveAspectRatio', 'none');
    elt.setAttribute('width','100%');elt.setAttribute('height','100%');// dom에 바로 svg text를 설정하고 위치럼 scale을 적용하면 적용되지 않는다. 다른 div에서 설정된 svg로 설정한다.
    dom.innerHTML=div.innerHTML;delete dom.dataset.empty;}else {dom.dataset.empty='true';dom.innerHTML='<span></span>';}}else {if(svg){dom.innerHTML='';css.background='no-repeat center/contain url(\''+svg+'\')';delete dom.dataset.empty;}else {dom.dataset.empty='true';dom.innerHTML='<span></span>';}if(ctx.printing){// const div = document.createElement('div');
    // div.innerHTML = svg.substring(svg.indexOf('<svg'));
    // this._svg = div.firstChild as SVGSVGElement;
    dom[T_SVG]=svg;}}return Size.create(dom.offsetWidth,dom.offsetHeight);}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class HichartWrapper extends Base{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(container,model){super();if(!HichartWrapper.Highcharts){HichartWrapper.Highcharts=window['Highcharts'];}if(HichartWrapper.Highcharts){HichartWrapper.Highcharts.setOptions(HichartWrapper.hichart_options);}this._container=container;this._model=model;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    refreshChart(ctx,width,height){if(!HichartWrapper.Highcharts)return;const assets=ctx.assets;const m=this._model;const theme=m.theme?assets.getHighchart(m.theme):null;const cfg=theme&&theme.theme?Utils.deepClone(theme.theme):{};cfg.chart={inverted:m.inverted,styledMode:false,backgroundColor:null,plotBorderWidth:m.plotBorderWidth,plotBorderColor:m.plotBorderColor// colors: m.colors,
    };cfg.plotOptions=cfg.plotOptions||{};cfg.plotOptions.series=cfg.plotOptions.series||{};Object.assign(cfg.plotOptions.series,{stacking:m.stacking});cfg.credits={enabled:false};cfg.title=m.title.getWrapper();cfg.subtitle=m.subtitle.getWrapper();this._buildConfig(ctx,m,cfg);const chart=HichartWrapper.Highcharts.chart(this._container,cfg);this._doRefreshChart(chart,m,cfg);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _buildConfig(ctx,model,config){this.$_buildXAxis(ctx,model.xAxis,config.xAxis=model.xAxis.getWrapper());this.$_buildYAxis(ctx,model.yAxis,config.yAxis=model.yAxis.getWrapper());this.$_buildLegend(model.legend,config.legend=model.legend.getWrapper());const series=config.series=[];for(let i=0;i<model.series.count;i++){const ser=model.series.get(i);const obj={};obj.id=ser.id;obj.data=ser.getValues(ctx,ctx.dp);ser.wrap(obj);obj.visible=ser.visible&&(ctx.printing||ser.designVisible);series.push(obj);}}_doRefreshChart(chart,model,config){}$_buildXAxis(ctx,axis,cfg){cfg.categories=axis.getCategories(ctx,ctx.dp);}$_buildYAxis(ctx,axis,cfg){cfg.categories=axis.getCategories(ctx,ctx.dp);}$_buildLegend(legend,cfg){}}HichartWrapper.hichart_options={lang:{thousandsSep:','},plotOptions:{series:{animation:false,enableMouseTracking:false}}};////////////////////////////////////////////////////////////////////////////////
    /** @internal */class HichartItemElement extends ReportItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"hichartItemView");}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return "rr-hichart rr-item-element";}get debugLabel(){return 'Hichart';}_initDom(doc,dom){super._initDom(doc,dom);const div=this._chartDiv=doc.createElement('div');div.className='rr-hichart-wrapper';dom.appendChild(div);}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;const css=dom.style;if(!ctx.printing){dom.style.border='1px solid rgba(55, 55, 55, 0.1)';}this.$_prepareWrapper(m,this._chartDiv);this._setModelSize(m,dom,hintWidth,hintHeight);css.overflow="hidden";return new Size(dom.offsetWidth,dom.offsetHeight);}_doLayoutContent(ctx){if(this._wrapper){this._chartDiv.style.width=this.width+'px';this._chartDiv.style.height=this.height+'px';if(!this._isTesting()){this.$_layoutWrapper(ctx,this._wrapper);}}}isDom(dom){return this.containsDom(dom)||super.isDom(dom);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_createWrapper(div,model){return new HichartWrapper(div,model);}$_prepareWrapper(model,div){if(!this._wrapper){this._wrapper=this.$_createWrapper(div,model);}}$_layoutWrapper(ctx,wrapper){wrapper.refreshChart(ctx,this.width,this.height);}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class SummaryItemElement extends TextItemElementBase{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"SummaryItemView");}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return "rr-summary rr-item-element";}get guardLabel(){return 'summary';}get editable(){return false;}_getPrintText(ctx,m){this._error=null;try{const runtime=m.expression&&ctx.bandSummaryRuntime;let v=runtime?m.getSummary(runtime):this.getPrintValue(ctx,m);return this._getText(m,v);}catch(err){this._error=err;console.error(err);return '<<ERROR>>';}}_getDesignText(m,system){let s='';if(m.expression){s='['+m.expression+']';}else if(m.value){if(system){s=m.value;}else {s='['+m.value+']';}}return s||'[summary]';}_doMeasure(ctx,dom,hintWidth,hintHeight){const sz=super._doMeasure(ctx,dom,hintWidth,hintHeight);dom.dataset.error=this._error?'1':'0';if(this._error)dom.title=this._error;return sz;}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class BarItemElement extends ReportItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"barItemView");}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return "rr-bar rr-item-element";}get debugLabel(){return '';}_initDom(doc,dom){super._initDom(doc,dom);this._bar=doc.createElement('span');this._bar.className='rr-bar-bar';Utils.extend(this._bar.style,{position:'absolute',textAlign:'center',color:'gray'});dom.appendChild(this._bar);}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;const v=ctx.printing?this.getPrintValue(ctx,m,m.position):m.position;const w=(v-m.minimum)*100/(m.maximum-m.minimum);if(w<=0&&!ctx.printing){Utils.extend(this._bar.style,{width:'100%',height:'',top:'50%',transform:'translateY(-50%)'});this._bar.textContent='[ BAR ]';this._bar.dataset.design='';}else {Utils.extend(this._bar.style,{width:w+'%',height:'100%',top:'',transform:''});this._bar.textContent='';delete this._bar.dataset.design;}if(ctx.printing){// for exporting
    this._bar.dataset[T_MODEL]=dom.dataset[T_MODEL];}return Size.create(dom.offsetWidth,dom.offsetHeight);}_setStyles(model,styles,css){super._setStyles(model,styles,css);if('barColor'in styles){this._bar.style.backgroundColor=styles['barColor'];}}isDom(dom){return dom===this._bar||super.isDom(dom);}}////////////////////////////////////////////////////////////////////////////////
    /**
     * @internal
     *
     * View for RatingItem.
     */class RatingItemElement extends ShapeItemBaseElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"ratingItemView");this.$_render=(ctx,renderer,width,height)=>{const m=this.model;const shape=this._getShape(ctx,m);if(shape){const d=shape!=='star'?1:0;const drawing=this._getDrawing(shape,RatingItemElement.SVG_CLASS);if(drawing){const cnt=m.shapeCount;const w=Math.min(width/cnt,height);const v=ctx.printing?this.getPrintValue(ctx,m):m.designValue;const min=Utils.toNumber(m.minimum,0);const max=Utils.toNumber(m.maximum,cnt);const n=Math.min(cnt,Math.round((v-min)*cnt/(max-min)));const y=0;const x=(width-w*cnt)/2;const wItem=w-d*2;const hItem=height-d*2;for(let i=0;i<n;i++){const x1=x+i*w+d;const y1=y+d;drawing.drawAt(x1,y1,renderer,wItem,hItem);}for(let i=n;i<cnt;i++){const x1=x+i*w+d;const y1=y+d;const elt=drawing.drawAt(x1,y1,renderer,wItem,hItem,0,RatingItemElement.BACK_CLASS);// NOTE: 문서 내보내기 시 이미지로 저장한 후 처리하는데,
    //       <g>와 같은 <svg> 구성 ELEMENT들의 class가 적용되지 않아, 강제로 적용시킨다.
    //       이미지 저장시 class 가 적용되는 방법을 찾을 것!
    let cs;if(this._backFill){SvgElement.setStyle(elt,'fill',this._backFill);}else {cs=getComputedStyle(elt);cs.fill&&SvgElement.setStyle(elt,'fill',cs.fill);}if(this._backStroke){SvgElement.setStyle(elt,'stroke',this._backStroke);}else {cs=cs||getComputedStyle(elt);cs.stroke&&SvgElement.setStyle(elt,'stroke',cs.stroke);}}}}};}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return "rr-rating rr-item-element";}get debugLabel(){return '';}_initDom(doc,dom){super._initDom(doc,dom);const styles={position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"};this._svg=SvgElement.createSVG(dom,'rr-rating-shape',styles);}_doMeasure(ctx,dom,hintWidth,hintHeight){this._setModelSize(this.model,dom,hintWidth,hintHeight);SvgElement.renderSVG(null,ctx,this._svg,this.$_render);const w=dom.offsetWidth;const h=dom.offsetHeight;if(ctx.printing){SvgElement.prepareExport(this._svg,w,h);}return Size.create(w,h);}_setStyles(model,styles,css){super._setStyles(model,styles,css);['fill','stroke'].forEach(v=>{if(v in styles){this._svg.style[v]=styles[v];}});this._backFill=styles['backFill'];this._backStroke=styles['backStroke'];}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    RatingItemElement.SVG_CLASS='rr-rating-shape-svg';RatingItemElement.BACK_CLASS='rr-rating-shape-back';////////////////////////////////////////////////////////////////////////////////
    /**
     * @internal
     * View base for DataListContainer.
     */class DataListContainerElement extends ReportGroupItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,'dataListBoxView');this._gap=0;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return 'datalist';}_getCssSelector(){return 'rr-datalist rr-group-element';}_needDesignBox(){return true;}_buildItems(ctx,report,model){if(ctx.printing){const dp=report.model.data;const data=dp&&dp.get(model.data);const field=model.value;let count=data instanceof BandData?data.rowCount:data?1:0;if(!isNaN(model.maxRows))count=Math.min(count,model.maxRows);const dom=this.dom;const doc=this.doc;for(let i=0;i<count;i++){const span=doc.createElement('span');const v=data instanceof BandData?data.getRowValue(i,field):data.getValue(field);Object.assign(span.style,{position:'absolute'});span.textContent=v;dom.appendChild(span);}}}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;this._paddings=ctx.reportView.getBoxPaddings(m);if(!this.measureFixed){this._setModelSize(m,dom,hintWidth,hintHeight,true);}super._doMeasure(ctx,dom,hintWidth,hintHeight);const spans=this.dom.children;let w=0;let h=0;let n=0;for(let i=0;i<spans.length;i++){const span=spans[i];if(span instanceof HTMLSpanElement){h+=span.offsetHeight;w=Math.max(w,span.offsetWidth);n++;}}h+=(n-1)*Utils.toNumber(this.model.rowGap,0);return new Size(w,h);}_doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz){if(!(sz.height>0)&&!ctx.printing&&this.model.designHeight>0){sz.height=this.model.designHeight;}if(!(sz.width>0)&&!ctx.printing&&this.model.designWidth>0){sz.width=this.model.designWidth;}this._applyPaddings(dom,sz);super._doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz);dom.style.padding='0';}_doLayoutContent(ctx){const model=this.model;const spans=this.dom.children;const gap=Utils.toNumber(model.rowGap,0);const w=this.width;const h=this.height;const itemAlign=model.itemAlign;const rowAlign=model.rowAlign;const paddings=this._paddings;let hRows=0;let y=paddings.top;let x;switch(rowAlign){case Align.RIGHT:x=w-paddings.right;break;case Align.CENTER:x=(w-paddings.left-paddings.right)/2;break;default:x=paddings.left;break;}if(itemAlign==='middle'||itemAlign==='bottom'){let n=0;for(let i=0;i<spans.length;i++){const span=spans[i];if(span instanceof HTMLSpanElement){hRows+=span.offsetHeight;n++;}}if(n!==0)hRows+=(n-1)*gap;if(itemAlign==='bottom'){y=Math.max(y,h-paddings.bottom-hRows);}else {y=Math.max(y,(h-paddings.top-paddings.bottom-hRows)/2);}}for(let i=0;i<spans.length;i++){const span=spans[i];if(span instanceof HTMLSpanElement){span.style.top=y+'px';switch(rowAlign){case Align.RIGHT:span.style.left=x-span.offsetWidth+'px';break;case Align.CENTER:span.style.left=x-span.offsetWidth/2+'px';break;default:span.style.left=x+'px';break;}y+=span.offsetHeight+gap;}}}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class PageItemElement extends ReportItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model,name){super(doc,model,name);}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return PageItemElement.CLASS_LIST;}get guardLabel(){return 'page';}get debugLabel(){return 'page';}_initDom(doc,dom){super._initDom(doc,dom);const span=this._span=doc.createElement('span');span.className=PageItemElement.SPAN;span.style.display='table-cell';span.style.verticalAlign='middle';dom.appendChild(span);}_doPrepareMeasure(ctx,dom){super._doPrepareMeasure(ctx,dom);if(ctx.printing){this._span.style.display='none';}}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;const span=this._span;this._setModelSize(m,dom,hintWidth,hintHeight);span.textContent=m.pageName||'PAGE';let w=hintWidth;let h=this._modelHeight;if(isNaN(h)){h=Math.round(span.offsetHeight);}return new Size(w,h);}_doLayoutContent(ctx){}isDom(dom){return dom===this._span||super.isDom(dom);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    PageItemElement.CLASS_NAME='rr-pageitem';PageItemElement.CLASS_LIST=PageItemElement.CLASS_NAME+' rr-item-element';PageItemElement.SPAN='_rr_span_';////////////////////////////////////////////////////////////////////////////////
    // DataMatrix.ts
    // 2022. 03. 31. created by woori
    // -----------------------------------------------------------------------------
    // Copyright (c) 2020-2022 Wooritech Inc.
    // All rights reserved.
    ////////////////////////////////////////////////////////////////////////////////
    /**
        https://github.com/datalog/datamatrix-svg
        under MIT license
        # datamatrix.js has no dependencies
        Copyright (c) 2020 Constantine
    */function DATAMatrix(doc,elt,Q){var M=[],xx=0,yy=0,bit=function(x,y){M[y]=M[y]||[],M[y][x]=1;},toAscii=function(t){var r=[],l=t.length;for(var i=0;i<l;i++){var c=t.charCodeAt(i),c1=i+1<l?t.charCodeAt(i+1):0;if(c>47&&c<58&&c1>47&&c1<58){/* 2 digits */r.push((c-48)*10+c1+82),/* - 48 + 130 = 82 */i++;}else if(c>127){/* extended char */r.push(235),r.push(c-127&255);}else r.push(c+1);/* char */}return r;},toBase=function(t){var r=[231],/* switch to Base 256 */l=t.length;if(250<l){r.push(37+(l/250|0)&255);/* length high byte (in 255 state algo) */}r.push(l%250+149*(r.length+1)%255+1&255);/* length low byte (in 255 state algo) */for(var i=0;i<l;i++){r.push(t.charCodeAt(i)+149*(r.length+1)%255+1&255);/* data in 255 state algo */}return r;},toEdifact=function(t){var n=t.length,l=n+1&-4,cw=0,ch,r=l>0?[240]:[];/* switch to Edifact */for(var i=0;i<l;i++){if(i<l-1){/* encode char */ch=t.charCodeAt(i);if(ch<32||ch>94)return [];/* not in set */}else ch=31;/* return to ASCII */cw=cw*64+(ch&63);if((i&3)==3){/* 4 data in 3 words */r.push(cw>>16),r.push(cw>>8&255),r.push(cw&255),cw=0;}}return l>n?r:r.concat(toAscii(t.substr(l==0?0:l-1)));/* last chars*/},toText=function(t,s){var i,j,cc=0,cw=0,l=t.length,r=[s[0]],/* start switch */push=function(v){/* pack 3 chars in 2 codes */cw=40*cw+v;/* add code */if(cc++==2){r.push(++cw>>8),r.push(cw&255),cc=cw=0;}};for(i=0;i<l;i++){/* last char in ASCII is shorter */if(0==cc&&i==l-1)break;var ch=t.charCodeAt(i);if(ch>127&&238!=r[0]){/* extended char */push(1),push(30),ch-=128;/* hi bit in C40 & TEXT */}for(j=1;ch>s[j];j+=3);/* select char set */var x=s[j+1];/* shift */if(8==x||9==x&&0==cc&&i==l-1)return [];/* char not in set or padding fails */if(x<5&&cc==2&&i==l-1)break;/* last char in ASCII */if(x<5)push(x);/* shift */push(ch-s[j+2]);/* char offset */}if(2==cc&&238!==r[0]){/* add pad */push(0);}r.push(254);/* return to ASCII */if(cc>0||i<l)r=r.concat(toAscii(t.substr(i-cc)));/* last chars */return r;},encodeMsg=function(text,rct){text=unescape(encodeURI(text));var enc=toAscii(text),el=enc.length,k=toText(text,[230,31,0,0,32,9,29,47,1,33,57,9,44,64,1,43,90,9,51,95,1,69,127,2,96,255,1,0]),l=k.length;if(l>0&&l<el)enc=k,el=l;k=toText(text,[239,31,0,0,32,9,29,47,1,33,57,9,44,64,1,43,90,2,64,95,1,69,122,9,83,127,2,96,255,1,0]);l=k.length;if(l>0&&l<el)enc=k,el=l;k=toText(text,[238,12,8,0,13,9,13,31,8,0,32,9,29,41,8,0,42,9,41,47,8,0,57,9,44,64,8,0,90,9,51,255,8,0]);l=k.length;if(l>0&&l<el)enc=k,el=l;k=toEdifact(text);l=k.length;if(l>0&&l<el)enc=k,el=l;k=toBase(text);l=k.length;if(l>0&&l<el)enc=k,el=l;var h,w,nc=1,nr=1,fw,fh,/* symbol size, regions, region size */i,j=-1,c,r,s,b=1,/* compute symbol size */rs=new Array(70),/* reed / solomon code */rc=new Array(70),lg=new Array(256),/* log / exp table for multiplication */ex=new Array(255);if(rct&&el<50){/* rect */k=[16,7,28,11,24,14,32,18,32,24,44,28];do{w=k[++j];/* width */h=6+(j&12);/* height */l=w*h/8;/* bytes count in symbol */}while(l-k[++j]<el);/* could we fill the rect? */ /* column regions */if(w>25)nc=2;}else {/* square */w=h=6;i=2;/* size increment */k=[5,7,10,12,14,18,20,24,28,36,42,48,56,68,84,112,144,192,224,272,336,408,496,620];/* rs checkwords */do{if(++j==k.length)return [0,0];/* msg is too long */if(w>11*i)i=4+i&12;/* advance increment */w=h+=i;l=w*h>>3;}while(l-k[j]<el);if(w>27)nr=nc=2*(w/54|0)+2;/* regions */if(l>255)b=2*(l>>9)+2;/* blocks */}s=k[j],/* rs checkwords */fw=w/nc,/* region size */fh=h/nr;/* first padding */if(el<l-s)enc[el++]=129;/* more padding */while(el<l-s){enc[el++]=(149*el%253+130)%254;}/* Reed Solomon error detection and correction */s/=b;/* log / exp table of Galois field */for(j=1,i=0;i<255;i++){ex[i]=j,lg[j]=i,j+=j;if(j>255)j^=301;/* 301 == a^8 + a^5 + a^3 + a^2 + 1 */}/* RS generator polynomial */for(rs[s]=0,i=1;i<=s;i++)for(j=s-i,rs[j]=1;j<s;j++)rs[j]=rs[j+1]^ex[(lg[rs[j]]+i)%255];/* RS correction data for each block */for(c=0;c<b;c++){for(i=0;i<=s;i++)rc[i]=0;for(i=c;i<el;i+=b)for(j=0,x=rc[0]^enc[i];j<s;j++)rc[j]=rc[j+1]^(x?ex[(lg[rs[j]]+lg[x])%255]:0);/* interleaved correction data */for(i=0;i<s;i++)enc[el+c+i*b]=rc[i];}/* layout perimeter finder pattern */ /* horizontal */for(i=0;i<h+2*nr;i+=fh+2)for(j=0;j<w+2*nc;j++){bit(j,i+fh+1);if((j&1)==0)bit(j,i);}/* vertical */for(i=0;i<w+2*nc;i+=fw+2)for(j=0;j<h;j++){bit(i,j+(j/fh|0)*2+1);if((j&1)==1)bit(i+fw+1,j+(j/fh|0)*2);}s=2,/* step */c=0,/* column */r=4,/* row */b=[0,0,-1,0,-2,0,0,-1,-1,-1,-2,-1,-1,-2,-2,-2];/* diagonal steps */for(i=0;i<l;r-=s,c+=s){if(r==h-3&&c==-1)k=[w,6-h,w,5-h,w,4-h,w,3-h,w-1,3-h,3,2,2,2,1,2];else if(r==h+1&&c==1&&(w&7)==0&&(h&7)==6)k=[w-2,-h,w-3,-h,w-4,-h,w-2,-1-h,w-3,-1-h,w-4,-1-h,w-2,-2,-1,-2];else {if(r==0&&c==w-2&&w&3)continue;/* corner B: omit upper left */if(r<0||c>=w||r>=h||c<0){/* outside */s=-s,/* turn around */r+=2+s/2,c+=2-s/2;while(r<0||c>=w||r>=h||c<0){r-=s,c+=s;}}if(r==h-2&&c==0&&w&3)k=[w-1,3-h,w-1,2-h,w-2,2-h,w-3,2-h,w-4,2-h,0,1,0,0,0,-1];else if(r==h-2&&c==0&&(w&7)==4)k=[w-1,5-h,w-1,4-h,w-1,3-h,w-1,2-h,w-2,2-h,0,1,0,0,0,-1];else if(r==1&&c==w-1&&(w&7)==0&&(h&7)==6)continue;/* omit corner D */else k=b;/* nominal L - shape layout */}/* layout each bit */for(el=enc[i++],j=0;el>0;j+=2,el>>=1){if(el&1){var x=c+k[j],y=r+k[j+1];/* wrap around */if(x<0)x+=w,y+=4-(w+4&7);if(y<0)y+=h,x+=4-(h+4&7);/* region gap */bit(x+2*(x/fw|0)+1,y+2*(y/fh|0)+1);}}}/* unfilled corner */for(i=w;i&3;i--){bit(i,i);}xx=w+2*nc,yy=h+2*nr;};return function(){// function ishex( c ) {
    // 	return /^#[0-9a-f]{3}(?:[0-9a-f]{3})?$/i.test( c );
    // }
    function svg(n,a){n=n instanceof SVGSVGElement?n:doc.createElementNS(ns,n);for(var o in a||{}){n.setAttribute(o,a[o]);}return n;}var abs=Math.abs,r,x,y,d,sx,sy,ns='http://www.w3.org/2000/svg',path='',q='string'==typeof Q?{msg:Q}:Q||{},p=q.pal||['#000'],dm=abs(q.dim)||256,pd=abs(q.pad),pd=pd>-1?pd:2,mx=[1,0,0,1,pd,pd],//   fg = p[ 0 ], fg = ishex( fg ) ? fg : '#000',
    //   bg = p[ 1 ], bg = ishex( bg ) ? bg :  0,
    fg=p[0]||'#000',bg=p[1]||'transparent',/* render optimized or verbose svg */optimized=q.vrb?0:1;encodeMsg(q.msg||'',q.rct);sx=xx+pd*2,sy=yy+pd*2;y=yy;while(y--){d=0,x=xx;while(x--){if(M[y][x]){if(optimized){d++;if(!M[y][x-1])path+='M'+x+','+y+'h'+d+'v1h-'+d+'v-1z',d=0;}else path+='M'+x+','+y+'h1v1h-1v-1z';}}}r=svg(elt,{'viewBox':[0,0,sx,sy].join(' '),'width':dm/sy*sx|0,'height':dm,'fill':fg,'shape-rendering':'crispEdges','xmlns':ns,'version':'1.1'});if(bg)r.appendChild(svg('path',{'fill':bg,'d':'M0,0v'+sy+'h'+sx+'V0H0Z'}));r.appendChild(svg('path',{'transform':'matrix('+mx+')','d':path}));return r;}();}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class DataMatrixItemElement extends ReportItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"dataMatrixItemView");}_doDispose(){super._doDispose();this._svg=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return "rr-datamatrix rr-item-element";}get guardLabel(){return 'dataMatrix';}get debugLabel(){return 'dataMatrix';}_initDom(doc,dom){super._initDom(doc,dom);Object.assign(dom.style,{display:'flex',justifyContent:'center',alignItems:'center'});}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;this._setModelSize(m,dom,hintWidth,hintHeight);if(!this._isTesting()){if(!this._svg){this._svg=dom.ownerDocument.createElementNS(SVGNS,'svg');dom.appendChild(this._svg);}this._svg.dataset[T_MODEL]=m.shash;this.$_render(ctx,m,dom);}return Size.create(dom.offsetWidth,dom.offsetHeight);}isDom(dom){return this.dom.contains(dom)||super.isDom(dom);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_getText(ctx,m){let s='';if(m.value){if(ctx.printing){s=this.getPrintValue(ctx,m);}else {s=m.value;}s=Utils.toStr(s);}else if(m.text){s=m.text;}return s;}$_render(ctx,m,dom){const w=this._modelWidth||0;const h=this._modelHeight||0;const minSize=DataMatrixItem.MIN_SIZE;if(w<minSize||h<minSize){return;}const s=this.$_getText(ctx,m);const opts={msg:s,dim:Math.min(w,h),pad:Utils.pickNum(this.model.pad,2)};if(dom.style.color){opts.pal=[dom.style.color];}DATAMatrix(dom.ownerDocument,this._svg,opts);}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class HtmlItemElement extends ReportItemElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,model,"HtmlItemView");}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get debugLabel(){return 'html';}_getCssSelector(){return 'rr-html rr-item-element';}_initDom(doc,dom){super._initDom(doc,dom);this._content=doc.createElement('div');Object.assign(this._content.style,{pointerEvents:'none',display:'inline-block'});dom.appendChild(this._content);}_doMeasure(ctx,dom,hintWidth,hintHeight){const m=this.model;let html=m.getHtml(ctx);dom.style.width='';dom.style.height='';// 모델 크기가 설정됐는 지 확인한다.
    this._setModelSize(m,dom,hintWidth,hintHeight);if(isNaN(this._modelWidth)){dom.style.width='100000px';}this._content.innerHTML=html;if(ctx.printing){this._setBindMarker(false);}else {const v=m.value;v?this._setBindMarker(true,false):this._setBindMarker(false);}let w=this._content.offsetWidth+1;let h=this._content.offsetHeight;if(isNaN(this._modelWidth)){dom.style.width='';}return new Size(w,h);}}////////////////////////////////////////////////////////////////////////////////
    class EmptyView extends LayerElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,"emptyView");//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._error='';}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** error */get error(){return this._error;}set error(value){this._error=value;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    layoutContent(report){const view=this._errorView;const err=report.loadError;if(this.error=err){view.style.visibility="";view.textContent=err;//const x = Math.round((this.width - view.offsetWidth) / 2);
    const y=Math.round((this.height-view.offsetHeight)/2);//view.style.left = x + 'px';
    view.style.top=y+'px';view.style.width=this.width+"px";}else {view.style.visibility="hidden";}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-empty';}_initDom(doc,dom){super._initDom(doc,dom);// message
    const span=doc.createElement("span");const css=span.style;css.position="absolute";css.left='20px';css.top='20px';span.className="rr-empty-view rr-empty-message";span.textContent="Report model is not set.";dom.appendChild(span);// bottom
    const span2=doc.createElement("span");const css2=span2.style;css2.position="absolute";css2.left='20px';css2.bottom='10px';span2.className="rr-empty-view rr-empty-bottom";span2.textContent="RealReport v1.0";dom.appendChild(span2);// error
    const span3=this._errorView=doc.createElement("span");const css3=span3.style;css3.position="absolute";span3.className="rr-empty-view rr-empty-error";dom.appendChild(span3);}}/** @internal */class ReportView extends LayerElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){let editable=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let printing=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;super(doc,"reportView");this._loadError='';this._nameMap={};this._modelDirty=false;this._editable=editable;this.addChild(this._activePage=this._pageView=new PageView(doc));if(!printing){this.addChild(this._emptyView=this._createEmptyView(doc));}}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // IImageContainer
    //-------------------------------------------------------------------------
    addImage(url){this._images[url]=1;}imageLoaded(url){delete this._images[url];}imagesAllLoaded(){return Utils.isEmpty(this._images);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** editable */get editable(){return this._editable;}/** model */get model(){return this._model;}set model(value){if(value!==this._model){this._model&&this._model.removeListener(this);this._model=value;this._pageView["$_setModel"](value&&value.page);this._nameMap={};this._model&&this._model.addListener(this);this._modelDirty=true;this.invalidateLayout();}}/** pageView */get pageView(){return this._pageView;}/** loadError */get loadError(){return this._loadError;}set loadError(value){this._loadError=value;}get zoom(){return 100;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getBoxPaddings(model){const css=this._boxMeasurer.style;const styles=model.styles;css.padding='0';css.paddingLeft='0';css.paddingTop='0';if(styles){for(let p in styles){if(p.charAt(0)=='p'&&p.charAt(1)=='a'){css[p]=styles[p];}}}css.margin='0';css.border="none";const w=this._boxMeasurer.offsetWidth;const h=this._boxMeasurer.offsetHeight;// TODO: 아래에서 boxMeasurer의 offset을 빼주지 않으면 x, y 값이 틀어진다. 이유 ?
    const x=this._boxInner.offsetLeft-this._boxMeasurer.offsetLeft;const y=this._boxInner.offsetTop-this._boxMeasurer.offsetTop;return {left:x,top:y,right:w-x-1,bottom:h-y-1};}findElement(modelName){let elt=this._nameMap[modelName];if(elt)return elt;elt=this._activePage.findElement(modelName);if(elt){this._nameMap[modelName]=elt;}return elt;}findElementOf(dom){return this._activePage.findElementOf(dom);}getElementOf(model){return this._activePage.getElementOf(model);}getItemBoundingRect(element){let rotated=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;// transform울 제거한 위치를 반화한다.
    const dom=rotated?Utils.cloneDom(element.dom,rotated&&element.parent instanceof TableCellElement):element.dom;const r=Utils.getBoundingClientRect2(dom);const r2=Utils.getBoundingClientRect2(this._activePage.dom);const sz=element.offsetSize;const zoom=100/this.zoom;if(rotated){dom.remove();}return new Rectangle((r.left-r2.left)*zoom-2,(r.top-r2.top)*zoom-2,sz.width,sz.height);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return "rr-report-view";}_initDom(doc,dom){super._initDom(doc,dom);this._boxMeasurer=doc.createElement('div');this._boxMeasurer.className='box-measurer';let css=this._boxMeasurer.style;css.display='inline-block';css.position='abolute';css.left='0';css.top='0';css.visibility="hidden";css.pointerEvents="none";this._boxInner=doc.createElement('div');this._boxInner.className='box-measurer-inner';css=this._boxInner.style;css.width='1px';css.height='1px';this._boxMeasurer.appendChild(this._boxInner);dom.appendChild(this._boxMeasurer);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _createEmptyView(doc){// const view = new LayerElement(doc, "emptyView", (elt, dom) => {
    //     elt.styleName = 'rr-empty-view';
    // });
    return new EmptyView(doc);}_layoutPageBorders(rReport,rPage){}// ReportEditor._doLayout()에서 호출. printing 시에는 호출되지 않는다.
    $_layout(ctx,bounds){let r=bounds.clone();const paper=this._model&&this._model.paper;if(!paper){return Size.create(r.x,r.y);}const pageView=this._activePage;const emptyView=this._emptyView;ctx.reportView=this;pageView.visible=!!this._model;this._emptyView.visible=!pageView.visible;try{if(this._activePage.visible){this._nameMap={};this._model.prepareLayout();r=paper.getContentRect(r.move(0,0));const sz=pageView.measure(ctx,r.clone());pageView.layout(ctx,r.clone());pageView.setRect(r);this._layoutPageBorders(bounds,r);const sz2=Size.create(bounds.width,bounds.height);if(sz.height>r.height)sz2.height+=sz.height-r.height;if(sz.width>r.width)sz2.width+=sz.width-r.width;return sz2;}else {emptyView.setRect(r);if(emptyView["layoutContent"]){emptyView["layoutContent"](this);}return Size.create(r.x,r.y);}}finally{this._modelDirty=false;this._afterLayout(ctx);}}_afterLayout(ctx){}$_afterRender(ctx){const pageView=this._activePage;if(ctx&&ctx.reportView&&pageView.visible){pageView.layoutFloating(ctx);pageView.afterRender(ctx);}}$_createElement(item){return ReportView.ViewCreators[item.constructor['$_ctor']](this.doc,item);}/**
         * PrintContainer.$_print(...)에서 호출한다.
         */$_preparePrint(ctx){const paper=this._model&&this._model.paper;this._nameMap={};this._model.preparePrint(ctx);this._model.prepareLayout();const r=paper.getClientRect();this._activePage.setRect(r);this.setPrintStyles();this._images={};}/**
         * PrintContainer.$_print(...)에서 호출한다.
         */$_endPrint(ctx){Utils.detach(this._boxMeasurer);}_modelChanged(){this._modelDirty=true;}//-------------------------------------------------------------------------
    // Report event handlers
    //-------------------------------------------------------------------------
    onReportReset(report){this._modelChanged();this.invalidateLayout();}onReportPaperChanged(report){this._modelChanged();this.invalidateLayout();}onReportItemAdded(report,item,index,silent){this._modelChanged();this.invalidateLayout();}onReportItemRemoved(report,item,oldParent){this._modelChanged();this.invalidateLayout();}onReportItemsRemoved(report,items){this._modelChanged();this.invalidateLayout();}onReportItemChanged(report,item,prop,value,oldValue){this._modelChanged();this.invalidateLayout();}onReportCommandStackChanged(report,cmd){}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ReportView.PAGE_HEAD='rr-page-head';ReportView.BACK_HEAD='rr-back-head';ReportView.FRONT_HEAD='rr-front-head';//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ReportView.ViewCreators={TextItem:(doc,model)=>new TextItemElement(doc,model),SummaryItem:(doc,model)=>new SummaryItemElement(doc,model),ImageItem:(doc,model)=>new ImageItemElement(doc,model),CheckItem:(doc,model)=>new CheckItemElement(doc,model),SimpleBand:(doc,model)=>new SimpleBandElement(doc,model),SimpleBandRowGroupHeader:(doc,model)=>new SimpleBandGroupHeaderElement(doc,model),SimpleBandRowGroupFooter:(doc,model)=>new SimpleBandGroupFooterElement(doc,model),TableBand:(doc,model)=>new TableBandElement(doc,model),TableBandRowGroupHeader:(doc,model)=>new TableBandGroupHeaderElement(doc,model),TableBandRowGroupFooter:(doc,model)=>new TableBandGroupFooterElement(doc,model),BandGroup:(doc,model)=>new BandGroupElement(doc,model),BandCell:(doc,model)=>new BandGroupCellElement(doc,model),CrosstabBand:(doc,model)=>new CrosstabBandElement(doc,model),RowBoxContainer:(doc,model)=>new RowBoxContainerElement(doc,model),ColumnBoxContainer:(doc,model)=>new ColumnBoxContainerElement(doc,model),DiagonalBoxContainer:(doc,model)=>new DiagonalBoxContainerElement(doc,model),ListContainer:(doc,model)=>new ListContainerElement(doc,model),TableContainer:(doc,model)=>new TableContainerElement(doc,model),DataListContainer:(doc,model)=>new DataListContainerElement(doc,model),SpaceItem:(doc,model)=>new SpaceItemElement(doc,model),FloatingContainer:(doc,model)=>new FloatingContainerElement(doc,model),StackContainer:(doc,model)=>new StackContainerElementImpl(doc,model),ShapeItem:(doc,model)=>new ShapeItemElement(doc,model),BarItem:(doc,model)=>new BarItemElement(doc,model),RatingItem:(doc,model)=>new RatingItemElement(doc,model),BarcodeItem:(doc,model)=>new BarcodeItemElement(doc,model),QrcodeItem:(doc,model)=>new QrcodeItemElement(doc,model),DataMatrixItem:(doc,model)=>new DataMatrixItemElement(doc,model),SvgItem:(doc,model)=>new SvgItemElement(doc,model),HtmlItem:(doc,model)=>new HtmlItemElement(doc,model),HichartItem:(doc,model)=>new HichartItemElement(doc,model),PageItem:(doc,model)=>new PageItemElement(doc,model)};////////////////////////////////////////////////////////////////////////////////
    class ErrorView$1 extends VisualElement{_initDom(doc,dom){super._initDom(doc,dom);dom.className='rr-print-error';Utils.extend(dom.style,{display:'flex',alignItems:'center',top:'0px',width:'90%',height:'90%',background:'rgb(238, 238, 238, 0.95)',border:'2px dashed red',paddingTop:'8px',paddingLeft:'12px',zIndex:10});dom.appendChild(this._title=doc.createElement('div'));Utils.extend(this._title.style,{//flex: "1 1 0",
    color:'#333',fontWeight:'bold',fontSize:'1.3em',marginBottom:'8px',textDecoration:'underline'});this._title.innerHTML='Print Error';dom.appendChild(this._span=doc.createElement('div'));Utils.extend(this._span.style,{//flex: "1 1 0",
    color:'#333'});this.visible=false;}setError(error){this._span.innerHTML=error;}}/**
     */class PrintContainer extends VisualContainer{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(containerId){super(containerId);//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._pageGap=20;this._zoom=1;this._align=Align.CENTER;this._styles={};this.traceMode=false;this._preview=false;this._errorView=new ErrorView$1(this.doc);this['_containerDiv'].appendChild(this._errorView.dom);}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** pageCount */get pageCount(){return this._pages.length;}/** page */get page(){const pages=this._pages;const sy=this.scrollTop;for(let i=0;i<pages.length;i++){const y1=pages[i].page.offsetTop;const y2=y1+pages[i].page.offsetHeight;if(y1>=sy&&y1<sy+this.scrollHeight||y2>=sy&&y2<sy+this.scrollHeight){return i;}}return pages.length;}set page(value){value=Math.max(0,Math.min(this._pages.length-1,value));//if (value !== this.page) {
    const div=this._pages[value].page;div.scrollIntoView({behavior:'smooth'});//}
    }/** zoom */get zoom(){return this._zoom;}set zoom(value){var _a;value=Math.max(0.1,Utils.toNumber(value));if(value!==this._zoom){this._zoom=value;this.$_resetPreviewer();(_a=this.onZoomed)===null||_a===void 0?void 0:_a.call(this,this._zoom);}}get pages(){var _a;return (_a=this._pages)===null||_a===void 0?void 0:_a.slice(0);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    // print(report: Report | (Report | IPrintReport)[], data: IReportDataProvider, preview: boolean, id: string, async = false, callback?: PrintPageCallback, endCallback?: PrintEndCallback): void {
    //     if (Utils.isArray(report)) {
    //         this.printAll(report, data, preview, id, async, callback, endCallback);
    //     } else {
    //         this.printSingle(report, data, preview, id, async, callback, endCallback);
    //     }
    // }
    // print(report: IPrintOptions | Report | (Report | IPrintReport)[], data: IReportDataProvider, preview: boolean, id: string, async = false, callback?: PrintPageCallback, endCallback?: PrintEndCallback): void {
    print(options){// this.$_printSingle = this.$_printSingle2;
    // if (report instanceof Report || Array.isArray(report)) {
    //     const options = this._options = {
    //         report: report,
    //         data: data,
    //         preview: preview,
    //         id: id || '',
    //         async: async,
    //         pageMark: true,
    //         noScroll: false,
    //         callback: callback,
    //         endCallback: endCallback
    //     };
    //     if (Utils.isArray(report)) {
    //         this.printAll(options);
    //     } else {
    //         this.printSingle(options);
    //     }
    // } else 
    if(Utils.isObject(options)){options=this._options=Object.assign({},{id:'',async:false,pageMark:true,noScroll:false},options);if(Utils.isArray(options.report)){this.printAll(options);}else if(options.report instanceof Report){this.printSingle(options);}}}printSingle(options){if(!options||!(options.report instanceof Report)){return;}const report=options.report;const data=options.data;const async=options.async;const preview=options.preview;const id=options.id;const callback=options.callback;const endCallback=options.endCallback;try{this._previewId=options.id;if(this._preview=options.preview){this._indicator=this.$_createIndicator(this.doc);this['_containerDiv'].appendChild(this._indicator);}this._reportView&&this.removeElement(this._reportView);this.addElement(this._reportView=new ReportView(this.doc,false,true));const ctx=this._context=new PrintContext(true);const view=this._reportView;const r=options.report.info.paper.getClientRect();report['_data']=data;view.model=report;ctx.dp=data;ctx.designDp=report.designData;ctx.assets=report.assets;ctx.reportView=view;ctx.pageWidth=r.width;ctx.pageHeight=r.height;ctx.preparePrint();}catch(err){const v=this.$_getPreviewer(id);if(v)v.style.display='none';Utils.remove(this._indicator);this.$_showError(null,err);return;}if(preview){if(this._isTesting){this.$_printSingle2(this.doc,this._context,true,id,async,callback,endCallback);}else {setTimeout(()=>{this.$_printSingle2(this.doc,this._context,true,id,async,callback,endCallback);},0);}}else {this.$_printSingle2(this.doc,this._context,false,id,async,callback,endCallback);}}// private $_printSingle(doc: Document, ctx: PrintContext, bPreview: boolean, id: string, async: boolean, callback?: PrintPageCallback, endCallback?: PrintEndCallback): void {
    //     if (async) {
    //         this.$_printAsync(this.doc, this._context, bPreview, id, true, callback, endCallback);
    //     } else {
    //         this.$_print(this.doc, this._context, bPreview, id);
    //         Utils.remove(this._indicator);
    //     }
    // }
    $_printSingle2(doc,ctx,bPreview,id,async,callback,endCallback){if(async){this.$_printAsync(this.doc,this._context,bPreview,id,true,callback,endCallback);}else {this.$_printAsync(this.doc,this._context,bPreview,id,false);}}printAll(options){if(!options||!Array.isArray(options.report)||options.report.length===0){return;}const reports=options.report;const data=options.data;const id=options.id;const preview=options.preview;const async=options.async;const callback=options.callback;const endCallback=options.endCallback;const nReport=reports.length;for(let i=0;i<nReport;i++){if(reports[i]instanceof Report){reports[i]={report:reports[i],data:data};}else {reports[i]['_data']=reports[i].data||data;}}if(nReport===1){const report=reports[0];this.printSingle({report:report.report,data:report.data,preview:preview,id:id,async:async});this.printSingle(options);return;}try{this._previewId=id;if(this._preview=preview){this._indicator=this.$_createIndicator(this.doc);this['_containerDiv'].appendChild(this._indicator);}if(this._reportViews){this._reportViews.forEach(v=>this.removeElement(v));}this._reportViews=[];this._contexts=[];for(let i=0;i<nReport;i++){const ctx=new PrintContext(true,true);const v=new ReportView(this.doc,false,true);this._contexts.push(ctx);this.addElement(v);this._reportViews.push(v);ctx.reportView=v;}reports.forEach((report,i)=>{const rpt=report.report;const data=report.data;const ctx=this._contexts[i];const view=this._reportViews[i];const r=rpt.info.paper.getClientRect();rpt['_data']=data;view.model=rpt;ctx.dp=data;ctx.designDp=rpt.designData;ctx.assets=rpt.assets;ctx.reportView=view;ctx.pageWidth=r.width;ctx.pageHeight=r.height;ctx.preparePrint();});}catch(err){const v=this.$_getPreviewer(id);if(v)v.style.display='none';Utils.remove(this._indicator);this.$_showError(null,err);return;}if(preview){if(this._isTesting){this.$_printAll2(this.doc,this._contexts,true,id,async,callback,endCallback);}else {setTimeout(()=>{this.$_printAll2(this.doc,this._contexts,true,id,async,callback,endCallback);},0);}}else {this.$_printAll2(this.doc,this._contexts,false,id,async,callback,endCallback);}}// private $_printAll(doc: Document, ctxes: PrintContext[], bPreview: boolean, id: string, async: boolean, callback?: PrintPageCallback, endCallback?: PrintEndCallback): void {
    //     if (async) {
    //         this.$_print2Async(doc, ctxes, bPreview, id, true, callback, endCallback);
    //     } else {
    //         this.$_print2(doc, ctxes, bPreview, id);
    //     }
    // }
    $_printAll2(doc,ctxes,bPreview,id,async,callback,endCallback){if(async){this.$_print2Async(doc,ctxes,bPreview,id,true,callback,endCallback);}else {this.$_print2Async(doc,ctxes,bPreview,id,false,callback,endCallback);}}// printAsync(report: Report | (Report | IPrintReport)[], data: IReportDataProvider, preview: boolean, id: string = '', callback?: PrintPageCallback, endCallback?: PrintEndCallback): void {
    //     if (Utils.isArray(report)) {
    //         this.printAll(report, data, preview, id, true, callback, endCallback);
    //     } else {
    //         this.printSingle(report, data, preview, id, true, callback, endCallback);
    //     }
    // }
    isAllRendered(){return !!this.$_getContainer().getElementsByClassName(PrintContainer.CONFIRM_CLASS);}getPrintHtml(){const view=this.$_getPreviewer(this._previewId);const left=view?parseFloat(view.style.left):0;const zoom=this.zoom;try{this.zoom=1.0;view&&(view.style.left='0px');return this.$_getContainer().innerHTML;}finally{this.zoom=zoom;view&&(view.style.left=left+'px');}}setStyles(styles){this._styles=styles;this.$_resetPreviewer();}fitToWidth(){const w1=this.$_getContainer().offsetWidth;const w2=this.$_getPreviewer(this._previewId).offsetWidth;this.zoom=w1/w2;}fitToHeight(){const nPage=this._pages.length;const h1=this.$_getContainer().offsetHeight;const h2=(this.$_getPreviewer(this._previewId).offsetHeight-this._pageGap*(nPage-1))/nPage;this.zoom=h1/h2;}fitToPage(){const nPage=this._pages.length;const w1=this.$_getContainer().offsetWidth;const w2=this.$_getPreviewer(this._previewId).offsetWidth;const h1=this.$_getContainer().offsetHeight;const h2=(this.$_getPreviewer(this._previewId).offsetHeight-this._pageGap*(nPage-1))/nPage;this.zoom=Math.min(w1/w2,h1/h2);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get printing(){return true;}_doPrepareContainer(dom){super._doPrepareContainer(dom);dom.dataset.print="1";dom.classList.add('rr-report-root');dom.classList.add(PrintContainer.CLASS_NAME);}_render(timestamp){// 기존 rendering은 하지 않는다.
    }_doResized(){if(this._preview){// #220 container dom이 이미 삭제된 상태일 수 있다.
    // NOTE: container dom을 삭제하기 전 container.dispose()를 호출,
    //       이벤트 연결을 끊어서 해결해야 한다! leak이 발생한다.
    const dom=this.$_getPreviewer(this._previewId);if(dom&&dom.parentElement){this.$_resetPreviewer();}}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_showError(dom,error){this._errorView.visible=true;this._errorView.setError('<span class="rr-print-error-title">'+(error.message||error)+'</span>'+'<br/><br/>'+Utils.getErrorStack(error));Utils.detach(dom);if(this.traceMode)throw error;}$_createIndicator(doc){const r=this['_containerDiv'].getBoundingClientRect();const indicator=this.doc.createElement('div');indicator.className='rr-print-indicator';Utils.extend(indicator.style,{position:'absolute',width:r.width+'px',height:r.height+'px',top:'0px',zIndex:1000,pointerEvents:'none'});return indicator;}// private $_print(doc: Document, ctx: PrintContext, bPreview: boolean, id: string): void {
    //     const t = +new Date();
    //     const dom = doc.getElementById(PrintContainer.PREVIEW_CLASS + id);
    //     if (dom) {
    //         Utils.detach(dom);
    //         this['_containerDiv'].appendChild(this['_containerDom']);        
    //     }
    //     this._errorView.visible = false;
    //     const reportView = ctx.reportView;
    //     const pageView = reportView.pageView;
    //     let pages: PrintPage[];
    //     ctx.designDp && ctx.designDp.preparePrint(ctx);
    //     ctx.dp && ctx.dp.preparePrint(ctx);
    //     reportView['$_preparePrint'](ctx);
    //     try {
    //         const pagebodyOutput = pageView.preparePrint(doc, ctx);
    //         pages = pageView.print(ctx, pagebodyOutput);
    //     } catch (error) {
    //         console.error(error);
    //         this.$_showError(dom, error);
    //         return;
    //     } finally {
    //         reportView['$_endPrint'](ctx);
    //     }
    //     Utils.detach(this['_containerDom']);
    //     const cdom = doc.createElement('div');
    //     if (bPreview) {
    //         cdom.id = PrintContainer.PREVIEW_CLASS + id;
    //     }
    //     cdom.className = 'rr-report-root' + (bPreview ? ' ' + PrintContainer.PREVIEW_CLASS : '');
    //     cdom.style.setProperty('position', 'absolute', "important");
    //     cdom.style.setProperty('transform-origin', 'top left', 'important');
    //     this['_containerDiv'].appendChild(cdom);
    //     ctx.container = cdom;
    //     this.$_buildOutput(doc, bPreview, reportView.model, 0, pages, cdom);
    //     this.$_markRendered(doc, cdom);
    //     this._pages = pages;
    //     this.$_resetPreviewer();
    //     console.log('Printed in ' + (+new Date() - t) + 'ms.');
    // }
    $_refreshContextValues(ctx){// page count 적용.
    let nPage=ctx.pages.length;ctx.pages.forEach((page,i)=>{let spans=page.pageFooter.querySelectorAll('[data-rr_ctx_val="${pages}"]');spans.forEach(span=>span.textContent="".concat(nPage));spans=page.pageHeader.querySelectorAll('[data-rr_ctx_val="${pages}"]');spans.forEach(span=>span.textContent="".concat(nPage));// callback
    spans=page.pageFooter.querySelectorAll("[data-rr_ctx_call]");spans.forEach(span=>{const view=ctx.contextElements[span.dataset['rr_ctx_view']];ctx['_page']=+span.dataset['rr_ctx_call'];view['_span']=span;view.refreshPrintValues(ctx);});});if(ctx.reportCount>1&&ctx.reportIndex===ctx.reportCount-1){let ctx2=ctx.firstReport;nPage+=ctx.prevPages;while(ctx2){ctx2.pages.forEach((page,i)=>{let spans=page.pageFooter.querySelectorAll('[data-rr_ctx_val="${all-pages}"]');spans.forEach(span=>span.textContent="".concat(nPage));spans=page.pageHeader.querySelectorAll('[data-rr_ctx_val="${all-pages}"]');spans.forEach(span=>span.textContent="".concat(nPage));// callback
    spans=page.pageFooter.querySelectorAll("[data-rr_ctx_all_call]");spans.forEach(span=>{const view=ctx.contextElements[span.dataset['rr_ctx_view']];if(view){ctx['_compositePage']=+span.dataset['rr_ctx_all_call'];view['_span']=span;view.refreshPrintValues(ctx);}});});ctx2=ctx2.nextReport;}}}$_printAsync(doc,ctx,bPreview,id,async,callback,endCallback){function startPrint(self){let back;let marker;if(ctx.reportIndex===0){self['_containerDom'].style.opacity='0';// back container
    // 진행 중인 페이지로 스크롤 시키고, indicator 등은 유지하기 위해 layer를 추가한다.
    back=doc.createElement('div');back.className='rr-print-back';back.style.position='absolute';// back.style.setProperty('transform-origin', 'top left', 'important');
    back.style.overflow='scroll';back.style.top='0';back.style.width='100%';back.style.height='100%';self['_containerDiv'].appendChild(back);// report root
    const cdom=doc.createElement('div');if(bPreview){cdom.id=PrintContainer.PREVIEW_CLASS+id;}cdom.className='rr-report-root'+(bPreview?' '+PrintContainer.PREVIEW_CLASS:'');cdom.style.setProperty('position','absolute',"important");cdom.style.setProperty('transform-origin','top left','important');// self['_containerDiv'].appendChild(cdom);
    back.appendChild(cdom);ctx.container=cdom;// markger
    if(options.pageMark){marker=doc.createElement('span');marker.className='rr-report-page-marker';Object.assign(marker.style,{position:'absolute',fontFamily:'Arial Bold',fontSize:'100px',color:'#0000ff80',top:'calc(50% - .5em)',width:'100%',textAlign:'center'});self['_containerDiv'].appendChild(marker);}}else {back=self['_containerDiv'].getElementsByClassName('rr-print-back')[0];ctx.container=back.getElementsByClassName('rr-report-root')[0];if(options.pageMark){marker=self['_containerDiv'].getElementsByClassName('rr-report-page-marker')[0];}}return marker;}function layoutFloatings(self,pages){const floatings=ctx.floatings;if(floatings.length>0){const floatingDivs=[];for(let div of floatings){const anc=div[T_ANCHOR];for(let page of pages){const p=page.page;if(p.contains(anc)){floatingDivs.push(p);page.contents.push(div);// for exporting
    break;}}}self.$_layoutFloatings(floatingDivs,floatings);}}function endPrint(self){if(ctx.reportIndex===ctx.reportCount-1){ctx.setCompositePageCount(ctx.prevPages+ctx.pages.length);if(ctx.async){// clear page marker
    if(options.pageMark){const marker=self['_containerDiv'].getElementsByClassName('rr-report-page-marker')[0];if(marker){marker.textContent=marker.textContent+'(s) printed.';marker.animate([{opacity:'1'},{opacity:'0'}],{duration:2000});setTimeout(()=>self['_containerDiv'].removeChild(marker),2000);}}}reportView['$_endPrint'](ctx);Utils.remove(self._indicator);Utils.detach(self['_containerDom']);console.log('Printed in '+(+new Date()-t)+'ms.');}else {bPreview&&self.$_addPageSpace(doc,ctx.container);ctx.nextReport.prevPages=ctx.prevPages+ctx.pages.length;self.$_printAsync(doc,ctx.nextReport,bPreview,id,async,callback,endCallback);}}const options=this._options;const dom=doc.getElementById(PrintContainer.PREVIEW_CLASS+id);let t;if(ctx.reportIndex===0){t=+new Date();if(dom){Utils.detach(dom);this['_containerDiv'].appendChild(this['_containerDom']);}this._errorView.visible=false;}const reportView=ctx.reportView;const pageView=reportView.pageView;ctx.async=async;ctx.preview=bPreview;ctx.designDp&&ctx.designDp.preparePrint(ctx);ctx.dp&&ctx.dp.preparePrint(ctx);ctx.floatings=[];ctx.contextElements={};reportView['$_preparePrint'](ctx);const lines=pageView.prepareAsync(doc,ctx);// Utils.detach(this['_containerDom']);
    try{const marker=startPrint(this);const pages=[];if(ctx.async){this.$_buildOutputAsync(doc,bPreview,ctx,pages,lines,0,0,(ctx,page,pageNo)=>{if(marker){marker.textContent=ctx.prevPages+pageNo+1+'Page';}if(pageNo===0){// page 수평 위치를 조정한다.
    this.$_resetPreviewer();}// console.log('PRINT ASYNC: ', pageNo + 1);
    callback&&callback(ctx,page,pageNo);},(ctx,pages)=>{layoutFloatings(this,pages);endPrint(this);this._pages=pages;endCallback&&endCallback(ctx,pages);// console.log('PRINT ASYNC ENDED: ', pages.length, 'PAGES.');
    });}else {let nPage=0;let p=0;if(lines.length>0){while(p<lines.length){p=this.$_buildOutputAsync(doc,bPreview,ctx,pages,lines,p,nPage,null,null);if(nPage++===0){this.$_resetPreviewer();}}}// 빈 페이지를 하나 출력한다.
    else {this.$_buildOutputAsync(doc,bPreview,ctx,pages,lines,0,0,null,null);this.$_resetPreviewer();}this.$_refreshContextValues(ctx);layoutFloatings(this,pages);endPrint(this);this._pages=pages;// console.log('PRINT ASYNC ENDED: ', pages.length, 'PAGES.');
    }}catch(error){Utils.remove(this._indicator);this.$_showError(dom,error);console.error(error);return;}}// private $_print2(doc: Document, ctxes: PrintContext[], bPreview: boolean, id: string): void {
    //     const t = +new Date();
    //     let printedPageCount = 0;
    //     const dom = doc.getElementById(PrintContainer.PREVIEW_CLASS + id);
    //     if (dom) {
    //         Utils.detach(dom);
    //         this['_containerDiv'].appendChild(this['_containerDom']);        
    //     }
    //     this._errorView.visible = false;
    //     const pagebodyOutputs: PageBodyOutput[] = [];
    //     for (let i = 0; i < ctxes.length; i++) {
    //         const ctx = ctxes[i];
    //         const reportView = ctx.reportView;
    //         const pageView = reportView.pageView;
    //         ctx.designDp && ctx.designDp.preparePrint(ctx);
    //         ctx.dp && ctx.dp.preparePrint(ctx);
    //         reportView['$_preparePrint'](ctx);
    //         const pagebodyOutput = pageView.preparePrint(doc, ctx);
    //         pagebodyOutputs.push(pagebodyOutput);
    //         // preparePrint를 실행해야 pageCount가 구해짐
    //         printedPageCount += ctx.pageCount;
    //     }
    //     const pageList: PrintPage[][] = [];
    //     let currentPrintedPageCount: number;
    //     for (let i = 0; i < ctxes.length; i++) {
    //         const ctx = ctxes[i];
    //         ctx.setCompositePageCount(printedPageCount);
    //         currentPrintedPageCount = i ? currentPrintedPageCount + ctxes[i - 1].pageCount : 0;
    //         const reportView = ctx.reportView;
    //         const pageView = reportView.pageView;
    //         try {
    //             const pages = i ? pageView.print(ctx, pagebodyOutputs[i], currentPrintedPageCount) : pageView.print(ctx, pagebodyOutputs[i]);
    //             pageList.push(pages);
    //         } catch (error) {
    //             console.error(error);
    //             this.$_showError(dom, error);
    //             return;
    //         } finally {
    //             reportView['$_endPrint'](ctx);
    //         }
    //     }
    //     Utils.detach(this['_containerDom']);
    //     const cdom = doc.createElement('div');
    //     if (bPreview) {
    //         cdom.id = PrintContainer.PREVIEW_CLASS + id;
    //     }
    //     cdom.className = 'rr-report-root' + (bPreview ? ' ' + PrintContainer.PREVIEW_CLASS : '');
    //     cdom.style.setProperty('position', 'absolute', "important");
    //     cdom.style.setProperty('transform-origin', 'top left', 'important');
    //     this['_containerDiv'].appendChild(cdom);
    //     let n = 0;
    //     ctxes.forEach((ctx, i) => {
    //         const pages = pageList[i];
    //         ctx.container = cdom;
    //         this.$_buildOutput(doc, bPreview, ctx.report, n, pages, cdom);
    //         n += pages.length;
    //     });
    //     this.$_markRendered(doc, cdom);
    //     this._pages = pageList.reduce((list, pages) => list = list.concat(pages), []);
    //     this.$_resetPreviewer();
    //     Utils.remove(this._indicator);
    //     console.log('Printed in ' + (+new Date() - t) + 'ms.');
    // }
    $_print2Async(doc,ctxes,bPreview,id,async,callback,endCallback){const n=ctxes.length;for(let i=0;i<n;i++){const ctx=ctxes[i];ctx.reportCount=n;ctx.reportIndex=i;ctx.firstReport=ctxes[0];ctx.nextReport=ctxes[i+1];}this.$_printAsync(doc,ctxes[0],bPreview,id,async);}$_getContainer(){return this['_containerDiv'];}$_getPreviewer(id){return this.doc.getElementById(PrintContainer.PREVIEW_CLASS+(id||this._previewId));}$_resetPreviewer(){if(this._preview){const dom=this.$_getPreviewer(this._previewId);const r=this.$_getContainer().getBoundingClientRect();const zoom=this._zoom;Utils.extend(dom.style,this._styles);dom.style.transform=zoom==1?'':'scale('+zoom+')';const w=dom.getBoundingClientRect().width||r.width;// TODO: 디자이너에서 0으로 리턴되는 경우가 있다.
    let x=0;switch(this._align){case Align.LEFT:break;case Align.RIGHT:x=r.width-w;break;case Align.CENTER:default:x=Math.round((r.width-w)/2);}dom.style.left=Math.max(0,x)+'px';}}$_addPageSpace(doc,parent){const space=doc.createElement('div');space.className='rr-print-space';space.style.height=this._pageGap+'px';parent.appendChild(space);}// private $_buildOutput(doc: Document, bPreview: boolean, report: Report, startPage: number, pages: PrintPage[], cdom: HTMLDivElement): void {
    //     const header = report.page.pageHeader;
    //     const footer = report.page.pageFooter;
    //     const reportFooter = report.page.reportFooter;
    //     const paper = report.info.paper;
    //     const hPage = paper.getClientRect().height;
    //     const floatings: HTMLDivElement[] = [];
    //     const pageDivs: HTMLDivElement[] = [];
    //     for (let i = 0, cnt = pages.length; i < cnt; i++) {
    //         const p = i; // startPage + i;
    //         const page = pages[i];
    //         const contents = page.contents;
    //         const div2 = doc.createElement('div');
    //         const div3 = doc.createElement('div');
    //         div2.className = 'rr-print-div2';
    //         div3.className = 'rr-print-div3';
    //         if (bPreview) {
    //             div2.className = 'rr-print-page rr-page-break' +  ' page' + p;
    //             div2.dataset.page = p + '';
    //             // TODO: 여기서 print를 처리하는 경우라면 아래 코드 검토 필요.
    //             paper.applyPreviewExtents(div2.style);
    //             // reportpage 스타일이 div3로 복사된다.
    //             paper.applyPreviewClient(div3.style);
    //         } else {
    //             // TODO: 현재 여길 타지 않고 preview.innerHTML으로 복사된다.
    //             debugger;
    //         }
    //         div3.style.position = 'absolute';
    //         div2.appendChild(div3);
    //         pageDivs.push(div3);
    //         page.page = div2;
    //         // page background items
    //         let div = page.background;
    //         if (div) {
    //             div3.appendChild(div);
    //         }
    //         // page header
    //         div = page.pageHeader;
    //         let y = 0 + Utils.toNumber(header.spaceTop);
    //         div.style.top = y + 'px';
    //         div3.appendChild(div);
    //         y += div[T_HEIGHT];
    //         // page footer
    //         div = page.pageFooter;
    //         const yFoot = hPage - div[T_HEIGHT] - Utils.toNumber(footer.spaceBottom);
    //         div.style.top = yFoot + 'px';
    //         div3.appendChild(div);
    //         // body contents
    //         const floatingIndices: number[] = [];
    //         for (let j = 0, len = contents.length; j < len; j++) {
    //             div = contents[j];
    //             if (div[T_ANCHOR]) {
    //                 floatings.push(div);
    //                 floatingIndices.push(j);
    //             } else {
    //                 const h = div[T_HEIGHT];
    //                 // report footer를 바닥에 표시한다.
    //                 if (i === cnt - 1 && j === len - 1 && h > 0 && reportFooter.alignToBottom && ReportFooterElement.isFooter(div)) {
    //                     y = yFoot - h;
    //                 }
    //                 div.style.top = y + 'px';
    //                 y += isNaN(h) ? div.offsetHeight : h;
    //                 div3.appendChild(div);
    //             }
    //         }
    //         // pdf, hwp 등에서 위치에 맞는 페이지에 출력할 수 있도록 재배치한다.
    //         for (let j = floatingIndices.length - 1; j >= 0; j--) {
    //             contents.splice(floatingIndices[j], 1);
    //         }
    //         cdom.appendChild(div2);
    //         div = page.foreground;
    //         if (div) {
    //             div3.appendChild(div);
    //         }
    //         if (bPreview) {
    //             // TODO: 현재 print일 때도 여길 탄다. media css로 처리한다.
    //             this.$_addPageSpace(doc, cdom);
    //         }
    //     }
    //     if (floatings.length > 0) {
    //         const floatingDivs: HTMLDivElement[] = [];
    //         for (let div of floatings) {
    //             const anc = div[T_ANCHOR];
    //             for (let i = 0; i < pageDivs.length; i++) {
    //                 const pageDiv = pageDivs[i];                    
    //                 if (pageDiv.contains(anc)) {
    //                     floatingDivs.push(pageDiv);
    //                     // pdf, hwp 등에서 위치에 맞는 페이지에 출력할 수 있도록 재배치한다.
    //                     pages[i].contents.push(div);
    //                     break;
    //                 }
    //             }
    //         }
    //         this.$_layoutFloatings(floatingDivs, floatings);
    //     }
    // }
    $_buildOutputAsync(doc,bPreview,ctx,output,lines,from,pageNo,callback,endCallback){const pv=ctx.reportView.pageView;const report=ctx.report;const header=report.page.pageHeader;const footer=report.page.pageFooter;const reportFooter=report.page.reportFooter;const paper=report.info.paper;const hPage=paper.getClientRect().height;const page=new PrintPage();const contents=page.contents;const div2=doc.createElement('div');const div3=doc.createElement('div');const floatings=ctx.floatings;const gap=ctx.reportView.pageView.bodyView.itemsView.gap;const start=from;let div;ctx.preparePage(pageNo,ctx.prevPages+pageNo);for(let v of ctx.contextValues){v.refreshPrintValues(ctx);}page.page=div2;div2.className='rr-print-div2';div3.className='rr-print-div3';if(ctx.preview){div2.className='rr-print-page rr-page-break'+' page'+pageNo;div2.dataset.page=pageNo+'';// TODO: 여기서 print를 처리하는 경우라면 아래 코드 검토 필요.
    paper.applyPreviewExtents(div2.style);// reportpage 스타일이 div3로 복사된다.
    paper.applyPreviewClient(div3.style);}else {// TODO: 현재 여길 타지 않고 preview.innerHTML으로 복사된다.
    debugger;}div3.style.position='absolute';div2.appendChild(div3);ctx.container.appendChild(div2);// background items
    page.background=div=pv.backFloatingView.cloneNode();div3.appendChild(div);// page header
    // this._pageHeaderView.refreshPage(ctx);
    let y=0+Utils.toNumber(header.spaceTop);div=pv.pageHeaderView.cloneNode();div.style.top=y+'px';y+=div[T_HEIGHT]=pv.pageHeaderView[T_HEIGHT];page.pageHeader=div;div3.appendChild(div);// page footer
    // this._pageFooterView.refreshPage(ctx);
    div=pv.pageFooterView.cloneNode();div[T_HEIGHT]=pv.pageFooterView[T_HEIGHT];page.pageFooter=div;const yFoot=hPage-div[T_HEIGHT]-Utils.toNumber(footer.spaceBottom);div.style.top=yFoot+'px';div3.appendChild(div);// ctx.y = from + ctx.bodyTop;
    ctx.h=ctx.bodyHeight;// report header
    if(pageNo==0){div=pv.reportHeaderView.cloneNode();div[T_HEIGHT]=pv.reportHeaderView[T_HEIGHT];div.style.top=y+'px';// ctx.y + 'px';
    contents.push(div);// ctx.container.appendChild(div);
    div3.appendChild(div);ctx.h-=div[T_HEIGHT];//ctx.reportHeaderHeight;
    // ctx.y += ctx.reportHeaderHeight;       
    y+=div[T_HEIGHT];}// body
    while(from<lines.length&&ctx.h>0){const line=lines[from];if(line instanceof PageBreaker){from++;break;}else if(line instanceof HTMLDivElement){if(line[T_ANCHOR]){floatings.push(line);}else {let h=line[T_HEIGHT];// NOTE: space나 %높이 아이템은 페이지를 넘기지 못한다.  
    if(h>ctx.h&&line.classList.contains('rr-space')){h=ctx.h;}// NOTE: 아이템 하나가 넘치면 그냥 출력한다. #592
    if(ctx.h-h<0&&from>start){break;}contents.push(line);line.style.top=y+'px';// ctx.y + 'px';
    div3.appendChild(line);//ctx.y += h + gap;
    y+=h+gap;ctx.h-=h+gap;}from++;}else if(line instanceof BandPrintInfo){const div=line.getNextPage(doc,ctx,ctx.pageWidth,div3);if(div){contents.push(div);div.style.top=y+'px';// ctx.y + 'px';
    const h=div[T_HEIGHT];// ctx.y += h;
    y+=h;ctx.h-=h;if(ctx.h<=0){if(line.isEnded()){from++;}break;}// ctx.y += gap;
    y+=gap;ctx.h-=gap;}if(line.isEnded()){from++;}}else {from++;}}// report footer
    // TODO: 넘치면 다음 페이지로 넘겨야 한다!
    if(from==lines.length&&pv.reportFooterView.visible){div=pv.reportFooterView.cloneNode();const h=div[T_HEIGHT]=pv.reportFooterView[T_HEIGHT];if(h>0){let y2;if(reportFooter.alignToBottom){y2=yFoot-h;}else {y2=y;//ctx.y;
    }div.style.top=y2+'px';ctx.h-=h;// ctx.y += h;
    // y += h;
    div3.appendChild(div);}}// foreground items
    page.foreground=div=pv.frontFloatingView.cloneNode();div3.appendChild(div);// end
    callback&&callback(ctx,page,pageNo);output.push(page);ctx.pages.push(page);if(ctx.async&&!this._options.noScroll){ctx.container.parentElement.scrollTo({top:div2.offsetTop// behavior: 'smooth'
    });}// floatings
    if(floatings.length>0){const floatingDivs=[];const fs=[];for(let div of floatings){const anc=div[T_ANCHOR];if(div3.contains(anc)){floatingDivs.push(div3);contents.push(div);// for exporting
    fs.push(div);break;}}this.$_layoutFloatings(floatingDivs,fs);// floatings);
    }const nPage=pageNo+1;ctx.finishPrint(nPage);if(from<lines.length){if(bPreview){this.$_addPageSpace(doc,ctx.container);}if(ctx.async){setTimeout(()=>{try{this.$_buildOutputAsync(doc,bPreview,ctx,output,lines,from,pageNo+1,callback,endCallback);}catch(error){Utils.remove(this._indicator);this.$_showError(ctx.container.parentElement,error);console.error(error);}},100);}return from;}else if(ctx.async){this.$_refreshContextValues(ctx);endCallback&&endCallback(ctx,output);}return lines.length;}// private $_markRendered(doc: Document, cdom: HTMLDivElement): void {
    //     const rendered = doc.createElement('div');
    //     rendered.className = PrintContainer.CONFIRM_CLASS;
    //     Utils.extend(rendered.style, {
    //         position: 'abolute',
    //         top: (cdom.offsetHeight - 1) + 'px',
    //         left: '0px',
    //         width: '1px',
    //         height: '1px',
    //         background: '#ffffff01'
    //     })
    //     cdom.appendChild(rendered);
    // }
    $_layoutFloatings(pages,divs){divs.forEach((div,i)=>{const anchor=div[T_ANCHOR];const pos=div[T_ANCHOR_POS];let x=anchor.offsetLeft;let y=anchor.offsetTop;let p=anchor.offsetParent;const page=pages[i];while(p instanceof HTMLElement&&p!==page){x+=p.offsetLeft;y+=p.offsetTop;p=p.offsetParent;}page.appendChild(div);switch(pos){case AnchorPosition.INNER_LEFT:y-=(div.offsetHeight-anchor.offsetHeight)/2;break;case AnchorPosition.LEFT:x-=div.offsetWidth;y-=(div.offsetHeight-anchor.offsetHeight)/2;break;case AnchorPosition.INNER_RIGHT:x+=anchor.offsetWidth-div.offsetWidth;y-=(div.offsetHeight-anchor.offsetHeight)/2;break;case AnchorPosition.RIGHT:x+=anchor.offsetWidth;y-=(div.offsetHeight-anchor.offsetHeight)/2;break;case AnchorPosition.INNER_TOP:x-=(div.offsetWidth-anchor.offsetWidth)/2;break;case AnchorPosition.TOP:x-=(div.offsetWidth-anchor.offsetWidth)/2;y-=div.offsetHeight;break;case AnchorPosition.INNER_BOTTOM:x-=(div.offsetWidth-anchor.offsetWidth)/2;y+=anchor.offsetHeight-div.offsetHeight;break;case AnchorPosition.BOTTOM:x-=(div.offsetWidth-anchor.offsetWidth)/2;y+=anchor.offsetHeight;break;case AnchorPosition.CENTER:default:x-=(div.offsetWidth-anchor.offsetWidth)/2;y-=(div.offsetHeight-anchor.offsetHeight)/2;break;}div.style.left=x+'px';div.style.top=y+'px';});}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    PrintContainer.CLASS_NAME='rr-report-container';PrintContainer.PREVIEW_CLASS='rr-report-preview';PrintContainer.CONFIRM_CLASS='rr-rendered';/*!
     * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
     * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
     * Released under MIT License
     */ /*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */ /* global Reflect, Promise */var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p];};return extendStatics(d,b);};function __extends(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());}var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p];}return t;};return __assign.apply(this,arguments);};function __awaiter(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value);});}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});}function __generator(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this;}),g;function verb(n){return function(v){return step([n,v]);};}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return {value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break;}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break;}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break;}if(t[2])_.ops.pop();_.trys.pop();continue;}op=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t=0;}if(op[0]&5)throw op[1];return {value:op[0]?op[1]:void 0,done:true};}}function __spreadArray(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i];}}return to.concat(ar||from);}var Bounds=/** @class */function(){function Bounds(left,top,width,height){this.left=left;this.top=top;this.width=width;this.height=height;}Bounds.prototype.add=function(x,y,w,h){return new Bounds(this.left+x,this.top+y,this.width+w,this.height+h);};Bounds.fromClientRect=function(context,clientRect){return new Bounds(clientRect.left+context.windowBounds.left,clientRect.top+context.windowBounds.top,clientRect.width,clientRect.height);};Bounds.fromDOMRectList=function(context,domRectList){var domRect=Array.from(domRectList).find(function(rect){return rect.width!==0;});return domRect?new Bounds(domRect.left+context.windowBounds.left,domRect.top+context.windowBounds.top,domRect.width,domRect.height):Bounds.EMPTY;};Bounds.EMPTY=new Bounds(0,0,0,0);return Bounds;}();var parseBounds=function(context,node){return Bounds.fromClientRect(context,node.getBoundingClientRect());};var parseDocumentSize=function(document){var body=document.body;var documentElement=document.documentElement;if(!body||!documentElement){throw new Error("Unable to get document size");}var width=Math.max(Math.max(body.scrollWidth,documentElement.scrollWidth),Math.max(body.offsetWidth,documentElement.offsetWidth),Math.max(body.clientWidth,documentElement.clientWidth));var height=Math.max(Math.max(body.scrollHeight,documentElement.scrollHeight),Math.max(body.offsetHeight,documentElement.offsetHeight),Math.max(body.clientHeight,documentElement.clientHeight));return new Bounds(0,0,width,height);};/*
     * css-line-break 2.1.0 <https://github.com/niklasvh/css-line-break#readme>
     * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
     * Released under MIT License
     */var toCodePoints$1=function(str){var codePoints=[];var i=0;var length=str.length;while(i<length){var value=str.charCodeAt(i++);if(value>=0xd800&&value<=0xdbff&&i<length){var extra=str.charCodeAt(i++);if((extra&0xfc00)===0xdc00){codePoints.push(((value&0x3ff)<<10)+(extra&0x3ff)+0x10000);}else {codePoints.push(value);i--;}}else {codePoints.push(value);}}return codePoints;};var fromCodePoint$1=function(){var codePoints=[];for(var _i=0;_i<arguments.length;_i++){codePoints[_i]=arguments[_i];}if(String.fromCodePoint){return String.fromCodePoint.apply(String,codePoints);}var length=codePoints.length;if(!length){return '';}var codeUnits=[];var index=-1;var result='';while(++index<length){var codePoint=codePoints[index];if(codePoint<=0xffff){codeUnits.push(codePoint);}else {codePoint-=0x10000;codeUnits.push((codePoint>>10)+0xd800,codePoint%0x400+0xdc00);}if(index+1===length||codeUnits.length>0x4000){result+=String.fromCharCode.apply(String,codeUnits);codeUnits.length=0;}}return result;};var chars$2='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';// Use a lookup table to find the index.
    var lookup$2=typeof Uint8Array==='undefined'?[]:new Uint8Array(256);for(var i$2=0;i$2<chars$2.length;i$2++){lookup$2[chars$2.charCodeAt(i$2)]=i$2;}/*
     * utrie 1.0.2 <https://github.com/niklasvh/utrie>
     * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
     * Released under MIT License
     */var chars$1$1='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';// Use a lookup table to find the index.
    var lookup$1$1=typeof Uint8Array==='undefined'?[]:new Uint8Array(256);for(var i$1$1=0;i$1$1<chars$1$1.length;i$1$1++){lookup$1$1[chars$1$1.charCodeAt(i$1$1)]=i$1$1;}var decode$1=function(base64){var bufferLength=base64.length*0.75,len=base64.length,i,p=0,encoded1,encoded2,encoded3,encoded4;if(base64[base64.length-1]==='='){bufferLength--;if(base64[base64.length-2]==='='){bufferLength--;}}var buffer=typeof ArrayBuffer!=='undefined'&&typeof Uint8Array!=='undefined'&&typeof Uint8Array.prototype.slice!=='undefined'?new ArrayBuffer(bufferLength):new Array(bufferLength);var bytes=Array.isArray(buffer)?buffer:new Uint8Array(buffer);for(i=0;i<len;i+=4){encoded1=lookup$1$1[base64.charCodeAt(i)];encoded2=lookup$1$1[base64.charCodeAt(i+1)];encoded3=lookup$1$1[base64.charCodeAt(i+2)];encoded4=lookup$1$1[base64.charCodeAt(i+3)];bytes[p++]=encoded1<<2|encoded2>>4;bytes[p++]=(encoded2&15)<<4|encoded3>>2;bytes[p++]=(encoded3&3)<<6|encoded4&63;}return buffer;};var polyUint16Array$1=function(buffer){var length=buffer.length;var bytes=[];for(var i=0;i<length;i+=2){bytes.push(buffer[i+1]<<8|buffer[i]);}return bytes;};var polyUint32Array$1=function(buffer){var length=buffer.length;var bytes=[];for(var i=0;i<length;i+=4){bytes.push(buffer[i+3]<<24|buffer[i+2]<<16|buffer[i+1]<<8|buffer[i]);}return bytes;};/** Shift size for getting the index-2 table offset. */var UTRIE2_SHIFT_2$1=5;/** Shift size for getting the index-1 table offset. */var UTRIE2_SHIFT_1$1=6+5;/**
     * Shift size for shifting left the index array values.
     * Increases possible data size with 16-bit index values at the cost
     * of compactability.
     * This requires data blocks to be aligned by UTRIE2_DATA_GRANULARITY.
     */var UTRIE2_INDEX_SHIFT$1=2;/**
     * Difference between the two shift sizes,
     * for getting an index-1 offset from an index-2 offset. 6=11-5
     */var UTRIE2_SHIFT_1_2$1=UTRIE2_SHIFT_1$1-UTRIE2_SHIFT_2$1;/**
     * The part of the index-2 table for U+D800..U+DBFF stores values for
     * lead surrogate code _units_ not code _points_.
     * Values for lead surrogate code _points_ are indexed with this portion of the table.
     * Length=32=0x20=0x400>>UTRIE2_SHIFT_2. (There are 1024=0x400 lead surrogates.)
     */var UTRIE2_LSCP_INDEX_2_OFFSET$1=0x10000>>UTRIE2_SHIFT_2$1;/** Number of entries in a data block. 32=0x20 */var UTRIE2_DATA_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_2$1;/** Mask for getting the lower bits for the in-data-block offset. */var UTRIE2_DATA_MASK$1=UTRIE2_DATA_BLOCK_LENGTH$1-1;var UTRIE2_LSCP_INDEX_2_LENGTH$1=0x400>>UTRIE2_SHIFT_2$1;/** Count the lengths of both BMP pieces. 2080=0x820 */var UTRIE2_INDEX_2_BMP_LENGTH$1=UTRIE2_LSCP_INDEX_2_OFFSET$1+UTRIE2_LSCP_INDEX_2_LENGTH$1;/**
     * The 2-byte UTF-8 version of the index-2 table follows at offset 2080=0x820.
     * Length 32=0x20 for lead bytes C0..DF, regardless of UTRIE2_SHIFT_2.
     */var UTRIE2_UTF8_2B_INDEX_2_OFFSET$1=UTRIE2_INDEX_2_BMP_LENGTH$1;var UTRIE2_UTF8_2B_INDEX_2_LENGTH$1=0x800>>6;/* U+0800 is the first code point after 2-byte UTF-8 */ /**
     * The index-1 table, only used for supplementary code points, at offset 2112=0x840.
     * Variable length, for code points up to highStart, where the last single-value range starts.
     * Maximum length 512=0x200=0x100000>>UTRIE2_SHIFT_1.
     * (For 0x100000 supplementary code points U+10000..U+10ffff.)
     *
     * The part of the index-2 table for supplementary code points starts
     * after this index-1 table.
     *
     * Both the index-1 table and the following part of the index-2 table
     * are omitted completely if there is only BMP data.
     */var UTRIE2_INDEX_1_OFFSET$1=UTRIE2_UTF8_2B_INDEX_2_OFFSET$1+UTRIE2_UTF8_2B_INDEX_2_LENGTH$1;/**
     * Number of index-1 entries for the BMP. 32=0x20
     * This part of the index-1 table is omitted from the serialized form.
     */var UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1=0x10000>>UTRIE2_SHIFT_1$1;/** Number of entries in an index-2 block. 64=0x40 */var UTRIE2_INDEX_2_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_1_2$1;/** Mask for getting the lower bits for the in-index-2-block offset. */var UTRIE2_INDEX_2_MASK$1=UTRIE2_INDEX_2_BLOCK_LENGTH$1-1;var slice16$1=function(view,start,end){if(view.slice){return view.slice(start,end);}return new Uint16Array(Array.prototype.slice.call(view,start,end));};var slice32$1=function(view,start,end){if(view.slice){return view.slice(start,end);}return new Uint32Array(Array.prototype.slice.call(view,start,end));};var createTrieFromBase64$1=function(base64,_byteLength){var buffer=decode$1(base64);var view32=Array.isArray(buffer)?polyUint32Array$1(buffer):new Uint32Array(buffer);var view16=Array.isArray(buffer)?polyUint16Array$1(buffer):new Uint16Array(buffer);var headerLength=24;var index=slice16$1(view16,headerLength/2,view32[4]/2);var data=view32[5]===2?slice16$1(view16,(headerLength+view32[4])/2):slice32$1(view32,Math.ceil((headerLength+view32[4])/4));return new Trie$1(view32[0],view32[1],view32[2],view32[3],index,data);};var Trie$1=/** @class */function(){function Trie(initialValue,errorValue,highStart,highValueIndex,index,data){this.initialValue=initialValue;this.errorValue=errorValue;this.highStart=highStart;this.highValueIndex=highValueIndex;this.index=index;this.data=data;}/**
         * Get the value for a code point as stored in the Trie.
         *
         * @param codePoint the code point
         * @return the value
         */Trie.prototype.get=function(codePoint){var ix;if(codePoint>=0){if(codePoint<0x0d800||codePoint>0x0dbff&&codePoint<=0x0ffff){// Ordinary BMP code point, excluding leading surrogates.
    // BMP uses a single level lookup.  BMP index starts at offset 0 in the Trie2 index.
    // 16 bit data is stored in the index array itself.
    ix=this.index[codePoint>>UTRIE2_SHIFT_2$1];ix=(ix<<UTRIE2_INDEX_SHIFT$1)+(codePoint&UTRIE2_DATA_MASK$1);return this.data[ix];}if(codePoint<=0xffff){// Lead Surrogate Code Point.  A Separate index section is stored for
    // lead surrogate code units and code points.
    //   The main index has the code unit data.
    //   For this function, we need the code point data.
    // Note: this expression could be refactored for slightly improved efficiency, but
    //       surrogate code points will be so rare in practice that it's not worth it.
    ix=this.index[UTRIE2_LSCP_INDEX_2_OFFSET$1+(codePoint-0xd800>>UTRIE2_SHIFT_2$1)];ix=(ix<<UTRIE2_INDEX_SHIFT$1)+(codePoint&UTRIE2_DATA_MASK$1);return this.data[ix];}if(codePoint<this.highStart){// Supplemental code point, use two-level lookup.
    ix=UTRIE2_INDEX_1_OFFSET$1-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1+(codePoint>>UTRIE2_SHIFT_1$1);ix=this.index[ix];ix+=codePoint>>UTRIE2_SHIFT_2$1&UTRIE2_INDEX_2_MASK$1;ix=this.index[ix];ix=(ix<<UTRIE2_INDEX_SHIFT$1)+(codePoint&UTRIE2_DATA_MASK$1);return this.data[ix];}if(codePoint<=0x10ffff){return this.data[this.highValueIndex];}}// Fall through.  The code point is outside of the legal range of 0..0x10ffff.
    return this.errorValue;};return Trie;}();/*
     * base64-arraybuffer 1.0.2 <https://github.com/niklasvh/base64-arraybuffer>
     * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
     * Released under MIT License
     */var chars$3='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';// Use a lookup table to find the index.
    var lookup$3=typeof Uint8Array==='undefined'?[]:new Uint8Array(256);for(var i$3=0;i$3<chars$3.length;i$3++){lookup$3[chars$3.charCodeAt(i$3)]=i$3;}var base64$1='KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==';var LETTER_NUMBER_MODIFIER=50;// Non-tailorable Line Breaking Classes
    var BK=1;//  Cause a line break (after)
    var CR$1=2;//  Cause a line break (after), except between CR and LF
    var LF$1=3;//  Cause a line break (after)
    var CM=4;//  Prohibit a line break between the character and the preceding character
    var NL=5;//  Cause a line break (after)
    var WJ=7;//  Prohibit line breaks before and after
    var ZW=8;//  Provide a break opportunity
    var GL=9;//  Prohibit line breaks before and after
    var SP=10;// Enable indirect line breaks
    var ZWJ$1=11;// Prohibit line breaks within joiner sequences
    // Break Opportunities
    var B2=12;//  Provide a line break opportunity before and after the character
    var BA=13;//  Generally provide a line break opportunity after the character
    var BB=14;//  Generally provide a line break opportunity before the character
    var HY=15;//  Provide a line break opportunity after the character, except in numeric context
    var CB=16;//   Provide a line break opportunity contingent on additional information
    // Characters Prohibiting Certain Breaks
    var CL=17;//  Prohibit line breaks before
    var CP=18;//  Prohibit line breaks before
    var EX=19;//  Prohibit line breaks before
    var IN=20;//  Allow only indirect line breaks between pairs
    var NS=21;//  Allow only indirect line breaks before
    var OP=22;//  Prohibit line breaks after
    var QU=23;//  Act like they are both opening and closing
    // Numeric Context
    var IS=24;//  Prevent breaks after any and before numeric
    var NU=25;//  Form numeric expressions for line breaking purposes
    var PO=26;//  Do not break following a numeric expression
    var PR=27;//  Do not break in front of a numeric expression
    var SY=28;//  Prevent a break before; and allow a break after
    // Other Characters
    var AI=29;//  Act like AL when the resolvedEAW is N; otherwise; act as ID
    var AL=30;//  Are alphabetic characters or symbols that are used with alphabetic characters
    var CJ=31;//  Treat as NS or ID for strict or normal breaking.
    var EB=32;//  Do not break from following Emoji Modifier
    var EM=33;//  Do not break from preceding Emoji Base
    var H2=34;//  Form Korean syllable blocks
    var H3=35;//  Form Korean syllable blocks
    var HL=36;//  Do not break around a following hyphen; otherwise act as Alphabetic
    var ID=37;//  Break before or after; except in some numeric context
    var JL=38;//  Form Korean syllable blocks
    var JV=39;//  Form Korean syllable blocks
    var JT=40;//  Form Korean syllable blocks
    var RI$1=41;//  Keep pairs together. For pairs; break before and after other classes
    var SA=42;//  Provide a line break opportunity contingent on additional, language-specific context analysis
    var XX=43;//  Have as yet unknown line breaking behavior or unassigned code positions
    var ea_OP=[0x2329,0xff08];var BREAK_MANDATORY='!';var BREAK_NOT_ALLOWED$1='×';var BREAK_ALLOWED$1='÷';var UnicodeTrie$1=createTrieFromBase64$1(base64$1);var ALPHABETICS=[AL,HL];var HARD_LINE_BREAKS=[BK,CR$1,LF$1,NL];var SPACE$1=[SP,ZW];var PREFIX_POSTFIX=[PR,PO];var LINE_BREAKS=HARD_LINE_BREAKS.concat(SPACE$1);var KOREAN_SYLLABLE_BLOCK=[JL,JV,JT,H2,H3];var HYPHEN=[HY,BA];var codePointsToCharacterClasses=function(codePoints,lineBreak){if(lineBreak===void 0){lineBreak='strict';}var types=[];var indices=[];var categories=[];codePoints.forEach(function(codePoint,index){var classType=UnicodeTrie$1.get(codePoint);if(classType>LETTER_NUMBER_MODIFIER){categories.push(true);classType-=LETTER_NUMBER_MODIFIER;}else {categories.push(false);}if(['normal','auto','loose'].indexOf(lineBreak)!==-1){// U+2010, – U+2013, 〜 U+301C, ゠ U+30A0
    if([0x2010,0x2013,0x301c,0x30a0].indexOf(codePoint)!==-1){indices.push(index);return types.push(CB);}}if(classType===CM||classType===ZWJ$1){// LB10 Treat any remaining combining mark or ZWJ as AL.
    if(index===0){indices.push(index);return types.push(AL);}// LB9 Do not break a combining character sequence; treat it as if it has the line breaking class of
    // the base character in all of the following rules. Treat ZWJ as if it were CM.
    var prev=types[index-1];if(LINE_BREAKS.indexOf(prev)===-1){indices.push(indices[index-1]);return types.push(prev);}indices.push(index);return types.push(AL);}indices.push(index);if(classType===CJ){return types.push(lineBreak==='strict'?NS:ID);}if(classType===SA){return types.push(AL);}if(classType===AI){return types.push(AL);}// For supplementary characters, a useful default is to treat characters in the range 10000..1FFFD as AL
    // and characters in the ranges 20000..2FFFD and 30000..3FFFD as ID, until the implementation can be revised
    // to take into account the actual line breaking properties for these characters.
    if(classType===XX){if(codePoint>=0x20000&&codePoint<=0x2fffd||codePoint>=0x30000&&codePoint<=0x3fffd){return types.push(ID);}else {return types.push(AL);}}types.push(classType);});return [indices,types,categories];};var isAdjacentWithSpaceIgnored=function(a,b,currentIndex,classTypes){var current=classTypes[currentIndex];if(Array.isArray(a)?a.indexOf(current)!==-1:a===current){var i=currentIndex;while(i<=classTypes.length){i++;var next=classTypes[i];if(next===b){return true;}if(next!==SP){break;}}}if(current===SP){var i=currentIndex;while(i>0){i--;var prev=classTypes[i];if(Array.isArray(a)?a.indexOf(prev)!==-1:a===prev){var n=currentIndex;while(n<=classTypes.length){n++;var next=classTypes[n];if(next===b){return true;}if(next!==SP){break;}}}if(prev!==SP){break;}}}return false;};var previousNonSpaceClassType=function(currentIndex,classTypes){var i=currentIndex;while(i>=0){var type=classTypes[i];if(type===SP){i--;}else {return type;}}return 0;};var _lineBreakAtIndex=function(codePoints,classTypes,indicies,index,forbiddenBreaks){if(indicies[index]===0){return BREAK_NOT_ALLOWED$1;}var currentIndex=index-1;if(Array.isArray(forbiddenBreaks)&&forbiddenBreaks[currentIndex]===true){return BREAK_NOT_ALLOWED$1;}var beforeIndex=currentIndex-1;var afterIndex=currentIndex+1;var current=classTypes[currentIndex];// LB4 Always break after hard line breaks.
    // LB5 Treat CR followed by LF, as well as CR, LF, and NL as hard line breaks.
    var before=beforeIndex>=0?classTypes[beforeIndex]:0;var next=classTypes[afterIndex];if(current===CR$1&&next===LF$1){return BREAK_NOT_ALLOWED$1;}if(HARD_LINE_BREAKS.indexOf(current)!==-1){return BREAK_MANDATORY;}// LB6 Do not break before hard line breaks.
    if(HARD_LINE_BREAKS.indexOf(next)!==-1){return BREAK_NOT_ALLOWED$1;}// LB7 Do not break before spaces or zero width space.
    if(SPACE$1.indexOf(next)!==-1){return BREAK_NOT_ALLOWED$1;}// LB8 Break before any character following a zero-width space, even if one or more spaces intervene.
    if(previousNonSpaceClassType(currentIndex,classTypes)===ZW){return BREAK_ALLOWED$1;}// LB8a Do not break after a zero width joiner.
    if(UnicodeTrie$1.get(codePoints[currentIndex])===ZWJ$1){return BREAK_NOT_ALLOWED$1;}// zwj emojis
    if((current===EB||current===EM)&&UnicodeTrie$1.get(codePoints[afterIndex])===ZWJ$1){return BREAK_NOT_ALLOWED$1;}// LB11 Do not break before or after Word joiner and related characters.
    if(current===WJ||next===WJ){return BREAK_NOT_ALLOWED$1;}// LB12 Do not break after NBSP and related characters.
    if(current===GL){return BREAK_NOT_ALLOWED$1;}// LB12a Do not break before NBSP and related characters, except after spaces and hyphens.
    if([SP,BA,HY].indexOf(current)===-1&&next===GL){return BREAK_NOT_ALLOWED$1;}// LB13 Do not break before ‘]’ or ‘!’ or ‘;’ or ‘/’, even after spaces.
    if([CL,CP,EX,IS,SY].indexOf(next)!==-1){return BREAK_NOT_ALLOWED$1;}// LB14 Do not break after ‘[’, even after spaces.
    if(previousNonSpaceClassType(currentIndex,classTypes)===OP){return BREAK_NOT_ALLOWED$1;}// LB15 Do not break within ‘”[’, even with intervening spaces.
    if(isAdjacentWithSpaceIgnored(QU,OP,currentIndex,classTypes)){return BREAK_NOT_ALLOWED$1;}// LB16 Do not break between closing punctuation and a nonstarter (lb=NS), even with intervening spaces.
    if(isAdjacentWithSpaceIgnored([CL,CP],NS,currentIndex,classTypes)){return BREAK_NOT_ALLOWED$1;}// LB17 Do not break within ‘——’, even with intervening spaces.
    if(isAdjacentWithSpaceIgnored(B2,B2,currentIndex,classTypes)){return BREAK_NOT_ALLOWED$1;}// LB18 Break after spaces.
    if(current===SP){return BREAK_ALLOWED$1;}// LB19 Do not break before or after quotation marks, such as ‘ ” ’.
    if(current===QU||next===QU){return BREAK_NOT_ALLOWED$1;}// LB20 Break before and after unresolved CB.
    if(next===CB||current===CB){return BREAK_ALLOWED$1;}// LB21 Do not break before hyphen-minus, other hyphens, fixed-width spaces, small kana, and other non-starters, or after acute accents.
    if([BA,HY,NS].indexOf(next)!==-1||current===BB){return BREAK_NOT_ALLOWED$1;}// LB21a Don't break after Hebrew + Hyphen.
    if(before===HL&&HYPHEN.indexOf(current)!==-1){return BREAK_NOT_ALLOWED$1;}// LB21b Don’t break between Solidus and Hebrew letters.
    if(current===SY&&next===HL){return BREAK_NOT_ALLOWED$1;}// LB22 Do not break before ellipsis.
    if(next===IN){return BREAK_NOT_ALLOWED$1;}// LB23 Do not break between digits and letters.
    if(ALPHABETICS.indexOf(next)!==-1&&current===NU||ALPHABETICS.indexOf(current)!==-1&&next===NU){return BREAK_NOT_ALLOWED$1;}// LB23a Do not break between numeric prefixes and ideographs, or between ideographs and numeric postfixes.
    if(current===PR&&[ID,EB,EM].indexOf(next)!==-1||[ID,EB,EM].indexOf(current)!==-1&&next===PO){return BREAK_NOT_ALLOWED$1;}// LB24 Do not break between numeric prefix/postfix and letters, or between letters and prefix/postfix.
    if(ALPHABETICS.indexOf(current)!==-1&&PREFIX_POSTFIX.indexOf(next)!==-1||PREFIX_POSTFIX.indexOf(current)!==-1&&ALPHABETICS.indexOf(next)!==-1){return BREAK_NOT_ALLOWED$1;}// LB25 Do not break between the following pairs of classes relevant to numbers:
    if(// (PR | PO) × ( OP | HY )? NU
    [PR,PO].indexOf(current)!==-1&&(next===NU||[OP,HY].indexOf(next)!==-1&&classTypes[afterIndex+1]===NU)||// ( OP | HY ) × NU
    [OP,HY].indexOf(current)!==-1&&next===NU||// NU ×	(NU | SY | IS)
    current===NU&&[NU,SY,IS].indexOf(next)!==-1){return BREAK_NOT_ALLOWED$1;}// NU (NU | SY | IS)* × (NU | SY | IS | CL | CP)
    if([NU,SY,IS,CL,CP].indexOf(next)!==-1){var prevIndex=currentIndex;while(prevIndex>=0){var type=classTypes[prevIndex];if(type===NU){return BREAK_NOT_ALLOWED$1;}else if([SY,IS].indexOf(type)!==-1){prevIndex--;}else {break;}}}// NU (NU | SY | IS)* (CL | CP)? × (PO | PR))
    if([PR,PO].indexOf(next)!==-1){var prevIndex=[CL,CP].indexOf(current)!==-1?beforeIndex:currentIndex;while(prevIndex>=0){var type=classTypes[prevIndex];if(type===NU){return BREAK_NOT_ALLOWED$1;}else if([SY,IS].indexOf(type)!==-1){prevIndex--;}else {break;}}}// LB26 Do not break a Korean syllable.
    if(JL===current&&[JL,JV,H2,H3].indexOf(next)!==-1||[JV,H2].indexOf(current)!==-1&&[JV,JT].indexOf(next)!==-1||[JT,H3].indexOf(current)!==-1&&next===JT){return BREAK_NOT_ALLOWED$1;}// LB27 Treat a Korean Syllable Block the same as ID.
    if(KOREAN_SYLLABLE_BLOCK.indexOf(current)!==-1&&[IN,PO].indexOf(next)!==-1||KOREAN_SYLLABLE_BLOCK.indexOf(next)!==-1&&current===PR){return BREAK_NOT_ALLOWED$1;}// LB28 Do not break between alphabetics (“at”).
    if(ALPHABETICS.indexOf(current)!==-1&&ALPHABETICS.indexOf(next)!==-1){return BREAK_NOT_ALLOWED$1;}// LB29 Do not break between numeric punctuation and alphabetics (“e.g.”).
    if(current===IS&&ALPHABETICS.indexOf(next)!==-1){return BREAK_NOT_ALLOWED$1;}// LB30 Do not break between letters, numbers, or ordinary symbols and opening or closing parentheses.
    if(ALPHABETICS.concat(NU).indexOf(current)!==-1&&next===OP&&ea_OP.indexOf(codePoints[afterIndex])===-1||ALPHABETICS.concat(NU).indexOf(next)!==-1&&current===CP){return BREAK_NOT_ALLOWED$1;}// LB30a Break between two regional indicator symbols if and only if there are an even number of regional
    // indicators preceding the position of the break.
    if(current===RI$1&&next===RI$1){var i=indicies[currentIndex];var count=1;while(i>0){i--;if(classTypes[i]===RI$1){count++;}else {break;}}if(count%2!==0){return BREAK_NOT_ALLOWED$1;}}// LB30b Do not break between an emoji base and an emoji modifier.
    if(current===EB&&next===EM){return BREAK_NOT_ALLOWED$1;}return BREAK_ALLOWED$1;};var cssFormattedClasses=function(codePoints,options){if(!options){options={lineBreak:'normal',wordBreak:'normal'};}var _a=codePointsToCharacterClasses(codePoints,options.lineBreak),indicies=_a[0],classTypes=_a[1],isLetterNumber=_a[2];if(options.wordBreak==='break-all'||options.wordBreak==='break-word'){classTypes=classTypes.map(function(type){return [NU,AL,SA].indexOf(type)!==-1?ID:type;});}var forbiddenBreakpoints=options.wordBreak==='keep-all'?isLetterNumber.map(function(letterNumber,i){return letterNumber&&codePoints[i]>=0x4e00&&codePoints[i]<=0x9fff;}):undefined;return [indicies,classTypes,forbiddenBreakpoints];};var Break=/** @class */function(){function Break(codePoints,lineBreak,start,end){this.codePoints=codePoints;this.required=lineBreak===BREAK_MANDATORY;this.start=start;this.end=end;}Break.prototype.slice=function(){return fromCodePoint$1.apply(void 0,this.codePoints.slice(this.start,this.end));};return Break;}();var LineBreaker=function(str,options){var codePoints=toCodePoints$1(str);var _a=cssFormattedClasses(codePoints,options),indicies=_a[0],classTypes=_a[1],forbiddenBreakpoints=_a[2];var length=codePoints.length;var lastEnd=0;var nextIndex=0;return {next:function(){if(nextIndex>=length){return {done:true,value:null};}var lineBreak=BREAK_NOT_ALLOWED$1;while(nextIndex<length&&(lineBreak=_lineBreakAtIndex(codePoints,classTypes,indicies,++nextIndex,forbiddenBreakpoints))===BREAK_NOT_ALLOWED$1){}if(lineBreak!==BREAK_NOT_ALLOWED$1||nextIndex===length){var value=new Break(codePoints,lineBreak,lastEnd,nextIndex);lastEnd=nextIndex;return {value:value,done:false};}return {done:true,value:null};}};};// https://www.w3.org/TR/css-syntax-3
    var FLAG_UNRESTRICTED=1<<0;var FLAG_ID=1<<1;var FLAG_INTEGER=1<<2;var FLAG_NUMBER=1<<3;var LINE_FEED=0x000a;var SOLIDUS=0x002f;var REVERSE_SOLIDUS=0x005c;var CHARACTER_TABULATION=0x0009;var SPACE=0x0020;var QUOTATION_MARK=0x0022;var EQUALS_SIGN=0x003d;var NUMBER_SIGN=0x0023;var DOLLAR_SIGN=0x0024;var PERCENTAGE_SIGN=0x0025;var APOSTROPHE=0x0027;var LEFT_PARENTHESIS=0x0028;var RIGHT_PARENTHESIS=0x0029;var LOW_LINE=0x005f;var HYPHEN_MINUS=0x002d;var EXCLAMATION_MARK=0x0021;var LESS_THAN_SIGN=0x003c;var GREATER_THAN_SIGN=0x003e;var COMMERCIAL_AT=0x0040;var LEFT_SQUARE_BRACKET=0x005b;var RIGHT_SQUARE_BRACKET=0x005d;var CIRCUMFLEX_ACCENT=0x003d;var LEFT_CURLY_BRACKET=0x007b;var QUESTION_MARK=0x003f;var RIGHT_CURLY_BRACKET=0x007d;var VERTICAL_LINE=0x007c;var TILDE=0x007e;var CONTROL=0x0080;var REPLACEMENT_CHARACTER=0xfffd;var ASTERISK=0x002a;var PLUS_SIGN=0x002b;var COMMA=0x002c;var COLON=0x003a;var SEMICOLON=0x003b;var FULL_STOP=0x002e;var NULL=0x0000;var BACKSPACE=0x0008;var LINE_TABULATION=0x000b;var SHIFT_OUT=0x000e;var INFORMATION_SEPARATOR_ONE=0x001f;var DELETE=0x007f;var EOF$1=-1;var ZERO=0x0030;var a=0x0061;var e=0x0065;var f=0x0066;var u=0x0075;var z=0x007a;var A=0x0041;var E=0x0045;var F=0x0046;var U=0x0055;var Z=0x005a;var isDigit=function(codePoint){return codePoint>=ZERO&&codePoint<=0x0039;};var isSurrogateCodePoint=function(codePoint){return codePoint>=0xd800&&codePoint<=0xdfff;};var isHex=function(codePoint){return isDigit(codePoint)||codePoint>=A&&codePoint<=F||codePoint>=a&&codePoint<=f;};var isLowerCaseLetter=function(codePoint){return codePoint>=a&&codePoint<=z;};var isUpperCaseLetter=function(codePoint){return codePoint>=A&&codePoint<=Z;};var isLetter=function(codePoint){return isLowerCaseLetter(codePoint)||isUpperCaseLetter(codePoint);};var isNonASCIICodePoint=function(codePoint){return codePoint>=CONTROL;};var isWhiteSpace=function(codePoint){return codePoint===LINE_FEED||codePoint===CHARACTER_TABULATION||codePoint===SPACE;};var isNameStartCodePoint=function(codePoint){return isLetter(codePoint)||isNonASCIICodePoint(codePoint)||codePoint===LOW_LINE;};var isNameCodePoint=function(codePoint){return isNameStartCodePoint(codePoint)||isDigit(codePoint)||codePoint===HYPHEN_MINUS;};var isNonPrintableCodePoint=function(codePoint){return codePoint>=NULL&&codePoint<=BACKSPACE||codePoint===LINE_TABULATION||codePoint>=SHIFT_OUT&&codePoint<=INFORMATION_SEPARATOR_ONE||codePoint===DELETE;};var isValidEscape=function(c1,c2){if(c1!==REVERSE_SOLIDUS){return false;}return c2!==LINE_FEED;};var isIdentifierStart=function(c1,c2,c3){if(c1===HYPHEN_MINUS){return isNameStartCodePoint(c2)||isValidEscape(c2,c3);}else if(isNameStartCodePoint(c1)){return true;}else if(c1===REVERSE_SOLIDUS&&isValidEscape(c1,c2)){return true;}return false;};var isNumberStart=function(c1,c2,c3){if(c1===PLUS_SIGN||c1===HYPHEN_MINUS){if(isDigit(c2)){return true;}return c2===FULL_STOP&&isDigit(c3);}if(c1===FULL_STOP){return isDigit(c2);}return isDigit(c1);};var stringToNumber=function(codePoints){var c=0;var sign=1;if(codePoints[c]===PLUS_SIGN||codePoints[c]===HYPHEN_MINUS){if(codePoints[c]===HYPHEN_MINUS){sign=-1;}c++;}var integers=[];while(isDigit(codePoints[c])){integers.push(codePoints[c++]);}var int=integers.length?parseInt(fromCodePoint$1.apply(void 0,integers),10):0;if(codePoints[c]===FULL_STOP){c++;}var fraction=[];while(isDigit(codePoints[c])){fraction.push(codePoints[c++]);}var fracd=fraction.length;var frac=fracd?parseInt(fromCodePoint$1.apply(void 0,fraction),10):0;if(codePoints[c]===E||codePoints[c]===e){c++;}var expsign=1;if(codePoints[c]===PLUS_SIGN||codePoints[c]===HYPHEN_MINUS){if(codePoints[c]===HYPHEN_MINUS){expsign=-1;}c++;}var exponent=[];while(isDigit(codePoints[c])){exponent.push(codePoints[c++]);}var exp=exponent.length?parseInt(fromCodePoint$1.apply(void 0,exponent),10):0;return sign*(int+frac*Math.pow(10,-fracd))*Math.pow(10,expsign*exp);};var LEFT_PARENTHESIS_TOKEN={type:2/* LEFT_PARENTHESIS_TOKEN */};var RIGHT_PARENTHESIS_TOKEN={type:3/* RIGHT_PARENTHESIS_TOKEN */};var COMMA_TOKEN={type:4/* COMMA_TOKEN */};var SUFFIX_MATCH_TOKEN={type:13/* SUFFIX_MATCH_TOKEN */};var PREFIX_MATCH_TOKEN={type:8/* PREFIX_MATCH_TOKEN */};var COLUMN_TOKEN={type:21/* COLUMN_TOKEN */};var DASH_MATCH_TOKEN={type:9/* DASH_MATCH_TOKEN */};var INCLUDE_MATCH_TOKEN={type:10/* INCLUDE_MATCH_TOKEN */};var LEFT_CURLY_BRACKET_TOKEN={type:11/* LEFT_CURLY_BRACKET_TOKEN */};var RIGHT_CURLY_BRACKET_TOKEN={type:12/* RIGHT_CURLY_BRACKET_TOKEN */};var SUBSTRING_MATCH_TOKEN={type:14/* SUBSTRING_MATCH_TOKEN */};var BAD_URL_TOKEN={type:23/* BAD_URL_TOKEN */};var BAD_STRING_TOKEN={type:1/* BAD_STRING_TOKEN */};var CDO_TOKEN={type:25/* CDO_TOKEN */};var CDC_TOKEN={type:24/* CDC_TOKEN */};var COLON_TOKEN={type:26/* COLON_TOKEN */};var SEMICOLON_TOKEN={type:27/* SEMICOLON_TOKEN */};var LEFT_SQUARE_BRACKET_TOKEN={type:28/* LEFT_SQUARE_BRACKET_TOKEN */};var RIGHT_SQUARE_BRACKET_TOKEN={type:29/* RIGHT_SQUARE_BRACKET_TOKEN */};var WHITESPACE_TOKEN={type:31/* WHITESPACE_TOKEN */};var EOF_TOKEN={type:32/* EOF_TOKEN */};var Tokenizer=/** @class */function(){function Tokenizer(){this._value=[];}Tokenizer.prototype.write=function(chunk){this._value=this._value.concat(toCodePoints$1(chunk));};Tokenizer.prototype.read=function(){var tokens=[];var token=this.consumeToken();while(token!==EOF_TOKEN){tokens.push(token);token=this.consumeToken();}return tokens;};Tokenizer.prototype.consumeToken=function(){var codePoint=this.consumeCodePoint();switch(codePoint){case QUOTATION_MARK:return this.consumeStringToken(QUOTATION_MARK);case NUMBER_SIGN:var c1=this.peekCodePoint(0);var c2=this.peekCodePoint(1);var c3=this.peekCodePoint(2);if(isNameCodePoint(c1)||isValidEscape(c2,c3)){var flags=isIdentifierStart(c1,c2,c3)?FLAG_ID:FLAG_UNRESTRICTED;var value=this.consumeName();return {type:5/* HASH_TOKEN */,value:value,flags:flags};}break;case DOLLAR_SIGN:if(this.peekCodePoint(0)===EQUALS_SIGN){this.consumeCodePoint();return SUFFIX_MATCH_TOKEN;}break;case APOSTROPHE:return this.consumeStringToken(APOSTROPHE);case LEFT_PARENTHESIS:return LEFT_PARENTHESIS_TOKEN;case RIGHT_PARENTHESIS:return RIGHT_PARENTHESIS_TOKEN;case ASTERISK:if(this.peekCodePoint(0)===EQUALS_SIGN){this.consumeCodePoint();return SUBSTRING_MATCH_TOKEN;}break;case PLUS_SIGN:if(isNumberStart(codePoint,this.peekCodePoint(0),this.peekCodePoint(1))){this.reconsumeCodePoint(codePoint);return this.consumeNumericToken();}break;case COMMA:return COMMA_TOKEN;case HYPHEN_MINUS:var e1=codePoint;var e2=this.peekCodePoint(0);var e3=this.peekCodePoint(1);if(isNumberStart(e1,e2,e3)){this.reconsumeCodePoint(codePoint);return this.consumeNumericToken();}if(isIdentifierStart(e1,e2,e3)){this.reconsumeCodePoint(codePoint);return this.consumeIdentLikeToken();}if(e2===HYPHEN_MINUS&&e3===GREATER_THAN_SIGN){this.consumeCodePoint();this.consumeCodePoint();return CDC_TOKEN;}break;case FULL_STOP:if(isNumberStart(codePoint,this.peekCodePoint(0),this.peekCodePoint(1))){this.reconsumeCodePoint(codePoint);return this.consumeNumericToken();}break;case SOLIDUS:if(this.peekCodePoint(0)===ASTERISK){this.consumeCodePoint();while(true){var c=this.consumeCodePoint();if(c===ASTERISK){c=this.consumeCodePoint();if(c===SOLIDUS){return this.consumeToken();}}if(c===EOF$1){return this.consumeToken();}}}break;case COLON:return COLON_TOKEN;case SEMICOLON:return SEMICOLON_TOKEN;case LESS_THAN_SIGN:if(this.peekCodePoint(0)===EXCLAMATION_MARK&&this.peekCodePoint(1)===HYPHEN_MINUS&&this.peekCodePoint(2)===HYPHEN_MINUS){this.consumeCodePoint();this.consumeCodePoint();return CDO_TOKEN;}break;case COMMERCIAL_AT:var a1=this.peekCodePoint(0);var a2=this.peekCodePoint(1);var a3=this.peekCodePoint(2);if(isIdentifierStart(a1,a2,a3)){var value=this.consumeName();return {type:7/* AT_KEYWORD_TOKEN */,value:value};}break;case LEFT_SQUARE_BRACKET:return LEFT_SQUARE_BRACKET_TOKEN;case REVERSE_SOLIDUS:if(isValidEscape(codePoint,this.peekCodePoint(0))){this.reconsumeCodePoint(codePoint);return this.consumeIdentLikeToken();}break;case RIGHT_SQUARE_BRACKET:return RIGHT_SQUARE_BRACKET_TOKEN;case CIRCUMFLEX_ACCENT:if(this.peekCodePoint(0)===EQUALS_SIGN){this.consumeCodePoint();return PREFIX_MATCH_TOKEN;}break;case LEFT_CURLY_BRACKET:return LEFT_CURLY_BRACKET_TOKEN;case RIGHT_CURLY_BRACKET:return RIGHT_CURLY_BRACKET_TOKEN;case u:case U:var u1=this.peekCodePoint(0);var u2=this.peekCodePoint(1);if(u1===PLUS_SIGN&&(isHex(u2)||u2===QUESTION_MARK)){this.consumeCodePoint();this.consumeUnicodeRangeToken();}this.reconsumeCodePoint(codePoint);return this.consumeIdentLikeToken();case VERTICAL_LINE:if(this.peekCodePoint(0)===EQUALS_SIGN){this.consumeCodePoint();return DASH_MATCH_TOKEN;}if(this.peekCodePoint(0)===VERTICAL_LINE){this.consumeCodePoint();return COLUMN_TOKEN;}break;case TILDE:if(this.peekCodePoint(0)===EQUALS_SIGN){this.consumeCodePoint();return INCLUDE_MATCH_TOKEN;}break;case EOF$1:return EOF_TOKEN;}if(isWhiteSpace(codePoint)){this.consumeWhiteSpace();return WHITESPACE_TOKEN;}if(isDigit(codePoint)){this.reconsumeCodePoint(codePoint);return this.consumeNumericToken();}if(isNameStartCodePoint(codePoint)){this.reconsumeCodePoint(codePoint);return this.consumeIdentLikeToken();}return {type:6/* DELIM_TOKEN */,value:fromCodePoint$1(codePoint)};};Tokenizer.prototype.consumeCodePoint=function(){var value=this._value.shift();return typeof value==='undefined'?-1:value;};Tokenizer.prototype.reconsumeCodePoint=function(codePoint){this._value.unshift(codePoint);};Tokenizer.prototype.peekCodePoint=function(delta){if(delta>=this._value.length){return -1;}return this._value[delta];};Tokenizer.prototype.consumeUnicodeRangeToken=function(){var digits=[];var codePoint=this.consumeCodePoint();while(isHex(codePoint)&&digits.length<6){digits.push(codePoint);codePoint=this.consumeCodePoint();}var questionMarks=false;while(codePoint===QUESTION_MARK&&digits.length<6){digits.push(codePoint);codePoint=this.consumeCodePoint();questionMarks=true;}if(questionMarks){var start_1=parseInt(fromCodePoint$1.apply(void 0,digits.map(function(digit){return digit===QUESTION_MARK?ZERO:digit;})),16);var end=parseInt(fromCodePoint$1.apply(void 0,digits.map(function(digit){return digit===QUESTION_MARK?F:digit;})),16);return {type:30/* UNICODE_RANGE_TOKEN */,start:start_1,end:end};}var start=parseInt(fromCodePoint$1.apply(void 0,digits),16);if(this.peekCodePoint(0)===HYPHEN_MINUS&&isHex(this.peekCodePoint(1))){this.consumeCodePoint();codePoint=this.consumeCodePoint();var endDigits=[];while(isHex(codePoint)&&endDigits.length<6){endDigits.push(codePoint);codePoint=this.consumeCodePoint();}var end=parseInt(fromCodePoint$1.apply(void 0,endDigits),16);return {type:30/* UNICODE_RANGE_TOKEN */,start:start,end:end};}else {return {type:30/* UNICODE_RANGE_TOKEN */,start:start,end:start};}};Tokenizer.prototype.consumeIdentLikeToken=function(){var value=this.consumeName();if(value.toLowerCase()==='url'&&this.peekCodePoint(0)===LEFT_PARENTHESIS){this.consumeCodePoint();return this.consumeUrlToken();}else if(this.peekCodePoint(0)===LEFT_PARENTHESIS){this.consumeCodePoint();return {type:19/* FUNCTION_TOKEN */,value:value};}return {type:20/* IDENT_TOKEN */,value:value};};Tokenizer.prototype.consumeUrlToken=function(){var value=[];this.consumeWhiteSpace();if(this.peekCodePoint(0)===EOF$1){return {type:22/* URL_TOKEN */,value:''};}var next=this.peekCodePoint(0);if(next===APOSTROPHE||next===QUOTATION_MARK){var stringToken=this.consumeStringToken(this.consumeCodePoint());if(stringToken.type===0/* STRING_TOKEN */){this.consumeWhiteSpace();if(this.peekCodePoint(0)===EOF$1||this.peekCodePoint(0)===RIGHT_PARENTHESIS){this.consumeCodePoint();return {type:22/* URL_TOKEN */,value:stringToken.value};}}this.consumeBadUrlRemnants();return BAD_URL_TOKEN;}while(true){var codePoint=this.consumeCodePoint();if(codePoint===EOF$1||codePoint===RIGHT_PARENTHESIS){return {type:22/* URL_TOKEN */,value:fromCodePoint$1.apply(void 0,value)};}else if(isWhiteSpace(codePoint)){this.consumeWhiteSpace();if(this.peekCodePoint(0)===EOF$1||this.peekCodePoint(0)===RIGHT_PARENTHESIS){this.consumeCodePoint();return {type:22/* URL_TOKEN */,value:fromCodePoint$1.apply(void 0,value)};}this.consumeBadUrlRemnants();return BAD_URL_TOKEN;}else if(codePoint===QUOTATION_MARK||codePoint===APOSTROPHE||codePoint===LEFT_PARENTHESIS||isNonPrintableCodePoint(codePoint)){this.consumeBadUrlRemnants();return BAD_URL_TOKEN;}else if(codePoint===REVERSE_SOLIDUS){if(isValidEscape(codePoint,this.peekCodePoint(0))){value.push(this.consumeEscapedCodePoint());}else {this.consumeBadUrlRemnants();return BAD_URL_TOKEN;}}else {value.push(codePoint);}}};Tokenizer.prototype.consumeWhiteSpace=function(){while(isWhiteSpace(this.peekCodePoint(0))){this.consumeCodePoint();}};Tokenizer.prototype.consumeBadUrlRemnants=function(){while(true){var codePoint=this.consumeCodePoint();if(codePoint===RIGHT_PARENTHESIS||codePoint===EOF$1){return;}if(isValidEscape(codePoint,this.peekCodePoint(0))){this.consumeEscapedCodePoint();}}};Tokenizer.prototype.consumeStringSlice=function(count){var SLICE_STACK_SIZE=50000;var value='';while(count>0){var amount=Math.min(SLICE_STACK_SIZE,count);value+=fromCodePoint$1.apply(void 0,this._value.splice(0,amount));count-=amount;}this._value.shift();return value;};Tokenizer.prototype.consumeStringToken=function(endingCodePoint){var value='';var i=0;do{var codePoint=this._value[i];if(codePoint===EOF$1||codePoint===undefined||codePoint===endingCodePoint){value+=this.consumeStringSlice(i);return {type:0/* STRING_TOKEN */,value:value};}if(codePoint===LINE_FEED){this._value.splice(0,i);return BAD_STRING_TOKEN;}if(codePoint===REVERSE_SOLIDUS){var next=this._value[i+1];if(next!==EOF$1&&next!==undefined){if(next===LINE_FEED){value+=this.consumeStringSlice(i);i=-1;this._value.shift();}else if(isValidEscape(codePoint,next)){value+=this.consumeStringSlice(i);value+=fromCodePoint$1(this.consumeEscapedCodePoint());i=-1;}}}i++;}while(true);};Tokenizer.prototype.consumeNumber=function(){var repr=[];var type=FLAG_INTEGER;var c1=this.peekCodePoint(0);if(c1===PLUS_SIGN||c1===HYPHEN_MINUS){repr.push(this.consumeCodePoint());}while(isDigit(this.peekCodePoint(0))){repr.push(this.consumeCodePoint());}c1=this.peekCodePoint(0);var c2=this.peekCodePoint(1);if(c1===FULL_STOP&&isDigit(c2)){repr.push(this.consumeCodePoint(),this.consumeCodePoint());type=FLAG_NUMBER;while(isDigit(this.peekCodePoint(0))){repr.push(this.consumeCodePoint());}}c1=this.peekCodePoint(0);c2=this.peekCodePoint(1);var c3=this.peekCodePoint(2);if((c1===E||c1===e)&&((c2===PLUS_SIGN||c2===HYPHEN_MINUS)&&isDigit(c3)||isDigit(c2))){repr.push(this.consumeCodePoint(),this.consumeCodePoint());type=FLAG_NUMBER;while(isDigit(this.peekCodePoint(0))){repr.push(this.consumeCodePoint());}}return [stringToNumber(repr),type];};Tokenizer.prototype.consumeNumericToken=function(){var _a=this.consumeNumber(),number=_a[0],flags=_a[1];var c1=this.peekCodePoint(0);var c2=this.peekCodePoint(1);var c3=this.peekCodePoint(2);if(isIdentifierStart(c1,c2,c3)){var unit=this.consumeName();return {type:15/* DIMENSION_TOKEN */,number:number,flags:flags,unit:unit};}if(c1===PERCENTAGE_SIGN){this.consumeCodePoint();return {type:16/* PERCENTAGE_TOKEN */,number:number,flags:flags};}return {type:17/* NUMBER_TOKEN */,number:number,flags:flags};};Tokenizer.prototype.consumeEscapedCodePoint=function(){var codePoint=this.consumeCodePoint();if(isHex(codePoint)){var hex=fromCodePoint$1(codePoint);while(isHex(this.peekCodePoint(0))&&hex.length<6){hex+=fromCodePoint$1(this.consumeCodePoint());}if(isWhiteSpace(this.peekCodePoint(0))){this.consumeCodePoint();}var hexCodePoint=parseInt(hex,16);if(hexCodePoint===0||isSurrogateCodePoint(hexCodePoint)||hexCodePoint>0x10ffff){return REPLACEMENT_CHARACTER;}return hexCodePoint;}if(codePoint===EOF$1){return REPLACEMENT_CHARACTER;}return codePoint;};Tokenizer.prototype.consumeName=function(){var result='';while(true){var codePoint=this.consumeCodePoint();if(isNameCodePoint(codePoint)){result+=fromCodePoint$1(codePoint);}else if(isValidEscape(codePoint,this.peekCodePoint(0))){result+=fromCodePoint$1(this.consumeEscapedCodePoint());}else {this.reconsumeCodePoint(codePoint);return result;}}};return Tokenizer;}();var Parser=/** @class */function(){function Parser(tokens){this._tokens=tokens;}Parser.create=function(value){var tokenizer=new Tokenizer();tokenizer.write(value);return new Parser(tokenizer.read());};Parser.parseValue=function(value){return Parser.create(value).parseComponentValue();};Parser.parseValues=function(value){return Parser.create(value).parseComponentValues();};Parser.prototype.parseComponentValue=function(){var token=this.consumeToken();while(token.type===31/* WHITESPACE_TOKEN */){token=this.consumeToken();}if(token.type===32/* EOF_TOKEN */){throw new SyntaxError("Error parsing CSS component value, unexpected EOF");}this.reconsumeToken(token);var value=this.consumeComponentValue();do{token=this.consumeToken();}while(token.type===31/* WHITESPACE_TOKEN */);if(token.type===32/* EOF_TOKEN */){return value;}throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one");};Parser.prototype.parseComponentValues=function(){var values=[];while(true){var value=this.consumeComponentValue();if(value.type===32/* EOF_TOKEN */){return values;}values.push(value);values.push();}};Parser.prototype.consumeComponentValue=function(){var token=this.consumeToken();switch(token.type){case 11/* LEFT_CURLY_BRACKET_TOKEN */:case 28/* LEFT_SQUARE_BRACKET_TOKEN */:case 2/* LEFT_PARENTHESIS_TOKEN */:return this.consumeSimpleBlock(token.type);case 19/* FUNCTION_TOKEN */:return this.consumeFunction(token);}return token;};Parser.prototype.consumeSimpleBlock=function(type){var block={type:type,values:[]};var token=this.consumeToken();while(true){if(token.type===32/* EOF_TOKEN */||isEndingTokenFor(token,type)){return block;}this.reconsumeToken(token);block.values.push(this.consumeComponentValue());token=this.consumeToken();}};Parser.prototype.consumeFunction=function(functionToken){var cssFunction={name:functionToken.value,values:[],type:18/* FUNCTION */};while(true){var token=this.consumeToken();if(token.type===32/* EOF_TOKEN */||token.type===3/* RIGHT_PARENTHESIS_TOKEN */){return cssFunction;}this.reconsumeToken(token);cssFunction.values.push(this.consumeComponentValue());}};Parser.prototype.consumeToken=function(){var token=this._tokens.shift();return typeof token==='undefined'?EOF_TOKEN:token;};Parser.prototype.reconsumeToken=function(token){this._tokens.unshift(token);};return Parser;}();var isDimensionToken=function(token){return token.type===15/* DIMENSION_TOKEN */;};var isNumberToken=function(token){return token.type===17/* NUMBER_TOKEN */;};var isIdentToken=function(token){return token.type===20/* IDENT_TOKEN */;};var isStringToken=function(token){return token.type===0/* STRING_TOKEN */;};var isIdentWithValue=function(token,value){return isIdentToken(token)&&token.value===value;};var nonWhiteSpace=function(token){return token.type!==31/* WHITESPACE_TOKEN */;};var nonFunctionArgSeparator=function(token){return token.type!==31/* WHITESPACE_TOKEN */&&token.type!==4/* COMMA_TOKEN */;};var parseFunctionArgs=function(tokens){var args=[];var arg=[];tokens.forEach(function(token){if(token.type===4/* COMMA_TOKEN */){if(arg.length===0){throw new Error("Error parsing function args, zero tokens for arg");}args.push(arg);arg=[];return;}if(token.type!==31/* WHITESPACE_TOKEN */){arg.push(token);}});if(arg.length){args.push(arg);}return args;};var isEndingTokenFor=function(token,type){if(type===11/* LEFT_CURLY_BRACKET_TOKEN */&&token.type===12/* RIGHT_CURLY_BRACKET_TOKEN */){return true;}if(type===28/* LEFT_SQUARE_BRACKET_TOKEN */&&token.type===29/* RIGHT_SQUARE_BRACKET_TOKEN */){return true;}return type===2/* LEFT_PARENTHESIS_TOKEN */&&token.type===3/* RIGHT_PARENTHESIS_TOKEN */;};var isLength=function(token){return token.type===17/* NUMBER_TOKEN */||token.type===15/* DIMENSION_TOKEN */;};var isLengthPercentage=function(token){return token.type===16/* PERCENTAGE_TOKEN */||isLength(token);};var parseLengthPercentageTuple=function(tokens){return tokens.length>1?[tokens[0],tokens[1]]:[tokens[0]];};var ZERO_LENGTH={type:17/* NUMBER_TOKEN */,number:0,flags:FLAG_INTEGER};var FIFTY_PERCENT={type:16/* PERCENTAGE_TOKEN */,number:50,flags:FLAG_INTEGER};var HUNDRED_PERCENT={type:16/* PERCENTAGE_TOKEN */,number:100,flags:FLAG_INTEGER};var getAbsoluteValueForTuple=function(tuple,width,height){var x=tuple[0],y=tuple[1];return [getAbsoluteValue(x,width),getAbsoluteValue(typeof y!=='undefined'?y:x,height)];};var getAbsoluteValue=function(token,parent){if(token.type===16/* PERCENTAGE_TOKEN */){return token.number/100*parent;}if(isDimensionToken(token)){switch(token.unit){case'rem':case'em':return 16*token.number;// TODO use correct font-size
    case'px':default:return token.number;}}return token.number;};var DEG='deg';var GRAD='grad';var RAD='rad';var TURN='turn';var angle={name:'angle',parse:function(_context,value){if(value.type===15/* DIMENSION_TOKEN */){switch(value.unit){case DEG:return Math.PI*value.number/180;case GRAD:return Math.PI/200*value.number;case RAD:return value.number;case TURN:return Math.PI*2*value.number;}}throw new Error("Unsupported angle type");}};var isAngle=function(value){if(value.type===15/* DIMENSION_TOKEN */){if(value.unit===DEG||value.unit===GRAD||value.unit===RAD||value.unit===TURN){return true;}}return false;};var parseNamedSide=function(tokens){var sideOrCorner=tokens.filter(isIdentToken).map(function(ident){return ident.value;}).join(' ');switch(sideOrCorner){case'to bottom right':case'to right bottom':case'left top':case'top left':return [ZERO_LENGTH,ZERO_LENGTH];case'to top':case'bottom':return deg(0);case'to bottom left':case'to left bottom':case'right top':case'top right':return [ZERO_LENGTH,HUNDRED_PERCENT];case'to right':case'left':return deg(90);case'to top left':case'to left top':case'right bottom':case'bottom right':return [HUNDRED_PERCENT,HUNDRED_PERCENT];case'to bottom':case'top':return deg(180);case'to top right':case'to right top':case'left bottom':case'bottom left':return [HUNDRED_PERCENT,ZERO_LENGTH];case'to left':case'right':return deg(270);}return 0;};var deg=function(deg){return Math.PI*deg/180;};var color$1={name:'color',parse:function(context,value){if(value.type===18/* FUNCTION */){var colorFunction=SUPPORTED_COLOR_FUNCTIONS[value.name];if(typeof colorFunction==='undefined'){throw new Error("Attempting to parse an unsupported color function \""+value.name+"\"");}return colorFunction(context,value.values);}if(value.type===5/* HASH_TOKEN */){if(value.value.length===3){var r=value.value.substring(0,1);var g=value.value.substring(1,2);var b=value.value.substring(2,3);return pack$1(parseInt(r+r,16),parseInt(g+g,16),parseInt(b+b,16),1);}if(value.value.length===4){var r=value.value.substring(0,1);var g=value.value.substring(1,2);var b=value.value.substring(2,3);var a=value.value.substring(3,4);return pack$1(parseInt(r+r,16),parseInt(g+g,16),parseInt(b+b,16),parseInt(a+a,16)/255);}if(value.value.length===6){var r=value.value.substring(0,2);var g=value.value.substring(2,4);var b=value.value.substring(4,6);return pack$1(parseInt(r,16),parseInt(g,16),parseInt(b,16),1);}if(value.value.length===8){var r=value.value.substring(0,2);var g=value.value.substring(2,4);var b=value.value.substring(4,6);var a=value.value.substring(6,8);return pack$1(parseInt(r,16),parseInt(g,16),parseInt(b,16),parseInt(a,16)/255);}}if(value.type===20/* IDENT_TOKEN */){var namedColor=COLORS[value.value.toUpperCase()];if(typeof namedColor!=='undefined'){return namedColor;}}return COLORS.TRANSPARENT;}};var isTransparent=function(color){return (0xff&color)===0;};var asString=function(color){var alpha=0xff&color;var blue=0xff&color>>8;var green=0xff&color>>16;var red=0xff&color>>24;return alpha<255?"rgba("+red+","+green+","+blue+","+alpha/255+")":"rgb("+red+","+green+","+blue+")";};var pack$1=function(r,g,b,a){return (r<<24|g<<16|b<<8|Math.round(a*255)<<0)>>>0;};var getTokenColorValue=function(token,i){if(token.type===17/* NUMBER_TOKEN */){return token.number;}if(token.type===16/* PERCENTAGE_TOKEN */){var max=i===3?1:255;return i===3?token.number/100*max:Math.round(token.number/100*max);}return 0;};var rgb=function(_context,args){var tokens=args.filter(nonFunctionArgSeparator);if(tokens.length===3){var _a=tokens.map(getTokenColorValue),r=_a[0],g=_a[1],b=_a[2];return pack$1(r,g,b,1);}if(tokens.length===4){var _b=tokens.map(getTokenColorValue),r=_b[0],g=_b[1],b=_b[2],a=_b[3];return pack$1(r,g,b,a);}return 0;};function hue2rgb(t1,t2,hue){if(hue<0){hue+=1;}if(hue>=1){hue-=1;}if(hue<1/6){return (t2-t1)*hue*6+t1;}else if(hue<1/2){return t2;}else if(hue<2/3){return (t2-t1)*6*(2/3-hue)+t1;}else {return t1;}}var hsl=function(context,args){var tokens=args.filter(nonFunctionArgSeparator);var hue=tokens[0],saturation=tokens[1],lightness=tokens[2],alpha=tokens[3];var h=(hue.type===17/* NUMBER_TOKEN */?deg(hue.number):angle.parse(context,hue))/(Math.PI*2);var s=isLengthPercentage(saturation)?saturation.number/100:0;var l=isLengthPercentage(lightness)?lightness.number/100:0;var a=typeof alpha!=='undefined'&&isLengthPercentage(alpha)?getAbsoluteValue(alpha,1):1;if(s===0){return pack$1(l*255,l*255,l*255,1);}var t2=l<=0.5?l*(s+1):l+s-l*s;var t1=l*2-t2;var r=hue2rgb(t1,t2,h+1/3);var g=hue2rgb(t1,t2,h);var b=hue2rgb(t1,t2,h-1/3);return pack$1(r*255,g*255,b*255,a);};var SUPPORTED_COLOR_FUNCTIONS={hsl:hsl,hsla:hsl,rgb:rgb,rgba:rgb};var parseColor=function(context,value){return color$1.parse(context,Parser.create(value).parseComponentValue());};var COLORS={ALICEBLUE:0xf0f8ffff,ANTIQUEWHITE:0xfaebd7ff,AQUA:0x00ffffff,AQUAMARINE:0x7fffd4ff,AZURE:0xf0ffffff,BEIGE:0xf5f5dcff,BISQUE:0xffe4c4ff,BLACK:0x000000ff,BLANCHEDALMOND:0xffebcdff,BLUE:0x0000ffff,BLUEVIOLET:0x8a2be2ff,BROWN:0xa52a2aff,BURLYWOOD:0xdeb887ff,CADETBLUE:0x5f9ea0ff,CHARTREUSE:0x7fff00ff,CHOCOLATE:0xd2691eff,CORAL:0xff7f50ff,CORNFLOWERBLUE:0x6495edff,CORNSILK:0xfff8dcff,CRIMSON:0xdc143cff,CYAN:0x00ffffff,DARKBLUE:0x00008bff,DARKCYAN:0x008b8bff,DARKGOLDENROD:0xb886bbff,DARKGRAY:0xa9a9a9ff,DARKGREEN:0x006400ff,DARKGREY:0xa9a9a9ff,DARKKHAKI:0xbdb76bff,DARKMAGENTA:0x8b008bff,DARKOLIVEGREEN:0x556b2fff,DARKORANGE:0xff8c00ff,DARKORCHID:0x9932ccff,DARKRED:0x8b0000ff,DARKSALMON:0xe9967aff,DARKSEAGREEN:0x8fbc8fff,DARKSLATEBLUE:0x483d8bff,DARKSLATEGRAY:0x2f4f4fff,DARKSLATEGREY:0x2f4f4fff,DARKTURQUOISE:0x00ced1ff,DARKVIOLET:0x9400d3ff,DEEPPINK:0xff1493ff,DEEPSKYBLUE:0x00bfffff,DIMGRAY:0x696969ff,DIMGREY:0x696969ff,DODGERBLUE:0x1e90ffff,FIREBRICK:0xb22222ff,FLORALWHITE:0xfffaf0ff,FORESTGREEN:0x228b22ff,FUCHSIA:0xff00ffff,GAINSBORO:0xdcdcdcff,GHOSTWHITE:0xf8f8ffff,GOLD:0xffd700ff,GOLDENROD:0xdaa520ff,GRAY:0x808080ff,GREEN:0x008000ff,GREENYELLOW:0xadff2fff,GREY:0x808080ff,HONEYDEW:0xf0fff0ff,HOTPINK:0xff69b4ff,INDIANRED:0xcd5c5cff,INDIGO:0x4b0082ff,IVORY:0xfffff0ff,KHAKI:0xf0e68cff,LAVENDER:0xe6e6faff,LAVENDERBLUSH:0xfff0f5ff,LAWNGREEN:0x7cfc00ff,LEMONCHIFFON:0xfffacdff,LIGHTBLUE:0xadd8e6ff,LIGHTCORAL:0xf08080ff,LIGHTCYAN:0xe0ffffff,LIGHTGOLDENRODYELLOW:0xfafad2ff,LIGHTGRAY:0xd3d3d3ff,LIGHTGREEN:0x90ee90ff,LIGHTGREY:0xd3d3d3ff,LIGHTPINK:0xffb6c1ff,LIGHTSALMON:0xffa07aff,LIGHTSEAGREEN:0x20b2aaff,LIGHTSKYBLUE:0x87cefaff,LIGHTSLATEGRAY:0x778899ff,LIGHTSLATEGREY:0x778899ff,LIGHTSTEELBLUE:0xb0c4deff,LIGHTYELLOW:0xffffe0ff,LIME:0x00ff00ff,LIMEGREEN:0x32cd32ff,LINEN:0xfaf0e6ff,MAGENTA:0xff00ffff,MAROON:0x800000ff,MEDIUMAQUAMARINE:0x66cdaaff,MEDIUMBLUE:0x0000cdff,MEDIUMORCHID:0xba55d3ff,MEDIUMPURPLE:0x9370dbff,MEDIUMSEAGREEN:0x3cb371ff,MEDIUMSLATEBLUE:0x7b68eeff,MEDIUMSPRINGGREEN:0x00fa9aff,MEDIUMTURQUOISE:0x48d1ccff,MEDIUMVIOLETRED:0xc71585ff,MIDNIGHTBLUE:0x191970ff,MINTCREAM:0xf5fffaff,MISTYROSE:0xffe4e1ff,MOCCASIN:0xffe4b5ff,NAVAJOWHITE:0xffdeadff,NAVY:0x000080ff,OLDLACE:0xfdf5e6ff,OLIVE:0x808000ff,OLIVEDRAB:0x6b8e23ff,ORANGE:0xffa500ff,ORANGERED:0xff4500ff,ORCHID:0xda70d6ff,PALEGOLDENROD:0xeee8aaff,PALEGREEN:0x98fb98ff,PALETURQUOISE:0xafeeeeff,PALEVIOLETRED:0xdb7093ff,PAPAYAWHIP:0xffefd5ff,PEACHPUFF:0xffdab9ff,PERU:0xcd853fff,PINK:0xffc0cbff,PLUM:0xdda0ddff,POWDERBLUE:0xb0e0e6ff,PURPLE:0x800080ff,REBECCAPURPLE:0x663399ff,RED:0xff0000ff,ROSYBROWN:0xbc8f8fff,ROYALBLUE:0x4169e1ff,SADDLEBROWN:0x8b4513ff,SALMON:0xfa8072ff,SANDYBROWN:0xf4a460ff,SEAGREEN:0x2e8b57ff,SEASHELL:0xfff5eeff,SIENNA:0xa0522dff,SILVER:0xc0c0c0ff,SKYBLUE:0x87ceebff,SLATEBLUE:0x6a5acdff,SLATEGRAY:0x708090ff,SLATEGREY:0x708090ff,SNOW:0xfffafaff,SPRINGGREEN:0x00ff7fff,STEELBLUE:0x4682b4ff,TAN:0xd2b48cff,TEAL:0x008080ff,THISTLE:0xd8bfd8ff,TOMATO:0xff6347ff,TRANSPARENT:0x00000000,TURQUOISE:0x40e0d0ff,VIOLET:0xee82eeff,WHEAT:0xf5deb3ff,WHITE:0xffffffff,WHITESMOKE:0xf5f5f5ff,YELLOW:0xffff00ff,YELLOWGREEN:0x9acd32ff};var backgroundClip={name:'background-clip',initialValue:'border-box',prefix:false,type:1/* LIST */,parse:function(_context,tokens){return tokens.map(function(token){if(isIdentToken(token)){switch(token.value){case'padding-box':return 1/* PADDING_BOX */;case'content-box':return 2/* CONTENT_BOX */;}}return 0/* BORDER_BOX */;});}};var backgroundColor={name:"background-color",initialValue:'transparent',prefix:false,type:3/* TYPE_VALUE */,format:'color'};var parseColorStop=function(context,args){var color=color$1.parse(context,args[0]);var stop=args[1];return stop&&isLengthPercentage(stop)?{color:color,stop:stop}:{color:color,stop:null};};var processColorStops=function(stops,lineLength){var first=stops[0];var last=stops[stops.length-1];if(first.stop===null){first.stop=ZERO_LENGTH;}if(last.stop===null){last.stop=HUNDRED_PERCENT;}var processStops=[];var previous=0;for(var i=0;i<stops.length;i++){var stop_1=stops[i].stop;if(stop_1!==null){var absoluteValue=getAbsoluteValue(stop_1,lineLength);if(absoluteValue>previous){processStops.push(absoluteValue);}else {processStops.push(previous);}previous=absoluteValue;}else {processStops.push(null);}}var gapBegin=null;for(var i=0;i<processStops.length;i++){var stop_2=processStops[i];if(stop_2===null){if(gapBegin===null){gapBegin=i;}}else if(gapBegin!==null){var gapLength=i-gapBegin;var beforeGap=processStops[gapBegin-1];var gapValue=(stop_2-beforeGap)/(gapLength+1);for(var g=1;g<=gapLength;g++){processStops[gapBegin+g-1]=gapValue*g;}gapBegin=null;}}return stops.map(function(_a,i){var color=_a.color;return {color:color,stop:Math.max(Math.min(1,processStops[i]/lineLength),0)};});};var getAngleFromCorner=function(corner,width,height){var centerX=width/2;var centerY=height/2;var x=getAbsoluteValue(corner[0],width)-centerX;var y=centerY-getAbsoluteValue(corner[1],height);return (Math.atan2(y,x)+Math.PI*2)%(Math.PI*2);};var calculateGradientDirection=function(angle,width,height){var radian=typeof angle==='number'?angle:getAngleFromCorner(angle,width,height);var lineLength=Math.abs(width*Math.sin(radian))+Math.abs(height*Math.cos(radian));var halfWidth=width/2;var halfHeight=height/2;var halfLineLength=lineLength/2;var yDiff=Math.sin(radian-Math.PI/2)*halfLineLength;var xDiff=Math.cos(radian-Math.PI/2)*halfLineLength;return [lineLength,halfWidth-xDiff,halfWidth+xDiff,halfHeight-yDiff,halfHeight+yDiff];};var distance=function(a,b){return Math.sqrt(a*a+b*b);};var findCorner=function(width,height,x,y,closest){var corners=[[0,0],[0,height],[width,0],[width,height]];return corners.reduce(function(stat,corner){var cx=corner[0],cy=corner[1];var d=distance(x-cx,y-cy);if(closest?d<stat.optimumDistance:d>stat.optimumDistance){return {optimumCorner:corner,optimumDistance:d};}return stat;},{optimumDistance:closest?Infinity:-Infinity,optimumCorner:null}).optimumCorner;};var calculateRadius=function(gradient,x,y,width,height){var rx=0;var ry=0;switch(gradient.size){case 0/* CLOSEST_SIDE */:// The ending shape is sized so that that it exactly meets the side of the gradient box closest to the gradient’s center.
    // If the shape is an ellipse, it exactly meets the closest side in each dimension.
    if(gradient.shape===0/* CIRCLE */){rx=ry=Math.min(Math.abs(x),Math.abs(x-width),Math.abs(y),Math.abs(y-height));}else if(gradient.shape===1/* ELLIPSE */){rx=Math.min(Math.abs(x),Math.abs(x-width));ry=Math.min(Math.abs(y),Math.abs(y-height));}break;case 2/* CLOSEST_CORNER */:// The ending shape is sized so that that it passes through the corner of the gradient box closest to the gradient’s center.
    // If the shape is an ellipse, the ending shape is given the same aspect-ratio it would have if closest-side were specified.
    if(gradient.shape===0/* CIRCLE */){rx=ry=Math.min(distance(x,y),distance(x,y-height),distance(x-width,y),distance(x-width,y-height));}else if(gradient.shape===1/* ELLIPSE */){// Compute the ratio ry/rx (which is to be the same as for "closest-side")
    var c=Math.min(Math.abs(y),Math.abs(y-height))/Math.min(Math.abs(x),Math.abs(x-width));var _a=findCorner(width,height,x,y,true),cx=_a[0],cy=_a[1];rx=distance(cx-x,(cy-y)/c);ry=c*rx;}break;case 1/* FARTHEST_SIDE */:// Same as closest-side, except the ending shape is sized based on the farthest side(s)
    if(gradient.shape===0/* CIRCLE */){rx=ry=Math.max(Math.abs(x),Math.abs(x-width),Math.abs(y),Math.abs(y-height));}else if(gradient.shape===1/* ELLIPSE */){rx=Math.max(Math.abs(x),Math.abs(x-width));ry=Math.max(Math.abs(y),Math.abs(y-height));}break;case 3/* FARTHEST_CORNER */:// Same as closest-corner, except the ending shape is sized based on the farthest corner.
    // If the shape is an ellipse, the ending shape is given the same aspect ratio it would have if farthest-side were specified.
    if(gradient.shape===0/* CIRCLE */){rx=ry=Math.max(distance(x,y),distance(x,y-height),distance(x-width,y),distance(x-width,y-height));}else if(gradient.shape===1/* ELLIPSE */){// Compute the ratio ry/rx (which is to be the same as for "farthest-side")
    var c=Math.max(Math.abs(y),Math.abs(y-height))/Math.max(Math.abs(x),Math.abs(x-width));var _b=findCorner(width,height,x,y,false),cx=_b[0],cy=_b[1];rx=distance(cx-x,(cy-y)/c);ry=c*rx;}break;}if(Array.isArray(gradient.size)){rx=getAbsoluteValue(gradient.size[0],width);ry=gradient.size.length===2?getAbsoluteValue(gradient.size[1],height):rx;}return [rx,ry];};var linearGradient=function(context,tokens){var angle$1=deg(180);var stops=[];parseFunctionArgs(tokens).forEach(function(arg,i){if(i===0){var firstToken=arg[0];if(firstToken.type===20/* IDENT_TOKEN */&&firstToken.value==='to'){angle$1=parseNamedSide(arg);return;}else if(isAngle(firstToken)){angle$1=angle.parse(context,firstToken);return;}}var colorStop=parseColorStop(context,arg);stops.push(colorStop);});return {angle:angle$1,stops:stops,type:1/* LINEAR_GRADIENT */};};var prefixLinearGradient=function(context,tokens){var angle$1=deg(180);var stops=[];parseFunctionArgs(tokens).forEach(function(arg,i){if(i===0){var firstToken=arg[0];if(firstToken.type===20/* IDENT_TOKEN */&&['top','left','right','bottom'].indexOf(firstToken.value)!==-1){angle$1=parseNamedSide(arg);return;}else if(isAngle(firstToken)){angle$1=(angle.parse(context,firstToken)+deg(270))%deg(360);return;}}var colorStop=parseColorStop(context,arg);stops.push(colorStop);});return {angle:angle$1,stops:stops,type:1/* LINEAR_GRADIENT */};};var webkitGradient=function(context,tokens){var angle=deg(180);var stops=[];var type=1/* LINEAR_GRADIENT */;var shape=0/* CIRCLE */;var size=3/* FARTHEST_CORNER */;var position=[];parseFunctionArgs(tokens).forEach(function(arg,i){var firstToken=arg[0];if(i===0){if(isIdentToken(firstToken)&&firstToken.value==='linear'){type=1/* LINEAR_GRADIENT */;return;}else if(isIdentToken(firstToken)&&firstToken.value==='radial'){type=2/* RADIAL_GRADIENT */;return;}}if(firstToken.type===18/* FUNCTION */){if(firstToken.name==='from'){var color=color$1.parse(context,firstToken.values[0]);stops.push({stop:ZERO_LENGTH,color:color});}else if(firstToken.name==='to'){var color=color$1.parse(context,firstToken.values[0]);stops.push({stop:HUNDRED_PERCENT,color:color});}else if(firstToken.name==='color-stop'){var values=firstToken.values.filter(nonFunctionArgSeparator);if(values.length===2){var color=color$1.parse(context,values[1]);var stop_1=values[0];if(isNumberToken(stop_1)){stops.push({stop:{type:16/* PERCENTAGE_TOKEN */,number:stop_1.number*100,flags:stop_1.flags},color:color});}}}}});return type===1/* LINEAR_GRADIENT */?{angle:(angle+deg(180))%deg(360),stops:stops,type:type}:{size:size,shape:shape,stops:stops,position:position,type:type};};var CLOSEST_SIDE='closest-side';var FARTHEST_SIDE='farthest-side';var CLOSEST_CORNER='closest-corner';var FARTHEST_CORNER='farthest-corner';var CIRCLE='circle';var ELLIPSE='ellipse';var COVER='cover';var CONTAIN='contain';var radialGradient=function(context,tokens){var shape=0/* CIRCLE */;var size=3/* FARTHEST_CORNER */;var stops=[];var position=[];parseFunctionArgs(tokens).forEach(function(arg,i){var isColorStop=true;if(i===0){var isAtPosition_1=false;isColorStop=arg.reduce(function(acc,token){if(isAtPosition_1){if(isIdentToken(token)){switch(token.value){case'center':position.push(FIFTY_PERCENT);return acc;case'top':case'left':position.push(ZERO_LENGTH);return acc;case'right':case'bottom':position.push(HUNDRED_PERCENT);return acc;}}else if(isLengthPercentage(token)||isLength(token)){position.push(token);}}else if(isIdentToken(token)){switch(token.value){case CIRCLE:shape=0/* CIRCLE */;return false;case ELLIPSE:shape=1/* ELLIPSE */;return false;case'at':isAtPosition_1=true;return false;case CLOSEST_SIDE:size=0/* CLOSEST_SIDE */;return false;case COVER:case FARTHEST_SIDE:size=1/* FARTHEST_SIDE */;return false;case CONTAIN:case CLOSEST_CORNER:size=2/* CLOSEST_CORNER */;return false;case FARTHEST_CORNER:size=3/* FARTHEST_CORNER */;return false;}}else if(isLength(token)||isLengthPercentage(token)){if(!Array.isArray(size)){size=[];}size.push(token);return false;}return acc;},isColorStop);}if(isColorStop){var colorStop=parseColorStop(context,arg);stops.push(colorStop);}});return {size:size,shape:shape,stops:stops,position:position,type:2/* RADIAL_GRADIENT */};};var prefixRadialGradient=function(context,tokens){var shape=0/* CIRCLE */;var size=3/* FARTHEST_CORNER */;var stops=[];var position=[];parseFunctionArgs(tokens).forEach(function(arg,i){var isColorStop=true;if(i===0){isColorStop=arg.reduce(function(acc,token){if(isIdentToken(token)){switch(token.value){case'center':position.push(FIFTY_PERCENT);return false;case'top':case'left':position.push(ZERO_LENGTH);return false;case'right':case'bottom':position.push(HUNDRED_PERCENT);return false;}}else if(isLengthPercentage(token)||isLength(token)){position.push(token);return false;}return acc;},isColorStop);}else if(i===1){isColorStop=arg.reduce(function(acc,token){if(isIdentToken(token)){switch(token.value){case CIRCLE:shape=0/* CIRCLE */;return false;case ELLIPSE:shape=1/* ELLIPSE */;return false;case CONTAIN:case CLOSEST_SIDE:size=0/* CLOSEST_SIDE */;return false;case FARTHEST_SIDE:size=1/* FARTHEST_SIDE */;return false;case CLOSEST_CORNER:size=2/* CLOSEST_CORNER */;return false;case COVER:case FARTHEST_CORNER:size=3/* FARTHEST_CORNER */;return false;}}else if(isLength(token)||isLengthPercentage(token)){if(!Array.isArray(size)){size=[];}size.push(token);return false;}return acc;},isColorStop);}if(isColorStop){var colorStop=parseColorStop(context,arg);stops.push(colorStop);}});return {size:size,shape:shape,stops:stops,position:position,type:2/* RADIAL_GRADIENT */};};var isLinearGradient=function(background){return background.type===1/* LINEAR_GRADIENT */;};var isRadialGradient=function(background){return background.type===2/* RADIAL_GRADIENT */;};var image={name:'image',parse:function(context,value){if(value.type===22/* URL_TOKEN */){var image_1={url:value.value,type:0/* URL */};context.cache.addImage(value.value);return image_1;}if(value.type===18/* FUNCTION */){var imageFunction=SUPPORTED_IMAGE_FUNCTIONS[value.name];if(typeof imageFunction==='undefined'){throw new Error("Attempting to parse an unsupported image function \""+value.name+"\"");}return imageFunction(context,value.values);}throw new Error("Unsupported image type "+value.type);}};function isSupportedImage(value){return !(value.type===20/* IDENT_TOKEN */&&value.value==='none')&&(value.type!==18/* FUNCTION */||!!SUPPORTED_IMAGE_FUNCTIONS[value.name]);}var SUPPORTED_IMAGE_FUNCTIONS={'linear-gradient':linearGradient,'-moz-linear-gradient':prefixLinearGradient,'-ms-linear-gradient':prefixLinearGradient,'-o-linear-gradient':prefixLinearGradient,'-webkit-linear-gradient':prefixLinearGradient,'radial-gradient':radialGradient,'-moz-radial-gradient':prefixRadialGradient,'-ms-radial-gradient':prefixRadialGradient,'-o-radial-gradient':prefixRadialGradient,'-webkit-radial-gradient':prefixRadialGradient,'-webkit-gradient':webkitGradient};var backgroundImage={name:'background-image',initialValue:'none',type:1/* LIST */,prefix:false,parse:function(context,tokens){if(tokens.length===0){return [];}var first=tokens[0];if(first.type===20/* IDENT_TOKEN */&&first.value==='none'){return [];}return tokens.filter(function(value){return nonFunctionArgSeparator(value)&&isSupportedImage(value);}).map(function(value){return image.parse(context,value);});}};var backgroundOrigin={name:'background-origin',initialValue:'border-box',prefix:false,type:1/* LIST */,parse:function(_context,tokens){return tokens.map(function(token){if(isIdentToken(token)){switch(token.value){case'padding-box':return 1/* PADDING_BOX */;case'content-box':return 2/* CONTENT_BOX */;}}return 0/* BORDER_BOX */;});}};var backgroundPosition={name:'background-position',initialValue:'0% 0%',type:1/* LIST */,prefix:false,parse:function(_context,tokens){return parseFunctionArgs(tokens).map(function(values){return values.filter(isLengthPercentage);}).map(parseLengthPercentageTuple);}};var backgroundRepeat={name:'background-repeat',initialValue:'repeat',prefix:false,type:1/* LIST */,parse:function(_context,tokens){return parseFunctionArgs(tokens).map(function(values){return values.filter(isIdentToken).map(function(token){return token.value;}).join(' ');}).map(parseBackgroundRepeat);}};var parseBackgroundRepeat=function(value){switch(value){case'no-repeat':return 1/* NO_REPEAT */;case'repeat-x':case'repeat no-repeat':return 2/* REPEAT_X */;case'repeat-y':case'no-repeat repeat':return 3/* REPEAT_Y */;case'repeat':default:return 0/* REPEAT */;}};var BACKGROUND_SIZE;(function(BACKGROUND_SIZE){BACKGROUND_SIZE["AUTO"]="auto";BACKGROUND_SIZE["CONTAIN"]="contain";BACKGROUND_SIZE["COVER"]="cover";})(BACKGROUND_SIZE||(BACKGROUND_SIZE={}));var backgroundSize={name:'background-size',initialValue:'0',prefix:false,type:1/* LIST */,parse:function(_context,tokens){return parseFunctionArgs(tokens).map(function(values){return values.filter(isBackgroundSizeInfoToken);});}};var isBackgroundSizeInfoToken=function(value){return isIdentToken(value)||isLengthPercentage(value);};var borderColorForSide=function(side){return {name:"border-"+side+"-color",initialValue:'transparent',prefix:false,type:3/* TYPE_VALUE */,format:'color'};};var borderTopColor=borderColorForSide('top');var borderRightColor=borderColorForSide('right');var borderBottomColor=borderColorForSide('bottom');var borderLeftColor=borderColorForSide('left');var borderRadiusForSide=function(side){return {name:"border-radius-"+side,initialValue:'0 0',prefix:false,type:1/* LIST */,parse:function(_context,tokens){return parseLengthPercentageTuple(tokens.filter(isLengthPercentage));}};};var borderTopLeftRadius=borderRadiusForSide('top-left');var borderTopRightRadius=borderRadiusForSide('top-right');var borderBottomRightRadius=borderRadiusForSide('bottom-right');var borderBottomLeftRadius=borderRadiusForSide('bottom-left');var borderStyleForSide=function(side){return {name:"border-"+side+"-style",initialValue:'solid',prefix:false,type:2/* IDENT_VALUE */,parse:function(_context,style){switch(style){case'none':return 0/* NONE */;case'dashed':return 2/* DASHED */;case'dotted':return 3/* DOTTED */;case'double':return 4/* DOUBLE */;}return 1/* SOLID */;}};};var borderTopStyle=borderStyleForSide('top');var borderRightStyle=borderStyleForSide('right');var borderBottomStyle=borderStyleForSide('bottom');var borderLeftStyle=borderStyleForSide('left');var borderWidthForSide=function(side){return {name:"border-"+side+"-width",initialValue:'0',type:0/* VALUE */,prefix:false,parse:function(_context,token){if(isDimensionToken(token)){return token.number;}return 0;}};};var borderTopWidth=borderWidthForSide('top');var borderRightWidth=borderWidthForSide('right');var borderBottomWidth=borderWidthForSide('bottom');var borderLeftWidth=borderWidthForSide('left');var color={name:"color",initialValue:'transparent',prefix:false,type:3/* TYPE_VALUE */,format:'color'};var direction={name:'direction',initialValue:'ltr',prefix:false,type:2/* IDENT_VALUE */,parse:function(_context,direction){switch(direction){case'rtl':return 1/* RTL */;case'ltr':default:return 0/* LTR */;}}};var display={name:'display',initialValue:'inline-block',prefix:false,type:1/* LIST */,parse:function(_context,tokens){return tokens.filter(isIdentToken).reduce(function(bit,token){return bit|parseDisplayValue(token.value);},0/* NONE */);}};var parseDisplayValue=function(display){switch(display){case'block':case'-webkit-box':return 2/* BLOCK */;case'inline':return 4/* INLINE */;case'run-in':return 8/* RUN_IN */;case'flow':return 16/* FLOW */;case'flow-root':return 32/* FLOW_ROOT */;case'table':return 64/* TABLE */;case'flex':case'-webkit-flex':return 128/* FLEX */;case'grid':case'-ms-grid':return 256/* GRID */;case'ruby':return 512/* RUBY */;case'subgrid':return 1024/* SUBGRID */;case'list-item':return 2048/* LIST_ITEM */;case'table-row-group':return 4096/* TABLE_ROW_GROUP */;case'table-header-group':return 8192/* TABLE_HEADER_GROUP */;case'table-footer-group':return 16384/* TABLE_FOOTER_GROUP */;case'table-row':return 32768/* TABLE_ROW */;case'table-cell':return 65536/* TABLE_CELL */;case'table-column-group':return 131072/* TABLE_COLUMN_GROUP */;case'table-column':return 262144/* TABLE_COLUMN */;case'table-caption':return 524288/* TABLE_CAPTION */;case'ruby-base':return 1048576/* RUBY_BASE */;case'ruby-text':return 2097152/* RUBY_TEXT */;case'ruby-base-container':return 4194304/* RUBY_BASE_CONTAINER */;case'ruby-text-container':return 8388608/* RUBY_TEXT_CONTAINER */;case'contents':return 16777216/* CONTENTS */;case'inline-block':return 33554432/* INLINE_BLOCK */;case'inline-list-item':return 67108864/* INLINE_LIST_ITEM */;case'inline-table':return 134217728/* INLINE_TABLE */;case'inline-flex':return 268435456/* INLINE_FLEX */;case'inline-grid':return 536870912/* INLINE_GRID */;}return 0/* NONE */;};var float={name:'float',initialValue:'none',prefix:false,type:2/* IDENT_VALUE */,parse:function(_context,float){switch(float){case'left':return 1/* LEFT */;case'right':return 2/* RIGHT */;case'inline-start':return 3/* INLINE_START */;case'inline-end':return 4/* INLINE_END */;}return 0/* NONE */;}};var letterSpacing={name:'letter-spacing',initialValue:'0',prefix:false,type:0/* VALUE */,parse:function(_context,token){if(token.type===20/* IDENT_TOKEN */&&token.value==='normal'){return 0;}if(token.type===17/* NUMBER_TOKEN */){return token.number;}if(token.type===15/* DIMENSION_TOKEN */){return token.number;}return 0;}};var LINE_BREAK;(function(LINE_BREAK){LINE_BREAK["NORMAL"]="normal";LINE_BREAK["STRICT"]="strict";})(LINE_BREAK||(LINE_BREAK={}));var lineBreak={name:'line-break',initialValue:'normal',prefix:false,type:2/* IDENT_VALUE */,parse:function(_context,lineBreak){switch(lineBreak){case'strict':return LINE_BREAK.STRICT;case'normal':default:return LINE_BREAK.NORMAL;}}};var lineHeight={name:'line-height',initialValue:'normal',prefix:false,type:4/* TOKEN_VALUE */};var computeLineHeight=function(token,fontSize){if(isIdentToken(token)&&token.value==='normal'){return 1.2*fontSize;}else if(token.type===17/* NUMBER_TOKEN */){return fontSize*token.number;}else if(isLengthPercentage(token)){return getAbsoluteValue(token,fontSize);}return fontSize;};var listStyleImage={name:'list-style-image',initialValue:'none',type:0/* VALUE */,prefix:false,parse:function(context,token){if(token.type===20/* IDENT_TOKEN */&&token.value==='none'){return null;}return image.parse(context,token);}};var listStylePosition={name:'list-style-position',initialValue:'outside',prefix:false,type:2/* IDENT_VALUE */,parse:function(_context,position){switch(position){case'inside':return 0/* INSIDE */;case'outside':default:return 1/* OUTSIDE */;}}};var listStyleType={name:'list-style-type',initialValue:'none',prefix:false,type:2/* IDENT_VALUE */,parse:function(_context,type){switch(type){case'disc':return 0/* DISC */;case'circle':return 1/* CIRCLE */;case'square':return 2/* SQUARE */;case'decimal':return 3/* DECIMAL */;case'cjk-decimal':return 4/* CJK_DECIMAL */;case'decimal-leading-zero':return 5/* DECIMAL_LEADING_ZERO */;case'lower-roman':return 6/* LOWER_ROMAN */;case'upper-roman':return 7/* UPPER_ROMAN */;case'lower-greek':return 8/* LOWER_GREEK */;case'lower-alpha':return 9/* LOWER_ALPHA */;case'upper-alpha':return 10/* UPPER_ALPHA */;case'arabic-indic':return 11/* ARABIC_INDIC */;case'armenian':return 12/* ARMENIAN */;case'bengali':return 13/* BENGALI */;case'cambodian':return 14/* CAMBODIAN */;case'cjk-earthly-branch':return 15/* CJK_EARTHLY_BRANCH */;case'cjk-heavenly-stem':return 16/* CJK_HEAVENLY_STEM */;case'cjk-ideographic':return 17/* CJK_IDEOGRAPHIC */;case'devanagari':return 18/* DEVANAGARI */;case'ethiopic-numeric':return 19/* ETHIOPIC_NUMERIC */;case'georgian':return 20/* GEORGIAN */;case'gujarati':return 21/* GUJARATI */;case'gurmukhi':return 22/* GURMUKHI */;case'hebrew':return 22/* HEBREW */;case'hiragana':return 23/* HIRAGANA */;case'hiragana-iroha':return 24/* HIRAGANA_IROHA */;case'japanese-formal':return 25/* JAPANESE_FORMAL */;case'japanese-informal':return 26/* JAPANESE_INFORMAL */;case'kannada':return 27/* KANNADA */;case'katakana':return 28/* KATAKANA */;case'katakana-iroha':return 29/* KATAKANA_IROHA */;case'khmer':return 30/* KHMER */;case'korean-hangul-formal':return 31/* KOREAN_HANGUL_FORMAL */;case'korean-hanja-formal':return 32/* KOREAN_HANJA_FORMAL */;case'korean-hanja-informal':return 33/* KOREAN_HANJA_INFORMAL */;case'lao':return 34/* LAO */;case'lower-armenian':return 35/* LOWER_ARMENIAN */;case'malayalam':return 36/* MALAYALAM */;case'mongolian':return 37/* MONGOLIAN */;case'myanmar':return 38/* MYANMAR */;case'oriya':return 39/* ORIYA */;case'persian':return 40/* PERSIAN */;case'simp-chinese-formal':return 41/* SIMP_CHINESE_FORMAL */;case'simp-chinese-informal':return 42/* SIMP_CHINESE_INFORMAL */;case'tamil':return 43/* TAMIL */;case'telugu':return 44/* TELUGU */;case'thai':return 45/* THAI */;case'tibetan':return 46/* TIBETAN */;case'trad-chinese-formal':return 47/* TRAD_CHINESE_FORMAL */;case'trad-chinese-informal':return 48/* TRAD_CHINESE_INFORMAL */;case'upper-armenian':return 49/* UPPER_ARMENIAN */;case'disclosure-open':return 50/* DISCLOSURE_OPEN */;case'disclosure-closed':return 51/* DISCLOSURE_CLOSED */;case'none':default:return -1/* NONE */;}}};var marginForSide=function(side){return {name:"margin-"+side,initialValue:'0',prefix:false,type:4/* TOKEN_VALUE */};};var marginTop=marginForSide('top');var marginRight=marginForSide('right');var marginBottom=marginForSide('bottom');var marginLeft=marginForSide('left');var overflow={name:'overflow',initialValue:'visible',prefix:false,type:1/* LIST */,parse:function(_context,tokens){return tokens.filter(isIdentToken).map(function(overflow){switch(overflow.value){case'hidden':return 1/* HIDDEN */;case'scroll':return 2/* SCROLL */;case'clip':return 3/* CLIP */;case'auto':return 4/* AUTO */;case'visible':default:return 0/* VISIBLE */;}});}};var overflowWrap={name:'overflow-wrap',initialValue:'normal',prefix:false,type:2/* IDENT_VALUE */,parse:function(_context,overflow){switch(overflow){case'break-word':return "break-word"/* BREAK_WORD */;case'normal':default:return "normal"/* NORMAL */;}}};var paddingForSide=function(side){return {name:"padding-"+side,initialValue:'0',prefix:false,type:3/* TYPE_VALUE */,format:'length-percentage'};};var paddingTop=paddingForSide('top');var paddingRight=paddingForSide('right');var paddingBottom=paddingForSide('bottom');var paddingLeft=paddingForSide('left');var textAlign={name:'text-align',initialValue:'left',prefix:false,type:2/* IDENT_VALUE */,parse:function(_context,textAlign){switch(textAlign){case'right':return 2/* RIGHT */;case'center':case'justify':return 1/* CENTER */;case'left':default:return 0/* LEFT */;}}};var position={name:'position',initialValue:'static',prefix:false,type:2/* IDENT_VALUE */,parse:function(_context,position){switch(position){case'relative':return 1/* RELATIVE */;case'absolute':return 2/* ABSOLUTE */;case'fixed':return 3/* FIXED */;case'sticky':return 4/* STICKY */;}return 0/* STATIC */;}};var textShadow={name:'text-shadow',initialValue:'none',type:1/* LIST */,prefix:false,parse:function(context,tokens){if(tokens.length===1&&isIdentWithValue(tokens[0],'none')){return [];}return parseFunctionArgs(tokens).map(function(values){var shadow={color:COLORS.TRANSPARENT,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH};var c=0;for(var i=0;i<values.length;i++){var token=values[i];if(isLength(token)){if(c===0){shadow.offsetX=token;}else if(c===1){shadow.offsetY=token;}else {shadow.blur=token;}c++;}else {shadow.color=color$1.parse(context,token);}}return shadow;});}};var textTransform={name:'text-transform',initialValue:'none',prefix:false,type:2/* IDENT_VALUE */,parse:function(_context,textTransform){switch(textTransform){case'uppercase':return 2/* UPPERCASE */;case'lowercase':return 1/* LOWERCASE */;case'capitalize':return 3/* CAPITALIZE */;}return 0/* NONE */;}};var transform$1={name:'transform',initialValue:'none',prefix:true,type:0/* VALUE */,parse:function(_context,token){if(token.type===20/* IDENT_TOKEN */&&token.value==='none'){return null;}if(token.type===18/* FUNCTION */){var transformFunction=SUPPORTED_TRANSFORM_FUNCTIONS[token.name];if(typeof transformFunction==='undefined'){throw new Error("Attempting to parse an unsupported transform function \""+token.name+"\"");}return transformFunction(token.values);}return null;}};var matrix=function(args){var values=args.filter(function(arg){return arg.type===17/* NUMBER_TOKEN */;}).map(function(arg){return arg.number;});return values.length===6?values:null;};// doesn't support 3D transforms at the moment
    var matrix3d=function(args){var values=args.filter(function(arg){return arg.type===17/* NUMBER_TOKEN */;}).map(function(arg){return arg.number;});var a1=values[0],b1=values[1];var a2=values[4],b2=values[5];var a4=values[12],b4=values[13];return values.length===16?[a1,b1,a2,b2,a4,b4]:null;};var SUPPORTED_TRANSFORM_FUNCTIONS={matrix:matrix,matrix3d:matrix3d};var DEFAULT_VALUE={type:16/* PERCENTAGE_TOKEN */,number:50,flags:FLAG_INTEGER};var DEFAULT=[DEFAULT_VALUE,DEFAULT_VALUE];var transformOrigin={name:'transform-origin',initialValue:'50% 50%',prefix:true,type:1/* LIST */,parse:function(_context,tokens){var origins=tokens.filter(isLengthPercentage);if(origins.length!==2){return DEFAULT;}return [origins[0],origins[1]];}};var visibility={name:'visible',initialValue:'none',prefix:false,type:2/* IDENT_VALUE */,parse:function(_context,visibility){switch(visibility){case'hidden':return 1/* HIDDEN */;case'collapse':return 2/* COLLAPSE */;case'visible':default:return 0/* VISIBLE */;}}};var WORD_BREAK;(function(WORD_BREAK){WORD_BREAK["NORMAL"]="normal";WORD_BREAK["BREAK_ALL"]="break-all";WORD_BREAK["KEEP_ALL"]="keep-all";})(WORD_BREAK||(WORD_BREAK={}));var wordBreak={name:'word-break',initialValue:'normal',prefix:false,type:2/* IDENT_VALUE */,parse:function(_context,wordBreak){switch(wordBreak){case'break-all':return WORD_BREAK.BREAK_ALL;case'keep-all':return WORD_BREAK.KEEP_ALL;case'normal':default:return WORD_BREAK.NORMAL;}}};var zIndex={name:'z-index',initialValue:'auto',prefix:false,type:0/* VALUE */,parse:function(_context,token){if(token.type===20/* IDENT_TOKEN */){return {auto:true,order:0};}if(isNumberToken(token)){return {auto:false,order:token.number};}throw new Error("Invalid z-index number parsed");}};var time={name:'time',parse:function(_context,value){if(value.type===15/* DIMENSION_TOKEN */){switch(value.unit.toLowerCase()){case's':return 1000*value.number;case'ms':return value.number;}}throw new Error("Unsupported time type");}};var opacity={name:'opacity',initialValue:'1',type:0/* VALUE */,prefix:false,parse:function(_context,token){if(isNumberToken(token)){return token.number;}return 1;}};var textDecorationColor={name:"text-decoration-color",initialValue:'transparent',prefix:false,type:3/* TYPE_VALUE */,format:'color'};var textDecorationLine={name:'text-decoration-line',initialValue:'none',prefix:false,type:1/* LIST */,parse:function(_context,tokens){return tokens.filter(isIdentToken).map(function(token){switch(token.value){case'underline':return 1/* UNDERLINE */;case'overline':return 2/* OVERLINE */;case'line-through':return 3/* LINE_THROUGH */;case'none':return 4/* BLINK */;}return 0/* NONE */;}).filter(function(line){return line!==0/* NONE */;});}};var fontFamily={name:"font-family",initialValue:'',prefix:false,type:1/* LIST */,parse:function(_context,tokens){var accumulator=[];var results=[];tokens.forEach(function(token){switch(token.type){case 20/* IDENT_TOKEN */:case 0/* STRING_TOKEN */:accumulator.push(token.value);break;case 17/* NUMBER_TOKEN */:accumulator.push(token.number.toString());break;case 4/* COMMA_TOKEN */:results.push(accumulator.join(' '));accumulator.length=0;break;}});if(accumulator.length){results.push(accumulator.join(' '));}return results.map(function(result){return result.indexOf(' ')===-1?result:"'"+result+"'";});}};var fontSize={name:"font-size",initialValue:'0',prefix:false,type:3/* TYPE_VALUE */,format:'length'};var fontWeight={name:'font-weight',initialValue:'normal',type:0/* VALUE */,prefix:false,parse:function(_context,token){if(isNumberToken(token)){return token.number;}if(isIdentToken(token)){switch(token.value){case'bold':return 700;case'normal':default:return 400;}}return 400;}};var fontVariant={name:'font-variant',initialValue:'none',type:1/* LIST */,prefix:false,parse:function(_context,tokens){return tokens.filter(isIdentToken).map(function(token){return token.value;});}};var fontStyle={name:'font-style',initialValue:'normal',prefix:false,type:2/* IDENT_VALUE */,parse:function(_context,overflow){switch(overflow){case'oblique':return "oblique"/* OBLIQUE */;case'italic':return "italic"/* ITALIC */;case'normal':default:return "normal"/* NORMAL */;}}};var contains=function(bit,value){return (bit&value)!==0;};var content={name:'content',initialValue:'none',type:1/* LIST */,prefix:false,parse:function(_context,tokens){if(tokens.length===0){return [];}var first=tokens[0];if(first.type===20/* IDENT_TOKEN */&&first.value==='none'){return [];}return tokens;}};var counterIncrement={name:'counter-increment',initialValue:'none',prefix:true,type:1/* LIST */,parse:function(_context,tokens){if(tokens.length===0){return null;}var first=tokens[0];if(first.type===20/* IDENT_TOKEN */&&first.value==='none'){return null;}var increments=[];var filtered=tokens.filter(nonWhiteSpace);for(var i=0;i<filtered.length;i++){var counter=filtered[i];var next=filtered[i+1];if(counter.type===20/* IDENT_TOKEN */){var increment=next&&isNumberToken(next)?next.number:1;increments.push({counter:counter.value,increment:increment});}}return increments;}};var counterReset={name:'counter-reset',initialValue:'none',prefix:true,type:1/* LIST */,parse:function(_context,tokens){if(tokens.length===0){return [];}var resets=[];var filtered=tokens.filter(nonWhiteSpace);for(var i=0;i<filtered.length;i++){var counter=filtered[i];var next=filtered[i+1];if(isIdentToken(counter)&&counter.value!=='none'){var reset=next&&isNumberToken(next)?next.number:0;resets.push({counter:counter.value,reset:reset});}}return resets;}};var duration={name:'duration',initialValue:'0s',prefix:false,type:1/* LIST */,parse:function(context,tokens){return tokens.filter(isDimensionToken).map(function(token){return time.parse(context,token);});}};var quotes={name:'quotes',initialValue:'none',prefix:true,type:1/* LIST */,parse:function(_context,tokens){if(tokens.length===0){return null;}var first=tokens[0];if(first.type===20/* IDENT_TOKEN */&&first.value==='none'){return null;}var quotes=[];var filtered=tokens.filter(isStringToken);if(filtered.length%2!==0){return null;}for(var i=0;i<filtered.length;i+=2){var open_1=filtered[i].value;var close_1=filtered[i+1].value;quotes.push({open:open_1,close:close_1});}return quotes;}};var getQuote=function(quotes,depth,open){if(!quotes){return '';}var quote=quotes[Math.min(depth,quotes.length-1)];if(!quote){return '';}return open?quote.open:quote.close;};var boxShadow={name:'box-shadow',initialValue:'none',type:1/* LIST */,prefix:false,parse:function(context,tokens){if(tokens.length===1&&isIdentWithValue(tokens[0],'none')){return [];}return parseFunctionArgs(tokens).map(function(values){var shadow={color:0x000000ff,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH,spread:ZERO_LENGTH,inset:false};var c=0;for(var i=0;i<values.length;i++){var token=values[i];if(isIdentWithValue(token,'inset')){shadow.inset=true;}else if(isLength(token)){if(c===0){shadow.offsetX=token;}else if(c===1){shadow.offsetY=token;}else if(c===2){shadow.blur=token;}else {shadow.spread=token;}c++;}else {shadow.color=color$1.parse(context,token);}}return shadow;});}};var paintOrder={name:'paint-order',initialValue:'normal',prefix:false,type:1/* LIST */,parse:function(_context,tokens){var DEFAULT_VALUE=[0/* FILL */,1/* STROKE */,2/* MARKERS */];var layers=[];tokens.filter(isIdentToken).forEach(function(token){switch(token.value){case'stroke':layers.push(1/* STROKE */);break;case'fill':layers.push(0/* FILL */);break;case'markers':layers.push(2/* MARKERS */);break;}});DEFAULT_VALUE.forEach(function(value){if(layers.indexOf(value)===-1){layers.push(value);}});return layers;}};var webkitTextStrokeColor={name:"-webkit-text-stroke-color",initialValue:'currentcolor',prefix:false,type:3/* TYPE_VALUE */,format:'color'};var webkitTextStrokeWidth={name:"-webkit-text-stroke-width",initialValue:'0',type:0/* VALUE */,prefix:false,parse:function(_context,token){if(isDimensionToken(token)){return token.number;}return 0;}};var CSSParsedDeclaration=/** @class */function(){function CSSParsedDeclaration(context,declaration){var _a,_b;this.animationDuration=parse(context,duration,declaration.animationDuration);this.backgroundClip=parse(context,backgroundClip,declaration.backgroundClip);this.backgroundColor=parse(context,backgroundColor,declaration.backgroundColor);this.backgroundImage=parse(context,backgroundImage,declaration.backgroundImage);this.backgroundOrigin=parse(context,backgroundOrigin,declaration.backgroundOrigin);this.backgroundPosition=parse(context,backgroundPosition,declaration.backgroundPosition);this.backgroundRepeat=parse(context,backgroundRepeat,declaration.backgroundRepeat);this.backgroundSize=parse(context,backgroundSize,declaration.backgroundSize);this.borderTopColor=parse(context,borderTopColor,declaration.borderTopColor);this.borderRightColor=parse(context,borderRightColor,declaration.borderRightColor);this.borderBottomColor=parse(context,borderBottomColor,declaration.borderBottomColor);this.borderLeftColor=parse(context,borderLeftColor,declaration.borderLeftColor);this.borderTopLeftRadius=parse(context,borderTopLeftRadius,declaration.borderTopLeftRadius);this.borderTopRightRadius=parse(context,borderTopRightRadius,declaration.borderTopRightRadius);this.borderBottomRightRadius=parse(context,borderBottomRightRadius,declaration.borderBottomRightRadius);this.borderBottomLeftRadius=parse(context,borderBottomLeftRadius,declaration.borderBottomLeftRadius);this.borderTopStyle=parse(context,borderTopStyle,declaration.borderTopStyle);this.borderRightStyle=parse(context,borderRightStyle,declaration.borderRightStyle);this.borderBottomStyle=parse(context,borderBottomStyle,declaration.borderBottomStyle);this.borderLeftStyle=parse(context,borderLeftStyle,declaration.borderLeftStyle);this.borderTopWidth=parse(context,borderTopWidth,declaration.borderTopWidth);this.borderRightWidth=parse(context,borderRightWidth,declaration.borderRightWidth);this.borderBottomWidth=parse(context,borderBottomWidth,declaration.borderBottomWidth);this.borderLeftWidth=parse(context,borderLeftWidth,declaration.borderLeftWidth);this.boxShadow=parse(context,boxShadow,declaration.boxShadow);this.color=parse(context,color,declaration.color);this.direction=parse(context,direction,declaration.direction);this.display=parse(context,display,declaration.display);this.float=parse(context,float,declaration.cssFloat);this.fontFamily=parse(context,fontFamily,declaration.fontFamily);this.fontSize=parse(context,fontSize,declaration.fontSize);this.fontStyle=parse(context,fontStyle,declaration.fontStyle);this.fontVariant=parse(context,fontVariant,declaration.fontVariant);this.fontWeight=parse(context,fontWeight,declaration.fontWeight);this.letterSpacing=parse(context,letterSpacing,declaration.letterSpacing);this.lineBreak=parse(context,lineBreak,declaration.lineBreak);this.lineHeight=parse(context,lineHeight,declaration.lineHeight);this.listStyleImage=parse(context,listStyleImage,declaration.listStyleImage);this.listStylePosition=parse(context,listStylePosition,declaration.listStylePosition);this.listStyleType=parse(context,listStyleType,declaration.listStyleType);this.marginTop=parse(context,marginTop,declaration.marginTop);this.marginRight=parse(context,marginRight,declaration.marginRight);this.marginBottom=parse(context,marginBottom,declaration.marginBottom);this.marginLeft=parse(context,marginLeft,declaration.marginLeft);this.opacity=parse(context,opacity,declaration.opacity);var overflowTuple=parse(context,overflow,declaration.overflow);this.overflowX=overflowTuple[0];this.overflowY=overflowTuple[overflowTuple.length>1?1:0];this.overflowWrap=parse(context,overflowWrap,declaration.overflowWrap);this.paddingTop=parse(context,paddingTop,declaration.paddingTop);this.paddingRight=parse(context,paddingRight,declaration.paddingRight);this.paddingBottom=parse(context,paddingBottom,declaration.paddingBottom);this.paddingLeft=parse(context,paddingLeft,declaration.paddingLeft);this.paintOrder=parse(context,paintOrder,declaration.paintOrder);this.position=parse(context,position,declaration.position);this.textAlign=parse(context,textAlign,declaration.textAlign);this.textDecorationColor=parse(context,textDecorationColor,(_a=declaration.textDecorationColor)!==null&&_a!==void 0?_a:declaration.color);this.textDecorationLine=parse(context,textDecorationLine,(_b=declaration.textDecorationLine)!==null&&_b!==void 0?_b:declaration.textDecoration);this.textShadow=parse(context,textShadow,declaration.textShadow);this.textTransform=parse(context,textTransform,declaration.textTransform);this.transform=parse(context,transform$1,declaration.transform);this.transformOrigin=parse(context,transformOrigin,declaration.transformOrigin);this.visibility=parse(context,visibility,declaration.visibility);this.webkitTextStrokeColor=parse(context,webkitTextStrokeColor,declaration.webkitTextStrokeColor);this.webkitTextStrokeWidth=parse(context,webkitTextStrokeWidth,declaration.webkitTextStrokeWidth);this.wordBreak=parse(context,wordBreak,declaration.wordBreak);this.zIndex=parse(context,zIndex,declaration.zIndex);}CSSParsedDeclaration.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0/* VISIBLE */;};CSSParsedDeclaration.prototype.isTransparent=function(){return isTransparent(this.backgroundColor);};CSSParsedDeclaration.prototype.isTransformed=function(){return this.transform!==null;};CSSParsedDeclaration.prototype.isPositioned=function(){return this.position!==0/* STATIC */;};CSSParsedDeclaration.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto;};CSSParsedDeclaration.prototype.isFloating=function(){return this.float!==0/* NONE */;};CSSParsedDeclaration.prototype.isInlineLevel=function(){return contains(this.display,4/* INLINE */)||contains(this.display,33554432/* INLINE_BLOCK */)||contains(this.display,268435456/* INLINE_FLEX */)||contains(this.display,536870912/* INLINE_GRID */)||contains(this.display,67108864/* INLINE_LIST_ITEM */)||contains(this.display,134217728/* INLINE_TABLE */);};return CSSParsedDeclaration;}();var CSSParsedPseudoDeclaration=/** @class */function(){function CSSParsedPseudoDeclaration(context,declaration){this.content=parse(context,content,declaration.content);this.quotes=parse(context,quotes,declaration.quotes);}return CSSParsedPseudoDeclaration;}();var CSSParsedCounterDeclaration=/** @class */function(){function CSSParsedCounterDeclaration(context,declaration){this.counterIncrement=parse(context,counterIncrement,declaration.counterIncrement);this.counterReset=parse(context,counterReset,declaration.counterReset);}return CSSParsedCounterDeclaration;}();// eslint-disable-next-line @typescript-eslint/no-explicit-any
    var parse=function(context,descriptor,style){var tokenizer=new Tokenizer();var value=style!==null&&typeof style!=='undefined'?style.toString():descriptor.initialValue;tokenizer.write(value);var parser=new Parser(tokenizer.read());switch(descriptor.type){case 2/* IDENT_VALUE */:var token=parser.parseComponentValue();return descriptor.parse(context,isIdentToken(token)?token.value:descriptor.initialValue);case 0/* VALUE */:return descriptor.parse(context,parser.parseComponentValue());case 1/* LIST */:return descriptor.parse(context,parser.parseComponentValues());case 4/* TOKEN_VALUE */:return parser.parseComponentValue();case 3/* TYPE_VALUE */:switch(descriptor.format){case'angle':return angle.parse(context,parser.parseComponentValue());case'color':return color$1.parse(context,parser.parseComponentValue());case'image':return image.parse(context,parser.parseComponentValue());case'length':var length_1=parser.parseComponentValue();return isLength(length_1)?length_1:ZERO_LENGTH;case'length-percentage':var value_1=parser.parseComponentValue();return isLengthPercentage(value_1)?value_1:ZERO_LENGTH;case'time':return time.parse(context,parser.parseComponentValue());}break;}};var elementDebuggerAttribute='data-html2canvas-debug';var getElementDebugType=function(element){var attribute=element.getAttribute(elementDebuggerAttribute);switch(attribute){case'all':return 1/* ALL */;case'clone':return 2/* CLONE */;case'parse':return 3/* PARSE */;case'render':return 4/* RENDER */;default:return 0/* NONE */;}};var isDebugging=function(element,type){var elementType=getElementDebugType(element);return elementType===1/* ALL */||type===elementType;};var ElementContainer=/** @class */function(){function ElementContainer(context,element){this.context=context;this.textNodes=[];this.elements=[];this.flags=0;if(isDebugging(element,3/* PARSE */)){debugger;}this.styles=new CSSParsedDeclaration(context,window.getComputedStyle(element,null));if(isHTMLElementNode(element)){if(this.styles.animationDuration.some(function(duration){return duration>0;})){element.style.animationDuration='0s';}if(this.styles.transform!==null){// getBoundingClientRect takes transforms into account
    element.style.transform='none';}}this.bounds=parseBounds(this.context,element);if(isDebugging(element,4/* RENDER */)){this.flags|=16/* DEBUG_RENDER */;}}return ElementContainer;}();/*
     * text-segmentation 1.0.3 <https://github.com/niklasvh/text-segmentation>
     * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
     * Released under MIT License
     */var base64='AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=';/*
     * utrie 1.0.2 <https://github.com/niklasvh/utrie>
     * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
     * Released under MIT License
     */var chars$1='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';// Use a lookup table to find the index.
    var lookup$1=typeof Uint8Array==='undefined'?[]:new Uint8Array(256);for(var i$1$2=0;i$1$2<chars$1.length;i$1$2++){lookup$1[chars$1.charCodeAt(i$1$2)]=i$1$2;}var decode=function(base64){var bufferLength=base64.length*0.75,len=base64.length,i,p=0,encoded1,encoded2,encoded3,encoded4;if(base64[base64.length-1]==='='){bufferLength--;if(base64[base64.length-2]==='='){bufferLength--;}}var buffer=typeof ArrayBuffer!=='undefined'&&typeof Uint8Array!=='undefined'&&typeof Uint8Array.prototype.slice!=='undefined'?new ArrayBuffer(bufferLength):new Array(bufferLength);var bytes=Array.isArray(buffer)?buffer:new Uint8Array(buffer);for(i=0;i<len;i+=4){encoded1=lookup$1[base64.charCodeAt(i)];encoded2=lookup$1[base64.charCodeAt(i+1)];encoded3=lookup$1[base64.charCodeAt(i+2)];encoded4=lookup$1[base64.charCodeAt(i+3)];bytes[p++]=encoded1<<2|encoded2>>4;bytes[p++]=(encoded2&15)<<4|encoded3>>2;bytes[p++]=(encoded3&3)<<6|encoded4&63;}return buffer;};var polyUint16Array=function(buffer){var length=buffer.length;var bytes=[];for(var i=0;i<length;i+=2){bytes.push(buffer[i+1]<<8|buffer[i]);}return bytes;};var polyUint32Array=function(buffer){var length=buffer.length;var bytes=[];for(var i=0;i<length;i+=4){bytes.push(buffer[i+3]<<24|buffer[i+2]<<16|buffer[i+1]<<8|buffer[i]);}return bytes;};/** Shift size for getting the index-2 table offset. */var UTRIE2_SHIFT_2=5;/** Shift size for getting the index-1 table offset. */var UTRIE2_SHIFT_1=6+5;/**
     * Shift size for shifting left the index array values.
     * Increases possible data size with 16-bit index values at the cost
     * of compactability.
     * This requires data blocks to be aligned by UTRIE2_DATA_GRANULARITY.
     */var UTRIE2_INDEX_SHIFT=2;/**
     * Difference between the two shift sizes,
     * for getting an index-1 offset from an index-2 offset. 6=11-5
     */var UTRIE2_SHIFT_1_2=UTRIE2_SHIFT_1-UTRIE2_SHIFT_2;/**
     * The part of the index-2 table for U+D800..U+DBFF stores values for
     * lead surrogate code _units_ not code _points_.
     * Values for lead surrogate code _points_ are indexed with this portion of the table.
     * Length=32=0x20=0x400>>UTRIE2_SHIFT_2. (There are 1024=0x400 lead surrogates.)
     */var UTRIE2_LSCP_INDEX_2_OFFSET=0x10000>>UTRIE2_SHIFT_2;/** Number of entries in a data block. 32=0x20 */var UTRIE2_DATA_BLOCK_LENGTH=1<<UTRIE2_SHIFT_2;/** Mask for getting the lower bits for the in-data-block offset. */var UTRIE2_DATA_MASK=UTRIE2_DATA_BLOCK_LENGTH-1;var UTRIE2_LSCP_INDEX_2_LENGTH=0x400>>UTRIE2_SHIFT_2;/** Count the lengths of both BMP pieces. 2080=0x820 */var UTRIE2_INDEX_2_BMP_LENGTH=UTRIE2_LSCP_INDEX_2_OFFSET+UTRIE2_LSCP_INDEX_2_LENGTH;/**
     * The 2-byte UTF-8 version of the index-2 table follows at offset 2080=0x820.
     * Length 32=0x20 for lead bytes C0..DF, regardless of UTRIE2_SHIFT_2.
     */var UTRIE2_UTF8_2B_INDEX_2_OFFSET=UTRIE2_INDEX_2_BMP_LENGTH;var UTRIE2_UTF8_2B_INDEX_2_LENGTH=0x800>>6;/* U+0800 is the first code point after 2-byte UTF-8 */ /**
     * The index-1 table, only used for supplementary code points, at offset 2112=0x840.
     * Variable length, for code points up to highStart, where the last single-value range starts.
     * Maximum length 512=0x200=0x100000>>UTRIE2_SHIFT_1.
     * (For 0x100000 supplementary code points U+10000..U+10ffff.)
     *
     * The part of the index-2 table for supplementary code points starts
     * after this index-1 table.
     *
     * Both the index-1 table and the following part of the index-2 table
     * are omitted completely if there is only BMP data.
     */var UTRIE2_INDEX_1_OFFSET=UTRIE2_UTF8_2B_INDEX_2_OFFSET+UTRIE2_UTF8_2B_INDEX_2_LENGTH;/**
     * Number of index-1 entries for the BMP. 32=0x20
     * This part of the index-1 table is omitted from the serialized form.
     */var UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=0x10000>>UTRIE2_SHIFT_1;/** Number of entries in an index-2 block. 64=0x40 */var UTRIE2_INDEX_2_BLOCK_LENGTH=1<<UTRIE2_SHIFT_1_2;/** Mask for getting the lower bits for the in-index-2-block offset. */var UTRIE2_INDEX_2_MASK=UTRIE2_INDEX_2_BLOCK_LENGTH-1;var slice16=function(view,start,end){if(view.slice){return view.slice(start,end);}return new Uint16Array(Array.prototype.slice.call(view,start,end));};var slice32=function(view,start,end){if(view.slice){return view.slice(start,end);}return new Uint32Array(Array.prototype.slice.call(view,start,end));};var createTrieFromBase64=function(base64,_byteLength){var buffer=decode(base64);var view32=Array.isArray(buffer)?polyUint32Array(buffer):new Uint32Array(buffer);var view16=Array.isArray(buffer)?polyUint16Array(buffer):new Uint16Array(buffer);var headerLength=24;var index=slice16(view16,headerLength/2,view32[4]/2);var data=view32[5]===2?slice16(view16,(headerLength+view32[4])/2):slice32(view32,Math.ceil((headerLength+view32[4])/4));return new Trie(view32[0],view32[1],view32[2],view32[3],index,data);};var Trie=/** @class */function(){function Trie(initialValue,errorValue,highStart,highValueIndex,index,data){this.initialValue=initialValue;this.errorValue=errorValue;this.highStart=highStart;this.highValueIndex=highValueIndex;this.index=index;this.data=data;}/**
         * Get the value for a code point as stored in the Trie.
         *
         * @param codePoint the code point
         * @return the value
         */Trie.prototype.get=function(codePoint){var ix;if(codePoint>=0){if(codePoint<0x0d800||codePoint>0x0dbff&&codePoint<=0x0ffff){// Ordinary BMP code point, excluding leading surrogates.
    // BMP uses a single level lookup.  BMP index starts at offset 0 in the Trie2 index.
    // 16 bit data is stored in the index array itself.
    ix=this.index[codePoint>>UTRIE2_SHIFT_2];ix=(ix<<UTRIE2_INDEX_SHIFT)+(codePoint&UTRIE2_DATA_MASK);return this.data[ix];}if(codePoint<=0xffff){// Lead Surrogate Code Point.  A Separate index section is stored for
    // lead surrogate code units and code points.
    //   The main index has the code unit data.
    //   For this function, we need the code point data.
    // Note: this expression could be refactored for slightly improved efficiency, but
    //       surrogate code points will be so rare in practice that it's not worth it.
    ix=this.index[UTRIE2_LSCP_INDEX_2_OFFSET+(codePoint-0xd800>>UTRIE2_SHIFT_2)];ix=(ix<<UTRIE2_INDEX_SHIFT)+(codePoint&UTRIE2_DATA_MASK);return this.data[ix];}if(codePoint<this.highStart){// Supplemental code point, use two-level lookup.
    ix=UTRIE2_INDEX_1_OFFSET-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH+(codePoint>>UTRIE2_SHIFT_1);ix=this.index[ix];ix+=codePoint>>UTRIE2_SHIFT_2&UTRIE2_INDEX_2_MASK;ix=this.index[ix];ix=(ix<<UTRIE2_INDEX_SHIFT)+(codePoint&UTRIE2_DATA_MASK);return this.data[ix];}if(codePoint<=0x10ffff){return this.data[this.highValueIndex];}}// Fall through.  The code point is outside of the legal range of 0..0x10ffff.
    return this.errorValue;};return Trie;}();/*
     * base64-arraybuffer 1.0.2 <https://github.com/niklasvh/base64-arraybuffer>
     * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
     * Released under MIT License
     */var chars='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';// Use a lookup table to find the index.
    var lookup=typeof Uint8Array==='undefined'?[]:new Uint8Array(256);for(var i$4=0;i$4<chars.length;i$4++){lookup[chars.charCodeAt(i$4)]=i$4;}var Prepend=1;var CR=2;var LF=3;var Control=4;var Extend=5;var SpacingMark=7;var L=8;var V=9;var T=10;var LV=11;var LVT=12;var ZWJ=13;var Extended_Pictographic=14;var RI=15;var toCodePoints=function(str){var codePoints=[];var i=0;var length=str.length;while(i<length){var value=str.charCodeAt(i++);if(value>=0xd800&&value<=0xdbff&&i<length){var extra=str.charCodeAt(i++);if((extra&0xfc00)===0xdc00){codePoints.push(((value&0x3ff)<<10)+(extra&0x3ff)+0x10000);}else {codePoints.push(value);i--;}}else {codePoints.push(value);}}return codePoints;};var fromCodePoint=function(){var codePoints=[];for(var _i=0;_i<arguments.length;_i++){codePoints[_i]=arguments[_i];}if(String.fromCodePoint){return String.fromCodePoint.apply(String,codePoints);}var length=codePoints.length;if(!length){return '';}var codeUnits=[];var index=-1;var result='';while(++index<length){var codePoint=codePoints[index];if(codePoint<=0xffff){codeUnits.push(codePoint);}else {codePoint-=0x10000;codeUnits.push((codePoint>>10)+0xd800,codePoint%0x400+0xdc00);}if(index+1===length||codeUnits.length>0x4000){result+=String.fromCharCode.apply(String,codeUnits);codeUnits.length=0;}}return result;};var UnicodeTrie=createTrieFromBase64(base64);var BREAK_NOT_ALLOWED='×';var BREAK_ALLOWED='÷';var codePointToClass=function(codePoint){return UnicodeTrie.get(codePoint);};var _graphemeBreakAtIndex=function(_codePoints,classTypes,index){var prevIndex=index-2;var prev=classTypes[prevIndex];var current=classTypes[index-1];var next=classTypes[index];// GB3 Do not break between a CR and LF
    if(current===CR&&next===LF){return BREAK_NOT_ALLOWED;}// GB4 Otherwise, break before and after controls.
    if(current===CR||current===LF||current===Control){return BREAK_ALLOWED;}// GB5
    if(next===CR||next===LF||next===Control){return BREAK_ALLOWED;}// Do not break Hangul syllable sequences.
    // GB6
    if(current===L&&[L,V,LV,LVT].indexOf(next)!==-1){return BREAK_NOT_ALLOWED;}// GB7
    if((current===LV||current===V)&&(next===V||next===T)){return BREAK_NOT_ALLOWED;}// GB8
    if((current===LVT||current===T)&&next===T){return BREAK_NOT_ALLOWED;}// GB9 Do not break before extending characters or ZWJ.
    if(next===ZWJ||next===Extend){return BREAK_NOT_ALLOWED;}// Do not break before SpacingMarks, or after Prepend characters.
    // GB9a
    if(next===SpacingMark){return BREAK_NOT_ALLOWED;}// GB9a
    if(current===Prepend){return BREAK_NOT_ALLOWED;}// GB11 Do not break within emoji modifier sequences or emoji zwj sequences.
    if(current===ZWJ&&next===Extended_Pictographic){while(prev===Extend){prev=classTypes[--prevIndex];}if(prev===Extended_Pictographic){return BREAK_NOT_ALLOWED;}}// GB12 Do not break within emoji flag sequences.
    // That is, do not break between regional indicator (RI) symbols
    // if there is an odd number of RI characters before the break point.
    if(current===RI&&next===RI){var countRI=0;while(prev===RI){countRI++;prev=classTypes[--prevIndex];}if(countRI%2===0){return BREAK_NOT_ALLOWED;}}return BREAK_ALLOWED;};var GraphemeBreaker=function(str){var codePoints=toCodePoints(str);var length=codePoints.length;var index=0;var lastEnd=0;var classTypes=codePoints.map(codePointToClass);return {next:function(){if(index>=length){return {done:true,value:null};}var graphemeBreak=BREAK_NOT_ALLOWED;while(index<length&&(graphemeBreak=_graphemeBreakAtIndex(codePoints,classTypes,++index))===BREAK_NOT_ALLOWED){}if(graphemeBreak!==BREAK_NOT_ALLOWED||index===length){var value=fromCodePoint.apply(null,codePoints.slice(lastEnd,index));lastEnd=index;return {value:value,done:false};}return {done:true,value:null};}};};var splitGraphemes=function(str){var breaker=GraphemeBreaker(str);var graphemes=[];var bk;while(!(bk=breaker.next()).done){if(bk.value){graphemes.push(bk.value.slice());}}return graphemes;};var testRangeBounds=function(document){var TEST_HEIGHT=123;if(document.createRange){var range=document.createRange();if(range.getBoundingClientRect){var testElement=document.createElement('boundtest');testElement.style.height=TEST_HEIGHT+"px";testElement.style.display='block';document.body.appendChild(testElement);range.selectNode(testElement);var rangeBounds=range.getBoundingClientRect();var rangeHeight=Math.round(rangeBounds.height);document.body.removeChild(testElement);if(rangeHeight===TEST_HEIGHT){return true;}}}return false;};var testIOSLineBreak=function(document){var testElement=document.createElement('boundtest');testElement.style.width='50px';testElement.style.display='block';testElement.style.fontSize='12px';testElement.style.letterSpacing='0px';testElement.style.wordSpacing='0px';document.body.appendChild(testElement);var range=document.createRange();testElement.innerHTML=typeof''.repeat==='function'?'&#128104;'.repeat(10):'';var node=testElement.firstChild;var textList=toCodePoints$1(node.data).map(function(i){return fromCodePoint$1(i);});var offset=0;var prev={};// ios 13 does not handle range getBoundingClientRect line changes correctly #2177
    var supports=textList.every(function(text,i){range.setStart(node,offset);range.setEnd(node,offset+text.length);var rect=range.getBoundingClientRect();offset+=text.length;var boundAhead=rect.x>prev.x||rect.y>prev.y;prev=rect;if(i===0){return true;}return boundAhead;});document.body.removeChild(testElement);return supports;};var testCORS=function(){return typeof new Image().crossOrigin!=='undefined';};var testResponseType=function(){return typeof new XMLHttpRequest().responseType==='string';};var testSVG=function(document){var img=new Image();var canvas=document.createElement('canvas');var ctx=canvas.getContext('2d');if(!ctx){return false;}img.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{ctx.drawImage(img,0,0);canvas.toDataURL();}catch(e){return false;}return true;};var isGreenPixel=function(data){return data[0]===0&&data[1]===255&&data[2]===0&&data[3]===255;};var testForeignObject=function(document){var canvas=document.createElement('canvas');var size=100;canvas.width=size;canvas.height=size;var ctx=canvas.getContext('2d');if(!ctx){return Promise.reject(false);}ctx.fillStyle='rgb(0, 255, 0)';ctx.fillRect(0,0,size,size);var img=new Image();var greenImageSrc=canvas.toDataURL();img.src=greenImageSrc;var svg=createForeignObjectSVG(size,size,0,0,img);ctx.fillStyle='red';ctx.fillRect(0,0,size,size);return loadSerializedSVG$1(svg).then(function(img){ctx.drawImage(img,0,0);var data=ctx.getImageData(0,0,size,size).data;ctx.fillStyle='red';ctx.fillRect(0,0,size,size);var node=document.createElement('div');node.style.backgroundImage="url("+greenImageSrc+")";node.style.height=size+"px";// Firefox 55 does not render inline <img /> tags
    return isGreenPixel(data)?loadSerializedSVG$1(createForeignObjectSVG(size,size,0,0,node)):Promise.reject(false);}).then(function(img){ctx.drawImage(img,0,0);// Edge does not render background-images
    return isGreenPixel(ctx.getImageData(0,0,size,size).data);}).catch(function(){return false;});};var createForeignObjectSVG=function(width,height,x,y,node){var xmlns='http://www.w3.org/2000/svg';var svg=document.createElementNS(xmlns,'svg');var foreignObject=document.createElementNS(xmlns,'foreignObject');svg.setAttributeNS(null,'width',width.toString());svg.setAttributeNS(null,'height',height.toString());foreignObject.setAttributeNS(null,'width','100%');foreignObject.setAttributeNS(null,'height','100%');foreignObject.setAttributeNS(null,'x',x.toString());foreignObject.setAttributeNS(null,'y',y.toString());foreignObject.setAttributeNS(null,'externalResourcesRequired','true');svg.appendChild(foreignObject);foreignObject.appendChild(node);return svg;};var loadSerializedSVG$1=function(svg){return new Promise(function(resolve,reject){var img=new Image();img.onload=function(){return resolve(img);};img.onerror=reject;img.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(svg));});};var FEATURES={get SUPPORT_RANGE_BOUNDS(){var value=testRangeBounds(document);Object.defineProperty(FEATURES,'SUPPORT_RANGE_BOUNDS',{value:value});return value;},get SUPPORT_WORD_BREAKING(){var value=FEATURES.SUPPORT_RANGE_BOUNDS&&testIOSLineBreak(document);Object.defineProperty(FEATURES,'SUPPORT_WORD_BREAKING',{value:value});return value;},get SUPPORT_SVG_DRAWING(){var value=testSVG(document);Object.defineProperty(FEATURES,'SUPPORT_SVG_DRAWING',{value:value});return value;},get SUPPORT_FOREIGNOBJECT_DRAWING(){var value=typeof Array.from==='function'&&typeof window.fetch==='function'?testForeignObject(document):Promise.resolve(false);Object.defineProperty(FEATURES,'SUPPORT_FOREIGNOBJECT_DRAWING',{value:value});return value;},get SUPPORT_CORS_IMAGES(){var value=testCORS();Object.defineProperty(FEATURES,'SUPPORT_CORS_IMAGES',{value:value});return value;},get SUPPORT_RESPONSE_TYPE(){var value=testResponseType();Object.defineProperty(FEATURES,'SUPPORT_RESPONSE_TYPE',{value:value});return value;},get SUPPORT_CORS_XHR(){var value=('withCredentials'in new XMLHttpRequest());Object.defineProperty(FEATURES,'SUPPORT_CORS_XHR',{value:value});return value;},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){// eslint-disable-next-line @typescript-eslint/no-explicit-any
    var value=!!(typeof Intl!=='undefined'&&Intl.Segmenter);Object.defineProperty(FEATURES,'SUPPORT_NATIVE_TEXT_SEGMENTATION',{value:value});return value;}};var TextBounds=/** @class */function(){function TextBounds(text,bounds){this.text=text;this.bounds=bounds;}return TextBounds;}();var parseTextBounds=function(context,value,styles,node){var textList=breakText(value,styles);var textBounds=[];var offset=0;textList.forEach(function(text){if(styles.textDecorationLine.length||text.trim().length>0){if(FEATURES.SUPPORT_RANGE_BOUNDS){var clientRects=createRange(node,offset,text.length).getClientRects();if(clientRects.length>1){var subSegments=segmentGraphemes(text);var subOffset_1=0;subSegments.forEach(function(subSegment){textBounds.push(new TextBounds(subSegment,Bounds.fromDOMRectList(context,createRange(node,subOffset_1+offset,subSegment.length).getClientRects())));subOffset_1+=subSegment.length;});}else {textBounds.push(new TextBounds(text,Bounds.fromDOMRectList(context,clientRects)));}}else {var replacementNode=node.splitText(text.length);textBounds.push(new TextBounds(text,getWrapperBounds(context,node)));node=replacementNode;}}else if(!FEATURES.SUPPORT_RANGE_BOUNDS){node=node.splitText(text.length);}offset+=text.length;});return textBounds;};var getWrapperBounds=function(context,node){var ownerDocument=node.ownerDocument;if(ownerDocument){var wrapper=ownerDocument.createElement('html2canvaswrapper');wrapper.appendChild(node.cloneNode(true));var parentNode=node.parentNode;if(parentNode){parentNode.replaceChild(wrapper,node);var bounds=parseBounds(context,wrapper);if(wrapper.firstChild){parentNode.replaceChild(wrapper.firstChild,wrapper);}return bounds;}}return Bounds.EMPTY;};var createRange=function(node,offset,length){var ownerDocument=node.ownerDocument;if(!ownerDocument){throw new Error('Node has no owner document');}var range=ownerDocument.createRange();range.setStart(node,offset);range.setEnd(node,offset+length);return range;};var segmentGraphemes=function(value){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){// eslint-disable-next-line @typescript-eslint/no-explicit-any
    var segmenter=new Intl.Segmenter(void 0,{granularity:'grapheme'});// eslint-disable-next-line @typescript-eslint/no-explicit-any
    return Array.from(segmenter.segment(value)).map(function(segment){return segment.segment;});}return splitGraphemes(value);};var segmentWords=function(value,styles){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){// eslint-disable-next-line @typescript-eslint/no-explicit-any
    var segmenter=new Intl.Segmenter(void 0,{granularity:'word'});// eslint-disable-next-line @typescript-eslint/no-explicit-any
    return Array.from(segmenter.segment(value)).map(function(segment){return segment.segment;});}return breakWords(value,styles);};var breakText=function(value,styles){return styles.letterSpacing!==0?segmentGraphemes(value):segmentWords(value,styles);};// https://drafts.csswg.org/css-text/#word-separator
    var wordSeparators=[0x0020,0x00a0,0x1361,0x10100,0x10101,0x1039,0x1091];var breakWords=function(str,styles){var breaker=LineBreaker(str,{lineBreak:styles.lineBreak,wordBreak:styles.overflowWrap==="break-word"/* BREAK_WORD */?'break-word':styles.wordBreak});var words=[];var bk;var _loop_1=function(){if(bk.value){var value=bk.value.slice();var codePoints=toCodePoints$1(value);var word_1='';codePoints.forEach(function(codePoint){if(wordSeparators.indexOf(codePoint)===-1){word_1+=fromCodePoint$1(codePoint);}else {if(word_1.length){words.push(word_1);}words.push(fromCodePoint$1(codePoint));word_1='';}});if(word_1.length){words.push(word_1);}}};while(!(bk=breaker.next()).done){_loop_1();}return words;};var TextContainer=/** @class */function(){function TextContainer(context,node,styles){this.text=transform(node.data,styles.textTransform);this.textBounds=parseTextBounds(context,this.text,styles,node);}return TextContainer;}();var transform=function(text,transform){switch(transform){case 1/* LOWERCASE */:return text.toLowerCase();case 3/* CAPITALIZE */:return text.replace(CAPITALIZE,capitalize);case 2/* UPPERCASE */:return text.toUpperCase();default:return text;}};var CAPITALIZE=/(^|\s|:|-|\(|\))([a-z])/g;var capitalize=function(m,p1,p2){if(m.length>0){return p1+p2.toUpperCase();}return m;};var ImageElementContainer=/** @class */function(_super){__extends(ImageElementContainer,_super);function ImageElementContainer(context,img){var _this=_super.call(this,context,img)||this;_this.src=img.currentSrc||img.src;_this.intrinsicWidth=img.naturalWidth;_this.intrinsicHeight=img.naturalHeight;_this.context.cache.addImage(_this.src);return _this;}return ImageElementContainer;}(ElementContainer);var CanvasElementContainer=/** @class */function(_super){__extends(CanvasElementContainer,_super);function CanvasElementContainer(context,canvas){var _this=_super.call(this,context,canvas)||this;_this.canvas=canvas;_this.intrinsicWidth=canvas.width;_this.intrinsicHeight=canvas.height;return _this;}return CanvasElementContainer;}(ElementContainer);var SVGElementContainer=/** @class */function(_super){__extends(SVGElementContainer,_super);function SVGElementContainer(context,img){var _this=_super.call(this,context,img)||this;var s=new XMLSerializer();var bounds=parseBounds(context,img);img.setAttribute('width',bounds.width+"px");img.setAttribute('height',bounds.height+"px");_this.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(img));_this.intrinsicWidth=img.width.baseVal.value;_this.intrinsicHeight=img.height.baseVal.value;_this.context.cache.addImage(_this.svg);return _this;}return SVGElementContainer;}(ElementContainer);var LIElementContainer=/** @class */function(_super){__extends(LIElementContainer,_super);function LIElementContainer(context,element){var _this=_super.call(this,context,element)||this;_this.value=element.value;return _this;}return LIElementContainer;}(ElementContainer);var OLElementContainer=/** @class */function(_super){__extends(OLElementContainer,_super);function OLElementContainer(context,element){var _this=_super.call(this,context,element)||this;_this.start=element.start;_this.reversed=typeof element.reversed==='boolean'&&element.reversed===true;return _this;}return OLElementContainer;}(ElementContainer);var CHECKBOX_BORDER_RADIUS=[{type:15/* DIMENSION_TOKEN */,flags:0,unit:'px',number:3}];var RADIO_BORDER_RADIUS=[{type:16/* PERCENTAGE_TOKEN */,flags:0,number:50}];var reformatInputBounds=function(bounds){if(bounds.width>bounds.height){return new Bounds(bounds.left+(bounds.width-bounds.height)/2,bounds.top,bounds.height,bounds.height);}else if(bounds.width<bounds.height){return new Bounds(bounds.left,bounds.top+(bounds.height-bounds.width)/2,bounds.width,bounds.width);}return bounds;};var getInputValue=function(node){var value=node.type===PASSWORD?new Array(node.value.length+1).join('\u2022'):node.value;return value.length===0?node.placeholder||'':value;};var CHECKBOX='checkbox';var RADIO='radio';var PASSWORD='password';var INPUT_COLOR=0x2a2a2aff;var InputElementContainer=/** @class */function(_super){__extends(InputElementContainer,_super);function InputElementContainer(context,input){var _this=_super.call(this,context,input)||this;_this.type=input.type.toLowerCase();_this.checked=input.checked;_this.value=getInputValue(input);if(_this.type===CHECKBOX||_this.type===RADIO){_this.styles.backgroundColor=0xdededeff;_this.styles.borderTopColor=_this.styles.borderRightColor=_this.styles.borderBottomColor=_this.styles.borderLeftColor=0xa5a5a5ff;_this.styles.borderTopWidth=_this.styles.borderRightWidth=_this.styles.borderBottomWidth=_this.styles.borderLeftWidth=1;_this.styles.borderTopStyle=_this.styles.borderRightStyle=_this.styles.borderBottomStyle=_this.styles.borderLeftStyle=1/* SOLID */;_this.styles.backgroundClip=[0/* BORDER_BOX */];_this.styles.backgroundOrigin=[0/* BORDER_BOX */];_this.bounds=reformatInputBounds(_this.bounds);}switch(_this.type){case CHECKBOX:_this.styles.borderTopRightRadius=_this.styles.borderTopLeftRadius=_this.styles.borderBottomRightRadius=_this.styles.borderBottomLeftRadius=CHECKBOX_BORDER_RADIUS;break;case RADIO:_this.styles.borderTopRightRadius=_this.styles.borderTopLeftRadius=_this.styles.borderBottomRightRadius=_this.styles.borderBottomLeftRadius=RADIO_BORDER_RADIUS;break;}return _this;}return InputElementContainer;}(ElementContainer);var SelectElementContainer=/** @class */function(_super){__extends(SelectElementContainer,_super);function SelectElementContainer(context,element){var _this=_super.call(this,context,element)||this;var option=element.options[element.selectedIndex||0];_this.value=option?option.text||'':'';return _this;}return SelectElementContainer;}(ElementContainer);var TextareaElementContainer=/** @class */function(_super){__extends(TextareaElementContainer,_super);function TextareaElementContainer(context,element){var _this=_super.call(this,context,element)||this;_this.value=element.value;return _this;}return TextareaElementContainer;}(ElementContainer);var IFrameElementContainer=/** @class */function(_super){__extends(IFrameElementContainer,_super);function IFrameElementContainer(context,iframe){var _this=_super.call(this,context,iframe)||this;_this.src=iframe.src;_this.width=parseInt(iframe.width,10)||0;_this.height=parseInt(iframe.height,10)||0;_this.backgroundColor=_this.styles.backgroundColor;try{if(iframe.contentWindow&&iframe.contentWindow.document&&iframe.contentWindow.document.documentElement){_this.tree=parseTree(context,iframe.contentWindow.document.documentElement);// http://www.w3.org/TR/css3-background/#special-backgrounds
    var documentBackgroundColor=iframe.contentWindow.document.documentElement?parseColor(context,getComputedStyle(iframe.contentWindow.document.documentElement).backgroundColor):COLORS.TRANSPARENT;var bodyBackgroundColor=iframe.contentWindow.document.body?parseColor(context,getComputedStyle(iframe.contentWindow.document.body).backgroundColor):COLORS.TRANSPARENT;_this.backgroundColor=isTransparent(documentBackgroundColor)?isTransparent(bodyBackgroundColor)?_this.styles.backgroundColor:bodyBackgroundColor:documentBackgroundColor;}}catch(e){}return _this;}return IFrameElementContainer;}(ElementContainer);var LIST_OWNERS=['OL','UL','MENU'];var parseNodeTree=function(context,node,parent,root){for(var childNode=node.firstChild,nextNode=void 0;childNode;childNode=nextNode){nextNode=childNode.nextSibling;if(isTextNode(childNode)&&childNode.data.trim().length>0){parent.textNodes.push(new TextContainer(context,childNode,parent.styles));}else if(isElementNode(childNode)){if(isSlotElement(childNode)&&childNode.assignedNodes){childNode.assignedNodes().forEach(function(childNode){return parseNodeTree(context,childNode,parent,root);});}else {var container=createContainer(context,childNode);if(container.styles.isVisible()){if(createsRealStackingContext(childNode,container,root)){container.flags|=4/* CREATES_REAL_STACKING_CONTEXT */;}else if(createsStackingContext(container.styles)){container.flags|=2/* CREATES_STACKING_CONTEXT */;}if(LIST_OWNERS.indexOf(childNode.tagName)!==-1){container.flags|=8/* IS_LIST_OWNER */;}parent.elements.push(container);if(childNode.shadowRoot){parseNodeTree(context,childNode.shadowRoot,container,root);}else if(!isTextareaElement(childNode)&&!isSVGElement(childNode)&&!isSelectElement(childNode)){parseNodeTree(context,childNode,container,root);}}}}}};var createContainer=function(context,element){if(isImageElement(element)){return new ImageElementContainer(context,element);}if(isCanvasElement(element)){return new CanvasElementContainer(context,element);}if(isSVGElement(element)){return new SVGElementContainer(context,element);}if(isLIElement(element)){return new LIElementContainer(context,element);}if(isOLElement(element)){return new OLElementContainer(context,element);}if(isInputElement(element)){return new InputElementContainer(context,element);}if(isSelectElement(element)){return new SelectElementContainer(context,element);}if(isTextareaElement(element)){return new TextareaElementContainer(context,element);}if(isIFrameElement(element)){return new IFrameElementContainer(context,element);}return new ElementContainer(context,element);};var parseTree=function(context,element){var container=createContainer(context,element);container.flags|=4/* CREATES_REAL_STACKING_CONTEXT */;parseNodeTree(context,element,container,container);return container;};var createsRealStackingContext=function(node,container,root){return container.styles.isPositionedWithZIndex()||container.styles.opacity<1||container.styles.isTransformed()||isBodyElement(node)&&root.styles.isTransparent();};var createsStackingContext=function(styles){return styles.isPositioned()||styles.isFloating();};var isTextNode=function(node){return node.nodeType===Node.TEXT_NODE;};var isElementNode=function(node){return node.nodeType===Node.ELEMENT_NODE;};var isHTMLElementNode=function(node){return isElementNode(node)&&typeof node.style!=='undefined'&&!isSVGElementNode(node);};var isSVGElementNode=function(element){return typeof element.className==='object';};var isLIElement=function(node){return node.tagName==='LI';};var isOLElement=function(node){return node.tagName==='OL';};var isInputElement=function(node){return node.tagName==='INPUT';};var isHTMLElement=function(node){return node.tagName==='HTML';};var isSVGElement=function(node){return node.tagName==='svg';};var isBodyElement=function(node){return node.tagName==='BODY';};var isCanvasElement=function(node){return node.tagName==='CANVAS';};var isVideoElement=function(node){return node.tagName==='VIDEO';};var isImageElement=function(node){return node.tagName==='IMG';};var isIFrameElement=function(node){return node.tagName==='IFRAME';};var isStyleElement=function(node){return node.tagName==='STYLE';};var isScriptElement=function(node){return node.tagName==='SCRIPT';};var isTextareaElement=function(node){return node.tagName==='TEXTAREA';};var isSelectElement=function(node){return node.tagName==='SELECT';};var isSlotElement=function(node){return node.tagName==='SLOT';};// https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name
    var isCustomElement=function(node){return node.tagName.indexOf('-')>0;};var CounterState=/** @class */function(){function CounterState(){this.counters={};}CounterState.prototype.getCounterValue=function(name){var counter=this.counters[name];if(counter&&counter.length){return counter[counter.length-1];}return 1;};CounterState.prototype.getCounterValues=function(name){var counter=this.counters[name];return counter?counter:[];};CounterState.prototype.pop=function(counters){var _this=this;counters.forEach(function(counter){return _this.counters[counter].pop();});};CounterState.prototype.parse=function(style){var _this=this;var counterIncrement=style.counterIncrement;var counterReset=style.counterReset;var canReset=true;if(counterIncrement!==null){counterIncrement.forEach(function(entry){var counter=_this.counters[entry.counter];if(counter&&entry.increment!==0){canReset=false;if(!counter.length){counter.push(1);}counter[Math.max(0,counter.length-1)]+=entry.increment;}});}var counterNames=[];if(canReset){counterReset.forEach(function(entry){var counter=_this.counters[entry.counter];counterNames.push(entry.counter);if(!counter){counter=_this.counters[entry.counter]=[];}counter.push(entry.reset);});}return counterNames;};return CounterState;}();var ROMAN_UPPER={integers:[1000,900,500,400,100,90,50,40,10,9,5,4,1],values:['M','CM','D','CD','C','XC','L','XL','X','IX','V','IV','I']};var ARMENIAN={integers:[9000,8000,7000,6000,5000,4000,3000,2000,1000,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:['Ք','Փ','Ւ','Ց','Ր','Տ','Վ','Ս','Ռ','Ջ','Պ','Չ','Ո','Շ','Ն','Յ','Մ','Ճ','Ղ','Ձ','Հ','Կ','Ծ','Խ','Լ','Ի','Ժ','Թ','Ը','Է','Զ','Ե','Դ','Գ','Բ','Ա']};var HEBREW={integers:[10000,9000,8000,7000,6000,5000,4000,3000,2000,1000,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:['י׳','ט׳','ח׳','ז׳','ו׳','ה׳','ד׳','ג׳','ב׳','א׳','ת','ש','ר','ק','צ','פ','ע','ס','נ','מ','ל','כ','יט','יח','יז','טז','טו','י','ט','ח','ז','ו','ה','ד','ג','ב','א']};var GEORGIAN={integers:[10000,9000,8000,7000,6000,5000,4000,3000,2000,1000,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:['ჵ','ჰ','ჯ','ჴ','ხ','ჭ','წ','ძ','ც','ჩ','შ','ყ','ღ','ქ','ფ','ჳ','ტ','ს','რ','ჟ','პ','ო','ჲ','ნ','მ','ლ','კ','ი','თ','ჱ','ზ','ვ','ე','დ','გ','ბ','ა']};var createAdditiveCounter=function(value,min,max,symbols,fallback,suffix){if(value<min||value>max){return createCounterText(value,fallback,suffix.length>0);}return symbols.integers.reduce(function(string,integer,index){while(value>=integer){value-=integer;string+=symbols.values[index];}return string;},'')+suffix;};var createCounterStyleWithSymbolResolver=function(value,codePointRangeLength,isNumeric,resolver){var string='';do{if(!isNumeric){value--;}string=resolver(value)+string;value/=codePointRangeLength;}while(value*codePointRangeLength>=codePointRangeLength);return string;};var createCounterStyleFromRange=function(value,codePointRangeStart,codePointRangeEnd,isNumeric,suffix){var codePointRangeLength=codePointRangeEnd-codePointRangeStart+1;return (value<0?'-':'')+(createCounterStyleWithSymbolResolver(Math.abs(value),codePointRangeLength,isNumeric,function(codePoint){return fromCodePoint$1(Math.floor(codePoint%codePointRangeLength)+codePointRangeStart);})+suffix);};var createCounterStyleFromSymbols=function(value,symbols,suffix){if(suffix===void 0){suffix='. ';}var codePointRangeLength=symbols.length;return createCounterStyleWithSymbolResolver(Math.abs(value),codePointRangeLength,false,function(codePoint){return symbols[Math.floor(codePoint%codePointRangeLength)];})+suffix;};var CJK_ZEROS=1<<0;var CJK_TEN_COEFFICIENTS=1<<1;var CJK_TEN_HIGH_COEFFICIENTS=1<<2;var CJK_HUNDRED_COEFFICIENTS=1<<3;var createCJKCounter=function(value,numbers,multipliers,negativeSign,suffix,flags){if(value<-9999||value>9999){return createCounterText(value,4/* CJK_DECIMAL */,suffix.length>0);}var tmp=Math.abs(value);var string=suffix;if(tmp===0){return numbers[0]+string;}for(var digit=0;tmp>0&&digit<=4;digit++){var coefficient=tmp%10;if(coefficient===0&&contains(flags,CJK_ZEROS)&&string!==''){string=numbers[coefficient]+string;}else if(coefficient>1||coefficient===1&&digit===0||coefficient===1&&digit===1&&contains(flags,CJK_TEN_COEFFICIENTS)||coefficient===1&&digit===1&&contains(flags,CJK_TEN_HIGH_COEFFICIENTS)&&value>100||coefficient===1&&digit>1&&contains(flags,CJK_HUNDRED_COEFFICIENTS)){string=numbers[coefficient]+(digit>0?multipliers[digit-1]:'')+string;}else if(coefficient===1&&digit>0){string=multipliers[digit-1]+string;}tmp=Math.floor(tmp/10);}return (value<0?negativeSign:'')+string;};var CHINESE_INFORMAL_MULTIPLIERS='十百千萬';var CHINESE_FORMAL_MULTIPLIERS='拾佰仟萬';var JAPANESE_NEGATIVE='マイナス';var KOREAN_NEGATIVE='마이너스';var createCounterText=function(value,type,appendSuffix){var defaultSuffix=appendSuffix?'. ':'';var cjkSuffix=appendSuffix?'、':'';var koreanSuffix=appendSuffix?', ':'';var spaceSuffix=appendSuffix?' ':'';switch(type){case 0/* DISC */:return '•'+spaceSuffix;case 1/* CIRCLE */:return '◦'+spaceSuffix;case 2/* SQUARE */:return '◾'+spaceSuffix;case 5/* DECIMAL_LEADING_ZERO */:var string=createCounterStyleFromRange(value,48,57,true,defaultSuffix);return string.length<4?"0"+string:string;case 4/* CJK_DECIMAL */:return createCounterStyleFromSymbols(value,'〇一二三四五六七八九',cjkSuffix);case 6/* LOWER_ROMAN */:return createAdditiveCounter(value,1,3999,ROMAN_UPPER,3/* DECIMAL */,defaultSuffix).toLowerCase();case 7/* UPPER_ROMAN */:return createAdditiveCounter(value,1,3999,ROMAN_UPPER,3/* DECIMAL */,defaultSuffix);case 8/* LOWER_GREEK */:return createCounterStyleFromRange(value,945,969,false,defaultSuffix);case 9/* LOWER_ALPHA */:return createCounterStyleFromRange(value,97,122,false,defaultSuffix);case 10/* UPPER_ALPHA */:return createCounterStyleFromRange(value,65,90,false,defaultSuffix);case 11/* ARABIC_INDIC */:return createCounterStyleFromRange(value,1632,1641,true,defaultSuffix);case 12/* ARMENIAN */:case 49/* UPPER_ARMENIAN */:return createAdditiveCounter(value,1,9999,ARMENIAN,3/* DECIMAL */,defaultSuffix);case 35/* LOWER_ARMENIAN */:return createAdditiveCounter(value,1,9999,ARMENIAN,3/* DECIMAL */,defaultSuffix).toLowerCase();case 13/* BENGALI */:return createCounterStyleFromRange(value,2534,2543,true,defaultSuffix);case 14/* CAMBODIAN */:case 30/* KHMER */:return createCounterStyleFromRange(value,6112,6121,true,defaultSuffix);case 15/* CJK_EARTHLY_BRANCH */:return createCounterStyleFromSymbols(value,'子丑寅卯辰巳午未申酉戌亥',cjkSuffix);case 16/* CJK_HEAVENLY_STEM */:return createCounterStyleFromSymbols(value,'甲乙丙丁戊己庚辛壬癸',cjkSuffix);case 17/* CJK_IDEOGRAPHIC */:case 48/* TRAD_CHINESE_INFORMAL */:return createCJKCounter(value,'零一二三四五六七八九',CHINESE_INFORMAL_MULTIPLIERS,'負',cjkSuffix,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 47/* TRAD_CHINESE_FORMAL */:return createCJKCounter(value,'零壹貳參肆伍陸柒捌玖',CHINESE_FORMAL_MULTIPLIERS,'負',cjkSuffix,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 42/* SIMP_CHINESE_INFORMAL */:return createCJKCounter(value,'零一二三四五六七八九',CHINESE_INFORMAL_MULTIPLIERS,'负',cjkSuffix,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 41/* SIMP_CHINESE_FORMAL */:return createCJKCounter(value,'零壹贰叁肆伍陆柒捌玖',CHINESE_FORMAL_MULTIPLIERS,'负',cjkSuffix,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 26/* JAPANESE_INFORMAL */:return createCJKCounter(value,'〇一二三四五六七八九','十百千万',JAPANESE_NEGATIVE,cjkSuffix,0);case 25/* JAPANESE_FORMAL */:return createCJKCounter(value,'零壱弐参四伍六七八九','拾百千万',JAPANESE_NEGATIVE,cjkSuffix,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 31/* KOREAN_HANGUL_FORMAL */:return createCJKCounter(value,'영일이삼사오육칠팔구','십백천만',KOREAN_NEGATIVE,koreanSuffix,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 33/* KOREAN_HANJA_INFORMAL */:return createCJKCounter(value,'零一二三四五六七八九','十百千萬',KOREAN_NEGATIVE,koreanSuffix,0);case 32/* KOREAN_HANJA_FORMAL */:return createCJKCounter(value,'零壹貳參四五六七八九','拾百千',KOREAN_NEGATIVE,koreanSuffix,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 18/* DEVANAGARI */:return createCounterStyleFromRange(value,0x966,0x96f,true,defaultSuffix);case 20/* GEORGIAN */:return createAdditiveCounter(value,1,19999,GEORGIAN,3/* DECIMAL */,defaultSuffix);case 21/* GUJARATI */:return createCounterStyleFromRange(value,0xae6,0xaef,true,defaultSuffix);case 22/* GURMUKHI */:return createCounterStyleFromRange(value,0xa66,0xa6f,true,defaultSuffix);case 22/* HEBREW */:return createAdditiveCounter(value,1,10999,HEBREW,3/* DECIMAL */,defaultSuffix);case 23/* HIRAGANA */:return createCounterStyleFromSymbols(value,'あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん');case 24/* HIRAGANA_IROHA */:return createCounterStyleFromSymbols(value,'いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす');case 27/* KANNADA */:return createCounterStyleFromRange(value,0xce6,0xcef,true,defaultSuffix);case 28/* KATAKANA */:return createCounterStyleFromSymbols(value,'アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン',cjkSuffix);case 29/* KATAKANA_IROHA */:return createCounterStyleFromSymbols(value,'イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス',cjkSuffix);case 34/* LAO */:return createCounterStyleFromRange(value,0xed0,0xed9,true,defaultSuffix);case 37/* MONGOLIAN */:return createCounterStyleFromRange(value,0x1810,0x1819,true,defaultSuffix);case 38/* MYANMAR */:return createCounterStyleFromRange(value,0x1040,0x1049,true,defaultSuffix);case 39/* ORIYA */:return createCounterStyleFromRange(value,0xb66,0xb6f,true,defaultSuffix);case 40/* PERSIAN */:return createCounterStyleFromRange(value,0x6f0,0x6f9,true,defaultSuffix);case 43/* TAMIL */:return createCounterStyleFromRange(value,0xbe6,0xbef,true,defaultSuffix);case 44/* TELUGU */:return createCounterStyleFromRange(value,0xc66,0xc6f,true,defaultSuffix);case 45/* THAI */:return createCounterStyleFromRange(value,0xe50,0xe59,true,defaultSuffix);case 46/* TIBETAN */:return createCounterStyleFromRange(value,0xf20,0xf29,true,defaultSuffix);case 3/* DECIMAL */:default:return createCounterStyleFromRange(value,48,57,true,defaultSuffix);}};var IGNORE_ATTRIBUTE='data-html2canvas-ignore';var DocumentCloner=/** @class */function(){function DocumentCloner(context,element,options){this.context=context;this.options=options;this.scrolledElements=[];this.referenceElement=element;this.counters=new CounterState();this.quoteDepth=0;if(!element.ownerDocument){throw new Error('Cloned element does not have an owner document');}this.documentElement=this.cloneNode(element.ownerDocument.documentElement,false);}DocumentCloner.prototype.toIFrame=function(ownerDocument,windowSize){var _this=this;var iframe=createIFrameContainer(ownerDocument,windowSize);if(!iframe.contentWindow){return Promise.reject("Unable to find iframe window");}var scrollX=ownerDocument.defaultView.pageXOffset;var scrollY=ownerDocument.defaultView.pageYOffset;var cloneWindow=iframe.contentWindow;var documentClone=cloneWindow.document;/* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle
             if window url is about:blank, we can assign the url to current by writing onto the document
             */var iframeLoad=iframeLoader(iframe).then(function(){return __awaiter(_this,void 0,void 0,function(){var onclone,referenceElement;return __generator(this,function(_a){switch(_a.label){case 0:this.scrolledElements.forEach(restoreNodeScroll);if(cloneWindow){cloneWindow.scrollTo(windowSize.left,windowSize.top);if(/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(cloneWindow.scrollY!==windowSize.top||cloneWindow.scrollX!==windowSize.left)){this.context.logger.warn('Unable to restore scroll position for cloned document');this.context.windowBounds=this.context.windowBounds.add(cloneWindow.scrollX-windowSize.left,cloneWindow.scrollY-windowSize.top,0,0);}}onclone=this.options.onclone;referenceElement=this.clonedReferenceElement;if(typeof referenceElement==='undefined'){return [2/*return*/,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")];}if(!(documentClone.fonts&&documentClone.fonts.ready))return [3/*break*/,2];return [4/*yield*/,documentClone.fonts.ready];case 1:_a.sent();_a.label=2;case 2:if(!/(AppleWebKit)/g.test(navigator.userAgent))return [3/*break*/,4];return [4/*yield*/,imagesReady(documentClone)];case 3:_a.sent();_a.label=4;case 4:if(typeof onclone==='function'){return [2/*return*/,Promise.resolve().then(function(){return onclone(documentClone,referenceElement);}).then(function(){return iframe;})];}return [2/*return*/,iframe];}});});});documentClone.open();documentClone.write(serializeDoctype(document.doctype)+"<html></html>");// Chrome scrolls the parent document for some reason after the write to the cloned window???
    restoreOwnerScroll(this.referenceElement.ownerDocument,scrollX,scrollY);documentClone.replaceChild(documentClone.adoptNode(this.documentElement),documentClone.documentElement);documentClone.close();return iframeLoad;};DocumentCloner.prototype.createElementClone=function(node){if(isDebugging(node,2/* CLONE */)){debugger;}if(isCanvasElement(node)){return this.createCanvasClone(node);}if(isVideoElement(node)){return this.createVideoClone(node);}if(isStyleElement(node)){return this.createStyleClone(node);}var clone=node.cloneNode(false);if(isImageElement(clone)){if(isImageElement(node)&&node.currentSrc&&node.currentSrc!==node.src){clone.src=node.currentSrc;clone.srcset='';}if(clone.loading==='lazy'){clone.loading='eager';}}if(isCustomElement(clone)){return this.createCustomElementClone(clone);}return clone;};DocumentCloner.prototype.createCustomElementClone=function(node){var clone=document.createElement('html2canvascustomelement');copyCSSStyles(node.style,clone);return clone;};DocumentCloner.prototype.createStyleClone=function(node){try{var sheet=node.sheet;if(sheet&&sheet.cssRules){var css=[].slice.call(sheet.cssRules,0).reduce(function(css,rule){if(rule&&typeof rule.cssText==='string'){return css+rule.cssText;}return css;},'');var style=node.cloneNode(false);style.textContent=css;return style;}}catch(e){// accessing node.sheet.cssRules throws a DOMException
    this.context.logger.error('Unable to access cssRules property',e);if(e.name!=='SecurityError'){throw e;}}return node.cloneNode(false);};DocumentCloner.prototype.createCanvasClone=function(canvas){var _a;if(this.options.inlineImages&&canvas.ownerDocument){var img=canvas.ownerDocument.createElement('img');try{img.src=canvas.toDataURL();return img;}catch(e){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",canvas);}}var clonedCanvas=canvas.cloneNode(false);try{clonedCanvas.width=canvas.width;clonedCanvas.height=canvas.height;var ctx=canvas.getContext('2d');var clonedCtx=clonedCanvas.getContext('2d');if(clonedCtx){if(!this.options.allowTaint&&ctx){clonedCtx.putImageData(ctx.getImageData(0,0,canvas.width,canvas.height),0,0);}else {var gl=(_a=canvas.getContext('webgl2'))!==null&&_a!==void 0?_a:canvas.getContext('webgl');if(gl){var attribs=gl.getContextAttributes();if((attribs===null||attribs===void 0?void 0:attribs.preserveDrawingBuffer)===false){this.context.logger.warn('Unable to clone WebGL context as it has preserveDrawingBuffer=false',canvas);}}clonedCtx.drawImage(canvas,0,0);}}return clonedCanvas;}catch(e){this.context.logger.info("Unable to clone canvas as it is tainted",canvas);}return clonedCanvas;};DocumentCloner.prototype.createVideoClone=function(video){var canvas=video.ownerDocument.createElement('canvas');canvas.width=video.offsetWidth;canvas.height=video.offsetHeight;var ctx=canvas.getContext('2d');try{if(ctx){ctx.drawImage(video,0,0,canvas.width,canvas.height);if(!this.options.allowTaint){ctx.getImageData(0,0,canvas.width,canvas.height);}}return canvas;}catch(e){this.context.logger.info("Unable to clone video as it is tainted",video);}var blankCanvas=video.ownerDocument.createElement('canvas');blankCanvas.width=video.offsetWidth;blankCanvas.height=video.offsetHeight;return blankCanvas;};DocumentCloner.prototype.appendChildNode=function(clone,child,copyStyles){if(!isElementNode(child)||!isScriptElement(child)&&!child.hasAttribute(IGNORE_ATTRIBUTE)&&(typeof this.options.ignoreElements!=='function'||!this.options.ignoreElements(child))){if(!this.options.copyStyles||!isElementNode(child)||!isStyleElement(child)){clone.appendChild(this.cloneNode(child,copyStyles));}}};DocumentCloner.prototype.cloneChildNodes=function(node,clone,copyStyles){var _this=this;for(var child=node.shadowRoot?node.shadowRoot.firstChild:node.firstChild;child;child=child.nextSibling){if(isElementNode(child)&&isSlotElement(child)&&typeof child.assignedNodes==='function'){var assignedNodes=child.assignedNodes();if(assignedNodes.length){assignedNodes.forEach(function(assignedNode){return _this.appendChildNode(clone,assignedNode,copyStyles);});}}else {this.appendChildNode(clone,child,copyStyles);}}};DocumentCloner.prototype.cloneNode=function(node,copyStyles){if(isTextNode(node)){return document.createTextNode(node.data);}if(!node.ownerDocument){return node.cloneNode(false);}var window=node.ownerDocument.defaultView;if(window&&isElementNode(node)&&(isHTMLElementNode(node)||isSVGElementNode(node))){var clone=this.createElementClone(node);clone.style.transitionProperty='none';var style=window.getComputedStyle(node);var styleBefore=window.getComputedStyle(node,':before');var styleAfter=window.getComputedStyle(node,':after');if(this.referenceElement===node&&isHTMLElementNode(clone)){this.clonedReferenceElement=clone;}if(isBodyElement(clone)){createPseudoHideStyles(clone);}var counters=this.counters.parse(new CSSParsedCounterDeclaration(this.context,style));var before=this.resolvePseudoContent(node,clone,styleBefore,PseudoElementType.BEFORE);if(isCustomElement(node)){copyStyles=true;}if(!isVideoElement(node)){this.cloneChildNodes(node,clone,copyStyles);}if(before){clone.insertBefore(before,clone.firstChild);}var after=this.resolvePseudoContent(node,clone,styleAfter,PseudoElementType.AFTER);if(after){clone.appendChild(after);}this.counters.pop(counters);if(style&&(this.options.copyStyles||isSVGElementNode(node))&&!isIFrameElement(node)||copyStyles){copyCSSStyles(style,clone);}if(node.scrollTop!==0||node.scrollLeft!==0){this.scrolledElements.push([clone,node.scrollLeft,node.scrollTop]);}if((isTextareaElement(node)||isSelectElement(node))&&(isTextareaElement(clone)||isSelectElement(clone))){clone.value=node.value;}return clone;}return node.cloneNode(false);};DocumentCloner.prototype.resolvePseudoContent=function(node,clone,style,pseudoElt){var _this=this;if(!style){return;}var value=style.content;var document=clone.ownerDocument;if(!document||!value||value==='none'||value==='-moz-alt-content'||style.display==='none'){return;}this.counters.parse(new CSSParsedCounterDeclaration(this.context,style));var declaration=new CSSParsedPseudoDeclaration(this.context,style);var anonymousReplacedElement=document.createElement('html2canvaspseudoelement');copyCSSStyles(style,anonymousReplacedElement);declaration.content.forEach(function(token){if(token.type===0/* STRING_TOKEN */){anonymousReplacedElement.appendChild(document.createTextNode(token.value));}else if(token.type===22/* URL_TOKEN */){var img=document.createElement('img');img.src=token.value;img.style.opacity='1';anonymousReplacedElement.appendChild(img);}else if(token.type===18/* FUNCTION */){if(token.name==='attr'){var attr=token.values.filter(isIdentToken);if(attr.length){anonymousReplacedElement.appendChild(document.createTextNode(node.getAttribute(attr[0].value)||''));}}else if(token.name==='counter'){var _a=token.values.filter(nonFunctionArgSeparator),counter=_a[0],counterStyle=_a[1];if(counter&&isIdentToken(counter)){var counterState=_this.counters.getCounterValue(counter.value);var counterType=counterStyle&&isIdentToken(counterStyle)?listStyleType.parse(_this.context,counterStyle.value):3/* DECIMAL */;anonymousReplacedElement.appendChild(document.createTextNode(createCounterText(counterState,counterType,false)));}}else if(token.name==='counters'){var _b=token.values.filter(nonFunctionArgSeparator),counter=_b[0],delim=_b[1],counterStyle=_b[2];if(counter&&isIdentToken(counter)){var counterStates=_this.counters.getCounterValues(counter.value);var counterType_1=counterStyle&&isIdentToken(counterStyle)?listStyleType.parse(_this.context,counterStyle.value):3/* DECIMAL */;var separator=delim&&delim.type===0/* STRING_TOKEN */?delim.value:'';var text=counterStates.map(function(value){return createCounterText(value,counterType_1,false);}).join(separator);anonymousReplacedElement.appendChild(document.createTextNode(text));}}else;}else if(token.type===20/* IDENT_TOKEN */){switch(token.value){case'open-quote':anonymousReplacedElement.appendChild(document.createTextNode(getQuote(declaration.quotes,_this.quoteDepth++,true)));break;case'close-quote':anonymousReplacedElement.appendChild(document.createTextNode(getQuote(declaration.quotes,--_this.quoteDepth,false)));break;default:// safari doesn't parse string tokens correctly because of lack of quotes
    anonymousReplacedElement.appendChild(document.createTextNode(token.value));}}});anonymousReplacedElement.className=PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;var newClassName=pseudoElt===PseudoElementType.BEFORE?" "+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE:" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;if(isSVGElementNode(clone)){clone.className.baseValue+=newClassName;}else {clone.className+=newClassName;}return anonymousReplacedElement;};DocumentCloner.destroy=function(container){if(container.parentNode){container.parentNode.removeChild(container);return true;}return false;};return DocumentCloner;}();var PseudoElementType;(function(PseudoElementType){PseudoElementType[PseudoElementType["BEFORE"]=0]="BEFORE";PseudoElementType[PseudoElementType["AFTER"]=1]="AFTER";})(PseudoElementType||(PseudoElementType={}));var createIFrameContainer=function(ownerDocument,bounds){var cloneIframeContainer=ownerDocument.createElement('iframe');cloneIframeContainer.className='html2canvas-container';cloneIframeContainer.style.visibility='hidden';cloneIframeContainer.style.position='fixed';cloneIframeContainer.style.left='-10000px';cloneIframeContainer.style.top='0px';cloneIframeContainer.style.border='0';cloneIframeContainer.width=bounds.width.toString();cloneIframeContainer.height=bounds.height.toString();cloneIframeContainer.scrolling='no';// ios won't scroll without it
    cloneIframeContainer.setAttribute(IGNORE_ATTRIBUTE,'true');ownerDocument.body.appendChild(cloneIframeContainer);return cloneIframeContainer;};var imageReady=function(img){return new Promise(function(resolve){if(img.complete){resolve();return;}if(!img.src){resolve();return;}img.onload=resolve;img.onerror=resolve;});};var imagesReady=function(document){return Promise.all([].slice.call(document.images,0).map(imageReady));};var iframeLoader=function(iframe){return new Promise(function(resolve,reject){var cloneWindow=iframe.contentWindow;if(!cloneWindow){return reject("No window assigned for iframe");}var documentClone=cloneWindow.document;cloneWindow.onload=iframe.onload=function(){cloneWindow.onload=iframe.onload=null;var interval=setInterval(function(){if(documentClone.body.childNodes.length>0&&documentClone.readyState==='complete'){clearInterval(interval);resolve(iframe);}},50);};});};var ignoredStyleProperties=['all','d','content'// Safari shows pseudoelements if content is set
    ];var copyCSSStyles=function(style,target){// Edge does not provide value for cssText
    for(var i=style.length-1;i>=0;i--){var property=style.item(i);if(ignoredStyleProperties.indexOf(property)===-1){target.style.setProperty(property,style.getPropertyValue(property));}}return target;};var serializeDoctype=function(doctype){var str='';if(doctype){str+='<!DOCTYPE ';if(doctype.name){str+=doctype.name;}if(doctype.internalSubset){str+=doctype.internalSubset;}if(doctype.publicId){str+="\""+doctype.publicId+"\"";}if(doctype.systemId){str+="\""+doctype.systemId+"\"";}str+='>';}return str;};var restoreOwnerScroll=function(ownerDocument,x,y){if(ownerDocument&&ownerDocument.defaultView&&(x!==ownerDocument.defaultView.pageXOffset||y!==ownerDocument.defaultView.pageYOffset)){ownerDocument.defaultView.scrollTo(x,y);}};var restoreNodeScroll=function(_a){var element=_a[0],x=_a[1],y=_a[2];element.scrollLeft=x;element.scrollTop=y;};var PSEUDO_BEFORE=':before';var PSEUDO_AFTER=':after';var PSEUDO_HIDE_ELEMENT_CLASS_BEFORE='___html2canvas___pseudoelement_before';var PSEUDO_HIDE_ELEMENT_CLASS_AFTER='___html2canvas___pseudoelement_after';var PSEUDO_HIDE_ELEMENT_STYLE="{\n    content: \"\" !important;\n    display: none !important;\n}";var createPseudoHideStyles=function(body){createStyles(body,"."+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+PSEUDO_BEFORE+PSEUDO_HIDE_ELEMENT_STYLE+"\n         ."+PSEUDO_HIDE_ELEMENT_CLASS_AFTER+PSEUDO_AFTER+PSEUDO_HIDE_ELEMENT_STYLE);};var createStyles=function(body,styles){var document=body.ownerDocument;if(document){var style=document.createElement('style');style.textContent=styles;body.appendChild(style);}};var CacheStorage=/** @class */function(){function CacheStorage(){}CacheStorage.getOrigin=function(url){var link=CacheStorage._link;if(!link){return 'about:blank';}link.href=url;link.href=link.href;// IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/
    return link.protocol+link.hostname+link.port;};CacheStorage.isSameOrigin=function(src){return CacheStorage.getOrigin(src)===CacheStorage._origin;};CacheStorage.setContext=function(window){CacheStorage._link=window.document.createElement('a');CacheStorage._origin=CacheStorage.getOrigin(window.location.href);};CacheStorage._origin='about:blank';return CacheStorage;}();var Cache=/** @class */function(){function Cache(context,_options){this.context=context;this._options=_options;// eslint-disable-next-line @typescript-eslint/no-explicit-any
    this._cache={};}Cache.prototype.addImage=function(src){var result=Promise.resolve();if(this.has(src)){return result;}if(isBlobImage(src)||isRenderable(src)){(this._cache[src]=this.loadImage(src)).catch(function(){// prevent unhandled rejection
    });return result;}return result;};// eslint-disable-next-line @typescript-eslint/no-explicit-any
    Cache.prototype.match=function(src){return this._cache[src];};Cache.prototype.loadImage=function(key){return __awaiter(this,void 0,void 0,function(){var isSameOrigin,useCORS,useProxy,src;var _this=this;return __generator(this,function(_a){switch(_a.label){case 0:isSameOrigin=CacheStorage.isSameOrigin(key);useCORS=!isInlineImage(key)&&this._options.useCORS===true&&FEATURES.SUPPORT_CORS_IMAGES&&!isSameOrigin;useProxy=!isInlineImage(key)&&!isSameOrigin&&!isBlobImage(key)&&typeof this._options.proxy==='string'&&FEATURES.SUPPORT_CORS_XHR&&!useCORS;if(!isSameOrigin&&this._options.allowTaint===false&&!isInlineImage(key)&&!isBlobImage(key)&&!useProxy&&!useCORS){return [2/*return*/];}src=key;if(!useProxy)return [3/*break*/,2];return [4/*yield*/,this.proxy(src)];case 1:src=_a.sent();_a.label=2;case 2:this.context.logger.debug("Added image "+key.substring(0,256));return [4/*yield*/,new Promise(function(resolve,reject){var img=new Image();img.onload=function(){return resolve(img);};img.onerror=reject;//ios safari 10.3 taints canvas with data urls unless crossOrigin is set to anonymous
    if(isInlineBase64Image(src)||useCORS){img.crossOrigin='anonymous';}img.src=src;if(img.complete===true){// Inline XML images may fail to parse, throwing an Error later on
    setTimeout(function(){return resolve(img);},500);}if(_this._options.imageTimeout>0){setTimeout(function(){return reject("Timed out ("+_this._options.imageTimeout+"ms) loading image");},_this._options.imageTimeout);}})];case 3:return [2/*return*/,_a.sent()];}});});};Cache.prototype.has=function(key){return typeof this._cache[key]!=='undefined';};Cache.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache));};Cache.prototype.proxy=function(src){var _this=this;var proxy=this._options.proxy;if(!proxy){throw new Error('No proxy defined');}var key=src.substring(0,256);return new Promise(function(resolve,reject){var responseType=FEATURES.SUPPORT_RESPONSE_TYPE?'blob':'text';var xhr=new XMLHttpRequest();xhr.onload=function(){if(xhr.status===200){if(responseType==='text'){resolve(xhr.response);}else {var reader_1=new FileReader();reader_1.addEventListener('load',function(){return resolve(reader_1.result);},false);reader_1.addEventListener('error',function(e){return reject(e);},false);reader_1.readAsDataURL(xhr.response);}}else {reject("Failed to proxy resource "+key+" with status code "+xhr.status);}};xhr.onerror=reject;var queryString=proxy.indexOf('?')>-1?'&':'?';xhr.open('GET',""+proxy+queryString+"url="+encodeURIComponent(src)+"&responseType="+responseType);if(responseType!=='text'&&xhr instanceof XMLHttpRequest){xhr.responseType=responseType;}if(_this._options.imageTimeout){var timeout_1=_this._options.imageTimeout;xhr.timeout=timeout_1;xhr.ontimeout=function(){return reject("Timed out ("+timeout_1+"ms) proxying "+key);};}xhr.send();});};return Cache;}();var INLINE_SVG=/^data:image\/svg\+xml/i;var INLINE_BASE64=/^data:image\/.*;base64,/i;var INLINE_IMG=/^data:image\/.*/i;var isRenderable=function(src){return FEATURES.SUPPORT_SVG_DRAWING||!isSVG(src);};var isInlineImage=function(src){return INLINE_IMG.test(src);};var isInlineBase64Image=function(src){return INLINE_BASE64.test(src);};var isBlobImage=function(src){return src.substr(0,4)==='blob';};var isSVG=function(src){return src.substr(-3).toLowerCase()==='svg'||INLINE_SVG.test(src);};var Vector=/** @class */function(){function Vector(x,y){this.type=0/* VECTOR */;this.x=x;this.y=y;}Vector.prototype.add=function(deltaX,deltaY){return new Vector(this.x+deltaX,this.y+deltaY);};return Vector;}();var lerp=function(a,b,t){return new Vector(a.x+(b.x-a.x)*t,a.y+(b.y-a.y)*t);};var BezierCurve=/** @class */function(){function BezierCurve(start,startControl,endControl,end){this.type=1/* BEZIER_CURVE */;this.start=start;this.startControl=startControl;this.endControl=endControl;this.end=end;}BezierCurve.prototype.subdivide=function(t,firstHalf){var ab=lerp(this.start,this.startControl,t);var bc=lerp(this.startControl,this.endControl,t);var cd=lerp(this.endControl,this.end,t);var abbc=lerp(ab,bc,t);var bccd=lerp(bc,cd,t);var dest=lerp(abbc,bccd,t);return firstHalf?new BezierCurve(this.start,ab,abbc,dest):new BezierCurve(dest,bccd,cd,this.end);};BezierCurve.prototype.add=function(deltaX,deltaY){return new BezierCurve(this.start.add(deltaX,deltaY),this.startControl.add(deltaX,deltaY),this.endControl.add(deltaX,deltaY),this.end.add(deltaX,deltaY));};BezierCurve.prototype.reverse=function(){return new BezierCurve(this.end,this.endControl,this.startControl,this.start);};return BezierCurve;}();var isBezierCurve=function(path){return path.type===1/* BEZIER_CURVE */;};var BoundCurves=/** @class */function(){function BoundCurves(element){var styles=element.styles;var bounds=element.bounds;var _a=getAbsoluteValueForTuple(styles.borderTopLeftRadius,bounds.width,bounds.height),tlh=_a[0],tlv=_a[1];var _b=getAbsoluteValueForTuple(styles.borderTopRightRadius,bounds.width,bounds.height),trh=_b[0],trv=_b[1];var _c=getAbsoluteValueForTuple(styles.borderBottomRightRadius,bounds.width,bounds.height),brh=_c[0],brv=_c[1];var _d=getAbsoluteValueForTuple(styles.borderBottomLeftRadius,bounds.width,bounds.height),blh=_d[0],blv=_d[1];var factors=[];factors.push((tlh+trh)/bounds.width);factors.push((blh+brh)/bounds.width);factors.push((tlv+blv)/bounds.height);factors.push((trv+brv)/bounds.height);var maxFactor=Math.max.apply(Math,factors);if(maxFactor>1){tlh/=maxFactor;tlv/=maxFactor;trh/=maxFactor;trv/=maxFactor;brh/=maxFactor;brv/=maxFactor;blh/=maxFactor;blv/=maxFactor;}var topWidth=bounds.width-trh;var rightHeight=bounds.height-brv;var bottomWidth=bounds.width-brh;var leftHeight=bounds.height-blv;var borderTopWidth=styles.borderTopWidth;var borderRightWidth=styles.borderRightWidth;var borderBottomWidth=styles.borderBottomWidth;var borderLeftWidth=styles.borderLeftWidth;var paddingTop=getAbsoluteValue(styles.paddingTop,element.bounds.width);var paddingRight=getAbsoluteValue(styles.paddingRight,element.bounds.width);var paddingBottom=getAbsoluteValue(styles.paddingBottom,element.bounds.width);var paddingLeft=getAbsoluteValue(styles.paddingLeft,element.bounds.width);this.topLeftBorderDoubleOuterBox=tlh>0||tlv>0?getCurvePoints(bounds.left+borderLeftWidth/3,bounds.top+borderTopWidth/3,tlh-borderLeftWidth/3,tlv-borderTopWidth/3,CORNER.TOP_LEFT):new Vector(bounds.left+borderLeftWidth/3,bounds.top+borderTopWidth/3);this.topRightBorderDoubleOuterBox=tlh>0||tlv>0?getCurvePoints(bounds.left+topWidth,bounds.top+borderTopWidth/3,trh-borderRightWidth/3,trv-borderTopWidth/3,CORNER.TOP_RIGHT):new Vector(bounds.left+bounds.width-borderRightWidth/3,bounds.top+borderTopWidth/3);this.bottomRightBorderDoubleOuterBox=brh>0||brv>0?getCurvePoints(bounds.left+bottomWidth,bounds.top+rightHeight,brh-borderRightWidth/3,brv-borderBottomWidth/3,CORNER.BOTTOM_RIGHT):new Vector(bounds.left+bounds.width-borderRightWidth/3,bounds.top+bounds.height-borderBottomWidth/3);this.bottomLeftBorderDoubleOuterBox=blh>0||blv>0?getCurvePoints(bounds.left+borderLeftWidth/3,bounds.top+leftHeight,blh-borderLeftWidth/3,blv-borderBottomWidth/3,CORNER.BOTTOM_LEFT):new Vector(bounds.left+borderLeftWidth/3,bounds.top+bounds.height-borderBottomWidth/3);this.topLeftBorderDoubleInnerBox=tlh>0||tlv>0?getCurvePoints(bounds.left+borderLeftWidth*2/3,bounds.top+borderTopWidth*2/3,tlh-borderLeftWidth*2/3,tlv-borderTopWidth*2/3,CORNER.TOP_LEFT):new Vector(bounds.left+borderLeftWidth*2/3,bounds.top+borderTopWidth*2/3);this.topRightBorderDoubleInnerBox=tlh>0||tlv>0?getCurvePoints(bounds.left+topWidth,bounds.top+borderTopWidth*2/3,trh-borderRightWidth*2/3,trv-borderTopWidth*2/3,CORNER.TOP_RIGHT):new Vector(bounds.left+bounds.width-borderRightWidth*2/3,bounds.top+borderTopWidth*2/3);this.bottomRightBorderDoubleInnerBox=brh>0||brv>0?getCurvePoints(bounds.left+bottomWidth,bounds.top+rightHeight,brh-borderRightWidth*2/3,brv-borderBottomWidth*2/3,CORNER.BOTTOM_RIGHT):new Vector(bounds.left+bounds.width-borderRightWidth*2/3,bounds.top+bounds.height-borderBottomWidth*2/3);this.bottomLeftBorderDoubleInnerBox=blh>0||blv>0?getCurvePoints(bounds.left+borderLeftWidth*2/3,bounds.top+leftHeight,blh-borderLeftWidth*2/3,blv-borderBottomWidth*2/3,CORNER.BOTTOM_LEFT):new Vector(bounds.left+borderLeftWidth*2/3,bounds.top+bounds.height-borderBottomWidth*2/3);this.topLeftBorderStroke=tlh>0||tlv>0?getCurvePoints(bounds.left+borderLeftWidth/2,bounds.top+borderTopWidth/2,tlh-borderLeftWidth/2,tlv-borderTopWidth/2,CORNER.TOP_LEFT):new Vector(bounds.left+borderLeftWidth/2,bounds.top+borderTopWidth/2);this.topRightBorderStroke=tlh>0||tlv>0?getCurvePoints(bounds.left+topWidth,bounds.top+borderTopWidth/2,trh-borderRightWidth/2,trv-borderTopWidth/2,CORNER.TOP_RIGHT):new Vector(bounds.left+bounds.width-borderRightWidth/2,bounds.top+borderTopWidth/2);this.bottomRightBorderStroke=brh>0||brv>0?getCurvePoints(bounds.left+bottomWidth,bounds.top+rightHeight,brh-borderRightWidth/2,brv-borderBottomWidth/2,CORNER.BOTTOM_RIGHT):new Vector(bounds.left+bounds.width-borderRightWidth/2,bounds.top+bounds.height-borderBottomWidth/2);this.bottomLeftBorderStroke=blh>0||blv>0?getCurvePoints(bounds.left+borderLeftWidth/2,bounds.top+leftHeight,blh-borderLeftWidth/2,blv-borderBottomWidth/2,CORNER.BOTTOM_LEFT):new Vector(bounds.left+borderLeftWidth/2,bounds.top+bounds.height-borderBottomWidth/2);this.topLeftBorderBox=tlh>0||tlv>0?getCurvePoints(bounds.left,bounds.top,tlh,tlv,CORNER.TOP_LEFT):new Vector(bounds.left,bounds.top);this.topRightBorderBox=trh>0||trv>0?getCurvePoints(bounds.left+topWidth,bounds.top,trh,trv,CORNER.TOP_RIGHT):new Vector(bounds.left+bounds.width,bounds.top);this.bottomRightBorderBox=brh>0||brv>0?getCurvePoints(bounds.left+bottomWidth,bounds.top+rightHeight,brh,brv,CORNER.BOTTOM_RIGHT):new Vector(bounds.left+bounds.width,bounds.top+bounds.height);this.bottomLeftBorderBox=blh>0||blv>0?getCurvePoints(bounds.left,bounds.top+leftHeight,blh,blv,CORNER.BOTTOM_LEFT):new Vector(bounds.left,bounds.top+bounds.height);this.topLeftPaddingBox=tlh>0||tlv>0?getCurvePoints(bounds.left+borderLeftWidth,bounds.top+borderTopWidth,Math.max(0,tlh-borderLeftWidth),Math.max(0,tlv-borderTopWidth),CORNER.TOP_LEFT):new Vector(bounds.left+borderLeftWidth,bounds.top+borderTopWidth);this.topRightPaddingBox=trh>0||trv>0?getCurvePoints(bounds.left+Math.min(topWidth,bounds.width-borderRightWidth),bounds.top+borderTopWidth,topWidth>bounds.width+borderRightWidth?0:Math.max(0,trh-borderRightWidth),Math.max(0,trv-borderTopWidth),CORNER.TOP_RIGHT):new Vector(bounds.left+bounds.width-borderRightWidth,bounds.top+borderTopWidth);this.bottomRightPaddingBox=brh>0||brv>0?getCurvePoints(bounds.left+Math.min(bottomWidth,bounds.width-borderLeftWidth),bounds.top+Math.min(rightHeight,bounds.height-borderBottomWidth),Math.max(0,brh-borderRightWidth),Math.max(0,brv-borderBottomWidth),CORNER.BOTTOM_RIGHT):new Vector(bounds.left+bounds.width-borderRightWidth,bounds.top+bounds.height-borderBottomWidth);this.bottomLeftPaddingBox=blh>0||blv>0?getCurvePoints(bounds.left+borderLeftWidth,bounds.top+Math.min(leftHeight,bounds.height-borderBottomWidth),Math.max(0,blh-borderLeftWidth),Math.max(0,blv-borderBottomWidth),CORNER.BOTTOM_LEFT):new Vector(bounds.left+borderLeftWidth,bounds.top+bounds.height-borderBottomWidth);this.topLeftContentBox=tlh>0||tlv>0?getCurvePoints(bounds.left+borderLeftWidth+paddingLeft,bounds.top+borderTopWidth+paddingTop,Math.max(0,tlh-(borderLeftWidth+paddingLeft)),Math.max(0,tlv-(borderTopWidth+paddingTop)),CORNER.TOP_LEFT):new Vector(bounds.left+borderLeftWidth+paddingLeft,bounds.top+borderTopWidth+paddingTop);this.topRightContentBox=trh>0||trv>0?getCurvePoints(bounds.left+Math.min(topWidth,bounds.width+borderLeftWidth+paddingLeft),bounds.top+borderTopWidth+paddingTop,topWidth>bounds.width+borderLeftWidth+paddingLeft?0:trh-borderLeftWidth+paddingLeft,trv-(borderTopWidth+paddingTop),CORNER.TOP_RIGHT):new Vector(bounds.left+bounds.width-(borderRightWidth+paddingRight),bounds.top+borderTopWidth+paddingTop);this.bottomRightContentBox=brh>0||brv>0?getCurvePoints(bounds.left+Math.min(bottomWidth,bounds.width-(borderLeftWidth+paddingLeft)),bounds.top+Math.min(rightHeight,bounds.height+borderTopWidth+paddingTop),Math.max(0,brh-(borderRightWidth+paddingRight)),brv-(borderBottomWidth+paddingBottom),CORNER.BOTTOM_RIGHT):new Vector(bounds.left+bounds.width-(borderRightWidth+paddingRight),bounds.top+bounds.height-(borderBottomWidth+paddingBottom));this.bottomLeftContentBox=blh>0||blv>0?getCurvePoints(bounds.left+borderLeftWidth+paddingLeft,bounds.top+leftHeight,Math.max(0,blh-(borderLeftWidth+paddingLeft)),blv-(borderBottomWidth+paddingBottom),CORNER.BOTTOM_LEFT):new Vector(bounds.left+borderLeftWidth+paddingLeft,bounds.top+bounds.height-(borderBottomWidth+paddingBottom));}return BoundCurves;}();var CORNER;(function(CORNER){CORNER[CORNER["TOP_LEFT"]=0]="TOP_LEFT";CORNER[CORNER["TOP_RIGHT"]=1]="TOP_RIGHT";CORNER[CORNER["BOTTOM_RIGHT"]=2]="BOTTOM_RIGHT";CORNER[CORNER["BOTTOM_LEFT"]=3]="BOTTOM_LEFT";})(CORNER||(CORNER={}));var getCurvePoints=function(x,y,r1,r2,position){var kappa=4*((Math.sqrt(2)-1)/3);var ox=r1*kappa;// control point offset horizontal
    var oy=r2*kappa;// control point offset vertical
    var xm=x+r1;// x-middle
    var ym=y+r2;// y-middle
    switch(position){case CORNER.TOP_LEFT:return new BezierCurve(new Vector(x,ym),new Vector(x,ym-oy),new Vector(xm-ox,y),new Vector(xm,y));case CORNER.TOP_RIGHT:return new BezierCurve(new Vector(x,y),new Vector(x+ox,y),new Vector(xm,ym-oy),new Vector(xm,ym));case CORNER.BOTTOM_RIGHT:return new BezierCurve(new Vector(xm,y),new Vector(xm,y+oy),new Vector(x+ox,ym),new Vector(x,ym));case CORNER.BOTTOM_LEFT:default:return new BezierCurve(new Vector(xm,ym),new Vector(xm-ox,ym),new Vector(x,y+oy),new Vector(x,y));}};var calculateBorderBoxPath=function(curves){return [curves.topLeftBorderBox,curves.topRightBorderBox,curves.bottomRightBorderBox,curves.bottomLeftBorderBox];};var calculateContentBoxPath=function(curves){return [curves.topLeftContentBox,curves.topRightContentBox,curves.bottomRightContentBox,curves.bottomLeftContentBox];};var calculatePaddingBoxPath=function(curves){return [curves.topLeftPaddingBox,curves.topRightPaddingBox,curves.bottomRightPaddingBox,curves.bottomLeftPaddingBox];};var TransformEffect=/** @class */function(){function TransformEffect(offsetX,offsetY,matrix){this.offsetX=offsetX;this.offsetY=offsetY;this.matrix=matrix;this.type=0/* TRANSFORM */;this.target=2/* BACKGROUND_BORDERS */|4/* CONTENT */;}return TransformEffect;}();var ClipEffect=/** @class */function(){function ClipEffect(path,target){this.path=path;this.target=target;this.type=1/* CLIP */;}return ClipEffect;}();var OpacityEffect=/** @class */function(){function OpacityEffect(opacity){this.opacity=opacity;this.type=2/* OPACITY */;this.target=2/* BACKGROUND_BORDERS */|4/* CONTENT */;}return OpacityEffect;}();var isTransformEffect=function(effect){return effect.type===0/* TRANSFORM */;};var isClipEffect=function(effect){return effect.type===1/* CLIP */;};var isOpacityEffect=function(effect){return effect.type===2/* OPACITY */;};var equalPath=function(a,b){if(a.length===b.length){return a.some(function(v,i){return v===b[i];});}return false;};var transformPath=function(path,deltaX,deltaY,deltaW,deltaH){return path.map(function(point,index){switch(index){case 0:return point.add(deltaX,deltaY);case 1:return point.add(deltaX+deltaW,deltaY);case 2:return point.add(deltaX+deltaW,deltaY+deltaH);case 3:return point.add(deltaX,deltaY+deltaH);}return point;});};var StackingContext=/** @class */function(){function StackingContext(container){this.element=container;this.inlineLevel=[];this.nonInlineLevel=[];this.negativeZIndex=[];this.zeroOrAutoZIndexOrTransformedOrOpacity=[];this.positiveZIndex=[];this.nonPositionedFloats=[];this.nonPositionedInlineLevel=[];}return StackingContext;}();var ElementPaint=/** @class */function(){function ElementPaint(container,parent){this.container=container;this.parent=parent;this.effects=[];this.curves=new BoundCurves(this.container);if(this.container.styles.opacity<1){this.effects.push(new OpacityEffect(this.container.styles.opacity));}if(this.container.styles.transform!==null){var offsetX=this.container.bounds.left+this.container.styles.transformOrigin[0].number;var offsetY=this.container.bounds.top+this.container.styles.transformOrigin[1].number;var matrix=this.container.styles.transform;this.effects.push(new TransformEffect(offsetX,offsetY,matrix));}if(this.container.styles.overflowX!==0/* VISIBLE */){var borderBox=calculateBorderBoxPath(this.curves);var paddingBox=calculatePaddingBoxPath(this.curves);if(equalPath(borderBox,paddingBox)){this.effects.push(new ClipEffect(borderBox,2/* BACKGROUND_BORDERS */|4/* CONTENT */));}else {this.effects.push(new ClipEffect(borderBox,2/* BACKGROUND_BORDERS */));this.effects.push(new ClipEffect(paddingBox,4/* CONTENT */));}}}ElementPaint.prototype.getEffects=function(target){var inFlow=[2/* ABSOLUTE */,3/* FIXED */].indexOf(this.container.styles.position)===-1;var parent=this.parent;var effects=this.effects.slice(0);while(parent){var croplessEffects=parent.effects.filter(function(effect){return !isClipEffect(effect);});if(inFlow||parent.container.styles.position!==0/* STATIC */||!parent.parent){effects.unshift.apply(effects,croplessEffects);inFlow=[2/* ABSOLUTE */,3/* FIXED */].indexOf(parent.container.styles.position)===-1;if(parent.container.styles.overflowX!==0/* VISIBLE */){var borderBox=calculateBorderBoxPath(parent.curves);var paddingBox=calculatePaddingBoxPath(parent.curves);if(!equalPath(borderBox,paddingBox)){effects.unshift(new ClipEffect(paddingBox,2/* BACKGROUND_BORDERS */|4/* CONTENT */));}}}else {effects.unshift.apply(effects,croplessEffects);}parent=parent.parent;}return effects.filter(function(effect){return contains(effect.target,target);});};return ElementPaint;}();var parseStackTree=function(parent,stackingContext,realStackingContext,listItems){parent.container.elements.forEach(function(child){var treatAsRealStackingContext=contains(child.flags,4/* CREATES_REAL_STACKING_CONTEXT */);var createsStackingContext=contains(child.flags,2/* CREATES_STACKING_CONTEXT */);var paintContainer=new ElementPaint(child,parent);if(contains(child.styles.display,2048/* LIST_ITEM */)){listItems.push(paintContainer);}var listOwnerItems=contains(child.flags,8/* IS_LIST_OWNER */)?[]:listItems;if(treatAsRealStackingContext||createsStackingContext){var parentStack=treatAsRealStackingContext||child.styles.isPositioned()?realStackingContext:stackingContext;var stack=new StackingContext(paintContainer);if(child.styles.isPositioned()||child.styles.opacity<1||child.styles.isTransformed()){var order_1=child.styles.zIndex.order;if(order_1<0){var index_1=0;parentStack.negativeZIndex.some(function(current,i){if(order_1>current.element.container.styles.zIndex.order){index_1=i;return false;}else if(index_1>0){return true;}return false;});parentStack.negativeZIndex.splice(index_1,0,stack);}else if(order_1>0){var index_2=0;parentStack.positiveZIndex.some(function(current,i){if(order_1>=current.element.container.styles.zIndex.order){index_2=i+1;return false;}else if(index_2>0){return true;}return false;});parentStack.positiveZIndex.splice(index_2,0,stack);}else {parentStack.zeroOrAutoZIndexOrTransformedOrOpacity.push(stack);}}else {if(child.styles.isFloating()){parentStack.nonPositionedFloats.push(stack);}else {parentStack.nonPositionedInlineLevel.push(stack);}}parseStackTree(paintContainer,stack,treatAsRealStackingContext?stack:realStackingContext,listOwnerItems);}else {if(child.styles.isInlineLevel()){stackingContext.inlineLevel.push(paintContainer);}else {stackingContext.nonInlineLevel.push(paintContainer);}parseStackTree(paintContainer,stackingContext,realStackingContext,listOwnerItems);}if(contains(child.flags,8/* IS_LIST_OWNER */)){processListItems(child,listOwnerItems);}});};var processListItems=function(owner,elements){var numbering=owner instanceof OLElementContainer?owner.start:1;var reversed=owner instanceof OLElementContainer?owner.reversed:false;for(var i=0;i<elements.length;i++){var item=elements[i];if(item.container instanceof LIElementContainer&&typeof item.container.value==='number'&&item.container.value!==0){numbering=item.container.value;}item.listValue=createCounterText(numbering,item.container.styles.listStyleType,true);numbering+=reversed?-1:1;}};var parseStackingContexts=function(container){var paintContainer=new ElementPaint(container,null);var root=new StackingContext(paintContainer);var listItems=[];parseStackTree(paintContainer,root,root,listItems);processListItems(paintContainer.container,listItems);return root;};var parsePathForBorder=function(curves,borderSide){switch(borderSide){case 0:return createPathFromCurves(curves.topLeftBorderBox,curves.topLeftPaddingBox,curves.topRightBorderBox,curves.topRightPaddingBox);case 1:return createPathFromCurves(curves.topRightBorderBox,curves.topRightPaddingBox,curves.bottomRightBorderBox,curves.bottomRightPaddingBox);case 2:return createPathFromCurves(curves.bottomRightBorderBox,curves.bottomRightPaddingBox,curves.bottomLeftBorderBox,curves.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(curves.bottomLeftBorderBox,curves.bottomLeftPaddingBox,curves.topLeftBorderBox,curves.topLeftPaddingBox);}};var parsePathForBorderDoubleOuter=function(curves,borderSide){switch(borderSide){case 0:return createPathFromCurves(curves.topLeftBorderBox,curves.topLeftBorderDoubleOuterBox,curves.topRightBorderBox,curves.topRightBorderDoubleOuterBox);case 1:return createPathFromCurves(curves.topRightBorderBox,curves.topRightBorderDoubleOuterBox,curves.bottomRightBorderBox,curves.bottomRightBorderDoubleOuterBox);case 2:return createPathFromCurves(curves.bottomRightBorderBox,curves.bottomRightBorderDoubleOuterBox,curves.bottomLeftBorderBox,curves.bottomLeftBorderDoubleOuterBox);case 3:default:return createPathFromCurves(curves.bottomLeftBorderBox,curves.bottomLeftBorderDoubleOuterBox,curves.topLeftBorderBox,curves.topLeftBorderDoubleOuterBox);}};var parsePathForBorderDoubleInner=function(curves,borderSide){switch(borderSide){case 0:return createPathFromCurves(curves.topLeftBorderDoubleInnerBox,curves.topLeftPaddingBox,curves.topRightBorderDoubleInnerBox,curves.topRightPaddingBox);case 1:return createPathFromCurves(curves.topRightBorderDoubleInnerBox,curves.topRightPaddingBox,curves.bottomRightBorderDoubleInnerBox,curves.bottomRightPaddingBox);case 2:return createPathFromCurves(curves.bottomRightBorderDoubleInnerBox,curves.bottomRightPaddingBox,curves.bottomLeftBorderDoubleInnerBox,curves.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(curves.bottomLeftBorderDoubleInnerBox,curves.bottomLeftPaddingBox,curves.topLeftBorderDoubleInnerBox,curves.topLeftPaddingBox);}};var parsePathForBorderStroke=function(curves,borderSide){switch(borderSide){case 0:return createStrokePathFromCurves(curves.topLeftBorderStroke,curves.topRightBorderStroke);case 1:return createStrokePathFromCurves(curves.topRightBorderStroke,curves.bottomRightBorderStroke);case 2:return createStrokePathFromCurves(curves.bottomRightBorderStroke,curves.bottomLeftBorderStroke);case 3:default:return createStrokePathFromCurves(curves.bottomLeftBorderStroke,curves.topLeftBorderStroke);}};var createStrokePathFromCurves=function(outer1,outer2){var path=[];if(isBezierCurve(outer1)){path.push(outer1.subdivide(0.5,false));}else {path.push(outer1);}if(isBezierCurve(outer2)){path.push(outer2.subdivide(0.5,true));}else {path.push(outer2);}return path;};var createPathFromCurves=function(outer1,inner1,outer2,inner2){var path=[];if(isBezierCurve(outer1)){path.push(outer1.subdivide(0.5,false));}else {path.push(outer1);}if(isBezierCurve(outer2)){path.push(outer2.subdivide(0.5,true));}else {path.push(outer2);}if(isBezierCurve(inner2)){path.push(inner2.subdivide(0.5,true).reverse());}else {path.push(inner2);}if(isBezierCurve(inner1)){path.push(inner1.subdivide(0.5,false).reverse());}else {path.push(inner1);}return path;};var paddingBox=function(element){var bounds=element.bounds;var styles=element.styles;return bounds.add(styles.borderLeftWidth,styles.borderTopWidth,-(styles.borderRightWidth+styles.borderLeftWidth),-(styles.borderTopWidth+styles.borderBottomWidth));};var contentBox=function(element){var styles=element.styles;var bounds=element.bounds;var paddingLeft=getAbsoluteValue(styles.paddingLeft,bounds.width);var paddingRight=getAbsoluteValue(styles.paddingRight,bounds.width);var paddingTop=getAbsoluteValue(styles.paddingTop,bounds.width);var paddingBottom=getAbsoluteValue(styles.paddingBottom,bounds.width);return bounds.add(paddingLeft+styles.borderLeftWidth,paddingTop+styles.borderTopWidth,-(styles.borderRightWidth+styles.borderLeftWidth+paddingLeft+paddingRight),-(styles.borderTopWidth+styles.borderBottomWidth+paddingTop+paddingBottom));};var calculateBackgroundPositioningArea=function(backgroundOrigin,element){if(backgroundOrigin===0/* BORDER_BOX */){return element.bounds;}if(backgroundOrigin===2/* CONTENT_BOX */){return contentBox(element);}return paddingBox(element);};var calculateBackgroundPaintingArea=function(backgroundClip,element){if(backgroundClip===0/* BORDER_BOX */){return element.bounds;}if(backgroundClip===2/* CONTENT_BOX */){return contentBox(element);}return paddingBox(element);};var calculateBackgroundRendering=function(container,index,intrinsicSize){var backgroundPositioningArea=calculateBackgroundPositioningArea(getBackgroundValueForIndex(container.styles.backgroundOrigin,index),container);var backgroundPaintingArea=calculateBackgroundPaintingArea(getBackgroundValueForIndex(container.styles.backgroundClip,index),container);var backgroundImageSize=calculateBackgroundSize(getBackgroundValueForIndex(container.styles.backgroundSize,index),intrinsicSize,backgroundPositioningArea);var sizeWidth=backgroundImageSize[0],sizeHeight=backgroundImageSize[1];var position=getAbsoluteValueForTuple(getBackgroundValueForIndex(container.styles.backgroundPosition,index),backgroundPositioningArea.width-sizeWidth,backgroundPositioningArea.height-sizeHeight);var path=calculateBackgroundRepeatPath(getBackgroundValueForIndex(container.styles.backgroundRepeat,index),position,backgroundImageSize,backgroundPositioningArea,backgroundPaintingArea);var offsetX=Math.round(backgroundPositioningArea.left+position[0]);var offsetY=Math.round(backgroundPositioningArea.top+position[1]);return [path,offsetX,offsetY,sizeWidth,sizeHeight];};var isAuto=function(token){return isIdentToken(token)&&token.value===BACKGROUND_SIZE.AUTO;};var hasIntrinsicValue=function(value){return typeof value==='number';};var calculateBackgroundSize=function(size,_a,bounds){var intrinsicWidth=_a[0],intrinsicHeight=_a[1],intrinsicProportion=_a[2];var first=size[0],second=size[1];if(!first){return [0,0];}if(isLengthPercentage(first)&&second&&isLengthPercentage(second)){return [getAbsoluteValue(first,bounds.width),getAbsoluteValue(second,bounds.height)];}var hasIntrinsicProportion=hasIntrinsicValue(intrinsicProportion);if(isIdentToken(first)&&(first.value===BACKGROUND_SIZE.CONTAIN||first.value===BACKGROUND_SIZE.COVER)){if(hasIntrinsicValue(intrinsicProportion)){var targetRatio=bounds.width/bounds.height;return targetRatio<intrinsicProportion!==(first.value===BACKGROUND_SIZE.COVER)?[bounds.width,bounds.width/intrinsicProportion]:[bounds.height*intrinsicProportion,bounds.height];}return [bounds.width,bounds.height];}var hasIntrinsicWidth=hasIntrinsicValue(intrinsicWidth);var hasIntrinsicHeight=hasIntrinsicValue(intrinsicHeight);var hasIntrinsicDimensions=hasIntrinsicWidth||hasIntrinsicHeight;// If the background-size is auto or auto auto:
    if(isAuto(first)&&(!second||isAuto(second))){// If the image has both horizontal and vertical intrinsic dimensions, it's rendered at that size.
    if(hasIntrinsicWidth&&hasIntrinsicHeight){return [intrinsicWidth,intrinsicHeight];}// If the image has no intrinsic dimensions and has no intrinsic proportions,
    // it's rendered at the size of the background positioning area.
    if(!hasIntrinsicProportion&&!hasIntrinsicDimensions){return [bounds.width,bounds.height];}// TODO If the image has no intrinsic dimensions but has intrinsic proportions, it's rendered as if contain had been specified instead.
    // If the image has only one intrinsic dimension and has intrinsic proportions, it's rendered at the size corresponding to that one dimension.
    // The other dimension is computed using the specified dimension and the intrinsic proportions.
    if(hasIntrinsicDimensions&&hasIntrinsicProportion){var width_1=hasIntrinsicWidth?intrinsicWidth:intrinsicHeight*intrinsicProportion;var height_1=hasIntrinsicHeight?intrinsicHeight:intrinsicWidth/intrinsicProportion;return [width_1,height_1];}// If the image has only one intrinsic dimension but has no intrinsic proportions,
    // it's rendered using the specified dimension and the other dimension of the background positioning area.
    var width_2=hasIntrinsicWidth?intrinsicWidth:bounds.width;var height_2=hasIntrinsicHeight?intrinsicHeight:bounds.height;return [width_2,height_2];}// If the image has intrinsic proportions, it's stretched to the specified dimension.
    // The unspecified dimension is computed using the specified dimension and the intrinsic proportions.
    if(hasIntrinsicProportion){var width_3=0;var height_3=0;if(isLengthPercentage(first)){width_3=getAbsoluteValue(first,bounds.width);}else if(isLengthPercentage(second)){height_3=getAbsoluteValue(second,bounds.height);}if(isAuto(first)){width_3=height_3*intrinsicProportion;}else if(!second||isAuto(second)){height_3=width_3/intrinsicProportion;}return [width_3,height_3];}// If the image has no intrinsic proportions, it's stretched to the specified dimension.
    // The unspecified dimension is computed using the image's corresponding intrinsic dimension,
    // if there is one. If there is no such intrinsic dimension,
    // it becomes the corresponding dimension of the background positioning area.
    var width=null;var height=null;if(isLengthPercentage(first)){width=getAbsoluteValue(first,bounds.width);}else if(second&&isLengthPercentage(second)){height=getAbsoluteValue(second,bounds.height);}if(width!==null&&(!second||isAuto(second))){height=hasIntrinsicWidth&&hasIntrinsicHeight?width/intrinsicWidth*intrinsicHeight:bounds.height;}if(height!==null&&isAuto(first)){width=hasIntrinsicWidth&&hasIntrinsicHeight?height/intrinsicHeight*intrinsicWidth:bounds.width;}if(width!==null&&height!==null){return [width,height];}throw new Error("Unable to calculate background-size for element");};var getBackgroundValueForIndex=function(values,index){var value=values[index];if(typeof value==='undefined'){return values[0];}return value;};var calculateBackgroundRepeatPath=function(repeat,_a,_b,backgroundPositioningArea,backgroundPaintingArea){var x=_a[0],y=_a[1];var width=_b[0],height=_b[1];switch(repeat){case 2/* REPEAT_X */:return [new Vector(Math.round(backgroundPositioningArea.left),Math.round(backgroundPositioningArea.top+y)),new Vector(Math.round(backgroundPositioningArea.left+backgroundPositioningArea.width),Math.round(backgroundPositioningArea.top+y)),new Vector(Math.round(backgroundPositioningArea.left+backgroundPositioningArea.width),Math.round(height+backgroundPositioningArea.top+y)),new Vector(Math.round(backgroundPositioningArea.left),Math.round(height+backgroundPositioningArea.top+y))];case 3/* REPEAT_Y */:return [new Vector(Math.round(backgroundPositioningArea.left+x),Math.round(backgroundPositioningArea.top)),new Vector(Math.round(backgroundPositioningArea.left+x+width),Math.round(backgroundPositioningArea.top)),new Vector(Math.round(backgroundPositioningArea.left+x+width),Math.round(backgroundPositioningArea.height+backgroundPositioningArea.top)),new Vector(Math.round(backgroundPositioningArea.left+x),Math.round(backgroundPositioningArea.height+backgroundPositioningArea.top))];case 1/* NO_REPEAT */:return [new Vector(Math.round(backgroundPositioningArea.left+x),Math.round(backgroundPositioningArea.top+y)),new Vector(Math.round(backgroundPositioningArea.left+x+width),Math.round(backgroundPositioningArea.top+y)),new Vector(Math.round(backgroundPositioningArea.left+x+width),Math.round(backgroundPositioningArea.top+y+height)),new Vector(Math.round(backgroundPositioningArea.left+x),Math.round(backgroundPositioningArea.top+y+height))];default:return [new Vector(Math.round(backgroundPaintingArea.left),Math.round(backgroundPaintingArea.top)),new Vector(Math.round(backgroundPaintingArea.left+backgroundPaintingArea.width),Math.round(backgroundPaintingArea.top)),new Vector(Math.round(backgroundPaintingArea.left+backgroundPaintingArea.width),Math.round(backgroundPaintingArea.height+backgroundPaintingArea.top)),new Vector(Math.round(backgroundPaintingArea.left),Math.round(backgroundPaintingArea.height+backgroundPaintingArea.top))];}};var SMALL_IMAGE='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';var SAMPLE_TEXT='Hidden Text';var FontMetrics=/** @class */function(){function FontMetrics(document){this._data={};this._document=document;}FontMetrics.prototype.parseMetrics=function(fontFamily,fontSize){var container=this._document.createElement('div');var img=this._document.createElement('img');var span=this._document.createElement('span');var body=this._document.body;container.style.visibility='hidden';container.style.fontFamily=fontFamily;container.style.fontSize=fontSize;container.style.margin='0';container.style.padding='0';container.style.whiteSpace='nowrap';body.appendChild(container);img.src=SMALL_IMAGE;img.width=1;img.height=1;img.style.margin='0';img.style.padding='0';img.style.verticalAlign='baseline';span.style.fontFamily=fontFamily;span.style.fontSize=fontSize;span.style.margin='0';span.style.padding='0';span.appendChild(this._document.createTextNode(SAMPLE_TEXT));container.appendChild(span);container.appendChild(img);var baseline=img.offsetTop-span.offsetTop+2;container.removeChild(span);container.appendChild(this._document.createTextNode(SAMPLE_TEXT));container.style.lineHeight='normal';img.style.verticalAlign='super';var middle=img.offsetTop-container.offsetTop+2;body.removeChild(container);return {baseline:baseline,middle:middle};};FontMetrics.prototype.getMetrics=function(fontFamily,fontSize){var key=fontFamily+" "+fontSize;if(typeof this._data[key]==='undefined'){this._data[key]=this.parseMetrics(fontFamily,fontSize);}return this._data[key];};return FontMetrics;}();var Renderer=/** @class */function(){function Renderer(context,options){this.context=context;this.options=options;}return Renderer;}();var MASK_OFFSET=10000;var CanvasRenderer=/** @class */function(_super){__extends(CanvasRenderer,_super);function CanvasRenderer(context,options){var _this=_super.call(this,context,options)||this;_this._activeEffects=[];_this.canvas=options.canvas?options.canvas:document.createElement('canvas');_this.ctx=_this.canvas.getContext('2d');if(!options.canvas){_this.canvas.width=Math.floor(options.width*options.scale);_this.canvas.height=Math.floor(options.height*options.scale);_this.canvas.style.width=options.width+"px";_this.canvas.style.height=options.height+"px";}_this.fontMetrics=new FontMetrics(document);_this.ctx.scale(_this.options.scale,_this.options.scale);_this.ctx.translate(-options.x,-options.y);_this.ctx.textBaseline='bottom';_this._activeEffects=[];_this.context.logger.debug("Canvas renderer initialized ("+options.width+"x"+options.height+") with scale "+options.scale);return _this;}CanvasRenderer.prototype.applyEffects=function(effects){var _this=this;while(this._activeEffects.length){this.popEffect();}effects.forEach(function(effect){return _this.applyEffect(effect);});};CanvasRenderer.prototype.applyEffect=function(effect){this.ctx.save();if(isOpacityEffect(effect)){this.ctx.globalAlpha=effect.opacity;}if(isTransformEffect(effect)){this.ctx.translate(effect.offsetX,effect.offsetY);this.ctx.transform(effect.matrix[0],effect.matrix[1],effect.matrix[2],effect.matrix[3],effect.matrix[4],effect.matrix[5]);this.ctx.translate(-effect.offsetX,-effect.offsetY);}if(isClipEffect(effect)){this.path(effect.path);this.ctx.clip();}this._activeEffects.push(effect);};CanvasRenderer.prototype.popEffect=function(){this._activeEffects.pop();this.ctx.restore();};CanvasRenderer.prototype.renderStack=function(stack){return __awaiter(this,void 0,void 0,function(){var styles;return __generator(this,function(_a){switch(_a.label){case 0:styles=stack.element.container.styles;if(!styles.isVisible())return [3/*break*/,2];return [4/*yield*/,this.renderStackContent(stack)];case 1:_a.sent();_a.label=2;case 2:return [2/*return*/];}});});};CanvasRenderer.prototype.renderNode=function(paint){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:if(contains(paint.container.flags,16/* DEBUG_RENDER */)){debugger;}if(!paint.container.styles.isVisible())return [3/*break*/,3];return [4/*yield*/,this.renderNodeBackgroundAndBorders(paint)];case 1:_a.sent();return [4/*yield*/,this.renderNodeContent(paint)];case 2:_a.sent();_a.label=3;case 3:return [2/*return*/];}});});};CanvasRenderer.prototype.renderTextWithLetterSpacing=function(text,letterSpacing,baseline){var _this=this;if(letterSpacing===0){this.ctx.fillText(text.text,text.bounds.left,text.bounds.top+baseline);}else {var letters=segmentGraphemes(text.text);letters.reduce(function(left,letter){_this.ctx.fillText(letter,left,text.bounds.top+baseline);return left+_this.ctx.measureText(letter).width;},text.bounds.left);}};CanvasRenderer.prototype.createFontStyle=function(styles){var fontVariant=styles.fontVariant.filter(function(variant){return variant==='normal'||variant==='small-caps';}).join('');var fontFamily=fixIOSSystemFonts(styles.fontFamily).join(', ');var fontSize=isDimensionToken(styles.fontSize)?""+styles.fontSize.number+styles.fontSize.unit:styles.fontSize.number+"px";return [[styles.fontStyle,fontVariant,styles.fontWeight,fontSize,fontFamily].join(' '),fontFamily,fontSize];};CanvasRenderer.prototype.renderTextNode=function(text,styles){return __awaiter(this,void 0,void 0,function(){var _a,font,fontFamily,fontSize,_b,baseline,middle,paintOrder;var _this=this;return __generator(this,function(_c){_a=this.createFontStyle(styles),font=_a[0],fontFamily=_a[1],fontSize=_a[2];this.ctx.font=font;this.ctx.direction=styles.direction===1/* RTL */?'rtl':'ltr';this.ctx.textAlign='left';this.ctx.textBaseline='alphabetic';_b=this.fontMetrics.getMetrics(fontFamily,fontSize),baseline=_b.baseline,middle=_b.middle;paintOrder=styles.paintOrder;text.textBounds.forEach(function(text){paintOrder.forEach(function(paintOrderLayer){switch(paintOrderLayer){case 0/* FILL */:_this.ctx.fillStyle=asString(styles.color);_this.renderTextWithLetterSpacing(text,styles.letterSpacing,baseline);var textShadows=styles.textShadow;if(textShadows.length&&text.text.trim().length){textShadows.slice(0).reverse().forEach(function(textShadow){_this.ctx.shadowColor=asString(textShadow.color);_this.ctx.shadowOffsetX=textShadow.offsetX.number*_this.options.scale;_this.ctx.shadowOffsetY=textShadow.offsetY.number*_this.options.scale;_this.ctx.shadowBlur=textShadow.blur.number;_this.renderTextWithLetterSpacing(text,styles.letterSpacing,baseline);});_this.ctx.shadowColor='';_this.ctx.shadowOffsetX=0;_this.ctx.shadowOffsetY=0;_this.ctx.shadowBlur=0;}if(styles.textDecorationLine.length){_this.ctx.fillStyle=asString(styles.textDecorationColor||styles.color);styles.textDecorationLine.forEach(function(textDecorationLine){switch(textDecorationLine){case 1/* UNDERLINE */:// Draws a line at the baseline of the font
    // TODO As some browsers display the line as more than 1px if the font-size is big,
    // need to take that into account both in position and size
    _this.ctx.fillRect(text.bounds.left,Math.round(text.bounds.top+baseline),text.bounds.width,1);break;case 2/* OVERLINE */:_this.ctx.fillRect(text.bounds.left,Math.round(text.bounds.top),text.bounds.width,1);break;case 3/* LINE_THROUGH */:// TODO try and find exact position for line-through
    _this.ctx.fillRect(text.bounds.left,Math.ceil(text.bounds.top+middle),text.bounds.width,1);break;}});}break;case 1/* STROKE */:if(styles.webkitTextStrokeWidth&&text.text.trim().length){_this.ctx.strokeStyle=asString(styles.webkitTextStrokeColor);_this.ctx.lineWidth=styles.webkitTextStrokeWidth;// eslint-disable-next-line @typescript-eslint/no-explicit-any
    _this.ctx.lineJoin=!!window.chrome?'miter':'round';_this.ctx.strokeText(text.text,text.bounds.left,text.bounds.top+baseline);}_this.ctx.strokeStyle='';_this.ctx.lineWidth=0;_this.ctx.lineJoin='miter';break;}});});return [2/*return*/];});});};CanvasRenderer.prototype.renderReplacedElement=function(container,curves,image){if(image&&container.intrinsicWidth>0&&container.intrinsicHeight>0){var box=contentBox(container);var path=calculatePaddingBoxPath(curves);this.path(path);this.ctx.save();this.ctx.clip();this.ctx.drawImage(image,0,0,container.intrinsicWidth,container.intrinsicHeight,box.left,box.top,box.width,box.height);this.ctx.restore();}};CanvasRenderer.prototype.renderNodeContent=function(paint){return __awaiter(this,void 0,void 0,function(){var container,curves,styles,_i,_a,child,image,image,iframeRenderer,canvas,size,_b,fontFamily,fontSize,baseline,bounds,x,textBounds,img,image,url,fontFamily,bounds;return __generator(this,function(_c){switch(_c.label){case 0:this.applyEffects(paint.getEffects(4/* CONTENT */));container=paint.container;curves=paint.curves;styles=container.styles;_i=0,_a=container.textNodes;_c.label=1;case 1:if(!(_i<_a.length))return [3/*break*/,4];child=_a[_i];return [4/*yield*/,this.renderTextNode(child,styles)];case 2:_c.sent();_c.label=3;case 3:_i++;return [3/*break*/,1];case 4:if(!(container instanceof ImageElementContainer))return [3/*break*/,8];_c.label=5;case 5:_c.trys.push([5,7,,8]);return [4/*yield*/,this.context.cache.match(container.src)];case 6:image=_c.sent();this.renderReplacedElement(container,curves,image);return [3/*break*/,8];case 7:_c.sent();this.context.logger.error("Error loading image "+container.src);return [3/*break*/,8];case 8:if(container instanceof CanvasElementContainer){this.renderReplacedElement(container,curves,container.canvas);}if(!(container instanceof SVGElementContainer))return [3/*break*/,12];_c.label=9;case 9:_c.trys.push([9,11,,12]);return [4/*yield*/,this.context.cache.match(container.svg)];case 10:image=_c.sent();this.renderReplacedElement(container,curves,image);return [3/*break*/,12];case 11:_c.sent();this.context.logger.error("Error loading svg "+container.svg.substring(0,255));return [3/*break*/,12];case 12:if(!(container instanceof IFrameElementContainer&&container.tree))return [3/*break*/,14];iframeRenderer=new CanvasRenderer(this.context,{scale:this.options.scale,backgroundColor:container.backgroundColor,x:0,y:0,width:container.width,height:container.height});return [4/*yield*/,iframeRenderer.render(container.tree)];case 13:canvas=_c.sent();if(container.width&&container.height){this.ctx.drawImage(canvas,0,0,container.width,container.height,container.bounds.left,container.bounds.top,container.bounds.width,container.bounds.height);}_c.label=14;case 14:if(container instanceof InputElementContainer){size=Math.min(container.bounds.width,container.bounds.height);if(container.type===CHECKBOX){if(container.checked){this.ctx.save();this.path([new Vector(container.bounds.left+size*0.39363,container.bounds.top+size*0.79),new Vector(container.bounds.left+size*0.16,container.bounds.top+size*0.5549),new Vector(container.bounds.left+size*0.27347,container.bounds.top+size*0.44071),new Vector(container.bounds.left+size*0.39694,container.bounds.top+size*0.5649),new Vector(container.bounds.left+size*0.72983,container.bounds.top+size*0.23),new Vector(container.bounds.left+size*0.84,container.bounds.top+size*0.34085),new Vector(container.bounds.left+size*0.39363,container.bounds.top+size*0.79)]);this.ctx.fillStyle=asString(INPUT_COLOR);this.ctx.fill();this.ctx.restore();}}else if(container.type===RADIO){if(container.checked){this.ctx.save();this.ctx.beginPath();this.ctx.arc(container.bounds.left+size/2,container.bounds.top+size/2,size/4,0,Math.PI*2,true);this.ctx.fillStyle=asString(INPUT_COLOR);this.ctx.fill();this.ctx.restore();}}}if(isTextInputElement(container)&&container.value.length){_b=this.createFontStyle(styles),fontFamily=_b[0],fontSize=_b[1];baseline=this.fontMetrics.getMetrics(fontFamily,fontSize).baseline;this.ctx.font=fontFamily;this.ctx.fillStyle=asString(styles.color);this.ctx.textBaseline='alphabetic';this.ctx.textAlign=canvasTextAlign(container.styles.textAlign);bounds=contentBox(container);x=0;switch(container.styles.textAlign){case 1/* CENTER */:x+=bounds.width/2;break;case 2/* RIGHT */:x+=bounds.width;break;}textBounds=bounds.add(x,0,0,-bounds.height/2+1);this.ctx.save();this.path([new Vector(bounds.left,bounds.top),new Vector(bounds.left+bounds.width,bounds.top),new Vector(bounds.left+bounds.width,bounds.top+bounds.height),new Vector(bounds.left,bounds.top+bounds.height)]);this.ctx.clip();this.renderTextWithLetterSpacing(new TextBounds(container.value,textBounds),styles.letterSpacing,baseline);this.ctx.restore();this.ctx.textBaseline='alphabetic';this.ctx.textAlign='left';}if(!contains(container.styles.display,2048/* LIST_ITEM */))return [3/*break*/,20];if(!(container.styles.listStyleImage!==null))return [3/*break*/,19];img=container.styles.listStyleImage;if(!(img.type===0/* URL */))return [3/*break*/,18];image=void 0;url=img.url;_c.label=15;case 15:_c.trys.push([15,17,,18]);return [4/*yield*/,this.context.cache.match(url)];case 16:image=_c.sent();this.ctx.drawImage(image,container.bounds.left-(image.width+10),container.bounds.top);return [3/*break*/,18];case 17:_c.sent();this.context.logger.error("Error loading list-style-image "+url);return [3/*break*/,18];case 18:return [3/*break*/,20];case 19:if(paint.listValue&&container.styles.listStyleType!==-1/* NONE */){fontFamily=this.createFontStyle(styles)[0];this.ctx.font=fontFamily;this.ctx.fillStyle=asString(styles.color);this.ctx.textBaseline='middle';this.ctx.textAlign='right';bounds=new Bounds(container.bounds.left,container.bounds.top+getAbsoluteValue(container.styles.paddingTop,container.bounds.width),container.bounds.width,computeLineHeight(styles.lineHeight,styles.fontSize.number)/2+1);this.renderTextWithLetterSpacing(new TextBounds(paint.listValue,bounds),styles.letterSpacing,computeLineHeight(styles.lineHeight,styles.fontSize.number)/2+2);this.ctx.textBaseline='bottom';this.ctx.textAlign='left';}_c.label=20;case 20:return [2/*return*/];}});});};CanvasRenderer.prototype.renderStackContent=function(stack){return __awaiter(this,void 0,void 0,function(){var _i,_a,child,_b,_c,child,_d,_e,child,_f,_g,child,_h,_j,child,_k,_l,child,_m,_o,child;return __generator(this,function(_p){switch(_p.label){case 0:if(contains(stack.element.container.flags,16/* DEBUG_RENDER */)){debugger;}// https://www.w3.org/TR/css-position-3/#painting-order
    // 1. the background and borders of the element forming the stacking context.
    return [4/*yield*/,this.renderNodeBackgroundAndBorders(stack.element)];case 1:// https://www.w3.org/TR/css-position-3/#painting-order
    // 1. the background and borders of the element forming the stacking context.
    _p.sent();_i=0,_a=stack.negativeZIndex;_p.label=2;case 2:if(!(_i<_a.length))return [3/*break*/,5];child=_a[_i];return [4/*yield*/,this.renderStack(child)];case 3:_p.sent();_p.label=4;case 4:_i++;return [3/*break*/,2];case 5:// 3. For all its in-flow, non-positioned, block-level descendants in tree order:
    return [4/*yield*/,this.renderNodeContent(stack.element)];case 6:// 3. For all its in-flow, non-positioned, block-level descendants in tree order:
    _p.sent();_b=0,_c=stack.nonInlineLevel;_p.label=7;case 7:if(!(_b<_c.length))return [3/*break*/,10];child=_c[_b];return [4/*yield*/,this.renderNode(child)];case 8:_p.sent();_p.label=9;case 9:_b++;return [3/*break*/,7];case 10:_d=0,_e=stack.nonPositionedFloats;_p.label=11;case 11:if(!(_d<_e.length))return [3/*break*/,14];child=_e[_d];return [4/*yield*/,this.renderStack(child)];case 12:_p.sent();_p.label=13;case 13:_d++;return [3/*break*/,11];case 14:_f=0,_g=stack.nonPositionedInlineLevel;_p.label=15;case 15:if(!(_f<_g.length))return [3/*break*/,18];child=_g[_f];return [4/*yield*/,this.renderStack(child)];case 16:_p.sent();_p.label=17;case 17:_f++;return [3/*break*/,15];case 18:_h=0,_j=stack.inlineLevel;_p.label=19;case 19:if(!(_h<_j.length))return [3/*break*/,22];child=_j[_h];return [4/*yield*/,this.renderNode(child)];case 20:_p.sent();_p.label=21;case 21:_h++;return [3/*break*/,19];case 22:_k=0,_l=stack.zeroOrAutoZIndexOrTransformedOrOpacity;_p.label=23;case 23:if(!(_k<_l.length))return [3/*break*/,26];child=_l[_k];return [4/*yield*/,this.renderStack(child)];case 24:_p.sent();_p.label=25;case 25:_k++;return [3/*break*/,23];case 26:_m=0,_o=stack.positiveZIndex;_p.label=27;case 27:if(!(_m<_o.length))return [3/*break*/,30];child=_o[_m];return [4/*yield*/,this.renderStack(child)];case 28:_p.sent();_p.label=29;case 29:_m++;return [3/*break*/,27];case 30:return [2/*return*/];}});});};CanvasRenderer.prototype.mask=function(paths){this.ctx.beginPath();this.ctx.moveTo(0,0);this.ctx.lineTo(this.canvas.width,0);this.ctx.lineTo(this.canvas.width,this.canvas.height);this.ctx.lineTo(0,this.canvas.height);this.ctx.lineTo(0,0);this.formatPath(paths.slice(0).reverse());this.ctx.closePath();};CanvasRenderer.prototype.path=function(paths){this.ctx.beginPath();this.formatPath(paths);this.ctx.closePath();};CanvasRenderer.prototype.formatPath=function(paths){var _this=this;paths.forEach(function(point,index){var start=isBezierCurve(point)?point.start:point;if(index===0){_this.ctx.moveTo(start.x,start.y);}else {_this.ctx.lineTo(start.x,start.y);}if(isBezierCurve(point)){_this.ctx.bezierCurveTo(point.startControl.x,point.startControl.y,point.endControl.x,point.endControl.y,point.end.x,point.end.y);}});};CanvasRenderer.prototype.renderRepeat=function(path,pattern,offsetX,offsetY){this.path(path);this.ctx.fillStyle=pattern;this.ctx.translate(offsetX,offsetY);this.ctx.fill();this.ctx.translate(-offsetX,-offsetY);};CanvasRenderer.prototype.resizeImage=function(image,width,height){var _a;if(image.width===width&&image.height===height){return image;}var ownerDocument=(_a=this.canvas.ownerDocument)!==null&&_a!==void 0?_a:document;var canvas=ownerDocument.createElement('canvas');canvas.width=Math.max(1,width);canvas.height=Math.max(1,height);var ctx=canvas.getContext('2d');ctx.drawImage(image,0,0,image.width,image.height,0,0,width,height);return canvas;};CanvasRenderer.prototype.renderBackgroundImage=function(container){return __awaiter(this,void 0,void 0,function(){var index,_loop_1,this_1,_i,_a,backgroundImage;return __generator(this,function(_b){switch(_b.label){case 0:index=container.styles.backgroundImage.length-1;_loop_1=function(backgroundImage){var image,url,_c,path,x,y,width,height,pattern,_d,path,x,y,width,height,_e,lineLength,x0,x1,y0,y1,canvas,ctx,gradient_1,pattern,_f,path,left,top_1,width,height,position,x,y,_g,rx,ry,radialGradient_1,midX,midY,f,invF;return __generator(this,function(_h){switch(_h.label){case 0:if(!(backgroundImage.type===0/* URL */))return [3/*break*/,5];image=void 0;url=backgroundImage.url;_h.label=1;case 1:_h.trys.push([1,3,,4]);return [4/*yield*/,this_1.context.cache.match(url)];case 2:image=_h.sent();return [3/*break*/,4];case 3:_h.sent();this_1.context.logger.error("Error loading background-image "+url);return [3/*break*/,4];case 4:if(image){_c=calculateBackgroundRendering(container,index,[image.width,image.height,image.width/image.height]),path=_c[0],x=_c[1],y=_c[2],width=_c[3],height=_c[4];pattern=this_1.ctx.createPattern(this_1.resizeImage(image,width,height),'repeat');this_1.renderRepeat(path,pattern,x,y);}return [3/*break*/,6];case 5:if(isLinearGradient(backgroundImage)){_d=calculateBackgroundRendering(container,index,[null,null,null]),path=_d[0],x=_d[1],y=_d[2],width=_d[3],height=_d[4];_e=calculateGradientDirection(backgroundImage.angle,width,height),lineLength=_e[0],x0=_e[1],x1=_e[2],y0=_e[3],y1=_e[4];canvas=document.createElement('canvas');canvas.width=width;canvas.height=height;ctx=canvas.getContext('2d');gradient_1=ctx.createLinearGradient(x0,y0,x1,y1);processColorStops(backgroundImage.stops,lineLength).forEach(function(colorStop){return gradient_1.addColorStop(colorStop.stop,asString(colorStop.color));});ctx.fillStyle=gradient_1;ctx.fillRect(0,0,width,height);if(width>0&&height>0){pattern=this_1.ctx.createPattern(canvas,'repeat');this_1.renderRepeat(path,pattern,x,y);}}else if(isRadialGradient(backgroundImage)){_f=calculateBackgroundRendering(container,index,[null,null,null]),path=_f[0],left=_f[1],top_1=_f[2],width=_f[3],height=_f[4];position=backgroundImage.position.length===0?[FIFTY_PERCENT]:backgroundImage.position;x=getAbsoluteValue(position[0],width);y=getAbsoluteValue(position[position.length-1],height);_g=calculateRadius(backgroundImage,x,y,width,height),rx=_g[0],ry=_g[1];if(rx>0&&ry>0){radialGradient_1=this_1.ctx.createRadialGradient(left+x,top_1+y,0,left+x,top_1+y,rx);processColorStops(backgroundImage.stops,rx*2).forEach(function(colorStop){return radialGradient_1.addColorStop(colorStop.stop,asString(colorStop.color));});this_1.path(path);this_1.ctx.fillStyle=radialGradient_1;if(rx!==ry){midX=container.bounds.left+0.5*container.bounds.width;midY=container.bounds.top+0.5*container.bounds.height;f=ry/rx;invF=1/f;this_1.ctx.save();this_1.ctx.translate(midX,midY);this_1.ctx.transform(1,0,0,f,0,0);this_1.ctx.translate(-midX,-midY);this_1.ctx.fillRect(left,invF*(top_1-midY)+midY,width,height*invF);this_1.ctx.restore();}else {this_1.ctx.fill();}}}_h.label=6;case 6:index--;return [2/*return*/];}});};this_1=this;_i=0,_a=container.styles.backgroundImage.slice(0).reverse();_b.label=1;case 1:if(!(_i<_a.length))return [3/*break*/,4];backgroundImage=_a[_i];return [5/*yield**/,_loop_1(backgroundImage)];case 2:_b.sent();_b.label=3;case 3:_i++;return [3/*break*/,1];case 4:return [2/*return*/];}});});};CanvasRenderer.prototype.renderSolidBorder=function(color,side,curvePoints){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){this.path(parsePathForBorder(curvePoints,side));this.ctx.fillStyle=asString(color);this.ctx.fill();return [2/*return*/];});});};CanvasRenderer.prototype.renderDoubleBorder=function(color,width,side,curvePoints){return __awaiter(this,void 0,void 0,function(){var outerPaths,innerPaths;return __generator(this,function(_a){switch(_a.label){case 0:if(!(width<3))return [3/*break*/,2];return [4/*yield*/,this.renderSolidBorder(color,side,curvePoints)];case 1:_a.sent();return [2/*return*/];case 2:outerPaths=parsePathForBorderDoubleOuter(curvePoints,side);this.path(outerPaths);this.ctx.fillStyle=asString(color);this.ctx.fill();innerPaths=parsePathForBorderDoubleInner(curvePoints,side);this.path(innerPaths);this.ctx.fill();return [2/*return*/];}});});};CanvasRenderer.prototype.renderNodeBackgroundAndBorders=function(paint){return __awaiter(this,void 0,void 0,function(){var styles,hasBackground,borders,backgroundPaintingArea,side,_i,borders_1,border;var _this=this;return __generator(this,function(_a){switch(_a.label){case 0:this.applyEffects(paint.getEffects(2/* BACKGROUND_BORDERS */));styles=paint.container.styles;hasBackground=!isTransparent(styles.backgroundColor)||styles.backgroundImage.length;borders=[{style:styles.borderTopStyle,color:styles.borderTopColor,width:styles.borderTopWidth},{style:styles.borderRightStyle,color:styles.borderRightColor,width:styles.borderRightWidth},{style:styles.borderBottomStyle,color:styles.borderBottomColor,width:styles.borderBottomWidth},{style:styles.borderLeftStyle,color:styles.borderLeftColor,width:styles.borderLeftWidth}];backgroundPaintingArea=calculateBackgroundCurvedPaintingArea(getBackgroundValueForIndex(styles.backgroundClip,0),paint.curves);if(!(hasBackground||styles.boxShadow.length))return [3/*break*/,2];this.ctx.save();this.path(backgroundPaintingArea);this.ctx.clip();if(!isTransparent(styles.backgroundColor)){this.ctx.fillStyle=asString(styles.backgroundColor);this.ctx.fill();}return [4/*yield*/,this.renderBackgroundImage(paint.container)];case 1:_a.sent();this.ctx.restore();styles.boxShadow.slice(0).reverse().forEach(function(shadow){_this.ctx.save();var borderBoxArea=calculateBorderBoxPath(paint.curves);var maskOffset=shadow.inset?0:MASK_OFFSET;var shadowPaintingArea=transformPath(borderBoxArea,-maskOffset+(shadow.inset?1:-1)*shadow.spread.number,(shadow.inset?1:-1)*shadow.spread.number,shadow.spread.number*(shadow.inset?-2:2),shadow.spread.number*(shadow.inset?-2:2));if(shadow.inset){_this.path(borderBoxArea);_this.ctx.clip();_this.mask(shadowPaintingArea);}else {_this.mask(borderBoxArea);_this.ctx.clip();_this.path(shadowPaintingArea);}_this.ctx.shadowOffsetX=shadow.offsetX.number+maskOffset;_this.ctx.shadowOffsetY=shadow.offsetY.number;_this.ctx.shadowColor=asString(shadow.color);_this.ctx.shadowBlur=shadow.blur.number;_this.ctx.fillStyle=shadow.inset?asString(shadow.color):'rgba(0,0,0,1)';_this.ctx.fill();_this.ctx.restore();});_a.label=2;case 2:side=0;_i=0,borders_1=borders;_a.label=3;case 3:if(!(_i<borders_1.length))return [3/*break*/,13];border=borders_1[_i];if(!(border.style!==0/* NONE */&&!isTransparent(border.color)&&border.width>0))return [3/*break*/,11];if(!(border.style===2/* DASHED */))return [3/*break*/,5];return [4/*yield*/,this.renderDashedDottedBorder(border.color,border.width,side,paint.curves,2/* DASHED */)];case 4:_a.sent();return [3/*break*/,11];case 5:if(!(border.style===3/* DOTTED */))return [3/*break*/,7];return [4/*yield*/,this.renderDashedDottedBorder(border.color,border.width,side,paint.curves,3/* DOTTED */)];case 6:_a.sent();return [3/*break*/,11];case 7:if(!(border.style===4/* DOUBLE */))return [3/*break*/,9];return [4/*yield*/,this.renderDoubleBorder(border.color,border.width,side,paint.curves)];case 8:_a.sent();return [3/*break*/,11];case 9:return [4/*yield*/,this.renderSolidBorder(border.color,side,paint.curves)];case 10:_a.sent();_a.label=11;case 11:side++;_a.label=12;case 12:_i++;return [3/*break*/,3];case 13:return [2/*return*/];}});});};CanvasRenderer.prototype.renderDashedDottedBorder=function(color,width,side,curvePoints,style){return __awaiter(this,void 0,void 0,function(){var strokePaths,boxPaths,startX,startY,endX,endY,length,dashLength,spaceLength,useLineDash,multiplier,numberOfDashes,minSpace,maxSpace,path1,path2,path1,path2;return __generator(this,function(_a){this.ctx.save();strokePaths=parsePathForBorderStroke(curvePoints,side);boxPaths=parsePathForBorder(curvePoints,side);if(style===2/* DASHED */){this.path(boxPaths);this.ctx.clip();}if(isBezierCurve(boxPaths[0])){startX=boxPaths[0].start.x;startY=boxPaths[0].start.y;}else {startX=boxPaths[0].x;startY=boxPaths[0].y;}if(isBezierCurve(boxPaths[1])){endX=boxPaths[1].end.x;endY=boxPaths[1].end.y;}else {endX=boxPaths[1].x;endY=boxPaths[1].y;}if(side===0||side===2){length=Math.abs(startX-endX);}else {length=Math.abs(startY-endY);}this.ctx.beginPath();if(style===3/* DOTTED */){this.formatPath(strokePaths);}else {this.formatPath(boxPaths.slice(0,2));}dashLength=width<3?width*3:width*2;spaceLength=width<3?width*2:width;if(style===3/* DOTTED */){dashLength=width;spaceLength=width;}useLineDash=true;if(length<=dashLength*2){useLineDash=false;}else if(length<=dashLength*2+spaceLength){multiplier=length/(2*dashLength+spaceLength);dashLength*=multiplier;spaceLength*=multiplier;}else {numberOfDashes=Math.floor((length+spaceLength)/(dashLength+spaceLength));minSpace=(length-numberOfDashes*dashLength)/(numberOfDashes-1);maxSpace=(length-(numberOfDashes+1)*dashLength)/numberOfDashes;spaceLength=maxSpace<=0||Math.abs(spaceLength-minSpace)<Math.abs(spaceLength-maxSpace)?minSpace:maxSpace;}if(useLineDash){if(style===3/* DOTTED */){this.ctx.setLineDash([0,dashLength+spaceLength]);}else {this.ctx.setLineDash([dashLength,spaceLength]);}}if(style===3/* DOTTED */){this.ctx.lineCap='round';this.ctx.lineWidth=width;}else {this.ctx.lineWidth=width*2+1.1;}this.ctx.strokeStyle=asString(color);this.ctx.stroke();this.ctx.setLineDash([]);// dashed round edge gap
    if(style===2/* DASHED */){if(isBezierCurve(boxPaths[0])){path1=boxPaths[3];path2=boxPaths[0];this.ctx.beginPath();this.formatPath([new Vector(path1.end.x,path1.end.y),new Vector(path2.start.x,path2.start.y)]);this.ctx.stroke();}if(isBezierCurve(boxPaths[1])){path1=boxPaths[1];path2=boxPaths[2];this.ctx.beginPath();this.formatPath([new Vector(path1.end.x,path1.end.y),new Vector(path2.start.x,path2.start.y)]);this.ctx.stroke();}}this.ctx.restore();return [2/*return*/];});});};CanvasRenderer.prototype.render=function(element){return __awaiter(this,void 0,void 0,function(){var stack;return __generator(this,function(_a){switch(_a.label){case 0:if(this.options.backgroundColor){this.ctx.fillStyle=asString(this.options.backgroundColor);this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height);}stack=parseStackingContexts(element);return [4/*yield*/,this.renderStack(stack)];case 1:_a.sent();this.applyEffects([]);return [2/*return*/,this.canvas];}});});};return CanvasRenderer;}(Renderer);var isTextInputElement=function(container){if(container instanceof TextareaElementContainer){return true;}else if(container instanceof SelectElementContainer){return true;}else if(container instanceof InputElementContainer&&container.type!==RADIO&&container.type!==CHECKBOX){return true;}return false;};var calculateBackgroundCurvedPaintingArea=function(clip,curves){switch(clip){case 0/* BORDER_BOX */:return calculateBorderBoxPath(curves);case 2/* CONTENT_BOX */:return calculateContentBoxPath(curves);case 1/* PADDING_BOX */:default:return calculatePaddingBoxPath(curves);}};var canvasTextAlign=function(textAlign){switch(textAlign){case 1/* CENTER */:return 'center';case 2/* RIGHT */:return 'right';case 0/* LEFT */:default:return 'left';}};// see https://github.com/niklasvh/html2canvas/pull/2645
    var iOSBrokenFonts=['-apple-system','system-ui'];var fixIOSSystemFonts=function(fontFamilies){return /iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?fontFamilies.filter(function(fontFamily){return iOSBrokenFonts.indexOf(fontFamily)===-1;}):fontFamilies;};var ForeignObjectRenderer=/** @class */function(_super){__extends(ForeignObjectRenderer,_super);function ForeignObjectRenderer(context,options){var _this=_super.call(this,context,options)||this;_this.canvas=options.canvas?options.canvas:document.createElement('canvas');_this.ctx=_this.canvas.getContext('2d');_this.options=options;_this.canvas.width=Math.floor(options.width*options.scale);_this.canvas.height=Math.floor(options.height*options.scale);_this.canvas.style.width=options.width+"px";_this.canvas.style.height=options.height+"px";_this.ctx.scale(_this.options.scale,_this.options.scale);_this.ctx.translate(-options.x,-options.y);_this.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+options.width+"x"+options.height+" at "+options.x+","+options.y+") with scale "+options.scale);return _this;}ForeignObjectRenderer.prototype.render=function(element){return __awaiter(this,void 0,void 0,function(){var svg,img;return __generator(this,function(_a){switch(_a.label){case 0:svg=createForeignObjectSVG(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,element);return [4/*yield*/,loadSerializedSVG(svg)];case 1:img=_a.sent();if(this.options.backgroundColor){this.ctx.fillStyle=asString(this.options.backgroundColor);this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale);}this.ctx.drawImage(img,-this.options.x*this.options.scale,-this.options.y*this.options.scale);return [2/*return*/,this.canvas];}});});};return ForeignObjectRenderer;}(Renderer);var loadSerializedSVG=function(svg){return new Promise(function(resolve,reject){var img=new Image();img.onload=function(){resolve(img);};img.onerror=reject;img.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(svg));});};var Logger=/** @class */function(){function Logger(_a){var id=_a.id,enabled=_a.enabled;this.id=id;this.enabled=enabled;this.start=Date.now();}// eslint-disable-next-line @typescript-eslint/no-explicit-any
    Logger.prototype.debug=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}if(this.enabled){// eslint-disable-next-line no-console
    if(typeof window!=='undefined'&&window.console&&typeof console.debug==='function'){// eslint-disable-next-line no-console
    console.debug.apply(console,__spreadArray([this.id,this.getTime()+"ms"],args));}else {this.info.apply(this,args);}}};Logger.prototype.getTime=function(){return Date.now()-this.start;};// eslint-disable-next-line @typescript-eslint/no-explicit-any
    Logger.prototype.info=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}if(this.enabled){// eslint-disable-next-line no-console
    if(typeof window!=='undefined'&&window.console&&typeof console.info==='function'){// eslint-disable-next-line no-console
    console.info.apply(console,__spreadArray([this.id,this.getTime()+"ms"],args));}}};// eslint-disable-next-line @typescript-eslint/no-explicit-any
    Logger.prototype.warn=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}if(this.enabled){// eslint-disable-next-line no-console
    if(typeof window!=='undefined'&&window.console&&typeof console.warn==='function'){// eslint-disable-next-line no-console
    console.warn.apply(console,__spreadArray([this.id,this.getTime()+"ms"],args));}else {this.info.apply(this,args);}}};// eslint-disable-next-line @typescript-eslint/no-explicit-any
    Logger.prototype.error=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}if(this.enabled){// eslint-disable-next-line no-console
    if(typeof window!=='undefined'&&window.console&&typeof console.error==='function'){// eslint-disable-next-line no-console
    console.error.apply(console,__spreadArray([this.id,this.getTime()+"ms"],args));}else {this.info.apply(this,args);}}};Logger.instances={};return Logger;}();var Context=/** @class */function(){function Context(options,windowBounds){var _a;this.windowBounds=windowBounds;this.instanceName="#"+Context.instanceCount++;this.logger=new Logger({id:this.instanceName,enabled:options.logging});this.cache=(_a=options.cache)!==null&&_a!==void 0?_a:new Cache(this,options);}Context.instanceCount=1;return Context;}();var html2canvas=function(element,options){if(options===void 0){options={};}return renderElement(element,options);};if(typeof window!=='undefined'){CacheStorage.setContext(window);}var renderElement=function(element,opts){return __awaiter(void 0,void 0,void 0,function(){var ownerDocument,defaultView,resourceOptions,contextOptions,windowOptions,windowBounds,context,foreignObjectRendering,cloneOptions,documentCloner,clonedElement,container,_a,width,height,left,top,backgroundColor,renderOptions,canvas,renderer,root,renderer;var _b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,_p,_q,_r,_s,_t;return __generator(this,function(_u){switch(_u.label){case 0:if(!element||typeof element!=='object'){return [2/*return*/,Promise.reject('Invalid element provided as first argument')];}ownerDocument=element.ownerDocument;if(!ownerDocument){throw new Error("Element is not attached to a Document");}defaultView=ownerDocument.defaultView;if(!defaultView){throw new Error("Document is not attached to a Window");}resourceOptions={allowTaint:(_b=opts.allowTaint)!==null&&_b!==void 0?_b:false,imageTimeout:(_c=opts.imageTimeout)!==null&&_c!==void 0?_c:15000,proxy:opts.proxy,useCORS:(_d=opts.useCORS)!==null&&_d!==void 0?_d:false};contextOptions=__assign({logging:(_e=opts.logging)!==null&&_e!==void 0?_e:true,cache:opts.cache},resourceOptions);windowOptions={windowWidth:(_f=opts.windowWidth)!==null&&_f!==void 0?_f:defaultView.innerWidth,windowHeight:(_g=opts.windowHeight)!==null&&_g!==void 0?_g:defaultView.innerHeight,scrollX:(_h=opts.scrollX)!==null&&_h!==void 0?_h:defaultView.pageXOffset,scrollY:(_j=opts.scrollY)!==null&&_j!==void 0?_j:defaultView.pageYOffset};windowBounds=new Bounds(windowOptions.scrollX,windowOptions.scrollY,windowOptions.windowWidth,windowOptions.windowHeight);context=new Context(contextOptions,windowBounds);foreignObjectRendering=(_k=opts.foreignObjectRendering)!==null&&_k!==void 0?_k:false;cloneOptions={allowTaint:(_l=opts.allowTaint)!==null&&_l!==void 0?_l:false,onclone:opts.onclone,ignoreElements:opts.ignoreElements,inlineImages:foreignObjectRendering,copyStyles:foreignObjectRendering};context.logger.debug("Starting document clone with size "+windowBounds.width+"x"+windowBounds.height+" scrolled to "+-windowBounds.left+","+-windowBounds.top);documentCloner=new DocumentCloner(context,element,cloneOptions);clonedElement=documentCloner.clonedReferenceElement;if(!clonedElement){return [2/*return*/,Promise.reject("Unable to find element in cloned iframe")];}return [4/*yield*/,documentCloner.toIFrame(ownerDocument,windowBounds)];case 1:container=_u.sent();_a=isBodyElement(clonedElement)||isHTMLElement(clonedElement)?parseDocumentSize(clonedElement.ownerDocument):parseBounds(context,clonedElement),width=_a.width,height=_a.height,left=_a.left,top=_a.top;backgroundColor=parseBackgroundColor(context,clonedElement,opts.backgroundColor);renderOptions={canvas:opts.canvas,backgroundColor:backgroundColor,scale:(_o=(_m=opts.scale)!==null&&_m!==void 0?_m:defaultView.devicePixelRatio)!==null&&_o!==void 0?_o:1,x:((_p=opts.x)!==null&&_p!==void 0?_p:0)+left,y:((_q=opts.y)!==null&&_q!==void 0?_q:0)+top,width:(_r=opts.width)!==null&&_r!==void 0?_r:Math.ceil(width),height:(_s=opts.height)!==null&&_s!==void 0?_s:Math.ceil(height)};if(!foreignObjectRendering)return [3/*break*/,3];context.logger.debug("Document cloned, using foreign object rendering");renderer=new ForeignObjectRenderer(context,renderOptions);return [4/*yield*/,renderer.render(clonedElement)];case 2:canvas=_u.sent();return [3/*break*/,5];case 3:context.logger.debug("Document cloned, element located at "+left+","+top+" with size "+width+"x"+height+" using computed rendering");context.logger.debug("Starting DOM parsing");root=parseTree(context,clonedElement);if(backgroundColor===root.styles.backgroundColor){root.styles.backgroundColor=COLORS.TRANSPARENT;}context.logger.debug("Starting renderer for element at "+renderOptions.x+","+renderOptions.y+" with size "+renderOptions.width+"x"+renderOptions.height);renderer=new CanvasRenderer(context,renderOptions);return [4/*yield*/,renderer.render(root)];case 4:canvas=_u.sent();_u.label=5;case 5:if((_t=opts.removeContainer)!==null&&_t!==void 0?_t:true){if(!DocumentCloner.destroy(container)){context.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore");}}context.logger.debug("Finished rendering");return [2/*return*/,canvas];}});});};var parseBackgroundColor=function(context,element,backgroundColorOverride){var ownerDocument=element.ownerDocument;// http://www.w3.org/TR/css3-background/#special-backgrounds
    var documentBackgroundColor=ownerDocument.documentElement?parseColor(context,getComputedStyle(ownerDocument.documentElement).backgroundColor):COLORS.TRANSPARENT;var bodyBackgroundColor=ownerDocument.body?parseColor(context,getComputedStyle(ownerDocument.body).backgroundColor):COLORS.TRANSPARENT;var defaultBackgroundColor=typeof backgroundColorOverride==='string'?parseColor(context,backgroundColorOverride):backgroundColorOverride===null?COLORS.TRANSPARENT:0xffffffff;return element===ownerDocument.documentElement?isTransparent(documentBackgroundColor)?isTransparent(bodyBackgroundColor)?defaultBackgroundColor:bodyBackgroundColor:documentBackgroundColor:defaultBackgroundColor;};// DEFLATE is a complex format; to read this code, you should probably check the RFC first:
    // aliases for shorter compressed code (most minifers don't do this)
    var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array;// fixed length extra bits
    var fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,/* unused */0,0,/* impossible */0]);// fixed distance extra bits
    // see fleb note
    var fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,/* unused */0,0]);// code length index map
    var clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);// get base, reverse index map from extra bits
    var freb=function(eb,start){var b=new u16(31);for(var i=0;i<31;++i){b[i]=start+=1<<eb[i-1];}// numbers here are at max 18 bits
    var r=new u32(b[30]);for(var i=1;i<30;++i){for(var j=b[i];j<b[i+1];++j){r[j]=j-b[i]<<5|i;}}return [b,r];};var _a=freb(fleb,2),fl=_a[0],revfl=_a[1];// we can ignore the fact that the other numbers are wrong; they never happen anyway
    fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),revfd=_b[1];// map of value to reverse (assuming 16 bits)
    var rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){// reverse table algorithm from SO
    var x=(i$1&0xAAAA)>>>1|(i$1&0x5555)<<1;x=(x&0xCCCC)>>>2|(x&0x3333)<<2;x=(x&0xF0F0)>>>4|(x&0x0F0F)<<4;rev[i$1]=((x&0xFF00)>>>8|(x&0x00FF)<<8)>>>1;}// create huffman tree from u8 "map": index -> code length for code index
    // mb (max bits) must be at most 15
    // TODO: optimize/split up?
    var hMap=function(cd,mb,r){var s=cd.length;// index
    var i=0;// u16 "map": index -> # of codes with bit length = index
    var l=new u16(mb);// length of cd must be 288 (total # of codes)
    for(;i<s;++i){if(cd[i])++l[cd[i]-1];}// u16 "map": index -> minimum code for bit length = index
    var le=new u16(mb);for(i=0;i<mb;++i){le[i]=le[i-1]+l[i-1]<<1;}var co;if(r){// u16 "map": index -> number of actual bits, symbol for code
    co=new u16(1<<mb);// bits to remove for reverser
    var rvb=15-mb;for(i=0;i<s;++i){// ignore 0 lengths
    if(cd[i]){// num encoding both symbol and bits read
    var sv=i<<4|cd[i];// free bits
    var r_1=mb-cd[i];// start value
    var v=le[cd[i]-1]++<<r_1;// m is end value
    for(var m=v|(1<<r_1)-1;v<=m;++v){// every 16 bit value starting with the code yields the same result
    co[rev[v]>>>rvb]=sv;}}}}else {co=new u16(s);for(i=0;i<s;++i){if(cd[i]){co[i]=rev[le[cd[i]-1]++]>>>15-cd[i];}}}return co;};// fixed length tree
    var flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;// fixed distance tree
    var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;// fixed length map
    var flm=/*#__PURE__*/hMap(flt,9,0);// fixed distance map
    var fdm=/*#__PURE__*/hMap(fdt,5,0);// get end of byte
    var shft=function(p){return (p+7)/8|0;};// typed array slice - allows garbage collector to free original reference,
    // while being more compatible than .slice
    var slc=function(v,s,e){if(s==null||s<0)s=0;if(e==null||e>v.length)e=v.length;// can't use .constructor in case user-supplied
    var n=new(v.BYTES_PER_ELEMENT==2?u16:v.BYTES_PER_ELEMENT==4?u32:u8)(e-s);n.set(v.subarray(s,e));return n;};// error codes
    var ec=['unexpected EOF','invalid block type','invalid length/literal','invalid distance','stream finished','no stream handler',,'no callback','invalid UTF-8 data','extra field too long','date not in range 1980-2099','filename too long','stream finishing','invalid zip data'// determined by unknown compression method
    ];var err=function(ind,msg,nt){var e=new Error(msg||ec[ind]);e.code=ind;if(Error.captureStackTrace)Error.captureStackTrace(e,err);if(!nt)throw e;return e;};// starting at p, write the minimum number of bits that can hold v to d
    var wbits=function(d,p,v){v<<=p&7;var o=p/8|0;d[o]|=v;d[o+1]|=v>>>8;};// starting at p, write the minimum number of bits (>8) that can hold v to d
    var wbits16=function(d,p,v){v<<=p&7;var o=p/8|0;d[o]|=v;d[o+1]|=v>>>8;d[o+2]|=v>>>16;};// creates code lengths from a frequency table
    var hTree=function(d,mb){// Need extra info to make a tree
    var t=[];for(var i=0;i<d.length;++i){if(d[i])t.push({s:i,f:d[i]});}var s=t.length;var t2=t.slice();if(!s)return [et,0];if(s==1){var v=new u8(t[0].s+1);v[t[0].s]=1;return [v,1];}t.sort(function(a,b){return a.f-b.f;});// after i2 reaches last ind, will be stopped
    // freq must be greater than largest possible number of symbols
    t.push({s:-1,f:25001});var l=t[0],r=t[1],i0=0,i1=1,i2=2;t[0]={s:-1,f:l.f+r.f,l:l,r:r};// efficient algorithm from UZIP.js
    // i0 is lookbehind, i2 is lookahead - after processing two low-freq
    // symbols that combined have high freq, will start processing i2 (high-freq,
    // non-composite) symbols instead
    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/
    while(i1!=s-1){l=t[t[i0].f<t[i2].f?i0++:i2++];r=t[i0!=i1&&t[i0].f<t[i2].f?i0++:i2++];t[i1++]={s:-1,f:l.f+r.f,l:l,r:r};}var maxSym=t2[0].s;for(var i=1;i<s;++i){if(t2[i].s>maxSym)maxSym=t2[i].s;}// code lengths
    var tr=new u16(maxSym+1);// max bits in tree
    var mbt=ln(t[i1-1],tr,0);if(mbt>mb){// more algorithms from UZIP.js
    // TODO: find out how this code works (debt)
    //  ind    debt
    var i=0,dt=0;//    left            cost
    var lft=mbt-mb,cst=1<<lft;t2.sort(function(a,b){return tr[b.s]-tr[a.s]||a.f-b.f;});for(;i<s;++i){var i2_1=t2[i].s;if(tr[i2_1]>mb){dt+=cst-(1<<mbt-tr[i2_1]);tr[i2_1]=mb;}else break;}dt>>>=lft;while(dt>0){var i2_2=t2[i].s;if(tr[i2_2]<mb)dt-=1<<mb-tr[i2_2]++-1;else ++i;}for(;i>=0&&dt;--i){var i2_3=t2[i].s;if(tr[i2_3]==mb){--tr[i2_3];++dt;}}mbt=mb;}return [new u8(tr),mbt];};// get the max length and assign length codes
    var ln=function(n,l,d){return n.s==-1?Math.max(ln(n.l,l,d+1),ln(n.r,l,d+1)):l[n.s]=d;};// length codes generation
    var lc=function(c){var s=c.length;// Note that the semicolon was intentional
    while(s&&!c[--s]);var cl=new u16(++s);//  ind      num         streak
    var cli=0,cln=c[0],cls=1;var w=function(v){cl[cli++]=v;};for(var i=1;i<=s;++i){if(c[i]==cln&&i!=s)++cls;else {if(!cln&&cls>2){for(;cls>138;cls-=138)w(32754);if(cls>2){w(cls>10?cls-11<<5|28690:cls-3<<5|12305);cls=0;}}else if(cls>3){w(cln),--cls;for(;cls>6;cls-=6)w(8304);if(cls>2)w(cls-3<<5|8208),cls=0;}while(cls--)w(cln);cls=1;cln=c[i];}}return [cl.subarray(0,cli),s];};// calculate the length of output from tree, code lengths
    var clen=function(cf,cl){var l=0;for(var i=0;i<cl.length;++i)l+=cf[i]*cl[i];return l;};// writes a fixed block
    // returns the new bit pos
    var wfblk=function(out,pos,dat){// no need to write 00 as type: TypedArray defaults to 0
    var s=dat.length;var o=shft(pos+2);out[o]=s&255;out[o+1]=s>>>8;out[o+2]=out[o]^255;out[o+3]=out[o+1]^255;for(var i=0;i<s;++i)out[o+i+4]=dat[i];return (o+4+s)*8;};// writes a block
    var wblk=function(dat,out,final,syms,lf,df,eb,li,bs,bl,p){wbits(out,p++,final);++lf[256];var _a=hTree(lf,15),dlt=_a[0],mlb=_a[1];var _b=hTree(df,15),ddt=_b[0],mdb=_b[1];var _c=lc(dlt),lclt=_c[0],nlc=_c[1];var _d=lc(ddt),lcdt=_d[0],ndc=_d[1];var lcfreq=new u16(19);for(var i=0;i<lclt.length;++i)lcfreq[lclt[i]&31]++;for(var i=0;i<lcdt.length;++i)lcfreq[lcdt[i]&31]++;var _e=hTree(lcfreq,7),lct=_e[0],mlcb=_e[1];var nlcc=19;for(;nlcc>4&&!lct[clim[nlcc-1]];--nlcc);var flen=bl+5<<3;var ftlen=clen(lf,flt)+clen(df,fdt)+eb;var dtlen=clen(lf,dlt)+clen(df,ddt)+eb+14+3*nlcc+clen(lcfreq,lct)+(2*lcfreq[16]+3*lcfreq[17]+7*lcfreq[18]);if(flen<=ftlen&&flen<=dtlen)return wfblk(out,p,dat.subarray(bs,bs+bl));var lm,ll,dm,dl;wbits(out,p,1+(dtlen<ftlen)),p+=2;if(dtlen<ftlen){lm=hMap(dlt,mlb,0),ll=dlt,dm=hMap(ddt,mdb,0),dl=ddt;var llm=hMap(lct,mlcb,0);wbits(out,p,nlc-257);wbits(out,p+5,ndc-1);wbits(out,p+10,nlcc-4);p+=14;for(var i=0;i<nlcc;++i)wbits(out,p+3*i,lct[clim[i]]);p+=3*nlcc;var lcts=[lclt,lcdt];for(var it=0;it<2;++it){var clct=lcts[it];for(var i=0;i<clct.length;++i){var len=clct[i]&31;wbits(out,p,llm[len]),p+=lct[len];if(len>15)wbits(out,p,clct[i]>>>5&127),p+=clct[i]>>>12;}}}else {lm=flm,ll=flt,dm=fdm,dl=fdt;}for(var i=0;i<li;++i){if(syms[i]>255){var len=syms[i]>>>18&31;wbits16(out,p,lm[len+257]),p+=ll[len+257];if(len>7)wbits(out,p,syms[i]>>>23&31),p+=fleb[len];var dst=syms[i]&31;wbits16(out,p,dm[dst]),p+=dl[dst];if(dst>3)wbits16(out,p,syms[i]>>>5&8191),p+=fdeb[dst];}else {wbits16(out,p,lm[syms[i]]),p+=ll[syms[i]];}}wbits16(out,p,lm[256]);return p+ll[256];};// deflate options (nice << 13) | chain
    var deo=/*#__PURE__*/new u32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]);// empty
    var et=/*#__PURE__*/new u8(0);// compresses data into a raw DEFLATE buffer
    var dflt=function(dat,lvl,plvl,pre,post,lst){var s=dat.length;var o=new u8(pre+s+5*(1+Math.ceil(s/7000))+post);// writing to this writes to the output buffer
    var w=o.subarray(pre,o.length-post);var pos=0;if(!lvl||s<8){for(var i=0;i<=s;i+=65535){// end
    var e=i+65535;if(e>=s){// write final block
    w[pos>>3]=lst;}pos=wfblk(w,pos+1,dat.subarray(i,e));}}else {var opt=deo[lvl-1];var n=opt>>>13,c=opt&8191;var msk_1=(1<<plvl)-1;//    prev 2-byte val map    curr 2-byte val map
    var prev=new u16(32768),head=new u16(msk_1+1);var bs1_1=Math.ceil(plvl/3),bs2_1=2*bs1_1;var hsh=function(i){return (dat[i]^dat[i+1]<<bs1_1^dat[i+2]<<bs2_1)&msk_1;};// 24576 is an arbitrary number of maximum symbols per block
    // 424 buffer for last block
    var syms=new u32(25000);// length/literal freq   distance freq
    var lf=new u16(288),df=new u16(32);//  l/lcnt  exbits  index  l/lind  waitdx  bitpos
    var lc_1=0,eb=0,i=0,li=0,wi=0,bs=0;for(;i<s;++i){// hash value
    // deopt when i > s - 3 - at end, deopt acceptable
    var hv=hsh(i);// index mod 32768    previous index mod
    var imod=i&32767,pimod=head[hv];prev[imod]=pimod;head[hv]=imod;// We always should modify head and prev, but only add symbols if
    // this data is not yet processed ("wait" for wait index)
    if(wi<=i){// bytes remaining
    var rem=s-i;if((lc_1>7000||li>24576)&&rem>423){pos=wblk(dat,w,0,syms,lf,df,eb,li,bs,i-bs,pos);li=lc_1=eb=0,bs=i;for(var j=0;j<286;++j)lf[j]=0;for(var j=0;j<30;++j)df[j]=0;}//  len    dist   chain
    var l=2,d=0,ch_1=c,dif=imod-pimod&32767;if(rem>2&&hv==hsh(i-dif)){var maxn=Math.min(n,rem)-1;var maxd=Math.min(32767,i);// max possible length
    // not capped at dif because decompressors implement "rolling" index population
    var ml=Math.min(258,rem);while(dif<=maxd&&--ch_1&&imod!=pimod){if(dat[i+l]==dat[i+l-dif]){var nl=0;for(;nl<ml&&dat[i+nl]==dat[i+nl-dif];++nl);if(nl>l){l=nl,d=dif;// break out early when we reach "nice" (we are satisfied enough)
    if(nl>maxn)break;// now, find the rarest 2-byte sequence within this
    // length of literals and search for that instead.
    // Much faster than just using the start
    var mmd=Math.min(dif,nl-2);var md=0;for(var j=0;j<mmd;++j){var ti=i-dif+j+32768&32767;var pti=prev[ti];var cd=ti-pti+32768&32767;if(cd>md)md=cd,pimod=ti;}}}// check the previous match
    imod=pimod,pimod=prev[imod];dif+=imod-pimod+32768&32767;}}// d will be nonzero only when a match was found
    if(d){// store both dist and len data in one Uint32
    // Make sure this is recognized as a len/dist with 28th bit (2^28)
    syms[li++]=268435456|revfl[l]<<18|revfd[d];var lin=revfl[l]&31,din=revfd[d]&31;eb+=fleb[lin]+fdeb[din];++lf[257+lin];++df[din];wi=i+l;++lc_1;}else {syms[li++]=dat[i];++lf[dat[i]];}}}pos=wblk(dat,w,lst,syms,lf,df,eb,li,bs,i-bs,pos);// this is the easiest way to avoid needing to maintain state
    if(!lst&&pos&7)pos=wfblk(w,pos+1,et);}return slc(o,0,pre+shft(pos)+post);};// CRC32 table
    var crct=/*#__PURE__*/function(){var t=new Int32Array(256);for(var i=0;i<256;++i){var c=i,k=9;while(--k)c=(c&1&&-306674912)^c>>>1;t[i]=c;}return t;}();// CRC32
    var crc=function(){var c=-1;return {p:function(d){// closures have awful performance
    var cr=c;for(var i=0;i<d.length;++i)cr=crct[cr&255^d[i]]^cr>>>8;c=cr;},d:function(){return ~c;}};};// deflate with opts
    var dopt=function(dat,opt,pre,post,st){return dflt(dat,opt.level==null?6:opt.level,opt.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(dat.length)))*1.5):12+opt.mem,pre,post,!st);};// Walmart object spread
    var mrg=function(a,b){var o={};for(var k in a)o[k]=a[k];for(var k in b)o[k]=b[k];return o;};// write bytes
    var wbytes=function(d,b,v){for(;v;++b)d[b]=v,v>>>=8;};/**
     * Compresses data with DEFLATE without any wrapper
     * @param data The data to compress
     * @param opts The compression options
     * @returns The deflated version of the data
     */function deflateSync(data,opts){return dopt(data,opts||{},0,0);}// flatten a directory structure
    var fltn=function(d,p,t,o){for(var k in d){var val=d[k],n=p+k,op=o;if(Array.isArray(val))op=mrg(o,val[1]),val=val[0];if(val instanceof u8)t[n]=[val,op];else {t[n+='/']=[new u8(0),op];fltn(val,n,t,o);}}};// text encoder
    var te=typeof TextEncoder!='undefined'&&/*#__PURE__*/new TextEncoder();// text decoder
    var td=typeof TextDecoder!='undefined'&&/*#__PURE__*/new TextDecoder();// text decoder stream
    try{td.decode(et,{stream:true});}catch(e){}/**
     * Converts a string into a Uint8Array for use with compression/decompression methods
     * @param str The string to encode
     * @param latin1 Whether or not to interpret the data as Latin-1. This should
     *               not need to be true unless decoding a binary string.
     * @returns The string encoded in UTF-8/Latin-1 binary
     */function strToU8(str,latin1){if(latin1){var ar_1=new u8(str.length);for(var i=0;i<str.length;++i)ar_1[i]=str.charCodeAt(i);return ar_1;}if(te)return te.encode(str);var l=str.length;var ar=new u8(str.length+(str.length>>1));var ai=0;var w=function(v){ar[ai++]=v;};for(var i=0;i<l;++i){if(ai+5>ar.length){var n=new u8(ai+8+(l-i<<1));n.set(ar);ar=n;}var c=str.charCodeAt(i);if(c<128||latin1)w(c);else if(c<2048)w(192|c>>6),w(128|c&63);else if(c>55295&&c<57344)c=65536+(c&1023<<10)|str.charCodeAt(++i)&1023,w(240|c>>18),w(128|c>>12&63),w(128|c>>6&63),w(128|c&63);else w(224|c>>12),w(128|c>>6&63),w(128|c&63);}return slc(ar,0,ai);}// extra field length
    var exfl=function(ex){var le=0;if(ex){for(var k in ex){var l=ex[k].length;if(l>65535)err(9);le+=l+4;}}return le;};// write zip header
    var wzh=function(d,b,f,fn,u,c,ce,co){var fl=fn.length,ex=f.extra,col=co&&co.length;var exl=exfl(ex);wbytes(d,b,ce!=null?0x2014B50:0x4034B50),b+=4;if(ce!=null)d[b++]=20,d[b++]=f.os;d[b]=20,b+=2;// spec compliance? what's that?
    d[b++]=f.flag<<1|(c==null&&8),d[b++]=u&&8;d[b++]=f.compression&255,d[b++]=f.compression>>8;var dt=new Date(f.mtime==null?Date.now():f.mtime),y=dt.getFullYear()-1980;if(y<0||y>119)err(10);wbytes(d,b,y<<25|dt.getMonth()+1<<21|dt.getDate()<<16|dt.getHours()<<11|dt.getMinutes()<<5|dt.getSeconds()>>>1),b+=4;if(c!=null){wbytes(d,b,f.crc);wbytes(d,b+4,c);wbytes(d,b+8,f.size);}wbytes(d,b+12,fl);wbytes(d,b+14,exl),b+=16;if(ce!=null){wbytes(d,b,col);wbytes(d,b+6,f.attrs);wbytes(d,b+10,ce),b+=14;}d.set(fn,b);b+=fl;if(exl){for(var k in ex){var exf=ex[k],l=exf.length;wbytes(d,b,+k);wbytes(d,b+2,l);d.set(exf,b+4),b+=4+l;}}if(col)d.set(co,b),b+=col;return b;};// write zip footer (end of central directory)
    var wzf=function(o,b,c,d,e){wbytes(o,b,0x6054B50);// skip disk
    wbytes(o,b+8,c);wbytes(o,b+10,c);wbytes(o,b+12,d);wbytes(o,b+16,e);};/**
     * Synchronously creates a ZIP file. Prefer using `zip` for better performance
     * with more than one file.
     * @param data The directory structure for the ZIP archive
     * @param opts The main options, merged with per-file options
     * @returns The generated ZIP archive
     */function zipSync(data,opts){if(!opts)opts={};var r={};var files=[];fltn(data,'',r,opts);var o=0;var tot=0;for(var fn in r){var _a=r[fn],file=_a[0],p=_a[1];var compression=p.level==0?0:8;var f=strToU8(fn),s=f.length;var com=p.comment,m=com&&strToU8(com),ms=m&&m.length;var exl=exfl(p.extra);if(s>65535)err(11);var d=compression?deflateSync(file,p):file,l=d.length;var c=crc();c.p(file);files.push(mrg(p,{size:file.length,crc:c.d(),c:d,f:f,m:m,u:s!=fn.length||m&&com.length!=ms,o:o,compression:compression}));o+=30+s+exl+l;tot+=76+2*(s+exl)+(ms||0)+l;}var out=new u8(tot+22),oe=o,cdl=tot-o;for(var i=0;i<files.length;++i){var f=files[i];wzh(out,f.o,f,f.f,f.u,f.c.length);var badd=30+f.f.length+exfl(f.extra);out.set(f.c,f.o+badd);wzh(out,o,f,f.f,f.u,f.c.length,f.o,f.m),o+=16+badd+(f.m?f.m.length:0);}wzf(out,o,files.length,cdl,oe);return out;}var download=createCommonjsModule(function(module,exports){//download.js v4.2, by dandavis; 2008-2016. [MIT] see http://danml.com/download.html for tests/usage
    // v1 landed a FF+Chrome compat way of downloading strings to local un-named files, upgraded to use a hidden frame and optional mime
    // v2 added named files via a[download], msSaveBlob, IE (10+) support, and window.URL support for larger+faster saves than dataURLs
    // v3 added dataURL and Blob Input, bind-toggle arity, and legacy dataURL fallback was improved with force-download mime and base64 support. 3.1 improved safari handling.
    // v4 adds AMD/UMD, commonJS, and plain browser support
    // v4.1 adds url download capability via solo URL argument (same domain/CORS only)
    // v4.2 adds semantic variable names, long (over 2MB) dataURL support, and hidden by default temp anchors
    // https://github.com/rndme/download
    (function(root,factory){{// Node. Does not work with strict CommonJS, but
    // only CommonJS-like environments that support module.exports,
    // like Node.
    module.exports=factory();}})(commonjsGlobal,function(){return function download(data,strFileName,strMimeType){var self=window,// this script is only for browsers anyway...
    defaultMime="application/octet-stream",// this default mime also triggers iframe downloads
    mimeType=strMimeType||defaultMime,payload=data,url=!strFileName&&!strMimeType&&payload,anchor=document.createElement("a"),toString=function(a){return String(a);},myBlob=self.Blob||self.MozBlob||self.WebKitBlob||toString,fileName=strFileName||"download",blob,reader;myBlob=myBlob.call?myBlob.bind(self):Blob;if(String(this)==="true"){//reverse arguments, allowing download.bind(true, "text/xml", "export.xml") to act as a callback
    payload=[payload,mimeType];mimeType=payload[0];payload=payload[1];}if(url&&url.length<2048){// if no filename and no mime, assume a url was passed as the only argument
    fileName=url.split("/").pop().split("?")[0];anchor.href=url;// assign href prop to temp anchor
    if(anchor.href.indexOf(url)!==-1){// if the browser determines that it's a potentially valid url path:
    var ajax=new XMLHttpRequest();ajax.open("GET",url,true);ajax.responseType='blob';ajax.onload=function(e){download(e.target.response,fileName,defaultMime);};setTimeout(function(){ajax.send();},0);// allows setting custom ajax headers using the return:
    return ajax;}// end if valid url?
    }// end if url?
    //go ahead and download dataURLs right away
    if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(payload)){if(payload.length>1024*1024*1.999&&myBlob!==toString){payload=dataUrlToBlob(payload);mimeType=payload.type||defaultMime;}else {return navigator.msSaveBlob?// IE10 can't do a[download], only Blobs:
    navigator.msSaveBlob(dataUrlToBlob(payload),fileName):saver(payload);// everyone else can save dataURLs un-processed
    }}else {//not data url, is it a string with special needs?
    if(/([\x80-\xff])/.test(payload)){var i=0,tempUiArr=new Uint8Array(payload.length),mx=tempUiArr.length;for(i;i<mx;++i)tempUiArr[i]=payload.charCodeAt(i);payload=new myBlob([tempUiArr],{type:mimeType});}}blob=payload instanceof myBlob?payload:new myBlob([payload],{type:mimeType});function dataUrlToBlob(strUrl){var parts=strUrl.split(/[:;,]/),type=parts[1],decoder=parts[2]=="base64"?atob:decodeURIComponent,binData=decoder(parts.pop()),mx=binData.length,i=0,uiArr=new Uint8Array(mx);for(i;i<mx;++i)uiArr[i]=binData.charCodeAt(i);return new myBlob([uiArr],{type:type});}function saver(url,winMode){if('download'in anchor){//html5 A[download]
    anchor.href=url;anchor.setAttribute("download",fileName);anchor.className="download-js-link";anchor.innerHTML="downloading...";anchor.style.display="none";document.body.appendChild(anchor);setTimeout(function(){anchor.click();document.body.removeChild(anchor);if(winMode===true){setTimeout(function(){self.URL.revokeObjectURL(anchor.href);},250);}},66);return true;}// handle non-a[download] safari as best we can:
    if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent)){if(/^data:/.test(url))url="data:"+url.replace(/^data:([\w\/\-\+]+)/,defaultMime);if(!window.open(url)){// popup blocked, offer direct download:
    if(confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")){location.href=url;}}return true;}//do iframe dataURL download (old ch+FF):
    var f=document.createElement("iframe");document.body.appendChild(f);if(!winMode&&/^data:/.test(url)){// force a mime that will download:
    url="data:"+url.replace(/^data:([\w\/\-\+]+)/,defaultMime);}f.src=url;setTimeout(function(){document.body.removeChild(f);},333);}//end saver
    if(navigator.msSaveBlob){// IE10+ : (has Blob, but not a[download] or URL)
    return navigator.msSaveBlob(blob,fileName);}if(self.URL){// simple fast and modern way using Blob and URL:
    saver(self.URL.createObjectURL(blob),true);}else {// handle non-Blob()+non-URL browsers:
    if(typeof blob==="string"||blob.constructor===toString){try{return saver("data:"+mimeType+";base64,"+self.btoa(blob));}catch(y){return saver("data:"+mimeType+","+encodeURIComponent(blob));}}// Blob but not URL support:
    reader=new FileReader();reader.onload=function(e){saver(this.result);};reader.readAsDataURL(blob);}return true;};/* end download() */});});/*!
     * @overview es6-promise - a tiny implementation of Promises/A+.
     * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
     * @license   Licensed under MIT license
     *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
     * @version   v4.2.8+1e68dce6
     */var es6Promise=createCommonjsModule(function(module,exports){(function(global,factory){module.exports=factory();})(commonjsGlobal,function(){function objectOrFunction(x){var type=typeof x;return x!==null&&(type==='object'||type==='function');}function isFunction(x){return typeof x==='function';}var _isArray=void 0;if(Array.isArray){_isArray=Array.isArray;}else {_isArray=function(x){return Object.prototype.toString.call(x)==='[object Array]';};}var isArray=_isArray;var len=0;var vertxNext=void 0;var customSchedulerFn=void 0;var asap=function asap(callback,arg){queue[len]=callback;queue[len+1]=arg;len+=2;if(len===2){// If len is 2, that means that we need to schedule an async flush.
    // If additional callbacks are queued before the queue is flushed, they
    // will be processed by this flush that we are scheduling.
    if(customSchedulerFn){customSchedulerFn(flush);}else {scheduleFlush();}}};function setScheduler(scheduleFn){customSchedulerFn=scheduleFn;}function setAsap(asapFn){asap=asapFn;}var browserWindow=typeof window!=='undefined'?window:undefined;var browserGlobal=browserWindow||{};var BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver;var isNode=typeof self==='undefined'&&typeof process!=='undefined'&&{}.toString.call(process)==='[object process]';// test for web worker but not in IE10
    var isWorker=typeof Uint8ClampedArray!=='undefined'&&typeof importScripts!=='undefined'&&typeof MessageChannel!=='undefined';// node
    function useNextTick(){// node version 0.10.x displays a deprecation warning when nextTick is used recursively
    // see https://github.com/cujojs/when/issues/410 for details
    return function(){return process.nextTick(flush);};}// vertx
    function useVertxTimer(){if(typeof vertxNext!=='undefined'){return function(){vertxNext(flush);};}return useSetTimeout();}function useMutationObserver(){var iterations=0;var observer=new BrowserMutationObserver(flush);var node=document.createTextNode('');observer.observe(node,{characterData:true});return function(){node.data=iterations=++iterations%2;};}// web worker
    function useMessageChannel(){var channel=new MessageChannel();channel.port1.onmessage=flush;return function(){return channel.port2.postMessage(0);};}function useSetTimeout(){// Store setTimeout reference so es6-promise will be unaffected by
    // other code modifying setTimeout (like sinon.useFakeTimers())
    var globalSetTimeout=setTimeout;return function(){return globalSetTimeout(flush,1);};}var queue=new Array(1000);function flush(){for(var i=0;i<len;i+=2){var callback=queue[i];var arg=queue[i+1];callback(arg);queue[i]=undefined;queue[i+1]=undefined;}len=0;}function attemptVertx(){try{var vertx=Function('return this')().require('vertx');vertxNext=vertx.runOnLoop||vertx.runOnContext;return useVertxTimer();}catch(e){return useSetTimeout();}}var scheduleFlush=void 0;// Decide what async method to use to triggering processing of queued callbacks:
    if(isNode){scheduleFlush=useNextTick();}else if(BrowserMutationObserver){scheduleFlush=useMutationObserver();}else if(isWorker){scheduleFlush=useMessageChannel();}else if(browserWindow===undefined&&typeof commonjsRequire==='function'){scheduleFlush=attemptVertx();}else {scheduleFlush=useSetTimeout();}function then(onFulfillment,onRejection){var parent=this;var child=new this.constructor(noop);if(child[PROMISE_ID]===undefined){makePromise(child);}var _state=parent._state;if(_state){var callback=arguments[_state-1];asap(function(){return invokeCallback(_state,child,callback,parent._result);});}else {subscribe(parent,child,onFulfillment,onRejection);}return child;}/**
      `Promise.resolve` returns a promise that will become resolved with the
      passed `value`. It is shorthand for the following:

      ```javascript
      let promise = new Promise(function(resolve, reject){
        resolve(1);
      });

      promise.then(function(value){
        // value === 1
      });
      ```

      Instead of writing the above, your code now simply becomes the following:

      ```javascript
      let promise = Promise.resolve(1);

      promise.then(function(value){
        // value === 1
      });
      ```

      @method resolve
      @static
      @param {Any} value value that the returned promise will be resolved with
      Useful for tooling.
      @return {Promise} a promise that will become fulfilled with the given
      `value`
    */function resolve$1(object){/*jshint validthis:true */var Constructor=this;if(object&&typeof object==='object'&&object.constructor===Constructor){return object;}var promise=new Constructor(noop);resolve(promise,object);return promise;}var PROMISE_ID=Math.random().toString(36).substring(2);function noop(){}var PENDING=void 0;var FULFILLED=1;var REJECTED=2;function selfFulfillment(){return new TypeError("You cannot resolve a promise with itself");}function cannotReturnOwn(){return new TypeError('A promises callback cannot return that same promise.');}function tryThen(then$$1,value,fulfillmentHandler,rejectionHandler){try{then$$1.call(value,fulfillmentHandler,rejectionHandler);}catch(e){return e;}}function handleForeignThenable(promise,thenable,then$$1){asap(function(promise){var sealed=false;var error=tryThen(then$$1,thenable,function(value){if(sealed){return;}sealed=true;if(thenable!==value){resolve(promise,value);}else {fulfill(promise,value);}},function(reason){if(sealed){return;}sealed=true;reject(promise,reason);});if(!sealed&&error){sealed=true;reject(promise,error);}},promise);}function handleOwnThenable(promise,thenable){if(thenable._state===FULFILLED){fulfill(promise,thenable._result);}else if(thenable._state===REJECTED){reject(promise,thenable._result);}else {subscribe(thenable,undefined,function(value){return resolve(promise,value);},function(reason){return reject(promise,reason);});}}function handleMaybeThenable(promise,maybeThenable,then$$1){if(maybeThenable.constructor===promise.constructor&&then$$1===then&&maybeThenable.constructor.resolve===resolve$1){handleOwnThenable(promise,maybeThenable);}else {if(then$$1===undefined){fulfill(promise,maybeThenable);}else if(isFunction(then$$1)){handleForeignThenable(promise,maybeThenable,then$$1);}else {fulfill(promise,maybeThenable);}}}function resolve(promise,value){if(promise===value){reject(promise,selfFulfillment());}else if(objectOrFunction(value)){var then$$1=void 0;try{then$$1=value.then;}catch(error){reject(promise,error);return;}handleMaybeThenable(promise,value,then$$1);}else {fulfill(promise,value);}}function publishRejection(promise){if(promise._onerror){promise._onerror(promise._result);}publish(promise);}function fulfill(promise,value){if(promise._state!==PENDING){return;}promise._result=value;promise._state=FULFILLED;if(promise._subscribers.length!==0){asap(publish,promise);}}function reject(promise,reason){if(promise._state!==PENDING){return;}promise._state=REJECTED;promise._result=reason;asap(publishRejection,promise);}function subscribe(parent,child,onFulfillment,onRejection){var _subscribers=parent._subscribers;var length=_subscribers.length;parent._onerror=null;_subscribers[length]=child;_subscribers[length+FULFILLED]=onFulfillment;_subscribers[length+REJECTED]=onRejection;if(length===0&&parent._state){asap(publish,parent);}}function publish(promise){var subscribers=promise._subscribers;var settled=promise._state;if(subscribers.length===0){return;}var child=void 0,callback=void 0,detail=promise._result;for(var i=0;i<subscribers.length;i+=3){child=subscribers[i];callback=subscribers[i+settled];if(child){invokeCallback(settled,child,callback,detail);}else {callback(detail);}}promise._subscribers.length=0;}function invokeCallback(settled,promise,callback,detail){var hasCallback=isFunction(callback),value=void 0,error=void 0,succeeded=true;if(hasCallback){try{value=callback(detail);}catch(e){succeeded=false;error=e;}if(promise===value){reject(promise,cannotReturnOwn());return;}}else {value=detail;}if(promise._state!==PENDING);else if(hasCallback&&succeeded){resolve(promise,value);}else if(succeeded===false){reject(promise,error);}else if(settled===FULFILLED){fulfill(promise,value);}else if(settled===REJECTED){reject(promise,value);}}function initializePromise(promise,resolver){try{resolver(function resolvePromise(value){resolve(promise,value);},function rejectPromise(reason){reject(promise,reason);});}catch(e){reject(promise,e);}}var id=0;function nextId(){return id++;}function makePromise(promise){promise[PROMISE_ID]=id++;promise._state=undefined;promise._result=undefined;promise._subscribers=[];}function validationError(){return new Error('Array Methods must be provided an Array');}var Enumerator=function(){function Enumerator(Constructor,input){this._instanceConstructor=Constructor;this.promise=new Constructor(noop);if(!this.promise[PROMISE_ID]){makePromise(this.promise);}if(isArray(input)){this.length=input.length;this._remaining=input.length;this._result=new Array(this.length);if(this.length===0){fulfill(this.promise,this._result);}else {this.length=this.length||0;this._enumerate(input);if(this._remaining===0){fulfill(this.promise,this._result);}}}else {reject(this.promise,validationError());}}Enumerator.prototype._enumerate=function _enumerate(input){for(var i=0;this._state===PENDING&&i<input.length;i++){this._eachEntry(input[i],i);}};Enumerator.prototype._eachEntry=function _eachEntry(entry,i){var c=this._instanceConstructor;var resolve$$1=c.resolve;if(resolve$$1===resolve$1){var _then=void 0;var error=void 0;var didError=false;try{_then=entry.then;}catch(e){didError=true;error=e;}if(_then===then&&entry._state!==PENDING){this._settledAt(entry._state,i,entry._result);}else if(typeof _then!=='function'){this._remaining--;this._result[i]=entry;}else if(c===Promise$1){var promise=new c(noop);if(didError){reject(promise,error);}else {handleMaybeThenable(promise,entry,_then);}this._willSettleAt(promise,i);}else {this._willSettleAt(new c(function(resolve$$1){return resolve$$1(entry);}),i);}}else {this._willSettleAt(resolve$$1(entry),i);}};Enumerator.prototype._settledAt=function _settledAt(state,i,value){var promise=this.promise;if(promise._state===PENDING){this._remaining--;if(state===REJECTED){reject(promise,value);}else {this._result[i]=value;}}if(this._remaining===0){fulfill(promise,this._result);}};Enumerator.prototype._willSettleAt=function _willSettleAt(promise,i){var enumerator=this;subscribe(promise,undefined,function(value){return enumerator._settledAt(FULFILLED,i,value);},function(reason){return enumerator._settledAt(REJECTED,i,reason);});};return Enumerator;}();/**
      `Promise.all` accepts an array of promises, and returns a new promise which
      is fulfilled with an array of fulfillment values for the passed promises, or
      rejected with the reason of the first passed promise to be rejected. It casts all
      elements of the passed iterable to promises as it runs this algorithm.

      Example:

      ```javascript
      let promise1 = resolve(1);
      let promise2 = resolve(2);
      let promise3 = resolve(3);
      let promises = [ promise1, promise2, promise3 ];

      Promise.all(promises).then(function(array){
        // The array here would be [ 1, 2, 3 ];
      });
      ```

      If any of the `promises` given to `all` are rejected, the first promise
      that is rejected will be given as an argument to the returned promises's
      rejection handler. For example:

      Example:

      ```javascript
      let promise1 = resolve(1);
      let promise2 = reject(new Error("2"));
      let promise3 = reject(new Error("3"));
      let promises = [ promise1, promise2, promise3 ];

      Promise.all(promises).then(function(array){
        // Code here never runs because there are rejected promises!
      }, function(error) {
        // error.message === "2"
      });
      ```

      @method all
      @static
      @param {Array} entries array of promises
      @param {String} label optional string for labeling the promise.
      Useful for tooling.
      @return {Promise} promise that is fulfilled when all `promises` have been
      fulfilled, or rejected if any of them become rejected.
      @static
    */function all(entries){return new Enumerator(this,entries).promise;}/**
      `Promise.race` returns a new promise which is settled in the same way as the
      first passed promise to settle.

      Example:

      ```javascript
      let promise1 = new Promise(function(resolve, reject){
        setTimeout(function(){
          resolve('promise 1');
        }, 200);
      });

      let promise2 = new Promise(function(resolve, reject){
        setTimeout(function(){
          resolve('promise 2');
        }, 100);
      });

      Promise.race([promise1, promise2]).then(function(result){
        // result === 'promise 2' because it was resolved before promise1
        // was resolved.
      });
      ```

      `Promise.race` is deterministic in that only the state of the first
      settled promise matters. For example, even if other promises given to the
      `promises` array argument are resolved, but the first settled promise has
      become rejected before the other promises became fulfilled, the returned
      promise will become rejected:

      ```javascript
      let promise1 = new Promise(function(resolve, reject){
        setTimeout(function(){
          resolve('promise 1');
        }, 200);
      });

      let promise2 = new Promise(function(resolve, reject){
        setTimeout(function(){
          reject(new Error('promise 2'));
        }, 100);
      });

      Promise.race([promise1, promise2]).then(function(result){
        // Code here never runs
      }, function(reason){
        // reason.message === 'promise 2' because promise 2 became rejected before
        // promise 1 became fulfilled
      });
      ```

      An example real-world use case is implementing timeouts:

      ```javascript
      Promise.race([ajax('foo.json'), timeout(5000)])
      ```

      @method race
      @static
      @param {Array} promises array of promises to observe
      Useful for tooling.
      @return {Promise} a promise which settles in the same way as the first passed
      promise to settle.
    */function race(entries){/*jshint validthis:true */var Constructor=this;if(!isArray(entries)){return new Constructor(function(_,reject){return reject(new TypeError('You must pass an array to race.'));});}else {return new Constructor(function(resolve,reject){var length=entries.length;for(var i=0;i<length;i++){Constructor.resolve(entries[i]).then(resolve,reject);}});}}/**
      `Promise.reject` returns a promise rejected with the passed `reason`.
      It is shorthand for the following:

      ```javascript
      let promise = new Promise(function(resolve, reject){
        reject(new Error('WHOOPS'));
      });

      promise.then(function(value){
        // Code here doesn't run because the promise is rejected!
      }, function(reason){
        // reason.message === 'WHOOPS'
      });
      ```

      Instead of writing the above, your code now simply becomes the following:

      ```javascript
      let promise = Promise.reject(new Error('WHOOPS'));

      promise.then(function(value){
        // Code here doesn't run because the promise is rejected!
      }, function(reason){
        // reason.message === 'WHOOPS'
      });
      ```

      @method reject
      @static
      @param {Any} reason value that the returned promise will be rejected with.
      Useful for tooling.
      @return {Promise} a promise rejected with the given `reason`.
    */function reject$1(reason){/*jshint validthis:true */var Constructor=this;var promise=new Constructor(noop);reject(promise,reason);return promise;}function needsResolver(){throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');}function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}/**
      Promise objects represent the eventual result of an asynchronous operation. The
      primary way of interacting with a promise is through its `then` method, which
      registers callbacks to receive either a promise's eventual value or the reason
      why the promise cannot be fulfilled.

      Terminology
      -----------

      - `promise` is an object or function with a `then` method whose behavior conforms to this specification.
      - `thenable` is an object or function that defines a `then` method.
      - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).
      - `exception` is a value that is thrown using the throw statement.
      - `reason` is a value that indicates why a promise was rejected.
      - `settled` the final resting state of a promise, fulfilled or rejected.

      A promise can be in one of three states: pending, fulfilled, or rejected.

      Promises that are fulfilled have a fulfillment value and are in the fulfilled
      state.  Promises that are rejected have a rejection reason and are in the
      rejected state.  A fulfillment value is never a thenable.

      Promises can also be said to *resolve* a value.  If this value is also a
      promise, then the original promise's settled state will match the value's
      settled state.  So a promise that *resolves* a promise that rejects will
      itself reject, and a promise that *resolves* a promise that fulfills will
      itself fulfill.


      Basic Usage:
      ------------

      ```js
      let promise = new Promise(function(resolve, reject) {
        // on success
        resolve(value);

        // on failure
        reject(reason);
      });

      promise.then(function(value) {
        // on fulfillment
      }, function(reason) {
        // on rejection
      });
      ```

      Advanced Usage:
      ---------------

      Promises shine when abstracting away asynchronous interactions such as
      `XMLHttpRequest`s.

      ```js
      function getJSON(url) {
        return new Promise(function(resolve, reject){
          let xhr = new XMLHttpRequest();

          xhr.open('GET', url);
          xhr.onreadystatechange = handler;
          xhr.responseType = 'json';
          xhr.setRequestHeader('Accept', 'application/json');
          xhr.send();

          function handler() {
            if (this.readyState === this.DONE) {
              if (this.status === 200) {
                resolve(this.response);
              } else {
                reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));
              }
            }
          };
        });
      }

      getJSON('/posts.json').then(function(json) {
        // on fulfillment
      }, function(reason) {
        // on rejection
      });
      ```

      Unlike callbacks, promises are great composable primitives.

      ```js
      Promise.all([
        getJSON('/posts'),
        getJSON('/comments')
      ]).then(function(values){
        values[0] // => postsJSON
        values[1] // => commentsJSON

        return values;
      });
      ```

      @class Promise
      @param {Function} resolver
      Useful for tooling.
      @constructor
    */var Promise$1=function(){function Promise(resolver){this[PROMISE_ID]=nextId();this._result=this._state=undefined;this._subscribers=[];if(noop!==resolver){typeof resolver!=='function'&&needsResolver();this instanceof Promise?initializePromise(this,resolver):needsNew();}}/**
      The primary way of interacting with a promise is through its `then` method,
      which registers callbacks to receive either a promise's eventual value or the
      reason why the promise cannot be fulfilled.
       ```js
      findUser().then(function(user){
        // user is available
      }, function(reason){
        // user is unavailable, and you are given the reason why
      });
      ```
       Chaining
      --------
       The return value of `then` is itself a promise.  This second, 'downstream'
      promise is resolved with the return value of the first promise's fulfillment
      or rejection handler, or rejected if the handler throws an exception.
       ```js
      findUser().then(function (user) {
        return user.name;
      }, function (reason) {
        return 'default name';
      }).then(function (userName) {
        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it
        // will be `'default name'`
      });
       findUser().then(function (user) {
        throw new Error('Found user, but still unhappy');
      }, function (reason) {
        throw new Error('`findUser` rejected and we're unhappy');
      }).then(function (value) {
        // never reached
      }, function (reason) {
        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.
        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.
      });
      ```
      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.
       ```js
      findUser().then(function (user) {
        throw new PedagogicalException('Upstream error');
      }).then(function (value) {
        // never reached
      }).then(function (value) {
        // never reached
      }, function (reason) {
        // The `PedgagocialException` is propagated all the way down to here
      });
      ```
       Assimilation
      ------------
       Sometimes the value you want to propagate to a downstream promise can only be
      retrieved asynchronously. This can be achieved by returning a promise in the
      fulfillment or rejection handler. The downstream promise will then be pending
      until the returned promise is settled. This is called *assimilation*.
       ```js
      findUser().then(function (user) {
        return findCommentsByAuthor(user);
      }).then(function (comments) {
        // The user's comments are now available
      });
      ```
       If the assimliated promise rejects, then the downstream promise will also reject.
       ```js
      findUser().then(function (user) {
        return findCommentsByAuthor(user);
      }).then(function (comments) {
        // If `findCommentsByAuthor` fulfills, we'll have the value here
      }, function (reason) {
        // If `findCommentsByAuthor` rejects, we'll have the reason here
      });
      ```
       Simple Example
      --------------
       Synchronous Example
       ```javascript
      let result;
       try {
        result = findResult();
        // success
      } catch(reason) {
        // failure
      }
      ```
       Errback Example
       ```js
      findResult(function(result, err){
        if (err) {
          // failure
        } else {
          // success
        }
      });
      ```
       Promise Example;
       ```javascript
      findResult().then(function(result){
        // success
      }, function(reason){
        // failure
      });
      ```
       Advanced Example
      --------------
       Synchronous Example
       ```javascript
      let author, books;
       try {
        author = findAuthor();
        books  = findBooksByAuthor(author);
        // success
      } catch(reason) {
        // failure
      }
      ```
       Errback Example
       ```js
       function foundBooks(books) {
       }
       function failure(reason) {
       }
       findAuthor(function(author, err){
        if (err) {
          failure(err);
          // failure
        } else {
          try {
            findBoooksByAuthor(author, function(books, err) {
              if (err) {
                failure(err);
              } else {
                try {
                  foundBooks(books);
                } catch(reason) {
                  failure(reason);
                }
              }
            });
          } catch(error) {
            failure(err);
          }
          // success
        }
      });
      ```
       Promise Example;
       ```javascript
      findAuthor().
        then(findBooksByAuthor).
        then(function(books){
          // found books
      }).catch(function(reason){
        // something went wrong
      });
      ```
       @method then
      @param {Function} onFulfilled
      @param {Function} onRejected
      Useful for tooling.
      @return {Promise}
      */ /**
      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same
      as the catch block of a try/catch statement.
      ```js
      function findAuthor(){
      throw new Error('couldn't find that author');
      }
      // synchronous
      try {
      findAuthor();
      } catch(reason) {
      // something went wrong
      }
      // async with promises
      findAuthor().catch(function(reason){
      // something went wrong
      });
      ```
      @method catch
      @param {Function} onRejection
      Useful for tooling.
      @return {Promise}
      */Promise.prototype.catch=function _catch(onRejection){return this.then(null,onRejection);};/**
        `finally` will be invoked regardless of the promise's fate just as native
        try/catch/finally behaves
      
        Synchronous example:
      
        ```js
        findAuthor() {
          if (Math.random() > 0.5) {
            throw new Error();
          }
          return new Author();
        }
      
        try {
          return findAuthor(); // succeed or fail
        } catch(error) {
          return findOtherAuther();
        } finally {
          // always runs
          // doesn't affect the return value
        }
        ```
      
        Asynchronous example:
      
        ```js
        findAuthor().catch(function(reason){
          return findOtherAuther();
        }).finally(function(){
          // author was either found, or not
        });
        ```
      
        @method finally
        @param {Function} callback
        @return {Promise}
      */Promise.prototype.finally=function _finally(callback){var promise=this;var constructor=promise.constructor;if(isFunction(callback)){return promise.then(function(value){return constructor.resolve(callback()).then(function(){return value;});},function(reason){return constructor.resolve(callback()).then(function(){throw reason;});});}return promise.then(callback,callback);};return Promise;}();Promise$1.prototype.then=then;Promise$1.all=all;Promise$1.race=race;Promise$1.resolve=resolve$1;Promise$1.reject=reject$1;Promise$1._setScheduler=setScheduler;Promise$1._setAsap=setAsap;Promise$1._asap=asap;/*global self*/function polyfill(){var local=void 0;if(typeof commonjsGlobal!=='undefined'){local=commonjsGlobal;}else if(typeof self!=='undefined'){local=self;}else {try{local=Function('return this')();}catch(e){throw new Error('polyfill failed because global object is unavailable in this environment');}}var P=local.Promise;if(P){var promiseToString=null;try{promiseToString=Object.prototype.toString.call(P.resolve());}catch(e){// silently ignored
    }if(promiseToString==='[object Promise]'&&!P.cast){return;}}local.Promise=Promise$1;}// Strange compat..
    Promise$1.polyfill=polyfill;Promise$1.Promise=Promise$1;return Promise$1;});});////////////////////////////////////////////////////////////////////////////////
    // CCITTEncoder.ts
    // 2021. 10. 07. created by woori
    // -----------------------------------------------------------------------------
    // Copyright (c) 2020-2021 Wooritech Inc.
    // All rights reserved.
    ////////////////////////////////////////////////////////////////////////////////
    const G3CODE_EOL=-1;/* NB: ACT_EOL - ACT_WRUNT */const G3CODE_INVALID=-2;/* NB: ACT_INVALID - ACT_WRUNT */const EOL_CODES=[12,0x1,G3CODE_EOL,9,0x1,G3CODE_INVALID,10,0x1,G3CODE_INVALID,11,0x1,G3CODE_INVALID,12,0x0,G3CODE_INVALID/* 0000 0000 0000 */];const WHITE_TERMS=[8,0x35,0,6,0x7,1,4,0x7,2,4,0x8,3,4,0xB,4,4,0xC,5,4,0xE,6,4,0xF,7,5,0x13,8,5,0x14,9,5,0x7,10,5,0x8,11,6,0x8,12,6,0x3,13,6,0x34,14,6,0x35,15,6,0x2A,16,6,0x2B,17,7,0x27,18,7,0xC,19,7,0x8,20,7,0x17,21,7,0x3,22,7,0x4,23,7,0x28,24,7,0x2B,25,7,0x13,26,7,0x24,27,7,0x18,28,8,0x2,29,8,0x3,30,8,0x1A,31,8,0x1B,32,8,0x12,33,8,0x13,34,8,0x14,35,8,0x15,36,8,0x16,37,8,0x17,38,8,0x28,39,8,0x29,40,8,0x2A,41,8,0x2B,42,8,0x2C,43,8,0x2D,44,8,0x4,45,8,0x5,46,8,0xA,47,8,0xB,48,8,0x52,49,8,0x53,50,8,0x54,51,8,0x55,52,8,0x24,53,8,0x25,54,8,0x58,55,8,0x59,56,8,0x5A,57,8,0x5B,58,8,0x4A,59,8,0x4B,60,8,0x32,61,8,0x33,62,8,0x34,63/* 0011 0100 */];const WHITE_MARKS=[5,0x1B,64,5,0x12,128,6,0x17,192,7,0x37,256,8,0x36,320,8,0x37,384,8,0x64,448,8,0x65,512,8,0x68,576,8,0x67,640,9,0xCC,704,9,0xCD,768,9,0xD2,832,9,0xD3,896,9,0xD4,960,9,0xD5,1024,9,0xD6,1088,9,0xD7,1152,9,0xD8,1216,9,0xD9,1280,9,0xDA,1344,9,0xDB,1408,9,0x98,1472,9,0x99,1536,9,0x9A,1600,6,0x18,1664,9,0x9B,1728,11,0x8,1792,11,0xC,1856,11,0xD,1920,12,0x12,1984,12,0x13,2048,12,0x14,2112,12,0x15,2176,12,0x16,2240,12,0x17,2304,12,0x1C,2368,12,0x1D,2432,12,0x1E,2496,12,0x1F,2560/* 0000 0001 1111 */];const BLACK_TERMS=[10,0x37,0,3,0x2,1,2,0x3,2,2,0x2,3,3,0x3,4,4,0x3,5,4,0x2,6,5,0x3,7,6,0x5,8,6,0x4,9,7,0x4,10,7,0x5,11,7,0x7,12,8,0x4,13,8,0x7,14,9,0x18,15,10,0x17,16,10,0x18,17,10,0x8,18,11,0x67,19,11,0x68,20,11,0x6C,21,11,0x37,22,11,0x28,23,11,0x17,24,11,0x18,25,12,0xCA,26,12,0xCB,27,12,0xCC,28,12,0xCD,29,12,0x68,30,12,0x69,31,12,0x6A,32,12,0x6B,33,12,0xD2,34,12,0xD3,35,12,0xD4,36,12,0xD5,37,12,0xD6,38,12,0xD7,39,12,0x6C,40,12,0x6D,41,12,0xDA,42,12,0xDB,43,12,0x54,44,12,0x55,45,12,0x56,46,12,0x57,47,12,0x64,48,12,0x65,49,12,0x52,50,12,0x53,51,12,0x24,52,12,0x37,53,12,0x38,54,12,0x27,55,12,0x28,56,12,0x58,57,12,0x59,58,12,0x2B,59,12,0x2C,60,12,0x5A,61,12,0x66,62,12,0x67,63/* 0000 0110 0111 */];const BLACK_MARKS=[10,0xF,64,12,0xC8,128,12,0xC9,192,12,0x5B,256,12,0x33,320,12,0x34,384,12,0x35,448,13,0x6C,512,13,0x6D,576,13,0x4A,640,13,0x4B,704,13,0x4C,768,13,0x4D,832,13,0x72,896,13,0x73,960,13,0x74,1024,13,0x75,1088,13,0x76,1152,13,0x77,1216,13,0x52,1280,13,0x53,1344,13,0x54,1408,13,0x55,1472,13,0x5A,1536,13,0x5B,1600,13,0x64,1664,13,0x65,1728,11,0x8,1792,11,0xC,1856,11,0xD,1920,12,0x12,1984,12,0x13,2048,12,0x14,2112,12,0x15,2176,12,0x16,2240,12,0x17,2304,12,0x1C,2368,12,0x1D,2432,12,0x1E,2496,12,0x1F,2560/* 0000 0001 1111 */];const createColorCode=function(codeLen,code,runLength){return {codeLen,code,runLength};};const buildColorCodes=function(data){const codes=[];for(let i=0,n=data.length;i<n;i+=3){codes.push({codeLen:data[i],code:data[i+1],runLength:data[i+2]});}return codes;};const TERMS=[buildColorCodes(WHITE_TERMS),buildColorCodes(BLACK_TERMS)];const MARKS=[buildColorCodes(WHITE_MARKS),buildColorCodes(BLACK_MARKS)];const EOLS=buildColorCodes(EOL_CODES);const PASS_CODE=createColorCode(4,0x1,0);/* 0001 */const HORI_CODE=createColorCode(3,0x1,0);/* 001 */const VERT_CODES=buildColorCodes([7,0x03,0,6,0x03,0,3,0x03,0,1,0x1,0,3,0x2,0,6,0x02,0,7,0x02,0/* 0000 010 */]);var CCITTScheme;(function(CCITTScheme){CCITTScheme["GROUP_3"]="g3";CCITTScheme["GROUP_3_2D"]="g3-2d";CCITTScheme["GROUP_4"]="g4";})(CCITTScheme||(CCITTScheme={}));const WHITE=0;const BLACK=1;const MASK_1=[0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x01];const MASK_4=[0xf0,0x0f];class CCITTLine{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(bps,pixels){if(!(bps===1||bps===4||bps===8)){throw new Error('Invalid bps: '+bps);}this._bps=bps;this._pixels=pixels;this._bytes=this.bytesOfPixels(pixels);this._dv=new DataView(new ArrayBuffer(this._bytes));}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get byteLength(){return this._bytes;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    bytesOfPixels(pixels){return (pixels*this._bps+7)/8|0;}prepare(pixels,offset){for(let i=0;i<this._bytes;i++){this._dv.setUint8(i,pixels[offset+i]);}return this;}clear(){for(let i=0;i<this._bytes;i++){this._dv.setUint8(i,0);}return this;}getRow(pixels){return new Uint8Array(this._dv.buffer.slice(0,this.bytesOfPixels(pixels)));}getByte(p){return this._dv.getUint8(p);}getBytes(bytes){return new Uint8Array(this._dv.buffer.slice(0,bytes));}/**
         * _bps가 1,4,8 중 하나이므로 byte 경계에 겹치지 않는다고 가정.
         */getPixel(pos){const n=pos*this._bps;const x=n/8|0;const p=n%8;const v=this._dv.getUint8(x);if(this._bps===1){return v&MASK_1[p];}else if(this._bps===4){return v&MASK_4[p];}else {return v;}}getBit(pos){const x=pos/8|0;const p=pos%8;const v=this._dv.getUint8(x);return v&MASK_1[p]?1:0;}setBits(pos,value,length){const len=length-1;let x=pos/8|0;let p=pos%8;let i=0;while(i<length){try{let v=this._dv.getUint8(x);while(p<8&&i<length){const v2=value&1<<len-i?1:0;v&=~(1<<7-p)&0xff;v|=v2<<7-p;i++;p++;}this._dv.setUint8(x,v);x++;p=0;}catch(err){debugger;}}}// for testing only
    setString(pos,s){const len=s.length;let v=0;for(let i=0;i<len;i++){const v2=s.charAt(i)==='0'?0:1;v+=v2<<len-1-i;}this.setBits(pos,v,len);}getBits(pos,length){const len=length-1;let x=pos/8|0;let p=pos%8;let v=0;let i=0;while(i<length){const v2=this._dv.getUint8(x);while(p<8&&i<length){//const v3 = v2 & (1 << (7 - p)) ? 1 : 0;
    const v3=v2&MASK_1[p]?1:0;v|=v3<<len-i;i++;p++;}x++;p=0;}return v;}getSpan(pos){const len=this._dv.byteLength;let x=pos/8|0;let p=pos%8;let v=this._dv.getUint8(x);const c=v&MASK_1[p++]?1:0;let i=1;while(x<len){while(p<8){const c2=v&MASK_1[p++]?1:0;if(c2!==c)return i;i++;}x++;p=0;if(x<len){v=this._dv.getUint8(x);}}return i;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    toString(){let s='';for(let i=0,n=this._dv.byteLength;i<n;i++){const v=this._dv.getUint8(i);for(let j=0;j<8;j++){const f=1<<7-j;s+=v&f?1:0;}}return s;}}class CCITTEncoder{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static encodePixcels(pixels,options){if(options.scheme===CCITTScheme.GROUP_4){// console.log('TIFF G4 Encode', options.scheme);
    return new CCITTGroup4Encoder().encode(pixels,options);}else {// console.log('TIFF G3 Encode', options.scheme);
    return new CCITTGroup3Encoder().encode(pixels,options);}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    encode(pixels,options){this._wPixels=options.columns;return this._doEncode(pixels,options);}/**
         * 압축된 row의 pixel 수를 리턴한다.
         */_encodeLine1D(line,row,length,eolPlus){let p=0;let q=0;let color=0;let runLen=0;// EOL
    const eol=EOLS[0];row.setBits(q,eol.code,eol.codeLen);q+=eol.codeLen;if(eolPlus){row.setBits(q,1,1);q+=1;}// 반드시 white로 시작한다.
    if(line.getBit(0)===BLACK){const t=TERMS[WHITE][0];row.setBits(q,t.code,t.codeLen);q+=t.codeLen;color=1;}while(p<length){const span=line.getSpan(p);if(span<64){const t=TERMS[color][span];row.setBits(q,t.code,t.codeLen);q+=t.codeLen;runLen+=t.runLength;}else if(span<2624){const m=MARKS[color][(span-64)/64|0];row.setBits(q,m.code,m.codeLen);q+=m.codeLen;runLen+=m.runLength;const t=TERMS[color][span%64];row.setBits(q,t.code,t.codeLen);q+=t.codeLen;runLen+=t.runLength;}else {debugger;}p+=span;color=1-color;}if(runLen!==length){debugger;console.log(runLen);}return q;}$_findDiff(line,from,color){let i=from;for(;i<this._wPixels;i++){if(line.getBit(i)!==color){return i;}}return i;}$_setSpan(row,p,span,color){let len=0;if(span<64){const t=TERMS[color][span];row.setBits(p,t.code,t.codeLen);len+=t.codeLen;}else if(span<2624){const m=MARKS[color][(span-64)/64|0];row.setBits(p,m.code,m.codeLen);p+=m.codeLen;len+=m.codeLen;const t=TERMS[color][span%64];row.setBits(p,t.code,t.codeLen);len+=t.codeLen;}else {debugger;}return len;}/**
         * 압축된 row의 pixel 수를 리턴한다.
         */_encodeLine2D(refLine,line,row,length){let a0=0;// a0과 색이 다른 첫번째 pixel
    let a1=line.getBit(0)!==WHITE?0:this.$_findDiff(line,0,WHITE);// refline에서 a0과 색이 다른 첫번째 pixel
    let b1=refLine.getBit(0)!==WHITE?0:this.$_findDiff(refLine,0,WHITE);let pRow=0;while(true){const b2=b1<length?this.$_findDiff(refLine,b1,refLine.getBit(b1)):length;if(b2>=a1){const d=b1-a1;if(d>=-3&&d<=3){/* vertical mode */const t=VERT_CODES[d+3];row.setBits(pRow,t.code,t.codeLen);pRow+=t.codeLen;a0=a1;}else {/* horizontal mode */const a2=a1<length?this.$_findDiff(line,a1,line.getBit(a1)):length;row.setBits(pRow,HORI_CODE.code,HORI_CODE.codeLen);pRow+=HORI_CODE.codeLen;if(a0+a1===0||line.getBit(a0)===0){pRow+=this.$_setSpan(row,pRow,a1-a0,WHITE);pRow+=this.$_setSpan(row,pRow,a2-a1,BLACK);}else {pRow+=this.$_setSpan(row,pRow,a1-a0,BLACK);pRow+=this.$_setSpan(row,pRow,a2-a1,WHITE);}a0=a2;}}else {/* pass mode */row.setBits(pRow,PASS_CODE.code,PASS_CODE.codeLen);pRow+=PASS_CODE.codeLen;a0=b2;}if(a0>=length){break;}const color=line.getBit(a0);a1=this.$_findDiff(line,a0,color);b1=this.$_findDiff(refLine,a0,1-color);b1=this.$_findDiff(refLine,b1,color);}return pRow;}}class CCITTGroup3Encoder extends CCITTEncoder{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doEncode(pixels,options){const w=options.columns;const h=options.height;return options.scheme===CCITTScheme.GROUP_3?this.$_encode1D(pixels,w,h):this.$_encode2D(pixels,w,h);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_encode1D(pixels,w,h){const counts=[];const rows=[];const line=new CCITTLine(1,w);const wLine=line.byteLength;const row=new CCITTLine(1,w*4);// encode rows
    for(let i=0;i<h;i++){const len=this._encodeLine1D(line.prepare(pixels,wLine*i),row.clear(),w,false);const bytes=row.bytesOfPixels(len);counts.push(bytes);rows.push(row.getBytes(bytes));}// packaging
    const len=rows.map(arr=>arr.length).reduce((prev,curr)=>prev+curr,0);const data=new Uint8Array(new ArrayBuffer(len));for(let i=0,off=0;i<h;i++){data.set(rows[i],off);off+=counts[i];}// let cnt = counts.reduce((prev, curr) => prev + curr, 0);
    // if (cnt !== data.length) {
    //     debugger;
    // }
    return {counts,rows:data};}$_encode2D(pixels,w,h){const counts=[];const rows=[];const line=new CCITTLine(1,w);const wLine=line.byteLength;const row=new CCITTLine(1,w*4);// encode rows
    for(let i=0;i<h;i++){const len=this._encodeLine1D(line.prepare(pixels,wLine*i),row.clear(),w,true);const bytes=row.bytesOfPixels(len);counts.push(bytes);rows.push(row.getBytes(bytes));}// packaging
    const len=rows.map(arr=>arr.length).reduce((prev,curr)=>prev+curr,0);const data=new Uint8Array(new ArrayBuffer(len));for(let i=0,off=0;i<h;i++){data.set(rows[i],off);off+=counts[i];}// let cnt = counts.reduce((prev, curr) => prev + curr, 0);
    // if (cnt !== data.length) {
    //     debugger;
    // }
    return {counts,rows:data};}}class CCITTGroup4Encoder extends CCITTEncoder{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doEncode(pixels,options){const w=options.columns;const h=options.height;const counts=[];const rows=[];let refLine=new CCITTLine(1,w).clear();const line=new CCITTLine(1,w);const wLine=line.byteLength;const row=new CCITTLine(1,w*4);// encode rows
    for(let i=0;i<h;i++){const len=this._encodeLine2D(refLine,line.prepare(pixels,wLine*i),row.clear(),w);const bytes=row.bytesOfPixels(len);counts.push(bytes);rows.push(row.getBytes(bytes));// refLine.prepare(pixels, wLine * i);
    }// packaging
    const len=rows.map(arr=>arr.length).reduce((prev,curr)=>prev+curr,0);const data=new Uint8Array(new ArrayBuffer(len));for(let i=0,off=0;i<h;i++){data.set(rows[i],off);off+=counts[i];}// let cnt = counts.reduce((prev, curr) => prev + curr, 0);
    // if (cnt !== data.length) {
    //     debugger;
    // }
    return {counts,rows:data};}}////////////////////////////////////////////////////////////////////////////////
    const T_SHORT=3;// 16-bit (2-byte) unsigned integer.
    const T_LONG=4;// 32-bit (4-byte) unsigned integer.
    const T_RATIONAL=5;// Two LONGs: the first represents the numerator of a fraction; the second, the denominator.
    const COMPRESSION_T4=3;const COMPRESSION_T6=4;const WHITE_IS_ZERO=0;const RES_INCH=2;const IMG_START=500;/**
     * Tff file.
     */class TFile{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){this._curr=0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    encode(images,options){const length=8+IMG_START*images.length+images.map(img=>Utils.toEven(img.encoded.counts.length*(4+4)+img.encoded.rows.length)).reduce((prev,cur)=>prev+cur,0);const buffer=new ArrayBuffer(length);const dv=this._dv=new DataView(buffer);this.$_writeHeader(dv);images.forEach((image,i,arr)=>this.$_writeIFD(image,options,i,arr.length));return buffer;}seek(pos){this._curr=pos;}skip(delta){this._curr+=delta;}set16(value){this._dv.setInt16(this._curr,value);this._curr+=2;}setU16(value){this._dv.setUint16(this._curr,value);this._curr+=2;}set32(value){this._dv.setInt32(this._curr,value);this._curr+=4;}setU32(value){this._dv.setUint32(this._curr,value);this._curr+=4;}setStr(value){for(let i=0,n=value.length;i<n;i++){this._dv.setUint8(this._curr++,value.charCodeAt(i)&0xff);}if(this._curr&1)this._curr++;// for word boundary
    }strLen(s){return Utils.toEven(s.length);}dateStr(d){function pad(v){return v<10?'0'+v:String(v);}return d.getFullYear()+":"+pad(d.getMonth()+1)+":"+pad(d.getDate())+" "+pad(d.getHours())+":"+pad(d.getMinutes())+":"+pad(d.getSeconds());}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_writeHeader(dv){this.set16(0x4d4d);// byte order 'MM'(big endian, 'II'(0x4949): little endian)
    this.set16(42);// Tiff 식별자.
    this.set32(8);// offset to first IFD(image file directory)
    }$_writeIFD(image,options,index,count){const last=index===count-1;const w=image.width;const h=image.height;const encoding=options.encoding===CCITTScheme.GROUP_3_2D||options.encoding===CCITTScheme.GROUP_3?COMPRESSION_T4:COMPRESSION_T6;const start=this._curr;const counts=image.encoded.counts;const nRow=counts.length;const rows=image.encoded.rows;const nextIFDOff=last?0:Utils.toEven(start+IMG_START+counts.length*(4+4)+rows.length);this._entryCount=0;this._pointer=0;this._pointers=[];// entry count
    this.skip(2);// entries (12 bytes per entry)
    this.$_addVal(0x100,T_SHORT,1,w);// ImageWidth
    this.$_addVal(0x101,T_SHORT,1,h);// ImageLength
    this.$_addVal(0x103,T_SHORT,1,encoding);// Compression
    this.$_addVal(0x106,T_SHORT,1,WHITE_IS_ZERO);// PhotometricInterpretation
    this.$_addVal(0x10a,T_SHORT,1,1);// FillOrder
    this.$_addVal(0x111,T_LONG,nRow,start+IMG_START+nRow*4);// StripOffsets
    this.$_addVal(0x115,T_SHORT,1,1);// SamplesPerPixel
    this.$_addVal(0x116,T_SHORT,1,1);// RowsPerStrip
    this.$_addVal(0x117,T_LONG,nRow,start+IMG_START);// StripByteCounts
    this.$_addOff(0x11a,T_RATIONAL,1,8);// XResolution
    this.$_addOff(0x11b,T_RATIONAL,1,8);// YResolution
    this.$_addVal(0x124,T_LONG,1,1);// T4Options, 2d
    this.$_addVal(0x128,T_SHORT,1,RES_INCH);// ResolutionUnit
    this.set32(nextIFDOff);// next ifd offset or 0 (when last)
    // XResolution
    this.set32(options.dpi||204);this.set32(1);// YResolution
    this.set32(options.dpi||196);this.set32(1);// reset pointers
    let len=start+2+this._entryCount*12+4;this._pointers.forEach(p=>{const off=this._dv.getUint32(p);this._dv.setUint32(p,len+off);});// reset entry count
    const save=this._curr;this.seek(start);this.setU16(this._entryCount);this.seek(save);// StripByteCounts
    this.seek(start+IMG_START);for(let i=0;i<nRow;i++){this.setU32(counts[i]);}// StripOffsets
    for(let i=0,p=this._curr+nRow*4;i<nRow;i++){this.setU32(p);p+=counts[i];}if(this._curr!==start+IMG_START+nRow*8){debugger;}// image
    const arr=new Uint8Array(this._dv.buffer);arr.set(image.encoded.rows,this._curr);if(!last){this.seek(nextIFDOff);}}$_addVal(tag,type,count,value){this.set16(tag);this.set16(type);this.set32(count);if(type===T_SHORT&&count===1){this.set16(value);this.set16(0);}else {this.set32(value);}this._entryCount++;}$_addOff(tag,type,count,offset){this.set16(tag);this.set16(type);this.set32(count);this._pointers.push(this._curr);this.set32(this._pointer);this._pointer+=offset;this._entryCount++;}}/**
     * 리포트 출력을 image 파일로 내보내기 한다.
     */class TiffEncoder{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    encode(canvases,options){options.encoding=options.encoding||CCITTScheme.GROUP_4;const images=this.$_getImages(canvases,options.encoding);const file=new TFile();const buffer=file.encode(images,options);return [new Uint8Array(buffer)];}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    /**
         * bilevle의 경우 각 라인(row)의 첫 픽셀이 byte의 첫번째 bit가 되도록 라인의 끝을 padding한다.
         */$_getImages(canvases,encoding){const images=[];canvases.forEach((canvas,i)=>{const cw=canvas.width;const ch=canvas.height;const data=canvas.getContext('2d').getImageData(0,0,cw,ch).data;const len=data.length;const w2=Math.floor((cw+7)/8);const len2=w2*ch;const data2=new Uint8Array(len2);const dv=new DataView(data2.buffer);let p=0;let q=0;while(p<len){let w=0;while(q<len2&&p<len&&w<cw){let v=0;for(let j=0;j<8&&p<len&&w<cw;j++,w++){if(data[p+3]>0){const r=data[p++];const g=data[p++];const b=data[p++];p++;// alpha
    //v += (r + g + b > 600 ? 0 : 1) << (7 - j);
    v+=(r===0xff&&g===0xff&&b===0xff?0:1)<<7-j;}else {p+=4;}}dv.setUint8(q++,v);}}if(q!==data2.length)debugger;const encoded=CCITTEncoder.encodePixcels(data2,{scheme:encoding,width:canvas.width*32,height:canvas.height,columns:canvas.width});//console.log(encoded.offsets.length);
    // console.log('Encoded', +new Date() - t, 'ms.');
    images.push({index:i,width:canvas.width,height:canvas.height,imageData:data2,length:Utils.toEven(len2),encoded:encoded});});return images;}}/* NeuQuant Neural-Net Quantization Algorithm
     * ------------------------------------------
     *
     * Copyright (c) 1994 Anthony Dekker
     *
     * NEUQUANT Neural-Net quantization algorithm by Anthony Dekker, 1994.
     * See "Kohonen neural networks for optimal colour quantization"
     * in "Network: Computation in Neural Systems" Vol. 5 (1994) pp 351-367.
     * for a discussion of the algorithm.
     * See also  http://members.ozemail.com.au/~dekker/NEUQUANT.HTML
     *
     * Any party obtaining a copy of these files from the author, directly or
     * indirectly, is granted, free of charge, a full and unrestricted irrevocable,
     * world-wide, paid up, royalty-free, nonexclusive right and license to deal
     * in this software and documentation files (the "Software"), including without
     * limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,
     * and/or sell copies of the Software, and to permit persons who receive
     * copies from any such party to do so, with the only requirement being
     * that this copyright notice remain intact.
     *
     * (JavaScript port 2012 by Johan Nordberg)
     */function toInt(v){return ~~v;}var ncycles$1=100;// number of learning cycles
    var netsize$1=256;// number of colors used
    var maxnetpos$1=netsize$1-1;// defs for freq and bias
    var netbiasshift$1=4;// bias for colour values
    var intbiasshift$1=16;// bias for fractions
    var intbias$1=1<<intbiasshift$1;var gammashift$1=10;var betashift$1=10;var beta$1=intbias$1>>betashift$1;/* beta = 1/1024 */var betagamma$1=intbias$1<<gammashift$1-betashift$1;// defs for decreasing radius factor
    var initrad$1=netsize$1>>3;// for 256 cols, radius starts
    var radiusbiasshift$1=6;// at 32.0 biased by 6 bits
    var radiusbias$1=1<<radiusbiasshift$1;var initradius$1=initrad$1*radiusbias$1;//and decreases by a
    var radiusdec$1=30;// factor of 1/30 each cycle
    // defs for decreasing alpha factor
    var alphabiasshift$1=10;// alpha starts at 1.0
    var initalpha$1=1<<alphabiasshift$1;/* radbias and alpharadbias used for radpower calculation */var radbiasshift$1=8;var radbias$1=1<<radbiasshift$1;var alpharadbshift$1=alphabiasshift$1+radbiasshift$1;var alpharadbias$1=1<<alpharadbshift$1;// four primes near 500 - assume no image has a length so large that it is
    // divisible by all four primes
    var prime1$1=499;var prime2$1=491;var prime3$1=487;var prime4$1=503;var minpicturebytes$1=3*prime4$1;/*
      Constructor: NeuQuant

      Arguments:

      pixels - array of pixels in RGB format
      samplefac - sampling factor 1 to 30 where lower is better quality

      >
      > pixels = [r, g, b, r, g, b, r, g, b, ..]
      >
    */function NeuQuant$1(pixels,samplefac){var network;// int[netsize][4]
    var netindex;// for network lookup - really 256
    // bias and freq arrays for learning
    var bias;var freq;var radpower;/*
        Private Method: init

        sets up arrays
      */function init(){network=[];netindex=[];bias=[];freq=[];radpower=[];var i,v;for(i=0;i<netsize$1;i++){v=(i<<netbiasshift$1+8)/netsize$1;network[i]=[v,v,v];freq[i]=intbias$1/netsize$1;bias[i]=0;}}/*
        Private Method: unbiasnet

        unbiases network to give byte values 0..255 and record position i to prepare for sort
      */function unbiasnet(){for(var i=0;i<netsize$1;i++){network[i][0]>>=netbiasshift$1;network[i][1]>>=netbiasshift$1;network[i][2]>>=netbiasshift$1;network[i][3]=i;// record color number
    }}/*
        Private Method: altersingle

        moves neuron *i* towards biased (b,g,r) by factor *alpha*
      */function altersingle(alpha,i,b,g,r){network[i][0]-=alpha*(network[i][0]-b)/initalpha$1;network[i][1]-=alpha*(network[i][1]-g)/initalpha$1;network[i][2]-=alpha*(network[i][2]-r)/initalpha$1;}/*
        Private Method: alterneigh

        moves neurons in *radius* around index *i* towards biased (b,g,r) by factor *alpha*
      */function alterneigh(radius,i,b,g,r){var lo=Math.abs(i-radius);var hi=Math.min(i+radius,netsize$1);var j=i+1;var k=i-1;var m=1;var p,a;while(j<hi||k>lo){a=radpower[m++];if(j<hi){p=network[j++];p[0]-=a*(p[0]-b)/alpharadbias$1;p[1]-=a*(p[1]-g)/alpharadbias$1;p[2]-=a*(p[2]-r)/alpharadbias$1;}if(k>lo){p=network[k--];p[0]-=a*(p[0]-b)/alpharadbias$1;p[1]-=a*(p[1]-g)/alpharadbias$1;p[2]-=a*(p[2]-r)/alpharadbias$1;}}}/*
        Private Method: contest

        searches for biased BGR values
      */function contest(b,g,r){/*
          finds closest neuron (min dist) and updates freq
          finds best neuron (min dist-bias) and returns position
          for frequently chosen neurons, freq[i] is high and bias[i] is negative
          bias[i] = gamma * ((1 / netsize) - freq[i])
        */ // realreport - 원래 netsize(256)인데 어느 정도 줄여도 문제 없는 것 같다.
    const steps=netsize$1/8;var bestd=~(1<<31);var bestbiasd=bestd;var bestpos=-1;var bestbiaspos=bestpos;var i,n,dist,biasdist,betafreq;for(i=0;i<steps;i++){n=network[i];dist=Math.abs(n[0]-b)+Math.abs(n[1]-g)+Math.abs(n[2]-r);if(dist<bestd){bestd=dist;bestpos=i;}biasdist=dist-(bias[i]>>intbiasshift$1-netbiasshift$1);if(biasdist<bestbiasd){bestbiasd=biasdist;bestbiaspos=i;}betafreq=freq[i]>>betashift$1;freq[i]-=betafreq;bias[i]+=betafreq<<gammashift$1;}freq[bestpos]+=beta$1;bias[bestpos]-=betagamma$1;return bestbiaspos;}/*
        Private Method: inxbuild

        sorts network and builds netindex[0..255]
      */function inxbuild(){var i,j,p,q,smallpos,smallval,previouscol=0,startpos=0;for(i=0;i<netsize$1;i++){p=network[i];smallpos=i;smallval=p[1];// index on g
    // find smallest in i..netsize-1
    for(j=i+1;j<netsize$1;j++){q=network[j];if(q[1]<smallval){// index on g
    smallpos=j;smallval=q[1];// index on g
    }}q=network[smallpos];// swap p (i) and q (smallpos) entries
    if(i!=smallpos){j=q[0];q[0]=p[0];p[0]=j;j=q[1];q[1]=p[1];p[1]=j;j=q[2];q[2]=p[2];p[2]=j;j=q[3];q[3]=p[3];p[3]=j;}// smallval entry is now in position i
    if(smallval!=previouscol){netindex[previouscol]=startpos+i>>1;for(j=previouscol+1;j<smallval;j++)netindex[j]=i;previouscol=smallval;startpos=i;}}netindex[previouscol]=startpos+maxnetpos$1>>1;for(j=previouscol+1;j<256;j++)netindex[j]=maxnetpos$1;// really 256
    }/*
        Private Method: inxsearch

        searches for BGR values 0..255 and returns a color index
      */function inxsearch(b,g,r){var a,p,dist;var bestd=1000;// biggest possible dist is 256*3
    var best=-1;var i=netindex[g];// index on g
    var j=i-1;// start at netindex[g] and work outwards
    while(i<netsize$1||j>=0){if(i<netsize$1){p=network[i];dist=p[1]-g;// inx key
    if(dist>=bestd)i=netsize$1;// stop iter
    else {i++;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3];}}}}if(j>=0){p=network[j];dist=g-p[1];// inx key - reverse dif
    if(dist>=bestd)j=-1;// stop iter
    else {j--;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3];}}}}}return best;}/*
        Private Method: learn

        "Main Learning Loop"
      */function learn(){var i;var lengthcount=pixels.length;var alphadec=toInt(30+(samplefac-1)/3);var samplepixels=toInt(lengthcount/(3*samplefac));var delta=toInt(samplepixels/ncycles$1);var alpha=initalpha$1;var radius=initradius$1;var rad=radius>>radiusbiasshift$1;if(rad<=1)rad=0;for(i=0;i<rad;i++)radpower[i]=toInt(alpha*((rad*rad-i*i)*radbias$1/(rad*rad)));var step;if(lengthcount<minpicturebytes$1){samplefac=1;step=3;}else if(lengthcount%prime1$1!==0){step=3*prime1$1;}else if(lengthcount%prime2$1!==0){step=3*prime2$1;}else if(lengthcount%prime3$1!==0){step=3*prime3$1;}else {step=3*prime4$1;}var b,g,r,j;var pix=0;// current pixel
    i=0;while(i<samplepixels){b=(pixels[pix]&0xff)<<netbiasshift$1;g=(pixels[pix+1]&0xff)<<netbiasshift$1;r=(pixels[pix+2]&0xff)<<netbiasshift$1;j=contest(b,g,r);altersingle(alpha,j,b,g,r);if(rad!==0)alterneigh(rad,j,b,g,r);// alter neighbours
    pix+=step;if(pix>=lengthcount)pix-=lengthcount;i++;if(delta===0)delta=1;if(i%delta===0){alpha-=alpha/alphadec;radius-=radius/radiusdec$1;rad=radius>>radiusbiasshift$1;if(rad<=1)rad=0;for(j=0;j<rad;j++)//radpower[j] = toInt(alpha * (((rad * rad - j * j) * radbias) / (rad * rad)));
    radpower[j]=~~(alpha*((rad*rad-j*j)*radbias$1/(rad*rad)));}}}/*
        Method: buildColormap

        1. initializes network
        2. trains it
        3. removes misconceptions
        4. builds colorindex
      */function buildColormap(){init();learn();unbiasnet();inxbuild();}this.buildColormap=buildColormap;/*
        Method: getColormap

        builds colormap from the index

        returns array in the format:

        >
        > [r, g, b, r, g, b, r, g, b, ..]
        >
      */function getColormap(){var map=[];var index=[];for(var i=0;i<netsize$1;i++)index[network[i][3]]=i;var k=0;for(var l=0;l<netsize$1;l++){var j=index[l];map[k++]=network[j][0];map[k++]=network[j][1];map[k++]=network[j][2];}return map;}this.getColormap=getColormap;/*
        Method: lookupRGB

        looks for the closest *r*, *g*, *b* color in the map and
        returns its index
      */this.lookupRGB=inxsearch;}var NeuQuant_1=NeuQuant$1;/* NeuQuant Neural-Net Quantization Algorithm
     * ------------------------------------------
     *
     * Copyright (c) 1994 Anthony Dekker
     *
     * NEUQUANT Neural-Net quantization algorithm by Anthony Dekker, 1994.
     * See "Kohonen neural networks for optimal colour quantization"
     * in "Network: Computation in Neural Systems" Vol. 5 (1994) pp 351-367.
     * for a discussion of the algorithm.
     * See also  http://members.ozemail.com.au/~dekker/NEUQUANT.HTML
     *
     * Any party obtaining a copy of these files from the author, directly or
     * indirectly, is granted, free of charge, a full and unrestricted irrevocable,
     * world-wide, paid up, royalty-free, nonexclusive right and license to deal
     * in this software and documentation files (the "Software"), including without
     * limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,
     * and/or sell copies of the Software, and to permit persons who receive
     * copies from any such party to do so, with the only requirement being
     * that this copyright notice remain intact.
     *
     * (JavaScript port 2012 by Johan Nordberg)
     */var ncycles=100;// number of learning cycles
    var netsize=256;// number of colors used
    var maxnetpos=netsize-1;// defs for freq and bias
    var netbiasshift=4;// bias for colour values
    var intbiasshift=16;// bias for fractions
    var intbias=1<<intbiasshift;var gammashift=10;var betashift=10;var beta=intbias>>betashift;/* beta = 1/1024 */var betagamma=intbias<<gammashift-betashift;// defs for decreasing radius factor
    var initrad=netsize>>3;// for 256 cols, radius starts
    var radiusbiasshift=6;// at 32.0 biased by 6 bits
    var radiusbias=1<<radiusbiasshift;var initradius=initrad*radiusbias;//and decreases by a
    var radiusdec=30;// factor of 1/30 each cycle
    // defs for decreasing alpha factor
    var alphabiasshift=10;// alpha starts at 1.0
    var initalpha=1<<alphabiasshift;/* radbias and alpharadbias used for radpower calculation */var radbiasshift=8;var radbias=1<<radbiasshift;var alpharadbshift=alphabiasshift+radbiasshift;var alpharadbias=1<<alpharadbshift;// four primes near 500 - assume no image has a length so large that it is
    // divisible by all four primes
    var prime1=499;var prime2=491;var prime3=487;var prime4=503;var minpicturebytes=3*prime4;/*
      Constructor: NeuQuant

      Arguments:

      pixels - array of pixels in RGB format
      samplefac - sampling factor 1 to 30 where lower is better quality

      >
      > pixels = [r, g, b, r, g, b, r, g, b, ..]
      >
    */function NeuQuant(pixels,samplefac){var network;// int[netsize][4]
    var netindex;// for network lookup - really 256
    // bias and freq arrays for learning
    var bias;var freq;var radpower;/*
        Private Method: init

        sets up arrays
      */function init(){network=[];netindex=new Int32Array(256);bias=new Int32Array(netsize);freq=new Int32Array(netsize);radpower=new Int32Array(netsize>>3);var i,v;for(i=0;i<netsize;i++){v=(i<<netbiasshift+8)/netsize;network[i]=new Float64Array([v,v,v,0]);//network[i] = [v, v, v, 0]
    freq[i]=intbias/netsize;bias[i]=0;}}/*
        Private Method: unbiasnet

        unbiases network to give byte values 0..255 and record position i to prepare for sort
      */function unbiasnet(){for(var i=0;i<netsize;i++){network[i][0]>>=netbiasshift;network[i][1]>>=netbiasshift;network[i][2]>>=netbiasshift;network[i][3]=i;// record color number
    }}/*
        Private Method: altersingle

        moves neuron *i* towards biased (b,g,r) by factor *alpha*
      */function altersingle(alpha,i,b,g,r){network[i][0]-=alpha*(network[i][0]-b)/initalpha;network[i][1]-=alpha*(network[i][1]-g)/initalpha;network[i][2]-=alpha*(network[i][2]-r)/initalpha;}/*
        Private Method: alterneigh

        moves neurons in *radius* around index *i* towards biased (b,g,r) by factor *alpha*
      */function alterneigh(radius,i,b,g,r){var lo=Math.abs(i-radius);var hi=Math.min(i+radius,netsize);var j=i+1;var k=i-1;var m=1;var p,a;while(j<hi||k>lo){a=radpower[m++];if(j<hi){p=network[j++];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias;}if(k>lo){p=network[k--];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias;}}}/*
        Private Method: contest

        searches for biased BGR values
      */function contest(b,g,r){/*
          finds closest neuron (min dist) and updates freq
          finds best neuron (min dist-bias) and returns position
          for frequently chosen neurons, freq[i] is high and bias[i] is negative
          bias[i] = gamma * ((1 / netsize) - freq[i])
        */var bestd=~(1<<31);var bestbiasd=bestd;var bestpos=-1;var bestbiaspos=bestpos;var i,n,dist,biasdist,betafreq;for(i=0;i<netsize;i++){n=network[i];dist=Math.abs(n[0]-b)+Math.abs(n[1]-g)+Math.abs(n[2]-r);if(dist<bestd){bestd=dist;bestpos=i;}biasdist=dist-(bias[i]>>intbiasshift-netbiasshift);if(biasdist<bestbiasd){bestbiasd=biasdist;bestbiaspos=i;}betafreq=freq[i]>>betashift;freq[i]-=betafreq;bias[i]+=betafreq<<gammashift;}freq[bestpos]+=beta;bias[bestpos]-=betagamma;return bestbiaspos;}/*
        Private Method: inxbuild

        sorts network and builds netindex[0..255]
      */function inxbuild(){var i,j,p,q,smallpos,smallval,previouscol=0,startpos=0;for(i=0;i<netsize;i++){p=network[i];smallpos=i;smallval=p[1];// index on g
    // find smallest in i..netsize-1
    for(j=i+1;j<netsize;j++){q=network[j];if(q[1]<smallval){// index on g
    smallpos=j;smallval=q[1];// index on g
    }}q=network[smallpos];// swap p (i) and q (smallpos) entries
    if(i!=smallpos){j=q[0];q[0]=p[0];p[0]=j;j=q[1];q[1]=p[1];p[1]=j;j=q[2];q[2]=p[2];p[2]=j;j=q[3];q[3]=p[3];p[3]=j;}// smallval entry is now in position i
    if(smallval!=previouscol){netindex[previouscol]=startpos+i>>1;for(j=previouscol+1;j<smallval;j++)netindex[j]=i;previouscol=smallval;startpos=i;}}netindex[previouscol]=startpos+maxnetpos>>1;for(j=previouscol+1;j<256;j++)netindex[j]=maxnetpos;// really 256
    }/*
        Private Method: inxsearch

        searches for BGR values 0..255 and returns a color index
      */function inxsearch(b,g,r){var a,p,dist;var bestd=1000;// biggest possible dist is 256*3
    var best=-1;var i=netindex[g];// index on g
    var j=i-1;// start at netindex[g] and work outwards
    while(i<netsize||j>=0){if(i<netsize){p=network[i];dist=p[1]-g;// inx key
    if(dist>=bestd)i=netsize;// stop iter
    else {i++;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3];}}}}if(j>=0){p=network[j];dist=g-p[1];// inx key - reverse dif
    if(dist>=bestd)j=-1;// stop iter
    else {j--;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3];}}}}}return best;}/*
        Private Method: learn

        "Main Learning Loop"
      */function learn(){var i;var lengthcount=pixels.length;var alphadec=30+(samplefac-1)/3;var samplepixels=lengthcount/(3*samplefac);var delta=~~(samplepixels/ncycles);var alpha=initalpha;var radius=initradius;var rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(i=0;i<rad;i++)radpower[i]=alpha*((rad*rad-i*i)*radbias/(rad*rad));var step;if(lengthcount<minpicturebytes){samplefac=1;step=3;}else if(lengthcount%prime1!==0){step=3*prime1;}else if(lengthcount%prime2!==0){step=3*prime2;}else if(lengthcount%prime3!==0){step=3*prime3;}else {step=3*prime4;}var b,g,r,j;var pix=0;// current pixel
    i=0;while(i<samplepixels){b=(pixels[pix]&0xff)<<netbiasshift;g=(pixels[pix+1]&0xff)<<netbiasshift;r=(pixels[pix+2]&0xff)<<netbiasshift;j=contest(b,g,r);altersingle(alpha,j,b,g,r);if(rad!==0)alterneigh(rad,j,b,g,r);// alter neighbours
    pix+=step;if(pix>=lengthcount)pix-=lengthcount;i++;if(delta===0)delta=1;if(i%delta===0){alpha-=alpha/alphadec;radius-=radius/radiusdec;rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(j=0;j<rad;j++)radpower[j]=alpha*((rad*rad-j*j)*radbias/(rad*rad));}}}/*
        Method: buildColormap

        1. initializes network
        2. trains it
        3. removes misconceptions
        4. builds colorindex
      */function buildColormap(){init();learn();unbiasnet();inxbuild();}this.buildColormap=buildColormap;/*
        Method: getColormap

        builds colormap from the index

        returns array in the format:

        >
        > [r, g, b, r, g, b, r, g, b, ..]
        >
      */function getColormap(){var map=[];var index=[];for(var i=0;i<netsize;i++)index[network[i][3]]=i;var k=0;for(var l=0;l<netsize;l++){var j=index[l];map[k++]=network[j][0];map[k++]=network[j][1];map[k++]=network[j][2];}return map;}this.getColormap=getColormap;/*
        Method: lookupRGB

        looks for the closest *r*, *g*, *b* color in the map and
        returns its index
      */this.lookupRGB=inxsearch;}var TypedNeuQuant=NeuQuant;/*
      LZWEncoder.js

      Authors
      Kevin Weiner (original Java version - kweiner@fmsware.com)
      Thibault Imbert (AS3 version - bytearray.org)
      Johan Nordberg (JS version - code@johan-nordberg.com)

      Acknowledgements
      GIFCOMPR.C - GIF Image compression routines
      Lempel-Ziv compression based on 'compress'. GIF modifications by
      David Rowley (mgardi@watdcsu.waterloo.edu)
      GIF Image compression - modified 'compress'
      Based on: compress.c - File compression ala IEEE Computer, June 1984.
      By Authors: Spencer W. Thomas (decvax!harpo!utah-cs!utah-gr!thomas)
      Jim McKie (decvax!mcvax!jim)
      Steve Davies (decvax!vax135!petsd!peora!srd)
      Ken Turkowski (decvax!decwrl!turtlevax!ken)
      James A. Woods (decvax!ihnp4!ames!jaw)
      Joe Orost (decvax!vax135!petsd!joe)
    */var EOF=-1;var BITS=12;var HSIZE=5003;// 80% occupancy
    var masks=[0x0000,0x0001,0x0003,0x0007,0x000F,0x001F,0x003F,0x007F,0x00FF,0x01FF,0x03FF,0x07FF,0x0FFF,0x1FFF,0x3FFF,0x7FFF,0xFFFF];function LZWEncoder(width,height,pixels,colorDepth){var initCodeSize=Math.max(2,colorDepth);var accum=new Uint8Array(256);var htab=new Int32Array(HSIZE);var codetab=new Int32Array(HSIZE);var cur_accum,cur_bits=0;var a_count;var free_ent=0;// first unused entry
    var maxcode;var remaining;var curPixel;var n_bits;// block compression parameters -- after all codes are used up,
    // and compression rate changes, start over.
    var clear_flg=false;// Algorithm: use open addressing double hashing (no chaining) on the
    // prefix code / next character combination. We do a variant of Knuth's
    // algorithm D (vol. 3, sec. 6.4) along with G. Knott's relatively-prime
    // secondary probe. Here, the modular division first probe is gives way
    // to a faster exclusive-or manipulation. Also do block compression with
    // an adaptive reset, whereby the code table is cleared when the compression
    // ratio decreases, but after the table fills. The variable-length output
    // codes are re-sized at this point, and a special CLEAR code is generated
    // for the decompressor. Late addition: construct the table according to
    // file size for noticeable speed improvement on small files. Please direct
    // questions about this implementation to ames!jaw.
    var g_init_bits,ClearCode,EOFCode;// Add a character to the end of the current packet, and if it is 254
    // characters, flush the packet to disk.
    function char_out(c,outs){accum[a_count++]=c;if(a_count>=254)flush_char(outs);}// Clear out the hash table
    // table clear for block compress
    function cl_block(outs){cl_hash(HSIZE);free_ent=ClearCode+2;clear_flg=true;output(ClearCode,outs);}// Reset code table
    function cl_hash(hsize){for(var i=0;i<hsize;++i)htab[i]=-1;}function compress(init_bits,outs){var fcode,c,i,ent,disp,hsize_reg,hshift;// Set up the globals: g_init_bits - initial number of bits
    g_init_bits=init_bits;// Set up the necessary values
    clear_flg=false;n_bits=g_init_bits;maxcode=MAXCODE(n_bits);ClearCode=1<<init_bits-1;EOFCode=ClearCode+1;free_ent=ClearCode+2;a_count=0;// clear packet
    ent=nextPixel();hshift=0;for(fcode=HSIZE;fcode<65536;fcode*=2)++hshift;hshift=8-hshift;// set hash code range bound
    hsize_reg=HSIZE;cl_hash(hsize_reg);// clear hash table
    output(ClearCode,outs);outer_loop:while((c=nextPixel())!=EOF){fcode=(c<<BITS)+ent;i=c<<hshift^ent;// xor hashing
    if(htab[i]===fcode){ent=codetab[i];continue;}else if(htab[i]>=0){// non-empty slot
    disp=hsize_reg-i;// secondary hash (after G. Knott)
    if(i===0)disp=1;do{if((i-=disp)<0)i+=hsize_reg;if(htab[i]===fcode){ent=codetab[i];continue outer_loop;}}while(htab[i]>=0);}output(ent,outs);ent=c;if(free_ent<1<<BITS){codetab[i]=free_ent++;// code -> hashtable
    htab[i]=fcode;}else {cl_block(outs);}}// Put out the final code.
    output(ent,outs);output(EOFCode,outs);}function encode(outs){outs.writeByte(initCodeSize);// write "initial code size" byte
    remaining=width*height;// reset navigation variables
    curPixel=0;compress(initCodeSize+1,outs);// compress and write the pixel data
    outs.writeByte(0);// write block terminator
    }// Flush the packet to disk, and reset the accumulator
    function flush_char(outs){if(a_count>0){outs.writeByte(a_count);outs.writeBytes(accum,0,a_count);a_count=0;}}function MAXCODE(n_bits){return (1<<n_bits)-1;}// Return the next pixel from the image
    function nextPixel(){if(remaining===0)return EOF;--remaining;var pix=pixels[curPixel++];return pix&0xff;}function output(code,outs){cur_accum&=masks[cur_bits];if(cur_bits>0)cur_accum|=code<<cur_bits;else cur_accum=code;cur_bits+=n_bits;while(cur_bits>=8){char_out(cur_accum&0xff,outs);cur_accum>>=8;cur_bits-=8;}// If the next entry is going to be too big for the code size,
    // then increase it, if possible.
    if(free_ent>maxcode||clear_flg){if(clear_flg){maxcode=MAXCODE(n_bits=g_init_bits);clear_flg=false;}else {++n_bits;if(n_bits==BITS)maxcode=1<<BITS;else maxcode=MAXCODE(n_bits);}}if(code==EOFCode){// At EOF, write the rest of the buffer.
    while(cur_bits>0){char_out(cur_accum&0xff,outs);cur_accum>>=8;cur_bits-=8;}flush_char(outs);}}this.encode=encode;}var LZWEncoder_1=LZWEncoder;/*
      GIFEncoder.js

      Authors
      Kevin Weiner (original Java version - kweiner@fmsware.com)
      Thibault Imbert (AS3 version - bytearray.org)
      Johan Nordberg (JS version - code@johan-nordberg.com)
    */ //var NeuQuant = require('./TypedNeuQuant.js');
    function ByteArray(){this.page=-1;this.pages=[];this.newPage();}ByteArray.pageSize=4096;ByteArray.charMap={};for(var i=0;i<256;i++)ByteArray.charMap[i]=String.fromCharCode(i);ByteArray.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(ByteArray.pageSize);this.cursor=0;};ByteArray.prototype.getData=function(){var rv='';for(var p=0;p<this.pages.length;p++){for(var i=0;i<ByteArray.pageSize;i++){rv+=ByteArray.charMap[this.pages[p][i]];}}return rv;};ByteArray.prototype.writeByte=function(val){if(this.cursor>=ByteArray.pageSize)this.newPage();this.pages[this.page][this.cursor++]=val;};ByteArray.prototype.writeUTFBytes=function(string){for(var l=string.length,i=0;i<l;i++)this.writeByte(string.charCodeAt(i));};ByteArray.prototype.writeBytes=function(array,offset,length){for(var l=length||array.length,i=offset||0;i<l;i++)this.writeByte(array[i]);};function GIFEncoder(width,height){// image size
    this.width=~~width;this.height=~~height;// transparent color if given
    this.transparent=null;// transparent index in color table
    this.transIndex=0;// -1 = no repeat, 0 = forever. anything else is repeat count
    this.repeat=-1;// frame delay (hundredths)
    this.delay=0;this.image=null;// current frame
    this.pixels=null;// BGR byte array from frame
    this.indexedPixels=null;// converted frame indexed to palette
    this.colorDepth=null;// number of bit planes
    this.colorTab=null;// RGB palette
    this.neuQuant=null;// NeuQuant instance that was used to generate this.colorTab.
    this.usedEntry=new Array();// active palette entries
    this.palSize=7;// color table size (bits-1)
    this.dispose=-1;// disposal code (-1 = use default)
    this.firstFrame=true;this.sample=10;// default sample interval for quantizer
    this.dither=false;// default dithering
    this.globalPalette=false;this.out=new ByteArray();}/*
      Sets the delay time between each frame, or changes it for subsequent frames
      (applies to last frame added)
    */GIFEncoder.prototype.setDelay=function(milliseconds){this.delay=Math.round(milliseconds/10);};/*
      Sets frame rate in frames per second.
    */GIFEncoder.prototype.setFrameRate=function(fps){this.delay=Math.round(100/fps);};/*
      Sets the GIF frame disposal code for the last added frame and any
      subsequent frames.

      Default is 0 if no transparent color has been set, otherwise 2.
    */GIFEncoder.prototype.setDispose=function(disposalCode){if(disposalCode>=0)this.dispose=disposalCode;};/*
      Sets the number of times the set of GIF frames should be played.

      -1 = play once
      0 = repeat indefinitely

      Default is -1

      Must be invoked before the first image is added
    */GIFEncoder.prototype.setRepeat=function(repeat){this.repeat=repeat;};/*
      Sets the transparent color for the last added frame and any subsequent
      frames. Since all colors are subject to modification in the quantization
      process, the color in the final palette for each frame closest to the given
      color becomes the transparent color for that frame. May be set to null to
      indicate no transparent color.
    */GIFEncoder.prototype.setTransparent=function(color){this.transparent=color;};/*
      Adds next GIF frame. The frame is not written immediately, but is
      actually deferred until the next frame is received so that timing
      data can be inserted.  Invoking finish() flushes all frames.
    */GIFEncoder.prototype.addFrame=function(imageData){this.image=imageData;this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null;this.getImagePixels();// convert to correct format if necessary
    this.analyzePixels();// build color table & map pixels
    //   console.log('analyzed', +new Date() - t, 'ms');
    if(this.globalPalette===true)this.globalPalette=this.colorTab;if(this.firstFrame){this.writeLSD();// logical screen descriptior
    this.writePalette();// global color table
    if(this.repeat>=0){// use NS app extension to indicate reps
    this.writeNetscapeExt();}}this.writeGraphicCtrlExt();// write graphic control extension
    this.writeImageDesc();// image descriptor
    if(!this.firstFrame&&!this.globalPalette)this.writePalette();// local color table
    this.writePixels();// encode and write pixel data
    //   console.log('encoded', +new Date() - t, 'ms');
    this.firstFrame=false;};/*
      Adds final trailer to the GIF stream, if you don't call the finish method
      the GIF stream will not be valid.
    */GIFEncoder.prototype.finish=function(){this.out.writeByte(0x3b);// gif trailer
    };/*
      Sets quality of color quantization (conversion of images to the maximum 256
      colors allowed by the GIF specification). Lower values (minimum = 1)
      produce better colors, but slow processing significantly. 10 is the
      default, and produces good color mapping at reasonable speeds. Values
      greater than 20 do not yield significant improvements in speed.
    */GIFEncoder.prototype.setQuality=function(quality){if(quality<1)quality=1;this.sample=quality;};/*
      Sets dithering method. Available are:
      - FALSE no dithering
      - TRUE or FloydSteinberg
      - FalseFloydSteinberg
      - Stucki
      - Atkinson
      You can add '-serpentine' to use serpentine scanning
    */GIFEncoder.prototype.setDither=function(dither){if(dither===true)dither='FloydSteinberg';this.dither=dither;};/*
      Sets global palette for all frames.
      You can provide TRUE to create global palette from first picture.
      Or an array of r,g,b,r,g,b,...
    */GIFEncoder.prototype.setGlobalPalette=function(palette){this.globalPalette=palette;};/*
      Returns global palette used for all frames.
      If setGlobalPalette(true) was used, then this function will return
      calculated palette after the first frame is added.
    */GIFEncoder.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette;};/*
      Writes GIF file header
    */GIFEncoder.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a");};/*
      Analyzes current frame colors and creates color map.
    */GIFEncoder.prototype.analyzePixels=function(){if(!this.colorTab){this.neuQuant=new NeuQuant_1(this.pixels,this.sample);this.neuQuant.buildColormap();// create reduced palette
    this.colorTab=this.neuQuant.getColormap();}// map image pixels to new palette
    if(this.dither){this.ditherPixels(this.dither.replace('-serpentine',''),this.dither.match(/-serpentine/)!==null);}else {this.indexPixels();}this.pixels=null;this.colorDepth=8;this.palSize=7;// get closest match to transparent color if specified
    if(this.transparent!==null){this.transIndex=this.findClosest(this.transparent,true);}};/*
      Index pixels, without dithering
    */GIFEncoder.prototype.indexPixels=function(imgq){var nPix=this.pixels.length/3;this.indexedPixels=new Uint8Array(nPix);var k=0;for(var j=0;j<nPix;j++){var index=this.findClosestRGB(this.pixels[k++]&0xff,this.pixels[k++]&0xff,this.pixels[k++]&0xff);this.usedEntry[index]=true;this.indexedPixels[j]=index;}};/*
      Taken from http://jsbin.com/iXofIji/2/edit by PAEz
    */GIFEncoder.prototype.ditherPixels=function(kernel,serpentine){var kernels={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[2/8,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!kernel||!kernels[kernel]){throw 'Unknown dithering kernel: '+kernel;}var ds=kernels[kernel];var index=0,height=this.height,width=this.width,data=this.pixels;var direction=serpentine?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var y=0;y<height;y++){if(serpentine)direction=direction*-1;for(var x=direction==1?0:width-1,xend=direction==1?width:0;x!==xend;x+=direction){index=y*width+x;// Get original colour
    var idx=index*3;var r1=data[idx];var g1=data[idx+1];var b1=data[idx+2];// Get converted colour
    idx=this.findClosestRGB(r1,g1,b1);this.usedEntry[idx]=true;this.indexedPixels[index]=idx;idx*=3;var r2=this.colorTab[idx];var g2=this.colorTab[idx+1];var b2=this.colorTab[idx+2];var er=r1-r2;var eg=g1-g2;var eb=b1-b2;for(var i=direction==1?0:ds.length-1,end=direction==1?ds.length:0;i!==end;i+=direction){var x1=ds[i][1];// *direction;  //  Should this by timesd by direction?..to make the kernel go in the opposite direction....got no idea....
    var y1=ds[i][2];if(x1+x>=0&&x1+x<width&&y1+y>=0&&y1+y<height){var d=ds[i][0];idx=index+x1+y1*width;idx*=3;data[idx]=Math.max(0,Math.min(255,data[idx]+er*d));data[idx+1]=Math.max(0,Math.min(255,data[idx+1]+eg*d));data[idx+2]=Math.max(0,Math.min(255,data[idx+2]+eb*d));}}}}};/*
      Returns index of palette color closest to c
    */GIFEncoder.prototype.findClosest=function(c,used){return this.findClosestRGB((c&0xFF0000)>>16,(c&0x00FF00)>>8,c&0x0000FF,used);};GIFEncoder.prototype.findClosestRGB=function(r,g,b,used){if(this.colorTab===null)return -1;if(this.neuQuant&&!used){return this.neuQuant.lookupRGB(r,g,b);}var minpos=0;var dmin=256*256*256;var len=this.colorTab.length;for(var i=0,index=0;i<len;index++){var dr=r-(this.colorTab[i++]&0xff);var dg=g-(this.colorTab[i++]&0xff);var db=b-(this.colorTab[i++]&0xff);var d=dr*dr+dg*dg+db*db;if((!used||this.usedEntry[index])&&d<dmin){dmin=d;minpos=index;}}return minpos;};/*
      Extracts image pixels into byte array pixels
      (removes alphachannel from canvas imagedata)
    */GIFEncoder.prototype.getImagePixels=function(){var w=this.width;var h=this.height;this.pixels=new Uint8Array(w*h*3);var data=this.image;var srcPos=0;var count=0;for(var i=0;i<h;i++){for(var j=0;j<w;j++){this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];srcPos++;}}};/*
      Writes Graphic Control Extension
    */GIFEncoder.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(0x21);// extension introducer
    this.out.writeByte(0xf9);// GCE label
    this.out.writeByte(4);// data block size
    var transp,disp;if(this.transparent===null){transp=0;disp=0;// dispose = no action
    }else {transp=1;disp=2;// force clear if using transparent color
    }if(this.dispose>=0){disp=dispose&7;// user override
    }disp<<=2;// packed fields
    this.out.writeByte(0|// 1:3 reserved
    disp|// 4:6 disposal
    0|// 7 user input - 0 = none
    transp// 8 transparency flag
    );this.writeShort(this.delay);// delay x 1/100 sec
    this.out.writeByte(this.transIndex);// transparent color index
    this.out.writeByte(0);// block terminator
    };/*
      Writes Image Descriptor
    */GIFEncoder.prototype.writeImageDesc=function(){this.out.writeByte(0x2c);// image separator
    this.writeShort(0);// image position x,y = 0,0
    this.writeShort(0);this.writeShort(this.width);// image size
    this.writeShort(this.height);// packed fields
    if(this.firstFrame||this.globalPalette){// no LCT - GCT is used for first (or only) frame
    this.out.writeByte(0);}else {// specify normal LCT
    this.out.writeByte(0x80|// 1 local color table 1=yes
    0|// 2 interlace - 0=no
    0|// 3 sorted - 0=no
    0|// 4-5 reserved
    this.palSize// 6-8 size of color table
    );}};/*
      Writes Logical Screen Descriptor
    */GIFEncoder.prototype.writeLSD=function(){// logical screen size
    this.writeShort(this.width);this.writeShort(this.height);// packed fields
    this.out.writeByte(0x80|// 1 : global color table flag = 1 (gct used)
    0x70|// 2-4 : color resolution = 7
    0x00|// 5 : gct sort flag = 0
    this.palSize// 6-8 : gct size
    );this.out.writeByte(0);// background color index
    this.out.writeByte(0);// pixel aspect ratio - assume 1:1
    };/*
      Writes Netscape application extension to define repeat count.
    */GIFEncoder.prototype.writeNetscapeExt=function(){this.out.writeByte(0x21);// extension introducer
    this.out.writeByte(0xff);// app extension label
    this.out.writeByte(11);// block size
    this.out.writeUTFBytes('NETSCAPE2.0');// app id + auth code
    this.out.writeByte(3);// sub-block size
    this.out.writeByte(1);// loop sub-block id
    this.writeShort(this.repeat);// loop count (extra iterations, 0=repeat forever)
    this.out.writeByte(0);// block terminator
    };/*
      Writes color table
    */GIFEncoder.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);var n=3*256-this.colorTab.length;for(var i=0;i<n;i++)this.out.writeByte(0);};GIFEncoder.prototype.writeShort=function(pValue){this.out.writeByte(pValue&0xFF);this.out.writeByte(pValue>>8&0xFF);};/*
      Encodes and writes pixel data
    */GIFEncoder.prototype.writePixels=function(){var enc=new LZWEncoder_1(this.width,this.height,this.indexedPixels,this.colorDepth);enc.encode(this.out);};/*
      Retrieves the GIF stream
    */GIFEncoder.prototype.stream=function(){return this.out;};var GIFEncoder_1=GIFEncoder;/*     _    ___  _
          (_)  / __)(_)
      ____ _ _| |__  _  ___
     / _  | (_   __)| |/___)
    ( (_| | | | | _ | |___ |
     \___ |_| |_|(_)| (___/
    (_____|       (_*/var gif={NeuQuant:NeuQuant_1,TypedNeuQuant:TypedNeuQuant,GIFEncoder:GIFEncoder_1,LZWEncoder:LZWEncoder_1};////////////////////////////////////////////////////////////////////////////////
    /**
     * 리포트 출력을 image 파일로 내보내기 한다.
     */class ImageExporter extends Base{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){super();}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    export(report,pages,options,saveCallback){function saveFile(zipped,zipName){if(saveCallback){saveCallback(zipped,zipName);}else {download(zipped,zipName);}}const type=options.type||'png';const fileName=options.fileName||'realreport';const zipName=(options.zipName||'realreport')+'.zip';if(type==='tiff'||type==='tif'){const canvases=[];const promises=[];for(let i=0;i<pages.length;i++){const page=pages[i].page;const opts={onclone:doc=>{const pages=doc.body.getElementsByClassName('rr-print-page');for(let p of pages){p.style.boxShadow='unset';}const groups=doc.body.getElementsByClassName('rr-group-element');for(let g of groups){const color=getComputedStyle(g).backgroundColor;if(color&&color!=='rgba(0, 0, 0, 0)'&&color!=='rgba(0,0,0,0)'){g.style.backgroundColor='#fff';g.style.backgroundImage="url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='7' height='7'%3E%3Crect x='3.5' y='3.5' width='0.5' height='0.5' fill='%23000'/%3E%3C/svg%3E\")";}}}};const p=function(i,page){return new es6Promise.Promise((resolve,reject)=>{html2canvas(page,opts).then(canvas=>{canvases.push(canvas);resolve(i);});});}(i,page);promises.push(p);}es6Promise.Promise.all(promises).then(()=>{const buffers=new TiffEncoder().encode(canvases,options.tiff||{});const zipOptions={};buffers.forEach((buff,i)=>{// TODO: 페이지별로 출력할 때...
    //const name = fileName + (buffers.length > 1 ? (i + 1) : '');
    const name=fileName;zipOptions[name+'.'+type]=[buff,{}];});const zipped=zipSync(zipOptions);saveFile(zipped,zipName);}).catch(err=>{console.error(err);alert(err);});}else if(type==='gif'){const zipOptions={};const promises=[];const opts={onclone:doc=>{const pages=doc.body.getElementsByClassName('rr-print-page');for(let p of pages){p.style.boxShadow='unset';}}};for(let i=0;i<pages.length;i++){const p=function(i,page){return new es6Promise.Promise((resolve,reject)=>{html2canvas(page,opts).then(canvas=>{const imgData=canvas.getContext('2d').getImageData(0,0,canvas.width,canvas.height).data;const encoder2=new gif.GIFEncoder(canvas.width,canvas.height);encoder2.writeHeader();encoder2.addFrame(imgData);encoder2.finish();const out=encoder2.out;const outPages=out.pages;let len=0;for(let i=0;i<outPages.length-1;i++){len+=outPages[i].length;}len+=out.cursor;const buff=new Uint8Array(len);outPages[outPages.length-1]=outPages[outPages.length-1].subarray(0,out.cursor);for(let i=0,p=0;i<outPages.length;i++){buff.set(outPages[i],p);p+=outPages[i].length;}const name=fileName+(pages.length>1?i+1:'');zipOptions[name+'.'+type]=[buff,{}];resolve(i);});});}(i,pages[i].page);promises.push(p);}es6Promise.Promise.all(promises).then(()=>{const zipped=zipSync(zipOptions);saveFile(zipped,zipName);});}else {const mimes={'png':'','jpg':'image/jpeg','jpeg':'image/jpeg'};const zipOptions={};const promises=[];const opts={onclone:doc=>{const pages=doc.body.getElementsByClassName('rr-print-page');for(let p of pages){p.style.boxShadow='unset';}}};for(let i=0;i<pages.length;i++){const p=function(i,page){return new es6Promise.Promise((resolve,reject)=>{html2canvas(page,opts).then(canvas=>{const url=canvas.toDataURL(mimes[type]);const data=Utils.dataUriToBinary(url);const name=fileName+(pages.length>1?i+1:'');zipOptions[name+'.'+type]=[data,{}];resolve(i);});});}(i,pages[i].page);promises.push(p);}es6Promise.Promise.all(promises).then(()=>{const zipped=zipSync(zipOptions);saveFile(zipped,zipName);});}}}/*! For license information please see index.js.LICENSE.txt */var build=createCommonjsModule(function(module,exports){!function(t,e){module.exports=e();}(commonjsGlobal,function(){return (()=>{var t={742:(t,e)=>{e.byteLength=function(t){var e=c(t),r=e[0],n=e[1];return 3*(r+n)/4-n;},e.toByteArray=function(t){var e,r,i=c(t),o=i[0],a=i[1],u=new s(function(t,e,r){return 3*(e+r)/4-r;}(0,o,a)),l=0,h=a>0?o-4:o;for(r=0;r<h;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===a&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,u[l++]=255&e),1===a&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u;},e.fromByteArray=function(t){for(var e,n=t.length,s=n%3,i=[],o=16383,a=0,c=n-s;a<c;a+=o)i.push(u(t,a,a+o>c?c:a+o));return 1===s?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===s&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),i.join("");};for(var r=[],n=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=i.length;o<a;++o)r[o]=i[o],n[i.charCodeAt(o)]=o;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return -1===r&&(r=e),[r,r===e?0:4-r%4];}function u(t,e,n){for(var s,i,o=[],a=e;a<n;a+=3)s=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(r[(i=s)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("");}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63;},764:(t,e,r)=>{const n=r(742),s=r(645),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=function(t){return +t!=t&&(t=0),c.alloc(+t);},e.INSPECT_MAX_BYTES=50;const o=2147483647;function a(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e;}function c(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t);}return u(t,e,r);}function u(t,e,r){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|m(t,e);let n=a(r);const s=n.write(t,e);return s!==r&&(n=n.slice(0,s)),n;}(t,e);if(ArrayBuffer.isView(t))return function(t){if(q(t,Uint8Array)){const e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength);}return p(t);}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(q(t,ArrayBuffer)||t&&q(t.buffer,ArrayBuffer))return d(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(q(t,SharedArrayBuffer)||t&&q(t.buffer,SharedArrayBuffer)))return d(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return c.from(n,e,r);const s=function(t){if(c.isBuffer(t)){const e=0|f(t.length),r=a(e);return 0===r.length||t.copy(r,0,0,e),r;}return void 0!==t.length?"number"!=typeof t.length||Z(t.length)?a(0):p(t):"Buffer"===t.type&&Array.isArray(t.data)?p(t.data):void 0;}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"');}function h(t){return l(t),a(t<0?0:0|f(t));}function p(t){const e=t.length<0?0:0|f(t.length),r=a(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r;}function d(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,c.prototype),n;}function f(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t;}function m(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||q(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(t).length;default:if(s)return n?-1:V(t).length;e=(""+e).toLowerCase(),s=!0;}}function w(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return "";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return "";if((r>>>=0)<=(e>>>=0))return "";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,r);case"utf8":case"utf-8":return S(this,e,r);case"ascii":return I(this,e,r);case"latin1":case"binary":return N(this,e,r);case"base64":return A(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0;}}function g(t,e,r){const n=t[e];t[e]=t[r],t[r]=n;}function y(t,e,r,n,s){if(0===t.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Z(r=+r)&&(r=s?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(s)return -1;r=t.length-1;}else if(r<0){if(!s)return -1;r=0;}if("string"==typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,s);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,s);throw new TypeError("val must be string, number or Buffer");}function b(t,e,r,n,s){let i,o=1,a=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return -1;o=2,a/=2,c/=2,r/=2;}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o);}if(s){let n=-1;for(i=r;i<a;i++)if(u(t,i)===u(e,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===c)return n*o;}else -1!==n&&(i-=i-n),n=-1;}else for(r+c>a&&(r=a-c),i=r;i>=0;i--){let r=!0;for(let n=0;n<c;n++)if(u(t,i+n)!==u(e,n)){r=!1;break;}if(r)return i;}return -1;}function v(t,e,r,n){r=Number(r)||0;const s=t.length-r;n?(n=Number(n))>s&&(n=s):n=s;const i=e.length;let o;for(n>i/2&&(n=i/2),o=0;o<n;++o){const n=parseInt(e.substr(2*o,2),16);if(Z(n))return o;t[r+o]=n;}return o;}function _(t,e,r,n){return X(V(e,t.length-r),t,r,n);}function x(t,e,r,n){return X(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e;}(e),t,r,n);}function E(t,e,r,n){return X($(e),t,r,n);}function T(t,e,r,n){return X(function(t,e){let r,n,s;const i=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,s=r%256,i.push(s),i.push(n);return i;}(e,t.length-r),t,r,n);}function A(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r));}function S(t,e,r){r=Math.min(t.length,r);const n=[];let s=e;for(;s<r;){const e=t[s];let i=null,o=e>239?4:e>223?3:e>191?2:1;if(s+o<=r){let r,n,a,c;switch(o){case 1:e<128&&(i=e);break;case 2:r=t[s+1],128==(192&r)&&(c=(31&e)<<6|63&r,c>127&&(i=c));break;case 3:r=t[s+1],n=t[s+2],128==(192&r)&&128==(192&n)&&(c=(15&e)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:r=t[s+1],n=t[s+2],a=t[s+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(i=c));}}null===i?(i=65533,o=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),s+=o;}return function(t){const e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=R));return r;}(n);}e.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42;}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo();}catch(t){return !1;}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer;}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset;}}),c.poolSize=8192,c.from=function(t,e,r){return u(t,e,r);},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,r){return function(t,e,r){return l(t),t<=0?a(t):void 0!==e?"string"==typeof r?a(t).fill(e,r):a(t).fill(e):a(t);}(t,e,r);},c.allocUnsafe=function(t){return h(t);},c.allocUnsafeSlow=function(t){return h(t);},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype;},c.compare=function(t,e){if(q(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let s=0,i=Math.min(r,n);s<i;++s)if(t[s]!==e[s]){r=t[s],n=e[s];break;}return r<n?-1:n<r?1:0;},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return !0;default:return !1;}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=c.allocUnsafe(e);let s=0;for(r=0;r<t.length;++r){let e=t[r];if(q(e,Uint8Array))s+e.length>n.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(n,s)):Uint8Array.prototype.set.call(n,e,s);else {if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,s);}s+=e.length;}return n;},c.byteLength=m,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)g(this,e,e+1);return this;},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this;},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this;},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?S(this,0,t):w.apply(this,arguments);},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t);},c.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">";},i&&(c.prototype[i]=c.prototype.inspect),c.prototype.compare=function(t,e,r,n,s){if(q(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===s&&(s=this.length),e<0||r>t.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&e>=r)return 0;if(n>=s)return -1;if(e>=r)return 1;if(this===t)return 0;let i=(s>>>=0)-(n>>>=0),o=(r>>>=0)-(e>>>=0);const a=Math.min(i,o),u=this.slice(n,s),l=t.slice(e,r);for(let t=0;t<a;++t)if(u[t]!==l[t]){i=u[t],o=l[t];break;}return i<o?-1:o<i?1:0;},c.prototype.includes=function(t,e,r){return -1!==this.indexOf(t,e,r);},c.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0);},c.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1);},c.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else {if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);}const s=this.length-e;if((void 0===r||r>s)&&(r=s),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let i=!1;for(;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return _(this,t,e,r);case"ascii":case"latin1":case"binary":return x(this,t,e,r);case"base64":return E(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0;}},c.prototype.toJSON=function(){return {type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)};};const R=4096;function I(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(127&t[s]);return n;}function N(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]);return n;}function O(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let s="";for(let n=e;n<r;++n)s+=Y[t[n]];return s;}function C(t,e,r){const n=t.slice(e,r);let s="";for(let t=0;t<n.length-1;t+=2)s+=String.fromCharCode(n[t]+256*n[t+1]);return s;}function k(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length");}function D(t,e,r,n,s,i){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range");}function L(t,e,r,n,s){j(e,n,s,t,r,7);let i=Number(e&BigInt(4294967295));t[r++]=i,i>>=8,t[r++]=i,i>>=8,t[r++]=i,i>>=8,t[r++]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,r;}function P(t,e,r,n,s){j(e,n,s,t,r,7);let i=Number(e&BigInt(4294967295));t[r+7]=i,i>>=8,t[r+6]=i,i>>=8,t[r+5]=i,i>>=8,t[r+4]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o>>=8,t[r+2]=o,o>>=8,t[r+1]=o,o>>=8,t[r]=o,r+8;}function F(t,e,r,n,s,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range");}function B(t,e,r,n,i){return e=+e,r>>>=0,i||F(t,0,r,4),s.write(t,e,r,n,23,4),r+4;}function M(t,e,r,n,i){return e=+e,r>>>=0,i||F(t,0,r,8),s.write(t,e,r,n,52,8),r+8;}c.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,c.prototype),n;},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||k(t,e,this.length);let n=this[t],s=1,i=0;for(;++i<e&&(s*=256);)n+=this[t+i]*s;return n;},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||k(t,e,this.length);let n=this[t+--e],s=1;for(;e>0&&(s*=256);)n+=this[t+--e]*s;return n;},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||k(t,1,this.length),this[t];},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||k(t,2,this.length),this[t]|this[t+1]<<8;},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||k(t,2,this.length),this[t]<<8|this[t+1];},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3];},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3]);},c.prototype.readBigUInt64LE=Q(function(t){K(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||G(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,s=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(s)<<BigInt(32));}),c.prototype.readBigUInt64BE=Q(function(t){K(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||G(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],s=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return (BigInt(n)<<BigInt(32))+BigInt(s);}),c.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||k(t,e,this.length);let n=this[t],s=1,i=0;for(;++i<e&&(s*=256);)n+=this[t+i]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*e)),n;},c.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||k(t,e,this.length);let n=e,s=1,i=this[t+--n];for(;n>0&&(s*=256);)i+=this[t+--n]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*e)),i;},c.prototype.readInt8=function(t,e){return t>>>=0,e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t];},c.prototype.readInt16LE=function(t,e){t>>>=0,e||k(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r;},c.prototype.readInt16BE=function(t,e){t>>>=0,e||k(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r;},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24;},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3];},c.prototype.readBigInt64LE=Q(function(t){K(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||G(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return (BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24);}),c.prototype.readBigInt64BE=Q(function(t){K(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||G(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return (BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r);}),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||k(t,4,this.length),s.read(this,t,!0,23,4);},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||k(t,4,this.length),s.read(this,t,!1,23,4);},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||k(t,8,this.length),s.read(this,t,!0,52,8);},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||k(t,8,this.length),s.read(this,t,!1,52,8);},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||D(this,t,e,r,Math.pow(2,8*r)-1,0);let s=1,i=0;for(this[e]=255&t;++i<r&&(s*=256);)this[e+i]=t/s&255;return e+r;},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||D(this,t,e,r,Math.pow(2,8*r)-1,0);let s=r-1,i=1;for(this[e+s]=255&t;--s>=0&&(i*=256);)this[e+s]=t/i&255;return e+r;},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,1,255,0),this[e]=255&t,e+1;},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2;},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2;},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4;},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4;},c.prototype.writeBigUInt64LE=Q(function(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return L(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"));}),c.prototype.writeBigUInt64BE=Q(function(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return P(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"));}),c.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);D(this,t,e,r,n-1,-n);}let s=0,i=1,o=0;for(this[e]=255&t;++s<r&&(i*=256);)t<0&&0===o&&0!==this[e+s-1]&&(o=1),this[e+s]=(t/i>>0)-o&255;return e+r;},c.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);D(this,t,e,r,n-1,-n);}let s=r-1,i=1,o=0;for(this[e+s]=255&t;--s>=0&&(i*=256);)t<0&&0===o&&0!==this[e+s+1]&&(o=1),this[e+s]=(t/i>>0)-o&255;return e+r;},c.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1;},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2;},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2;},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4;},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4;},c.prototype.writeBigInt64LE=Q(function(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return L(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"));}),c.prototype.writeBigInt64BE=Q(function(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return P(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"));}),c.prototype.writeFloatLE=function(t,e,r){return B(this,t,e,!0,r);},c.prototype.writeFloatBE=function(t,e,r){return B(this,t,e,!1,r);},c.prototype.writeDoubleLE=function(t,e,r){return M(this,t,e,!0,r);},c.prototype.writeDoubleBE=function(t,e,r){return M(this,t,e,!1,r);},c.prototype.copy=function(t,e,r,n){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const s=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),s;},c.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e);}}else "number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=e;s<r;++s)this[s]=t;else {const i=c.isBuffer(t)?t:c.from(t,n),o=i.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<r-e;++s)this[s+e]=i[s%o];}return this;};const U={};function z(t,e,r){U[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(t,"]"),delete this.name;}get code(){return t;}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0});}toString(){return "".concat(this.name," [").concat(t,"]: ").concat(this.message);}};}function H(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e="_".concat(t.slice(r-3,r)).concat(e);return "".concat(t.slice(0,r)).concat(e);}function j(t,e,r,n,s,i){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let s;throw s=i>3?0===e||e===BigInt(0)?">= 0".concat(n," and < 2").concat(n," ** ").concat(8*(i+1)).concat(n):">= -(2".concat(n," ** ").concat(8*(i+1)-1).concat(n,") and < 2 ** ").concat(8*(i+1)-1).concat(n):">= ".concat(e).concat(n," and <= ").concat(r).concat(n),new U.ERR_OUT_OF_RANGE("value",s,t);}!function(t,e,r){K(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||G(e,t.length-(r+1));}(n,s,i);}function K(t,e){if("number"!=typeof t)throw new U.ERR_INVALID_ARG_TYPE(e,"number",t);}function G(t,e,r){if(Math.floor(t)!==t)throw K(t,r),new U.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS();throw new U.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(e),t);}z("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds";},RangeError),z("ERR_INVALID_ARG_TYPE",function(t,e){return "The \"".concat(t,"\" argument must be of type number. Received type ").concat(typeof e);},TypeError),z("ERR_OUT_OF_RANGE",function(t,e,r){let n="The value of \"".concat(t,"\" is out of range."),s=r;return Number.isInteger(r)&&Math.abs(r)>2**32?s=H(String(r)):"bigint"==typeof r&&(s=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(s=H(s)),s+="n"),n+=" It must be ".concat(e,". Received ").concat(s),n;},RangeError);const W=/[^+/0-9A-Za-z-_]/g;function V(t,e){let r;e=e||1/0;const n=t.length;let s=null;const i=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!s){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue;}if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue;}s=r;continue;}if(r<56320){(e-=3)>-1&&i.push(239,191,189),s=r;continue;}r=65536+(s-55296<<10|r-56320);}else s&&(e-=3)>-1&&i.push(239,191,189);if(s=null,r<128){if((e-=1)<0)break;i.push(r);}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128);}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128);}else {if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128);}}return i;}function $(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(W,"")).length<2)return "";for(;t.length%4!=0;)t+="=";return t;}(t));}function X(t,e,r,n){let s;for(s=0;s<n&&!(s+r>=e.length||s>=t.length);++s)e[s+r]=t[s];return s;}function q(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name;}function Z(t){return t!=t;}const Y=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let s=0;s<16;++s)e[n+s]=t[r]+t[s];}return e;}();function Q(t){return "undefined"==typeof BigInt?J:t;}function J(){throw new Error("BigInt not supported");}},187:t=>{var e,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r);};e=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t));}:function(t){return Object.getOwnPropertyNames(t);};var s=Number.isNaN||function(t){return t!=t;};function i(){i.init.call(this);}t.exports=i,t.exports.once=function(t,e){return new Promise(function(r,n){function s(r){t.removeListener(e,i),n(r);}function i(){"function"==typeof t.removeListener&&t.removeListener("error",s),r([].slice.call(arguments));}m(t,e,i,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&m(t,"error",e,{once:!0});}(t,s);});},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);}function c(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners;}function u(t,e,r,n){var s,i,o,u;if(a(r),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),i=t._events),o=i[e]),void 0===o)o=i[e]=r,++t._eventsCount;else if("function"==typeof o?o=i[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(s=c(t))>0&&o.length>s&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,u=l,console&&console.warn&&console.warn(u);}return t;}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments);}function h(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},s=l.bind(n);return s.listener=r,n.wrapFn=s,s;}function p(t,e,r){var n=t._events;if(void 0===n)return [];var s=n[e];return void 0===s?[]:"function"==typeof s?r?[s.listener||s]:[s]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e;}(s):f(s,s.length);}function d(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length;}return 0;}function f(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r;}function m(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else {if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function s(i){n.once&&t.removeEventListener(e,s),r(i);});}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o;},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t;}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0;},i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this;},i.prototype.getMaxListeners=function(){return c(this);},i.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var s="error"===t,i=this._events;if(void 0!==i)s=s&&void 0===i.error;else if(!s)return !1;if(s){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a;}var c=i[t];if(void 0===c)return !1;if("function"==typeof c)n(c,this,e);else {var u=c.length,l=f(c,u);for(r=0;r<u;++r)n(l[r],this,e);}return !0;},i.prototype.addListener=function(t,e){return u(this,t,e,!1);},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return u(this,t,e,!0);},i.prototype.once=function(t,e){return a(e),this.on(t,h(this,t,e)),this;},i.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,h(this,t,e)),this;},i.prototype.removeListener=function(t,e){var r,n,s,i,o;if(a(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(s=-1,i=r.length-1;i>=0;i--)if(r[i]===e||r[i].listener===e){o=r[i].listener,s=i;break;}if(s<0)return this;0===s?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop();}(r,s),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,o||e);}return this;},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var s,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(s=i[n])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this;}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this;},i.prototype.listeners=function(t){return p(this,t,!0);},i.prototype.rawListeners=function(t){return p(this,t,!1);},i.listenerCount=function(t,e){return "function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e);},i.prototype.listenerCount=d,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[];};},645:(t,e)=>{e.read=function(t,e,r,n,s){var i,o,a=8*s-n-1,c=(1<<a)-1,u=c>>1,l=-7,h=r?s-1:0,p=r?-1:1,d=t[e+h];for(h+=p,i=d&(1<<-l)-1,d>>=-l,l+=a;l>0;i=256*i+t[e+h],h+=p,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=256*o+t[e+h],h+=p,l-=8);if(0===i)i=1-u;else {if(i===c)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),i-=u;}return (d?-1:1)*o*Math.pow(2,i-n);},e.write=function(t,e,r,n,s,i){var o,a,c,u=8*i-s-1,l=(1<<u)-1,h=l>>1,p=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,f=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),(e+=o+h>=1?p/c:p*Math.pow(2,1-h))*c>=2&&(o++,c/=2),o+h>=l?(a=0,o=l):o+h>=1?(a=(e*c-1)*Math.pow(2,s),o+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,s),o=0));s>=8;t[r+d]=255&a,d+=f,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;t[r+d]=255&o,d+=f,o/=256,u-=8);t[r+d-f]|=128*m;};},717:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}));}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r(),t.prototype.constructor=t;}};},733:(t,e,r)=>{t.exports=function t(e,r,n){function s(o,a){if(!r[o]){if(!e[o]){if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c;}var u=r[o]={exports:{}};e[o][0].call(u.exports,function(t){return s(e[o][1][t]||t);},u,u.exports,t,e,r,n);}return r[o].exports;}for(var i=void 0,o=0;o<n.length;o++)s(n[o]);return s;}({1:[function(t,e,r){var n=t("./utils"),s=t("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t){for(var e,r,s,o,a,c,u,l=[],h=0,p=t.length,d=p,f="string"!==n.getTypeOf(t);h<t.length;)d=p-h,s=f?(e=t[h++],r=h<p?t[h++]:0,h<p?t[h++]:0):(e=t.charCodeAt(h++),r=h<p?t.charCodeAt(h++):0,h<p?t.charCodeAt(h++):0),o=e>>2,a=(3&e)<<4|r>>4,c=1<d?(15&r)<<2|s>>6:64,u=2<d?63&s:64,l.push(i.charAt(o)+i.charAt(a)+i.charAt(c)+i.charAt(u));return l.join("");},r.decode=function(t){var e,r,n,o,a,c,u=0,l=0,h="data:";if(t.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var p,d=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===i.charAt(64)&&d--,t.charAt(t.length-2)===i.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=s.uint8array?new Uint8Array(0|d):new Array(0|d);u<t.length;)e=i.indexOf(t.charAt(u++))<<2|(o=i.indexOf(t.charAt(u++)))>>4,r=(15&o)<<4|(a=i.indexOf(t.charAt(u++)))>>2,n=(3&a)<<6|(c=i.indexOf(t.charAt(u++))),p[l++]=e,64!==a&&(p[l++]=r),64!==c&&(p[l++]=n);return p;};},{"./support":30,"./utils":32}],2:[function(t,e,r){var n=t("./external"),s=t("./stream/DataWorker"),i=t("./stream/Crc32Probe"),o=t("./stream/DataLengthProbe");function a(t,e,r,n,s){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=n,this.compressedContent=s;}a.prototype={getContentWorker:function(){var t=new s(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),e=this;return t.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch");}),t;},getCompressedWorker:function(){return new s(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression);}},a.createWorkerFrom=function(t,e,r){return t.pipe(new i()).pipe(new o("uncompressedSize")).pipe(e.compressWorker(r)).pipe(new o("compressedSize")).withStreamInfo("compression",e);},e.exports=a;},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,r){var n=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(t){return new n("STORE compression");},uncompressWorker:function(){return new n("STORE decompression");}},r.DEFLATE=t("./flate");},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,r){var n=t("./utils"),s=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t;}return e;}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==n.getTypeOf(t)?function(t,e,r,n){var i=s,o=0+r;t^=-1;for(var a=0;a<o;a++)t=t>>>8^i[255&(t^e[a])];return -1^t;}(0|e,t,t.length):function(t,e,r,n){var i=s,o=0+r;t^=-1;for(var a=0;a<o;a++)t=t>>>8^i[255&(t^e.charCodeAt(a))];return -1^t;}(0|e,t,t.length):0;};},{"./utils":32}],5:[function(t,e,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null;},{}],6:[function(t,e,r){var n;n="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:n};},{lie:37}],7:[function(t,e,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,s=t("pako"),i=t("./utils"),o=t("./stream/GenericWorker"),a=n?"uint8array":"array";function c(t,e){o.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={};}r.magic="\b\0",i.inherits(c,o),c.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(i.transformTo(a,t.data),!1);},c.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0);},c.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null;},c.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta});};},r.compressWorker=function(t){return new c("Deflate",t);},r.uncompressWorker=function(){return new c("Inflate",{});};},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,r){function n(t,e){var r,n="";for(r=0;r<e;r++)n+=String.fromCharCode(255&t),t>>>=8;return n;}function s(t,e,r,s,o,l){var h,p,d=t.file,f=t.compression,m=l!==a.utf8encode,w=i.transformTo("string",l(d.name)),g=i.transformTo("string",a.utf8encode(d.name)),y=d.comment,b=i.transformTo("string",l(y)),v=i.transformTo("string",a.utf8encode(y)),_=g.length!==d.name.length,x=v.length!==y.length,E="",T="",A="",S=d.dir,R=d.date,I={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(I.crc32=t.crc32,I.compressedSize=t.compressedSize,I.uncompressedSize=t.uncompressedSize);var N=0;e&&(N|=8),m||!_&&!x||(N|=2048);var O=0,C=0;S&&(O|=16),"UNIX"===o?(C=798,O|=function(t,e){var r=t;return t||(r=e?16893:33204),(65535&r)<<16;}(d.unixPermissions,S)):(C=20,O|=function(t){return 63&(t||0);}(d.dosPermissions)),h=R.getUTCHours(),h<<=6,h|=R.getUTCMinutes(),h<<=5,h|=R.getUTCSeconds()/2,p=R.getUTCFullYear()-1980,p<<=4,p|=R.getUTCMonth()+1,p<<=5,p|=R.getUTCDate(),_&&(T=n(1,1)+n(c(w),4)+g,E+="up"+n(T.length,2)+T),x&&(A=n(1,1)+n(c(b),4)+v,E+="uc"+n(A.length,2)+A);var k="";return k+="\n\0",k+=n(N,2),k+=f.magic,k+=n(h,2),k+=n(p,2),k+=n(I.crc32,4),k+=n(I.compressedSize,4),k+=n(I.uncompressedSize,4),k+=n(w.length,2),k+=n(E.length,2),{fileRecord:u.LOCAL_FILE_HEADER+k+w+E,dirRecord:u.CENTRAL_FILE_HEADER+n(C,2)+k+n(b.length,2)+"\0\0\0\0"+n(O,4)+n(s,4)+w+E+b};}var i=t("../utils"),o=t("../stream/GenericWorker"),a=t("../utf8"),c=t("../crc32"),u=t("../signature");function l(t,e,r,n){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[];}i.inherits(l,o),l.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,o.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-n-1))/r:100}}));},l.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=s(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}});}else this.accumulate=!0;},l.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=s(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:function(t){return u.DATA_DESCRIPTOR+n(t.crc32,4)+n(t.compressedSize,4)+n(t.uncompressedSize,4);}(t),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null;},l.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t,s=function(t,e,r,s,o){var a=i.transformTo("string",o(s));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(t,2)+n(t,2)+n(e,4)+n(r,4)+n(a.length,2)+a;}(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:s,meta:{percent:100}});},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume();},l.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",function(t){e.processChunk(t);}),t.on("end",function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end();}),t.on("error",function(t){e.error(t);}),this;},l.prototype.resume=function(){return !!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0));},l.prototype.error=function(t){var e=this._sources;if(!o.prototype.error.call(this,t))return !1;for(var r=0;r<e.length;r++)try{e[r].error(t);}catch(t){}return !0;},l.prototype.lock=function(){o.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock();},e.exports=l;},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,r){var n=t("../compressions"),s=t("./ZipFileWorker");r.generateWorker=function(t,e,r){var i=new s(e.streamFiles,r,e.platform,e.encodeFileName),o=0;try{t.forEach(function(t,r){o++;var s=function(t,e){var r=t||e,s=n[r];if(!s)throw new Error(r+" is not a valid compression method !");return s;}(r.options.compression,e.compression),a=r.options.compressionOptions||e.compressionOptions||{},c=r.dir,u=r.date;r._compressWorker(s,a).withStreamInfo("file",{name:t,dir:c,date:u,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(i);}),i.entriesCount=o;}catch(t){i.error(t);}return i;};},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,r){function n(){if(!(this instanceof n))return new n();if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new n();for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t;};}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.7.1",n.loadAsync=function(t,e){return new n().loadAsync(t,e);},n.external=t("./external"),e.exports=n;},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,r){var n=t("./utils"),s=t("./external"),i=t("./utf8"),o=t("./zipEntries"),a=t("./stream/Crc32Probe"),c=t("./nodejsUtils");function u(t){return new s.Promise(function(e,r){var n=t.decompressed.getContentWorker().pipe(new a());n.on("error",function(t){r(t);}).on("end",function(){n.streamInfo.crc32!==t.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):e();}).resume();});}e.exports=function(t,e){var r=this;return e=n.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),c.isNode&&c.isStream(t)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then(function(t){var r=new o(e);return r.load(t),r;}).then(function(t){var r=[s.Promise.resolve(t)],n=t.files;if(e.checkCRC32)for(var i=0;i<n.length;i++)r.push(u(n[i]));return s.Promise.all(r);}).then(function(t){for(var n=t.shift(),s=n.files,i=0;i<s.length;i++){var o=s[i];r.file(o.fileNameStr,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:e.createFolders});}return n.zipComment.length&&(r.comment=n.zipComment),r;});};},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,r){var n=t("../utils"),s=t("../stream/GenericWorker");function i(t,e){s.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e);}n.inherits(i,s),i.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",function(t){e.push({data:t,meta:{percent:0}});}).on("error",function(t){e.isPaused?this.generatedError=t:e.error(t);}).on("end",function(){e.isPaused?e._upstreamEnded=!0:e.end();});},i.prototype.pause=function(){return !!s.prototype.pause.call(this)&&(this._stream.pause(),!0);},i.prototype.resume=function(){return !!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0);},e.exports=i;},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,r){var n=t("readable-stream").Readable;function s(t,e,r){n.call(this,e),this._helper=t;var s=this;t.on("data",function(t,e){s.push(t)||s._helper.pause(),r&&r(e);}).on("error",function(t){s.emit("error",t);}).on("end",function(){s.push(null);});}t("../utils").inherits(s,n),s.prototype._read=function(){this._helper.resume();},e.exports=s;},{"../utils":32,"readable-stream":16}],14:[function(t,e,r){e.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e);},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e;},isBuffer:function(t){return Buffer.isBuffer(t);},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume;}};},{}],15:[function(t,e,r){function n(t,e,r){var n,s=i.getTypeOf(e),a=i.extend(r||{},c);a.date=a.date||new Date(),null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(t=m(t)),a.createFolders&&(n=f(t))&&w.call(this,n,!0);var h="string"===s&&!1===a.binary&&!1===a.base64;r&&void 0!==r.binary||(a.binary=!h),(e instanceof u&&0===e.uncompressedSize||a.dir||!e||0===e.length)&&(a.base64=!1,a.binary=!0,e="",a.compression="STORE",s="string");var g;g=e instanceof u||e instanceof o?e:p.isNode&&p.isStream(e)?new d(t,e):i.prepareContent(t,e,a.binary,a.optimizedBinaryString,a.base64);var y=new l(t,g,a);this.files[t]=y;}var s=t("./utf8"),i=t("./utils"),o=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),c=t("./defaults"),u=t("./compressedObject"),l=t("./zipObject"),h=t("./generate"),p=t("./nodejsUtils"),d=t("./nodejs/NodejsStreamInputAdapter"),f=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):"";},m=function(t){return "/"!==t.slice(-1)&&(t+="/"),t;},w=function(t,e){return e=void 0!==e?e:c.createFolders,t=m(t),this.files[t]||n.call(this,t,null,{dir:!0,createFolders:e}),this.files[t];};function g(t){return "[object RegExp]"===Object.prototype.toString.call(t);}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");},forEach:function(t){var e,r,n;for(e in this.files)n=this.files[e],(r=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(r,n);},filter:function(t){var e=[];return this.forEach(function(r,n){t(r,n)&&e.push(n);}),e;},file:function(t,e,r){if(1!==arguments.length)return t=this.root+t,n.call(this,t,e,r),this;if(g(t)){var s=t;return this.filter(function(t,e){return !e.dir&&s.test(t);});}var i=this.files[this.root+t];return i&&!i.dir?i:null;},folder:function(t){if(!t)return this;if(g(t))return this.filter(function(e,r){return r.dir&&t.test(e);});var e=this.root+t,r=w.call(this,e),n=this.clone();return n.root=r.name,n;},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter(function(e,r){return r.name.slice(0,t.length)===t;}),n=0;n<r.length;n++)delete this.files[r[n].name];return this;},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");},generateInternalStream:function(t){var e,r={};try{if((r=i.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");i.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var n=r.comment||this.comment||"";e=h.generateWorker(this,r,n);}catch(t){(e=new o("error")).error(t);}return new a(e,r.type||"string",r.mimeType);},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e);},generateNodeStream:function(t,e){return (t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e);}};e.exports=y;},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,r){e.exports=t("stream");},{stream:void 0}],17:[function(t,e,r){var n=t("./DataReader");function s(t){n.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e];}t("../utils").inherits(s,n),s.prototype.byteAt=function(t){return this.data[this.zero+t];},s.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),s=t.charCodeAt(3),i=this.length-4;0<=i;--i)if(this.data[i]===e&&this.data[i+1]===r&&this.data[i+2]===n&&this.data[i+3]===s)return i-this.zero;return -1;},s.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),s=t.charCodeAt(3),i=this.readData(4);return e===i[0]&&r===i[1]&&n===i[2]&&s===i[3];},s.prototype.readData=function(t){if(this.checkOffset(t),0===t)return [];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e;},e.exports=s;},{"../utils":32,"./DataReader":18}],18:[function(t,e,r){var n=t("../utils");function s(t){this.data=t,this.length=t.length,this.index=0,this.zero=0;}s.prototype={checkOffset:function(t){this.checkIndex(this.index+t);},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?");},setIndex:function(t){this.checkIndex(t),this.index=t;},skip:function(t){this.setIndex(this.index+t);},byteAt:function(t){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r;},readString:function(t){return n.transformTo("string",this.readData(t));},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1));}},e.exports=s;},{"../utils":32}],19:[function(t,e,r){var n=t("./Uint8ArrayReader");function s(t){n.call(this,t);}t("../utils").inherits(s,n),s.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e;},e.exports=s;},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,r){var n=t("./DataReader");function s(t){n.call(this,t);}t("../utils").inherits(s,n),s.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t);},s.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero;},s.prototype.readAndCheckSignature=function(t){return t===this.readData(4);},s.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e;},e.exports=s;},{"../utils":32,"./DataReader":18}],21:[function(t,e,r){var n=t("./ArrayReader");function s(t){n.call(this,t);}t("../utils").inherits(s,n),s.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e;},e.exports=s;},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,r){var n=t("../utils"),s=t("../support"),i=t("./ArrayReader"),o=t("./StringReader"),a=t("./NodeBufferReader"),c=t("./Uint8ArrayReader");e.exports=function(t){var e=n.getTypeOf(t);return n.checkSupport(e),"string"!==e||s.uint8array?"nodebuffer"===e?new a(t):s.uint8array?new c(n.transformTo("uint8array",t)):new i(n.transformTo("array",t)):new o(t);};},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b";},{}],24:[function(t,e,r){var n=t("./GenericWorker"),s=t("../utils");function i(t){n.call(this,"ConvertWorker to "+t),this.destType=t;}s.inherits(i,n),i.prototype.processChunk=function(t){this.push({data:s.transformTo(this.destType,t.data),meta:t.meta});},e.exports=i;},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,r){var n=t("./GenericWorker"),s=t("../crc32");function i(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0);}t("../utils").inherits(i,n),i.prototype.processChunk=function(t){this.streamInfo.crc32=s(t.data,this.streamInfo.crc32||0),this.push(t);},e.exports=i;},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,r){var n=t("../utils"),s=t("./GenericWorker");function i(t){s.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0);}n.inherits(i,s),i.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length;}s.prototype.processChunk.call(this,t);},e.exports=i;},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,r){var n=t("../utils"),s=t("./GenericWorker");function i(t){s.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then(function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=n.getTypeOf(t),e.isPaused||e._tickAndRepeat();},function(t){e.error(t);});}n.inherits(i,s),i.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null;},i.prototype.resume=function(){return !!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0);},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0));},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return !1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e);}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}});},e.exports=i;},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,r){function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null;}n.prototype={push:function(t){this.emit("data",t);},end:function(){if(this.isFinished)return !1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0;}catch(t){this.emit("error",t);}return !0;},error:function(t){return !this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0);},on:function(t,e){return this._listeners[t].push(e),this;},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[];},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e);},pipe:function(t){return t.registerPrevious(this);},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",function(t){e.processChunk(t);}),t.on("end",function(){e.end();}),t.on("error",function(t){e.error(t);}),this;},pause:function(){return !this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0);},resume:function(){if(!this.isPaused||this.isFinished)return !1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t;},flush:function(){},processChunk:function(t){this.push(t);},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this;},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t]);},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock();},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t;}},e.exports=n;},{}],29:[function(t,e,r){var n=t("../utils"),s=t("./ConvertWorker"),i=t("./GenericWorker"),o=t("../base64"),a=t("../support"),c=t("../external"),u=null;if(a.nodestream)try{u=t("../nodejs/NodejsStreamOutputAdapter");}catch(t){}function l(t,e,r){var o=e;switch(e){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string";}try{this._internalType=o,this._outputType=e,this._mimeType=r,n.checkSupport(o),this._worker=t.pipe(new s(o)),t.lock();}catch(t){this._worker=new i("error"),this._worker.error(t);}}l.prototype={accumulate:function(t){return function(t,e){return new c.Promise(function(r,s){var i=[],a=t._internalType,c=t._outputType,u=t._mimeType;t.on("data",function(t,r){i.push(t),e&&e(r);}).on("error",function(t){i=[],s(t);}).on("end",function(){try{var t=function(t,e,r){switch(t){case"blob":return n.newBlob(n.transformTo("arraybuffer",e),r);case"base64":return o.encode(e);default:return n.transformTo(t,e);}}(c,function(t,e){var r,n=0,s=null,i=0;for(r=0;r<e.length;r++)i+=e[r].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(s=new Uint8Array(i),r=0;r<e.length;r++)s.set(e[r],n),n+=e[r].length;return s;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'");}}(a,i),u);r(t);}catch(t){s(t);}i=[];}).resume();});}(this,t);},on:function(t,e){var r=this;return "data"===t?this._worker.on(t,function(t){e.call(r,t.data,t.meta);}):this._worker.on(t,function(){n.delay(e,arguments,r);}),this;},resume:function(){return n.delay(this._worker.resume,[],this._worker),this;},pause:function(){return this._worker.pause(),this;},toNodejsStream:function(t){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},t);}},e.exports=l;},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof Buffer,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else {var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size;}catch(t){try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder)();s.append(n),r.blob=0===s.getBlob("application/zip").size;}catch(t){r.blob=!1;}}}try{r.nodestream=!!t("readable-stream").Readable;}catch(t){r.nodestream=!1;}},{"readable-stream":16}],31:[function(t,e,r){for(var n=t("./utils"),s=t("./support"),i=t("./nodejsUtils"),o=t("./stream/GenericWorker"),a=new Array(256),c=0;c<256;c++)a[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(){o.call(this,"utf-8 decode"),this.leftOver=null;}function l(){o.call(this,"utf-8 encode");}a[254]=a[254]=1,r.utf8encode=function(t){return s.nodebuffer?i.newBufferFrom(t,"utf-8"):function(t){var e,r,n,i,o,a=t.length,c=0;for(i=0;i<a;i++)55296==(64512&(r=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=t.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),c+=r<128?1:r<2048?2:r<65536?3:4;for(e=s.uint8array?new Uint8Array(c):new Array(c),i=o=0;o<c;i++)55296==(64512&(r=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=t.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?e[o++]=r:(r<2048?e[o++]=192|r>>>6:(r<65536?e[o++]=224|r>>>12:(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63),e[o++]=128|r>>>6&63),e[o++]=128|63&r);return e;}(t);},r.utf8decode=function(t){return s.nodebuffer?n.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,r,s,i,o=t.length,c=new Array(2*o);for(e=r=0;e<o;)if((s=t[e++])<128)c[r++]=s;else if(4<(i=a[s]))c[r++]=65533,e+=i-1;else {for(s&=2===i?31:3===i?15:7;1<i&&e<o;)s=s<<6|63&t[e++],i--;1<i?c[r++]=65533:s<65536?c[r++]=s:(s-=65536,c[r++]=55296|s>>10&1023,c[r++]=56320|1023&s);}return c.length!==r&&(c.subarray?c=c.subarray(0,r):c.length=r),n.applyFromCharCode(c);}(t=n.transformTo(s.uint8array?"uint8array":"array",t));},n.inherits(u,o),u.prototype.processChunk=function(t){var e=n.transformTo(s.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var i=e;(e=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),e.set(i,this.leftOver.length);}else e=this.leftOver.concat(e);this.leftOver=null;}var o=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0||0===r?e:r+a[t[r]]>e?r:e;}(e),c=e;o!==e.length&&(s.uint8array?(c=e.subarray(0,o),this.leftOver=e.subarray(o,e.length)):(c=e.slice(0,o),this.leftOver=e.slice(o,e.length))),this.push({data:r.utf8decode(c),meta:t.meta});},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null);},r.Utf8DecodeWorker=u,n.inherits(l,o),l.prototype.processChunk=function(t){this.push({data:r.utf8encode(t.data),meta:t.meta});},r.Utf8EncodeWorker=l;},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,r){var n=t("./support"),s=t("./base64"),i=t("./nodejsUtils"),o=t("set-immediate-shim"),a=t("./external");function c(t){return t;}function u(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e;}r.newBlob=function(t,e){r.checkSupport("blob");try{return new Blob([t],{type:e});}catch(r){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder)();return n.append(t),n.getBlob(e);}catch(t){throw new Error("Bug : can't construct the Blob.");}}};var l={stringifyByChunk:function(t,e,r){var n=[],s=0,i=t.length;if(i<=r)return String.fromCharCode.apply(null,t);for(;s<i;)"array"===e||"nodebuffer"===e?n.push(String.fromCharCode.apply(null,t.slice(s,Math.min(s+r,i)))):n.push(String.fromCharCode.apply(null,t.subarray(s,Math.min(s+r,i)))),s+=r;return n.join("");},stringifyByChar:function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e;},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length;}catch(t){return !1;}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,i.allocBuffer(1)).length;}catch(t){return !1;}}()}};function h(t){var e=65536,n=r.getTypeOf(t),s=!0;if("uint8array"===n?s=l.applyCanBeUsed.uint8array:"nodebuffer"===n&&(s=l.applyCanBeUsed.nodebuffer),s)for(;1<e;)try{return l.stringifyByChunk(t,n,e);}catch(t){e=Math.floor(e/2);}return l.stringifyByChar(t);}function p(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e;}r.applyFromCharCode=h;var d={};d.string={string:c,array:function(t){return u(t,new Array(t.length));},arraybuffer:function(t){return d.string.uint8array(t).buffer;},uint8array:function(t){return u(t,new Uint8Array(t.length));},nodebuffer:function(t){return u(t,i.allocBuffer(t.length));}},d.array={string:h,array:c,arraybuffer:function(t){return new Uint8Array(t).buffer;},uint8array:function(t){return new Uint8Array(t);},nodebuffer:function(t){return i.newBufferFrom(t);}},d.arraybuffer={string:function(t){return h(new Uint8Array(t));},array:function(t){return p(new Uint8Array(t),new Array(t.byteLength));},arraybuffer:c,uint8array:function(t){return new Uint8Array(t);},nodebuffer:function(t){return i.newBufferFrom(new Uint8Array(t));}},d.uint8array={string:h,array:function(t){return p(t,new Array(t.length));},arraybuffer:function(t){return t.buffer;},uint8array:c,nodebuffer:function(t){return i.newBufferFrom(t);}},d.nodebuffer={string:h,array:function(t){return p(t,new Array(t.length));},arraybuffer:function(t){return d.nodebuffer.uint8array(t).buffer;},uint8array:function(t){return p(t,new Uint8Array(t.length));},nodebuffer:c},r.transformTo=function(t,e){if(e=e||"",!t)return e;r.checkSupport(t);var n=r.getTypeOf(e);return d[n][t](e);},r.getTypeOf=function(t){return "string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":n.nodebuffer&&i.isBuffer(t)?"nodebuffer":n.uint8array&&t instanceof Uint8Array?"uint8array":n.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0;},r.checkSupport=function(t){if(!n[t.toLowerCase()])throw new Error(t+" is not supported by this platform");},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){var e,r,n="";for(r=0;r<(t||"").length;r++)n+="\\x"+((e=t.charCodeAt(r))<16?"0":"")+e.toString(16).toUpperCase();return n;},r.delay=function(t,e,r){o(function(){t.apply(r||null,e||[]);});},r.inherits=function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r();},r.extend=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===r[e]&&(r[e]=arguments[t][e]);return r;},r.prepareContent=function(t,e,i,o,c){return a.Promise.resolve(e).then(function(t){return n.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new a.Promise(function(e,r){var n=new FileReader();n.onload=function(t){e(t.target.result);},n.onerror=function(t){r(t.target.error);},n.readAsArrayBuffer(t);}):t;}).then(function(e){var l=r.getTypeOf(e);return l?("arraybuffer"===l?e=r.transformTo("uint8array",e):"string"===l&&(c?e=s.decode(e):i&&!0!==o&&(e=function(t){return u(t,n.uint8array?new Uint8Array(t.length):new Array(t.length));}(e))),e):a.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"));});};},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,e,r){var n=t("./reader/readerFor"),s=t("./utils"),i=t("./signature"),o=t("./zipEntry"),a=(t("./utf8"),t("./support"));function c(t){this.files=[],this.loadOptions=t;}c.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(e)+", expected "+s.pretty(t)+")");}},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4)===e;return this.reader.setIndex(r),n;},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=a.uint8array?"uint8array":"array",r=s.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r);},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r};},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported");},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes();},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(t=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length);},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral();}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=e-r;if(0<n)this.isSignature(e,i.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.");},prepareReader:function(t){this.reader=n(t);},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles();}},e.exports=c;},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,r){var n=t("./reader/readerFor"),s=t("./utils"),i=t("./compressedObject"),o=t("./crc32"),a=t("./utf8"),c=t("./compressions"),u=t("./support");function l(t,e){this.options=t,this.loadOptions=e;}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag);},useUTF8:function(){return 2048==(2048&this.bitFlag);},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in c)if(c.hasOwnProperty(e)&&c[e].magic===t)return c[e];return null;}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize));},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength);},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0);},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4));}},readExtraFields:function(t){var e,r,n,s=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<s;)e=t.readInt(2),r=t.readInt(2),n=t.readData(r),this.extraFields[e]={id:e,length:r,value:n};t.setIndex(s);},handleUTF8:function(){var t=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else {var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else {var r=s.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r);}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else {var i=s.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i);}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=n(t.value);return 1!==e.readInt(1)||o(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5));}return null;},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=n(t.value);return 1!==e.readInt(1)||o(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5));}return null;}},e.exports=l;},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,r){function n(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions};}var s=t("./stream/StreamHelper"),i=t("./stream/DataWorker"),o=t("./utf8"),a=t("./compressedObject"),c=t("./stream/GenericWorker");n.prototype={internalStream:function(t){var e=null,r="string";try{if(!t)throw new Error("No output type specified.");var n="string"===(r=t.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),e=this._decompressWorker();var i=!this._dataBinary;i&&!n&&(e=e.pipe(new o.Utf8EncodeWorker())),!i&&n&&(e=e.pipe(new o.Utf8DecodeWorker()));}catch(t){(e=new c("error")).error(t);}return new s(e,r,"");},async:function(t,e){return this.internalStream(t).accumulate(e);},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e);},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new o.Utf8EncodeWorker())),a.createWorkerFrom(r,t,e);},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof c?this._data:new i(this._data);}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");},h=0;h<u.length;h++)n.prototype[u[h]]=l;e.exports=n;},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,n){(function(t){var r,n,s=t.MutationObserver||t.WebKitMutationObserver;if(s){var i=0,o=new s(l),a=t.document.createTextNode("");o.observe(a,{characterData:!0}),r=function(){a.data=i=++i%2;};}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null;},t.document.documentElement.appendChild(e);}:function(){setTimeout(l,0);};else {var c=new t.MessageChannel();c.port1.onmessage=l,r=function(){c.port2.postMessage(0);};}var u=[];function l(){var t,e;n=!0;for(var r=u.length;r;){for(e=u,u=[],t=-1;++t<r;)e[t]();r=u.length;}n=!1;}e.exports=function(t){1!==u.push(t)||n||r();};}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{}],37:[function(t,e,r){var n=t("immediate");function s(){}var i={},o=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,t!==s&&d(this,t);}function l(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected);}function h(t,e,r){n(function(){var n;try{n=e(r);}catch(n){return i.reject(t,n);}n===t?i.reject(t,new TypeError("Cannot resolve promise with itself")):i.resolve(t,n);});}function p(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments);};}function d(t,e){var r=!1;function n(e){r||(r=!0,i.reject(t,e));}function s(e){r||(r=!0,i.resolve(t,e));}var o=f(function(){e(s,n);});"error"===o.status&&n(o.value);}function f(t,e){var r={};try{r.value=t(e),r.status="success";}catch(t){r.status="error",r.value=t;}return r;}(e.exports=u).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r;});},function(r){return e.resolve(t()).then(function(){throw r;});});},u.prototype.catch=function(t){return this.then(null,t);},u.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===o)return this;var r=new this.constructor(s);return this.state!==c?h(r,this.state===a?t:e,this.outcome):this.queue.push(new l(r,t,e)),r;},l.prototype.callFulfilled=function(t){i.resolve(this.promise,t);},l.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t);},l.prototype.callRejected=function(t){i.reject(this.promise,t);},l.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t);},i.resolve=function(t,e){var r=f(p,e);if("error"===r.status)return i.reject(t,r.value);var n=r.value;if(n)d(t,n);else {t.state=a,t.outcome=e;for(var s=-1,o=t.queue.length;++s<o;)t.queue[s].callFulfilled(e);}return t;},i.reject=function(t,e){t.state=o,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t;},u.resolve=function(t){return t instanceof this?t:i.resolve(new this(s),t);},u.reject=function(t){var e=new this(s);return i.reject(e,t);},u.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var o=new Array(r),a=0,c=-1,u=new this(s);++c<r;)l(t[c],c);return u;function l(t,s){e.resolve(t).then(function(t){o[s]=t,++a!==r||n||(n=!0,i.resolve(u,o));},function(t){n||(n=!0,i.reject(u,t));});}},u.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,r=!1;if(!e)return this.resolve([]);for(var n,o=-1,a=new this(s);++o<e;)n=t[o],this.resolve(n).then(function(t){r||(r=!0,i.resolve(a,t));},function(t){r||(r=!0,i.reject(a,t));});return a;};},{immediate:36}],38:[function(t,e,r){var n={};(0, t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n;},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,r){var n=t("./zlib/deflate"),s=t("./utils/common"),i=t("./utils/strings"),o=t("./zlib/messages"),a=t("./zlib/zstream"),c=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=s.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a(),this.strm.avail_out=0;var r=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==r)throw new Error(o[r]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var l;if(l="string"==typeof e.dictionary?i.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(r=n.deflateSetDictionary(this.strm,l)))throw new Error(o[r]);this._dict_set=!0;}}function l(t,e){var r=new u(e);if(r.push(t,!0),r.err)throw r.msg||o[r.err];return r.result;}u.prototype.push=function(t,e){var r,o,a=this.strm,u=this.options.chunkSize;if(this.ended)return !1;o=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=i.string2buf(t):"[object ArrayBuffer]"===c.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new s.Buf8(u),a.next_out=0,a.avail_out=u),1!==(r=n.deflate(a,o))&&0!==r)return this.onEnd(r),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(i.buf2binstring(s.shrinkBuf(a.output,a.next_out))):this.onData(s.shrinkBuf(a.output,a.next_out)));}while((0<a.avail_in||0===a.avail_out)&&1!==r);return 4===o?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==o||(this.onEnd(0),!(a.avail_out=0));},u.prototype.onData=function(t){this.chunks.push(t);},u.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg;},r.Deflate=u,r.deflate=l,r.deflateRaw=function(t,e){return (e=e||{}).raw=!0,l(t,e);},r.gzip=function(t,e){return (e=e||{}).gzip=!0,l(t,e);};},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,r){var n=t("./zlib/inflate"),s=t("./utils/common"),i=t("./utils/strings"),o=t("./zlib/constants"),a=t("./zlib/messages"),c=t("./zlib/zstream"),u=t("./zlib/gzheader"),l=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c(),this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==o.Z_OK)throw new Error(a[r]);this.header=new u(),n.inflateGetHeader(this.strm,this.header);}function p(t,e){var r=new h(e);if(r.push(t,!0),r.err)throw r.msg||a[r.err];return r.result;}h.prototype.push=function(t,e){var r,a,c,u,h,p,d=this.strm,f=this.options.chunkSize,m=this.options.dictionary,w=!1;if(this.ended)return !1;a=e===~~e?e:!0===e?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof t?d.input=i.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new s.Buf8(f),d.next_out=0,d.avail_out=f),(r=n.inflate(d,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&m&&(p="string"==typeof m?i.string2buf(m):"[object ArrayBuffer]"===l.call(m)?new Uint8Array(m):m,r=n.inflateSetDictionary(this.strm,p)),r===o.Z_BUF_ERROR&&!0===w&&(r=o.Z_OK,w=!1),r!==o.Z_STREAM_END&&r!==o.Z_OK)return this.onEnd(r),!(this.ended=!0);d.next_out&&(0!==d.avail_out&&r!==o.Z_STREAM_END&&(0!==d.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(c=i.utf8border(d.output,d.next_out),u=d.next_out-c,h=i.buf2string(d.output,c),d.next_out=u,d.avail_out=f-u,u&&s.arraySet(d.output,d.output,c,u,0),this.onData(h)):this.onData(s.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(w=!0);}while((0<d.avail_in||0===d.avail_out)&&r!==o.Z_STREAM_END);return r===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(d.avail_out=0));},h.prototype.onData=function(t){this.chunks.push(t);},h.prototype.onEnd=function(t){t===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg;},r.Inflate=h,r.inflate=p,r.inflateRaw=function(t,e){return (e=e||{}).raw=!0,p(t,e);},r.ungzip=p;},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);}}return t;},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t);};var s={arraySet:function(t,e,r,n,s){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),s);else for(var i=0;i<n;i++)t[s+i]=e[r+i];},flattenChunks:function(t){var e,r,n,s,i,o;for(e=n=0,r=t.length;e<r;e++)n+=t[e].length;for(o=new Uint8Array(n),e=s=0,r=t.length;e<r;e++)i=t[e],o.set(i,s),s+=i.length;return o;}},i={arraySet:function(t,e,r,n,s){for(var i=0;i<n;i++)t[s+i]=e[r+i];},flattenChunks:function(t){return [].concat.apply([],t);}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,s)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,i));},r.setTyped(n);},{}],42:[function(t,e,r){var n=t("./common"),s=!0,i=!0;try{String.fromCharCode.apply(null,[0]);}catch(t){s=!1;}try{String.fromCharCode.apply(null,new Uint8Array(1));}catch(t){i=!1;}for(var o=new n.Buf8(256),a=0;a<256;a++)o[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function c(t,e){if(e<65537&&(t.subarray&&i||!t.subarray&&s))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",o=0;o<e;o++)r+=String.fromCharCode(t[o]);return r;}o[254]=o[254]=1,r.string2buf=function(t){var e,r,s,i,o,a=t.length,c=0;for(i=0;i<a;i++)55296==(64512&(r=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(s=t.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(s-56320),i++),c+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(c),i=o=0;o<c;i++)55296==(64512&(r=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(s=t.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(s-56320),i++),r<128?e[o++]=r:(r<2048?e[o++]=192|r>>>6:(r<65536?e[o++]=224|r>>>12:(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63),e[o++]=128|r>>>6&63),e[o++]=128|63&r);return e;},r.buf2binstring=function(t){return c(t,t.length);},r.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,s=e.length;r<s;r++)e[r]=t.charCodeAt(r);return e;},r.buf2string=function(t,e){var r,n,s,i,a=e||t.length,u=new Array(2*a);for(r=n=0;r<a;)if((s=t[r++])<128)u[n++]=s;else if(4<(i=o[s]))u[n++]=65533,r+=i-1;else {for(s&=2===i?31:3===i?15:7;1<i&&r<a;)s=s<<6|63&t[r++],i--;1<i?u[n++]=65533:s<65536?u[n++]=s:(s-=65536,u[n++]=55296|s>>10&1023,u[n++]=56320|1023&s);}return c(u,n);},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0||0===r?e:r+o[t[r]]>e?r:e;};},{"./common":41}],43:[function(t,e,r){e.exports=function(t,e,r,n){for(var s=65535&t|0,i=t>>>16&65535|0,o=0;0!==r;){for(r-=o=2e3<r?2e3:r;i=i+(s=s+e[n++]|0)|0,--o;);s%=65521,i%=65521;}return s|i<<16|0;};},{}],44:[function(t,e,r){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};},{}],45:[function(t,e,r){var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t;}return e;}();e.exports=function(t,e,r,s){var i=n,o=s+r;t^=-1;for(var a=s;a<o;a++)t=t>>>8^i[255&(t^e[a])];return -1^t;};},{}],46:[function(t,e,r){var n,s=t("../utils/common"),i=t("./trees"),o=t("./adler32"),a=t("./crc32"),c=t("./messages"),u=-2,l=258,h=262,p=113;function d(t,e){return t.msg=c[e],e;}function f(t){return (t<<1)-(4<t?9:0);}function m(t){for(var e=t.length;0<=--e;)t[e]=0;}function w(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(s.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0));}function g(t,e){i._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,w(t.strm);}function y(t,e){t.pending_buf[t.pending++]=e;}function b(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e;}function v(t,e){var r,n,s=t.max_chain_length,i=t.strstart,o=t.prev_length,a=t.nice_match,c=t.strstart>t.w_size-h?t.strstart-(t.w_size-h):0,u=t.window,p=t.w_mask,d=t.prev,f=t.strstart+l,m=u[i+o-1],w=u[i+o];t.prev_length>=t.good_match&&(s>>=2),a>t.lookahead&&(a=t.lookahead);do{if(u[(r=e)+o]===w&&u[r+o-1]===m&&u[r]===u[i]&&u[++r]===u[i+1]){i+=2,r++;do{}while(u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&i<f);if(n=l-(f-i),i=f-l,o<n){if(t.match_start=e,a<=(o=n))break;m=u[i+o-1],w=u[i+o];}}}while((e=d[e&p])>c&&0!=--s);return o<=t.lookahead?o:t.lookahead;}function _(t){var e,r,n,i,c,u,l,p,d,f,m=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=m+(m-h)){for(s.arraySet(t.window,t.window,m,m,0),t.match_start-=m,t.strstart-=m,t.block_start-=m,e=r=t.hash_size;n=t.head[--e],t.head[e]=m<=n?n-m:0,--r;);for(e=r=m;n=t.prev[--e],t.prev[e]=m<=n?n-m:0,--r;);i+=m;}if(0===t.strm.avail_in)break;if(u=t.strm,l=t.window,p=t.strstart+t.lookahead,f=void 0,(d=i)<(f=u.avail_in)&&(f=d),r=0===f?0:(u.avail_in-=f,s.arraySet(l,u.input,u.next_in,f,p),1===u.state.wrap?u.adler=o(u.adler,l,f,p):2===u.state.wrap&&(u.adler=a(u.adler,l,f,p)),u.next_in+=f,u.total_in+=f,f),t.lookahead+=r,t.lookahead+t.insert>=3)for(c=t.strstart-t.insert,t.ins_h=t.window[c],t.ins_h=(t.ins_h<<t.hash_shift^t.window[c+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[c+3-1])&t.hash_mask,t.prev[c&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=c,c++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<h&&0!==t.strm.avail_in);}function x(t,e){for(var r,n;;){if(t.lookahead<h){if(_(t),t.lookahead<h&&0===e)return 1;if(0===t.lookahead)break;}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-h&&(t.match_length=v(t,r)),t.match_length>=3){if(n=i._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++;}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;}else n=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(g(t,!1),0===t.strm.avail_out))return 1;}return t.insert=t.strstart<2?t.strstart:2,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2;}function E(t,e){for(var r,n,s;;){if(t.lookahead<h){if(_(t),t.lookahead<h&&0===e)return 1;if(0===t.lookahead)break;}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-h&&(t.match_length=v(t,r),t.match_length<=5&&(1===t.strategy||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){for(s=t.strstart+t.lookahead-3,n=i._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=s&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(g(t,!1),0===t.strm.avail_out))return 1;}else if(t.match_available){if((n=i._tr_tally(t,0,t.window[t.strstart-1]))&&g(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1;}else t.match_available=1,t.strstart++,t.lookahead--;}return t.match_available&&(n=i._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2;}function T(t,e,r,n,s){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=s;}function A(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(1146),this.dyn_dtree=new s.Buf16(122),this.bl_tree=new s.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(16),this.heap=new s.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0;}function S(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:p,t.adler=2===e.wrap?0:1,e.last_flush=0,i._tr_init(e),0):d(t,u);}function R(t){var e=S(t);return 0===e&&function(t){t.window_size=2*t.w_size,m(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0;}(t.state),e;}function I(t,e,r,n,i,o){if(!t)return u;var a=1;if(-1===e&&(e=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),i<1||9<i||8!==r||n<8||15<n||e<0||9<e||o<0||4<o)return d(t,u);8===n&&(n=9);var c=new A();return (t.state=c).strm=t,c.wrap=a,c.gzhead=null,c.w_bits=n,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=i+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new s.Buf8(2*c.w_size),c.head=new s.Buf16(c.hash_size),c.prev=new s.Buf16(c.w_size),c.lit_bufsize=1<<i+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new s.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=e,c.strategy=o,c.method=r,R(t);}n=[new T(0,0,0,0,function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(_(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break;}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,g(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-h&&(g(t,!1),0===t.strm.avail_out))return 1;}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(g(t,!1),t.strm.avail_out),1);}),new T(4,4,8,4,x),new T(4,5,16,8,x),new T(4,6,32,32,x),new T(4,4,16,16,E),new T(8,16,32,32,E),new T(8,16,128,128,E),new T(8,32,128,256,E),new T(32,128,258,1024,E),new T(32,258,258,4096,E)],r.deflateInit=function(t,e){return I(t,e,8,15,8,0);},r.deflateInit2=I,r.deflateReset=R,r.deflateResetKeep=S,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?u:(t.state.gzhead=e,0):u;},r.deflate=function(t,e){var r,s,o,c;if(!t||!t.state||5<e||e<0)return t?d(t,u):u;if(s=t.state,!t.output||!t.input&&0!==t.avail_in||666===s.status&&4!==e)return d(t,0===t.avail_out?-5:u);if(s.strm=t,r=s.last_flush,s.last_flush=e,42===s.status)if(2===s.wrap)t.adler=0,y(s,31),y(s,139),y(s,8),s.gzhead?(y(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),y(s,255&s.gzhead.time),y(s,s.gzhead.time>>8&255),y(s,s.gzhead.time>>16&255),y(s,s.gzhead.time>>24&255),y(s,9===s.level?2:2<=s.strategy||s.level<2?4:0),y(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(y(s,255&s.gzhead.extra.length),y(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=a(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(y(s,0),y(s,0),y(s,0),y(s,0),y(s,0),y(s,9===s.level?2:2<=s.strategy||s.level<2?4:0),y(s,3),s.status=p);else {var h=8+(s.w_bits-8<<4)<<8;h|=(2<=s.strategy||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(h|=32),h+=31-h%31,s.status=p,b(s,h),0!==s.strstart&&(b(s,t.adler>>>16),b(s,65535&t.adler)),t.adler=1;}if(69===s.status)if(s.gzhead.extra){for(o=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>o&&(t.adler=a(t.adler,s.pending_buf,s.pending-o,o)),w(t),o=s.pending,s.pending!==s.pending_buf_size));)y(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>o&&(t.adler=a(t.adler,s.pending_buf,s.pending-o,o)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73);}else s.status=73;if(73===s.status)if(s.gzhead.name){o=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>o&&(t.adler=a(t.adler,s.pending_buf,s.pending-o,o)),w(t),o=s.pending,s.pending===s.pending_buf_size)){c=1;break;}c=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,y(s,c);}while(0!==c);s.gzhead.hcrc&&s.pending>o&&(t.adler=a(t.adler,s.pending_buf,s.pending-o,o)),0===c&&(s.gzindex=0,s.status=91);}else s.status=91;if(91===s.status)if(s.gzhead.comment){o=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>o&&(t.adler=a(t.adler,s.pending_buf,s.pending-o,o)),w(t),o=s.pending,s.pending===s.pending_buf_size)){c=1;break;}c=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,y(s,c);}while(0!==c);s.gzhead.hcrc&&s.pending>o&&(t.adler=a(t.adler,s.pending_buf,s.pending-o,o)),0===c&&(s.status=103);}else s.status=103;if(103===s.status&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&w(t),s.pending+2<=s.pending_buf_size&&(y(s,255&t.adler),y(s,t.adler>>8&255),t.adler=0,s.status=p)):s.status=p),0!==s.pending){if(w(t),0===t.avail_out)return s.last_flush=-1,0;}else if(0===t.avail_in&&f(e)<=f(r)&&4!==e)return d(t,-5);if(666===s.status&&0!==t.avail_in)return d(t,-5);if(0!==t.avail_in||0!==s.lookahead||0!==e&&666!==s.status){var v=2===s.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(_(t),0===t.lookahead)){if(0===e)return 1;break;}if(t.match_length=0,r=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(g(t,!1),0===t.strm.avail_out))return 1;}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2;}(s,e):3===s.strategy?function(t,e){for(var r,n,s,o,a=t.window;;){if(t.lookahead<=l){if(_(t),t.lookahead<=l&&0===e)return 1;if(0===t.lookahead)break;}if(t.match_length=0,t.lookahead>=3&&0<t.strstart&&(n=a[s=t.strstart-1])===a[++s]&&n===a[++s]&&n===a[++s]){o=t.strstart+l;do{}while(n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&s<o);t.match_length=l-(o-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead);}if(t.match_length>=3?(r=i._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(g(t,!1),0===t.strm.avail_out))return 1;}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2;}(s,e):n[s.level].func(s,e);if(3!==v&&4!==v||(s.status=666),1===v||3===v)return 0===t.avail_out&&(s.last_flush=-1),0;if(2===v&&(1===e?i._tr_align(s):5!==e&&(i._tr_stored_block(s,0,0,!1),3===e&&(m(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),w(t),0===t.avail_out))return s.last_flush=-1,0;}return 4!==e?0:s.wrap<=0?1:(2===s.wrap?(y(s,255&t.adler),y(s,t.adler>>8&255),y(s,t.adler>>16&255),y(s,t.adler>>24&255),y(s,255&t.total_in),y(s,t.total_in>>8&255),y(s,t.total_in>>16&255),y(s,t.total_in>>24&255)):(b(s,t.adler>>>16),b(s,65535&t.adler)),w(t),0<s.wrap&&(s.wrap=-s.wrap),0!==s.pending?0:1);},r.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&e!==p&&666!==e?d(t,u):(t.state=null,e===p?d(t,-3):0):u;},r.deflateSetDictionary=function(t,e){var r,n,i,a,c,l,h,p,d=e.length;if(!t||!t.state)return u;if(2===(a=(r=t.state).wrap)||1===a&&42!==r.status||r.lookahead)return u;for(1===a&&(t.adler=o(t.adler,e,d,0)),r.wrap=0,d>=r.w_size&&(0===a&&(m(r.head),r.strstart=0,r.block_start=0,r.insert=0),p=new s.Buf8(r.w_size),s.arraySet(p,e,d-r.w_size,r.w_size,0),e=p,d=r.w_size),c=t.avail_in,l=t.next_in,h=t.input,t.avail_in=d,t.next_in=0,t.input=e,_(r);r.lookahead>=3;){for(n=r.strstart,i=r.lookahead-2;r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--i;);r.strstart=n,r.lookahead=2,_(r);}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=l,t.input=h,t.avail_in=c,r.wrap=a,0;},r.deflateInfo="pako deflate (from Nodeca project)";},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,r){e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1;};},{}],48:[function(t,e,r){e.exports=function(t,e){var r,n,s,i,o,a,c,u,l,h,p,d,f,m,w,g,y,b,v,_,x,E,T,A,S;r=t.state,n=t.next_in,A=t.input,s=n+(t.avail_in-5),i=t.next_out,S=t.output,o=i-(e-t.avail_out),a=i+(t.avail_out-257),c=r.dmax,u=r.wsize,l=r.whave,h=r.wnext,p=r.window,d=r.hold,f=r.bits,m=r.lencode,w=r.distcode,g=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;t:do{f<15&&(d+=A[n++]<<f,f+=8,d+=A[n++]<<f,f+=8),b=m[d&g];e:for(;;){if(d>>>=v=b>>>24,f-=v,0==(v=b>>>16&255))S[i++]=65535&b;else {if(!(16&v)){if(0==(64&v)){b=m[(65535&b)+(d&(1<<v)-1)];continue e;}if(32&v){r.mode=12;break t;}t.msg="invalid literal/length code",r.mode=30;break t;}_=65535&b,(v&=15)&&(f<v&&(d+=A[n++]<<f,f+=8),_+=d&(1<<v)-1,d>>>=v,f-=v),f<15&&(d+=A[n++]<<f,f+=8,d+=A[n++]<<f,f+=8),b=w[d&y];r:for(;;){if(d>>>=v=b>>>24,f-=v,!(16&(v=b>>>16&255))){if(0==(64&v)){b=w[(65535&b)+(d&(1<<v)-1)];continue r;}t.msg="invalid distance code",r.mode=30;break t;}if(x=65535&b,f<(v&=15)&&(d+=A[n++]<<f,(f+=8)<v&&(d+=A[n++]<<f,f+=8)),c<(x+=d&(1<<v)-1)){t.msg="invalid distance too far back",r.mode=30;break t;}if(d>>>=v,f-=v,(v=i-o)<x){if(l<(v=x-v)&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t;}if(T=p,(E=0)===h){if(E+=u-v,v<_){for(_-=v;S[i++]=p[E++],--v;);E=i-x,T=S;}}else if(h<v){if(E+=u+h-v,(v-=h)<_){for(_-=v;S[i++]=p[E++],--v;);if(E=0,h<_){for(_-=v=h;S[i++]=p[E++],--v;);E=i-x,T=S;}}}else if(E+=h-v,v<_){for(_-=v;S[i++]=p[E++],--v;);E=i-x,T=S;}for(;2<_;)S[i++]=T[E++],S[i++]=T[E++],S[i++]=T[E++],_-=3;_&&(S[i++]=T[E++],1<_&&(S[i++]=T[E++]));}else {for(E=i-x;S[i++]=S[E++],S[i++]=S[E++],S[i++]=S[E++],2<(_-=3););_&&(S[i++]=S[E++],1<_&&(S[i++]=S[E++]));}break;}}break;}}while(n<s&&i<a);n-=_=f>>3,d&=(1<<(f-=_<<3))-1,t.next_in=n,t.next_out=i,t.avail_in=n<s?s-n+5:5-(n-s),t.avail_out=i<a?a-i+257:257-(i-a),r.hold=d,r.bits=f;};},{}],49:[function(t,e,r){var n=t("../utils/common"),s=t("./adler32"),i=t("./crc32"),o=t("./inffast"),a=t("./inftrees"),c=-2;function u(t){return (t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0;}function h(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):c;}function p(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,h(t)):c;}function d(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?c:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,p(t))):c;}function f(t,e){var r,n;return t?(n=new l(),(t.state=n).window=null,0!==(r=d(t,e))&&(t.state=null),r):c;}var m,w,g=!0;function y(t){if(g){var e;for(m=new n.Buf32(512),w=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,m,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,w,0,t.work,{bits:5}),g=!1;}t.lencode=m,t.lenbits=9,t.distcode=w,t.distbits=5;}function b(t,e,r,s){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),s>=o.wsize?(n.arraySet(o.window,e,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(s<(i=o.wsize-o.wnext)&&(i=s),n.arraySet(o.window,e,r-s,i,o.wnext),(s-=i)?(n.arraySet(o.window,e,r-s,s,0),o.wnext=s,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0;}r.inflateReset=p,r.inflateReset2=d,r.inflateResetKeep=h,r.inflateInit=function(t){return f(t,15);},r.inflateInit2=f,r.inflate=function(t,e){var r,l,h,p,d,f,m,w,g,v,_,x,E,T,A,S,R,I,N,O,C,k,D,L,P=0,F=new n.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return c;12===(r=t.state).mode&&(r.mode=13),d=t.next_out,h=t.output,m=t.avail_out,p=t.next_in,l=t.input,f=t.avail_in,w=r.hold,g=r.bits,v=f,_=m,k=0;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break;}for(;g<16;){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}if(2&r.wrap&&35615===w){F[r.check=0]=255&w,F[1]=w>>>8&255,r.check=i(r.check,F,2,0),g=w=0,r.mode=2;break;}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&w)<<8)+(w>>8))%31){t.msg="incorrect header check",r.mode=30;break;}if(8!=(15&w)){t.msg="unknown compression method",r.mode=30;break;}if(g-=4,C=8+(15&(w>>>=4)),0===r.wbits)r.wbits=C;else if(C>r.wbits){t.msg="invalid window size",r.mode=30;break;}r.dmax=1<<C,t.adler=r.check=1,r.mode=512&w?10:12,g=w=0;break;case 2:for(;g<16;){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}if(r.flags=w,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break;}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break;}r.head&&(r.head.text=w>>8&1),512&r.flags&&(F[0]=255&w,F[1]=w>>>8&255,r.check=i(r.check,F,2,0)),g=w=0,r.mode=3;case 3:for(;g<32;){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}r.head&&(r.head.time=w),512&r.flags&&(F[0]=255&w,F[1]=w>>>8&255,F[2]=w>>>16&255,F[3]=w>>>24&255,r.check=i(r.check,F,4,0)),g=w=0,r.mode=4;case 4:for(;g<16;){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}r.head&&(r.head.xflags=255&w,r.head.os=w>>8),512&r.flags&&(F[0]=255&w,F[1]=w>>>8&255,r.check=i(r.check,F,2,0)),g=w=0,r.mode=5;case 5:if(1024&r.flags){for(;g<16;){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}r.length=w,r.head&&(r.head.extra_len=w),512&r.flags&&(F[0]=255&w,F[1]=w>>>8&255,r.check=i(r.check,F,2,0)),g=w=0;}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(f<(x=r.length)&&(x=f),x&&(r.head&&(C=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,l,p,x,C)),512&r.flags&&(r.check=i(r.check,l,x,p)),f-=x,p+=x,r.length-=x),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===f)break t;for(x=0;C=l[p+x++],r.head&&C&&r.length<65536&&(r.head.name+=String.fromCharCode(C)),C&&x<f;);if(512&r.flags&&(r.check=i(r.check,l,x,p)),f-=x,p+=x,C)break t;}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===f)break t;for(x=0;C=l[p+x++],r.head&&C&&r.length<65536&&(r.head.comment+=String.fromCharCode(C)),C&&x<f;);if(512&r.flags&&(r.check=i(r.check,l,x,p)),f-=x,p+=x,C)break t;}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;g<16;){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}if(w!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break;}g=w=0;}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;g<32;){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}t.adler=r.check=u(w),g=w=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=d,t.avail_out=m,t.next_in=p,t.avail_in=f,r.hold=w,r.bits=g,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){w>>>=7&g,g-=7&g,r.mode=27;break;}for(;g<3;){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}switch(r.last=1&w,g-=1,3&(w>>>=1)){case 0:r.mode=14;break;case 1:if(y(r),r.mode=20,6!==e)break;w>>>=2,g-=2;break t;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30;}w>>>=2,g-=2;break;case 14:for(w>>>=7&g,g-=7&g;g<32;){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}if((65535&w)!=(w>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break;}if(r.length=65535&w,g=w=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(x=r.length){if(f<x&&(x=f),m<x&&(x=m),0===x)break t;n.arraySet(h,l,p,x,d),f-=x,p+=x,m-=x,d+=x,r.length-=x;break;}r.mode=12;break;case 17:for(;g<14;){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}if(r.nlen=257+(31&w),w>>>=5,g-=5,r.ndist=1+(31&w),w>>>=5,g-=5,r.ncode=4+(15&w),w>>>=4,g-=4,286<r.nlen||30<r.ndist){t.msg="too many length or distance symbols",r.mode=30;break;}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;g<3;){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}r.lens[B[r.have++]]=7&w,w>>>=3,g-=3;}for(;r.have<19;)r.lens[B[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,D={bits:r.lenbits},k=a(0,r.lens,0,19,r.lencode,0,r.work,D),r.lenbits=D.bits,k){t.msg="invalid code lengths set",r.mode=30;break;}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;S=(P=r.lencode[w&(1<<r.lenbits)-1])>>>16&255,R=65535&P,!((A=P>>>24)<=g);){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}if(R<16)w>>>=A,g-=A,r.lens[r.have++]=R;else {if(16===R){for(L=A+2;g<L;){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}if(w>>>=A,g-=A,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break;}C=r.lens[r.have-1],x=3+(3&w),w>>>=2,g-=2;}else if(17===R){for(L=A+3;g<L;){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}g-=A,C=0,x=3+(7&(w>>>=A)),w>>>=3,g-=3;}else {for(L=A+7;g<L;){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}g-=A,C=0,x=11+(127&(w>>>=A)),w>>>=7,g-=7;}if(r.have+x>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break;}for(;x--;)r.lens[r.have++]=C;}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break;}if(r.lenbits=9,D={bits:r.lenbits},k=a(1,r.lens,0,r.nlen,r.lencode,0,r.work,D),r.lenbits=D.bits,k){t.msg="invalid literal/lengths set",r.mode=30;break;}if(r.distbits=6,r.distcode=r.distdyn,D={bits:r.distbits},k=a(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,D),r.distbits=D.bits,k){t.msg="invalid distances set",r.mode=30;break;}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(6<=f&&258<=m){t.next_out=d,t.avail_out=m,t.next_in=p,t.avail_in=f,r.hold=w,r.bits=g,o(t,_),d=t.next_out,h=t.output,m=t.avail_out,p=t.next_in,l=t.input,f=t.avail_in,w=r.hold,g=r.bits,12===r.mode&&(r.back=-1);break;}for(r.back=0;S=(P=r.lencode[w&(1<<r.lenbits)-1])>>>16&255,R=65535&P,!((A=P>>>24)<=g);){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}if(S&&0==(240&S)){for(I=A,N=S,O=R;S=(P=r.lencode[O+((w&(1<<I+N)-1)>>I)])>>>16&255,R=65535&P,!(I+(A=P>>>24)<=g);){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}w>>>=I,g-=I,r.back+=I;}if(w>>>=A,g-=A,r.back+=A,r.length=R,0===S){r.mode=26;break;}if(32&S){r.back=-1,r.mode=12;break;}if(64&S){t.msg="invalid literal/length code",r.mode=30;break;}r.extra=15&S,r.mode=22;case 22:if(r.extra){for(L=r.extra;g<L;){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}r.length+=w&(1<<r.extra)-1,w>>>=r.extra,g-=r.extra,r.back+=r.extra;}r.was=r.length,r.mode=23;case 23:for(;S=(P=r.distcode[w&(1<<r.distbits)-1])>>>16&255,R=65535&P,!((A=P>>>24)<=g);){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}if(0==(240&S)){for(I=A,N=S,O=R;S=(P=r.distcode[O+((w&(1<<I+N)-1)>>I)])>>>16&255,R=65535&P,!(I+(A=P>>>24)<=g);){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}w>>>=I,g-=I,r.back+=I;}if(w>>>=A,g-=A,r.back+=A,64&S){t.msg="invalid distance code",r.mode=30;break;}r.offset=R,r.extra=15&S,r.mode=24;case 24:if(r.extra){for(L=r.extra;g<L;){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}r.offset+=w&(1<<r.extra)-1,w>>>=r.extra,g-=r.extra,r.back+=r.extra;}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break;}r.mode=25;case 25:if(0===m)break t;if(x=_-m,r.offset>x){if((x=r.offset-x)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break;}E=x>r.wnext?(x-=r.wnext,r.wsize-x):r.wnext-x,x>r.length&&(x=r.length),T=r.window;}else T=h,E=d-r.offset,x=r.length;for(m<x&&(x=m),m-=x,r.length-=x;h[d++]=T[E++],--x;);0===r.length&&(r.mode=21);break;case 26:if(0===m)break t;h[d++]=r.length,m--,r.mode=21;break;case 27:if(r.wrap){for(;g<32;){if(0===f)break t;f--,w|=l[p++]<<g,g+=8;}if(_-=m,t.total_out+=_,r.total+=_,_&&(t.adler=r.check=r.flags?i(r.check,h,_,d-_):s(r.check,h,_,d-_)),_=m,(r.flags?w:u(w))!==r.check){t.msg="incorrect data check",r.mode=30;break;}g=w=0;}r.mode=28;case 28:if(r.wrap&&r.flags){for(;g<32;){if(0===f)break t;f--,w+=l[p++]<<g,g+=8;}if(w!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break;}g=w=0;}r.mode=29;case 29:k=1;break t;case 30:k=-3;break t;case 31:return -4;default:return c;}return t.next_out=d,t.avail_out=m,t.next_in=p,t.avail_in=f,r.hold=w,r.bits=g,(r.wsize||_!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&b(t,t.output,t.next_out,_-t.avail_out)?(r.mode=31,-4):(v-=t.avail_in,_-=t.avail_out,t.total_in+=v,t.total_out+=_,r.total+=_,r.wrap&&_&&(t.adler=r.check=r.flags?i(r.check,h,_,t.next_out-_):s(r.check,h,_,t.next_out-_)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==v&&0===_||4===e)&&0===k&&(k=-5),k);},r.inflateEnd=function(t){if(!t||!t.state)return c;var e=t.state;return e.window&&(e.window=null),t.state=null,0;},r.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?c:((r.head=e).done=!1,0):c;},r.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?c:11===r.mode&&s(1,e,n,0)!==r.check?-3:b(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,0):c;},r.inflateInfo="pako inflate (from Nodeca project)";},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,r){var n=t("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,c,u,l,h,p){var d,f,m,w,g,y,b,v,_,x=p.bits,E=0,T=0,A=0,S=0,R=0,I=0,N=0,O=0,C=0,k=0,D=null,L=0,P=new n.Buf16(16),F=new n.Buf16(16),B=null,M=0;for(E=0;E<=15;E++)P[E]=0;for(T=0;T<c;T++)P[e[r+T]]++;for(R=x,S=15;1<=S&&0===P[S];S--);if(S<R&&(R=S),0===S)return u[l++]=20971520,u[l++]=20971520,p.bits=1,0;for(A=1;A<S&&0===P[A];A++);for(R<A&&(R=A),E=O=1;E<=15;E++)if(O<<=1,(O-=P[E])<0)return -1;if(0<O&&(0===t||1!==S))return -1;for(F[1]=0,E=1;E<15;E++)F[E+1]=F[E]+P[E];for(T=0;T<c;T++)0!==e[r+T]&&(h[F[e[r+T]]++]=T);if(y=0===t?(D=B=h,19):1===t?(D=s,L-=257,B=i,M-=257,256):(D=o,B=a,-1),E=A,g=l,N=T=k=0,m=-1,w=(C=1<<(I=R))-1,1===t&&852<C||2===t&&592<C)return 1;for(;;){for(b=E-N,_=h[T]<y?(v=0,h[T]):h[T]>y?(v=B[M+h[T]],D[L+h[T]]):(v=96,0),d=1<<E-N,A=f=1<<I;u[g+(k>>N)+(f-=d)]=b<<24|v<<16|_|0,0!==f;);for(d=1<<E-1;k&d;)d>>=1;if(0!==d?(k&=d-1,k+=d):k=0,T++,0==--P[E]){if(E===S)break;E=e[r+h[T]];}if(R<E&&(k&w)!==m){for(0===N&&(N=R),g+=A,O=1<<(I=E-N);I+N<S&&!((O-=P[I+N])<=0);)I++,O<<=1;if(C+=1<<I,1===t&&852<C||2===t&&592<C)return 1;u[m=k&w]=R<<24|I<<16|g-l|0;}}return 0!==k&&(u[g+k]=E-N<<24|64<<16|0),p.bits=R,0;};},{"../utils/common":41}],51:[function(t,e,r){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};},{}],52:[function(t,e,r){var n=t("../utils/common");function s(t){for(var e=t.length;0<=--e;)t[e]=0;}var i=256,o=286,a=30,c=15,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],l=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],p=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],d=new Array(576);s(d);var f=new Array(60);s(f);var m=new Array(512);s(m);var w=new Array(256);s(w);var g=new Array(29);s(g);var y,b,v,_=new Array(a);function x(t,e,r,n,s){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=s,this.has_stree=t&&t.length;}function E(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e;}function T(t){return t<256?m[t]:m[256+(t>>>7)];}function A(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255;}function S(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,A(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r);}function R(t,e,r){S(t,r[2*e],r[2*e+1]);}function I(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1;}function N(t,e,r){var n,s,i=new Array(16),o=0;for(n=1;n<=c;n++)i[n]=o=o+r[n-1]<<1;for(s=0;s<=e;s++){var a=t[2*s+1];0!==a&&(t[2*s]=I(i[a]++,a));}}function O(t){var e;for(e=0;e<o;e++)t.dyn_ltree[2*e]=0;for(e=0;e<a;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0;}function C(t){8<t.bi_valid?A(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0;}function k(t,e,r,n){var s=2*e,i=2*r;return t[s]<t[i]||t[s]===t[i]&&n[e]<=n[r];}function D(t,e,r){for(var n=t.heap[r],s=r<<1;s<=t.heap_len&&(s<t.heap_len&&k(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!k(e,n,t.heap[s],t.depth));)t.heap[r]=t.heap[s],r=s,s<<=1;t.heap[r]=n;}function L(t,e,r){var n,s,o,a,c=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],s=t.pending_buf[t.l_buf+c],c++,0===n?R(t,s,e):(R(t,(o=w[s])+i+1,e),0!==(a=u[o])&&S(t,s-=g[o],a),R(t,o=T(--n),r),0!==(a=l[o])&&S(t,n-=_[o],a)),c<t.last_lit;);R(t,256,e);}function P(t,e){var r,n,s,i=e.dyn_tree,o=e.stat_desc.static_tree,a=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<u;r++)0!==i[2*r]?(t.heap[++t.heap_len]=l=r,t.depth[r]=0):i[2*r+1]=0;for(;t.heap_len<2;)i[2*(s=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[s]=0,t.opt_len--,a&&(t.static_len-=o[2*s+1]);for(e.max_code=l,r=t.heap_len>>1;1<=r;r--)D(t,i,r);for(s=u;r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],D(t,i,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,i[2*s]=i[2*r]+i[2*n],t.depth[s]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,i[2*r+1]=i[2*n+1]=s,t.heap[1]=s++,D(t,i,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,s,i,o,a,u=e.dyn_tree,l=e.max_code,h=e.stat_desc.static_tree,p=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,m=e.stat_desc.max_length,w=0;for(i=0;i<=c;i++)t.bl_count[i]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)m<(i=u[2*u[2*(n=t.heap[r])+1]+1]+1)&&(i=m,w++),u[2*n+1]=i,l<n||(t.bl_count[i]++,o=0,f<=n&&(o=d[n-f]),a=u[2*n],t.opt_len+=a*(i+o),p&&(t.static_len+=a*(h[2*n+1]+o)));if(0!==w){do{for(i=m-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[m]--,w-=2;}while(0<w);for(i=m;0!==i;i--)for(n=t.bl_count[i];0!==n;)l<(s=t.heap[--r])||(u[2*s+1]!==i&&(t.opt_len+=(i-u[2*s+1])*u[2*s],u[2*s+1]=i),n--);}}(t,e),N(i,l,t.bl_count);}function F(t,e,r){var n,s,i=-1,o=e[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)s=o,o=e[2*(n+1)+1],++a<c&&s===o||(a<u?t.bl_tree[2*s]+=a:0!==s?(s!==i&&t.bl_tree[2*s]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,i=s,u=(a=0)===o?(c=138,3):s===o?(c=6,3):(c=7,4));}function B(t,e,r){var n,s,i=-1,o=e[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),n=0;n<=r;n++)if(s=o,o=e[2*(n+1)+1],!(++a<c&&s===o)){if(a<u)for(;R(t,s,t.bl_tree),0!=--a;);else 0!==s?(s!==i&&(R(t,s,t.bl_tree),a--),R(t,16,t.bl_tree),S(t,a-3,2)):a<=10?(R(t,17,t.bl_tree),S(t,a-3,3)):(R(t,18,t.bl_tree),S(t,a-11,7));i=s,u=(a=0)===o?(c=138,3):s===o?(c=6,3):(c=7,4);}}s(_);var M=!1;function U(t,e,r,s){S(t,0+(s?1:0),3),function(t,e,r,s){C(t),A(t,r),A(t,~r),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r;}(t,e,r);}r._tr_init=function(t){M||(function(){var t,e,r,n,s,i=new Array(16);for(n=r=0;n<28;n++)for(g[n]=r,t=0;t<1<<u[n];t++)w[r++]=n;for(w[r-1]=n,n=s=0;n<16;n++)for(_[n]=s,t=0;t<1<<l[n];t++)m[s++]=n;for(s>>=7;n<a;n++)for(_[n]=s<<7,t=0;t<1<<l[n]-7;t++)m[256+s++]=n;for(e=0;e<=c;e++)i[e]=0;for(t=0;t<=143;)d[2*t+1]=8,t++,i[8]++;for(;t<=255;)d[2*t+1]=9,t++,i[9]++;for(;t<=279;)d[2*t+1]=7,t++,i[7]++;for(;t<=287;)d[2*t+1]=8,t++,i[8]++;for(N(d,287,i),t=0;t<a;t++)f[2*t+1]=5,f[2*t]=I(t,5);y=new x(d,u,257,o,c),b=new x(f,l,0,a,c),v=new x(new Array(0),h,0,19,7);}(),M=!0),t.l_desc=new E(t.dyn_ltree,y),t.d_desc=new E(t.dyn_dtree,b),t.bl_desc=new E(t.bl_tree,v),t.bi_buf=0,t.bi_valid=0,O(t);},r._tr_stored_block=U,r._tr_flush_block=function(t,e,r,n){var s,o,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<i;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0;}(t)),P(t,t.l_desc),P(t,t.d_desc),a=function(t){var e;for(F(t,t.dyn_ltree,t.l_desc.max_code),F(t,t.dyn_dtree,t.d_desc.max_code),P(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*p[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e;}(t),s=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=s&&(s=o)):s=o=r+5,r+4<=s&&-1!==e?U(t,e,r,n):4===t.strategy||o===s?(S(t,2+(n?1:0),3),L(t,d,f)):(S(t,4+(n?1:0),3),function(t,e,r,n){var s;for(S(t,e-257,5),S(t,r-1,5),S(t,n-4,4),s=0;s<n;s++)S(t,t.bl_tree[2*p[s]+1],3);B(t,t.dyn_ltree,e-1),B(t,t.dyn_dtree,r-1);}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),L(t,t.dyn_ltree,t.dyn_dtree)),O(t),n&&C(t);},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(w[r]+i+1)]++,t.dyn_dtree[2*T(e)]++),t.last_lit===t.lit_bufsize-1;},r._tr_align=function(t){S(t,2,3),R(t,256,d),function(t){16===t.bi_valid?(A(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8);}(t);};},{"../utils/common":41}],53:[function(t,e,r){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0;};},{}],54:[function(t,e,r){e.exports="function"==typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t);};},{}]},{},[10])(10);},155:t=>{var e,r,n=t.exports={};function s(){throw new Error("setTimeout has not been defined");}function i(){throw new Error("clearTimeout has not been defined");}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===s||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0);}catch(r){try{return e.call(null,t,0);}catch(r){return e.call(this,t,0);}}}!function(){try{e="function"==typeof setTimeout?setTimeout:s;}catch(t){e=s;}try{r="function"==typeof clearTimeout?clearTimeout:i;}catch(t){r=i;}}();var a,c=[],u=!1,l=-1;function h(){u&&a&&(u=!1,a.length?c=a.concat(c):l=-1,c.length&&p());}function p(){if(!u){var t=o(h);u=!0;for(var e=c.length;e;){for(a=c,c=[];++l<e;)a&&a[l].run();l=-1,e=c.length;}a=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t);}catch(e){try{return r.call(null,t);}catch(e){return r.call(this,t);}}}(t);}}function d(t,e){this.fun=t,this.array=e;}function f(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||u||o(p);},d.prototype.run=function(){this.fun.apply(null,this.array);},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(t){return [];},n.binding=function(t){throw new Error("process.binding is not supported");},n.cwd=function(){return "/";},n.chdir=function(t){throw new Error("process.chdir is not supported");},n.umask=function(){return 0;};},509:(t,e,r)=>{var n=r(764),s=n.Buffer;function i(t,e){for(var r in t)e[r]=t[r];}function o(t,e,r){return s(t,e,r);}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=o),i(s,o),o.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return s(t,e,r);},o.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=s(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n;},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s(t);},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t);};},99:(t,e,r)=>{!function(t){t.parser=function(t,e){return new s(t,e);},t.SAXParser=s,t.SAXStream=o,t.createStream=function(t,e){return new o(t,e);},t.MAX_BUFFER_LENGTH=65536;var e,n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function s(e,r){if(!(this instanceof s))return new s(e,r);var i=this;!function(t){for(var e=0,r=n.length;e<r;e++)t[n[e]]="";}(i),i.q=i.c="",i.bufferCheckPosition=t.MAX_BUFFER_LENGTH,i.opt=r||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!e,i.noscript=!(!e&&!i.opt.noscript),i.state=x.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=i.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(u)),i.trackPosition=!1!==i.opt.position,i.trackPosition&&(i.position=i.line=i.column=0),T(i,"onready");}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e();}),Object.keys||(Object.keys=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e;}),s.prototype={end:function(){N(this);},write:function(e){var r=this;if(this.error)throw this.error;if(r.closed)return I(r,"Cannot write after close. Assign an onready handler.");if(null===e)return N(r);"object"==typeof e&&(e=e.toString());for(var s=0,i="";i=M(e,s++),r.c=i,i;)switch(r.trackPosition&&(r.position++,"\n"===i?(r.line++,r.column=0):r.column++),r.state){case x.BEGIN:if(r.state=x.BEGIN_WHITESPACE,"\ufeff"===i)continue;B(r,i);continue;case x.BEGIN_WHITESPACE:B(r,i);continue;case x.TEXT:if(r.sawRoot&&!r.closedRoot){for(var o=s-1;i&&"<"!==i&&"&"!==i;)(i=M(e,s++))&&r.trackPosition&&(r.position++,"\n"===i?(r.line++,r.column=0):r.column++);r.textNode+=e.substring(o,s-1);}"<"!==i||r.sawRoot&&r.closedRoot&&!r.strict?(f(i)||r.sawRoot&&!r.closedRoot||O(r,"Text data outside of root node."),"&"===i?r.state=x.TEXT_ENTITY:r.textNode+=i):(r.state=x.OPEN_WAKA,r.startTagPosition=r.position);continue;case x.SCRIPT:"<"===i?r.state=x.SCRIPT_ENDING:r.script+=i;continue;case x.SCRIPT_ENDING:"/"===i?r.state=x.CLOSE_TAG:(r.script+="<"+i,r.state=x.SCRIPT);continue;case x.OPEN_WAKA:if("!"===i)r.state=x.SGML_DECL,r.sgmlDecl="";else if(f(i));else if(g(l,i))r.state=x.OPEN_TAG,r.tagName=i;else if("/"===i)r.state=x.CLOSE_TAG,r.tagName="";else if("?"===i)r.state=x.PROC_INST,r.procInstName=r.procInstBody="";else {if(O(r,"Unencoded <"),r.startTagPosition+1<r.position){var a=r.position-r.startTagPosition;i=new Array(a).join(" ")+i;}r.textNode+="<"+i,r.state=x.TEXT;}continue;case x.SGML_DECL:"[CDATA["===(r.sgmlDecl+i).toUpperCase()?(A(r,"onopencdata"),r.state=x.CDATA,r.sgmlDecl="",r.cdata=""):r.sgmlDecl+i==="--"?(r.state=x.COMMENT,r.comment="",r.sgmlDecl=""):"DOCTYPE"===(r.sgmlDecl+i).toUpperCase()?(r.state=x.DOCTYPE,(r.doctype||r.sawRoot)&&O(r,"Inappropriately located doctype declaration"),r.doctype="",r.sgmlDecl=""):">"===i?(A(r,"onsgmldeclaration",r.sgmlDecl),r.sgmlDecl="",r.state=x.TEXT):m(i)?(r.state=x.SGML_DECL_QUOTED,r.sgmlDecl+=i):r.sgmlDecl+=i;continue;case x.SGML_DECL_QUOTED:i===r.q&&(r.state=x.SGML_DECL,r.q=""),r.sgmlDecl+=i;continue;case x.DOCTYPE:">"===i?(r.state=x.TEXT,A(r,"ondoctype",r.doctype),r.doctype=!0):(r.doctype+=i,"["===i?r.state=x.DOCTYPE_DTD:m(i)&&(r.state=x.DOCTYPE_QUOTED,r.q=i));continue;case x.DOCTYPE_QUOTED:r.doctype+=i,i===r.q&&(r.q="",r.state=x.DOCTYPE);continue;case x.DOCTYPE_DTD:r.doctype+=i,"]"===i?r.state=x.DOCTYPE:m(i)&&(r.state=x.DOCTYPE_DTD_QUOTED,r.q=i);continue;case x.DOCTYPE_DTD_QUOTED:r.doctype+=i,i===r.q&&(r.state=x.DOCTYPE_DTD,r.q="");continue;case x.COMMENT:"-"===i?r.state=x.COMMENT_ENDING:r.comment+=i;continue;case x.COMMENT_ENDING:"-"===i?(r.state=x.COMMENT_ENDED,r.comment=R(r.opt,r.comment),r.comment&&A(r,"oncomment",r.comment),r.comment=""):(r.comment+="-"+i,r.state=x.COMMENT);continue;case x.COMMENT_ENDED:">"!==i?(O(r,"Malformed comment"),r.comment+="--"+i,r.state=x.COMMENT):r.state=x.TEXT;continue;case x.CDATA:"]"===i?r.state=x.CDATA_ENDING:r.cdata+=i;continue;case x.CDATA_ENDING:"]"===i?r.state=x.CDATA_ENDING_2:(r.cdata+="]"+i,r.state=x.CDATA);continue;case x.CDATA_ENDING_2:">"===i?(r.cdata&&A(r,"oncdata",r.cdata),A(r,"onclosecdata"),r.cdata="",r.state=x.TEXT):"]"===i?r.cdata+="]":(r.cdata+="]]"+i,r.state=x.CDATA);continue;case x.PROC_INST:"?"===i?r.state=x.PROC_INST_ENDING:f(i)?r.state=x.PROC_INST_BODY:r.procInstName+=i;continue;case x.PROC_INST_BODY:if(!r.procInstBody&&f(i))continue;"?"===i?r.state=x.PROC_INST_ENDING:r.procInstBody+=i;continue;case x.PROC_INST_ENDING:">"===i?(A(r,"onprocessinginstruction",{name:r.procInstName,body:r.procInstBody}),r.procInstName=r.procInstBody="",r.state=x.TEXT):(r.procInstBody+="?"+i,r.state=x.PROC_INST_BODY);continue;case x.OPEN_TAG:g(h,i)?r.tagName+=i:(C(r),">"===i?L(r):"/"===i?r.state=x.OPEN_TAG_SLASH:(f(i)||O(r,"Invalid character in tag name"),r.state=x.ATTRIB));continue;case x.OPEN_TAG_SLASH:">"===i?(L(r,!0),P(r)):(O(r,"Forward-slash in opening tag not followed by >"),r.state=x.ATTRIB);continue;case x.ATTRIB:if(f(i))continue;">"===i?L(r):"/"===i?r.state=x.OPEN_TAG_SLASH:g(l,i)?(r.attribName=i,r.attribValue="",r.state=x.ATTRIB_NAME):O(r,"Invalid attribute name");continue;case x.ATTRIB_NAME:"="===i?r.state=x.ATTRIB_VALUE:">"===i?(O(r,"Attribute without value"),r.attribValue=r.attribName,D(r),L(r)):f(i)?r.state=x.ATTRIB_NAME_SAW_WHITE:g(h,i)?r.attribName+=i:O(r,"Invalid attribute name");continue;case x.ATTRIB_NAME_SAW_WHITE:if("="===i)r.state=x.ATTRIB_VALUE;else {if(f(i))continue;O(r,"Attribute without value"),r.tag.attributes[r.attribName]="",r.attribValue="",A(r,"onattribute",{name:r.attribName,value:""}),r.attribName="",">"===i?L(r):g(l,i)?(r.attribName=i,r.state=x.ATTRIB_NAME):(O(r,"Invalid attribute name"),r.state=x.ATTRIB);}continue;case x.ATTRIB_VALUE:if(f(i))continue;m(i)?(r.q=i,r.state=x.ATTRIB_VALUE_QUOTED):(O(r,"Unquoted attribute value"),r.state=x.ATTRIB_VALUE_UNQUOTED,r.attribValue=i);continue;case x.ATTRIB_VALUE_QUOTED:if(i!==r.q){"&"===i?r.state=x.ATTRIB_VALUE_ENTITY_Q:r.attribValue+=i;continue;}D(r),r.q="",r.state=x.ATTRIB_VALUE_CLOSED;continue;case x.ATTRIB_VALUE_CLOSED:f(i)?r.state=x.ATTRIB:">"===i?L(r):"/"===i?r.state=x.OPEN_TAG_SLASH:g(l,i)?(O(r,"No whitespace between attributes"),r.attribName=i,r.attribValue="",r.state=x.ATTRIB_NAME):O(r,"Invalid attribute name");continue;case x.ATTRIB_VALUE_UNQUOTED:if(!w(i)){"&"===i?r.state=x.ATTRIB_VALUE_ENTITY_U:r.attribValue+=i;continue;}D(r),">"===i?L(r):r.state=x.ATTRIB;continue;case x.CLOSE_TAG:if(r.tagName)">"===i?P(r):g(h,i)?r.tagName+=i:r.script?(r.script+="</"+r.tagName,r.tagName="",r.state=x.SCRIPT):(f(i)||O(r,"Invalid tagname in closing tag"),r.state=x.CLOSE_TAG_SAW_WHITE);else {if(f(i))continue;y(l,i)?r.script?(r.script+="</"+i,r.state=x.SCRIPT):O(r,"Invalid tagname in closing tag."):r.tagName=i;}continue;case x.CLOSE_TAG_SAW_WHITE:if(f(i))continue;">"===i?P(r):O(r,"Invalid characters in closing tag");continue;case x.TEXT_ENTITY:case x.ATTRIB_VALUE_ENTITY_Q:case x.ATTRIB_VALUE_ENTITY_U:var c,u;switch(r.state){case x.TEXT_ENTITY:c=x.TEXT,u="textNode";break;case x.ATTRIB_VALUE_ENTITY_Q:c=x.ATTRIB_VALUE_QUOTED,u="attribValue";break;case x.ATTRIB_VALUE_ENTITY_U:c=x.ATTRIB_VALUE_UNQUOTED,u="attribValue";}";"===i?(r[u]+=F(r),r.entity="",r.state=c):g(r.entity.length?d:p,i)?r.entity+=i:(O(r,"Invalid character in entity name"),r[u]+="&"+r.entity+i,r.entity="",r.state=c);continue;default:throw new Error(r,"Unknown state: "+r.state);}return r.position>=r.bufferCheckPosition&&function(e){for(var r=Math.max(t.MAX_BUFFER_LENGTH,10),s=0,i=0,o=n.length;i<o;i++){var a=e[n[i]].length;if(a>r)switch(n[i]){case"textNode":S(e);break;case"cdata":A(e,"oncdata",e.cdata),e.cdata="";break;case"script":A(e,"onscript",e.script),e.script="";break;default:I(e,"Max buffer length exceeded: "+n[i]);}s=Math.max(s,a);}var c=t.MAX_BUFFER_LENGTH-s;e.bufferCheckPosition=c+e.position;}(r),r;},resume:function(){return this.error=null,this;},close:function(){return this.write(null);},flush:function(){var t;S(t=this),""!==t.cdata&&(A(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(A(t,"onscript",t.script),t.script="");}};try{e=r(830).Stream;}catch(t){e=function(){};}var i=t.EVENTS.filter(function(t){return "error"!==t&&"end"!==t;});function o(t,r){if(!(this instanceof o))return new o(t,r);e.apply(this),this._parser=new s(t,r),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end");},this._parser.onerror=function(t){n.emit("error",t),n._parser.error=null;},this._decoder=null,i.forEach(function(t){Object.defineProperty(n,"on"+t,{get:function(){return n._parser["on"+t];},set:function(e){if(!e)return n.removeAllListeners(t),n._parser["on"+t]=e,e;n.on(t,e);},enumerable:!0,configurable:!1});});}o.prototype=Object.create(e.prototype,{constructor:{value:o}}),o.prototype.write=function(t){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(t)){if(!this._decoder){var e=r(553).s;this._decoder=new e("utf8");}t=this._decoder.write(t);}return this._parser.write(t.toString()),this.emit("data",t),!0;},o.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0;},o.prototype.on=function(t,r){var n=this;return n._parser["on"+t]||-1===i.indexOf(t)||(n._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),n.emit.apply(n,e);}),e.prototype.on.call(n,t,r);};var a="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/2000/xmlns/",u={xml:a,xmlns:c},l=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,h=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function f(t){return " "===t||"\n"===t||"\r"===t||"\t"===t;}function m(t){return '"'===t||"'"===t;}function w(t){return ">"===t||f(t);}function g(t,e){return t.test(e);}function y(t,e){return !g(t,e);}var b,v,_,x=0;for(var E in t.STATE={BEGIN:x++,BEGIN_WHITESPACE:x++,TEXT:x++,TEXT_ENTITY:x++,OPEN_WAKA:x++,SGML_DECL:x++,SGML_DECL_QUOTED:x++,DOCTYPE:x++,DOCTYPE_QUOTED:x++,DOCTYPE_DTD:x++,DOCTYPE_DTD_QUOTED:x++,COMMENT_STARTING:x++,COMMENT:x++,COMMENT_ENDING:x++,COMMENT_ENDED:x++,CDATA:x++,CDATA_ENDING:x++,CDATA_ENDING_2:x++,PROC_INST:x++,PROC_INST_BODY:x++,PROC_INST_ENDING:x++,OPEN_TAG:x++,OPEN_TAG_SLASH:x++,ATTRIB:x++,ATTRIB_NAME:x++,ATTRIB_NAME_SAW_WHITE:x++,ATTRIB_VALUE:x++,ATTRIB_VALUE_QUOTED:x++,ATTRIB_VALUE_CLOSED:x++,ATTRIB_VALUE_UNQUOTED:x++,ATTRIB_VALUE_ENTITY_Q:x++,ATTRIB_VALUE_ENTITY_U:x++,CLOSE_TAG:x++,CLOSE_TAG_SAW_WHITE:x++,SCRIPT:x++,SCRIPT_ENDING:x++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(e){var r=t.ENTITIES[e],n="number"==typeof r?String.fromCharCode(r):r;t.ENTITIES[e]=n;}),t.STATE)t.STATE[t.STATE[E]]=E;function T(t,e,r){t[e]&&t[e](r);}function A(t,e,r){t.textNode&&S(t),T(t,e,r);}function S(t){t.textNode=R(t.opt,t.textNode),t.textNode&&T(t,"ontext",t.textNode),t.textNode="";}function R(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e;}function I(t,e){return S(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,T(t,"onerror",e),t;}function N(t){return t.sawRoot&&!t.closedRoot&&O(t,"Unclosed root tag"),t.state!==x.BEGIN&&t.state!==x.BEGIN_WHITESPACE&&t.state!==x.TEXT&&I(t,"Unexpected end"),S(t),t.c="",t.closed=!0,T(t,"onend"),s.call(t,t.strict,t.opt),t;}function O(t,e){if("object"!=typeof t||!(t instanceof s))throw new Error("bad call to strictFail");t.strict&&I(t,e);}function C(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,r=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(r.ns=e.ns),t.attribList.length=0,A(t,"onopentagstart",r);}function k(t,e){var r=t.indexOf(":")<0?["",t]:t.split(":"),n=r[0],s=r[1];return e&&"xmlns"===t&&(n="xmlns",s=""),{prefix:n,local:s};}function D(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else {if(t.opt.xmlns){var e=k(t.attribName,!0),r=e.prefix,n=e.local;if("xmlns"===r)if("xml"===n&&t.attribValue!==a)O(t,"xml: prefix must be bound to "+a+"\nActual: "+t.attribValue);else if("xmlns"===n&&t.attribValue!==c)O(t,"xmlns: prefix must be bound to "+c+"\nActual: "+t.attribValue);else {var s=t.tag,i=t.tags[t.tags.length-1]||t;s.ns===i.ns&&(s.ns=Object.create(i.ns)),s.ns[n]=t.attribValue;}t.attribList.push([t.attribName,t.attribValue]);}else t.tag.attributes[t.attribName]=t.attribValue,A(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue="";}}function L(t,e){if(t.opt.xmlns){var r=t.tag,n=k(t.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(O(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),r.uri=n.prefix);var s=t.tags[t.tags.length-1]||t;r.ns&&s.ns!==r.ns&&Object.keys(r.ns).forEach(function(e){A(t,"onopennamespace",{prefix:e,uri:r.ns[e]});});for(var i=0,o=t.attribList.length;i<o;i++){var a=t.attribList[i],c=a[0],u=a[1],l=k(c,!0),h=l.prefix,p=l.local,d=""===h?"":r.ns[h]||"",f={name:c,value:u,prefix:h,local:p,uri:d};h&&"xmlns"!==h&&!d&&(O(t,"Unbound namespace prefix: "+JSON.stringify(h)),f.uri=h),t.tag.attributes[c]=f,A(t,"onattribute",f);}t.attribList.length=0;}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),A(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=x.TEXT:t.state=x.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0;}function P(t){if(!t.tagName)return O(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=x.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=x.SCRIPT);A(t,"onscript",t.script),t.script="";}var e=t.tags.length,r=t.tagName;t.strict||(r=r[t.looseCase]());for(var n=r;e--&&t.tags[e].name!==n;)O(t,"Unexpected close tag");if(e<0)return O(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=x.TEXT);t.tagName=r;for(var s=t.tags.length;s-->e;){var i=t.tag=t.tags.pop();t.tagName=t.tag.name,A(t,"onclosetag",t.tagName);var o={};for(var a in i.ns)o[a]=i.ns[a];var c=t.tags[t.tags.length-1]||t;t.opt.xmlns&&i.ns!==c.ns&&Object.keys(i.ns).forEach(function(e){var r=i.ns[e];A(t,"onclosenamespace",{prefix:e,uri:r});});}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=x.TEXT;}function F(t){var e,r=t.entity,n=r.toLowerCase(),s="";return t.ENTITIES[r]?t.ENTITIES[r]:t.ENTITIES[n]?t.ENTITIES[n]:("#"===(r=n).charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),s=(e=parseInt(r,16)).toString(16)):(r=r.slice(1),s=(e=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),isNaN(e)||s.toLowerCase()!==r?(O(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e));}function B(t,e){"<"===e?(t.state=x.OPEN_WAKA,t.startTagPosition=t.position):f(e)||(O(t,"Non-whitespace before first tag."),t.textNode=e,t.state=x.TEXT);}function M(t,e){var r="";return e<t.length&&(r=t.charAt(e)),r;}x=t.STATE,String.fromCodePoint||(b=String.fromCharCode,v=Math.floor,_=function(){var t,e,r=16384,n=[],s=-1,i=arguments.length;if(!i)return "";for(var o="";++s<i;){var a=Number(arguments[s]);if(!isFinite(a)||a<0||a>1114111||v(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?n.push(a):(t=55296+((a-=65536)>>10),e=a%1024+56320,n.push(t,e)),(s+1===i||n.length>r)&&(o+=b.apply(null,n),n.length=0);}return o;},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:_,configurable:!0,writable:!0}):String.fromCodePoint=_);}(e);},830:(t,e,r)=>{t.exports=s;var n=r(187).EventEmitter;function s(){n.call(this);}r(717)(s,n),s.Readable=r(577),s.Writable=r(323),s.Duplex=r(656),s.Transform=r(473),s.PassThrough=r(366),s.finished=r(86),s.pipeline=r(472),s.Stream=s,s.prototype.pipe=function(t,e){var r=this;function s(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause();}function i(){r.readable&&r.resume&&r.resume();}r.on("data",s),t.on("drain",i),t._isStdio||e&&!1===e.end||(r.on("end",a),r.on("close",c));var o=!1;function a(){o||(o=!0,t.end());}function c(){o||(o=!0,"function"==typeof t.destroy&&t.destroy());}function u(t){if(l(),0===n.listenerCount(this,"error"))throw t;}function l(){r.removeListener("data",s),t.removeListener("drain",i),r.removeListener("end",a),r.removeListener("close",c),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l);}return r.on("error",u),t.on("error",u),r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t;};},106:t=>{var e={};function r(t,r,n){n||(n=Error);var s=function(t){var e,n;function s(e,n,s){return t.call(this,function(t,e,n){return "string"==typeof r?r:r(t,e,n);}(e,n,s))||this;}return n=t,(e=s).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,s;}(n);s.prototype.name=n.name,s.prototype.code=t,e[t]=s;}function n(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(t){return String(t);}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0]);}return "of ".concat(e," ").concat(String(t));}r("ERR_INVALID_OPT_VALUE",function(t,e){return 'The value "'+e+'" is invalid for option "'+t+'"';},TypeError),r("ERR_INVALID_ARG_TYPE",function(t,e,r){var s,i,o,a,c;if("string"==typeof e&&(i="not ",e.substr(0,i.length)===i)?(s="must not be",e=e.replace(/^not /,"")):s="must be",function(t,e,r){return (void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e;}(t," argument"))o="The ".concat(t," ").concat(s," ").concat(n(e,"type"));else {var u=("number"!=typeof c&&(c=0),c+".".length>(a=t).length||-1===a.indexOf(".",c)?"argument":"property");o='The "'.concat(t,'" ').concat(u," ").concat(s," ").concat(n(e,"type"));}return o+". Received type ".concat(typeof r);},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(t){return "The "+t+" method is not implemented";}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(t){return "Cannot call "+t+" after a stream was destroyed";}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(t){return "Unknown encoding: "+t;},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.q=e;},656:(t,e,r)=>{var n=r(155),s=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e;};t.exports=l;var i=r(577),o=r(323);r(717)(l,i);for(var a=s(o.prototype),c=0;c<a.length;c++){var u=a[c];l.prototype[u]||(l.prototype[u]=o.prototype[u]);}function l(t){if(!(this instanceof l))return new l(t);i.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)));}function h(){this._writableState.ended||n.nextTick(p,this);}function p(t){t.end();}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark;}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer();}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length;}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed;},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t);}});},366:(t,e,r)=>{t.exports=s;var n=r(473);function s(t){if(!(this instanceof s))return new s(t);n.call(this,t);}r(717)(s,n),s.prototype._transform=function(t,e,r){r(null,t);};},577:(t,e,r)=>{var n,s=r(155);t.exports=A,A.ReadableState=T,r(187).EventEmitter;var i,o=function(t,e){return t.listeners(e).length;},a=r(194),c=r(764).Buffer,u=r.g.Uint8Array||function(){},l=r(964);i=l&&l.debuglog?l.debuglog("stream"):function(){};var h,p,d,f=r(686),m=r(29),w=r(94).getHighWaterMark,g=r(106).q,y=g.ERR_INVALID_ARG_TYPE,b=g.ERR_STREAM_PUSH_AFTER_EOF,v=g.ERR_METHOD_NOT_IMPLEMENTED,_=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(717)(A,a);var x=m.errorOrDestroy,E=["error","close","destroy","pause","resume"];function T(t,e,s){n=n||r(656),t=t||{},"boolean"!=typeof s&&(s=e instanceof n),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=w(this,t,"readableHighWaterMark",s),this.buffer=new f(),this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=r(553).s),this.decoder=new h(t.encoding),this.encoding=t.encoding);}function A(t){if(n=n||r(656),!(this instanceof A))return new A(t);var e=this instanceof n;this._readableState=new T(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this);}function S(t,e,r,n,s){i("readableAddChunk",e);var o,a=t._readableState;if(null===e)a.reading=!1,function(t,e){if(i("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length);}e.ended=!0,e.sync?O(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,C(t)));}}(t,a);else if(s||(o=function(t,e){var r,n;return n=e,c.isBuffer(n)||n instanceof u||"string"==typeof e||void 0===e||t.objectMode||(r=new y("chunk",["string","Buffer","Uint8Array"],e)),r;}(a,e)),o)x(t,o);else if(a.objectMode||e&&e.length>0){if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t);}(e)),n)a.endEmitted?x(t,new _()):R(t,a,e,!0);else if(a.ended)x(t,new b());else {if(a.destroyed)return !1;a.reading=!1,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||0!==e.length?R(t,a,e,!1):k(t,a)):R(t,a,e,!1);}}else n||(a.reading=!1,k(t,a));return !a.ended&&(a.length<a.highWaterMark||0===a.length);}function R(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&O(t)),k(t,e);}Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed;},set:function(t){this._readableState&&(this._readableState.destroyed=t);}}),A.prototype.destroy=m.destroy,A.prototype._undestroy=m.undestroy,A.prototype._destroy=function(t,e){e(t);},A.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=c.from(t,e),e=""),r=!0),S(this,t,e,!1,r);},A.prototype.unshift=function(t){return S(this,t,null,!0,!1);},A.prototype.isPaused=function(){return !1===this._readableState.flowing;},A.prototype.setEncoding=function(t){h||(h=r(553).s);var e=new h(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,s="";null!==n;)s+=e.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==s&&this._readableState.buffer.push(s),this._readableState.length=s.length,this;};var I=1073741824;function N(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=I?t=I:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t;}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0));}function O(t){var e=t._readableState;i("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(i("emitReadable",e.flowing),e.emittedReadable=!0,s.nextTick(C,t));}function C(t){var e=t._readableState;i("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,B(t);}function k(t,e){e.readingMore||(e.readingMore=!0,s.nextTick(D,t,e));}function D(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(i("maybeReadMore read 0"),t.read(0),r===e.length)break;}e.readingMore=!1;}function L(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume();}function P(t){i("readable nexttick read 0"),t.read(0);}function F(t,e){i("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),B(t),e.flowing&&!e.reading&&t.read(0);}function B(t){var e=t._readableState;for(i("flow",e.flowing);e.flowing&&null!==t.read(););}function M(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r;}function U(t){var e=t._readableState;i("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,s.nextTick(z,e,t));}function z(t,e){if(i("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy();}}function H(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return -1;}A.prototype.read=function(t){i("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return i("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?U(this):O(this),null;if(0===(t=N(t,e))&&e.ended)return 0===e.length&&U(this),null;var n,s=e.needReadable;return i("need readable",s),(0===e.length||e.length-t<e.highWaterMark)&&i("length less than watermark",s=!0),e.ended||e.reading?i("reading or ended",s=!1):s&&(i("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=N(r,e))),null===(n=t>0?M(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&U(this)),null!==n&&this.emit("data",n),n;},A.prototype._read=function(t){x(this,new v("_read()"));},A.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);}n.pipesCount+=1,i("pipe count=%d opts=%j",n.pipesCount,e);var a=e&&!1===e.end||t===s.stdout||t===s.stderr?m:c;function c(){i("onend"),t.end();}n.endEmitted?s.nextTick(a):r.once("end",a),t.on("unpipe",function e(s,o){i("onunpipe"),s===r&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,i("cleanup"),t.removeListener("close",d),t.removeListener("finish",f),t.removeListener("drain",u),t.removeListener("error",p),t.removeListener("unpipe",e),r.removeListener("end",c),r.removeListener("end",m),r.removeListener("data",h),l=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||u());});var u=function(t){return function(){var e=t._readableState;i("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,B(t));};}(r);t.on("drain",u);var l=!1;function h(e){i("ondata");var s=t.write(e);i("dest.write",s),!1===s&&((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==H(n.pipes,t))&&!l&&(i("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause());}function p(e){i("onerror",e),m(),t.removeListener("error",p),0===o(t,"error")&&x(t,e);}function d(){t.removeListener("finish",f),m();}function f(){i("onfinish"),t.removeListener("close",d),m();}function m(){i("unpipe"),r.unpipe(t);}return r.on("data",h),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events.error?Array.isArray(t._events.error)?t._events.error.unshift(r):t._events.error=[r,t._events.error]:t.on(e,r);}(t,"error",p),t.once("close",d),t.once("finish",f),t.emit("pipe",r),n.flowing||(i("pipe resume"),r.resume()),t;},A.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,s=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<s;i++)n[i].emit("unpipe",this,{hasUnpiped:!1});return this;}var o=H(e.pipes,t);return -1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this;},A.prototype.on=function(t,e){var r=a.prototype.on.call(this,t,e),n=this._readableState;return "data"===t?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===t&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,i("on readable",n.length,n.reading),n.length?O(this):n.reading||s.nextTick(P,this))),r;},A.prototype.addListener=A.prototype.on,A.prototype.removeListener=function(t,e){var r=a.prototype.removeListener.call(this,t,e);return "readable"===t&&s.nextTick(L,this),r;},A.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return "readable"!==t&&void 0!==t||s.nextTick(L,this),e;},A.prototype.resume=function(){var t=this._readableState;return t.flowing||(i("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,s.nextTick(F,t,e));}(this,t)),t.paused=!1,this;},A.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this;},A.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var s in t.on("end",function(){if(i("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t);}e.push(null);}),t.on("data",function(s){i("wrapped data"),r.decoder&&(s=r.decoder.write(s)),r.objectMode&&null==s||(r.objectMode||s&&s.length)&&(e.push(s)||(n=!0,t.pause()));}),t)void 0===this[s]&&"function"==typeof t[s]&&(this[s]=function(e){return function(){return t[e].apply(t,arguments);};}(s));for(var o=0;o<E.length;o++)t.on(E[o],this.emit.bind(this,E[o]));return this._read=function(e){i("wrapped _read",e),n&&(n=!1,t.resume());},this;},"function"==typeof Symbol&&(A.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=r(828)),p(this);}),Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark;}}),Object.defineProperty(A.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer;}}),Object.defineProperty(A.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing;},set:function(t){this._readableState&&(this._readableState.flowing=t);}}),A._fromList=M,Object.defineProperty(A.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length;}}),"function"==typeof Symbol&&(A.from=function(t,e){return void 0===d&&(d=r(265)),d(A,t,e);});},473:(t,e,r)=>{t.exports=l;var n=r(106).q,s=n.ERR_METHOD_NOT_IMPLEMENTED,i=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=r(656);function u(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new i());r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark);}function l(t){if(!(this instanceof l))return new l(t);c.call(this,t),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h);}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?p(this,null,null):this._flush(function(e,r){p(t,e,r);});}function p(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new a();if(t._transformState.transforming)throw new o();return t.push(null);}r(717)(l,c),l.prototype.push=function(t,e){return this._transformState.needTransform=!1,c.prototype.push.call(this,t,e);},l.prototype._transform=function(t,e,r){r(new s("_transform()"));},l.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var s=this._readableState;(n.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark);}},l.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform));},l.prototype._destroy=function(t,e){c.prototype._destroy.call(this,t,function(t){e(t);});};},323:(t,e,r)=>{var n,s=r(155);function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;for(t.entry=null;n;){var s=n.callback;e.pendingcb--,s(undefined),n=n.next;}e.corkedRequestsFree.next=t;}(e,t);};}t.exports=A,A.WritableState=T;var o,a={deprecate:r(927)},c=r(194),u=r(764).Buffer,l=r.g.Uint8Array||function(){},h=r(29),p=r(94).getHighWaterMark,d=r(106).q,f=d.ERR_INVALID_ARG_TYPE,m=d.ERR_METHOD_NOT_IMPLEMENTED,w=d.ERR_MULTIPLE_CALLBACK,g=d.ERR_STREAM_CANNOT_PIPE,y=d.ERR_STREAM_DESTROYED,b=d.ERR_STREAM_NULL_VALUES,v=d.ERR_STREAM_WRITE_AFTER_END,_=d.ERR_UNKNOWN_ENCODING,x=h.errorOrDestroy;function E(){}function T(t,e,o){n=n||r(656),t=t||{},"boolean"!=typeof o&&(o=e instanceof n),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=p(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new w();if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0;}(r),e)!function(t,e,r,n,i){--e.pendingcb,r?(s.nextTick(i,n),s.nextTick(C,t,e),t._writableState.errorEmitted=!0,x(t,n)):(i(n),t._writableState.errorEmitted=!0,x(t,n),C(t,e));}(t,r,n,e,i);else {var o=N(r)||t.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||I(t,r),n?s.nextTick(R,t,r,o,i):R(t,r,o,i);}}(e,t);},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this);}function A(t){var e=this instanceof(n=n||r(656));if(!e&&!o.call(A,this))return new A(t);this._writableState=new T(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),c.call(this);}function S(t,e,r,n,s,i,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new y("write")):r?t._writev(s,e.onwrite):t._write(s,i,e.onwrite),e.sync=!1;}function R(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));}(t,e),e.pendingcb--,n(),C(t,e);}function I(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,s=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0,c=!0;r;)s[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;s.allBuffers=c,S(t,e,!0,e.length,s,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0;}else {for(;r;){var u=r.chunk,l=r.encoding,h=r.callback;if(S(t,e,!1,e.objectMode?1:u.length,u,l,h),r=r.next,e.bufferedRequestCount--,e.writing)break;}null===r&&(e.lastBufferedRequest=null);}e.bufferedRequest=r,e.bufferProcessing=!1;}function N(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing;}function O(t,e){t._final(function(r){e.pendingcb--,r&&x(t,r),e.prefinished=!0,t.emit("prefinish"),C(t,e);});}function C(t,e){var r=N(e);if(r&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,s.nextTick(O,t,e)));}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy();}return r;}r(717)(A,c),T.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e;},function(){try{Object.defineProperty(T.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer();},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")});}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function(t){return !!o.call(this,t)||this===A&&t&&t._writableState instanceof T;}})):o=function(t){return t instanceof this;},A.prototype.pipe=function(){x(this,new g());},A.prototype.write=function(t,e,r){var n,i=this._writableState,o=!1,a=!i.objectMode&&(n=t,u.isBuffer(n)||n instanceof l);return a&&!u.isBuffer(t)&&(t=function(t){return u.from(t);}(t)),"function"==typeof e&&(r=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof r&&(r=E),i.ending?function(t,e){var r=new v();x(t,r),s.nextTick(e,r);}(this,r):(a||function(t,e,r,n){var i;return null===r?i=new b():"string"==typeof r||e.objectMode||(i=new f("chunk",["string","Buffer"],r)),!i||(x(t,i),s.nextTick(n,i),!1);}(this,i,t,r))&&(i.pendingcb++,o=function(t,e,r,n,s,i){if(!r){var o=function(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,r)),e;}(e,n,s);n!==o&&(r=!0,s="buffer",n=o);}var a=e.objectMode?1:n.length;e.length+=a;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:s,isBuf:r,callback:i,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1;}else S(t,e,!1,a,n,s,i);return c;}(this,i,a,t,e,r)),o;},A.prototype.cork=function(){this._writableState.corked++;},A.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||I(this,t));},A.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new _(t);return this._writableState.defaultEncoding=t,this;},Object.defineProperty(A.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer();}}),Object.defineProperty(A.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark;}}),A.prototype._write=function(t,e,r){r(new m("_write()"));},A.prototype._writev=null,A.prototype.end=function(t,e,r){var n=this._writableState;return "function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||function(t,e,r){e.ending=!0,C(t,e),r&&(e.finished?s.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1;}(this,n,r),this;},Object.defineProperty(A.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length;}}),Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed;},set:function(t){this._writableState&&(this._writableState.destroyed=t);}}),A.prototype.destroy=h.destroy,A.prototype._undestroy=h.undestroy,A.prototype._destroy=function(t,e){e(t);};},828:(t,e,r)=>{var n,s=r(155);function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t;}var o=r(86),a=Symbol("lastResolve"),c=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),h=Symbol("lastPromise"),p=Symbol("handlePromise"),d=Symbol("stream");function f(t,e){return {value:t,done:e};}function m(t){var e=t[a];if(null!==e){var r=t[d].read();null!==r&&(t[h]=null,t[a]=null,t[c]=null,e(f(r,!1)));}}function w(t){s.nextTick(m,t);}var g=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((i(n={get stream(){return this[d];},next:function(){var t=this,e=this[u];if(null!==e)return Promise.reject(e);if(this[l])return Promise.resolve(f(void 0,!0));if(this[d].destroyed)return new Promise(function(e,r){s.nextTick(function(){t[u]?r(t[u]):e(f(void 0,!0));});});var r,n=this[h];if(n)r=new Promise(function(t,e){return function(r,n){t.then(function(){e[l]?r(f(void 0,!0)):e[p](r,n);},n);};}(n,this));else {var i=this[d].read();if(null!==i)return Promise.resolve(f(i,!1));r=new Promise(this[p]);}return this[h]=r,r;}},Symbol.asyncIterator,function(){return this;}),i(n,"return",function(){var t=this;return new Promise(function(e,r){t[d].destroy(null,function(t){t?r(t):e(f(void 0,!0));});});}),n),g);t.exports=function(t){var e,r=Object.create(y,(i(e={},d,{value:t,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,c,{value:null,writable:!0}),i(e,u,{value:null,writable:!0}),i(e,l,{value:t._readableState.endEmitted,writable:!0}),i(e,p,{value:function(t,e){var n=r[d].read();n?(r[h]=null,r[a]=null,r[c]=null,t(f(n,!1))):(r[a]=t,r[c]=e);},writable:!0}),e));return r[h]=null,o(t,function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[c];return null!==e&&(r[h]=null,r[a]=null,r[c]=null,e(t)),void(r[u]=t);}var n=r[a];null!==n&&(r[h]=null,r[a]=null,r[c]=null,n(f(void 0,!0))),r[l]=!0;}),t.on("readable",w.bind(null,r)),r;};},686:(t,e,r)=>{function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable;})),r.push.apply(r,n);}return r;}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t;}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n);}}var o=r(764).Buffer,a=r(862).inspect,c=a&&a.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}(this,t),this.head=null,this.tail=null,this.length=0;}var e,r;return e=t,r=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length;}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length;}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t;}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0;}},{key:"join",value:function(t){if(0===this.length)return "";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r;}},{key:"concat",value:function(t){if(0===this.length)return o.alloc(0);for(var e,r,n,s=o.allocUnsafe(t>>>0),i=this.head,a=0;i;)e=i.data,r=s,n=a,o.prototype.copy.call(e,r,n),a+=i.data.length,i=i.next;return s;}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r;}},{key:"first",value:function(){return this.head.data;}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;for(t-=n.length;e=e.next;){var s=e.data,i=t>s.length?s.length:t;if(i===s.length?n+=s:n+=s.slice(0,t),0==(t-=i)){i===s.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=s.slice(i));break;}++r;}return this.length-=r,n;}},{key:"_getBuffer",value:function(t){var e=o.allocUnsafe(t),r=this.head,n=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var s=r.data,i=t>s.length?s.length:t;if(s.copy(e,e.length-t,0,i),0==(t-=i)){i===s.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=s.slice(i));break;}++n;}return this.length-=n,e;}},{key:c,value:function(t,e){return a(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach(function(e){s(t,e,r[e]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e));});}return t;}({},e,{depth:0,customInspect:!1}));}}],r&&i(e.prototype,r),t;}();},29:(t,e,r)=>{var n=r(155);function s(t,e){o(t,e),i(t);}function i(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close");}function o(t,e){t.emit("error",e);}t.exports={destroy:function(t,e){var r=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(o,this,t)):n.nextTick(o,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?r._writableState?r._writableState.errorEmitted?n.nextTick(i,r):(r._writableState.errorEmitted=!0,n.nextTick(s,r,t)):n.nextTick(s,r,t):e?(n.nextTick(i,r),e(t)):n.nextTick(i,r);}),this);},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1);},errorOrDestroy:function(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e);}};},86:(t,e,r)=>{var n=r(106).q.ERR_STREAM_PREMATURE_CLOSE;function s(){}t.exports=function t(e,r,i){if("function"==typeof r)return t(e,null,r);r||(r={}),i=function(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];t.apply(this,n);}};}(i||s);var o=r.readable||!1!==r.readable&&e.readable,a=r.writable||!1!==r.writable&&e.writable,c=function(){e.writable||l();},u=e._writableState&&e._writableState.finished,l=function(){a=!1,u=!0,o||i.call(e);},h=e._readableState&&e._readableState.endEmitted,p=function(){o=!1,h=!0,a||i.call(e);},d=function(t){i.call(e,t);},f=function(){var t;return o&&!h?(e._readableState&&e._readableState.ended||(t=new n()),i.call(e,t)):a&&!u?(e._writableState&&e._writableState.ended||(t=new n()),i.call(e,t)):void 0;},m=function(){e.req.on("finish",l);};return function(t){return t.setHeader&&"function"==typeof t.abort;}(e)?(e.on("complete",l),e.on("abort",f),e.req?m():e.on("request",m)):a&&!e._writableState&&(e.on("end",c),e.on("close",c)),e.on("end",p),e.on("finish",l),!1!==r.error&&e.on("error",d),e.on("close",f),function(){e.removeListener("complete",l),e.removeListener("abort",f),e.removeListener("request",m),e.req&&e.req.removeListener("finish",l),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",l),e.removeListener("end",p),e.removeListener("error",d),e.removeListener("close",f);};};},265:t=>{t.exports=function(){throw new Error("Readable.from is not available in the browser");};},472:(t,e,r)=>{var n,s=r(106).q,i=s.ERR_MISSING_ARGS,o=s.ERR_STREAM_DESTROYED;function a(t){if(t)throw t;}function c(t,e,s,i){i=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments));};}(i);var a=!1;t.on("close",function(){a=!0;}),void 0===n&&(n=r(86)),n(t,{readable:e,writable:s},function(t){if(t)return i(t);a=!0,i();});var c=!1;return function(e){if(!a&&!c)return c=!0,function(t){return t.setHeader&&"function"==typeof t.abort;}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void i(e||new o("pipe"));};}function u(t){t();}function l(t,e){return t.pipe(e);}function h(t){return t.length?"function"!=typeof t[t.length-1]?a:t.pop():a;}t.exports=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,s=h(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new i("streams");var o=e.map(function(t,r){var i=r<e.length-1;return c(t,i,r>0,function(t){n||(n=t),t&&o.forEach(u),i||(o.forEach(u),s(n));});});return e.reduce(l);};},94:(t,e,r)=>{var n=r(106).q.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,r,s){var i=function(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null;}(e,s,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new n(s?r:"highWaterMark",i);return Math.floor(i);}return t.objectMode?16:16384;}};},194:(t,e,r)=>{t.exports=r(187).EventEmitter;},553:(t,e,r)=>{var n=r(509).Buffer,s=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return !0;default:return !1;}};function i(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return "utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return "utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return "utf16le";case"latin1":case"binary":return "latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0;}}(t);if("string"!=typeof e&&(n.isEncoding===s||!s(t)))throw new Error("Unknown encoding: "+t);return e||t;}(t),this.encoding){case"utf16le":this.text=c,this.end=u,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=l,this.end=h,e=3;break;default:return this.write=p,void(this.end=d);}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e);}function o(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2;}function a(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�";}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length));}function c(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1);}return r;}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1);}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r);}return e;}function l(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r));}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e;}function p(t){return t.toString(this.encoding);}function d(t){return t&&t.length?this.write(t):"";}e.s=i,i.prototype.write=function(t){if(0===t.length)return "";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return "";r=this.lastNeed,this.lastNeed=0;}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||"";},i.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e;},i.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var s=o(e[n]);return s>=0?(s>0&&(t.lastNeed=s-1),s):--n<r||-2===s?0:(s=o(e[n]))>=0?(s>0&&(t.lastNeed=s-2),s):--n<r||-2===s?0:(s=o(e[n]))>=0?(s>0&&(2===s?s=0:t.lastNeed=s-3),s):0;}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n);},i.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length;};},927:(t,e,r)=>{function n(t){try{if(!r.g.localStorage)return !1;}catch(t){return !1;}var e=r.g.localStorage[t];return null!=e&&"true"===String(e).toLowerCase();}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0;}return t.apply(this,arguments);};};},881:t=>{t.exports={isArray:function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t);}};},888:(t,e,r)=>{var n=r(229),s=r(388),i=r(501),o=r(673);t.exports={xml2js:n,xml2json:s,js2xml:i,json2xml:o};},501:(t,e,r)=>{var n,s,i=r(740),o=r(881).isArray;function a(t,e,r){return (!r&&t.spaces?"\n":"")+Array(e+1).join(t.spaces);}function c(t,e,r){if(e.ignoreAttributes)return "";"attributesFn"in e&&(t=e.attributesFn(t,s,n));var i,o,c,u,l=[];for(i in t)t.hasOwnProperty(i)&&null!==t[i]&&void 0!==t[i]&&(u=e.noQuotesForNativeAttributes&&"string"!=typeof t[i]?"":'"',o=(o=""+t[i]).replace(/"/g,"&quot;"),c="attributeNameFn"in e?e.attributeNameFn(i,o,s,n):i,l.push(e.spaces&&e.indentAttributes?a(e,r+1,!1):" "),l.push(c+"="+u+("attributeValueFn"in e?e.attributeValueFn(o,i,s,n):o)+u));return t&&Object.keys(t).length&&e.spaces&&e.indentAttributes&&l.push(a(e,r,!1)),l.join("");}function u(t,e,r){return n=t,s="xml",e.ignoreDeclaration?"":"<?xml"+c(t[e.attributesKey],e,r)+"?>";}function l(t,e,r){if(e.ignoreInstruction)return "";var i;for(i in t)if(t.hasOwnProperty(i))break;var o="instructionNameFn"in e?e.instructionNameFn(i,t[i],s,n):i;if("object"==typeof t[i])return n=t,s=o,"<?"+o+c(t[i][e.attributesKey],e,r)+"?>";var a=t[i]?t[i]:"";return "instructionFn"in e&&(a=e.instructionFn(a,i,s,n)),"<?"+o+(a?" "+a:"")+"?>";}function h(t,e){return e.ignoreComment?"":"\x3c!--"+("commentFn"in e?e.commentFn(t,s,n):t)+"--\x3e";}function p(t,e){return e.ignoreCdata?"":"<![CDATA["+("cdataFn"in e?e.cdataFn(t,s,n):t.replace("]]>","]]]]><![CDATA[>"))+"]]>";}function d(t,e){return e.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in e?e.doctypeFn(t,s,n):t)+">";}function f(t,e){return e.ignoreText?"":(t=(t=(t=""+t).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in e?e.textFn(t,s,n):t);}function m(t,e,r,i){return t.reduce(function(t,o){var u=a(e,r,i&&!t);switch(o.type){case"element":return t+u+function(t,e,r){n=t,s=t.name;var i=[],o="elementNameFn"in e?e.elementNameFn(t.name,t):t.name;i.push("<"+o),t[e.attributesKey]&&i.push(c(t[e.attributesKey],e,r));var a=t[e.elementsKey]&&t[e.elementsKey].length||t[e.attributesKey]&&"preserve"===t[e.attributesKey]["xml:space"];return a||(a="fullTagEmptyElementFn"in e?e.fullTagEmptyElementFn(t.name,t):e.fullTagEmptyElement),a?(i.push(">"),t[e.elementsKey]&&t[e.elementsKey].length&&(i.push(m(t[e.elementsKey],e,r+1)),n=t,s=t.name),i.push(e.spaces&&function(t,e){var r;if(t.elements&&t.elements.length)for(r=0;r<t.elements.length;++r)switch(t.elements[r][e.typeKey]){case"text":if(e.indentText)return !0;break;case"cdata":if(e.indentCdata)return !0;break;case"instruction":if(e.indentInstruction)return !0;break;default:return !0;}return !1;}(t,e)?"\n"+Array(r+1).join(e.spaces):""),i.push("</"+o+">")):i.push("/>"),i.join("");}(o,e,r);case"comment":return t+u+h(o[e.commentKey],e);case"doctype":return t+u+d(o[e.doctypeKey],e);case"cdata":return t+(e.indentCdata?u:"")+p(o[e.cdataKey],e);case"text":return t+(e.indentText?u:"")+f(o[e.textKey],e);case"instruction":var w={};return w[o[e.nameKey]]=o[e.attributesKey]?o:o[e.instructionKey],t+(e.indentInstruction?u:"")+l(w,e,r);}},"");}function w(t,e,r){var n;for(n in t)if(t.hasOwnProperty(n))switch(n){case e.parentKey:case e.attributesKey:break;case e.textKey:if(e.indentText||r)return !0;break;case e.cdataKey:if(e.indentCdata||r)return !0;break;case e.instructionKey:if(e.indentInstruction||r)return !0;break;case e.doctypeKey:case e.commentKey:default:return !0;}return !1;}function g(t,e,r,i,o){n=t,s=e;var u="elementNameFn"in r?r.elementNameFn(e,t):e;if(null==t||""===t)return "fullTagEmptyElementFn"in r&&r.fullTagEmptyElementFn(e,t)||r.fullTagEmptyElement?"<"+u+"></"+u+">":"<"+u+"/>";var l=[];if(e){if(l.push("<"+u),"object"!=typeof t)return l.push(">"+f(t,r)+"</"+u+">"),l.join("");t[r.attributesKey]&&l.push(c(t[r.attributesKey],r,i));var h=w(t,r,!0)||t[r.attributesKey]&&"preserve"===t[r.attributesKey]["xml:space"];if(h||(h="fullTagEmptyElementFn"in r?r.fullTagEmptyElementFn(e,t):r.fullTagEmptyElement),!h)return l.push("/>"),l.join("");l.push(">");}return l.push(y(t,r,i+1,!1)),n=t,s=e,e&&l.push((o?a(r,i,!1):"")+"</"+u+">"),l.join("");}function y(t,e,r,n){var s,i,c,m=[];for(i in t)if(t.hasOwnProperty(i))for(c=o(t[i])?t[i]:[t[i]],s=0;s<c.length;++s){switch(i){case e.declarationKey:m.push(u(c[s],e,r));break;case e.instructionKey:m.push((e.indentInstruction?a(e,r,n):"")+l(c[s],e,r));break;case e.attributesKey:case e.parentKey:break;case e.textKey:m.push((e.indentText?a(e,r,n):"")+f(c[s],e));break;case e.cdataKey:m.push((e.indentCdata?a(e,r,n):"")+p(c[s],e));break;case e.doctypeKey:m.push(a(e,r,n)+d(c[s],e));break;case e.commentKey:m.push(a(e,r,n)+h(c[s],e));break;default:m.push(a(e,r,n)+g(c[s],i,e,r,w(c[s],e)));}n=n&&!m.length;}return m.join("");}t.exports=function(t,e){e=function(t){var e=i.copyOptions(t);return i.ensureFlagExists("ignoreDeclaration",e),i.ensureFlagExists("ignoreInstruction",e),i.ensureFlagExists("ignoreAttributes",e),i.ensureFlagExists("ignoreText",e),i.ensureFlagExists("ignoreComment",e),i.ensureFlagExists("ignoreCdata",e),i.ensureFlagExists("ignoreDoctype",e),i.ensureFlagExists("compact",e),i.ensureFlagExists("indentText",e),i.ensureFlagExists("indentCdata",e),i.ensureFlagExists("indentAttributes",e),i.ensureFlagExists("indentInstruction",e),i.ensureFlagExists("fullTagEmptyElement",e),i.ensureFlagExists("noQuotesForNativeAttributes",e),i.ensureSpacesExists(e),"number"==typeof e.spaces&&(e.spaces=Array(e.spaces+1).join(" ")),i.ensureKeyExists("declaration",e),i.ensureKeyExists("instruction",e),i.ensureKeyExists("attributes",e),i.ensureKeyExists("text",e),i.ensureKeyExists("comment",e),i.ensureKeyExists("cdata",e),i.ensureKeyExists("doctype",e),i.ensureKeyExists("type",e),i.ensureKeyExists("name",e),i.ensureKeyExists("elements",e),i.checkFnExists("doctype",e),i.checkFnExists("instruction",e),i.checkFnExists("cdata",e),i.checkFnExists("comment",e),i.checkFnExists("text",e),i.checkFnExists("instructionName",e),i.checkFnExists("elementName",e),i.checkFnExists("attributeName",e),i.checkFnExists("attributeValue",e),i.checkFnExists("attributes",e),i.checkFnExists("fullTagEmptyElement",e),e;}(e);var r=[];return n=t,s="_root_",e.compact?r.push(y(t,e,0,!0)):(t[e.declarationKey]&&r.push(u(t[e.declarationKey],e,0)),t[e.elementsKey]&&t[e.elementsKey].length&&r.push(m(t[e.elementsKey],e,0,!r.length))),r.join("");};},673:(t,e,r)=>{var n=r(501);t.exports=function(t,e){t instanceof Buffer&&(t=t.toString());var r=null;if("string"==typeof t)try{r=JSON.parse(t);}catch(t){throw new Error("The JSON structure is invalid");}else r=t;return n(r,e);};},740:(t,e,r)=>{var n=r(881).isArray;t.exports={copyOptions:function(t){var e,r={};for(e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r;},ensureFlagExists:function(t,e){t in e&&"boolean"==typeof e[t]||(e[t]=!1);},ensureSpacesExists:function(t){(!("spaces"in t)||"number"!=typeof t.spaces&&"string"!=typeof t.spaces)&&(t.spaces=0);},ensureAlwaysArrayExists:function(t){"alwaysArray"in t&&("boolean"==typeof t.alwaysArray||n(t.alwaysArray))||(t.alwaysArray=!1);},ensureKeyExists:function(t,e){t+"Key"in e&&"string"==typeof e[t+"Key"]||(e[t+"Key"]=e.compact?"_"+t:t);},checkFnExists:function(t,e){return t+"Fn"in e;}};},229:(t,e,r)=>{var n,s,i=r(99),o=r(740),a=r(881).isArray;function c(t){var e=Number(t);if(!isNaN(e))return e;var r=t.toLowerCase();return "true"===r||"false"!==r&&t;}function u(t,e){var r;if(n.compact){if(!s[n[t+"Key"]]&&(a(n.alwaysArray)?-1!==n.alwaysArray.indexOf(n[t+"Key"]):n.alwaysArray)&&(s[n[t+"Key"]]=[]),s[n[t+"Key"]]&&!a(s[n[t+"Key"]])&&(s[n[t+"Key"]]=[s[n[t+"Key"]]]),t+"Fn"in n&&"string"==typeof e&&(e=n[t+"Fn"](e,s)),"instruction"===t&&("instructionFn"in n||"instructionNameFn"in n))for(r in e)if(e.hasOwnProperty(r))if("instructionFn"in n)e[r]=n.instructionFn(e[r],r,s);else {var i=e[r];delete e[r],e[n.instructionNameFn(r,i,s)]=i;}a(s[n[t+"Key"]])?s[n[t+"Key"]].push(e):s[n[t+"Key"]]=e;}else {s[n.elementsKey]||(s[n.elementsKey]=[]);var o={};if(o[n.typeKey]=t,"instruction"===t){for(r in e)if(e.hasOwnProperty(r))break;o[n.nameKey]="instructionNameFn"in n?n.instructionNameFn(r,e,s):r,n.instructionHasAttributes?(o[n.attributesKey]=e[r][n.attributesKey],"instructionFn"in n&&(o[n.attributesKey]=n.instructionFn(o[n.attributesKey],r,s))):("instructionFn"in n&&(e[r]=n.instructionFn(e[r],r,s)),o[n.instructionKey]=e[r]);}else t+"Fn"in n&&(e=n[t+"Fn"](e,s)),o[n[t+"Key"]]=e;n.addParent&&(o[n.parentKey]=s),s[n.elementsKey].push(o);}}function l(t){var e;if("attributesFn"in n&&t&&(t=n.attributesFn(t,s)),(n.trim||"attributeValueFn"in n||"attributeNameFn"in n||n.nativeTypeAttributes)&&t)for(e in t)if(t.hasOwnProperty(e)&&(n.trim&&(t[e]=t[e].trim()),n.nativeTypeAttributes&&(t[e]=c(t[e])),"attributeValueFn"in n&&(t[e]=n.attributeValueFn(t[e],e,s)),"attributeNameFn"in n)){var r=t[e];delete t[e],t[n.attributeNameFn(e,t[e],s)]=r;}return t;}function h(t){var e={};if(t.body&&("xml"===t.name.toLowerCase()||n.instructionHasAttributes)){for(var r,i=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;null!==(r=i.exec(t.body));)e[r[1]]=r[2]||r[3]||r[4];e=l(e);}if("xml"===t.name.toLowerCase()){if(n.ignoreDeclaration)return;s[n.declarationKey]={},Object.keys(e).length&&(s[n.declarationKey][n.attributesKey]=e),n.addParent&&(s[n.declarationKey][n.parentKey]=s);}else {if(n.ignoreInstruction)return;n.trim&&(t.body=t.body.trim());var o={};n.instructionHasAttributes&&Object.keys(e).length?(o[t.name]={},o[t.name][n.attributesKey]=e):o[t.name]=t.body,u("instruction",o);}}function p(t,e){var r;if("object"==typeof t&&(e=t.attributes,t=t.name),e=l(e),"elementNameFn"in n&&(t=n.elementNameFn(t,s)),n.compact){var i;if(r={},!n.ignoreAttributes&&e&&Object.keys(e).length)for(i in r[n.attributesKey]={},e)e.hasOwnProperty(i)&&(r[n.attributesKey][i]=e[i]);!(t in s)&&(a(n.alwaysArray)?-1!==n.alwaysArray.indexOf(t):n.alwaysArray)&&(s[t]=[]),s[t]&&!a(s[t])&&(s[t]=[s[t]]),a(s[t])?s[t].push(r):s[t]=r;}else s[n.elementsKey]||(s[n.elementsKey]=[]),(r={})[n.typeKey]="element",r[n.nameKey]=t,!n.ignoreAttributes&&e&&Object.keys(e).length&&(r[n.attributesKey]=e),n.alwaysChildren&&(r[n.elementsKey]=[]),s[n.elementsKey].push(r);r[n.parentKey]=s,s=r;}function d(t){n.ignoreText||(t.trim()||n.captureSpacesBetweenElements)&&(n.trim&&(t=t.trim()),n.nativeType&&(t=c(t)),n.sanitize&&(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),u("text",t));}function f(t){n.ignoreComment||(n.trim&&(t=t.trim()),u("comment",t));}function m(t){var e=s[n.parentKey];n.addParent||delete s[n.parentKey],s=e;}function w(t){n.ignoreCdata||(n.trim&&(t=t.trim()),u("cdata",t));}function g(t){n.ignoreDoctype||(t=t.replace(/^ /,""),n.trim&&(t=t.trim()),u("doctype",t));}function y(t){t.note=t;}t.exports=function(t,e){var r=i.parser(!0,{}),a={};if(s=a,n=function(t){return n=o.copyOptions(t),o.ensureFlagExists("ignoreDeclaration",n),o.ensureFlagExists("ignoreInstruction",n),o.ensureFlagExists("ignoreAttributes",n),o.ensureFlagExists("ignoreText",n),o.ensureFlagExists("ignoreComment",n),o.ensureFlagExists("ignoreCdata",n),o.ensureFlagExists("ignoreDoctype",n),o.ensureFlagExists("compact",n),o.ensureFlagExists("alwaysChildren",n),o.ensureFlagExists("addParent",n),o.ensureFlagExists("trim",n),o.ensureFlagExists("nativeType",n),o.ensureFlagExists("nativeTypeAttributes",n),o.ensureFlagExists("sanitize",n),o.ensureFlagExists("instructionHasAttributes",n),o.ensureFlagExists("captureSpacesBetweenElements",n),o.ensureAlwaysArrayExists(n),o.ensureKeyExists("declaration",n),o.ensureKeyExists("instruction",n),o.ensureKeyExists("attributes",n),o.ensureKeyExists("text",n),o.ensureKeyExists("comment",n),o.ensureKeyExists("cdata",n),o.ensureKeyExists("doctype",n),o.ensureKeyExists("type",n),o.ensureKeyExists("name",n),o.ensureKeyExists("elements",n),o.ensureKeyExists("parent",n),o.checkFnExists("doctype",n),o.checkFnExists("instruction",n),o.checkFnExists("cdata",n),o.checkFnExists("comment",n),o.checkFnExists("text",n),o.checkFnExists("instructionName",n),o.checkFnExists("elementName",n),o.checkFnExists("attributeName",n),o.checkFnExists("attributeValue",n),o.checkFnExists("attributes",n),n;}(e),r.opt={strictEntities:!0},r.onopentag=p,r.ontext=d,r.oncomment=f,r.onclosetag=m,r.onerror=y,r.oncdata=w,r.ondoctype=g,r.onprocessinginstruction=h,r.write(t).close(),a[n.elementsKey]){var c=a[n.elementsKey];delete a[n.elementsKey],a[n.elementsKey]=c,delete a.text;}return a;};},388:(t,e,r)=>{var n=r(740),s=r(229);t.exports=function(t,e){var r,i,o;return r=function(t){var e=n.copyOptions(t);return n.ensureSpacesExists(e),e;}(e),i=s(t,r),o="compact"in r&&r.compact?"_parent":"parent",("addParent"in r&&r.addParent?JSON.stringify(i,function(t,e){return t===o?"_":e;},r.spaces):JSON.stringify(i,null,r.spaces)).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029");};},255:t=>{var e={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};t.exports=function(t){return t&&t.replace?t.replace(/([&"<>'])/g,function(t,r){return e[r];}):t;};},479:(t,e,r)=>{var n=r(155),s=r(255),i=r(830).Stream;function o(t,e,r){r=r||0;var n,i,a=(n=e,new Array(r||0).join(n||"")),c=t;if("object"==typeof t&&(c=t[i=Object.keys(t)[0]])&&c._elem)return c._elem.name=i,c._elem.icount=r,c._elem.indent=e,c._elem.indents=a,c._elem.interrupt=c,c._elem;var u,l=[],h=[];function p(t){Object.keys(t).forEach(function(e){l.push(function(t,e){return t+'="'+s(e)+'"';}(e,t[e]));});}switch(typeof c){case"object":if(null===c)break;c._attr&&p(c._attr),c._cdata&&h.push(("<![CDATA["+c._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),c.forEach&&(u=!1,h.push(""),c.forEach(function(t){"object"==typeof t?"_attr"==Object.keys(t)[0]?p(t._attr):h.push(o(t,e,r+1)):(h.pop(),u=!0,h.push(s(t)));}),u||h.push(""));break;default:h.push(s(c));}return {name:i,interrupt:!1,attributes:l,content:h,icount:r,indents:a,indent:e};}function a(t,e,r){if("object"!=typeof e)return t(!1,e);var n=e.interrupt?1:e.content.length;function s(){for(;e.content.length;){var s=e.content.shift();if(void 0!==s){if(i(s))return;a(t,s);}}t(!1,(n>1?e.indents:"")+(e.name?"</"+e.name+">":"")+(e.indent&&!r?"\n":"")),r&&r();}function i(e){return !!e.interrupt&&(e.interrupt.append=t,e.interrupt.end=s,e.interrupt=!1,t(!0),!0);}if(t(!1,e.indents+(e.name?"<"+e.name:"")+(e.attributes.length?" "+e.attributes.join(" "):"")+(n?e.name?">":"":e.name?"/>":"")+(e.indent&&n>1?"\n":"")),!n)return t(!1,e.indent?"\n":"");i(e)||s();}t.exports=function(t,e){"object"!=typeof e&&(e={indent:e});var r,s,c=e.stream?new i():null,u="",l=!1,h=e.indent?!0===e.indent?"    ":e.indent:"",p=!0;function d(t){p?n.nextTick(t):t();}function f(t,e){if(void 0!==e&&(u+=e),t&&!l&&(c=c||new i(),l=!0),t&&l){var r=u;d(function(){c.emit("data",r);}),u="";}}function m(t,e){a(f,o(t,h,h?1:0),e);}function w(){if(c){var t=u;d(function(){c.emit("data",t),c.emit("end"),c.readable=!1,c.emit("close");});}}return d(function(){p=!1;}),e.declaration&&(s={version:"1.0",encoding:(r=e.declaration).encoding||"UTF-8"},r.standalone&&(s.standalone=r.standalone),m({"?xml":{_attr:s}}),u=u.replace("/>","?>")),t&&t.forEach?t.forEach(function(e,r){var n;r+1===t.length&&(n=w),m(e,n);}):m(t,w),c?(c.readable=!0,c):u;},t.exports.element=t.exports.Element=function(){var t=Array.prototype.slice.call(arguments),e={_elem:o(t),push:function(t){if(!this.append)throw new Error("not assigned to a parent!");var e=this,r=this._elem.indent;a(this.append,o(t,r,this._elem.icount+(r?1:0)),function(){e.append(!0);});},close:function(t){void 0!==t&&this.push(t),this.end&&this.end();}};return e;};},862:()=>{},964:()=>{}},e={};function r(n){var s=e[n];if(void 0!==s)return s.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports;}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]});},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")();}catch(t){if("object"==typeof window)return window;}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0});};var n={};return (()=>{r.r(n),r.d(n,{AbstractNumbering:()=>uo,Alignment:()=>X,AlignmentAttributes:()=>$,AlignmentType:()=>U,Attributes:()=>a,BaseEmphasisMark:()=>dt,BaseXmlComponent:()=>t,Body:()=>xn,Bookmark:()=>Kr,BookmarkEnd:()=>Wr,BookmarkStart:()=>Gr,Border:()=>Y,BorderElement:()=>q,BorderStyle:()=>z,Column:()=>Tn,ColumnAttributes:()=>En,ColumnBreak:()=>Tr,Columns:()=>en,ColumnsAttributes:()=>tn,ConcreteHyperlink:()=>Mr,ConcreteNumbering:()=>po,DeletedTextRun:()=>ba,DocGridAttributes:()=>rn,Document:()=>Yo,DocumentAttributes:()=>An,DocumentBackground:()=>Rn,DocumentBackgroundAttributes:()=>Sn,DocumentDefaults:()=>Xo,DocumentGrid:()=>nn,DocumentGridType:()=>ee,DotEmphasisMark:()=>mt,Drawing:()=>dr,DropCapType:()=>kn,EMPTY_OBJECT:()=>e,EmphasisMark:()=>ft,EmphasisMarkType:()=>G,ExternalHyperlink:()=>zr,File:()=>Yo,FootNoteReferenceRunAttributes:()=>ua,FootNotes:()=>Gi,Footer:()=>ca,FooterWrapper:()=>Li,FootnoteReference:()=>la,FootnoteReferenceRun:()=>ha,FrameAnchorType:()=>Dn,FrameProperties:()=>Fn,FramePropertiesAttributes:()=>Pn,FrameWrap:()=>Ln,GridSpan:()=>js,Header:()=>aa,HeaderFooterReference:()=>Jr,HeaderFooterReferenceType:()=>Jt,HeaderFooterType:()=>te,HeaderWrapper:()=>Xi,HeadingLevel:()=>Vt,HeightRule:()=>ii,HorizontalPosition:()=>me,HorizontalPositionAlign:()=>_a,HorizontalPositionRelativeFrom:()=>zt,HpsMeasureElement:()=>P,HyperlinkType:()=>Yt,IgnoreIfEmptyXmlComponent:()=>i,ImageRun:()=>fr,ImportDotx:()=>La,ImportedRootElementAttributes:()=>p,ImportedXmlComponent:()=>h,Indent:()=>tt,InitializableXmlComponent:()=>f,InsertedTextRun:()=>pa,InternalHyperlink:()=>Ur,LeaderType:()=>Xt,Level:()=>io,LevelBase:()=>so,LevelForOverride:()=>oo,LevelFormat:()=>Yi,LevelOverride:()=>mo,LevelSuffix:()=>Qi,LineNumberAttributes:()=>sn,LineNumberRestartFormat:()=>re,LineNumberType:()=>on,LineRuleType:()=>Wt,Math:()=>Un,MathAccentCharacter:()=>Vn,MathAngledBrackets:()=>Ns,MathBase:()=>$n,MathCurlyBrackets:()=>Is,MathDegree:()=>ds,MathDenominator:()=>jn,MathFraction:()=>Gn,MathFunction:()=>vs,MathFunctionName:()=>ys,MathFunctionProperties:()=>bs,MathLimitLocation:()=>qn,MathNArayProperties:()=>ts,MathNumerator:()=>Kn,MathPreSubSuperScript:()=>hs,MathPreSubSuperScriptProperties:()=>ls,MathRadical:()=>gs,MathRadicalProperties:()=>ws,MathRoundBrackets:()=>Ss,MathRun:()=>Hn,MathSquareBrackets:()=>Rs,MathSubScript:()=>as,MathSubScriptElement:()=>es,MathSubScriptProperties:()=>os,MathSubSuperScript:()=>us,MathSubSuperScriptProperties:()=>cs,MathSum:()=>ns,MathSuperScript:()=>is,MathSuperScriptElement:()=>rs,MathSuperScriptProperties:()=>ss,Media:()=>qi,NumberFormat:()=>Ea,NumberProperties:()=>kr,NumberValueElement:()=>B,Numbering:()=>yo,OnOffElement:()=>L,OutlineLevel:()=>Vr,OverlapType:()=>Qs,Packer:()=>Oa,PageBorderDisplay:()=>ne,PageBorderOffsetFrom:()=>se,PageBorderZOrder:()=>ie,PageBorders:()=>cn,PageBreak:()=>Er,PageBreakBefore:()=>Ar,PageMargin:()=>ln,PageMarginAttributes:()=>un,PageNumber:()=>V,PageNumberSeparator:()=>oe,PageNumberType:()=>pn,PageNumberTypeAttributes:()=>hn,PageOrientation:()=>ae,PageReference:()=>qr,PageSize:()=>fn,PageSizeAttributes:()=>dn,PageTextDirection:()=>wn,PageTextDirectionType:()=>ce,Paragraph:()=>Mn,ParagraphProperties:()=>Bn,ParagraphPropertiesDefaults:()=>Vo,RelativeHorizontalPosition:()=>ri,RelativeVerticalPosition:()=>ni,Run:()=>Ot,RunFonts:()=>_t,RunProperties:()=>St,RunPropertiesChange:()=>Rt,RunPropertiesDefaults:()=>$o,SectionProperties:()=>_n,SectionType:()=>ue,SectionTypeAttributes:()=>gn,SequentialIdentifier:()=>gr,Shading:()=>pt,ShadingType:()=>K,SimpleField:()=>vr,SimpleMailMergeField:()=>_r,SimplePos:()=>he,Spacing:()=>Rr,StringContainer:()=>M,StringValueElement:()=>F,Style:()=>Ir,StyleForCharacter:()=>Oo,StyleForParagraph:()=>No,StyleLevel:()=>oa,Styles:()=>Wo,SymbolRun:()=>Lt,TDirection:()=>Vs,Tab:()=>yr,TabAttributes:()=>Or,TabStop:()=>Nr,TabStopItem:()=>Cr,TabStopPosition:()=>qt,TabStopType:()=>$t,Table:()=>pi,TableAnchorType:()=>ei,TableBorders:()=>Ys,TableCell:()=>Xs,TableCellBorders:()=>zs,TableFloatOptionsAttributes:()=>ai,TableFloatProperties:()=>ci,TableLayout:()=>li,TableLayoutType:()=>si,TableOfContents:()=>ia,TableOverlap:()=>ti,TableProperties:()=>hi,TableRow:()=>wi,TableRowHeight:()=>fi,TableRowHeightAttributes:()=>di,TableRowProperties:()=>mi,TableWidthElement:()=>Ms,TextDirection:()=>Fs,TextRun:()=>Ct,TextWrappingSide:()=>Kt,TextWrappingType:()=>jt,ThematicBreak:()=>Q,Type:()=>yn,Underline:()=>At,UnderlineType:()=>W,VerticalAlign:()=>Qt,VerticalAlignAttributes:()=>Zr,VerticalAlignElement:()=>Yr,VerticalMerge:()=>Gs,VerticalMergeType:()=>Ps,VerticalPosition:()=>ge,VerticalPositionAlign:()=>xa,VerticalPositionRelativeFrom:()=>Ht,WORKAROUND:()=>Qo,WORKAROUND2:()=>Zi,WORKAROUND3:()=>d,WORKAROUND4:()=>ps,WidthType:()=>Ds,WrapNone:()=>$e,WrapSquare:()=>qe,WrapTight:()=>Ye,WrapTopAndBottom:()=>Je,XmlAttributeComponent:()=>o,XmlComponent:()=>s,convertInchesToTwip:()=>Bt,convertMillimetersToTwip:()=>Ft,convertToXmlComponent:()=>u,dateTimeValue:()=>D,decimalNumber:()=>m,eighthPointMeasureValue:()=>C,hexColorValue:()=>T,hpsMeasureValue:()=>S,longHexNumber:()=>y,measurementOrPercentValue:()=>O,percentageValue:()=>N,pointMeasureValue:()=>k,positiveUniversalMeasureValue:()=>E,sectionMarginDefaults:()=>bn,sectionPageSizeDefaults:()=>vn,shortHexNumber:()=>b,signedHpsMeasureValue:()=>R,signedTwipsMeasureValue:()=>A,twipsMeasureValue:()=>I,uCharHexNumber:()=>v,uniqueId:()=>Ut,uniqueNumericId:()=>Mt,universalMeasureValue:()=>_,unsignedDecimalNumber:()=>w});class t{constructor(t){this.rootKey=t;}}const e=Object.seal({});class s extends t{constructor(t){super(t),this.root=new Array();}prepForXml(r){var n;const s=this.root.map(e=>e instanceof t?e.prepForXml(r):e).filter(t=>void 0!==t);return {[this.rootKey]:s.length?1===s.length&&(null===(n=s[0])||void 0===n?void 0:n._attr)?s[0]:s:e};}addChildElement(t){return this.root.push(t),this;}}class i extends s{prepForXml(t){const e=super.prepForXml(t);if(e&&("object"!=typeof e[this.rootKey]||Object.keys(e[this.rootKey]).length))return e;}}class o extends t{constructor(t){super("_attr"),this.root=t;}prepForXml(t){const e={};return Object.keys(this.root).forEach(t=>{const r=this.root[t];if(void 0!==r){const n=this.xmlKeys&&this.xmlKeys[t]||t;e[n]=r;}}),{_attr:e};}set(t){this.root=t;}}class a extends o{constructor(){super(...arguments),this.xmlKeys={val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"};}}var c=r(888);function u(t){switch(t.type){case void 0:case"element":const e=new h(t.name,t.attributes),r=t.elements||[];for(const t of r){const r=u(t);void 0!==r&&e.push(r);}return e;case"text":return t.text;default:return;}}class l extends o{}class h extends s{static fromXmlString(t){return u((0, c.xml2js)(t,{compact:!1}));}constructor(t,e){super(t),e&&this.root.push(new l(e));}push(t){this.root.push(t);}}class p extends s{constructor(t){super(""),this._attr=t;}prepForXml(t){return {_attr:this._attr};}}const d="";class f extends s{constructor(t,e){super(t),e&&(this.root=e.root);}}function m(t){if(isNaN(t))throw new Error("Invalid value '".concat(t,"' specified. Must be an integer."));return Math.floor(t);}function w(t){const e=m(t);if(e<0)throw new Error("Invalid value '".concat(t,"' specified. Must be a positive integer."));return e;}function g(t,e){const r=2*e;if(t.length!==r||isNaN(Number("0x"+t)))throw new Error("Invalid hex value '".concat(t,"'. Expected ").concat(r," digit hex value"));return t;}function y(t){return g(t,4);}function b(t){return g(t,2);}function v(t){return g(t,1);}function _(t){const e=t.slice(-2);if(!x.includes(e))throw new Error("Invalid unit '".concat(e,"' specified. Valid units are ").concat(x.join(", ")));const r=t.substring(0,t.length-2);if(isNaN(Number(r)))throw new Error("Invalid value '".concat(r,"' specified. Expected a valid number."));return "".concat(Number(r)).concat(e);}const x=["mm","cm","in","pt","pc","pi"];function E(t){const e=_(t);if(parseFloat(e)<0)throw new Error("Invalid value '".concat(e,"' specified. Expected a positive number."));return e;}function T(t){return "auto"===t?t:g("#"===t.charAt(0)?t.substring(1):t,3);}function A(t){return "string"==typeof t?_(t):m(t);}function S(t){return "string"==typeof t?E(t):w(t);}function R(t){return "string"==typeof t?_(t):m(t);}function I(t){return "string"==typeof t?E(t):w(t);}function N(t){if("%"!==t.slice(-1))throw new Error("Invalid value '".concat(t,"'. Expected percentage value (eg '55%')"));const e=t.substring(0,t.length-1);if(isNaN(Number(e)))throw new Error("Invalid value '".concat(e,"' specified. Expected a valid number."));return "".concat(Number(e),"%");}function O(t){return "number"==typeof t?m(t):"%"===t.slice(-1)?N(t):_(t);}const C=w,k=w;function D(t){return t.toISOString();}class L extends s{constructor(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;super(t),!0!==e&&this.root.push(new a({val:e}));}}class P extends s{constructor(t,e){super(t),this.root.push(new a({val:S(e)}));}}class F extends s{constructor(t,e){super(t),this.root.push(new a({val:e}));}}class B extends s{constructor(t,e){super(t),this.root.push(new a({val:e}));}}class M extends s{constructor(t,e){super(t),this.root.push(e);}}var U,z,H,j,K,G,W,V;!function(t){t.START="start",t.END="end",t.CENTER="center",t.BOTH="both",t.JUSTIFIED="both",t.DISTRIBUTE="distribute",t.LEFT="left",t.RIGHT="right";}(U||(U={}));class $ extends o{constructor(){super(...arguments),this.xmlKeys={val:"w:val"};}}class X extends s{constructor(t){super("w:jc"),this.root.push(new $({val:t}));}}class q extends s{constructor(t,_ref){let{color:e,size:r,space:n,style:s}=_ref;super(t),this.root.push(new Z({style:s,color:void 0===e?void 0:T(e),size:void 0===r?void 0:C(r),space:void 0===n?void 0:k(n)}));}}class Z extends o{constructor(){super(...arguments),this.xmlKeys={style:"w:val",color:"w:color",size:"w:sz",space:"w:space"};}}!function(t){t.SINGLE="single",t.DASH_DOT_STROKED="dashDotStroked",t.DASHED="dashed",t.DASH_SMALL_GAP="dashSmallGap",t.DOT_DASH="dotDash",t.DOT_DOT_DASH="dotDotDash",t.DOTTED="dotted",t.DOUBLE="double",t.DOUBLE_WAVE="doubleWave",t.INSET="inset",t.NIL="nil",t.NONE="none",t.OUTSET="outset",t.THICK="thick",t.THICK_THIN_LARGE_GAP="thickThinLargeGap",t.THICK_THIN_MEDIUM_GAP="thickThinMediumGap",t.THICK_THIN_SMALL_GAP="thickThinSmallGap",t.THIN_THICK_LARGE_GAP="thinThickLargeGap",t.THIN_THICK_MEDIUM_GAP="thinThickMediumGap",t.THIN_THICK_SMALL_GAP="thinThickSmallGap",t.THIN_THICK_THIN_LARGE_GAP="thinThickThinLargeGap",t.THIN_THICK_THIN_MEDIUM_GAP="thinThickThinMediumGap",t.THIN_THICK_THIN_SMALL_GAP="thinThickThinSmallGap",t.THREE_D_EMBOSS="threeDEmboss",t.THREE_D_ENGRAVE="threeDEngrave",t.TRIPLE="triple",t.WAVE="wave";}(z||(z={}));class Y extends i{constructor(t){super("w:pBdr"),t.top&&this.root.push(new q("w:top",t.top)),t.bottom&&this.root.push(new q("w:bottom",t.bottom)),t.left&&this.root.push(new q("w:left",t.left)),t.right&&this.root.push(new q("w:right",t.right));}}class Q extends s{constructor(){super("w:pBdr");const t=new q("w:bottom",{color:"auto",space:1,style:z.SINGLE,size:6});this.root.push(t);}}class J extends o{constructor(){super(...arguments),this.xmlKeys={start:"w:start",end:"w:end",left:"w:left",right:"w:right",hanging:"w:hanging",firstLine:"w:firstLine"};}}class tt extends s{constructor(_ref2){let{start:t,end:e,left:r,right:n,hanging:s,firstLine:i}=_ref2;super("w:ind"),this.root.push(new J({start:void 0===t?void 0:A(t),end:void 0===e?void 0:A(e),left:void 0===r?void 0:A(r),right:void 0===n?void 0:A(n),hanging:void 0===s?void 0:I(s),firstLine:void 0===i?void 0:I(i)}));}}class et extends s{constructor(){super("w:br");}}!function(t){t.BEGIN="begin",t.END="end",t.SEPARATE="separate";}(H||(H={}));class rt extends o{constructor(){super(...arguments),this.xmlKeys={type:"w:fldCharType",dirty:"w:dirty"};}}class nt extends s{constructor(t){super("w:fldChar"),this.root.push(new rt({type:H.BEGIN,dirty:t}));}}class st extends s{constructor(t){super("w:fldChar"),this.root.push(new rt({type:H.SEPARATE,dirty:t}));}}class it extends s{constructor(t){super("w:fldChar"),this.root.push(new rt({type:H.END,dirty:t}));}}!function(t){t.DEFAULT="default",t.PRESERVE="preserve";}(j||(j={}));class ot extends o{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"};}}class at extends s{constructor(){super("w:instrText"),this.root.push(new ot({space:j.PRESERVE})),this.root.push("PAGE");}}class ct extends s{constructor(){super("w:instrText"),this.root.push(new ot({space:j.PRESERVE})),this.root.push("NUMPAGES");}}class ut extends s{constructor(){super("w:instrText"),this.root.push(new ot({space:j.PRESERVE})),this.root.push("SECTIONPAGES");}}class lt extends o{constructor(){super(...arguments),this.xmlKeys={id:"w:id",author:"w:author",date:"w:date"};}}class ht extends o{constructor(){super(...arguments),this.xmlKeys={fill:"w:fill",color:"w:color",type:"w:val"};}}class pt extends s{constructor(_ref3){let{fill:t,color:e,type:r}=_ref3;super("w:shd"),this.root.push(new ht({fill:void 0===t?void 0:T(t),color:void 0===e?void 0:T(e),type:r}));}}!function(t){t.CLEAR="clear",t.DIAGONAL_CROSS="diagCross",t.DIAGONAL_STRIPE="diagStripe",t.HORIZONTAL_CROSS="horzCross",t.HORIZONTAL_STRIPE="horzStripe",t.NIL="nil",t.PERCENT_5="pct5",t.PERCENT_10="pct10",t.PERCENT_12="pct12",t.PERCENT_15="pct15",t.PERCENT_20="pct20",t.PERCENT_25="pct25",t.PERCENT_30="pct30",t.PERCENT_35="pct35",t.PERCENT_37="pct37",t.PERCENT_40="pct40",t.PERCENT_45="pct45",t.PERCENT_50="pct50",t.PERCENT_55="pct55",t.PERCENT_60="pct60",t.PERCENT_62="pct62",t.PERCENT_65="pct65",t.PERCENT_70="pct70",t.PERCENT_75="pct75",t.PERCENT_80="pct80",t.PERCENT_85="pct85",t.PERCENT_87="pct87",t.PERCENT_90="pct90",t.PERCENT_95="pct95",t.REVERSE_DIAGONAL_STRIPE="reverseDiagStripe",t.SOLID="solid",t.THIN_DIAGONAL_CROSS="thinDiagCross",t.THIN_DIAGONAL_STRIPE="thinDiagStripe",t.THIN_HORIZONTAL_CROSS="thinHorzCross",t.THIN_REVERSE_DIAGONAL_STRIPE="thinReverseDiagStripe",t.THIN_VERTICAL_STRIPE="thinVertStripe",t.VERTICAL_STRIPE="vertStripe";}(K||(K={})),function(t){t.DOT="dot";}(G||(G={}));class dt extends s{constructor(t){super("w:em"),this.root.push(new a({val:t}));}}class ft extends dt{constructor(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:G.DOT;super(t);}}class mt extends dt{constructor(){super(G.DOT);}}class wt extends s{constructor(t){super("w:spacing"),this.root.push(new a({val:A(t)}));}}class gt extends s{constructor(t){super("w:color"),this.root.push(new a({val:T(t)}));}}class yt extends s{constructor(t){super("w:highlight"),this.root.push(new a({val:t}));}}class bt extends s{constructor(t){super("w:highlightCs"),this.root.push(new a({val:t}));}}class vt extends o{constructor(){super(...arguments),this.xmlKeys={ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"};}}class _t extends s{constructor(t,e){if(super("w:rFonts"),"string"==typeof t){const r=t;this.root.push(new vt({ascii:r,cs:r,eastAsia:r,hAnsi:r,hint:e}));}else {const e=t;this.root.push(new vt(e));}}}class xt extends s{constructor(t){super("w:vertAlign"),this.root.push(new a({val:t}));}}class Et extends xt{constructor(){super("superscript");}}class Tt extends xt{constructor(){super("subscript");}}!function(t){t.SINGLE="single",t.WORDS="words",t.DOUBLE="double",t.THICK="thick",t.DOTTED="dotted",t.DOTTEDHEAVY="dottedHeavy",t.DASH="dash",t.DASHEDHEAVY="dashedHeavy",t.DASHLONG="dashLong",t.DASHLONGHEAVY="dashLongHeavy",t.DOTDASH="dotDash",t.DASHDOTHEAVY="dashDotHeavy",t.DOTDOTDASH="dotDotDash",t.DASHDOTDOTHEAVY="dashDotDotHeavy",t.WAVE="wave",t.WAVYHEAVY="wavyHeavy",t.WAVYDOUBLE="wavyDouble";}(W||(W={}));class At extends s{constructor(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:W.SINGLE;let e=arguments.length>1?arguments[1]:undefined;super("w:u"),this.root.push(new a({val:t,color:void 0===e?void 0:T(e)}));}}class St extends i{constructor(t){var e,r;if(super("w:rPr"),!t)return;void 0!==t.bold&&this.push(new L("w:b",t.bold)),(void 0===t.boldComplexScript&&void 0!==t.bold||t.boldComplexScript)&&this.push(new L("w:bCs",null!==(e=t.boldComplexScript)&&void 0!==e?e:t.bold)),void 0!==t.italics&&this.push(new L("w:i",t.italics)),(void 0===t.italicsComplexScript&&void 0!==t.italics||t.italicsComplexScript)&&this.push(new L("w:iCs",null!==(r=t.italicsComplexScript)&&void 0!==r?r:t.italics)),t.underline&&this.push(new At(t.underline.type,t.underline.color)),t.emphasisMark&&this.push(new ft(t.emphasisMark.type)),t.color&&this.push(new gt(t.color)),void 0!==t.size&&this.push(new P("w:sz",t.size));const n=void 0===t.sizeComplexScript||!0===t.sizeComplexScript?t.size:t.sizeComplexScript;n&&this.push(new P("w:szCs",n)),void 0!==t.rightToLeft&&this.push(new L("w:rtl",t.rightToLeft)),void 0!==t.smallCaps?this.push(new L("w:smallCaps",t.smallCaps)):void 0!==t.allCaps&&this.push(new L("w:caps",t.allCaps)),void 0!==t.strike&&this.push(new L("w:strike",t.strike)),void 0!==t.doubleStrike&&this.push(new L("w:dstrike",t.doubleStrike)),t.subScript&&this.push(new Tt()),t.superScript&&this.push(new Et()),t.style&&this.push(new F("w:rStyle",t.style)),t.font&&("string"==typeof t.font?this.push(new _t(t.font)):"name"in t.font?this.push(new _t(t.font.name,t.font.hint)):this.push(new _t(t.font))),t.highlight&&this.push(new yt(t.highlight));const s=void 0===t.highlightComplexScript||!0===t.highlightComplexScript?t.highlight:t.highlightComplexScript;s&&this.push(new bt(s)),t.characterSpacing&&this.push(new wt(t.characterSpacing)),void 0!==t.emboss&&this.push(new L("w:emboss",t.emboss)),void 0!==t.imprint&&this.push(new L("w:imprint",t.imprint)),t.shading&&this.push(new pt(t.shading)),t.revision&&this.push(new Rt(t.revision));}push(t){this.root.push(t);}}class Rt extends s{constructor(t){super("w:rPrChange"),this.root.push(new lt({id:t.id,author:t.author,date:t.date})),this.addChildElement(new St(t));}}class It extends o{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"};}}class Nt extends s{constructor(t){super("w:t"),this.root.push(new It({space:j.PRESERVE})),this.root.push(t);}}!function(t){t.CURRENT="CURRENT",t.TOTAL_PAGES="TOTAL_PAGES",t.TOTAL_PAGES_IN_SECTION="TOTAL_PAGES_IN_SECTION";}(V||(V={}));class Ot extends s{constructor(t){if(super("w:r"),this.properties=new St(t),this.root.push(this.properties),t.break)for(let e=0;e<t.break;e++)this.root.push(new et());if(t.children){for(const e of t.children)if("string"!=typeof e)this.root.push(e);else switch(e){case V.CURRENT:this.root.push(new nt()),this.root.push(new at()),this.root.push(new st()),this.root.push(new it());break;case V.TOTAL_PAGES:this.root.push(new nt()),this.root.push(new ct()),this.root.push(new st()),this.root.push(new it());break;case V.TOTAL_PAGES_IN_SECTION:this.root.push(new nt()),this.root.push(new ut()),this.root.push(new st()),this.root.push(new it());break;default:this.root.push(new Nt(e));}}else t.text&&this.root.push(new Nt(t.text));}}class Ct extends Ot{constructor(t){if("string"==typeof t)return super({}),this.root.push(new Nt(t)),this;super(t);}}class kt extends o{constructor(){super(...arguments),this.xmlKeys={char:"w:char",symbolfont:"w:font"};}}class Dt extends s{constructor(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"Wingdings";super("w:sym"),this.root.push(new kt({char:t,symbolfont:e}));}}class Lt extends Ot{constructor(t){if("string"==typeof t)return super({}),void this.root.push(new Dt(t));super(t),this.root.push(new Dt(t.char,t.symbolfont));}}let Pt=0;const Ft=t=>Math.floor(t/25.4*72*20),Bt=t=>Math.floor(72*t*20),Mt=()=>++Pt,Ut=()=>function(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:21;let e="",r=t;for(;r--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e;}().toLowerCase();var zt,Ht,jt,Kt,Gt,Wt,Vt,$t,Xt,qt,Zt,Yt,Qt,Jt,te,ee,re,ne,se,ie,oe,ae,ce,ue;!function(t){t.CHARACTER="character",t.COLUMN="column",t.INSIDE_MARGIN="insideMargin",t.LEFT_MARGIN="leftMargin",t.MARGIN="margin",t.OUTSIDE_MARGIN="outsideMargin",t.PAGE="page",t.RIGHT_MARGIN="rightMargin";}(zt||(zt={})),function(t){t.BOTTOM_MARGIN="bottomMargin",t.INSIDE_MARGIN="insideMargin",t.LINE="line",t.MARGIN="margin",t.OUTSIDE_MARGIN="outsideMargin",t.PAGE="page",t.PARAGRAPH="paragraph",t.TOP_MARGIN="topMargin";}(Ht||(Ht={}));class le extends o{constructor(){super(...arguments),this.xmlKeys={x:"x",y:"y"};}}class he extends s{constructor(){super("wp:simplePos"),this.root.push(new le({x:0,y:0}));}}class pe extends s{constructor(t){super("wp:align"),this.root.push(t);}}class de extends s{constructor(t){super("wp:posOffset"),this.root.push(t.toString());}}class fe extends o{constructor(){super(...arguments),this.xmlKeys={relativeFrom:"relativeFrom"};}}class me extends s{constructor(t){if(super("wp:positionH"),this.root.push(new fe({relativeFrom:t.relative||zt.PAGE})),t.align)this.root.push(new pe(t.align));else {if(void 0===t.offset)throw new Error("There is no configuration provided for floating position (Align or offset)");this.root.push(new de(t.offset));}}}class we extends o{constructor(){super(...arguments),this.xmlKeys={relativeFrom:"relativeFrom"};}}class ge extends s{constructor(t){if(super("wp:positionV"),this.root.push(new we({relativeFrom:t.relative||Ht.PAGE})),t.align)this.root.push(new pe(t.align));else {if(void 0===t.offset)throw new Error("There is no configuration provided for floating position (Align or offset)");this.root.push(new de(t.offset));}}}class ye extends o{constructor(){super(...arguments),this.xmlKeys={uri:"uri"};}}class be extends o{constructor(){super(...arguments),this.xmlKeys={embed:"r:embed",cstate:"cstate"};}}class ve extends s{constructor(t){super("a:blip"),this.root.push(new be({embed:"rId{".concat(t.fileName,"}"),cstate:"none"}));}}class _e extends s{constructor(){super("a:srcRect");}}class xe extends s{constructor(){super("a:fillRect");}}class Ee extends s{constructor(){super("a:stretch"),this.root.push(new xe());}}class Te extends s{constructor(t){super("pic:blipFill"),this.root.push(new ve(t)),this.root.push(new _e()),this.root.push(new Ee());}}class Ae extends o{constructor(){super(...arguments),this.xmlKeys={noChangeAspect:"noChangeAspect",noChangeArrowheads:"noChangeArrowheads"};}}class Se extends s{constructor(){super("a:picLocks"),this.root.push(new Ae({noChangeAspect:1,noChangeArrowheads:1}));}}class Re extends s{constructor(){super("pic:cNvPicPr"),this.root.push(new Se());}}class Ie extends o{constructor(){super(...arguments),this.xmlKeys={id:"id",name:"name",descr:"descr"};}}class Ne extends s{constructor(){super("pic:cNvPr"),this.root.push(new Ie({id:0,name:"",descr:""}));}}class Oe extends s{constructor(){super("pic:nvPicPr"),this.root.push(new Ne()),this.root.push(new Re());}}class Ce extends o{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns:pic"};}}class ke extends o{constructor(){super(...arguments),this.xmlKeys={cx:"cx",cy:"cy"};}}class De extends s{constructor(t,e){super("a:ext"),this.attributes=new ke({cx:t,cy:e}),this.root.push(this.attributes);}}class Le extends o{constructor(){super(...arguments),this.xmlKeys={x:"x",y:"y"};}}class Pe extends s{constructor(){super("a:off"),this.root.push(new Le({x:0,y:0}));}}class Fe extends o{constructor(){super(...arguments),this.xmlKeys={flipVertical:"flipV",flipHorizontal:"flipH",rotation:"rot"};}}class Be extends s{constructor(t){var e,r;super("a:xfrm"),this.root.push(new Fe({flipVertical:null===(e=t.flip)||void 0===e?void 0:e.vertical,flipHorizontal:null===(r=t.flip)||void 0===r?void 0:r.horizontal,rotation:t.rotation})),this.extents=new De(t.emus.x,t.emus.y),this.root.push(new Pe()),this.root.push(this.extents);}}class Me extends s{constructor(){super("a:avLst");}}class Ue extends o{constructor(){super(...arguments),this.xmlKeys={prst:"prst"};}}class ze extends s{constructor(){super("a:prstGeom"),this.root.push(new Ue({prst:"rect"})),this.root.push(new Me());}}class He extends o{constructor(){super(...arguments),this.xmlKeys={bwMode:"bwMode"};}}class je extends s{constructor(t){super("pic:spPr"),this.root.push(new He({bwMode:"auto"})),this.form=new Be(t),this.root.push(this.form),this.root.push(new ze());}}class Ke extends s{constructor(t,e){super("pic:pic"),this.root.push(new Ce({xmlns:"http://schemas.openxmlformats.org/drawingml/2006/picture"})),this.root.push(new Oe()),this.root.push(new Te(t)),this.root.push(new je(e));}}class Ge extends s{constructor(t,e){super("a:graphicData"),this.root.push(new ye({uri:"http://schemas.openxmlformats.org/drawingml/2006/picture"})),this.pic=new Ke(t,e),this.root.push(this.pic);}}class We extends o{constructor(){super(...arguments),this.xmlKeys={a:"xmlns:a"};}}class Ve extends s{constructor(t,e){super("a:graphic"),this.root.push(new We({a:"http://schemas.openxmlformats.org/drawingml/2006/main"})),this.data=new Ge(t,e),this.root.push(this.data);}}!function(t){t[t.NONE=0]="NONE",t[t.SQUARE=1]="SQUARE",t[t.TIGHT=2]="TIGHT",t[t.TOP_AND_BOTTOM=3]="TOP_AND_BOTTOM";}(jt||(jt={})),function(t){t.BOTH_SIDES="bothSides",t.LEFT="left",t.RIGHT="right",t.LARGEST="largest";}(Kt||(Kt={}));class $e extends s{constructor(){super("wp:wrapNone");}}class Xe extends o{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB",distL:"distL",distR:"distR",wrapText:"wrapText"};}}class qe extends s{constructor(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{top:0,bottom:0,left:0,right:0};super("wp:wrapSquare"),this.root.push(new Xe({wrapText:t.side||Kt.BOTH_SIDES,distT:e.top,distB:e.bottom,distL:e.left,distR:e.right}));}}class Ze extends o{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB"};}}class Ye extends s{constructor(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{top:0,bottom:0};super("wp:wrapTight"),this.root.push(new Ze({distT:t.top,distB:t.bottom}));}}class Qe extends o{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB"};}}class Je extends s{constructor(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{top:0,bottom:0};super("wp:wrapTopAndBottom"),this.root.push(new Qe({distT:t.top,distB:t.bottom}));}}class tr extends o{constructor(){super(...arguments),this.xmlKeys={id:"id",name:"name",descr:"descr"};}}class er extends s{constructor(){super("wp:docPr"),this.root.push(new tr({id:0,name:"",descr:""}));}}class rr extends o{constructor(){super(...arguments),this.xmlKeys={b:"b",l:"l",r:"r",t:"t"};}}class nr extends s{constructor(){super("wp:effectExtent"),this.root.push(new rr({b:0,l:0,r:0,t:0}));}}class sr extends o{constructor(){super(...arguments),this.xmlKeys={cx:"cx",cy:"cy"};}}class ir extends s{constructor(t,e){super("wp:extent"),this.attributes=new sr({cx:t,cy:e}),this.root.push(this.attributes);}}class or extends o{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns:a",noChangeAspect:"noChangeAspect"};}}class ar extends s{constructor(){super("a:graphicFrameLocks"),this.root.push(new or({xmlns:"http://schemas.openxmlformats.org/drawingml/2006/main",noChangeAspect:1}));}}class cr extends s{constructor(){super("wp:cNvGraphicFramePr"),this.root.push(new ar());}}class ur extends o{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB",distL:"distL",distR:"distR",allowOverlap:"allowOverlap",behindDoc:"behindDoc",layoutInCell:"layoutInCell",locked:"locked",relativeHeight:"relativeHeight",simplePos:"simplePos"};}}class lr extends s{constructor(t,e,r){super("wp:anchor");const n=Object.assign({allowOverlap:!0,behindDocument:!1,lockAnchor:!1,layoutInCell:!0,verticalPosition:{},horizontalPosition:{}},r.floating);if(this.root.push(new ur({distT:n.margins&&n.margins.top||0,distB:n.margins&&n.margins.bottom||0,distL:n.margins&&n.margins.left||0,distR:n.margins&&n.margins.right||0,simplePos:"0",allowOverlap:!0===n.allowOverlap?"1":"0",behindDoc:!0===n.behindDocument?"1":"0",locked:!0===n.lockAnchor?"1":"0",layoutInCell:!0===n.layoutInCell?"1":"0",relativeHeight:n.zIndex?n.zIndex:e.emus.y})),this.root.push(new he()),this.root.push(new me(n.horizontalPosition)),this.root.push(new ge(n.verticalPosition)),this.root.push(new ir(e.emus.x,e.emus.y)),this.root.push(new nr()),void 0!==r.floating&&void 0!==r.floating.wrap)switch(r.floating.wrap.type){case jt.SQUARE:this.root.push(new qe(r.floating.wrap,r.floating.margins));break;case jt.TIGHT:this.root.push(new Ye(r.floating.margins));break;case jt.TOP_AND_BOTTOM:this.root.push(new Je(r.floating.margins));break;case jt.NONE:default:this.root.push(new $e());}else this.root.push(new $e());this.root.push(new er()),this.root.push(new cr()),this.root.push(new Ve(t,e));}}class hr extends o{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB",distL:"distL",distR:"distR"};}}class pr extends s{constructor(t,e){super("wp:inline"),this.root.push(new hr({distT:0,distB:0,distL:0,distR:0})),this.extent=new ir(e.emus.x,e.emus.y),this.graphic=new Ve(t,e),this.root.push(this.extent),this.root.push(new nr()),this.root.push(new er()),this.root.push(new cr()),this.root.push(this.graphic);}}class dr extends s{constructor(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};super("w:drawing"),e.floating?this.root.push(new lr(t,t.transformation,e)):(this.inline=new pr(t,t.transformation),this.root.push(this.inline));}}class fr extends Ot{constructor(t){super({}),this.key="".concat(Ut(),".png");const e="string"==typeof t.data?this.convertDataURIToBinary(t.data):t.data;this.imageData={stream:e,fileName:this.key,transformation:{pixels:{x:Math.round(t.transformation.width),y:Math.round(t.transformation.height)},emus:{x:Math.round(9525*t.transformation.width),y:Math.round(9525*t.transformation.height)},flip:t.transformation.flip,rotation:t.transformation.rotation?6e4*t.transformation.rotation:void 0}};const r=new dr(this.imageData,{floating:t.floating});this.root.push(r);}prepForXml(t){return t.file.Media.addImage(this.key,this.imageData),super.prepForXml(t);}convertDataURIToBinary(t){const e=";base64,",n=t.indexOf(e)+e.length;return "function"==typeof atob?new Uint8Array(atob(t.substring(n)).split("").map(t=>t.charCodeAt(0))):new(r(764).Buffer)(t,"base64");}}class mr extends o{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"};}}class wr extends s{constructor(t){super("w:instrText"),this.root.push(new mr({space:j.PRESERVE})),this.root.push("SEQ ".concat(t));}}class gr extends Ot{constructor(t){super({}),this.root.push(new nt(!0)),this.root.push(new wr(t)),this.root.push(new st()),this.root.push(new it());}}class yr extends s{constructor(){super("w:tab");}}class br extends o{constructor(){super(...arguments),this.xmlKeys={instr:"w:instr"};}}class vr extends s{constructor(t,e){super("w:fldSimple"),this.root.push(new br({instr:t})),void 0!==e&&this.root.push(new Ct(e));}}class _r extends vr{constructor(t){super(" MERGEFIELD ".concat(t," "),"\xAB".concat(t,"\xBB"));}}!function(t){t.COLUMN="column",t.PAGE="page";}(Gt||(Gt={}));class xr extends s{constructor(t){super("w:br"),this.root.push(new a({type:t}));}}class Er extends Ot{constructor(){super({}),this.root.push(new xr(Gt.PAGE));}}class Tr extends Ot{constructor(){super({}),this.root.push(new xr(Gt.COLUMN));}}class Ar extends s{constructor(){super("w:pageBreakBefore");}}!function(t){t.AT_LEAST="atLeast",t.EXACTLY="exactly",t.AUTO="auto";}(Wt||(Wt={}));class Sr extends o{constructor(){super(...arguments),this.xmlKeys={after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule"};}}class Rr extends s{constructor(t){super("w:spacing"),this.root.push(new Sr(t));}}!function(t){t.HEADING_1="Heading1",t.HEADING_2="Heading2",t.HEADING_3="Heading3",t.HEADING_4="Heading4",t.HEADING_5="Heading5",t.HEADING_6="Heading6",t.TITLE="Title";}(Vt||(Vt={}));class Ir extends s{constructor(t){super("w:pStyle"),this.root.push(new a({val:t}));}}class Nr extends s{constructor(t,e,r){super("w:tabs"),this.root.push(new Cr(t,e,r));}}!function(t){t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.BAR="bar",t.CLEAR="clear",t.DECIMAL="decimal",t.END="end",t.NUM="num",t.START="start";}($t||($t={})),function(t){t.DOT="dot",t.HYPHEN="hyphen",t.MIDDLE_DOT="middleDot",t.NONE="none",t.UNDERSCORE="underscore";}(Xt||(Xt={})),function(t){t[t.MAX=9026]="MAX";}(qt||(qt={}));class Or extends o{constructor(){super(...arguments),this.xmlKeys={val:"w:val",pos:"w:pos",leader:"w:leader"};}}class Cr extends s{constructor(t,e,r){super("w:tab"),this.root.push(new Or({val:t,pos:e,leader:r}));}}class kr extends s{constructor(t,e){super("w:numPr"),this.root.push(new Dr(e)),this.root.push(new Lr(t));}}class Dr extends s{constructor(t){if(super("w:ilvl"),t>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new a({val:t}));}}class Lr extends s{constructor(t){super("w:numId"),this.root.push(new a({val:"string"==typeof t?"{".concat(t,"}"):t}));}}class Pr extends o{constructor(){super(...arguments),this.xmlKeys={id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"};}}!function(t){t.EXTERNAL="External";}(Zt||(Zt={}));class Fr extends s{constructor(t,e,r,n){super("Relationship"),this.root.push(new Pr({id:t,type:e,target:r,targetMode:n}));}}class Br extends o{constructor(){super(...arguments),this.xmlKeys={id:"r:id",history:"w:history",anchor:"w:anchor"};}}!function(t){t.INTERNAL="INTERNAL",t.EXTERNAL="EXTERNAL";}(Yt||(Yt={}));class Mr extends s{constructor(t,e,r){super("w:hyperlink"),this.linkId=e;const n={history:1,anchor:r||void 0,id:r?void 0:"rId".concat(this.linkId)},s=new Br(n);this.root.push(s),t.forEach(t=>{this.root.push(t);});}}class Ur extends Mr{constructor(t){super(t.children,Ut(),t.anchor);}}class zr{constructor(t){this.options=t;}}class Hr extends o{constructor(){super(...arguments),this.xmlKeys={id:"w:id",name:"w:name"};}}class jr extends o{constructor(){super(...arguments),this.xmlKeys={id:"w:id"};}}class Kr{constructor(t){const e=Mt();this.start=new Gr(t.id,e),this.children=t.children,this.end=new Wr(e);}}class Gr extends s{constructor(t,e){super("w:bookmarkStart");const r=new Hr({name:t,id:e});this.root.push(r);}}class Wr extends s{constructor(t){super("w:bookmarkEnd");const e=new jr({id:t});this.root.push(e);}}class Vr extends s{constructor(t){super("w:outlineLvl"),this.level=t,this.root.push(new a({val:t}));}}class $r extends o{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"};}}class Xr extends s{constructor(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};super("w:instrText"),this.root.push(new $r({space:j.PRESERVE}));let r="PAGEREF ".concat(t);e.hyperlink&&(r="".concat(r," \\h")),e.useRelativePosition&&(r="".concat(r," \\p")),this.root.push(r);}}class qr extends Ot{constructor(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};super({children:[new nt(!0),new Xr(t,e),new it()]});}}!function(t){t.BOTH="both",t.BOTTOM="bottom",t.CENTER="center",t.TOP="top";}(Qt||(Qt={}));class Zr extends o{constructor(){super(...arguments),this.xmlKeys={verticalAlign:"w:val"};}}class Yr extends s{constructor(t){super("w:vAlign"),this.root.push(new Zr({verticalAlign:t}));}}!function(t){t.DEFAULT="default",t.FIRST="first",t.EVEN="even";}(Jt||(Jt={}));class Qr extends o{constructor(){super(...arguments),this.xmlKeys={type:"w:type",id:"r:id"};}}!function(t){t.HEADER="w:headerReference",t.FOOTER="w:footerReference";}(te||(te={}));class Jr extends s{constructor(t,e){super(t),this.root.push(new Qr({type:e.type||Jt.DEFAULT,id:"rId".concat(e.id)}));}}class tn extends o{constructor(){super(...arguments),this.xmlKeys={space:"w:space",count:"w:num",separate:"w:sep",equalWidth:"w:equalWidth"};}}class en extends s{constructor(_ref4){let{space:t,count:e,separate:r,equalWidth:n,children:s}=_ref4;super("w:cols"),this.root.push(new tn({space:void 0===t?void 0:I(t),count:void 0===e?void 0:m(e),separate:r,equalWidth:n})),!n&&s&&s.forEach(t=>this.addChildElement(t));}}!function(t){t.DEFAULT="default",t.LINES="lines",t.LINES_AND_CHARS="linesAndChars",t.SNAP_TO_CHARS="snapToChars";}(ee||(ee={}));class rn extends o{constructor(){super(...arguments),this.xmlKeys={type:"w:type",linePitch:"w:linePitch",charSpace:"w:charSpace"};}}class nn extends s{constructor(t,e,r){super("w:docGrid"),this.root.push(new rn({type:r,linePitch:m(t),charSpace:e?m(e):void 0}));}}!function(t){t.NEW_PAGE="newPage",t.NEW_SECTION="newSection",t.CONTINUOUS="continuous";}(re||(re={}));class sn extends o{constructor(){super(...arguments),this.xmlKeys={countBy:"w:countBy",start:"w:start",restart:"w:restart",distance:"w:distance"};}}class on extends s{constructor(_ref5){let{countBy:t,start:e,restart:r,distance:n}=_ref5;super("w:lnNumType"),this.root.push(new sn({countBy:void 0===t?void 0:m(t),start:void 0===e?void 0:m(e),restart:r,distance:void 0===n?void 0:I(n)}));}}!function(t){t.ALL_PAGES="allPages",t.FIRST_PAGE="firstPage",t.NOT_FIRST_PAGE="notFirstPage";}(ne||(ne={})),function(t){t.PAGE="page",t.TEXT="text";}(se||(se={})),function(t){t.BACK="back",t.FRONT="front";}(ie||(ie={}));class an extends o{constructor(){super(...arguments),this.xmlKeys={display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"};}}class cn extends i{constructor(t){super("w:pgBorders"),t&&(t.pageBorders?this.root.push(new an({display:t.pageBorders.display,offsetFrom:t.pageBorders.offsetFrom,zOrder:t.pageBorders.zOrder})):this.root.push(new an({})),t.pageBorderTop&&this.root.push(new q("w:top",t.pageBorderTop)),t.pageBorderLeft&&this.root.push(new q("w:left",t.pageBorderLeft)),t.pageBorderBottom&&this.root.push(new q("w:bottom",t.pageBorderBottom)),t.pageBorderRight&&this.root.push(new q("w:right",t.pageBorderRight)));}}class un extends o{constructor(){super(...arguments),this.xmlKeys={top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter"};}}class ln extends s{constructor(t,e,r,n,s,i,o){super("w:pgMar"),this.root.push(new un({top:A(t),right:I(e),bottom:A(r),left:I(n),header:I(s),footer:I(i),gutter:I(o)}));}}!function(t){t.HYPHEN="hyphen",t.PERIOD="period",t.COLON="colon",t.EM_DASH="emDash",t.EN_DASH="endash";}(oe||(oe={}));class hn extends o{constructor(){super(...arguments),this.xmlKeys={start:"w:start",formatType:"w:fmt",separator:"w:chapSep"};}}class pn extends s{constructor(_ref6){let{start:t,formatType:e,separator:r}=_ref6;super("w:pgNumType"),this.root.push(new hn({start:void 0===t?void 0:m(t),formatType:e,separator:r}));}}!function(t){t.PORTRAIT="portrait",t.LANDSCAPE="landscape";}(ae||(ae={}));class dn extends o{constructor(){super(...arguments),this.xmlKeys={width:"w:w",height:"w:h",orientation:"w:orient"};}}class fn extends s{constructor(t,e,r){super("w:pgSz");const n=r===ae.LANDSCAPE,s=I(t),i=I(e);this.root.push(new dn({width:n?i:s,height:n?s:i,orientation:r}));}}!function(t){t.LEFT_TO_RIGHT_TOP_TO_BOTTOM="lrTb",t.TOP_TO_BOTTOM_RIGHT_TO_LEFT="tbRl";}(ce||(ce={}));class mn extends o{constructor(){super(...arguments),this.xmlKeys={val:"w:val"};}}class wn extends s{constructor(t){super("w:textDirection"),this.root.push(new mn({val:t}));}}!function(t){t.NEXT_PAGE="nextPage",t.NEXT_COLUMN="nextColumn",t.CONTINUOUS="continuous",t.EVEN_PAGE="evenPage",t.ODD_PAGE="oddPage";}(ue||(ue={}));class gn extends o{constructor(){super(...arguments),this.xmlKeys={val:"w:val"};}}class yn extends s{constructor(t){super("w:type"),this.root.push(new gn({val:t}));}}const bn={TOP:"1in",RIGHT:"1in",BOTTOM:"1in",LEFT:"1in",HEADER:708,FOOTER:708,GUTTER:0},vn={WIDTH:11906,HEIGHT:16838,ORIENTATION:ae.PORTRAIT};class _n extends s{constructor(){let{page:{size:{width:t=vn.WIDTH,height:e=vn.HEIGHT,orientation:r=vn.ORIENTATION}={},margin:{top:n=bn.TOP,right:s=bn.RIGHT,bottom:i=bn.BOTTOM,left:o=bn.LEFT,header:a=bn.HEADER,footer:c=bn.FOOTER,gutter:u=bn.GUTTER}={},pageNumbers:l={},borders:h,textDirection:p}={},grid:{linePitch:d=360,charSpace:f,type:m}={},headerWrapperGroup:w={},footerWrapperGroup:g={},lineNumbers:y,titlePage:b,verticalAlign:v,column:_,type:x}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};super("w:sectPr"),this.addHeaderFooterGroup(te.HEADER,w),this.addHeaderFooterGroup(te.FOOTER,g),x&&this.root.push(new yn(x)),this.root.push(new fn(t,e,r)),this.root.push(new ln(n,s,i,o,a,c,u)),h&&this.root.push(new cn(h)),y&&this.root.push(new on(y)),this.root.push(new pn(l)),_&&this.root.push(new en(_)),v&&this.root.push(new Yr(v)),void 0!==b&&this.root.push(new L("w:titlePg",b)),p&&this.root.push(new wn(p)),this.root.push(new nn(d,f,m));}addHeaderFooterGroup(t,e){e.default&&this.root.push(new Jr(t,{type:Jt.DEFAULT,id:e.default.View.ReferenceId})),e.first&&this.root.push(new Jr(t,{type:Jt.FIRST,id:e.first.View.ReferenceId})),e.even&&this.root.push(new Jr(t,{type:Jt.EVEN,id:e.even.View.ReferenceId}));}}class xn extends s{constructor(){super("w:body"),this.sections=[];}addSection(t){const e=this.sections.pop();this.root.push(this.createSectionParagraph(e)),this.sections.push(new _n(t));}prepForXml(t){return 1===this.sections.length&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(t);}push(t){this.root.push(t);}createSectionParagraph(t){const e=new Mn({}),r=new Bn({});return r.push(t),e.addChildElement(r),e;}}class En extends o{constructor(){super(...arguments),this.xmlKeys={width:"w:w",space:"w:space"};}}class Tn extends s{constructor(_ref7){let{width:t,space:e}=_ref7;super("w:col"),this.root.push(new En({width:I(t),space:void 0===e?void 0:I(e)}));}}class An extends o{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"};}}class Sn extends o{constructor(){super(...arguments),this.xmlKeys={color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"};}}class Rn extends s{constructor(t){super("w:background"),this.root.push(new Sn({color:void 0===t.color?void 0:T(t.color),themeColor:t.themeColor,themeShade:void 0===t.themeShade?void 0:v(t.themeShade),themeTint:void 0===t.themeTint?void 0:v(t.themeTint)}));}}class In extends s{constructor(t){super("w:document"),this.root.push(new An({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.body=new xn(),this.root.push(new Rn(t.background)),this.root.push(this.body);}add(t){return this.body.push(t),this;}get Body(){return this.body;}}class Nn extends o{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns"};}}class On extends s{constructor(){super("Relationships"),this.root.push(new Nn({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}));}addRelationship(t){this.root.push(t);}createRelationship(t,e,r,n){const s=new Fr("rId".concat(t),e,r,n);return this.addRelationship(s),s;}get RelationshipCount(){return this.root.length-1;}}class Cn{constructor(t){this.document=new In(t),this.relationships=new On();}get View(){return this.document;}get Relationships(){return this.relationships;}}var kn,Dn,Ln;!function(t){t.NONE="none",t.DROP="drop",t.MARGIN="margin";}(kn||(kn={})),function(t){t.MARGIN="margin",t.PAGE="page",t.TEXT="text";}(Dn||(Dn={})),function(t){t.AROUND="around",t.AUTO="auto",t.NONE="none",t.NOT_BESIDE="notBeside",t.THROUGH="through",t.TIGHT="tight";}(Ln||(Ln={}));class Pn extends o{constructor(){super(...arguments),this.xmlKeys={anchorLock:"w:anchorLock",dropCap:"w:dropCap",width:"w:w",height:"w:h",x:"w:x",y:"w:y",anchorHorizontal:"w:hAnchor",anchorVertical:"w:vAnchor",spaceHorizontal:"w:hSpace",spaceVertical:"w:vSpace",rule:"w:hRule",alignmentX:"w:xAlign",alignmentY:"w:yAlign",lines:"w:lines",wrap:"w:wrap"};}}class Fn extends s{constructor(t){var e,r;super("w:framePr"),this.root.push(new Pn({anchorLock:t.anchorLock,dropCap:t.dropCap,width:t.width,height:t.height,x:t.position.x,y:t.position.y,anchorHorizontal:t.anchor.horizontal,anchorVertical:t.anchor.vertical,spaceHorizontal:null===(e=t.space)||void 0===e?void 0:e.horizontal,spaceVertical:null===(r=t.space)||void 0===r?void 0:r.vertical,rule:t.rule,alignmentX:t.alignment.x,alignmentY:t.alignment.y,lines:t.lines,wrap:t.wrap}));}}class Bn extends i{constructor(t){var e,r;if(super("w:pPr"),this.numberingReferences=[],!t)return this;if(t.heading&&this.push(new Ir(t.heading)),t.bullet&&this.push(new Ir("ListParagraph")),t.numbering&&(t.style||t.heading||t.numbering.custom||this.push(new Ir("ListParagraph"))),t.style&&this.push(new Ir(t.style)),void 0!==t.keepNext&&this.push(new L("w:keepNext",t.keepNext)),void 0!==t.keepLines&&this.push(new L("w:keepLines",t.keepLines)),t.pageBreakBefore&&this.push(new Ar()),t.frame&&this.push(new Fn(t.frame)),void 0!==t.widowControl&&this.push(new L("w:widowControl",t.widowControl)),t.bullet&&this.push(new kr(1,t.bullet.level)),t.numbering&&(this.numberingReferences.push({reference:t.numbering.reference,instance:null!==(e=t.numbering.instance)&&void 0!==e?e:0}),this.push(new kr("".concat(t.numbering.reference,"-").concat(null!==(r=t.numbering.instance)&&void 0!==r?r:0),t.numbering.level))),t.border&&this.push(new Y(t.border)),t.thematicBreak&&this.push(new Q()),t.shading&&this.push(new pt(t.shading)),t.rightTabStop&&this.push(new Nr($t.RIGHT,t.rightTabStop)),t.tabStops)for(const e of t.tabStops)this.push(new Nr(e.type,e.position,e.leader));t.leftTabStop&&this.push(new Nr($t.LEFT,t.leftTabStop)),void 0!==t.bidirectional&&this.push(new L("w:bidi",t.bidirectional)),t.spacing&&this.push(new Rr(t.spacing)),t.indent&&this.push(new tt(t.indent)),void 0!==t.contextualSpacing&&this.push(new L("w:contextualSpacing",t.contextualSpacing)),t.alignment&&this.push(new X(t.alignment)),void 0!==t.outlineLevel&&this.push(new Vr(t.outlineLevel)),void 0!==t.suppressLineNumbers&&this.push(new L("w:suppressLineNumbers",t.suppressLineNumbers));}push(t){this.root.push(t);}prepForXml(t){if(t.viewWrapper instanceof Cn)for(const e of this.numberingReferences)t.file.Numbering.createConcreteNumberingInstance(e.reference,e.instance);return super.prepForXml(t);}}class Mn extends s{constructor(t){if(super("w:p"),"string"==typeof t)return this.properties=new Bn({}),this.root.push(this.properties),this.root.push(new Ct(t)),this;if(this.properties=new Bn(t),this.root.push(this.properties),t.text&&this.root.push(new Ct(t.text)),t.children)for(const e of t.children)if(e instanceof Kr){this.root.push(e.start);for(const t of e.children)this.root.push(t);this.root.push(e.end);}else this.root.push(e);}prepForXml(t){for(const e of this.root)if(e instanceof zr){const r=this.root.indexOf(e),n=new Mr(e.options.children,Ut());t.viewWrapper.Relationships.createRelationship(n.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",e.options.link,Zt.EXTERNAL),this.root[r]=n;}return super.prepForXml(t);}addRunToFront(t){return this.root.splice(1,0,t),this;}}class Un extends s{constructor(t){super("m:oMath");for(const e of t.children)this.root.push(e);}}class zn extends s{constructor(t){super("m:t"),this.root.push(t);}}class Hn extends s{constructor(t){super("m:r"),this.root.push(new zn(t));}}class jn extends s{constructor(t){super("m:den");for(const e of t)this.root.push(e);}}class Kn extends s{constructor(t){super("m:num");for(const e of t)this.root.push(e);}}class Gn extends s{constructor(t){super("m:f"),this.root.push(new Kn(t.numerator)),this.root.push(new jn(t.denominator));}}class Wn extends o{constructor(){super(...arguments),this.xmlKeys={accent:"m:val"};}}class Vn extends s{constructor(t){super("m:chr"),this.root.push(new Wn({accent:t}));}}class $n extends s{constructor(t){super("m:e");for(const e of t)this.root.push(e);}}class Xn extends o{constructor(){super(...arguments),this.xmlKeys={value:"m:val"};}}class qn extends s{constructor(){super("m:limLoc"),this.root.push(new Xn({value:"undOvr"}));}}class Zn extends o{constructor(){super(...arguments),this.xmlKeys={hide:"m:val"};}}class Yn extends s{constructor(){super("m:subHide"),this.root.push(new Zn({hide:1}));}}class Qn extends o{constructor(){super(...arguments),this.xmlKeys={hide:"m:val"};}}class Jn extends s{constructor(){super("m:supHide"),this.root.push(new Qn({hide:1}));}}class ts extends s{constructor(t,e,r){super("m:naryPr"),this.root.push(new Vn(t)),this.root.push(new qn()),e||this.root.push(new Jn()),r||this.root.push(new Yn());}}class es extends s{constructor(t){super("m:sub");for(const e of t)this.root.push(e);}}class rs extends s{constructor(t){super("m:sup");for(const e of t)this.root.push(e);}}class ns extends s{constructor(t){super("m:nary"),this.root.push(new ts("∑",!!t.superScript,!!t.subScript)),t.subScript&&this.root.push(new es(t.subScript)),t.superScript&&this.root.push(new rs(t.superScript)),this.root.push(new $n(t.children));}}class ss extends s{constructor(){super("m:sSupPr");}}class is extends s{constructor(t){super("m:sSup"),this.root.push(new ss()),this.root.push(new $n(t.children)),this.root.push(new rs(t.superScript));}}class os extends s{constructor(){super("m:sSubPr");}}class as extends s{constructor(t){super("m:sSub"),this.root.push(new os()),this.root.push(new $n(t.children)),this.root.push(new es(t.subScript));}}class cs extends s{constructor(){super("m:sSubSupPr");}}class us extends s{constructor(t){super("m:sSubSup"),this.root.push(new cs()),this.root.push(new $n(t.children)),this.root.push(new es(t.subScript)),this.root.push(new rs(t.superScript));}}class ls extends s{constructor(){super("m:sPrePr");}}class hs extends s{constructor(t){super("m:sPre"),this.root.push(new ls()),this.root.push(new $n(t.children)),this.root.push(new es(t.subScript)),this.root.push(new rs(t.superScript));}}const ps="";class ds extends s{constructor(t){if(super("m:deg"),t)for(const e of t)this.root.push(e);}}class fs extends o{constructor(){super(...arguments),this.xmlKeys={hide:"m:val"};}}class ms extends s{constructor(){super("m:degHide"),this.root.push(new fs({hide:1}));}}class ws extends s{constructor(t){super("m:radPr"),t||this.root.push(new ms());}}class gs extends s{constructor(t){super("m:rad"),this.root.push(new ws(!!t.degree)),this.root.push(new ds(t.degree)),this.root.push(new $n(t.children));}}class ys extends s{constructor(t){super("m:fName");for(const e of t)this.root.push(e);}}class bs extends s{constructor(){super("m:funcPr");}}class vs extends s{constructor(t){super("m:func"),this.root.push(new bs()),this.root.push(new ys(t.name)),this.root.push(new $n(t.children));}}class _s extends o{constructor(){super(...arguments),this.xmlKeys={character:"m:val"};}}class xs extends s{constructor(t){super("m:begChr"),this.root.push(new _s({character:t}));}}class Es extends o{constructor(){super(...arguments),this.xmlKeys={character:"m:val"};}}class Ts extends s{constructor(t){super("m:endChr"),this.root.push(new Es({character:t}));}}class As extends s{constructor(t){super("m:dPr"),t&&(this.root.push(new xs(t.beginningCharacter)),this.root.push(new Ts(t.endingCharacter)));}}class Ss extends s{constructor(t){super("m:d"),this.root.push(new As()),this.root.push(new $n(t.children));}}class Rs extends s{constructor(t){super("m:d"),this.root.push(new As({beginningCharacter:"[",endingCharacter:"]"})),this.root.push(new $n(t.children));}}class Is extends s{constructor(t){super("m:d"),this.root.push(new As({beginningCharacter:"{",endingCharacter:"}"})),this.root.push(new $n(t.children));}}class Ns extends s{constructor(t){super("m:d"),this.root.push(new As({beginningCharacter:"〈",endingCharacter:"〉"})),this.root.push(new $n(t.children));}}class Os extends s{constructor(t){super("w:tblGrid");for(const e of t)this.root.push(new ks(e));}}class Cs extends o{constructor(){super(...arguments),this.xmlKeys={w:"w:w"};}}class ks extends s{constructor(t){super("w:gridCol"),void 0!==t&&this.root.push(new Cs({w:I(t)}));}}var Ds,Ls,Ps,Fs;!function(t){t.AUTO="auto",t.DXA="dxa",t.NIL="nil",t.PERCENTAGE="pct";}(Ds||(Ds={}));class Bs extends o{constructor(){super(...arguments),this.xmlKeys={type:"w:type",size:"w:w"};}}class Ms extends s{constructor(t,_ref8){let{type:e=Ds.AUTO,size:r}=_ref8;super(t);let n=r;e===Ds.PERCENTAGE&&"number"==typeof r&&(n="".concat(r,"%")),this.root.push(new Bs({type:e,size:O(n)}));}}!function(t){t.TABLE="w:tblCellMar",t.TABLE_CELL="w:tcMar";}(Ls||(Ls={}));class Us extends i{constructor(t,_ref9){let{marginUnitType:e=Ds.DXA,top:r,left:n,bottom:s,right:i}=_ref9;super(t),void 0!==r&&this.root.push(new Ms("w:top",{type:e,size:r})),void 0!==n&&this.root.push(new Ms("w:left",{type:e,size:n})),void 0!==s&&this.root.push(new Ms("w:bottom",{type:e,size:s})),void 0!==i&&this.root.push(new Ms("w:right",{type:e,size:i}));}}class zs extends i{constructor(t){super("w:tcBorders"),t.top&&this.root.push(new q("w:top",t.top)),t.start&&this.root.push(new q("w:start",t.start)),t.left&&this.root.push(new q("w:left",t.left)),t.bottom&&this.root.push(new q("w:bottom",t.bottom)),t.end&&this.root.push(new q("w:end",t.end)),t.right&&this.root.push(new q("w:right",t.right));}}class Hs extends o{constructor(){super(...arguments),this.xmlKeys={val:"w:val"};}}class js extends s{constructor(t){super("w:gridSpan"),this.root.push(new Hs({val:m(t)}));}}!function(t){t.CONTINUE="continue",t.RESTART="restart";}(Ps||(Ps={}));class Ks extends o{constructor(){super(...arguments),this.xmlKeys={val:"w:val"};}}class Gs extends s{constructor(t){super("w:vMerge"),this.root.push(new Ks({val:t}));}}!function(t){t.BOTTOM_TO_TOP_LEFT_TO_RIGHT="btLr",t.LEFT_TO_RIGHT_TOP_TO_BOTTOM="lrTb",t.TOP_TO_BOTTOM_RIGHT_TO_LEFT="tbRl";}(Fs||(Fs={}));class Ws extends o{constructor(){super(...arguments),this.xmlKeys={val:"w:val"};}}class Vs extends s{constructor(t){super("w:textDirection"),this.root.push(new Ws({val:t}));}}class $s extends i{constructor(t){super("w:tcPr"),t.width&&this.root.push(new Ms("w:tcW",t.width)),t.columnSpan&&this.root.push(new js(t.columnSpan)),t.verticalMerge?this.root.push(new Gs(t.verticalMerge)):t.rowSpan&&t.rowSpan>1&&this.root.push(new Gs(Ps.RESTART)),t.borders&&this.root.push(new zs(t.borders)),t.shading&&this.root.push(new pt(t.shading)),t.margins&&this.root.push(new Us(Ls.TABLE_CELL,t.margins)),t.textDirection&&this.root.push(new Vs(t.textDirection)),t.verticalAlign&&this.root.push(new Yr(t.verticalAlign));}}class Xs extends s{constructor(t){super("w:tc"),this.options=t,this.root.push(new $s(t));for(const e of t.children)this.root.push(e);}prepForXml(t){return this.root[this.root.length-1]instanceof Mn||this.root.push(new Mn({})),super.prepForXml(t);}}const qs={style:z.NONE,size:0,color:"auto"},Zs={style:z.SINGLE,size:4,color:"auto"};class Ys extends s{constructor(t){super("w:tblBorders"),t.top?this.root.push(new q("w:top",t.top)):this.root.push(new q("w:top",Zs)),t.left?this.root.push(new q("w:left",t.left)):this.root.push(new q("w:left",Zs)),t.bottom?this.root.push(new q("w:bottom",t.bottom)):this.root.push(new q("w:bottom",Zs)),t.right?this.root.push(new q("w:right",t.right)):this.root.push(new q("w:right",Zs)),t.insideHorizontal?this.root.push(new q("w:insideH",t.insideHorizontal)):this.root.push(new q("w:insideH",Zs)),t.insideVertical?this.root.push(new q("w:insideV",t.insideVertical)):this.root.push(new q("w:insideV",Zs));}}var Qs;Ys.NONE={top:qs,bottom:qs,left:qs,right:qs,insideHorizontal:qs,insideVertical:qs},function(t){t.NEVER="never",t.OVERLAP="overlap";}(Qs||(Qs={}));class Js extends o{constructor(){super(...arguments),this.xmlKeys={val:"w:val"};}}class ti extends s{constructor(t){super("w:tblOverlap"),this.root.push(new Js({val:t}));}}var ei,ri,ni,si,ii,oi;!function(t){t.MARGIN="margin",t.PAGE="page",t.TEXT="text";}(ei||(ei={})),function(t){t.CENTER="center",t.INSIDE="inside",t.LEFT="left",t.OUTSIDE="outside",t.RIGHT="right";}(ri||(ri={})),function(t){t.CENTER="center",t.INSIDE="inside",t.BOTTOM="bottom",t.OUTSIDE="outside",t.INLINE="inline",t.TOP="top";}(ni||(ni={}));class ai extends o{constructor(){super(...arguments),this.xmlKeys={horizontalAnchor:"w:horzAnchor",verticalAnchor:"w:vertAnchor",absoluteHorizontalPosition:"w:tblpX",relativeHorizontalPosition:"w:tblpXSpec",absoluteVerticalPosition:"w:tblpY",relativeVerticalPosition:"w:tblpYSpec",bottomFromText:"w:bottomFromText",topFromText:"w:topFromText",leftFromText:"w:leftFromText",rightFromText:"w:rightFromText"};}}class ci extends s{constructor(t){var{leftFromText:e,rightFromText:r,topFromText:n,bottomFromText:s,absoluteHorizontalPosition:i,absoluteVerticalPosition:o}=t,a=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);}return r;}(t,["leftFromText","rightFromText","topFromText","bottomFromText","absoluteHorizontalPosition","absoluteVerticalPosition"]);super("w:tblpPr"),this.root.push(new ai(Object.assign({leftFromText:void 0===e?void 0:I(e),rightFromText:void 0===r?void 0:I(r),topFromText:void 0===n?void 0:I(n),bottomFromText:void 0===s?void 0:I(s),absoluteHorizontalPosition:void 0===i?void 0:A(i),absoluteVerticalPosition:void 0===o?void 0:A(o)},a))),a.overlap&&this.root.push(new ti(a.overlap));}}!function(t){t.AUTOFIT="autofit",t.FIXED="fixed";}(si||(si={}));class ui extends o{constructor(){super(...arguments),this.xmlKeys={type:"w:type"};}}class li extends s{constructor(t){super("w:tblLayout"),this.root.push(new ui({type:t}));}}class hi extends i{constructor(t){super("w:tblPr"),t.style&&this.root.push(new F("w:tblStyle",t.style)),t.float&&this.root.push(new ci(t.float)),void 0!==t.visuallyRightToLeft&&this.root.push(new L("w:bidiVisual",t.visuallyRightToLeft)),t.width&&this.root.push(new Ms("w:tblW",t.width)),t.alignment&&this.root.push(new X(t.alignment)),t.indent&&this.root.push(new Ms("w:tblInd",t.indent)),t.borders&&this.root.push(new Ys(t.borders)),t.shading&&this.root.push(new pt(t.shading)),t.layout&&this.root.push(new li(t.layout)),t.cellMargin&&this.root.push(new Us(Ls.TABLE,t.cellMargin));}}class pi extends s{constructor(_ref10){let{rows:t,width:e,columnWidths:r=Array(Math.max(...t.map(t=>t.CellCount))).fill(100),margins:n,indent:s,float:i,layout:o,style:a,borders:c,alignment:u,visuallyRightToLeft:l}=_ref10;super("w:tbl"),this.root.push(new hi({borders:null!=c?c:{},width:null!=e?e:{size:100},indent:s,float:i,layout:o,style:a,alignment:u,cellMargin:n,visuallyRightToLeft:l})),this.root.push(new Os(r));for(const e of t)this.root.push(e);t.forEach((e,r)=>{if(r===t.length-1)return;let n=0;e.cells.forEach(e=>{if(e.options.rowSpan&&e.options.rowSpan>1){const s=new Xs({rowSpan:e.options.rowSpan-1,columnSpan:e.options.columnSpan,borders:e.options.borders,children:[],verticalMerge:Ps.CONTINUE});t[r+1].addCellToColumnIndex(s,n);}n+=e.options.columnSpan||1;});});}}!function(t){t.AUTO="auto",t.ATLEAST="atLeast",t.EXACT="exact";}(ii||(ii={}));class di extends o{constructor(){super(...arguments),this.xmlKeys={value:"w:val",rule:"w:hRule"};}}class fi extends s{constructor(t,e){super("w:trHeight"),this.root.push(new di({value:I(t),rule:e}));}}class mi extends i{constructor(t){super("w:trPr"),void 0!==t.cantSplit&&this.root.push(new L("w:cantSplit",t.cantSplit)),void 0!==t.tableHeader&&this.root.push(new L("w:tblHeader",t.tableHeader)),t.height&&this.root.push(new fi(t.height.value,t.height.rule));}}class wi extends s{constructor(t){super("w:tr"),this.options=t,this.root.push(new mi(t));for(const e of t.children)this.root.push(e);}get CellCount(){return this.options.children.length;}get cells(){return this.root.filter(t=>t instanceof Xs);}addCellToIndex(t,e){this.root.splice(e+1,0,t);}addCellToColumnIndex(t,e){const r=this.columnIndexToRootIndex(e,!0);this.addCellToIndex(t,r-1);}rootIndexToColumnIndex(t){if(t<1||t>=this.root.length)throw new Error("cell 'rootIndex' should between 1 to "+(this.root.length-1));let e=0;for(let r=1;r<t;r++)e+=this.root[r].options.columnSpan||1;return e;}columnIndexToRootIndex(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;if(t<0)throw new Error("cell 'columnIndex' should not less than zero");let r=0,n=1;for(;r<=t;){if(n>=this.root.length){if(e)return this.root.length;throw new Error("cell 'columnIndex' should not great than "+(r-1));}const t=this.root[n];n+=1,r+=t&&t.options.columnSpan||1;}return n-1;}}class gi extends o{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns",vt:"xmlns:vt"};}}class yi extends s{constructor(){super("Properties"),this.root.push(new gi({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}));}}class bi extends o{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns"};}}class vi extends o{constructor(){super(...arguments),this.xmlKeys={contentType:"ContentType",extension:"Extension"};}}class _i extends s{constructor(t,e){super("Default"),this.root.push(new vi({contentType:t,extension:e}));}}class xi extends o{constructor(){super(...arguments),this.xmlKeys={contentType:"ContentType",partName:"PartName"};}}class Ei extends s{constructor(t,e){super("Override"),this.root.push(new xi({contentType:t,partName:e}));}}class Ti extends s{constructor(){super("Types"),this.root.push(new bi({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new _i("image/png","png")),this.root.push(new _i("image/jpeg","jpeg")),this.root.push(new _i("image/jpeg","jpg")),this.root.push(new _i("image/bmp","bmp")),this.root.push(new _i("image/gif","gif")),this.root.push(new _i("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new _i("application/xml","xml")),this.root.push(new Ei("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new Ei("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new Ei("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new Ei("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new Ei("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new Ei("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new Ei("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new Ei("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml"));}addFooter(t){this.root.push(new Ei("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml","/word/footer".concat(t,".xml")));}addHeader(t){this.root.push(new Ei("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml","/word/header".concat(t,".xml")));}}class Ai extends s{constructor(t){super("cp:coreProperties"),this.root.push(new An({cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"})),t.title&&this.root.push(new M("dc:title",t.title)),t.subject&&this.root.push(new M("dc:subject",t.subject)),t.creator&&this.root.push(new M("dc:creator",t.creator)),t.keywords&&this.root.push(new M("cp:keywords",t.keywords)),t.description&&this.root.push(new M("dc:description",t.description)),t.lastModifiedBy&&this.root.push(new M("cp:lastModifiedBy",t.lastModifiedBy)),t.revision&&this.root.push(new M("cp:revision",String(t.revision))),this.root.push(new Si("dcterms:created")),this.root.push(new Si("dcterms:modified"));}}class Si extends s{constructor(t){super(t),this.root.push(new An({type:"dcterms:W3CDTF"})),this.root.push(D(new Date()));}}class Ri extends o{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns",vt:"xmlns:vt"};}}class Ii extends o{constructor(){super(...arguments),this.xmlKeys={fmtid:"fmtid",pid:"pid",name:"name"};}}class Ni extends s{constructor(t,e){super("property"),this.root.push(new Ii({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t.toString(),name:e.name})),this.root.push(new Oi(e.value));}}class Oi extends s{constructor(t){super("vt:lpwstr"),this.root.push(t);}}class Ci extends s{constructor(t){super("Properties"),this.properties=[],this.root.push(new Ri({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(const e of t)this.addCustomProperty(e);}prepForXml(t){return this.properties.forEach(t=>this.root.push(t)),super.prepForXml(t);}addCustomProperty(t){this.properties.push(new Ni(this.nextId++,t));}}class ki extends o{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"};}}class Di extends f{constructor(t,e){super("w:ftr",e),this.refId=t,e||this.root.push(new ki({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}));}get ReferenceId(){return this.refId;}add(t){this.root.push(t);}}class Li{constructor(t,e,r){this.media=t,this.footer=new Di(e,r),this.relationships=new On();}add(t){this.footer.add(t);}addChildElement(t){this.footer.addChildElement(t);}get View(){return this.footer;}get Relationships(){return this.relationships;}get Media(){return this.media;}}class Pi extends o{constructor(){super(...arguments),this.xmlKeys={type:"w:type",id:"w:id"};}}class Fi extends s{constructor(){super("w:footnoteRef");}}class Bi extends Ot{constructor(){super({style:"FootnoteReference"}),this.root.push(new Fi());}}!function(t){t.SEPERATOR="separator",t.CONTINUATION_SEPERATOR="continuationSeparator";}(oi||(oi={}));class Mi extends s{constructor(t){super("w:footnote"),this.root.push(new Pi({type:t.type,id:t.id}));for(let e=0;e<t.children.length;e++){const r=t.children[e];0===e&&r.addRunToFront(new Bi()),this.root.push(r);}}}class Ui extends s{constructor(){super("w:continuationSeparator");}}class zi extends Ot{constructor(){super({}),this.root.push(new Ui());}}class Hi extends s{constructor(){super("w:separator");}}class ji extends Ot{constructor(){super({}),this.root.push(new Hi());}}class Ki extends o{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"};}}class Gi extends s{constructor(){super("w:footnotes"),this.root.push(new Ki({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const t=new Mi({id:-1,type:oi.SEPERATOR,children:[new Mn({spacing:{after:0,line:240,lineRule:Wt.AUTO},children:[new ji()]})]});this.root.push(t);const e=new Mi({id:0,type:oi.CONTINUATION_SEPERATOR,children:[new Mn({spacing:{after:0,line:240,lineRule:Wt.AUTO},children:[new zi()]})]});this.root.push(e);}createFootNote(t,e){const r=new Mi({id:t,children:e});this.root.push(r);}}class Wi{constructor(){this.footnotess=new Gi(),this.relationships=new On();}get View(){return this.footnotess;}get Relationships(){return this.relationships;}}class Vi extends o{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"};}}class $i extends f{constructor(t,e){super("w:hdr",e),this.refId=t,e||this.root.push(new Vi({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}));}get ReferenceId(){return this.refId;}add(t){this.root.push(t);}}class Xi{constructor(t,e,r){this.media=t,this.header=new $i(e,r),this.relationships=new On();}add(t){return this.header.add(t),this;}addChildElement(t){this.header.addChildElement(t);}get View(){return this.header;}get Relationships(){return this.relationships;}get Media(){return this.media;}}class qi{constructor(){this.map=new Map();}addMedia(t,e){const r="".concat(Ut(),".png"),n={stream:"string"==typeof t?this.convertDataURIToBinary(t):t,fileName:r,transformation:{pixels:{x:Math.round(e.width),y:Math.round(e.height)},emus:{x:Math.round(9525*e.width),y:Math.round(9525*e.height)},flip:e.flip,rotation:e.rotation?6e4*e.rotation:void 0}};return this.map.set(r,n),n;}addImage(t,e){this.map.set(t,e);}get Array(){return Array.from(this.map.values());}convertDataURIToBinary(t){const e=";base64,",n=t.indexOf(e)+e.length;return "function"==typeof atob?new Uint8Array(atob(t.substring(n)).split("").map(t=>t.charCodeAt(0))):new(r(764).Buffer)(t,"base64");}}const Zi="";var Yi,Qi;!function(t){t.BULLET="bullet",t.CARDINAL_TEXT="cardinalText",t.CHICAGO="chicago",t.DECIMAL="decimal",t.DECIMAL_ENCLOSED_CIRCLE="decimalEnclosedCircle",t.DECIMAL_ENCLOSED_FULLSTOP="decimalEnclosedFullstop",t.DECIMAL_ENCLOSED_PARENTHESES="decimalEnclosedParen",t.DECIMAL_ZERO="decimalZero",t.LOWER_LETTER="lowerLetter",t.LOWER_ROMAN="lowerRoman",t.NONE="none",t.ORDINAL_TEXT="ordinalText",t.UPPER_LETTER="upperLetter",t.UPPER_ROMAN="upperRoman";}(Yi||(Yi={}));class Ji extends o{constructor(){super(...arguments),this.xmlKeys={ilvl:"w:ilvl",tentative:"w15:tentative"};}}class to extends s{constructor(t){super("w:numFmt"),this.root.push(new a({val:t}));}}class eo extends s{constructor(t){super("w:lvlText"),this.root.push(new a({val:t}));}}class ro extends s{constructor(t){super("w:lvlJc"),this.root.push(new a({val:t}));}}!function(t){t.NOTHING="nothing",t.SPACE="space",t.TAB="tab";}(Qi||(Qi={}));class no extends s{constructor(t){super("w:suff"),this.root.push(new a({val:t}));}}class so extends s{constructor(_ref11){let{level:t,format:e,text:r,alignment:n=U.START,start:s=1,style:i,suffix:o}=_ref11;if(super("w:lvl"),this.root.push(new B("w:start",m(s))),e&&this.root.push(new to(e)),o&&this.root.push(new no(o)),r&&this.root.push(new eo(r)),this.root.push(new ro(n)),this.paragraphProperties=new Bn(i&&i.paragraph),this.runProperties=new St(i&&i.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),t>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new Ji({ilvl:m(t),tentative:1}));}}class io extends so{constructor(t){super(t);}}class oo extends so{}class ao extends s{constructor(t){super("w:multiLevelType"),this.root.push(new a({val:t}));}}class co extends o{constructor(){super(...arguments),this.xmlKeys={abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"};}}class uo extends s{constructor(t,e){super("w:abstractNum"),this.root.push(new co({abstractNumId:m(t),restartNumberingAfterBreak:0})),this.root.push(new ao("hybridMultilevel")),this.id=t;for(const t of e)this.root.push(new io(t));}}class lo extends s{constructor(t){super("w:abstractNumId"),this.root.push(new a({val:t}));}}class ho extends o{constructor(){super(...arguments),this.xmlKeys={numId:"w:numId"};}}class po extends s{constructor(t){super("w:num"),this.numId=t.numId,this.reference=t.reference,this.instance=t.instance,this.root.push(new ho({numId:m(t.numId)})),this.root.push(new lo(m(t.abstractNumId))),t.overrideLevel&&this.root.push(new mo(t.overrideLevel.num,t.overrideLevel.start));}}class fo extends o{constructor(){super(...arguments),this.xmlKeys={ilvl:"w:ilvl"};}}class mo extends s{constructor(t,e){super("w:lvlOverride"),this.root.push(new fo({ilvl:t})),void 0!==e&&this.root.push(new go(e));}}class wo extends o{constructor(){super(...arguments),this.xmlKeys={val:"w:val"};}}class go extends s{constructor(t){super("w:startOverride"),this.root.push(new wo({val:t}));}}class yo extends s{constructor(t){super("w:numbering"),this.abstractNumberingMap=new Map(),this.concreteNumberingMap=new Map(),this.referenceConfigMap=new Map(),this.root.push(new An({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const e=new uo(Mt(),[{level:0,format:Yi.BULLET,text:"●",alignment:U.LEFT,style:{paragraph:{indent:{left:Bt(.5),hanging:Bt(.25)}}}},{level:1,format:Yi.BULLET,text:"○",alignment:U.LEFT,style:{paragraph:{indent:{left:Bt(1),hanging:Bt(.25)}}}},{level:2,format:Yi.BULLET,text:"■",alignment:U.LEFT,style:{paragraph:{indent:{left:2160,hanging:Bt(.25)}}}},{level:3,format:Yi.BULLET,text:"●",alignment:U.LEFT,style:{paragraph:{indent:{left:2880,hanging:Bt(.25)}}}},{level:4,format:Yi.BULLET,text:"○",alignment:U.LEFT,style:{paragraph:{indent:{left:3600,hanging:Bt(.25)}}}},{level:5,format:Yi.BULLET,text:"■",alignment:U.LEFT,style:{paragraph:{indent:{left:4320,hanging:Bt(.25)}}}},{level:6,format:Yi.BULLET,text:"●",alignment:U.LEFT,style:{paragraph:{indent:{left:5040,hanging:Bt(.25)}}}},{level:7,format:Yi.BULLET,text:"●",alignment:U.LEFT,style:{paragraph:{indent:{left:5760,hanging:Bt(.25)}}}},{level:8,format:Yi.BULLET,text:"●",alignment:U.LEFT,style:{paragraph:{indent:{left:6480,hanging:Bt(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new po({numId:1,abstractNumId:e.id,reference:"default-bullet-numbering",instance:0,overrideLevel:{num:0,start:1}})),this.abstractNumberingMap.set("default-bullet-numbering",e);for(const e of t.config)this.abstractNumberingMap.set(e.reference,new uo(Mt(),e.levels)),this.referenceConfigMap.set(e.reference,e.levels);}prepForXml(t){for(const t of this.abstractNumberingMap.values())this.root.push(t);for(const t of this.concreteNumberingMap.values())this.root.push(t);return super.prepForXml(t);}createConcreteNumberingInstance(t,e){const r=this.abstractNumberingMap.get(t);if(!r)return;const n="".concat(t,"-").concat(e);if(this.concreteNumberingMap.has(n))return;const s={numId:Mt(),abstractNumId:r.id,reference:t,instance:e,overrideLevel:{num:0,start:1}},i=this.referenceConfigMap.get(t),o=i&&i[0].start;o&&Number.isInteger(o)&&(s.overrideLevel={num:0,start:o}),this.concreteNumberingMap.set(n,new po(s));}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values());}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values());}}class bo extends o{constructor(){super(...arguments),this.xmlKeys={version:"w:val",name:"w:name",uri:"w:uri"};}}class vo extends s{constructor(t){super("w:compatSetting"),this.root.push(new bo({version:t,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}));}}class _o extends s{constructor(t){super("w:compat"),void 0!==t.doNotExpandShiftReturn&&this.root.push(new L("w:doNotExpandShiftReturn",t.doNotExpandShiftReturn)),t.version&&this.root.push(new vo(t.version));}}class xo extends o{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"};}}class Eo extends s{constructor(t){super("w:settings"),this.root.push(new xo({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new L("w:displayBackgroundShape",!0)),void 0!==t.trackRevisions&&this.root.push(new L("w:trackRevisions",t.trackRevisions)),void 0!==t.evenAndOddHeaders&&this.root.push(new L("w:evenAndOddHeaders",t.evenAndOddHeaders)),void 0!==t.updateFields&&this.root.push(new L("w:updateFields",t.updateFields)),this.root.push(new _o({version:t.compatabilityModeVersion||15}));}}class To extends o{constructor(){super(...arguments),this.xmlKeys={val:"w:val"};}}class Ao extends s{constructor(t){super("w:name"),this.root.push(new To({val:t}));}}class So extends s{constructor(t){super("w:uiPriority"),this.root.push(new To({val:m(t)}));}}class Ro extends o{constructor(){super(...arguments),this.xmlKeys={type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"};}}class Io extends s{constructor(t,e){super("w:style"),this.root.push(new Ro(t)),e.name&&this.root.push(new Ao(e.name)),e.basedOn&&this.root.push(new F("w:basedOn",e.basedOn)),e.next&&this.root.push(new F("w:next",e.next)),e.link&&this.root.push(new F("w:link",e.link)),void 0!==e.uiPriority&&this.root.push(new So(e.uiPriority)),void 0!==e.semiHidden&&this.root.push(new L("w:semiHidden",e.semiHidden)),void 0!==e.unhideWhenUsed&&this.root.push(new L("w:unhideWhenUsed",e.unhideWhenUsed)),void 0!==e.quickFormat&&this.root.push(new L("w:qFormat",e.quickFormat));}}class No extends Io{constructor(t){super({type:"paragraph",styleId:t.id},t),this.paragraphProperties=new Bn(t.paragraph),this.runProperties=new St(t.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties);}}class Oo extends Io{constructor(t){super({type:"character",styleId:t.id},Object.assign({uiPriority:99,unhideWhenUsed:!0},t)),this.runProperties=new St(t.run),this.root.push(this.runProperties);}}class Co extends No{constructor(t){super(Object.assign(Object.assign({},t),{basedOn:"Normal",next:"Normal",quickFormat:!0}));}}class ko extends Co{constructor(t){super(Object.assign(Object.assign({},t),{id:"Title",name:"Title"}));}}class Do extends Co{constructor(t){super(Object.assign(Object.assign({},t),{id:"Heading1",name:"Heading 1"}));}}class Lo extends Co{constructor(t){super(Object.assign(Object.assign({},t),{id:"Heading2",name:"Heading 2"}));}}class Po extends Co{constructor(t){super(Object.assign(Object.assign({},t),{id:"Heading3",name:"Heading 3"}));}}class Fo extends Co{constructor(t){super(Object.assign(Object.assign({},t),{id:"Heading4",name:"Heading 4"}));}}class Bo extends Co{constructor(t){super(Object.assign(Object.assign({},t),{id:"Heading5",name:"Heading 5"}));}}class Mo extends Co{constructor(t){super(Object.assign(Object.assign({},t),{id:"Heading6",name:"Heading 6"}));}}class Uo extends Co{constructor(t){super(Object.assign(Object.assign({},t),{id:"Strong",name:"Strong"}));}}class zo extends No{constructor(t){super(Object.assign(Object.assign({},t),{id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0}));}}class Ho extends No{constructor(t){super(Object.assign(Object.assign({},t),{id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:Wt.AUTO}},run:{size:20}}));}}class jo extends Oo{constructor(t){super(Object.assign(Object.assign({},t),{id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0}}));}}class Ko extends Oo{constructor(t){super(Object.assign(Object.assign({},t),{id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20}}));}}class Go extends Oo{constructor(t){super(Object.assign(Object.assign({},t),{id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:W.SINGLE}}}));}}class Wo extends s{constructor(t){if(super("w:styles"),t.initialStyles&&this.root.push(t.initialStyles),t.importedStyles)for(const e of t.importedStyles)this.root.push(e);if(t.paragraphStyles)for(const e of t.paragraphStyles)this.root.push(new No(e));if(t.characterStyles)for(const e of t.characterStyles)this.root.push(new Oo(e));}}class Vo extends s{constructor(t){super("w:pPrDefault"),this.root.push(new Bn(t));}}class $o extends s{constructor(t){super("w:rPrDefault"),this.root.push(new St(t));}}class Xo extends s{constructor(t){super("w:docDefaults"),this.runPropertiesDefaults=new $o(t.run),this.paragraphPropertiesDefaults=new Vo(t.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults);}}class qo{newInstance(t){const e=(0, c.xml2js)(t,{compact:!1});let r;for(const t of e.elements||[])"w:styles"===t.name&&(r=t);if(void 0===r)throw new Error("can not find styles element");const n=r.elements||[];return new Wo({initialStyles:new p(r.attributes),importedStyles:n.map(t=>u(t))});}}class Zo{newInstance(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e;return {initialStyles:new An({mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",Ignorable:"w14 w15"}),importedStyles:[new Xo(null!==(e=t.document)&&void 0!==e?e:{}),new ko(Object.assign({run:{size:56}},t.title)),new Do(Object.assign({run:{color:"2E74B5",size:32}},t.heading1)),new Lo(Object.assign({run:{color:"2E74B5",size:26}},t.heading2)),new Po(Object.assign({run:{color:"1F4D78",size:24}},t.heading3)),new Fo(Object.assign({run:{color:"2E74B5",italics:!0}},t.heading4)),new Bo(Object.assign({run:{color:"2E74B5"}},t.heading5)),new Mo(Object.assign({run:{color:"1F4D78"}},t.heading6)),new Uo(Object.assign({run:{bold:!0}},t.strong)),new zo(t.listParagraph||{}),new Go(t.hyperlink||{}),new jo(t.footnoteReference||{}),new Ho(t.footnoteText||{}),new Ko(t.footnoteTextChar||{})]};}}class Yo{constructor(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r,n,s,i,o,a;if(this.currentRelationshipId=1,this.headers=[],this.footers=[],this.coreProperties=new Ai(Object.assign(Object.assign({},t),{creator:null!==(r=t.creator)&&void 0!==r?r:"Un-named",revision:null!==(n=t.revision)&&void 0!==n?n:1,lastModifiedBy:null!==(s=t.lastModifiedBy)&&void 0!==s?s:"Un-named"})),this.numbering=new yo(t.numbering?t.numbering:{config:[]}),this.fileRelationships=new On(),this.customProperties=new Ci(null!==(i=t.customProperties)&&void 0!==i?i:[]),this.appProperties=new yi(),this.footnotesWrapper=new Wi(),this.contentTypes=new Ti(),this.documentWrapper=new Cn({background:t.background||{}}),this.settings=new Eo({compatabilityModeVersion:t.compatabilityModeVersion,evenAndOddHeaders:!!t.evenAndOddHeaderAndFooters,trackRevisions:null===(o=t.features)||void 0===o?void 0:o.trackRevisions,updateFields:null===(a=t.features)||void 0===a?void 0:a.updateFields}),this.media=e.template&&e.template.media?e.template.media:new qi(),e.template&&(this.currentRelationshipId=e.template.currentRelationshipId+1),e.template&&t.externalStyles)throw Error("can not use both template and external styles");if(e.template){const t=new qo();this.styles=t.newInstance(e.template.styles);}else if(t.externalStyles){const e=new qo();this.styles=e.newInstance(t.externalStyles);}else if(t.styles){const e=new Zo().newInstance(t.styles.default);this.styles=new Wo(Object.assign(Object.assign({},e),t.styles));}else {const t=new Zo();this.styles=new Wo(t.newInstance());}if(this.addDefaultRelationships(),e.template&&e.template.headers)for(const t of e.template.headers)this.addHeaderToDocument(t.header,t.type);if(e.template&&e.template.footers)for(const t of e.template.footers)this.addFooterToDocument(t.footer,t.type);for(const e of t.sections)this.addSection(e);if(t.footnotes)for(const e in t.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(e),t.footnotes[e].children);}addSection(_ref12){let{headers:t={},footers:e={},children:r,properties:n}=_ref12;this.documentWrapper.View.Body.addSection(Object.assign(Object.assign({},n),{headerWrapperGroup:{default:t.default?this.createHeader(t.default):void 0,first:t.first?this.createHeader(t.first):void 0,even:t.even?this.createHeader(t.even):void 0},footerWrapperGroup:{default:e.default?this.createFooter(e.default):void 0,first:e.first?this.createFooter(e.first):void 0,even:e.even?this.createFooter(e.even):void 0}}));for(const t of r)this.documentWrapper.View.add(t);}createHeader(t){const e=new Xi(this.media,this.currentRelationshipId++);for(const r of t.options.children)e.add(r);return this.addHeaderToDocument(e),e;}createFooter(t){const e=new Li(this.media,this.currentRelationshipId++);for(const r of t.options.children)e.add(r);return this.addFooterToDocument(e),e;}addHeaderToDocument(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Jt.DEFAULT;this.headers.push({header:t,type:e}),this.documentWrapper.Relationships.createRelationship(t.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header","header".concat(this.headers.length,".xml")),this.contentTypes.addHeader(this.headers.length);}addFooterToDocument(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Jt.DEFAULT;this.footers.push({footer:t,type:e}),this.documentWrapper.Relationships.createRelationship(t.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer","footer".concat(this.footers.length,".xml")),this.contentTypes.addFooter(this.footers.length);}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml");}get Document(){return this.documentWrapper;}get Styles(){return this.styles;}get CoreProperties(){return this.coreProperties;}get Numbering(){return this.numbering;}get Media(){return this.media;}get FileRelationships(){return this.fileRelationships;}get Headers(){return this.headers.map(t=>t.header);}get Footers(){return this.footers.map(t=>t.footer);}get ContentTypes(){return this.contentTypes;}get CustomProperties(){return this.customProperties;}get AppProperties(){return this.appProperties;}get FootNotes(){return this.footnotesWrapper;}get Settings(){return this.settings;}}const Qo="";class Jo extends o{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"};}}class ta extends s{constructor(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};super("w:instrText"),this.properties=t,this.root.push(new Jo({space:j.PRESERVE}));let e="TOC";this.properties.captionLabel&&(e="".concat(e," \\a \"").concat(this.properties.captionLabel,"\"")),this.properties.entriesFromBookmark&&(e="".concat(e," \\b \"").concat(this.properties.entriesFromBookmark,"\"")),this.properties.captionLabelIncludingNumbers&&(e="".concat(e," \\c \"").concat(this.properties.captionLabelIncludingNumbers,"\"")),this.properties.sequenceAndPageNumbersSeparator&&(e="".concat(e," \\d \"").concat(this.properties.sequenceAndPageNumbersSeparator,"\"")),this.properties.tcFieldIdentifier&&(e="".concat(e," \\f \"").concat(this.properties.tcFieldIdentifier,"\"")),this.properties.hyperlink&&(e="".concat(e," \\h")),this.properties.tcFieldLevelRange&&(e="".concat(e," \\l \"").concat(this.properties.tcFieldLevelRange,"\"")),this.properties.pageNumbersEntryLevelsRange&&(e="".concat(e," \\n \"").concat(this.properties.pageNumbersEntryLevelsRange,"\"")),this.properties.headingStyleRange&&(e="".concat(e," \\o \"").concat(this.properties.headingStyleRange,"\"")),this.properties.entryAndPageNumberSeparator&&(e="".concat(e," \\p \"").concat(this.properties.entryAndPageNumberSeparator,"\"")),this.properties.seqFieldIdentifierForPrefix&&(e="".concat(e," \\s \"").concat(this.properties.seqFieldIdentifierForPrefix,"\"")),this.properties.stylesWithLevels&&this.properties.stylesWithLevels.length&&(e="".concat(e," \\t \"").concat(this.properties.stylesWithLevels.map(t=>"".concat(t.styleName,",").concat(t.level)).join(","),"\"")),this.properties.useAppliedParagraphOutlineLevel&&(e="".concat(e," \\u")),this.properties.preserveTabInEntries&&(e="".concat(e," \\w")),this.properties.preserveNewLineInEntries&&(e="".concat(e," \\x")),this.properties.hideTabAndPageNumbersInWebView&&(e="".concat(e," \\z")),this.root.push(e);}}class ea extends s{constructor(){super("w:sdtContent");}}class ra extends o{constructor(){super(...arguments),this.xmlKeys={alias:"w:val"};}}class na extends s{constructor(t){super("w:alias"),this.root.push(new ra({alias:t}));}}class sa extends s{constructor(t){super("w:sdtPr"),this.root.push(new na(t));}}class ia extends s{constructor(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"Table of Contents";let e=arguments.length>1?arguments[1]:undefined;super("w:sdt"),this.root.push(new sa(t));const r=new ea(),n=new Mn({children:[new Ot({children:[new nt(!0),new ta(e),new st()]})]});r.addChildElement(n);const s=new Mn({children:[new Ot({children:[new it()]})]});r.addChildElement(s),this.root.push(r);}}class oa{constructor(t,e){this.styleName=t,this.level=e;}}class aa{constructor(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{children:[]};this.options=t;}}class ca{constructor(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{children:[]};this.options=t;}}class ua extends o{constructor(){super(...arguments),this.xmlKeys={id:"w:id"};}}class la extends s{constructor(t){super("w:footnoteReference"),this.root.push(new ua({id:t}));}}class ha extends Ot{constructor(t){super({style:"FootnoteReference"}),this.root.push(new la(t));}}class pa extends s{constructor(t){super("w:ins"),this.root.push(new lt({id:t.id,author:t.author,date:t.date})),this.addChildElement(new Ct(t));}}class da extends o{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"};}}class fa extends s{constructor(){super("w:delInstrText"),this.root.push(new da({space:j.PRESERVE})),this.root.push("PAGE");}}class ma extends s{constructor(){super("w:delInstrText"),this.root.push(new da({space:j.PRESERVE})),this.root.push("NUMPAGES");}}class wa extends s{constructor(){super("w:delInstrText"),this.root.push(new da({space:j.PRESERVE})),this.root.push("SECTIONPAGES");}}class ga extends o{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"};}}class ya extends s{constructor(t){super("w:delText"),this.root.push(new ga({space:j.PRESERVE})),this.root.push(t);}}class ba extends s{constructor(t){super("w:del"),this.root.push(new lt({id:t.id,author:t.author,date:t.date})),this.deletedTextRunWrapper=new va(t),this.addChildElement(this.deletedTextRunWrapper);}}class va extends s{constructor(t){if(super("w:r"),this.root.push(new St(t)),t.children){for(const e of t.children)if("string"!=typeof e)this.root.push(e);else switch(e){case V.CURRENT:this.root.push(new nt()),this.root.push(new fa()),this.root.push(new st()),this.root.push(new it());break;case V.TOTAL_PAGES:this.root.push(new nt()),this.root.push(new ma()),this.root.push(new st()),this.root.push(new it());break;case V.TOTAL_PAGES_IN_SECTION:this.root.push(new nt()),this.root.push(new wa()),this.root.push(new st()),this.root.push(new it());break;default:this.root.push(new ya(e));}}else t.text&&this.root.push(new ya(t.text));if(t.break)for(let e=0;e<t.break;e++)this.root.splice(1,0,new et());}}var _a,xa,Ea;!function(t){t.CENTER="center",t.INSIDE="inside",t.LEFT="left",t.OUTSIDE="outside",t.RIGHT="right";}(_a||(_a={})),function(t){t.BOTTOM="bottom",t.CENTER="center",t.INSIDE="inside",t.OUTSIDE="outside",t.TOP="top";}(xa||(xa={})),function(t){t.DECIMAL="decimal",t.UPPER_ROMAN="upperRoman",t.LOWER_ROMAN="lowerRoman",t.UPPER_LETTER="upperLetter",t.LOWER_LETTER="lowerLetter",t.ORDINAL="ordinal",t.CARDINAL_TEXT="cardinalText",t.ORDINAL_TEXT="ordinalText",t.HEX="hex",t.CHICAGO="chicago",t.IDEOGRAPH_DIGITAL="ideographDigital",t.JAPANESE_COUNTING="japaneseCounting",t.AIUEO="aiueo",t.IROHA="iroha",t.DECIMAL_FULL_WIDTH="decimalFullWidth",t.DECIMAL_HALF_WIDTH="decimalHalfWidth",t.JAPANESE_LEGAL="japaneseLegal",t.JAPANESE_DIGITAL_TEN_THOUSAND="japaneseDigitalTenThousand",t.DECIMAL_ENCLOSED_CIRCLE="decimalEnclosedCircle",t.DECIMAL_FULL_WIDTH_2="decimalFullWidth2",t.AIUEO_FULL_WIDTH="aiueoFullWidth",t.IROHA_FULL_WIDTH="irohaFullWidth",t.DECIMAL_ZERO="decimalZero",t.BULLET="bullet",t.GANADA="ganada",t.CHOSUNG="chosung",t.DECIMAL_ENCLOSED_FULL_STOP="decimalEnclosedFullstop",t.DECIMAL_ENCLOSED_PAREN="decimalEnclosedParen",t.DECIMAL_ENCLOSED_CIRCLE_CHINESE="decimalEnclosedCircleChinese",t.IDEOGRAPH_ENCLOSED_CIRCLE="ideographEnclosedCircle",t.IDEOGRAPH_TRADITIONAL="ideographTraditional",t.IDEOGRAPH_ZODIAC="ideographZodiac",t.IDEOGRAPH_ZODIAC_TRADITIONAL="ideographZodiacTraditional",t.TAIWANESE_COUNTING="taiwaneseCounting",t.IDEOGRAPH_LEGAL_TRADITIONAL="ideographLegalTraditional",t.TAIWANESE_COUNTING_THOUSAND="taiwaneseCountingThousand",t.TAIWANESE_DIGITAL="taiwaneseDigital",t.CHINESE_COUNTING="chineseCounting",t.CHINESE_LEGAL_SIMPLIFIED="chineseLegalSimplified",t.CHINESE_COUNTING_TEN_THOUSAND="chineseCountingThousand",t.KOREAN_DIGITAL="koreanDigital",t.KOREAN_COUNTING="koreanCounting",t.KOREAN_LEGAL="koreanLegal",t.KOREAN_DIGITAL_2="koreanDigital2",t.VIETNAMESE_COUNTING="vietnameseCounting",t.RUSSIAN_LOWER="russianLower",t.RUSSIAN_UPPER="russianUpper",t.NONE="none",t.NUMBER_IN_DASH="numberInDash",t.HEBREW_1="hebrew1",t.HEBREW_2="hebrew2",t.ARABIC_ALPHA="arabicAlpha",t.ARABIC_ABJAD="arabicAbjad",t.HINDI_VOWELS="hindiVowels",t.HINDI_CONSONANTS="hindiConsonants",t.HINDI_NUMBERS="hindiNumbers",t.HINDI_COUNTING="hindiCounting",t.THAI_LETTERS="thaiLetters",t.THAI_NUMBERS="thaiNumbers",t.THAI_COUNTING="thaiCounting",t.BAHT_TEXT="bahtText",t.DOLLAR_TEXT="dollarText";}(Ea||(Ea={}));var Ta=r(733),Aa=r(479);class Sa{format(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const r=t.prepForXml(e);if(r)return r;throw Error("XMLComponent did not format correctly");}}class Ra{replace(t,e,r){let n=t;return e.forEach((t,e)=>{n=n.replace(new RegExp("{".concat(t.fileName,"}"),"g"),(r+e).toString());}),n;}getMediaData(t,e){return e.Array.filter(e=>t.search("{".concat(e.fileName,"}"))>0);}}class Ia{replace(t,e){let r=t;for(const t of e)r=r.replace(new RegExp("{".concat(t.reference,"-").concat(t.instance,"}"),"g"),t.numId.toString());return r;}}var Na=function(t,e,r,n){return new(r||(r=Promise))(function(s,i){function o(t){try{c(n.next(t));}catch(t){i(t);}}function a(t){try{c(n.throw(t));}catch(t){i(t);}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e);})).then(o,a);}c((n=n.apply(t,e||[])).next());});};class Oa{static toBuffer(t,e){return Na(this,void 0,void 0,function*(){const r=this.compiler.compile(t,e);return yield r.generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"});});}static toBase64String(t,e){return Na(this,void 0,void 0,function*(){const r=this.compiler.compile(t,e);return yield r.generateAsync({type:"base64",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"});});}static toBlob(t,e){return Na(this,void 0,void 0,function*(){const r=this.compiler.compile(t,e);return yield r.generateAsync({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"});});}}Oa.compiler=new class{constructor(){this.formatter=new Sa(),this.imageReplacer=new Ra(),this.numberingReplacer=new Ia();}compile(t,e){const r=new Ta(),n=this.xmlifyFile(t,e),s=new Map(Object.entries(n));for(const[,t]of s)if(Array.isArray(t))for(const e of t)r.file(e.path,e.data);else r.file(t.path,t.data);for(const e of t.Media.Array){const t=e.stream;r.file("word/media/".concat(e.fileName),t);}return r;}xmlifyFile(t,e){const r=t.Document.Relationships.RelationshipCount+1,n=Aa(this.formatter.format(t.Document.View,{viewWrapper:t.Document,file:t}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),s=this.imageReplacer.getMediaData(n,t.Media);return {Relationships:{data:(()=>(s.forEach((e,n)=>{t.Document.Relationships.createRelationship(r+n,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image","media/".concat(e.fileName));}),Aa(this.formatter.format(t.Document.Relationships,{viewWrapper:t.Document,file:t}),{indent:e,declaration:{encoding:"UTF-8"}})))(),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const e=this.imageReplacer.replace(n,s,r);return this.numberingReplacer.replace(e,t.Numbering.ConcreteNumbering);})(),path:"word/document.xml"},Styles:{data:(()=>{const r=Aa(this.formatter.format(t.Styles,{viewWrapper:t.Document,file:t}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(r,t.Numbering.ConcreteNumbering);})(),path:"word/styles.xml"},Properties:{data:Aa(this.formatter.format(t.CoreProperties,{viewWrapper:t.Document,file:t}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:Aa(this.formatter.format(t.Numbering,{viewWrapper:t.Document,file:t}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:Aa(this.formatter.format(t.FileRelationships,{viewWrapper:t.Document,file:t}),{indent:e,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:t.Headers.map((r,n)=>{const s=Aa(this.formatter.format(r.View,{viewWrapper:r,file:t}),{indent:e,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(s,t.Media).forEach((t,e)=>{r.Relationships.createRelationship(e,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image","media/".concat(t.fileName));}),{data:Aa(this.formatter.format(r.Relationships,{viewWrapper:r,file:t}),{indent:e,declaration:{encoding:"UTF-8"}}),path:"word/_rels/header".concat(n+1,".xml.rels")};}),FooterRelationships:t.Footers.map((r,n)=>{const s=Aa(this.formatter.format(r.View,{viewWrapper:r,file:t}),{indent:e,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(s,t.Media).forEach((t,e)=>{r.Relationships.createRelationship(e,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image","media/".concat(t.fileName));}),{data:Aa(this.formatter.format(r.Relationships,{viewWrapper:r,file:t}),{indent:e,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footer".concat(n+1,".xml.rels")};}),Headers:t.Headers.map((r,n)=>{const s=Aa(this.formatter.format(r.View,{viewWrapper:r,file:t}),{indent:e,declaration:{encoding:"UTF-8"}}),i=this.imageReplacer.getMediaData(s,t.Media);return {data:this.imageReplacer.replace(s,i,0),path:"word/header".concat(n+1,".xml")};}),Footers:t.Footers.map((r,n)=>{const s=Aa(this.formatter.format(r.View,{viewWrapper:r,file:t}),{indent:e,declaration:{encoding:"UTF-8"}}),i=this.imageReplacer.getMediaData(s,t.Media);return {data:this.imageReplacer.replace(s,i,0),path:"word/footer".concat(n+1,".xml")};}),ContentTypes:{data:Aa(this.formatter.format(t.ContentTypes,{viewWrapper:t.Document,file:t}),{indent:e,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:Aa(this.formatter.format(t.CustomProperties,{viewWrapper:t.Document,file:t}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:Aa(this.formatter.format(t.AppProperties,{viewWrapper:t.Document,file:t}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:Aa(this.formatter.format(t.FootNotes.View,{viewWrapper:t.FootNotes,file:t}),{indent:e,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:Aa(this.formatter.format(t.FootNotes.Relationships,{viewWrapper:t.FootNotes,file:t}),{indent:e,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:Aa(this.formatter.format(t.Settings,{viewWrapper:t.Document,file:t}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"}};}}();var Ca=function(t,e,r,n){return new(r||(r=Promise))(function(s,i){function o(t){try{c(n.next(t));}catch(t){i(t);}}function a(t){try{c(n.throw(t));}catch(t){i(t);}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e);})).then(o,a);}c((n=n.apply(t,e||[])).next());});};const ka={"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header":"header","http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer":"footer","http://schemas.openxmlformats.org/officeDocument/2006/relationships/image":"image","http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink":"hyperlink"};var Da;!function(t){t.HEADER="header",t.FOOTER="footer",t.IMAGE="image",t.HYPERLINK="hyperlink";}(Da||(Da={}));class La{extract(t){return Ca(this,void 0,void 0,function*(){const e=yield Ta.loadAsync(t),r=yield e.files["word/document.xml"].async("text"),n=yield e.files["word/_rels/document.xml.rels"].async("text"),s=this.extractDocumentRefs(r),i=this.findReferenceFiles(n),o=new qi();return {headers:yield this.createHeaders(e,s,i,o,0),footers:yield this.createFooters(e,s,i,o,s.headers.length),currentRelationshipId:s.footers.length+s.headers.length,styles:yield e.files["word/styles.xml"].async("text"),titlePageIsDefined:this.checkIfTitlePageIsDefined(r),media:o};});}createFooters(t,e,r,n,s){return Ca(this,void 0,void 0,function*(){const i=e.footers.map((e,i)=>Ca(this,void 0,void 0,function*(){const o=r.find(t=>t.id===e.id);if(null===o||!o)throw new Error("Can not find target file for id ".concat(e.id));const a=yield t.files["word/".concat(o.target)].async("text"),l=(0, c.xml2js)(a,{compact:!1,captureSpacesBetweenElements:!0});if(!l.elements)return;const h=u(l.elements.reduce((t,e)=>"w:ftr"===e.name?e:t)),p=new Li(n,s+i,h);return yield this.addRelationshipToWrapper(o,t,p,n),{type:e.type,footer:p};})).filter(t=>!!t);return Promise.all(i);});}createHeaders(t,e,r,n,s){return Ca(this,void 0,void 0,function*(){const i=e.headers.map((e,i)=>Ca(this,void 0,void 0,function*(){const o=r.find(t=>t.id===e.id);if(null===o||!o)throw new Error("Can not find target file for id ".concat(e.id));const a=yield t.files["word/".concat(o.target)].async("text"),l=(0, c.xml2js)(a,{compact:!1,captureSpacesBetweenElements:!0});if(!l.elements)return;const h=u(l.elements.reduce((t,e)=>"w:hdr"===e.name?e:t)),p=new Xi(n,s+i,h);return yield this.addRelationshipToWrapper(o,t,p,n),{type:e.type,header:p};})).filter(t=>!!t);return Promise.all(i);});}addRelationshipToWrapper(t,e,r,n){return Ca(this,void 0,void 0,function*(){const s=e.files["word/_rels/".concat(t.target,".rels")];if(!s)return;const i=yield s.async("text"),o=this.findReferenceFiles(i).filter(t=>t.type===Da.IMAGE),a=this.findReferenceFiles(i).filter(t=>t.type===Da.HYPERLINK);for(const t of o){const s=yield e.files["word/".concat(t.target)].async("nodebuffer"),i=n.addMedia(s,{width:100,height:100});r.Relationships.createRelationship(t.id,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image","media/".concat(i.fileName));}for(const t of a)r.Relationships.createRelationship(t.id,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",t.target,Zt.EXTERNAL);});}findReferenceFiles(t){const e=(0, c.xml2js)(t,{compact:!0});return (Array.isArray(e.Relationships.Relationship)?e.Relationships.Relationship:[e.Relationships.Relationship]).map(t=>{if(void 0===t._attributes)throw Error("relationship element has no attributes");return {id:this.parseRefId(t._attributes.Id),type:ka[t._attributes.Type],target:t._attributes.Target};}).filter(t=>null!==t.type);}extractDocumentRefs(t){const e=(0, c.xml2js)(t,{compact:!0})["w:document"]["w:body"]["w:sectPr"],r=e["w:headerReference"];let n;n=void 0===r?[]:Array.isArray(r)?r:[r];const s=n.map(t=>{if(void 0===t._attributes)throw Error("header reference element has no attributes");return {type:t._attributes["w:type"],id:this.parseRefId(t._attributes["r:id"])};}),i=e["w:footerReference"];let o;return o=void 0===i?[]:Array.isArray(i)?i:[i],{headers:s,footers:o.map(t=>{if(void 0===t._attributes)throw Error("footer reference element has no attributes");return {type:t._attributes["w:type"],id:this.parseRefId(t._attributes["r:id"])};})};}checkIfTitlePageIsDefined(t){return void 0!==(0, c.xml2js)(t,{compact:!0})["w:document"]["w:body"]["w:sectPr"]["w:titlePg"];}parseRefId(t){const e=/^rId(\d+)$/.exec(t);if(null===e)throw new Error("Invalid ref id");return parseInt(e[1],10);}}})(),n;})();});});////////////////////////////////////////////////////////////////////////////////
    // ImageLoader.ts
    // 2021. 10. 26. created by woori
    // -----------------------------------------------------------------------------
    // Copyright (c) 2020-2021 Wooritech Inc.
    // All rights reserved.
    ////////////////////////////////////////////////////////////////////////////////
    class ImageLoader{constructor(){//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._elements=[];this._images={};this._loadCount=0;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get loaded(){return this._elements.length===0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    add(url,opacity){if(!(url in this._images)){const elt=document.createElement('img');elt.crossOrigin='anonymous';elt.src=url;elt.style.opacity=opacity;this._elements.push(elt);this._images[url]='';}}get(url){return this._images[url];}load(){let trials=arguments.length>0&&arguments[0]!==undefined?arguments[0]:3;if(this._loadCount<trials){for(let i=this._elements.length-1;i>=0;i--){const elt=this._elements[i];if(elt.complete&&elt.naturalHeight>0){const canvas=document.createElement("canvas");const ctx=canvas.getContext("2d");const alpha=parseFloat(elt.style.opacity)||1;canvas.width=elt.width;canvas.height=elt.height;ctx.globalAlpha=alpha;ctx.drawImage(elt,0,0);const dataUrl=canvas.toDataURL("image/png");this._images[elt.src]=dataUrl;this._elements.splice(i,1);}}this._loadCount++;return this._elements.length===0;}return true;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * 스타일에 명시적으로 설정된 border style들의 계산된 값들을 가져온다.
     *
     * @param css 명시적 스타일.
     * @param cs 계산된 스타일.
     */function extractBorderStyles(css,cs){const borders={};if(css.borderLeft){const style=cs.borderLeftStyle;const color=cs.borderLeftColor;borders.left={style,color};}if(css.borderRight){const style=cs.borderRightStyle;const color=cs.borderRightColor;borders.right={style,color};}if(css.borderTop){const style=cs.borderTopStyle;const color=cs.borderTopColor;borders.top={style,color};}if(css.borderBottom){const style=cs.borderBottomStyle;const color=cs.borderBottomColor;borders.bottom={style,color};}return Utils.isEmpty(borders)?null:borders;}function dboxToImage(item,dom){const r=dom.getBoundingClientRect();const span1=dom.firstElementChild.children[0].firstElementChild.firstElementChild;const span2=dom.firstElementChild.children[1].firstElementChild.firstElementChild;const line=dom.children[1];const canvas=document.createElement('canvas');const d=canvas.getContext('2d');canvas.width=r.width;canvas.height=r.height;// line
    d.strokeStyle=getComputedStyle(line).borderTopColor;d.beginPath();d.moveTo(0,0);d.lineTo(r.width,r.height);d.stroke();let cs=getComputedStyle(span1);d.textBaseline='bottom';d.fillStyle=cs.color;d.font=cs.font;d.fillText(span1.textContent,0,r.height-1);cs=getComputedStyle(span2);d.textBaseline='top';d.textAlign='right';d.fillStyle=cs.color;d.font=cs.font;d.fillText(span2.textContent,r.width,1);return canvas.toDataURL();}////////////////////////////////////////////////////////////////////////////////
    const BORDER_TOP$1=0;const BORDER_BOTTOM$1=1;const BORDER_LEFT$1=2;const BORDER_RIGHT$1=3;const BORDER_STYLES$1=['borderTopStyle','borderBottomStyle','borderLeftStyle','borderRightStyle'];const BORDER_COLORS$1=['borderTopColor','borderBottomColor','borderLeftColor','borderRightColor'];class DOCObject{}/**
     */class DOCElement extends DOCObject{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(ctx,dom,model){super();this._dom=dom;this._model=model;if(dom instanceof Text){this._elements=[];}else {this._elements=this.$_build(ctx,dom,model)||[];}// border or background
    if(dom instanceof Element&&model){const elts=this._elements;const r=ctx.getBounds(dom);const cs=getComputedStyle(dom);const backColor=ColorUtils.cssToColor(cs.backgroundColor);// borders
    // TODO: border가 사방 모두인 경우 다르게 처리할 필요!
    for(let dir=0;dir<BORDER_STYLES$1.length;dir++){const style=cs[BORDER_STYLES$1[dir]];if(style&&style!='none'){let x1;let y1;let x2;let y2;switch(dir){case BORDER_TOP$1:x1=r.x;x2=r.x+r.width;y1=y2=r.y;break;case BORDER_BOTTOM$1:x1=r.x;x2=r.x+r.width;y1=y2=r.y+r.height>>>0;break;case BORDER_LEFT$1:x1=x2=r.x;y1=r.y;y2=r.y+r.height;break;case BORDER_RIGHT$1:x1=x2=r.x+r.width>>>0;y1=r.y;y2=r.y+r.height;break;}// const color = ColorUtils.cssToColor(cs[BORDER_COLORS[dir]]);
    const line=new DOCLine(ctx,x1,y1,x2,y2,style,cs[BORDER_COLORS$1[dir]]);elts.unshift(line);}}// background
    if(backColor){const r=new DOCRectangle(ctx,dom,null);r.color=backColor.color;r.alpha=backColor.alpha;elts.unshift(r);}}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get model(){return this._model;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    write(ctx){return this._doWrite(ctx,this._dom,this._model);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _doWrite(ctx,dom,model){const docItems=[];const elts=this._elements;elts===null||elts===void 0?void 0:elts.forEach(elt=>{const items=elt.write(ctx);items.forEach(item=>docItems.push(item));});return docItems;}$_build(ctx,dom,model){return this._doBuild(ctx,dom,model);}_doBuild(ctx,dom,model){const elts=[];const childs=dom.children;for(let i=0;i<childs.length;i++){const dom=childs[i];const elt=ctx.createDOCElements(dom);if(Utils.isArray(elt)){elts.push(...elt);}else if(elt){elts.push(elt);}}return elts;}_fontName(css){if(css){const s=css.split(/,\s*/)[0];if(s.startsWith('"')){return s.substring(1,s.length-1);}else {return s;}}else {return '굴림';}}_fontSize(css){if(css){if(css.endsWith('px')){return Math.round(parseInt(css)*72/96)+'pt';}else if(css.endsWith('pt')){return css;}else {return css+'pt';}}else {return '10px';}}_toBold(weight){return parseInt(weight)>=700;}_toUnderline(css){if(css&&css.indexOf('underline')>=0){return {};}}_toColor(css){function pad(s){s=(+s).toString(16);return s.length===1?'0'+s:s;}if(css.startsWith('#')){return css.substr(css.length-6);}else if(css.startsWith('rgb(')){const arr=css.substring(4,css.length-1).split(/,\s*/);if(arr[2]==='.8')debugger;return pad(arr[0])+pad(arr[1])+pad(arr[2]);}else if(css.startsWith('rgba(')){const arr=css.substring(5,css.length-1).split(/,\s*/);if(arr[3]==='.8')debugger;return pad(arr[0])+pad(arr[1])+pad(arr[2]);}return '000000';}_toDoc(px){return px*20*72/96>>0;}_toPosition(px){return px*914400/96>>0;}_toSize(px){//return (px * 72 / 96) >> 0;
    return px>>0;}_toShading(color,alpha){if(alpha<1){return {fill:Utils.pad16(ColorUtils.lighten(color,alpha),6)};}else {return {fill:Utils.pad16(color,6)};}}_createText(s,cs){if(s.length===1&&s.charCodeAt(0)===160/* &nbsp */){s='';}return new build.TextRun({text:s,font:this._fontName(cs.fontFamily),size:this._fontSize(cs.fontSize),color:this._toColor(cs.color),italics:cs.fontStyle==='italic',bold:this._toBold(cs.fontWeight),underline:this._toUnderline(cs.textDecoration)});}_getFloating(r){return {// behindDocument: true,
    horizontalPosition:{relative:build.HorizontalPositionRelativeFrom.PAGE,offset:this._toPosition(r.x)},verticalPosition:{relative:build.VerticalPositionRelativeFrom.PAGE,offset:this._toPosition(r.y)},allowOverlap:true};}}class DOCHtmlElement extends DOCElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(ctx,dom,model){super(ctx,dom,model);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doBuild(ctx,dom,model){const elts=[];const childs=dom.childNodes;for(let i=0;i<childs.length;i++){const dom=childs[i];const elt=dom instanceof Text?new DOCText(ctx,dom,null):ctx.createDOCElements(dom);if(Utils.isArray(elt)){elts.push(...elt);}else if(elt){elts.push(elt);}}return elts;}}/**
     * 빈 paragraph.
     * TODO: 테이블셀에 포함되는 경우 Paragraph로 처리가 되지 않는다. 이미지로 대체한다.
     */class DOCRectangle extends DOCElement{constructor(){super(...arguments);this.alpha=1;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doWrite(ctx,dom,model){if(ctx.inTable){const r=ctx.getBounds(dom);return [new build.ImageRun({data:this.$_createImage(ctx,r,dom),transformation:{width:this._toSize(r.width),height:this._toSize(r.height)}})];}const r=ctx.getBounds(dom);return [new build.Paragraph({frame:{position:{x:this._toDoc(r.x),y:this._toDoc(r.y)},width:this._toDoc(r.width)*1,height:this._toDoc(r.height)*1,anchor:{horizontal:build.FrameAnchorType.TEXT,vertical:build.FrameAnchorType.TEXT// .PAGE,
    },alignment:{x:build.HorizontalPositionAlign.CENTER,y:build.VerticalPositionAlign.CENTER}},shading:this._toShading(this.color,this.alpha),// border: {
    //     left: {
    //         space: 0,
    //         size: 0,
    //         style: BorderStyle.SINGLE
    //     },      
    //     right: {
    //         space: 0,
    //         size: 0,
    //         style: BorderStyle.SINGLE
    //     },      
    //     top: {
    //         space: 0,
    //         size: 0,
    //         style: BorderStyle.SINGLE
    //     },      
    //     bottom: {
    //         space: 0,
    //         size: 0,
    //         style: BorderStyle.SINGLE
    //     },      
    // },
    children:[]})];}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_createImage(ctx,r,dom){const canvas=document.createElement('canvas');const d=canvas.getContext('2d');canvas.width=Math.max(1,r.width);canvas.height=Math.max(1,r.height);d.fillStyle=ColorUtils.colorToCss(this.color,this.alpha);d.fillRect(0,0,canvas.width,canvas.height);return canvas.toDataURL();}}////////////////////////////////////////////////////////////////////////////////
    /**
     * A framed text item.
     */class DOCText extends DOCElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doWrite(ctx,dom){const r=dom instanceof Text?ctx.getTextBounds(dom):ctx.getBounds(dom);const cs=getComputedStyle(dom instanceof Text?dom.parentElement:dom);const s=dom.textContent;if(ctx.inTable){return [this._createText(s,cs)];}return [new build.Paragraph({frame:{position:{x:this._toDoc(r.x),y:this._toDoc(r.y-r.height*0.2)// TODO: 0.2는 정렬 설정으로 안돼서 대충 설정하는 값. 확인 필요!
    },width:this._toDoc(r.width)*1.05,height:this._toDoc(r.height)*1,anchor:{horizontal:build.FrameAnchorType.PAGE,vertical:build.FrameAnchorType.PAGE},alignment:{x:build.HorizontalPositionAlign.CENTER,y:build.VerticalPositionAlign.CENTER// 의미 없는 설정인 듯.
    }},// border: {
    //     left: {
    //         space: 0,
    //         size: 0,
    //         style: BorderStyle.SINGLE
    //     },      
    //     right: {
    //         space: 0,
    //         size: 0,
    //         style: BorderStyle.SINGLE
    //     },      
    //     top: {
    //         space: 0,
    //         size: 0,
    //         style: BorderStyle.SINGLE
    //     },      
    //     bottom: {
    //         space: 0,
    //         size: 0,
    //         style: BorderStyle.SINGLE
    //     },      
    // },
    children:[this._createText(s,cs)]})];}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doBuild(ctx,dom,model){return;}}/**
     * Image.
     */class DOCImage extends DOCElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(ctx,dom,model){super(ctx,dom,model);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doBuild(ctx,dom,model){const css=getComputedStyle(dom);const url=Utils.getImageUrl(css);if(url.startsWith('data:image')){this._data=url;}else if(url.startsWith('http')){ctx.addImage(this._url=url,css.opacity);}return;}_doWrite(ctx,dom,model){const data=this._data||ctx.getImage(this._url)||new Uint8Array(0);const r=ctx.getBounds(dom);const children=[new build.ImageRun({data:data,transformation:{width:this._toSize(r.width),height:this._toSize(r.height)},floating:ctx.inTable?void 0:this._getFloating(r)})];if(ctx.inTable){return children;}else {return [new build.Paragraph({children:children})];}}}/**
     * QRCode.
     */class DOCQrcode extends DOCElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(ctx,dom,model){super(ctx,dom,model);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doBuild(ctx,dom,model){const imageElement=dom.querySelector("img");if(imageElement)this._data=imageElement.src;return;}_doWrite(ctx,dom,model){const data=this._data||new Uint8Array(0);const r=ctx.getBounds(dom);const children=[new build.ImageRun({data:data,transformation:{width:this._toSize(r.width),height:this._toSize(r.height)},floating:ctx.inTable?void 0:this._getFloating(r)})];if(ctx.inTable){return children;}else {return [new build.Paragraph({children:children})];}}}/**
     * Image.
     */class DOCCellDbox extends DOCElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(ctx,dom,model){super(ctx,dom,model);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doBuild(ctx,dom,model){this._data=dboxToImage(model,dom);return;}_doWrite(ctx,dom,model){const r=ctx.getBounds(dom);const children=[new build.ImageRun({data:this._data,transformation:{width:this._toSize(r.width),height:this._toSize(r.height)},floating:ctx.inTable?void 0:this._getFloating(r)})];return children;}}/**
     * Svg.
     */class DOCSvg extends DOCElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(ctx,dom,svg,model){super(ctx,dom,model);const svgBlob=new Blob([svg],{type:'image/svg+xml;charset=utf-8'});this._svgData=(URL||webkitURL).createObjectURL(svgBlob);// this._svgData = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svg)));
    ctx.addImage(this._svgData,'1');}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doBuild(ctx,dom,model){return;}_doWrite(ctx,dom,model){const data=ctx.getImage(this._svgData+'');const r=ctx.getBounds(dom);const children=[new build.ImageRun({data:data||new Uint8Array(0),transformation:{width:this._toSize(r.width),height:this._toSize(r.height)},floating:ctx.inTable?void 0:this._getFloating(r)})];if(ctx.inTable){return children;}else {return [new build.Paragraph({children:children})];}}}/**
     * Canvas.
     */class DOCCanvas extends DOCElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(ctx,dom,model){super(ctx,dom,model);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doBuild(ctx,dom,model){this._data=dom.toDataURL();return;}_doWrite(ctx,dom,model){const r=ctx.getBounds(dom);const children=[new build.ImageRun({data:this._data,transformation:{width:this._toSize(r.width),height:this._toSize(r.height)},floating:ctx.inTable?void 0:this._getFloating(r)})];if(ctx.inTable){return children;}else {return [new build.Paragraph({children:children})];}}}/**
     * BarItem.
     */class DOCBar extends DOCElement{}/**
     * Line.
     * TODO: 현재, docx 라이브러리에 선 등 도형 관련된 기능이 미포함. 이미지로 대체한다.
     */class DOCLine extends DOCElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(ctx,x1,y1,x2,y2,cssStyle,cssColor){super(ctx,null,null);this._x1=Math.min(x1,x2);this._y1=Math.min(y1,y2);this._x2=Math.max(x1,x2);this._y2=Math.max(y1,y2);this._x11=x1-this._x1;this._y11=y1-this._y1;this._x22=x2-this._x1;this._y22=y2-this._y1;this._cssStyle=cssStyle;this._cssColor=cssColor;}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static bulidLine(x1,y1,x2,y2,cssStyle,cssColor){const canvas=document.createElement('canvas');const d=canvas.getContext('2d');canvas.width=Math.max(1,Math.abs(x2-x1));canvas.height=Math.max(1,Math.abs(y2-y1));switch(cssStyle){case'dashed':d.setLineDash([4,3]);break;case'dotted':d.setLineDash([2,2]);break;}d.strokeStyle=cssColor;d.beginPath();d.moveTo(x1,y1);d.lineTo(x2,y2);d.stroke();const data=canvas.toDataURL();return data;}static write(ctx,data,x,y,w,h){const children=[new build.ImageRun({data:data,transformation:{width:w,height:h},floating:ctx.inTable?void 0:{horizontalPosition:{relative:build.HorizontalPositionRelativeFrom.PAGE,offset:x},verticalPosition:{relative:build.VerticalPositionRelativeFrom.PAGE,offset:y},allowOverlap:true}})];if(ctx.inTable){return children;}else {return [new build.Paragraph({children:children})];}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doBuild(ctx,dom,model){return;}_doWrite(ctx,dom,model){if(!this._data){this._data=DOCLine.bulidLine(this._x11,this._y11,this._x22,this._y22,this._cssStyle,this._cssColor);}return DOCLine.write(ctx,this._data,this._toPosition(this._x1),this._toPosition(this._y1),this._toSize(Math.max(1,this._x2-this._x1)),this._toSize(Math.max(1,this._y2-this._y1)));}}/**
     * Diagonal Line.
     */class DOCDiagonalLine extends DOCElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(ctx,dom,model){super(ctx,dom,model);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doBuild(ctx,dom,model){const r=dom.getBoundingClientRect();if(model.reversed){this._data=DOCLine.bulidLine(0,r.height,r.width,0,'solid','black');}else {this._data=DOCLine.bulidLine(0,0,r.width,r.height,'solid','black');}return;}_doWrite(ctx,dom,model){const r=ctx.getBounds(dom);return DOCLine.write(ctx,this._data,this._toPosition(r.x),this._toPosition(r.y),this._toSize(r.width),this._toSize(r.height));}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Docx document model.
     */class DOCModel{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(ctx,report,printPages){this._pages=[];printPages.forEach(p=>{ctx.setPageDiv(p.page);this._pages.push(new DOCPage(ctx,p));});}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get pages(){return this._pages;}}/**
     * Page model.
     */class DOCPage extends DOCObject{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(ctx,page){super();this._page=page;this._elements=this.$_build(ctx);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    write(ctx){const list=[];ctx.setPageDiv(this._page.page);for(let elt of this._elements){const items=elt.write(ctx);items===null||items===void 0?void 0:items.forEach(item=>list.push(item));}return list;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_buildBackground(ctx,div){return new DOCElement(ctx,div,null);}$_buildForeground(ctx,div){return new DOCElement(ctx,div,null);}$_buildPageHeader(ctx,div){return new DOCElement(ctx,div,ctx.report.page.pageHeader);}$_buildPageFooter(ctx,div){return new DOCElement(ctx,div,ctx.report.page.pageFooter);}$_buildPageBody(ctx,contents){const elts=[];for(let dom of contents){const elt=ctx.createDOCElements(dom);if(Utils.isArray(elt)){elts.push(...elt);}else if(elt){elts.push(elt);}}return elts;}$_build(ctx){const page=this._page;const elts=[];elts.push(this.$_buildBackground(ctx,page.background));elts.push(this.$_buildPageHeader(ctx,page.pageHeader));this.$_buildPageBody(ctx,page.contents).forEach(elt=>elt&&elts.push(elt));elts.push(this.$_buildPageFooter(ctx,page.pageFooter));elts.push(this.$_buildForeground(ctx,page.foreground));return elts;}}////////////////////////////////////////////////////////////////////////////////
    const _alignmets={l:build.AlignmentType.LEFT,c:build.AlignmentType.CENTER,r:build.AlignmentType.RIGHT};/**
     * Docx table for TableElement.
     */class DOCTable extends DOCElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(ctx,dom,model){super(ctx,dom,model);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    write(ctx){const save=ctx.inTable;ctx.inTable=this;try{return super.write(ctx);}finally{ctx.inTable=save;}}_doBuild(ctx,dom,model){var _a;// 테이블 셀들에 포함된 아이템들의 element들을 미리 구성해야 한다.
    const trows=dom.rows;const elts=this._elts=[];const save=ctx.inTable;ctx.inTable=this;try{for(let i=0;i<trows.length;i++){const tcells=trows[i].cells;const row=[];for(let j=0;j<tcells.length;j++){const td=tcells[j];const cs=getComputedStyle(td);if(cs.display==='none'){row.push(null);}else {const elt=ctx.createDOCElements((_a=td.firstElementChild)===null||_a===void 0?void 0:_a.firstElementChild);row.push(elt);}}elts.push(row);}}finally{ctx.inTable=save;}return;}_doWrite(ctx,dom,model){const tcols=dom.firstChild.children;const nCol=tcols.length;const colWidths=new Array(nCol);const r=ctx.getBounds(dom);for(let i=0;i<nCol;i++){const tc=tcols[i];// 디자이너에서 clientWidth를 0으로 리턴한다 !
    // colWidths[i] = this._toDoc(tcols[i].clientWidth);
    const w=tc[T_WIDTH];colWidths[i]=this._toDoc(isNaN(w)?+tc.dataset.width:w);}return [new build.Table({float:{horizontalAnchor:build.TableAnchorType.PAGE,verticalAnchor:build.TableAnchorType.PAGE,overlap:build.OverlapType.OVERLAP,absoluteHorizontalPosition:this._toDoc(r.x),absoluteVerticalPosition:this._toDoc(r.y)},layout:build.TableLayoutType.FIXED,columnWidths:colWidths,rows:this.$_writeRows(ctx,dom.rows)})];}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_writeRows(ctx,trows){const rows=[];for(let i=0;i<trows.length;i++){rows.push(this.$_writeRow(ctx,i,trows[i]));}return rows;}$_writeRow(ctx,r,tr){function getBorder(border){if(border){// TODO: border color 등...
    if(border.style==='none'){// 현재, BorderStyle.NONE을 지원하지 않는 것 같다.
    return {style:build.BorderStyle.NONE,size:0,color:'ffffff'};}const color=ColorUtils.cssToColor(border.color,false);if(color.alpha===0){return {style:build.BorderStyle.NONE,size:0,color:'ffffff'};}}}const tcells=tr.cells;const trCs=getComputedStyle(tr);const trFill=ColorUtils.cssToColor(trCs.backgroundColor);const cells=[];for(let i=0;i<tcells.length;i++){const td=tcells[i];const csTd=getComputedStyle(td);if(csTd.display==='none')continue;const fill=ColorUtils.cssToColor(csTd.backgroundColor)||trFill;let cs=csTd;const span=td.getElementsByClassName(TextItemElementBase.SPAN)[0];if(span){cs=getComputedStyle(span);}const borderStyles=extractBorderStyles(td.style,csTd);let borders;if(borderStyles){// TODO: left, right가 아니고 start, end ?
    borders={start:getBorder(borderStyles.left),end:getBorder(borderStyles.right),top:getBorder(borderStyles.top),bottom:getBorder(borderStyles.bottom)};}const align=_alignmets[td.dataset[T_ALIGN]];const elt=this._elts[r][i];let childs;if(elt instanceof DOCElement&&elt.model instanceof TextItemBase){childs=[this._createText(td.textContent,cs)];}else if(Array.isArray(elt)){childs=[];for(let e of elt){childs.push(...e.write(ctx));}}else if(elt){childs=elt.write(ctx);}else {childs=[];}let isRun=true;for(let c of childs){if(!(c instanceof build.Run)){isRun=false;break;}}if(isRun){childs=[new build.Paragraph({children:childs,alignment:align// spacing: {
    //     lineRule: LineRuleType.EXACTLY
    // }
    })];}const cell=new build.TableCell({columnSpan:td.colSpan||1,rowSpan:td.rowSpan||1,children:childs,shading:fill&&this._toShading(fill.color,fill.alpha),verticalAlign:build.VerticalAlign.CENTER,borders:borders});cells.push(cell);}return new build.TableRow({height:{value:this._toDoc(tr.clientHeight),rule:build.HeightRule.EXACT},children:cells});}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Docx table for BoxContainerElement.
     */class DOCBoxTable extends DOCElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(ctx,dom,model){super(ctx,dom,model);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    write(ctx){const save=ctx.inTable;ctx.inTable=this;try{return super.write(ctx);}finally{ctx.inTable=save;}}_doBuild(ctx,dom,model){// 테이블 셀들에 포함된 아이템들의 element들을 미리 구성해야 한다.
    const childs=Array.from(dom.firstElementChild.children);this._vertical=model instanceof ColumnBoxContainer;const elts=this._elts=[];const save=ctx.inTable;ctx.inTable=this;try{for(let i=0;i<childs.length;i++){const elt=ctx.createDOCElements(childs[i]);elts.push(elt);}}finally{ctx.inTable=save;}return;}_doWrite(ctx,dom,item){const childs=Array.from(dom.firstElementChild.children);const elts=this._elts;const vertical=item instanceof ColumnBoxContainer;const nCol=vertical?1:elts.length;const nRow=vertical?elts.length:1;const gap=item.getItemGap(dom.offsetWidth);const itemsAlign=item.itemsAlign;const wDom=this._wDom=dom.offsetWidth;const hDom=this._hDom=dom.offsetHeight;const wCols=this._wCols=new Array(nCol);const hRows=this._hRows=new Array(nRow);if(vertical){wCols[0]=this._toDoc(wDom);let sum=0;for(let i=0;i<nRow;i++){const h=childs[i].offsetHeight+gap;hRows[i]=this._toDoc(h);sum+=h;}if(sum<hDom){if(itemsAlign===BoxItemsAlign.MIDDLE){childs.unshift(null);hRows.unshift(this._toDoc((hDom-sum)/2));elts.unshift(null);childs.push(null);hRows.push(this._toDoc((hDom-sum)/2));elts.push(null);}else if(itemsAlign===BoxItemsAlign.END){childs.unshift(null);hRows.unshift(this._toDoc(hDom-sum));elts.unshift(null);}else {childs.push(null);hRows.push(this._toDoc(hDom-sum));elts.push(null);}}}else {hRows[0]=this._toDoc(hDom);let sum=0;for(let i=0;i<nCol;i++){const w=childs[i].offsetWidth+gap;wCols[i]=this._toDoc(w);sum+=w;}if(sum<wDom){if(itemsAlign===BoxItemsAlign.MIDDLE){childs.unshift(null);wCols.unshift(this._toDoc((wDom-sum)/2));elts.unshift(null);childs.push(null);wCols.push(this._toDoc((wDom-sum)/2));elts.push(null);}else if(itemsAlign===BoxItemsAlign.END){childs.unshift(null);wCols.unshift(this._toDoc(wDom-sum));elts.unshift(null);}else {childs.push(null);wCols.push(this._toDoc(wDom-sum));elts.push(null);}}}const r=ctx.getBounds(dom);return [new build.Table({float:{horizontalAnchor:build.TableAnchorType.PAGE,verticalAnchor:build.TableAnchorType.PAGE,overlap:build.OverlapType.OVERLAP,absoluteHorizontalPosition:this._toDoc(r.x),absoluteVerticalPosition:this._toDoc(r.y)},layout:build.TableLayoutType.FIXED,columnWidths:wCols,rows:this.$_writeRows(ctx,childs)})];}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_writeRows(ctx,childs){const rows=[];if(this._vertical){for(let i=0;i<childs.length;i++){rows.push(this.$_writeRow(ctx,i,[childs[i]]));}}else {rows.push(this.$_writeRow(ctx,0,childs));}return rows;}$_writeRow(ctx,r,doms){const wDom=this._wDom;const hDom=this._hDom;const cells=[];for(let i=0;i<doms.length;i++){const borders={start:{style:build.BorderStyle.NONE,size:0,color:'ffffff'},end:{style:build.BorderStyle.NONE,size:0,color:'ffffff'},top:{style:build.BorderStyle.NONE,size:0,color:'ffffff'},bottom:{style:build.BorderStyle.NONE,size:0,color:'ffffff'}};// const align = _alignmets[td.dataset[T_ALIGN]];
    const dom=doms[i];const elt=this._elts[r*doms.length+i];let childs;if(elt instanceof DOCElement&&elt.model instanceof TextItemBase){const cs=getComputedStyle(dom);childs=[this._createText(dom.textContent,cs)];}else if(Array.isArray(elt)){childs=[];for(let e of elt){childs.push(...e.write(ctx));}}else if(elt){childs=elt.write(ctx);}else {childs=[];}let align=build.AlignmentType.CENTER;let valign=build.VerticalAlign.CENTER;const margins={left:0,right:0,top:0,bottom:0};if(elt){const item=dom instanceof HTMLElement&&ctx.report.models[dom.dataset[T_MODEL]];if(this._vertical){const left=item.getLeft(wDom);const right=item.getRight(wDom);if(!isNaN(left)&&!isNaN(right)||!isNaN(left)){align=build.AlignmentType.LEFT;margins.left=this._toDoc(left);}else if(!isNaN(right)){align=build.AlignmentType.RIGHT;margins.right=this._toDoc(right);}else;}else {const top=item.getTop(hDom);const bottom=item.getBottom(hDom);if(!isNaN(top)&&!isNaN(bottom)||!isNaN(top)){valign=build.VerticalAlign.TOP;margins.top=this._toDoc(top);}else if(!isNaN(bottom)){// TODO: bottom margin은 적용되지 않는 것 같다.
    margins.bottom=this._toDoc(bottom);valign=build.VerticalAlign.BOTTOM;}else;}}let isRun=true;for(let c of childs){if(!(c instanceof build.Run)){isRun=false;break;}}if(isRun){childs=[new build.Paragraph({children:childs,alignment:align,spacing:{lineRule:build.LineRuleType.EXACTLY}})];}const cell=new build.TableCell({columnSpan:1,rowSpan:1,children:childs,verticalAlign:valign,borders:borders,margins:margins});cells.push(cell);}return new build.TableRow({height:{value:this._hRows[r],rule:build.HeightRule.EXACT},children:cells});}}////////////////////////////////////////////////////////////////////////////////
    class PickerElement extends UIElement{get picker(){return this.container;}}class AlphaSlider extends PickerElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'rr-color-picker-alpha-slider');//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._color=0xffffff;this._alpha=1;this._addChild(this._selector=new AlphaSliderSelector(doc));this._changed();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** selector */get selector(){return this._selector;}/** color */get color(){return this._color;}set color(value){if(value!=this._color){this._color=value;this._changed();}}/** alpha */get alpha(){return this._alpha;}set alpha(value){if(value!=this._alpha){this._alpha=value;this.picker&&this.picker.refresh();}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    moveSelector(y){const h=this.height;this.alpha=(h-y)/h;y=(1-this.alpha)*100;this.selector.setYP(y);this.picker&&this.picker.refresh();}moveByAlpha(alpha){this.alpha=alpha;this.selector.setYP((1-this.alpha)*100);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _changed(){// bakcground
    const color=this._color;let s='linear-gradient(';s+=ColorUtils.toHex(color)+','+ColorUtils.toRgba(color,0)+')';s+=',';s+='url("'+AlphaSlider.BACKGROUND+'")';this.setStyles({backgroundImage:s});// selector
    this._selector.setStyles({top:Math.round((1-this._alpha)*100)+'%'});}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    AlphaSlider.BACKGROUND="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgray'/%3E%3C/svg%3E";class AlphaSliderSelector extends UIElement{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'rr-color-picker-alpha-selector');}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Report container base.
     */class ReportContainer extends VisualContainer{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(containerId){super(containerId);this._context=new PrintContext();}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doPrepareContainer(dom){super._doPrepareContainer(dom);//dom.className = "rr-report-root rr-report-container";
    dom.classList.add(ReportContainer.CLASS_NAME);dom.classList.add('rr-report-root');}_doLayout(bounds){//debugger;
    }}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ReportContainer.CLASS_NAME='rr-report-container';////////////////////////////////////////////////////////////////////////////////
    class FeedbackAction{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(target,duration){this._started=Utils.getTimeF();this._target=target;this._duration=duration;this._doStart(this._target);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get target(){return this._target;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    run(t){const elapsed=t-this._started;if(elapsed<=this._duration){this._doRun(this._target,this._duration,elapsed);return true;}else {this._doEnd(this._target);return false;}}execute(){this.run(this._started);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _doStart(target){}_doEnd(target){}}class RevelaSpanAction extends FeedbackAction{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doStart(target){target.style.display='inline-block';}_doRun(target,duration,elapsed){}_doEnd(target){target.style.display='none';}}class FeedbackLayer extends LayerElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'feedbackLayer');//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._childMap={};this._actions=[];setInterval(()=>{this.update();},300);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    update(){const t=Utils.getTimeF();for(let i=this._actions.length-1;i>=0;i--){if(!this._actions[i].run(t)){this._actions.splice(i,1);}}}addSpan(doc,name,styles,text){if(this._childMap[name])throw new Error("Already exists: "+name);const span=doc.createElement('span');const css=span.style;css.position='absolute';css.display='none';if(typeof styles==='string'){span.className=styles;}else if(styles){for(let p in styles){css[p]=styles[p];}}text&&(span.textContent=text);this['_dom'].appendChild(span);this._childMap[name]=span;return span;}clearAction(name){let stop=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const elt=this._childMap[name];if(elt){const t=Utils.getTimeF();for(let i=this._actions.length-1;i>=0;i--){if(this._actions[i].target===elt){if(stop){this._actions[i].run(t);}this._actions.splice(i,1);}}}}showSpan(name,text,x,y){let duration=arguments.length>4&&arguments[4]!==undefined?arguments[4]:3;const span=this._childMap[name];if(span){const css=span.style;css.left=x+'px';css.top=y+'px';span.textContent=text||'';this.$_addAction(new RevelaSpanAction(span,duration));}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _initDom(doc,dom){super._initDom(doc,dom);dom.style.pointerEvents="none";}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_addAction(action){if(action&&this._actions.indexOf(action)<0){this._actions.push(action);action.execute();}}}////////////////////////////////////////////////////////////////////////////////
    class EditMarquee extends VisualElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'editMarquee');}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * target
         */get target(){return this._target;}set target(value){if(value!==this._target){this._target=value;this.invalidate();}}get targetItem(){if(this._target instanceof ReportItemElement){return this._target.model;}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    layout(reportView){const r=reportView.getItemBoundingRect(this._target);this._doLayout(this.doc,this.dom,r);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-edit-marquee';}get findable(){return false;}_initDom(doc,dom){super._initDom(doc,dom);dom.style.zIndex=EditMarquee.MARQUEE_ZINDEX;}_doDraw(dom){}_selectItem(div){let selected=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;let focused=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;delete div.dataset['cellselect'];delete div.dataset['select'];delete div.dataset['focus'];if(focused){div.dataset['focus']='';}else if(selected){div.dataset['select']='';}}_selectCell(div){let selected=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;delete div.dataset['select'];delete div.dataset['focus'];if(selected){div.dataset['cellselect']='';}else {delete div.dataset['cellselect'];}}_isColSelected(editor,table,col){const rows=table.rowCount;let selected=false;editor.selections.forEach((sel,i)=>{if(sel instanceof TableSelection){for(let r=0;r<rows;r++){if(sel.contains(r,col)){selected=true;return true;}}}});return selected;}_isRowSelected(editor,table,row){const cols=table.colCount;let selected=false;editor.selections.forEach((sel,i)=>{if(sel instanceof TableSelection){for(let c=0;c<cols;c++){if(sel.contains(row,c)){selected=true;return true;}}}});return selected;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    EditMarquee.MARQUEE_ZINDEX='20';//'200';
    EditMarquee.ITEM_CLASS='rr-edit-marquee-item';EditMarquee.TRACKER_STYLE='rr-edit-marquee-tracker';////////////////////////////////////////////////////////////////////////////////
    const HEADER=0;const DATAROW=1;const FOOTER=2;const GROUP=1000;const GROUP_HEADER=2000;const GROUP_FOOTER=3000;class TableBandMarquee extends EditMarquee{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._leftItems=[];this._rightItems=[];this._topItems=[];this._bottomItems=[];this._leftTrackers=[];this._rightTrackers=[];this._topTrackers=[];this._bottomTrackers=[];this._sectionFocus=-1;this._colFocus=-1;this._rowFocus=-1;}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static $_isBand(dom){return dom.parentElement.classList.contains(TableBandMarquee.STYLE_NAME);}static getTarget(target,dom){if(target instanceof TableBand&&this.$_isBand(dom)){let tag=dom.dataset.target;if(tag){if(tag.startsWith('r')){const r=parseInt(tag.substr(1));const section=parseInt(dom.dataset.section);let rows;switch(section){case HEADER:rows=target.header.rows;break;case DATAROW:rows=target.dataRow.rows;break;case FOOTER:rows=target.footer.rows;break;default:if(section>=GROUP_FOOTER){const g=section-GROUP_FOOTER;rows=target.groups.get(g).footer.rows;}else if(section>=GROUP_HEADER){const g=section-GROUP_HEADER;rows=target.groups.get(g).header.rows;}break;}if(rows){target=rows.get(r);tag=tag.substr(1);}else {tag='';}}else if(tag.startsWith('c')){const c=tag.substr(1);if(c){tag=c;target=target.columns.get(parseInt(c));}}}return tag?{target,tag}:null;}}static isColSizeTracker(dom){if(dom instanceof HTMLElement&&dom.classList.contains(EditMarquee.TRACKER_STYLE)&&this.$_isBand(dom)){if(dom.style.cursor==='ew-resize'){return dom[T_INDEX];}}return -1;}static isRowSizeTracker(dom){if(dom instanceof HTMLElement&&dom.classList.contains(EditMarquee.TRACKER_STYLE)&&this.$_isBand(dom)){if(dom.style.cursor==='ns-resize'){const table=this.$_getTable(dom);const row=dom[T_INDEX];return {table,row};}}return;}static $_getTable(dom){const t=dom&&dom[T_GROUP];if(t instanceof TableBase)return t;if(t instanceof TableCell)return t.table;if(t instanceof TableRow)return t.table;return t.model;}//-------------------------------------------------------------------------
    // ITableMarquee
    //-------------------------------------------------------------------------
    $_createResizeFeedback(){if(!this._sizeFeedback){this._sizeFeedback=this.doc.createElement('div');Utils.extend(this._sizeFeedback.style,{position:'absolute',boxSizing:'border-box',borderColor:'#000088aa',borderStyle:'none'});this._sizeValueFeedback=this.doc.createElement('div');this._sizeValueFeedback.className='rr-table-size-value-feedback';Utils.extend(this._sizeValueFeedback.style,{position:'absolute',backgroundColor:'#11c',color:'white',borderRadius:'3px',padding:'3px 5px',textAlign:'center',minWidth:'32px'});}return this._sizeFeedback;}showColSizeFeedback(col,x,width){let f=this.$_createResizeFeedback();const h=this.height-TableBandMarquee.H_ITEM*2;Utils.extend(f.style,{top:TableBandMarquee.H_ITEM+'px',left:x+'px',width:'1px',height:h+'px',borderBottomStyle:'none',borderRightWidth:'2px',borderRightStyle:'dotted'});this.dom.appendChild(f);f=this._sizeValueFeedback;f.textContent=width;Utils.extend(f.style,{left:x-f.offsetWidth+'px',top:-f.offsetHeight+'px'});this.dom.appendChild(f);}showRowSizeFeedback(table,row,y,height){let f=this.$_createResizeFeedback();const w=this.width-TableBandMarquee.W_ITEM*2;Utils.extend(f.style,{left:TableBandMarquee.W_ITEM+'px',top:y+'px',height:'1px',width:w+'px',borderRightStyle:'none',borderBottomWidth:'2px',borderBottomStyle:'dashed'});this.dom.appendChild(f);f=this._sizeValueFeedback;f.textContent=height;Utils.extend(f.style,{left:17-f.offsetWidth+'px',top:y-f.offsetHeight+'px'});this.dom.appendChild(f);}hideSizeFeedbacks(){Utils.remove(this._sizeFeedback);Utils.remove(this._sizeValueFeedback);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return super._getCssSelector()+' '+TableBandMarquee.STYLE_NAME;}_doLayout(doc,dom,r){function getSection(foc){if(foc instanceof TableBandHeader){return 0;}else if(foc instanceof TableBandDataRow){return 1;}else if(foc instanceof TableBandFooter){return 2;}else if(foc instanceof TableBandRowGroup){return bandView.indexOfGroup(foc)+GROUP;}else if(foc instanceof TableBandRowGroupHeader){return bandView.indexOfGroup(foc.group)+GROUP_HEADER;}else if(foc instanceof TableBandRowGroupFooter){return bandView.indexOfGroup(foc.group)+GROUP_FOOTER;}}function getRowPoints(section){let view;let off=0;switch(section){case HEADER:view=bandView.headerView;break;case DATAROW:view=bandView.dataRowView;break;case FOOTER:view=bandView.footerView;break;default:if(section>=GROUP_FOOTER){const gv=bandView.getGroupView(section%GROUP_FOOTER);off=gv.y;view=gv.footer;}else if(section>=GROUP_HEADER){const gv=bandView.getGroupView(section%GROUP_HEADER);off=gv.y;view=gv.header;}break;}if(view){const y=view.y+off;const pts=view.getRowPoints();for(let i=0;i<pts.length;i++){pts[i]+=y;}return pts;}}function colSelected(self,col){for(let table of band['_tables']){if(self._isColSelected(editor,table,col)){return true;}}return false;}const bandView=this.target;const band=bandView.model;const editor=bandView.container;let foc=editor.focusedItem;const wItem=TableBandMarquee.W_ITEM;const hItem=TableBandMarquee.H_ITEM;const x=r.x-wItem;const y=r.y-hItem;const w=r.width+wItem*2;const h=r.height+hItem*2;let cellFocused=false;let table;let itemDivs;let trackers;let pts;this._rowFocus=this._colFocus=this._sectionFocus=-1;if(foc instanceof TableCell){this._rowFocus=foc.row;this._colFocus=foc.col;table=foc.table;cellFocused=true;}else if(foc instanceof TableRow){this._rowFocus=foc.index;table=foc.table;}if(foc instanceof TableBandColumn){this._colFocus=foc.index;}else if(table){this._sectionFocus=getSection(table);}pts=getRowPoints(this._sectionFocus);if(pts){// left
    itemDivs=this.$_getItems(doc,dom,this._leftItems,pts.length-1);for(let i=0;i<Math.min(itemDivs.length,pts.length-1);i++){const div=itemDivs[i];div.dataset['target']='r'+i;div.dataset['section']=this._sectionFocus+'';if(cellFocused){this._selectCell(div,this._rowFocus===i||this._isRowSelected(editor,table,i));}else if(this._rowFocus===i){this._selectItem(div,true,editor.selectionCount>1);}else {const selected=table&&editor.isSelected(table.getRow(i));this._selectItem(div,selected,false);}div.textContent='r-'+i;div.title='row '+i;Utils.setBounds(div,0,pts[i]+hItem+2,wItem,pts[i+1]-pts[i]);}trackers=this.$_getTrackers(doc,dom,this._leftTrackers,pts.length-2);for(let i=0;i<pts.length-2;i++){const div=trackers[i];div[T_INDEX]=i;div[T_GROUP]=foc;div.style.cursor='ns-resize';Utils.setBounds(div,0,pts[i+1]+hItem+2,wItem,3);}// right
    itemDivs=this.$_getItems(doc,dom,this._rightItems,pts.length-1);for(let i=0;i<Math.min(itemDivs.length,pts.length-1);i++){const div=itemDivs[i];div.dataset['target']='r'+i;div.dataset['section']=this._sectionFocus+'';if(cellFocused){this._selectCell(div,this._rowFocus===i||this._isRowSelected(editor,table,i));}else if(this._rowFocus===i){this._selectItem(div,true,editor.selectionCount>1);}else {const selected=table&&editor.isSelected(table.getRow(i));this._selectItem(div,selected,false);}div.textContent='r-'+i;div.title='row '+i;Utils.setBounds(div,wItem+r.width,pts[i]+hItem+2,wItem,pts[i+1]-pts[i]);}trackers=this.$_getTrackers(doc,dom,this._rightTrackers,pts.length-2);for(let i=0;i<pts.length-2;i++){const div=trackers[i];div[T_INDEX]=i;div[T_GROUP]=foc;div.style.cursor='ns-resize';Utils.setBounds(div,wItem+r.width,pts[i+1]+hItem+2,wItem,3);}}else {this.$_getItems(doc,dom,this._leftItems,0);this.$_getItems(doc,dom,this._rightItems,0);}// top
    pts=bandView.getColPoints();itemDivs=this.$_getItems(doc,dom,this._topItems,pts.length-1);for(let i=0;i<Math.min(itemDivs.length,pts.length-1);i++){const div=itemDivs[i];div.dataset['target']='c'+i;if(cellFocused){this._selectCell(div,this._colFocus===i||colSelected(this,i));}else if(this._colFocus===i){this._selectItem(div,true,editor.selectionCount>1);}else {const selected=editor.isSelected(band.getColumn(i));this._selectItem(div,selected,false);}div.textContent='c-'+i;div.title='column '+i;Utils.setBounds(div,wItem+pts[i]+2,0,pts[i+1]-pts[i],hItem);}trackers=this.$_getTrackers(doc,dom,this._topTrackers,pts.length-2);for(let i=0;i<pts.length-2;i++){const div=trackers[i];div[T_INDEX]=i;div[T_GROUP]=this.target;div.style.cursor='ew-resize';Utils.setBounds(div,wItem+pts[i+1]+2-1,0,3,hItem);}// bottom
    itemDivs=this.$_getItems(doc,dom,this._bottomItems,pts.length-1);for(let i=0;i<Math.min(itemDivs.length,pts.length-1);i++){const div=itemDivs[i];div.dataset['target']='c'+i;if(cellFocused){this._selectCell(div,this._colFocus===i||colSelected(this,i));}else if(this._colFocus===i){this._selectItem(div,true,editor.selectionCount>1);}else {const selected=editor.isSelected(band.getColumn(i));this._selectItem(div,selected,false);}div.textContent='c-'+i;div.title='column '+i;Utils.setBounds(div,wItem+pts[i]+2,hItem+r.height,pts[i+1]-pts[i],hItem);}trackers=this.$_getTrackers(doc,dom,this._bottomTrackers,pts.length-2);for(let i=0;i<pts.length-2;i++){const div=trackers[i];div[T_INDEX]=i;div[T_GROUP]=this.target;div.style.cursor='ew-resize';Utils.setBounds(div,wItem+pts[i+1]+2-1,hItem+r.height,3,hItem);}// this
    this.setBounds(x,y,w,h).applyBounds();}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_getDivs(doc,dom,divs,count,className){while(divs.length<count){const div=doc.createElement('div');div.className=className;dom.appendChild(div);divs.push(div);}for(let i=divs.length-1;i>=0;i--){divs[i].style.display=i>=count?'none':'';divs[i][T_GROUP]=null;}return divs;}$_getItems(doc,dom,divs,count){return this.$_getDivs(doc,dom,divs,count,EditMarquee.ITEM_CLASS);}$_getTrackers(doc,dom,divs,count){return this.$_getDivs(doc,dom,divs,count,EditMarquee.TRACKER_STYLE);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    TableBandMarquee.STYLE_NAME='rr-tableband-marquee';TableBandMarquee.W_ITEM=50;TableBandMarquee.H_ITEM=17;////////////////////////////////////////////////////////////////////////////////
    class TableContainerMarquee extends EditMarquee{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc);this._leftItems=[];this._rightItems=[];this._topItems=[];this._bottomItems=[];this._leftTrackers=[];this._rightTrackers=[];this._topTrackers=[];this._bottomTrackers=[];this._colFocus=-1;this._rowFocus=-1;this._topDivs=[];}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static $_isContainer(dom){return dom.parentElement.classList.contains(TableContainerMarquee.STYLE_NAME);}static getTarget(target,dom){if(target instanceof TableContainer&&this.$_isContainer(dom)){let tag=dom.dataset.target;if(tag){if(tag.startsWith('r')){const r=tag.substr(1);tag=r;return {target:target.rows.get(parseInt(r)),tag};}else if(tag.startsWith('c')){const c=tag.substr(1);tag=c;return {target:target.columns.get(parseInt(c)),tag};}}return tag?{target,tag}:null;}}static isColSizeTracker(dom){if(dom instanceof HTMLElement&&dom.classList.contains(EditMarquee.TRACKER_STYLE)&&this.$_isContainer(dom)){if(dom.style.cursor==='ew-resize'){return dom[T_INDEX];}}return -1;}static isRowSizeTracker(dom){if(dom instanceof HTMLElement&&dom.classList.contains(EditMarquee.TRACKER_STYLE)&&this.$_isContainer(dom)){if(dom.style.cursor==='ns-resize'){return dom[T_INDEX];}}return -1;}//-------------------------------------------------------------------------
    // ITableMarquee
    //-------------------------------------------------------------------------
    $_createResizeFeedback(){if(!this._sizeFeedback){this._sizeFeedback=this.doc.createElement('div');this._sizeFeedback.className='rr-table-size-feedback';Utils.extend(this._sizeFeedback.style,{position:'absolute',boxSizing:'border-box',borderColor:'#000088aa',borderStyle:'none'});this._sizeValueFeedback=this.doc.createElement('div');this._sizeValueFeedback.className='rr-table-size-value-feedback';Utils.extend(this._sizeValueFeedback.style,{position:'absolute',backgroundColor:'#11c',color:'white',borderRadius:'3px',padding:'3px 5px',textAlign:'center',minWidth:'32px'});}return this._sizeFeedback;}showColSizeFeedback(col,x,width){let f=this.$_createResizeFeedback();const h=this.height-TableContainerMarquee.H_ITEM*2;Utils.extend(f.style,{top:TableContainerMarquee.H_ITEM+'px',left:x+'px',width:'1px',height:h+'px',borderBottomStyle:'none',borderRightWidth:'2px',borderRightStyle:'dotted'});this.dom.appendChild(f);f=this._sizeValueFeedback;f.textContent=width;Utils.extend(f.style,{left:x-f.offsetWidth+'px',top:-f.offsetHeight+'px'});this.dom.appendChild(f);}showRowSizeFeedback(table,row,y,height){let f=this.$_createResizeFeedback();const w=this.width-TableContainerMarquee.W_ITEM*2;Utils.extend(f.style,{left:TableContainerMarquee.W_ITEM+'px',top:y+'px',height:'1px',width:w+'px',borderRightStyle:'none',borderBottomWidth:'2px',borderBottomStyle:'dashed'});this.dom.appendChild(f);f=this._sizeValueFeedback;f.textContent=height;Utils.extend(f.style,{left:17-f.offsetWidth+'px',top:y-f.offsetHeight+'px'});this.dom.appendChild(f);}hideSizeFeedbacks(){Utils.remove(this._sizeFeedback);Utils.remove(this._sizeValueFeedback);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return super._getCssSelector()+' '+TableContainerMarquee.STYLE_NAME;}_initDom(doc,dom){super._initDom(doc,dom);const div=this._tableItem=doc.createElement('div');div.className=EditMarquee.ITEM_CLASS;div.dataset.target='t';div.style.cursor='pointer';div.textContent='table';div.title='Table';dom.appendChild(div);// this.$_initSides(doc, dom);
    }// private $_initSides(doc: Document, p: HTMLElement): void {
    //     let table = this._topTable = doc.createElement('table');
    //     let colgroup = doc.createElement('colgroup');
    //     table.className = 'rr-table-marquee-side';
    //     table.style.tableLayout = 'fixed';
    //     table.style.position = 'absolute';
    //     table.style.backgroundColor = '#00008880';
    //     // table.style.border = '1px solid white';
    //     table.style.border = '1px solid transparent';
    //     table.style.borderCollapse = 'collapse';
    //     table.style.boxSizing = 'border-box';
    //     table.style.borderSpacing = '2px';
    //     let tbody = doc.createElement('tbody');
    //     tbody.style.height = '100%';
    //     const tr = doc.createElement('tr');
    //     tr.style.margin = '0';
    //     tr.style.padding = '0';
    //     tbody.appendChild(tr);
    //     table.appendChild(colgroup);
    //     table.appendChild(tbody);
    //     p.appendChild(table);
    // }
    // private $_layoutHorzSides(doc: Document): void {
    //     const container = this.target as TableContainerElement;
    //     const cols = container['_colgroup'].children;
    //     const wItem = TableContainerMarquee.W_ITEM;
    //     const hItem = TableContainerMarquee.H_ITEM;
    //     let pts = container.getColPoints();
    //     let side = this._topTable;
    //     let sidecols = side.firstChild as HTMLTableColElement;
    //     const tr = side.rows[0];
    //     const tcells = tr.cells;
    //     const w = container['_table'].getBoundingClientRect().width;
    //     Utils.setBounds(side, wItem + 2, 0, w, hItem);//container.offsetWidth, hItem);
    //     while (sidecols.childElementCount < cols.length) {
    //         const col = doc.createElement('col');
    //         sidecols.appendChild(col);
    //         const td = doc.createElement('td');
    //         td.style.padding = '0';
    //         td.style.margin = '0';
    //         tr.appendChild(td);
    //     }
    //     while (sidecols.childElementCount > cols.length) {
    //         sidecols.removeChild(sidecols.lastElementChild);
    //         tr.removeChild(tr.lastElementChild);
    //     }
    //     while (this._topDivs.length < cols.length - 1) {
    //         const span = doc.createElement('span');
    //         span.style.position = 'absolute';
    //         span.style.border = 'none';
    //         span.style.backgroundColor = 'transparent';
    //         span.style.cursor = 'ew-resize';
    //         span.style.top = '0px';
    //         span.style.width = '3px';
    //         span.style.pointerEvents = 'all';
    //         side.appendChild(span);            
    //         this._topDivs.push(span);
    //     }
    //     while (this._topDivs.length > cols.length - 1) {
    //         side.removeChild(this._topDivs.pop()[0]);
    //     }
    //     let cells = sidecols.children;
    //     const cnt = cells.length;
    //     for (let i = 0; i < cnt; i++) {
    //         (cells[i] as HTMLElement).style.width = (cols[i] as HTMLElement).style.width;
    //         tcells[i].style.borderRight = i < cnt - 1 ? '1px solid white' : 'none';
    //     }
    //     for (let i = 0; i < cnt - 1; i++) {
    //         this._topDivs[i].style.height = hItem + 'px';
    //         this._topDivs[i].style.left = (tcells[i].offsetLeft + tcells[i].offsetWidth - 2) + 'px';
    //     }
    // }
    _doLayout(doc,dom,r){const tableView=this.target;const table=tableView.model;const editor=tableView.container;const foc=editor.focusedItem;const wItem=TableContainerMarquee.W_ITEM;const hItem=TableContainerMarquee.H_ITEM;const x=r.x-wItem;const y=r.y-hItem;const w=r.width+wItem*2;const h=r.height+hItem*2;let cellFocused=false;let itemDivs;let trackers;let pts;this._colFocus=this._rowFocus=-1;if(foc instanceof TableColumn){this._colFocus=foc.index;}else if(foc instanceof TableRow){this._rowFocus=foc.index;}else if(foc instanceof TableCell){this._colFocus=foc.col;this._rowFocus=foc.row;cellFocused=true;}// table
    let div=this._tableItem;this._selectItem(div,foc===table);Utils.setBounds(div,0,0,wItem-1,hItem);// left
    pts=tableView.getRowPoints();itemDivs=this.$_getItems(doc,dom,this._leftItems,tableView.rowCount);for(let i=0;i<pts.length-1;i++){div=itemDivs[i];div.dataset.target='r'+i;if(cellFocused){this._selectCell(div,this._rowFocus===i||this._isRowSelected(editor,table,i));}else if(this._rowFocus===i){this._selectItem(div,true,editor.selectionCount>1);}else {const selected=editor.isSelected(table.getRow(i));this._selectItem(div,selected,false);}div.textContent='r-'+i;div.title='row '+i;Utils.setBounds(div,0,pts[i]+hItem+2,wItem,pts[i+1]-pts[i]);}trackers=this.$_getTrackers(doc,dom,this._leftTrackers,pts.length-2);for(let i=0;i<pts.length-2;i++){div=trackers[i];div[T_INDEX]=i;div[T_GROUP]=this.target;div.style.cursor='ns-resize';Utils.setBounds(div,0,pts[i+1]+hItem+2,wItem,3);}// right
    itemDivs=this.$_getItems(doc,dom,this._rightItems,tableView.rowCount);for(let i=0;i<pts.length-1;i++){div=itemDivs[i];div.dataset.target='r'+i;if(cellFocused){this._selectCell(div,this._rowFocus===i||this._isRowSelected(editor,table,i));}else if(this._rowFocus===i){this._selectItem(div,true,editor.selectionCount>1);}else {const selected=editor.isSelected(table.getRow(i));this._selectItem(div,selected,false);}div.textContent='r-'+i;div.title='row '+i;Utils.setBounds(div,wItem+r.width,pts[i]+hItem+2,wItem,pts[i+1]-pts[i]);}trackers=this.$_getTrackers(doc,dom,this._rightTrackers,pts.length-2);for(let i=0;i<pts.length-2;i++){div=trackers[i];div[T_INDEX]=i;div[T_GROUP]=this.target;div.style.cursor='ns-resize';Utils.setBounds(div,wItem+r.width,pts[i+1]+hItem+2,wItem,3);}// top
    pts=tableView.getColPoints();itemDivs=this.$_getItems(doc,dom,this._topItems,pts.length-1);for(let i=0;i<pts.length-1;i++){div=itemDivs[i];div.dataset.target='c'+i;if(cellFocused){this._selectCell(div,this._colFocus===i||this._isColSelected(editor,table,i));}else if(this._colFocus===i){this._selectItem(div,true,editor.selectionCount>1);}else {const selected=editor.isSelected(table.getColumn(i));this._selectItem(div,selected,false);}div.textContent='c-'+i;div.title='column '+i;Utils.setBounds(div,wItem+pts[i]+2,0,pts[i+1]-pts[i],hItem);}trackers=this.$_getTrackers(doc,dom,this._topTrackers,pts.length-2);for(let i=0;i<pts.length-2;i++){div=trackers[i];div[T_INDEX]=i;div[T_GROUP]=this.target;div.style.cursor='ew-resize';Utils.setBounds(div,wItem+pts[i+1]+2-1,0,3,hItem);}// bottom
    itemDivs=this.$_getItems(doc,dom,this._bottomItems,pts.length-1);for(let i=0;i<pts.length-1;i++){div=itemDivs[i];div.dataset.target='c'+i;if(cellFocused){this._selectCell(div,this._colFocus===i||this._isColSelected(editor,table,i));}else if(this._colFocus===i){this._selectItem(div,true,editor.selectionCount>1);}else {const selected=editor.isSelected(table.getColumn(i));this._selectItem(div,selected,false);}div.textContent='c-'+i;div.title='column '+i;// +2를 하지 않으면 cell focus view가 제대로 보이지 않는다.
    Utils.setBounds(div,wItem+pts[i]+2,hItem+r.height+2,pts[i+1]-pts[i],hItem);}trackers=this.$_getTrackers(doc,dom,this._bottomTrackers,pts.length-2);for(let i=0;i<pts.length-2;i++){div=trackers[i];div[T_INDEX]=i;div[T_GROUP]=this.target;div.style.cursor='ew-resize';Utils.setBounds(div,wItem+pts[i+1]+2-1,hItem+r.height,3,hItem);}// this
    this.setBounds(x,y,w,h).applyBounds();// this.$_layoutHorzSides(doc);
    }//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_getDivs(doc,dom,divs,count,className){while(divs.length<count){const div=doc.createElement('div');div.className=className;dom.appendChild(div);divs.push(div);}for(let i=divs.length-1;i>=0;i--){divs[i].style.display=i>=count?'none':'';divs[i][T_GROUP]=null;}return divs;}$_getItems(doc,dom,divs,count){return this.$_getDivs(doc,dom,divs,count,EditMarquee.ITEM_CLASS);}$_getTrackers(doc,dom,divs,count){return this.$_getDivs(doc,dom,divs,count,EditMarquee.TRACKER_STYLE);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    TableContainerMarquee.STYLE_NAME='rr-table-container-marquee';TableContainerMarquee.W_ITEM=50;TableContainerMarquee.H_ITEM=17;////////////////////////////////////////////////////////////////////////////////
    class ColumnBoxMarquee extends EditMarquee{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._leftItems=[];this._rightItems=[];}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static getTarget(target,dom){if(dom.parentElement.classList.contains(ColumnBoxMarquee.STYLE_NAME)){let tag=dom.dataset.target;if(tag.startsWith('c-')){const c=tag.substr(2);if(c){tag=c;}}return tag?{target,tag}:null;}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return super._getCssSelector()+' '+ColumnBoxMarquee.STYLE_NAME;}_initDom(doc,dom){super._initDom(doc,dom);}_doLayout(doc,dom,r){const box=this.target;const wItem=50;const x=r.x-wItem;const y=r.y;const w=r.width+wItem*2;const h=r.height;let itemDivs;let pts;let cnt;// left
    pts=box.getRowPoints();cnt=cnt=pts.length/2;itemDivs=this.$_getItems(doc,dom,this._leftItems,cnt);for(let i=0;i<cnt;i++){const div=itemDivs[i];div.dataset['target']='r'+i;div.textContent='r-'+i;div.title='row '+i;Utils.setBounds(div,0,pts[i*2],wItem,pts[i*2+1]-pts[i*2]);}// right
    itemDivs=this.$_getItems(doc,dom,this._rightItems,cnt);for(let i=0;i<cnt;i++){const div=itemDivs[i];div.dataset['target']='r'+i;div.textContent='r-'+i;div.title='row '+i;Utils.setBounds(div,wItem+r.width,pts[i*2],wItem,pts[i*2+1]-pts[i*2]);}// this
    this.setBounds(x,y,w,h).applyBounds();}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_getItems(doc,dom,divs,count){while(divs.length<count){const div=doc.createElement('div');div.className='rr-edit-marquee-item';dom.appendChild(div);divs.push(div);}for(let i=divs.length-1;i>=0;i--){divs[i].style.display=i>=count?'none':'';}return divs;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ColumnBoxMarquee.STYLE_NAME='rr-column-box-marquee';class RowBoxMarquee extends EditMarquee{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._topItems=[];this._bottomItems=[];}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static getTarget(target,dom){if(dom.parentElement.classList.contains(RowBoxMarquee.STYLE_NAME)){let tag=dom.dataset.target;if(tag.startsWith('r-')){const c=tag.substr(2);if(c){tag=c;}}return tag?{target,tag}:null;}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return super._getCssSelector()+' '+RowBoxMarquee.STYLE_NAME;}_initDom(doc,dom){super._initDom(doc,dom);}_doLayout(doc,dom,r){const box=this.target;const hItem=30+2;const x=r.x;const y=r.y-hItem;const w=r.width;const h=r.height+hItem*2;let itemDivs;let pts;let cnt;// left
    pts=box.getColPoints();cnt=cnt=pts.length/2;itemDivs=this.$_getItems(doc,dom,this._topItems,cnt);for(let i=0;i<cnt;i++){const div=itemDivs[i];div.dataset['target']='c'+i;div.textContent='c-'+i;div.title='col '+i;Utils.setBounds(div,pts[i*2],0,pts[i*2+1]-pts[i*2],hItem);}// right
    itemDivs=this.$_getItems(doc,dom,this._bottomItems,cnt);for(let i=0;i<cnt;i++){const div=itemDivs[i];div.dataset['target']='c'+i;div.textContent='c-'+i;div.title='col '+i;Utils.setBounds(div,pts[i*2],hItem+r.height,pts[i*2+1]-pts[i*2],hItem);}// this
    this.setBounds(x,y,w,h).applyBounds();}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_getItems(doc,dom,divs,count){while(divs.length<count){const div=doc.createElement('div');div.className='rr-edit-marquee-item';dom.appendChild(div);divs.push(div);}for(let i=divs.length-1;i>=0;i--){divs[i].style.display=i>=count?'none':'';}return divs;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    RowBoxMarquee.STYLE_NAME='rr-row-box-marquee';////////////////////////////////////////////////////////////////////////////////
    /**
     * Marquee for HicharItem.
     */class HichartMarquee extends EditMarquee{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc);this._seriesItems=[];}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static getTarget(target,dom){if(target instanceof HichartItem&&dom.parentElement.classList.contains(HichartMarquee.STYLE_NAME)){let tag=dom.dataset.target;switch(tag){case'xaxis':target=target.xAxis;break;case'yaxis':target=target.yAxis;break;default:if(tag.startsWith('series')){target=target.series.get(parseInt(tag.substr(6)));}break;}return tag?{target,tag}:null;}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get chart(){return this.target.model;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getSeriesMarqueeAt(p){for(let div of this._seriesItems){const x=div.offsetLeft;const w=div.offsetWidth;if(p>=x&&p<x+w){return div;}}}getSeriesIndex(div){const s=div.dataset.target;if(s.startsWith('series')){return parseInt(s.substring(6));}}isSeries(dom){if(dom instanceof HTMLDivElement&&this._seriesItems.indexOf(dom)>=0){return dom;}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return super._getCssSelector()+' '+HichartMarquee.STYLE_NAME;}_initDom(doc,dom){super._initDom(doc,dom);let div=this._chartItem=doc.createElement('div');div.className=EditMarquee.ITEM_CLASS;div.dataset.target='chart';div.textContent='highchart';dom.appendChild(div);div=this._xAxisItem=doc.createElement('div');div.className=EditMarquee.ITEM_CLASS;div.dataset.target='xaxis';div.textContent='x axis';dom.appendChild(div);div=this._yAxisItem=doc.createElement('div');div.className=EditMarquee.ITEM_CLASS;div.dataset.target='yaxis';div.style.transform='rotate(90deg)';div.textContent='y axis';dom.appendChild(div);}_doLayout(doc,dom,r){const chart=this.target;const model=chart.model;const foc=chart.container.focusedItem;const x=r.x;const y=r.y;const w=r.width;const h=r.height;const hItem=17;const gap=2;let div;let wItem;this.$_prepareSeries(chart,doc,dom);// chart
    div=this._chartItem;wItem=64;this._selectItem(div,foc===model);Utils.setBounds(div,0,-hItem-gap,wItem,hItem);// series
    const wSeries=55;let x2=wItem+4;this._seriesItems.forEach((div,i)=>{Utils.setBounds(div,x2,-hItem-gap,wSeries,hItem);this._selectItem(div,foc===model.series.get(i));x2+=wSeries+4;});if(model.inverted){// yAxis
    div=this._yAxisItem;div.style.transform='';wItem=50;Utils.setBounds(div,(w-wItem)/2,h+gap+2,wItem,hItem);this._selectItem(div,foc===model.yAxis);// xAxis
    div=this._xAxisItem;div.style.transform='rotate(90deg)';wItem=50;this._selectItem(div,foc===model.xAxis);Utils.setBounds(div,-wItem-gap+hItem,(h-hItem)/2,wItem,hItem);}else {// xAxis
    div=this._xAxisItem;div.style.transform='';wItem=50;this._selectItem(div,foc===model.xAxis);Utils.setBounds(div,(w-wItem)/2,h+gap+2,wItem,hItem);// yAxis
    div=this._yAxisItem;div.style.transform='rotate(90deg)';wItem=50;this._selectItem(div,foc===model.yAxis);Utils.setBounds(div,-wItem-gap+hItem,(h-hItem)/2,wItem,hItem);}// this
    this.setBounds(x,y,w,h).applyBounds();}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_prepareSeries(chart,doc,dom){const series=chart.model.series;const count=series.count;while(this._seriesItems.length<count){const div=doc.createElement('div');div.className=EditMarquee.ITEM_CLASS;dom.appendChild(div);this._seriesItems.push(div);}while(this._seriesItems.length>count){Utils.remove(this._seriesItems.pop());}this._seriesItems.forEach((div,i)=>{const name=series.get(i).name;div.dataset.target='series'+i;div.textContent=name||'series '+(i+1);});}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HichartMarquee.STYLE_NAME='rr-hichart-marquee';////////////////////////////////////////////////////////////////////////////////
    class BandGroupMarquee extends EditMarquee{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc);this._topItems=[];this._bottomItems=[];this._topTrackers=[];this._bottomTrackers=[];this._cellFocus=-1;this._topDivs=[];}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static $_isContainer(dom){return dom.parentElement.classList.contains(BandGroupMarquee.STYLE_NAME);}static getTarget(target,dom){if(target instanceof BandGroup&&this.$_isContainer(dom)){let tag=dom.dataset.target;if(tag.startsWith('c')){const c=tag.substring(1);tag=c;return {target:target.get(+c),tag};}return tag?{target,tag}:null;}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return super._getCssSelector()+' '+BandGroupMarquee.STYLE_NAME;}_initDom(doc,dom){super._initDom(doc,dom);const div=this._tableItem=doc.createElement('div');div.className=EditMarquee.ITEM_CLASS;div.dataset.target='g';div.style.cursor='pointer';// div.style.padding = '2px 4px';
    div.style.border='1px solid black';div.textContent='BAND GROUP';div.title='Band Group';dom.appendChild(div);}_doLayout(doc,dom,r){const groupView=this.target;const group=groupView.model;const editor=groupView.container;const foc=editor.focusedItem;const wItem=BandGroupMarquee.W_ITEM;const hItem=BandGroupMarquee.H_ITEM;const x=r.x;const y=r.y-hItem;const w=r.width;const h=r.height+hItem;let itemDivs;let pts;// group
    let div=this._tableItem;this._selectItem(div,foc===group);Utils.setBounds(div,2,-hItem*1.2,wItem*1.5,hItem*1.2);// top
    pts=groupView.getCellPoints();itemDivs=this.$_getItems(doc,dom,this._topItems,pts.length-1);for(let i=0;i<pts.length-1;i++){div=itemDivs[i];div.dataset.target='c'+i;this._selectItem(div,foc===group.get(i),false);div.textContent='bandcell-'+i;div.title='cell '+i;Utils.setBounds(div,pts[i],0,pts[i+1]-pts[i],hItem);}// trackers = this.$_getTrackers(doc, dom, this._topTrackers, pts.length - 2);
    // for (let i = 0; i < pts.length - 2; i++) {
    //     div = trackers[i];
    //     div[T_INDEX] = i;
    //     div[T_GROUP] = this.target;
    //     div.style.cursor = 'ew-resize';
    //     Utils.setBounds(div, pts[i + 1] - 1, 0, 3, hItem);
    // }
    // bottom
    itemDivs=this.$_getItems(doc,dom,this._bottomItems,pts.length-1);for(let i=0;i<pts.length-1;i++){div=itemDivs[i];div.dataset.target='c'+i;this._selectItem(div,foc===group.get(i),false);div.textContent='bandcell-'+i;div.title='cell '+i;// +2를 하지 않으면 cell focus view가 제대로 보이지 않는다.
    Utils.setBounds(div,pts[i],hItem+r.height+2,pts[i+1]-pts[i],hItem);}// trackers = this.$_getTrackers(doc, dom, this._bottomTrackers, pts.length - 2);
    // for (let i = 0; i < pts.length - 2; i++) {
    //     div = trackers[i];
    //     div[T_INDEX] = i;
    //     div[T_GROUP] = this.target;
    //     div.style.cursor = 'ew-resize';
    //     Utils.setBounds(div, pts[i + 1] - 1, hItem + r.height, 3, hItem);
    // }
    // this
    this.setBounds(x,y,w,h).applyBounds();}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_getDivs(doc,dom,divs,count,className){while(divs.length<count){const div=doc.createElement('div');div.className=className;dom.appendChild(div);divs.push(div);}for(let i=divs.length-1;i>=0;i--){divs[i].style.display=i>=count?'none':'';divs[i][T_GROUP]=null;}return divs;}$_getItems(doc,dom,divs,count){return this.$_getDivs(doc,dom,divs,count,EditMarquee.ITEM_CLASS);}$_getTrackers(doc,dom,divs,count){return this.$_getDivs(doc,dom,divs,count,EditMarquee.TRACKER_STYLE);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    BandGroupMarquee.STYLE_NAME='rr-bandgroup-marquee';BandGroupMarquee.W_ITEM=50;BandGroupMarquee.H_ITEM=17;////////////////////////////////////////////////////////////////////////////////
    class SelectView extends VisualElement{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'selectView');}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    layout(r,m){this.dom.dataset.cell=m instanceof TableSelection&&!m.isSingle(false)?'1':'0';this.setRect(r).draw();this.setRotation(m instanceof ReportItem?m.rotation:0);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return SelectView.STYLE;}get isLayer(){return true;}_initDom(doc,dom){super._initDom(doc,dom);dom.style.zIndex=ReportEditLayer.SELECT_ZINDEX;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    SelectView.STYLE='rr-select-view';class TableSelectView extends SelectView{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return TableSelectView.STYLE;}layout(r,m){this.setRect(r).draw();}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    TableSelectView.STYLE='rr-table-select-view';class FocusHandle extends VisualElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,dir){super(doc,'focusHandle');this._enabled=true;this.dir=dir;this.resize(9,9);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** dir  */get dir(){return this._dir;}set dir(value){if(value!==this._dir){this._dir=value;this.invalidate();}}/** enabled */get enabled(){return this._enabled;}/** vertical */get vertical(){return this._dir===ResizeDirection.TOP||this._dir===ResizeDirection.BOTTOM||this._dir===ResizeDirection.TOP_LEFT||this._dir===ResizeDirection.BOTTOM_RIGHT||this._dir===ResizeDirection.TOP_RIGHT||this._dir===ResizeDirection.BOTTOM_LEFT;}/** horizontal */get horizontal(){return this._dir===ResizeDirection.LEFT||this._dir===ResizeDirection.RIGHT||this._dir===ResizeDirection.TOP_LEFT||this._dir===ResizeDirection.BOTTOM_RIGHT||this._dir===ResizeDirection.TOP_RIGHT||this._dir===ResizeDirection.BOTTOM_LEFT;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-focus-handle';}_initDom(doc,dom){super._initDom(doc,dom);}_doDraw(dom){var _a;const d=this.dir;const v=this.itemView;if(v){dom.dataset.hidden='';this._enabled=v.model.canResize(d)&&((_a=v.model.parent)===null||_a===void 0?void 0:_a.canResizeChild(v.model,d));dom.dataset.disabled=String(!this.enabled);dom.dataset.dir=d==ResizeDirection.LEFT||d==ResizeDirection.RIGHT?'horz':d==ResizeDirection.TOP||d==ResizeDirection.BOTTOM?'vert':d==ResizeDirection.TOP_RIGHT||d==ResizeDirection.BOTTOM_LEFT?'up':d==ResizeDirection.TOP_LEFT||d==ResizeDirection.BOTTOM_RIGHT?'down':'';}else {dom.dataset.hidden='true';}}}class RotateHandle extends VisualElement{constructor(){super(...arguments);this._dragging=false;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setTarget(editView,target){this._editView=editView;this._target=target;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-rotate-handle';}_initDom(doc,dom){dom.style.position='absolute';dom.style.display='inline-block';dom.style.pointerEvents='all';this.width=this.height=20;dom.ondblclick=e=>{this._target.model.rotation=0;};dom.onpointerdown=e=>{dom.setPointerCapture(e.pointerId);this._oldRotation=this._target.model.rotation;this._dragging=true;};dom.onpointerup=e=>{this._target.model.report.setItemProperty(this._target.model,'rotation',this._target.rotation);this._dragging=false;dom.releasePointerCapture(e.pointerId);};dom.onpointermove=e=>{if(this._dragging){const r=this._target.dom.getBoundingClientRect();r.x+=r.width/2;r.y+=r.height/2;const a=+(Math.atan2(e.clientX-r.x,e.clientY-r.y)*180/Math.PI).toPrecision(15);// 회전 중에는 모델 대신 element에 설정해야 한다! ∵ undo/redo
    // this._target.model.rotation = +((360 - a) % 360).toFixed(1);
    this._target.setRotation(+((360-a)%360).toFixed(1));this._editView.editLayer.resetFocusView();}};}}class RotateLine extends VisualElement{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-rotate-line';}}class FocusView extends VisualElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,editView){super(doc,'focusView');//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._simpleMode=false;this._editView=editView;this.addChild(this._rotateLine=new RotateLine(doc));this.addChild(this._topHandle=new FocusHandle(doc,ResizeDirection.TOP));this.addChild(this._bottomHandle=new FocusHandle(doc,ResizeDirection.BOTTOM));this.addChild(this._leftHandle=new FocusHandle(doc,ResizeDirection.LEFT));this.addChild(this._rightHandle=new FocusHandle(doc,ResizeDirection.RIGHT));this.addChild(this._topLeftHandle=new FocusHandle(doc,ResizeDirection.TOP_LEFT));this.addChild(this._topRightHandle=new FocusHandle(doc,ResizeDirection.TOP_RIGHT));this.addChild(this._bottomLeftHandle=new FocusHandle(doc,ResizeDirection.BOTTOM_LEFT));this.addChild(this._bottomRightHandle=new FocusHandle(doc,ResizeDirection.BOTTOM_RIGHT));this.addChild(this._rotateHandle=new RotateHandle(doc));}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /**
         * true이면 TOP_LEFT + BOTTOM_RIGHT.
         * false이면 LEFT + RIGHT + TOP + BOTTOM.
         */get simpleMode(){return this._simpleMode;}set simpleMode(value){if(value!=this._simpleMode){this._simpleMode=value;this._topHandle.dir=value?ResizeDirection.TOP_LEFT:ResizeDirection.TOP;this._bottomHandle.dir=value?ResizeDirection.BOTTOM_RIGHT:ResizeDirection.BOTTOM;this._leftHandle.visible=!value;this._rightHandle.visible=!value;}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    layout(elt){this._topHandle.itemView=this._bottomHandle.itemView=this._leftHandle.itemView=this._rightHandle.itemView=null;this._topLeftHandle.itemView=this._bottomLeftHandle.itemView=this._topRightHandle.itemView=this._bottomRightHandle.itemView=null;if(elt instanceof ReportItemElement){const w=this.width;const h=this.height;// TODO: 현재 handle들의 위치가 다소 틀어지게 표시돼서 계산을 억지로 하고 있음.
    const sz=6;const half=sz/2;if(this._simpleMode){this._topHandle.itemView=this._bottomHandle.itemView=elt;this._topHandle.move(-half,-half,true);this._bottomHandle.move(w-sz,h-sz,true);}else {this._topHandle.itemView=this._bottomHandle.itemView=this._leftHandle.itemView=this._rightHandle.itemView=elt;this._topLeftHandle.itemView=this._bottomLeftHandle.itemView=this._topRightHandle.itemView=this._bottomRightHandle.itemView=elt;this._topHandle.move((w-sz-half)/2,-sz,true);this._bottomHandle.move((w-sz-half)/2,h-half,true);this._leftHandle.move(-sz,(h-sz-half)/2,true);this._rightHandle.move(w-half,(h-sz-half)/2,true);this._topLeftHandle.move(-sz,-sz,true);this._topRightHandle.move(w-half,-sz,true);this._bottomLeftHandle.move(-sz,h-half,true);this._bottomRightHandle.move(w-half,h-half,true);}if(this._rotateHandle.visible=elt.model.canRotate()){this._rotateHandle.setTarget(this._editView,elt);this._rotateHandle.move((w-this._rotateHandle.width)/2,h+this._rotateHandle.width,true);}if(this._rotateLine.visible=this._rotateHandle.visible){this._rotateLine.width=1;this._rotateLine.height=this._rotateHandle.width;this._rotateLine.move(w/2,h);}this.setRotation(elt.rotation);}else {this._rotateHandle.visible=this._rotateLine.visible=false;this.setRotation(0);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return FocusView.STYLE;}get isLayer(){// TODO: 당분간... FocusHandle들을 클릭할 수 있어야 한다.
    return true;}_initDom(doc,dom){super._initDom(doc,dom);dom.style.zIndex=ReportEditLayer.FOCUS_ZINDEX;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    FocusView.STYLE='rr-focus-view';/**
     * @internal
     */class ErrorView extends UIElement{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'rr-error-view');}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setError(message){this.setText(message);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _prepareDom(doc,dom){Utils.extend(dom.style,{position:'absolute'});}}/**
     * 리포트 view 위에서 편집 관련 tooling을 표시하는 view.
     */class ReportEditLayer extends LayerElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,reportView){super(doc,'reportEditLayer');this._selectPool=[];this._selectViews=[];this._tableSelectPool=[];this._tableSelectViews=[];this._marquees={'TableBand':null,'TableContainer':null,'BandGroup':null,'ColumnBoxContainer':null,'RowBoxContainer':null,'ChartItem':null,'HichartItem':null};this._reportView=reportView;this.addChild(this._focusView=new FocusView(doc,reportView));}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get editMarquee(){return this._editMarquee;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    layoutContent(){const reportView=this._reportView;this.$_layoutFocus(reportView);this.$_layoutSelection(reportView);this.$_layoutTableSelection(reportView);this.$_layoutMarquee(reportView);}closeEditMarquees(){if(this._editMarquee){this._editMarquee.visible=false;this._editMarquee=null;}}showFocus(){this._focusView.visible=true;}hideFocus(){this._focusView.visible=false;}showError(source,error){let duration=arguments.length>2&&arguments[2]!==undefined?arguments[2]:3.0;const v=this._reportView.getElementOf(source);if(!v)return false;this.hideError();const rView=this.container.getDomPosition(v);let x=rView.x;let y=rView.y;const w=this.width;const h=this.height;if(!this._errorView){this._errorView=new ErrorView(this.doc);}this._errorView.dom.classList.remove('rr-error-view-hide');this._errorView.setError(error);this.container.addFeedback(this._errorView);const r=this._errorView.getBounds();x=Math.max(0,x+(w-r.width)/2);if(r.height<=y){y-=r.height;}else {y=Math.max(h-r.height,y+r.height+2);}this._errorView.move(x,y);this._errorView.dom.classList.remove('rp-error-view-hide');this._errorTimer=setTimeout(()=>{this.hideError();},duration*1000);return true;}hideError(){if(this._hideErrorTimer){clearTimeout(this._hideErrorTimer);this._hideErrorTimer=null;this.container.removeFeedback(this._errorView);}if(this._errorTimer){clearTimeout(this._errorTimer);this._errorTimer=null;this._errorView.dom.classList.add('rp-error-view-hide');this._hideErrorTimer=setTimeout(()=>{this.container.removeFeedback(this._errorView);},500);}}/**
         * @internal
         */itemsRemoved(items){}/**
         * @internal
         */itemRemoved(item){}resetFocusView(){this.$_layoutFocus(this._reportView);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return "rr-edit-layer";}_isEmptySize(){return true;}_initDom(doc,dom){super._initDom(doc,dom);//dom.style.pointerEvents = "none";
    }//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_getCellRect(reportView,cell,width,height,rotated){const table=reportView.getElementOf(cell.table);const r=reportView.getItemBoundingRect(table,rotated);const rCell=table.getCellBoundingRect(cell.col,cell.row,width,height);rCell.x+=r.x;rCell.y+=r.y;return rCell;}$_getFieldRect(reportView,field){const band=CrosstabBand.getBandOf(field);const bandView=reportView.getElementOf(band);const r=reportView.getItemBoundingRect(bandView);const rCell=bandView.getFieldBoundingRect(field);rCell.x+=r.x;rCell.y+=r.y;return rCell;}$_layoutSelection(reportView){const doc=this.doc;const pool=this._selectPool;const views=this._selectViews;const models=reportView.selection;//?.filter(m => m instanceof ReportItem);
    const foc=reportView.focusedItem;let cnt=models?models.length:0;if(cnt>0){for(let m of models){// focused를 뺀다
    if(m===foc){cnt--;}else if(m instanceof TableSelection){if(m.equals(foc)){cnt--;}}else if(!(m instanceof ReportItem)){cnt--;}}}while(views.length>cnt){const v=views.pop();this.removeChild(v);pool.push(v);}while(views.length<cnt){const v=pool.pop()||new SelectView(doc);this.addChild(v);views.push(v);}if(cnt>0){let n=0;for(let i=0,cnt=models.length;i<cnt;i++){const m=models[i];if(m instanceof ReportItem&&m!==foc){const v=reportView.getElementOf(m);if(v){const r=reportView.getItemBoundingRect(v,m.rotation!==0);views[n++].layout(r,m);}}else if(m instanceof TableSelection){if(foc instanceof TableCell&&!m.equals(foc)){const r=this.$_getCellRect(reportView,m.cell,m.cols,m.rows,false);views[n++].layout(r,m);}}}}}$_layoutTableSelection(reportView){var _a;const doc=this.doc;const pool=this._tableSelectPool;const views=this._tableSelectViews;const models=(_a=reportView.selection)===null||_a===void 0?void 0:_a.filter(m=>m instanceof TableColumnBase||m instanceof TableRow);let cnt=models?models.length:0;while(views.length>cnt){const v=views.pop();this.removeChild(v);pool.push(v);}while(views.length<cnt){const v=pool.pop()||new TableSelectView(doc);this.addChild(v);views.push(v);}if(cnt>0){let n=0;for(let i=0,cnt=models.length;i<cnt;i++){const m=models[i];let rTable;let r;if(m instanceof TableColumn){const v=reportView.getTableElementOfColumn(m);rTable=reportView.getItemBoundingRect(v);r=v.getColRect(m.index,1);}else if(m instanceof TableBandColumn){const v=reportView.getTableBandElementOfColumn(m);rTable=reportView.getItemBoundingRect(v);r=v.getColRect(m.index,1);}else if(m instanceof TableRow){const v=reportView.getTableElementOfRow(m);rTable=reportView.getItemBoundingRect(v);r=v.getRowRect(m.index,1);}r.x+=rTable.x+2;r.y+=rTable.y+2;views[n++].layout(r,m);}}}$_layoutFocus(reportView){const fv=this._focusView;const elt=reportView.getFocusedElement();const item=reportView.focusedItem;const rotated=elt instanceof ReportItemElement&&!isNaN(elt.rotation)&&elt.rotation!==0;let r;if(item instanceof TableCell){if(fv.visible=!reportView.editing){r=this.$_getCellRect(reportView,item,item.width,item.height,rotated);}}else if(CrosstabBand.isFieldCell(item)){if(fv.visible=!reportView.editing){r=this.$_getFieldRect(reportView,item);}}else {if(fv.visible=!reportView.editing&&!!elt){r=reportView.getItemBoundingRect(elt,rotated);}}if(fv.visible){fv.setRect(r);fv.layout(elt);fv.draw();}}$_getMarquee(item){const t=item&&item.constructor['$_ctor'];let marquee=this._marquees[t];if(!marquee&&t in this._marquees){marquee=new ReportEditLayer.MarqueeTypes[t](this.doc);this.addChild(marquee);this._marquees[t]=marquee;}return marquee;}$_getMarqueeParent(item){while(item){const p=item.marqueeParent;if(p===item)return item;item=p;}}$_layoutMarquee(reportView){const focusedItem=reportView.focusedItem;const f=this.$_getMarqueeParent(focusedItem);// focusedItem && focusedItem.marqueeParent;
    const oldMarquee=this._editMarquee;if(f){const focusedView=reportView.getElementOf(f);if(focusedView&&!reportView.pageView.isPageDom(focusedView.dom)){const marquee=this.$_getMarquee(f);if(oldMarquee&&oldMarquee.target!==focusedView){oldMarquee.visible=false;}if(marquee){marquee.target=focusedView;marquee.visible=true;marquee.layout(this._reportView);this._editMarquee=marquee;}return;}}if(oldMarquee){oldMarquee.visible=false;}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ReportEditLayer.SELECT_ZINDEX='100';ReportEditLayer.FOCUS_ZINDEX='101';//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    ReportEditLayer.MarqueeTypes={//'SimpleBand': SimpleBandMarquee,
    'TableBand':TableBandMarquee,'TableContainer':TableContainerMarquee,'BandGroup':BandGroupMarquee,'ColumnBoxContainer':ColumnBoxMarquee,'RowBoxContainer':RowBoxMarquee,'HichartItem':HichartMarquee};////////////////////////////////////////////////////////////////////////////////
    /**
     * 새로운 group으로 아이템을 이동시킨다.
     */class ChangeParentCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item,newParent){super('Change Itme Parent');assert(!!item);this._item=item;this._newParent=newParent;this._oldParent=item.parent;}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static createCommands(items,newParent){if(items&&items.length>0){const cmds=[];items.forEach((item,i)=>{cmds.push(new ChangeParentCommand(item,newParent));});return cmds.length>0?cmds:null;}}_doDispose(){this._item=this._oldParent=this._newParent=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._oldParent.remove(this._item);this._newParent.add(this._item);}undo(){this._newParent.remove(this._item);this._oldParent.add(this._item);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get description(){return 'Change parent: '+this._item.designText;}get source(){return this._item;}}/**
     * Report item들의 위치를 변경한다.
     */class ChangeItemsParentCommand extends EditCommandGroup{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(items,newParent){super('Change Items Parent',ChangeParentCommand.createCommands(items,newParent));}}////////////////////////////////////////////////////////////////////////////////
    /**
     * @internal
     */class ReportDragTracker extends DragTracker{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(editor,name){super(editor,name);this._editor=editor;}_doDispose(){this._editor=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** editor */get editor(){return this._editor;}get selectable(){return false;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    /**
         * 자체적으로 selection 관리를 하고 새 focused item을 리턴.
         */handleSelection(){return null;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get startWhenCreated(){return true;}}/**
     * editor가 hand mode 일 때 editor view를 이동시킨다.
     */class HandModeTracker extends ReportDragTracker{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(editor){super(editor,"handModeTracker");//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._saveLeft=0;this._saveTop=0;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doStart(eventTarget,x,y,shift){const editor=this.editor;this._saveLeft=editor.leftPos;this._saveTop=editor.topPos;editor.setCursor('grabbing');return true;}_doDrag(eventTarget,x,y){this.editor.leftPos=this._saveLeft-(x-this.startX);this.editor.topPos=this._saveTop-(y-this.startY);return true;}_doEnded(){this.editor.setCursor('grab');}}/**
     * Chart item resize tracker.
     */class ItemResizeTracker extends ReportDragTracker{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(editor,handle){super(editor,"itemResizeTracker");this._isLeft=false;this._isTop=false;this._zoom=1;this._handle=handle;this._itemView=this._handle.itemView;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    handleSelection(){const editor=this.editor;const item=this._itemView.model;// this._items = [item];
    // this._itemViews = [this._itemView];
    // if (editor.isSelected(item)) {
    //     editor.getSelection()?.forEach(sel => {
    //         if (sel instanceof ReportItem && sel !== item && sel.parent === item.parent) {
    //             this._items.push(sel);
    //             this._itemViews.push(editor.reportView.pageView.getElementOf(sel) as ReportItemView);
    //         } else {
    //             editor.removeSelection(sel);
    //         }
    //     })
    // } else {
    editor.clearSelection();// }
    return item;}_doStart(eventTarget,x,y,shift){const v=this._itemView;const item=v.model;const dir=this._handle.dir;this._zoom=this.editor.zoom/100;if(item instanceof SpaceItem){this._saveWidth=this._saveHeight=item.size;}else {this._saveWidth=item.width;this._saveHeight=item.height;}this._oldWidth=v.width;this._oldHeight=v.height;// for moving
    this._isLeft=ResizeDirection.isLeft(dir);this._isTop=ResizeDirection.isTop(dir);//if (this._isLeft || this._isTop) {
    // if (this._isLeft && Utils.defined(item.left) || this._isTop && Utils.defined(item.top)) {
    this._saveX=item.left;this._saveY=item.top;this._oldPos=this.editor.getDomPosition(v);this._oldLeft=item.getLeft(Number.MAX_SAFE_INTEGER);this._oldTop=item.getTop(Number.MAX_SAFE_INTEGER);//}
    return true;}_doDrag(eventTarget,x,y){const zoom=1/this._zoom;const inc=this.$_getDelta(this._handle.dir);const item=this._handle.itemView.model;const dx=(x-this.startX)*inc.dx*zoom;const dy=(y-this.startY)*inc.dy*zoom;const x2=this._isLeft?this._oldLeft-dx:NaN;const y2=this._isTop?this._oldTop-dy:NaN;const w=Math.max(0,Math.round(this._oldWidth+dx));const h=Math.max(0,Math.round(this._oldHeight+dy));if(this._handle.horizontal){if(item instanceof SpaceItem&&item.parent instanceof RowBoxContainer){item.size=w;}else if(!isNaN(x2)){item.setChildProp('left',x2);item.width=w;}else {item.width=w;}}if(this._handle.vertical){if(item instanceof SpaceItem&&item.parent instanceof ColumnBoxContainer){item.size=h;}else if(!isNaN(y2)){item.setChildProp('top',y2);item.height=h;}else {item.height=h;}}return true;}_doCompleted(){const report=this.editor.report;const zoom=1/this._zoom;const item=this._handle.itemView.model;const inc=this.$_getDelta(this._handle.dir);const dx=this._handle.horizontal?Math.round((this.currentX-this.startX)*inc.dx*zoom):0;const dy=this._handle.vertical?Math.round((this.currentY-this.startY)*inc.dy*zoom):0;if(item instanceof SpaceItem){if(item.parent instanceof RowBoxContainer){report.resizeSpace(item,this._saveWidth,this._oldWidth,dx);}else if(item.parent instanceof ColumnBoxContainer){report.resizeSpace(item,this._saveHeight,this._oldHeight,dy);}}else {if(this._saveX!==item.left||this._saveY!==item.top){const x2=this._isLeft?this._oldLeft-dx:this._oldLeft;const y2=this._isTop?this._oldTop-dy:this._oldTop;report.resizeAndMove(item,this._saveWidth,this._saveHeight,this._oldWidth,this._oldHeight,dx,dy,x2,y2);}else {report.resizeItem(item,this._saveWidth,this._saveHeight,this._oldWidth,this._oldHeight,dx,dy);}}}_doCanceled(){const item=this._handle.itemView.model;item.resize(this._oldWidth,this._oldHeight);}_doEnded(){}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_getDelta(dir){let dx=0;let dy=0;switch(dir){case ResizeDirection.LEFT:dx=-1;break;case ResizeDirection.RIGHT:dx=1;break;case ResizeDirection.TOP:dy=-1;break;case ResizeDirection.BOTTOM:dy=1;break;case ResizeDirection.TOP_LEFT:dx=dy=-1;break;case ResizeDirection.BOTTOM_RIGHT:dx=dy=1;break;case ResizeDirection.TOP_RIGHT:dx=1;dy=-1;break;case ResizeDirection.BOTTOM_LEFT:dx=-1;dy=1;break;}return {dx,dy};}}class MoveFeedback extends UIElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,item){super(doc,'rr-move-feedback');}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _prepareDom(doc,dom){this.setImportantStyle('position','absolute');dom.appendChild(this._span=doc.createElement('span'));}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setNewPosition(x,y){delete this._span.dataset.change;this._span.textContent='(left: '+x+', top: '+y+')';this._span.style.display='';this._span.style.left=-(this._span.offsetWidth+1)+'px';return this;}setNewParent(elt){let s=elt.model.pathLabel;if(elt.model.name)s=elt.model.name+'('+s+')';this._span.dataset.change='';this._span.textContent='[to '+s+']';this._span.style.display='';this._span.style.left='';return this;}hideSpan(){this._span.style.display='none';}}class MoveLineFeedback extends UIElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,styleName){super(doc,styleName||'rr-move-line-feedback');//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._width='1px';}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    vline(x,y1,y2){this.show();this.clearStyle('border-top-width');this.setStyle('border-left-width',this._width);this.setBounds(x,Math.min(y1,y2),2,Math.abs(y1-y2));}hline(y,x1,x2){this.show();this.clearStyle('border-left-width');this.setStyle('border-top-width',this._width);this.setBounds(Math.min(x1,x2),y,Math.abs(x2-x1),2);}}class MoveMask extends UIElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'rr-move-mask-feedback');}}class GuideFeedback extends MoveLineFeedback{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'rr-move-guide-feedback');this._width='2px';}}/**
     * Chart item move tracker.
     */class ItemMoveTracker extends ReportDragTracker{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(editor,itemView,moveType){super(editor,"itemMoveTracker");this._alt=false;this._dir='';this._guideX=NaN;this._guideY=NaN;this._zoom=1;this._itemView=itemView;this._moveType=moveType;this._parentView=itemView.parent;if(this._parentView instanceof StackContainerElement){const container=this._parentView.container;this._siblings=this._parentView.elements.filter(v=>{return v!==this._itemView&&v instanceof ReportItemElement;}).map(v=>{const p=container.getDomPosition(v);return Rectangle.create(p.x,p.y,v.width,v.height);});}}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get selectable(){return true;}get cursor(){return 'move';}handleSelection(){var _a;const editor=this.editor;const item=this._itemView.model;this._items=[item];this._itemViews=[this._itemView];if(editor.isSelected(item)){(_a=editor.getSelection())===null||_a===void 0?void 0:_a.forEach(sel=>{if(sel instanceof ReportItem&&sel!==item&&sel.parent===item.parent){this._items.push(sel);this._itemViews.push(editor.reportView.pageView.getElementOf(sel));}else {editor.removeSelection(sel);}});}else {editor.clearSelection();}return item;}_doStart(eventTarget,x,y,shift,alt){const editor=this.editor;const itemViews=this._itemViews;this._zoom=editor.zoom/100;this._alt=alt;this._parentPos=this._parentView.container.getDomPosition(this._parentView);this.$_prepare(editor.doc);this._itemPts=[];this._feedbacks.forEach((f,i)=>{const v=itemViews[i];const p=editor.getDomPosition(v,v.rotation!==0);f.setBounds(p.x,p.y,p.width,p.height);f.setRotation(v.rotation);this._itemPts.push(p);});return true;}_doDrag(eventTarget,x,y){const elt=this.editor.findReportElementOf(eventTarget);const itemView=this._itemView;let dx=x-this.startX;let dy=y-this.startY;if(elt!==itemView&&elt instanceof ReportGroupItemElement&&elt!==itemView.parent&&!itemView.isAncestorOf(elt)){const r=elt.boundsByContainer();r.x-=this.editor.leftPos;r.y-=this.editor.topPos;this._mask.setRect(r);this._mask.show();this._newParent=elt;this._feedbacks.forEach((f,i)=>{const p=this._itemPts[i];f.setNewParent(elt).move(p.x+dx,p.y+dy);});this._hline.hide();this._vline.hide();}else {this._mask.hide();this._newParent=null;let dir=this._dir;if(!dir&&dx!==dy){dir=this._alt?Math.abs(dx)>Math.abs(dy)?'h':'v':'';}this._dir=dir;if(dir==='h')dy=0;if(dir==='v')dx=0;const pts=this.$_calcPts(dx,dy);this._feedbacks.forEach((f,i)=>{const p=this._itemPts[i];const pt=pts[i];const x2=p.x+dx;const y2=p.y+dy;f.setNewPosition(pt.x,pt.y).move(x2,y2);if(i===0){x=x2;y=y2;}});// line
    if(dir==='h'||!dir){this._hline.hline(y+itemView.height/2,x,this._parentPos.x);}else {this._hline.hide();}if(dir==='v'||!dir){this._vline.vline(x+itemView.width/2,y,this._parentPos.y);}else {this._vline.hide();}// guide
    this._guideX=this._guideY=NaN;this._hguide.hide();this._vguide.hide();if(this._siblings){const bounds=Rectangle.create(x,y,itemView.width,itemView.height);let r;r=this.$_getNearest(bounds,'t','t');if(r){this._guideY=y-r.y;this._hguide.hline(r.y,r.x,r.x+r.width);this._feedbacks[0].hideSpan();}else {r=this.$_getNearest(bounds,'b','b');if(r){this._guideY=y+bounds.height-(r.y+r.height);this._hguide.hline(r.y+r.height,r.x,r.x+r.width);}}r=this.$_getNearest(bounds,'l','l');if(r){this._guideX=x-r.x;this._vguide.vline(r.x,r.y,r.y+r.height);this._feedbacks[0].hideSpan();}else {r=this.$_getNearest(bounds,'r','r');if(r){this._guideX=x+bounds.width-(r.x+r.width);this._vguide.vline(r.x+r.width,r.y,r.y+r.height);}}}}return true;}_doCompleted(){const itemView=this._itemView;const item=itemView.model;const report=item.report;let dx=this.currentX-this.startX;let dy=this.currentY-this.startY;if(this._dir==='h')dy=0;if(this._dir==='v')dx=0;if(this._newParent){if(this._items.length>1){report.execute(new ChangeItemsParentCommand(this._items,this._newParent.model));}else {report.execute(new ChangeParentCommand(item,this._newParent.model));}}else if(dx!==0||dy!==0){if(!isNaN(this._guideY))dy-=this._guideY;if(!isNaN(this._guideX))dx-=this._guideX;const pts=this.$_calcPts(dx,dy);if(pts.length>1){report.execute(new MoveItemsCommand(this._items,pts));}else {report.execute(new MoveItemCommand(item,pts[0].x,pts[0].y));}}}_doCanceled(){}_doEnded(){this._editor.removeFeedbacks(this._hguide,this._vguide,this._hline,this._vline,this._mask);this._feedbacks.forEach(f=>this._editor.removeFeedback(f));}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_calcPts(dx,dy){const zoom=this._zoom;const pParent=this._parentPos;const pts=[];this._itemPts.forEach(p=>{const x=Math.round((p.x-pParent.x+dx)/zoom);const y=Math.round((p.y-pParent.y+dy)/zoom);pts.push({x,y});});return pts;}$_prepare(doc){this._feedbacks=[];this._items.forEach(item=>{this._feedbacks.push(new MoveFeedback(doc,item));});this._hguide=new GuideFeedback(doc);this._vguide=new GuideFeedback(doc);this._hline=new MoveLineFeedback(doc);this._vline=new MoveLineFeedback(doc);this._mask=new MoveMask(doc);this._feedbacks.forEach(f=>this._editor.addFeedbacks(f));this._editor.addFeedbacks(this._hguide,this._vguide,this._hline,this._vline,this._mask);}$_distance(r1,r2){const dx=Math.pow(r1.x+r1.width/2-(r2.x+r2.width/2),2);const dy=Math.pow(r1.y+r1.height/2-(r2.y+r2.height/2),2);return Math.sqrt(dx+dy);}$_getNearest(bounds,p1,p2){const x=bounds.x;const y=bounds.y;const x2=bounds.x+bounds.width;const y2=bounds.y+bounds.height;let d;let r;for(let i=0;i<this._siblings.length;i++){const s=this._siblings[i];let r2;switch(p1){case't':switch(p2){case't':if(y>=s.y-1&&y<=s.y+1){r2=s;}break;}break;case'b':switch(p2){case'b':if(y2>=s.y+s.height-1&&y2<=s.y+s.height+1){r2=s;}break;}case'l':switch(p2){case'l':if(x>=s.x-1&&x<=s.x+1){r2=s;}break;}case'r':switch(p2){case'r':if(x2>=s.x+s.width-1&&x2<=s.x+s.width+1){r2=s;}break;}}if(r2){if(!r){r=r2;d=this.$_distance(bounds,r);//console.log('d1', d);
    }else {const d2=this.$_distance(bounds,r2);//console.log('d2', d);
    if(d2<d){r=r2;d=d2;}}}}return r;}}/**
     * Table column resize tracker.
     * table에 너비가 지정된 상태면 좌우 옆 컬럼의 너비를 줄이거나 키우면서 현재 컬럼의 너비를 조정하고,
     * table 너비가 지정되지 않은 상태면 현재 컬럼의 너비만을 조정한다.
     */class TableColumnResizeTracker extends ReportDragTracker{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(editor,table,marquee,col){super(editor,"tableColumnResizeTracker");this._table=table;this._marquee=marquee;this._col=col;this._sibling=Utils.isDefined(table.model.width)&&col<table.colCount-1?col+1:-1;// console.log('sibling', this._sibling);
    this._oldPoints=table.getColPoints();this._oldSize=this._oldPoints[this._col+1]-this._oldPoints[this._col];//console.log('old size', this._oldSize);
    }//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get cursor(){return 'ew-resize';}get startWhenCreated(){return true;}_doStart(eventTarget,x,y,shift){this._start=x;return true;}_doDrag(eventTarget,x,y){const pts=this._oldPoints;const c=this._col;const dx=x-this._start;if(dx<=0){if(pts[c+1]+dx<=pts[c]+4)return false;}if(dx>0&&this._sibling){if(pts[c+1]+dx>=pts[c+2]-4)return false;}const p=this.editor.getDomPosition(this._marquee);this._newSize=Math.round(this._oldSize+dx);this._marquee.showColSizeFeedback(this._col,x-p.x,this._newSize+'px');return true;}_doCompleted(){if(this._sibling>=0){this.editor.report.adjustColumnWidths(this._table,this._col,this._oldPoints,this._newSize);}else {const column=this._table.getColumn(this._col);this.editor.report.setItemProperty(column,'width',this._newSize);}}_doEnded(){this._marquee.hideSizeFeedbacks();}}/**
     * Table row resize tracker
     * table에 높이가 지정된 상태면 좌우 옆 row의 높이를 줄이거나 키우면서 현재 row의 높이를 조정하고,
     * table 높이가 지정되지 않은 상태면 현재 row의 높이만을 조정한다.
    */class TableRowResizeTracker extends ReportDragTracker{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(editor,table,marquee,row){super(editor,"tableRowResizeTracker");this._table=table;this._marquee=marquee;this._row=row;this._sibling=Utils.isDefined(table.model.height)?row+1:-1;// console.log('sibling', this._sibling);
    this._oldPoints=table.getRowPoints();this._oldSize=this._oldPoints[this._row+1]-this._oldPoints[this._row];// console.log('old height', this._oldHeight);
    }//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get cursor(){return 'ns-resize';}get startWhenCreated(){return true;}_doStart(eventTarget,x,y,shift){this._start=y;return true;}_doDrag(eventTarget,x,y){const pts=this._oldPoints;const r=this._row;const dy=y-this._start;if(dy<=0){if(pts[r+1]+dy<=pts[r]+4)return false;}if(dy>0&&this._sibling){if(pts[r+1]+dy>=pts[r+2]-4)return false;}const p=this.editor.getDomPosition(this._marquee);this._newSize=Math.round(this._oldSize+dy);this._marquee.showRowSizeFeedback(this._table,this._row,y-p.y,this._newSize+'px');return true;}_doCompleted(){if(this._sibling>=0){this.editor.report.adjustRowHeights(this._table.model,this._row,this._oldPoints,this._newSize);}else {const row=this._table.model.getRow(this._row);this.editor.report.setItemProperty(row,'height',this._newSize);}}_doEnded(){this._marquee.hideSizeFeedbacks();}}/**
     * Chart series 순서를 변경한다.
     */class ChartSeriesMoveTracker extends ReportDragTracker{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(editor,dom,marquee){super(editor,"chartSeriesMoveTracker");this._dom=dom;this._bounds=Utils.getOffsetRect(dom);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get selectable(){return true;}_doStart(eventTarget,x,y,shift){this._feedback=this.editor.doc.createElement('div');this._feedback.className='rr-series-move-feedback';Object.assign(this._feedback.style,{position:'absolute',backgroundColor:'#33333380',border:'1px solid #111'});Utils.setRect(this._feedback,this._bounds);this._dom.parentElement.appendChild(this._feedback);return true;}_doDrag(eventTarget,x,y){const editMarquee=this.editor.getEditMarquee();this.editor.dom.getBoundingClientRect().x-this.editor.leftPos;const seriesMarquee=editMarquee.isSeries(eventTarget);if(seriesMarquee!==this._targetDom){if(this._targetDom){this._targetDom.style.backgroundColor='';}if(seriesMarquee!==this._dom){this._targetDom=seriesMarquee;if(this._targetDom){seriesMarquee.style.backgroundColor='#f80';}}else {this._targetDom=null;}}x=this._bounds.x+(x-this.startX)*100/this.editor.zoom;this._feedback.style.left=x+'px';return true;}_doCompleted(eventTarget,x,y){if(this._targetDom){const marquee=this.editor.getEditMarquee();const chart=marquee.chart;const series=marquee.getSeriesIndex(this._dom);const seriesTo=marquee.getSeriesIndex(this._targetDom);this.editor.report.moveCollectionItem(chart.series,series,seriesTo);}}_doEnded(){if(this._targetDom){this._targetDom.style.backgroundColor='';this._targetDom=null;}this._dom.parentElement.removeChild(this._feedback);this._dom=null;}}////////////////////////////////////////////////////////////////////////////////
    class GuardItemView extends ReportElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'gaurdItemView');//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._index=-1;this._focused=false;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** section */get section(){return this._section;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _debuggable(){return false;}isDom(dom){return dom===this._label||super.isDom(dom);}_initDom(doc,dom){super._initDom(doc,dom);dom.style.overflow='hidden';this._label=doc.createElement('div');dom.appendChild(this._label);}_doMeasure(ctx,dom,hintWidth,hintHeight){let s=this._index%2?'rr-section-guard-item-odd':'rr-section-guard-item';if(this._focused){s+=' rr-section-guard-item-focus';}this.styleName=s;if(this._section['model']instanceof ReportPage){dom.style.backgroundColor=this._focused?'':'#ddd';}return new Size(hintWidth,hintHeight);}_doLayoutContent(ctx){this._label.textContent=this._section.guardLabel;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_setSection(index,section,focused){this._index=index;this._section=section;this._focused=focused;}}/**
     * @internal
     * 리포트 컨테이너 좌측에 표시된다.
     * page hader 등의 section과 band 들의 수직 bounds를 표시하고,
     * 편집에 도움되는 tool을 제공한다.
     */class SectionGuard extends ReportElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,container){super(doc,'sectionGaurd');this._itemPool=[];this._itemViews=[];this._editor=container;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _debuggable(){return false;}_getCssSelector(){return 'rr-section-guard';}_initDom(doc,dom){super._initDom(doc,dom);}_doPrepareMeasure(ctx,dom){const sections=this._editor.reportView.pageView.getSections();const count=sections.length;const views=this._itemViews;const doc=this.doc;let view;while(views.length<count){view=this.$_borrow(doc);this.addChild(view);views.push(view);}while(views.length>count){view=views.pop();this.removeChild(view);this.$_free(view);}}_doAfterMeasure(ctx,dom,hintWidth,hintHeight,sz){}_doMeasure(ctx,dom,hintWidth,hintHeight){const sections=this._editor.reportView.pageView.getSections();const views=this._itemViews;const count=sections.length;const w=this.width-1;const focused=this._editor.focusedItem;for(let i=0;i<count;i++){const sec=sections[i];const view=views[i];view["$_setSection"](i,sec,sec['model']==focused);view.measure(ctx,w,sec.height);}return new Size(hintWidth,hintHeight);}_doLayoutContent(ctx){const editor=this._editor;const reportView=editor.reportView;const zoom=editor.zoom/100;const sections=editor.reportView.pageView.getSections();const views=this._itemViews;const count=sections.length;const top=editor.topPos;const y1=reportView.boundsByContainer().y;// first is dummy section for page
    let view=views[0];let y=y1+sections[1].boundsBy(reportView).y*zoom-top-20;view.resize(views[1].measuredWidth,20,true);view.layoutContent(ctx);view.move(0,y);for(let i=1;i<count;i++){view=views[i];y=y1+sections[i].boundsBy(reportView).y*zoom;view.resize(view.measuredWidth,view.measuredHeight*zoom,true);view.layoutContent(ctx);view.move(0,y-top);}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_borrow(doc){let view=this._itemPool.pop()||new GuardItemView(doc);return view;}$_free(view){this._itemPool.push(view);}}////////////////////////////////////////////////////////////////////////////////
    class ReportAddFeedback extends UIElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'rr-add-feedback','div');this.hide();}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get target(){return this._target;}get tableTarget(){return this._tableTarget;}get trow(){//const hrow = 1; // table 첫 행이 colspan 등의 용도로 자동 추가된다. 
    const hrow=0;// 현재 colgroup으로 처리하고 있다.
    return this._tcell?this._tcell.parentElement.rowIndex-hrow:-1;}get tcol(){return this._tcell?this._tcell.cellIndex:-1;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setTarget(element){if(element&&!(element instanceof ReportGroupItemElement)){element=element.modelParent;}const target=element;if(target!==this._target){this._target=target;this._tcell=this._tableTarget=null;if(target&&target.container instanceof ReportEditor){const editor=target.container;const p=editor.getDomPosition(target);const w=element.width*editor.zoom/100;const h=element.height*editor.zoom/100;p.x+=editor.leftPos;p.y+=editor.topPos;this.setStyles({display:'',left:p.x-editor.leftPos+'px',top:p.y-editor.topPos+'px',width:w+'px',height:h+'px'});}else {this.setStyle('display','none');}}}setTableTarget(editor,div){if(div!==this._tcell){const cell=this._tcell=div&&div.parentElement;this._tableTarget=cell&&editor.findTable(this._tcell);this._target=null;if(this._tcell){const r=cell.getBoundingClientRect();const r2=editor.getBound();const w=cell.offsetWidth*editor.zoom/100;const h=cell.offsetHeight*editor.zoom/100;this.setStyles({display:'',left:r.x-r2.x+'px',top:r.y-r2.y+'px',width:w+'px',height:h+'px'});}else {this.setStyle('display','none');}}}clearTarget(){this.setTarget(null);this.setTableTarget(null,null);}}class ReportAddEffect extends UIElement{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'rr-add-effect','span');this.hide();}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setAddType(type){let x=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;let y=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(type){this.setText(type);this.setStyles({display:'',left:x+18+'px',top:y+'px'});}else {this.hide();}}clearAddType(){this.hide();}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Table selection tracker
     */class TableSelectTracker extends ReportDragTracker{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(editor,table){super(editor,"tableSelectionTracker");this._table=table;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get selectable(){return true;}_doStart(eventTarget,x,y,shift){this._selection=this.editor.getSelection()[0];return true;}_doDrag(eventTarget,x,y){const cell=this._table.getCellOf(eventTarget,true);if(cell){this.editor.selections.resize(this._selection,cell);return true;}}_doCompleted(eventTarget,x,y){}_doEnded(){}}class SelectFeedback extends UIElement{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'rr-select-feedback');}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _prepareDom(doc,dom){this.setImportantStyle('position','absolute');}}/**
     * Item selection tracker
     */class ItemSelectTracker extends ReportDragTracker{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(editor,clickElt,shifted){super(editor,"itemSelectionTracker");this._selectable=!shifted;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get startWhenCreated(){this._offset=this.editor.getDomPosition(this.editor.reportView.pageView);return false;}get selectable(){return this._selectable;}_doStart(eventTarget,x,y,shift){const editor=this.editor;this.$_prepare(editor.doc);this._bounds=Rectangle.create(x,y,0,0);this._offset=this.editor.getDomPosition(this.editor.reportView.pageView);return true;}_doDrag(eventTarget,x,y){this._bounds.x=Math.min(this.startX,x);this._bounds.y=Math.min(this.startY,y);this._bounds.width=Math.abs(x-this.startX);this._bounds.height=Math.abs(y-this.startY);this._feedback.setRect(this._bounds);return true;}_doCompleted(eventTarget,x,y){const items=this.$_getItems();if(items&&items.length>0){this.editor.clearSelection();this.editor.addSelections(items);this.editor.focusedItem=items[0];}}_doEnded(){this._editor.removeFeedback(this._feedback);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_prepare(doc){this._feedback=new SelectFeedback(doc);this._editor.addFeedback(this._feedback);}$_getItems(){this._bounds.translate(-this._offset.x,-this._offset.y);const container=this.editor.reportView.activeContainerView;const elts=this.editor.reportView.pageView.getAllElements(container,this._bounds);return elts.map(elt=>elt.model);}}/**
     * Table column marquee select tracker
     */class TableColumnMarqueeSelectTracker extends ReportDragTracker{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(editor,marquee){super(editor,"tableColumnMarqueeSelectTracker");this._column=marquee.target;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get selectable(){return true;}_doStart(eventTarget,x,y,shift){return true;}_doDrag(eventTarget,x,y){const editor=this.editor;const t=editor.getEditMarqueeTarget(eventTarget);if(t&&t.target instanceof TableColumnBase){const columns=this._column.collection.getRange(this._column.index,t.target.index);editor.selections.replace(columns);return true;}}_doCompleted(eventTarget,x,y){}_doEnded(){}}/**
     * Table row marquee select tracker
     */class TableRowMarqueeSelectTracker extends ReportDragTracker{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(editor,marquee){super(editor,"tableRowMarqueeSelectTracker");this._row=marquee.target;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get selectable(){return true;}_doStart(eventTarget,x,y,shift){return true;}_doDrag(eventTarget,x,y){const editor=this.editor;const t=editor.getEditMarqueeTarget(eventTarget);if(t&&t.target instanceof TableRow){const rows=this._row.collection.getRange(this._row.index,t.target.index);editor.selections.replace(rows);return true;}}_doCompleted(eventTarget,x,y){}_doEnded(){}}////////////////////////////////////////////////////////////////////////////////
    class ItemMoveAction{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(view){this._dx=0;this._dy=0;this._view=view;this._item=view.model;this._oldX=view.x;this._oldY=view.y;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    isMe(item){return item===this._item;}move(dx,dy){this._dx+=dx;this._dy+=dy;if(this._dx!==0){this._view.x=this._oldX+this._dx;}if(this._dy!==0){this._view.y=this._oldY+this._dy;}return this;}run(report){if(this._dx!==0&&this._dy!==0){report.moveItem(this._item,this._oldX+this._dx,this._oldY+this._dy);}else if(this._dx!==0){report.moveItemDir(this._item,'left',this._oldX+this._dx);}else if(this._dy!==0){report.moveItemDir(this._item,'top',this._oldY+this._dy);}}}class ItemsMoveAction{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(editor,view){var _a;this._oldX=[];this._oldY=[];this._dx=0;this._dy=0;const item=view.model;this._views=[view];this._items=[item];if(editor.isSelected(item)){(_a=editor.getSelection())===null||_a===void 0?void 0:_a.forEach(sel=>{if(sel instanceof ReportItem&&sel!==item&&sel.parent===item.parent){this._items.push(sel);this._views.push(editor.reportView.pageView.getElementOf(sel));}else {editor.removeSelection(sel);}});}else {editor.clearSelection();}this._views.forEach(v=>{this._oldX.push(v.x);this._oldY.push(v.y);});}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    isMe(item){return this._items.indexOf(item)>=0;}move(dx,dy){this._dx+=dx;this._dy+=dy;if(this._dx!==0){this._views.forEach((v,i)=>v.x=this._oldX[i]+this._dx);}if(this._dy!==0){this._views.forEach((v,i)=>v.y=this._oldY[i]+this._dy);}return this;}run(report){if(this._dx!==0&&this._dy!==0){const pts=[];for(let i=0;i<this._items.length;i++){pts.push({x:this._oldX[i]+this._dx,y:this._oldY[i]+this._dy});}report.execute(new MoveItemsCommand(this._items,pts));}else if(this._dx!==0){const pts=[];for(let i=0;i<this._items.length;i++){pts.push(this._oldX[i]+this._dx);}report.execute(new MoveItemsDirCommand(this._items,'left',pts));}else if(this._dy!==0){const pts=[];for(let i=0;i<this._items.length;i++){pts.push(this._oldY[i]+this._dy);}report.execute(new MoveItemsDirCommand(this._items,'top',pts));}}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class CrosstabTool extends Base{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(editor){super();this._editor=editor;}_doDispose(){this._editor=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    mouseDown(event){const target=event.target;const band=this.$_getCrosstab(target);if(target instanceof Element&&band){const editor=this._editor;const focused=editor.focusedItem;if(CrosstabBandElement.isFieldArrow(target)){if(focused instanceof CrosstabFieldCollection){editor.report.addCrosstabField(focused,target[T_FIELD]);editor.focusedItem=focused;}}else {const field=band.getFieldOf(target);if(field){editor.setFocused(field);}else {const fields=band.getFieldsOf(target);editor.setFocused(fields||band.model);}}return true;}}click(event){const target=event.target;this.$_getCrosstab(target);return;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_getCrosstab(target){const elt=target instanceof HTMLElement&&this._editor.findReportElementOf(target);return elt instanceof CrosstabBandElement&&elt;}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class ReportSelectionTool extends VisualTool{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(editor){super(editor,'reportSelectionTool');this._crosstabTool=new CrosstabTool(editor);this._editor=editor;this._editor.addFeedback(this._addFeedback=new ReportAddFeedback(editor.doc));this._editor.addFeedback(this._addEffect=new ReportAddEffect(editor.doc));}_doDispose(){this._editor.removeFeedback(this._addEffect);this._editor.removeFeedback(this._addFeedback);this._editor=null;this._crosstabTool=this._crosstabTool.dispose();super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** editor */get editor(){return this._editor;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doMouseDown(event){const target=event.target;const editor=this._editor;const report=editor.report;const page=report.page;const button=event.type==="mousedown"?event.button:0/* MouseButton.LEFT */;const isMac=Utils.isMac;const meta=isMac&&event.metaKey||!isMac&&event.ctrlKey;const shift=event.shiftKey;const alt=event.altKey;editor.reportView.editLayer.hideError();if(editor.isEditing()&&target instanceof HTMLInputElement){return true;}if(editor.isScrollContainer(target)){return true;}if(editor.isRuler(target)){return true;}if(this.$_selectMarquee(target,button,shift,meta)){return true;}const dom=target instanceof Element?target:null;let elt=dom&&editor.findElementOf(dom);// || this.findElementAt(x, y, false);
    let sectionHead=false;this._clickElement=elt;if(editor.addMode){const isFirst=!editor.addShifted||editor.addedCount==0;if(isFirst){editor.clearSelection();}if(editor.addStyle===ReportAddStyle.CLICK){let target=this._addFeedback.target;const table=this._addFeedback.tableTarget;const trow=this._addFeedback.trow;const tcol=this._addFeedback.tcol;this.$_finishAdding();if(table){editor.endAddCell(table,trow,tcol,item=>{if(item){if(isFirst){editor.focusedItem=item;}else {editor.addSelection(item);}}});}else if(target){if(target instanceof BodyItemsElement){if(editor.focusedItem===report.page.backContainer||editor.focusedItem===report.page.frontContainer){target=editor.focusedElement;}}editor.endAdd(true,target,item=>{if(item){if(isFirst){editor.focusedItem=item;}else {editor.addSelection(item);}}});}else {editor.cancelAdd();}return true;}}if(!editor.isEditor(this.mouseEventTarget)){editor.hideEditor(true);}if(this.mouseEventTarget.classList.contains('rr-outline-expander')){return false;}if(button===0/* MouseButton.LEFT */){this.dragTracker=this._getTracker(dom,this._clickElement,shift,alt,meta);if(this.dragTracker instanceof ReportDragTracker){const item=this.dragTracker.handleSelection();if(item){editor.focusedItem=item;return false;}}}if(!this.dragTracker||this.dragTracker.selectable){const focused=editor.focusedItem;let table=TableElement.getTable(elt);let cell;let item;if(elt===editor.reportView){item=editor.report.root;}else if(elt instanceof SectionHeadView){sectionHead=true;if(elt.containsClass(ReportView.PAGE_HEAD)){item=editor.report.page;}else if(elt.containsClass(ReportView.BACK_HEAD)){item=editor.report.page.backContainer;}else if(elt.containsClass(ReportView.FRONT_HEAD)){item=editor.report.page.frontContainer;}else {item=elt.model;}}else if(elt instanceof GuardItemView&&elt.section instanceof ReportItemElement){item=elt.section.model;}else {if(!(elt instanceof ReportItemElement)&&event.target instanceof HTMLElement){elt=this._clickElement=editor.reportView.findElementOf(event.target);if(elt&&!table){table=TableElement.getTable(elt);}}if(elt instanceof ReportItemElement&&elt.model instanceof CellGroup){elt=elt.navigableParent;}if(elt instanceof ReportItemElement){let f;if(meta&&(f=ReportItem.findFloatingAnchor(elt.model))){item=f;}else {item=elt.model;}}else if(elt instanceof PageBodyElement){item=elt.model;}else {item=null;}}if(table&&target instanceof HTMLElement){cell=table.getCellOf(target,alt);}if(cell){if((shift||meta)&&cell!==focused){if(editor.toggleSelection(cell,shift)){editor.setFocused(cell);}}else if(button==0/* MouseButton.LEFT */||!editor.isSelected(cell)){editor.setFocused(cell);}}else if(meta||shift){if(item&&!editor.focusedItem){editor.focusedItem=item;if(item instanceof ReportItem){editor.addSelection(item);}}else if(item!==focused&&item instanceof ReportPageItem){if(editor.toggleSelection(item,shift)){editor.setFocused(item);}}}else if(item){if(button==0/* MouseButton.LEFT */){if(editor.reportView.activeContainer===page.backContainer){if(!sectionHead&&!page.backContainer.isAncestorOf(item)){item=null;}}else if(editor.reportView.activeContainer===page.frontContainer){if(!sectionHead&&!page.frontContainer.isAncestorOf(item)){item=null;}}else;if(item instanceof CrosstabBand){return this._crosstabTool.mouseDown(event);}item&&editor.setFocused(item);}else {const sels=editor.getSelection();if(sels&&(sels.length>1||sels[0]instanceof TableSelection&&!sels[0].isSingle(false)));else if(!editor.isSelected(item)){editor.setFocused(item);}}}}return false;}_doMouseMove(event){var _a;const target=event.target;const x=event["mouseX"];const y=event["mouseY"];const editor=this._editor;if(editor.addMode){editor.setCursor('copy');const classList=target instanceof HTMLElement?target.classList:null;const feedback=this._addFeedback;let elt=target instanceof HTMLElement&&editor.findElementOf(target);// || this.findElementAt(x, y, false);
    let item=elt instanceof ReportItemElement&&elt.model;if(!elt&&target instanceof HTMLElement&&((_a=target.parentElement)===null||_a===void 0?void 0:_a.classList.contains('rr-item-container'))){elt=editor.findElementOf(target.parentElement);item=elt instanceof ReportItemElement&&elt.model;}if(classList&&classList.contains(TableCellElementBase.STYLE)){// 빈 table cell
    feedback.setTableTarget(editor,target);}else if(target instanceof HTMLTableCellElement){if(target.firstElementChild&&target.firstElementChild.classList.contains(TableCellElementBase.STYLE)){// 빈 table cell
    feedback.setTableTarget(editor,target.firstElementChild);}}else if(elt instanceof ListContainerElement||elt instanceof StackContainerElement||elt instanceof BoxContainerElement||elt instanceof FloatingContainerElement||elt instanceof DiagonalBoxContainerElement){feedback.setTarget(elt);}else if(elt instanceof BandElement){feedback.clearTarget();}else if(elt instanceof BandCollectionElement){feedback.setTarget(elt);}else if(item instanceof CellContainer||item&&item.parent instanceof CellGroup){feedback.clearTarget();}else if(elt instanceof ReportItemElement){feedback.setTarget(elt);}else if(elt instanceof PageBodyElement){feedback.setTarget(elt.itemsView);}else {// const c = getContainer(editor.focusedItem);
    // if (c instanceof PageItemContainer) {
    //     feedback.setTarget(editor.focusedElement as PageItemContainerElement);
    // } else {
    feedback.clearTarget();// }
    }this._addEffect.setAddType(editor.addType.ITEM_TYPE,x,y);}else if(editor.handMode){editor.setCursor('grab');}else {editor.setCursor('');}}/** 그리드 밖에서도 호출된다. */_doMouseUp(event){}/** 그리드 밖에서 마우스를 놓으면 호출되지 않는다. */_doClick(event){if(this._crosstabTool.click(event))return;const target=event.target;const editor=this._editor;target instanceof HTMLElement&&editor.findElementOf(target);// || this.findElementAt(x, y, false);
    }_doDblClick(event){const target=event.target;const editor=this._editor;const elt=target instanceof HTMLElement&&editor.findElementOf(target);// || this.findElementAt(x, y, false);
    if(!editor.addMode&&elt&&elt===this._clickElement){if(this.editor.focusedItem){if(editor.showEditor()){return;}}}}_doMouseWheel(event){const editor=this._editor;if(editor.isEditing()){event.stopImmediatePropagation();return true;}const isHorz=event.shiftKey||Math.abs(event.deltaX)>Math.abs(event.deltaY);if(isHorz){const left=editor.leftPos;editor.leftPos=left+event.deltaX;editor.invalidateLayout(true);// wheel scroll 중임을 알린다.
    return true;}else {const top=editor.topPos;editor.topPos=top+event.deltaY;editor.invalidateLayout(true);// wheel scroll 중임을 알린다.
    return true;}}_doMouseEnter(event){}_doMouseLeave(event){}_doMouseOutside(){this._editor.endAdd();}_doMouseOver(event){}_doContextMenu(event){return false;}_doKeyDown(event){const code=event.code;const isMac=Utils.isMac;const shift=event.shiftKey;const alt=event.altKey;const ctrl=event.ctrlKey;const meta=isMac&&event.metaKey||!isMac&&ctrl;const metaOnly=meta&&!alt&&!shift;const editor=this._editor;const report=editor.report;const page=editor.reportView.pageView;const focused=editor.focusedItem;const focusedElt=editor.focusedItemElement;let newFocused;let newFocusedView;if(this.$_isEditingCode(code))return false;switch(code){case"KeyZ"/* KeyCode.Z */:if(isMac&&meta&&shift)return editor.redo();if(ctrl&&shift&&!alt)return editor.redo();if(metaOnly)return editor.undo();break;case"KeyY"/* KeyCode.Y */:if(metaOnly)return editor.redo();break;case"KeyC"/* KeyCode.C */:if(isMac&&event.ctrlKey&&event.metaKey&&!event.altKey&&!event.shiftKey){this.$_doAlignItems("center"/* ReportItemDirection.CENTER */);break;}if(ctrl&&alt&&event.metaKey&&!event.shiftKey){this.$_doAlignItems("center"/* ReportItemDirection.CENTER */);break;}if(metaOnly)return editor.copy();break;case"KeyV"/* KeyCode.V */:if(metaOnly)return editor.paste();break;case"KeyX"/* KeyCode.X */:if(metaOnly)return editor.cut();break;case"Delete"/* KeyCode.DELETE */:return editor.deleteSelection();case"Backspace"/* KeyCode.BACK */:if(isMac&&metaOnly)return editor.deleteSelection();case"Escape"/* KeyCode.ESC */:if(this._doEsc(metaOnly))return true;break;case"Enter"/* KeyCode.ENTER */:if(!event.isComposing){if(!this._doEnter(shift)){event.preventDefault();}}break;case"Tab"/* KeyCode.TAB */:if(this._doTab(shift))return true;break;case"Home"/* KeyCode.HOME */:if(metaOnly)newFocusedView=page.getFirst();if(focusedElt)newFocusedView=page.getFirstInGroup(focusedElt.navigableParent);break;case"End"/* KeyCode.END */:if(metaOnly)newFocusedView=page.getLast();if(focusedElt)newFocusedView=page.getLastInGroup(focusedElt.navigableParent);break;case"ArrowUp"/* KeyCode.UP */:if(isMac&&event.ctrlKey&&event.metaKey&&!event.altKey&&!event.shiftKey){this.$_doAlignItems("top"/* ReportItemDirection.TOP */);break;}if(ctrl&&alt&&event.metaKey&&!event.shiftKey){this.$_doAlignItems("top"/* ReportItemDirection.TOP */);break;}if(!meta&&alt&&focused instanceof ReportItem){this.$_moveItem(focusedElt,0,-1);return true;}if(meta&&alt&&focused instanceof ReportItem){report.changeItemIndex(focused,focused.index-1);}else {if(focused instanceof TableCell){if(shift){editor.selections.resizeBy(editor.selections.find(focused),0,-1);return true;}else {newFocused=focused.table.getCell(focused.row-1,focused.col);if(!newFocused){newFocusedView=page.getUpper(page.getElementOf(focused.table));}}}else {newFocusedView=page.getUpper(focusedElt);}}break;case"ArrowDown"/* KeyCode.DOWN */:if(isMac&&event.ctrlKey&&event.metaKey&&!event.altKey&&!event.shiftKey){this.$_doAlignItems("bottom"/* ReportItemDirection.BOTTOM */);break;}if(ctrl&&alt&&event.metaKey&&!event.shiftKey){this.$_doAlignItems("bottom"/* ReportItemDirection.BOTTOM */);break;}if(!meta&&alt&&focused instanceof ReportItem){this.$_moveItem(focusedElt,0,1);return true;}if(meta&&alt&&focused instanceof ReportItem){report.changeItemIndex(focused,focused.index+1);}else {if(focused instanceof TableCell){if(shift){editor.selections.resizeBy(editor.selections.find(focused),0,1);return true;}else {newFocused=focused.table.getCell(focused.row+1,focused.col);if(!newFocused){newFocusedView=page.getLower(page.getElementOf(focused.table));}}}else {newFocusedView=page.getLower(focusedElt);}}break;case"ArrowLeft"/* KeyCode.LEFT */:if(isMac&&event.ctrlKey&&event.metaKey&&!event.altKey&&!event.shiftKey){this.$_doAlignItems("left"/* ReportItemDirection.LEFT */);break;}if(ctrl&&alt&&event.metaKey&&!event.shiftKey){this.$_doAlignItems("left"/* ReportItemDirection.LEFT */);break;}if(!meta&&alt&&focused instanceof ReportItem){this.$_moveItem(focusedElt,-1,0);return true;}if(meta&&alt&&focused instanceof ReportItem){report.changeItemIndex(focused,focused.index-1);}else {if(focused instanceof TableCell){if(shift){editor.selections.resizeBy(editor.selections.find(focused),-1,0);return true;}else {newFocused=focused.table.getCell(focused.row,focused.col-1);if(!newFocused){newFocusedView=page.getLeft(page.getElementOf(focused.table));}}}else {newFocusedView=page.getLeft(focusedElt);}}break;case"ArrowRight"/* KeyCode.RIGHT */:if(isMac&&event.ctrlKey&&event.metaKey&&!event.altKey&&!event.shiftKey){this.$_doAlignItems("right"/* ReportItemDirection.RIGHT */);break;}if(ctrl&&alt&&event.metaKey&&!event.shiftKey){this.$_doAlignItems("right"/* ReportItemDirection.RIGHT */);break;}if(!meta&&alt&&focused instanceof ReportItem){this.$_moveItem(focusedElt,1,0);return true;}if(meta&&alt&&focused instanceof ReportItem){report.changeItemIndex(focused,focused.index+1);}else {if(focused instanceof TableCell){if(shift){editor.selections.resizeBy(editor.selections.find(focused),1,0);return true;}else {newFocused=focused.table.getCell(focused.row,focused.col+1);if(!newFocused){newFocusedView=page.getRight(page.getElementOf(focused.table));}}}else {newFocusedView=page.getRight(focusedElt);}}break;case"KeyA"/* KeyCode.A */:if(metaOnly&&focused instanceof ReportGroupItem){editor.selectAll(shift?focused:null);return true;}break;case"Digit0"/* KeyCode._0 */:if(metaOnly){editor.incZoom(0);return true;}break;case"Equal"/* KeyCode.EQUAL */:if(metaOnly){editor.incZoom(1);return true;}break;case"Minus"/* KeyCode.MINUS */:if(metaOnly){editor.incZoom(-1);return true;}break;}if(newFocusedView){newFocused=newFocused||newFocusedView.model;}if(newFocused&&newFocused!=focused){editor.setFocused(newFocused);}return super._doKeyDown(event);}_doKeyPress(event){return false;}_doKeyUp(event){if(this._moveAction){this._moveAction.run(this.editor.reportView.model);this._moveAction=null;}return false;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_getTable(dom){while(dom){if(dom instanceof HTMLTableCellElement){return this._editor.findTable(dom);}dom=dom.parentElement;}}_getTracker(dom,elt,shift,alt,meta){var _a;const editor=this._editor;const table=TableElement.getTable(elt)||this.$_getTable(dom);let i;// selecting
    if(meta&&shift){return new ItemSelectTracker(editor,elt,shift&&meta);}// resize item
    if(elt instanceof FocusHandle&&elt.enabled&&!shift){return new ItemResizeTracker(editor,elt);}// hand mode
    if(editor.handMode){return new HandModeTracker(editor);}// table cell
    if(table){const cell=table.getCellOf(dom,alt);if(cell){return new TableSelectTracker(editor,table);}}// table container
    if((i=TableContainerMarquee.isColSizeTracker(dom))>=0){const table=editor.marquee.target;if(table){return new TableColumnResizeTracker(editor,table,editor.marquee,i);}}if((i=TableContainerMarquee.isRowSizeTracker(dom))>=0){const table=editor.marquee.target;if(table){return new TableRowResizeTracker(editor,table,editor.marquee,i);}}// table band
    if((i=TableBandMarquee.isColSizeTracker(dom))>=0){const table=editor.marquee.target;if(table){return new TableColumnResizeTracker(editor,table,editor.marquee,i);}}if(i=TableBandMarquee.isRowSizeTracker(dom)){const band=editor.marquee.target;const table=band.getTableView(i.table);return new TableRowResizeTracker(editor,table,editor.marquee,i.row);}// band group
    // if ((i = BandGroupMarquee.isCellSizeTracker(dom)) >= 0) {
    //     const table = editor.marquee.target;
    //     if (table) {
    //         return new TableColumnResizeTracker(editor, table, editor.marquee as TableBandMarquee, i);
    //     }
    // }
    // move item
    if(elt instanceof ReportItemElement&&elt.model.canMove()){if(!shift){const mt=(_a=elt.model.parent)===null||_a===void 0?void 0:_a.getMoveType(elt.model);if(mt){return new ItemMoveTracker(editor,elt,mt);}}}// selecting
    if(elt===editor.reportView.parent||elt instanceof ReportEditView||elt instanceof PageBodyElement||elt instanceof SectionElement||elt instanceof BodyItemsElement||elt instanceof PageItemContainerElement){return new ItemSelectTracker(editor,elt,false);}}$_selectMarquee(target,button,shift,meta){const editor=this._editor;const marquee=this._marqueeTarget=editor.getEditMarqueeTarget(Utils.cast(target,HTMLElement));if(marquee){const mtarget=marquee.target;if((shift||meta)&&mtarget&&editor.focusedItem&&mtarget.constructor===editor.focusedItem.constructor){if(editor.toggleSelection(mtarget,shift)){editor.setFocused(mtarget);}}else if(mtarget&&editor.focusedItem!==mtarget){editor.setFocused(mtarget);}if(button===0/* MouseButton.LEFT */&&!meta){if(mtarget instanceof TableColumnBase){this.dragTracker=new TableColumnMarqueeSelectTracker(editor,marquee);}else if(mtarget instanceof TableRow){this.dragTracker=new TableRowMarqueeSelectTracker(editor,marquee);}else if(mtarget instanceof HichartSeries){this.dragTracker=new ChartSeriesMoveTracker(editor,target,marquee);}}return true;}}_doEsc(meta){const editor=this._editor;const focused=editor.focusedItem;if(this._marqueeTarget){editor.closeEditMarquee();if(this._marqueeTarget.target===focused){editor.setFocused(editor.getDisplayParent(focused));}this._marqueeTarget=null;return true;}this.$_finishAdding();if(editor.cancelAdd()){return;}if(editor.hideEditor(false)){return;}if(focused){let f;if(meta&&(f=ReportItem.findFloatingAnchor(focused))){editor.setFocused(f);}else {editor.setFocused(editor.getDisplayParent(focused));}}}_doEnter(shift){const editor=this._editor;const focused=editor.focusedItem;if(focused){if(editor.isEditing()&&shift&&editor.canMultiLine()){return true;}else if(editor.hideEditor(true)){return;}else if(editor.showEditor()){return;}}}_doTab(shift){const editor=this._editor;const page=editor.reportView.pageView;const focused=editor.focusedItem;if(focused){const focusedElt=editor.focusedItemElement;let view;if(shift){view=page.getPrev(focusedElt);}else {view=page.getNext(focusedElt);}if(view&&view!==focusedElt){editor.setFocused(view.model);return true;}}}$_moveItem(itemView,dx,dy){if(!this._moveAction){if(this.editor.selectionCount>1){this._moveAction=new ItemsMoveAction(this.editor,itemView);}else {this._moveAction=new ItemMoveAction(itemView);}}else if(!this._moveAction.isMe(itemView.model)){this._moveAction.run(this.editor.reportView.model);if(this.editor.selectionCount>1){this._moveAction=new ItemsMoveAction(this.editor,itemView);}else {this._moveAction=new ItemMoveAction(itemView);}}this._moveAction.move(dx,dy);}$_isEditingCode(code){const isEditing=this._editor.isEditing();if(Object.values(EditingKeyCode).includes(code))return isEditing;return false;}$_doAlignItems(direction){this._editor.report.alignItems(this._editor.getSelectedItems(),direction);}$_finishAdding(){this._editor.setCursor('');this._addFeedback.clearTarget();this._addEffect.clearAddType();}}////////////////////////////////////////////////////////////////////////////////
    class RulerView extends LayerElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,name,container){super(doc,name);//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._unit=PrintUnit.MILLI;this._startPos=50;this._length=210;// 297;
    this._marginStart=12;// 15;
    this._marginEnd=12;// 15;
    this._zoom=100;this._tickPool=[];this._ticks=[];this._labelPool=[];this._labels=[];this._layoutChanged=true;this._dimChanged=true;this._container=container;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** unit */get unit(){return this._unit;}set unit(value){if(value!=this._unit){this._unit=value;this._dimensionChanged();}}/** startPos */get startPos(){return this._startPos;}set startPos(value){if(value!=this._startPos){this._startPos=value;this._changed();}}/** length */get length(){return this._length;}set length(value){if(value!=this._length){this._length=value;this._dimensionChanged();}}/* marginStart */get marginStart(){return this._marginStart;}set marginStart(value){value=Math.max(0,value);if(value!=this._marginStart){this._marginStart=value;this._dimensionChanged();}}/* marginEnd */get marginEnd(){return this._marginEnd;}set marginEnd(value){value=Math.max(0,value);if(value!=this._marginEnd){this._marginEnd=value;this._dimensionChanged();}}get zoom(){return this._zoom;}set zoom(value){if(value!==this._zoom){this._zoom=value;this._changed();}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    refreshView(){if(this._layoutChanged||this._dimChanged){if(this._dimChanged){const unit=this._unit;this._lengthDim=new Dimension(this._length+unit);this._marginStartDim=new Dimension(this._marginStart+unit);this._marginEndDim=new Dimension(this._marginEnd+unit);this._dimChanged=false;}this._doRefreshView(this._container);this.setFocusedElement(this._container.focusedElement);this._layoutChanged=false;}}getTick(index){return this._ticks[index];}setFocusedElement(element){}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _initDom(doc,dom){super._initDom(doc,dom);dom.style.boxSizing='content-box';this._contentMask=doc.createElement('div');this._contentMask.className='rr-ruler-content';this._contentMask.style.position='absolute';dom.appendChild(this._contentMask);this._tickBar=doc.createElement('div');this._tickBar.style.position='absolute';dom.appendChild(this._tickBar);}_changed(){this._layoutChanged=true;}_dimensionChanged(){this._dimChanged=true;}_clearTicks(){if(this._ticks.length>0){for(let tick of this._ticks){Utils.remove(tick);this._tickPool.push(tick);}this._ticks=[];}if(this._labels.length>0){for(let label of this._labels){Utils.remove(label);this._labelPool.push(label);}this._labels=[];}}_addTick(doc){let tick=this._tickPool.pop();if(!tick){tick=doc.createElement('span');tick.style.position='absolute';tick.style.width='1px';tick.style.backgroundColor='#aaa';}this._tickBar.appendChild(tick);this._ticks.push(tick);return tick;}_addLabel(doc){let label=this._labelPool.pop();if(!label){label=doc.createElement('span');label.style.position='absolute';label.style.color='#555';label.style.textAlign='center';label.style.fontFamily='Helvetica, Arial, sans-serif';label.style.fontSize='8px';}this._tickBar.appendChild(label);this._labels.push(label);return label;}_prepareTicks(doc){this._clearTicks();let cnt=1+Math.round(this.length/10)*2;for(let i=0;i<cnt;i++){this._addTick(doc);}cnt/=2;for(let i=0;i<cnt;i++){this._addLabel(doc);}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    RulerView.RULER_WIDTH=14;class HorizontalRulerView extends RulerView{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,container){super(doc,'horizontalRuler',container);this.height=RulerView.RULER_WIDTH;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-ruler rr-ruler-horizontal';}_initDom(doc,dom){super._initDom(doc,dom);this._indicator=doc.createElement('span');this._indicator.className='rr-ruler-indicator rr-ruler-indicator-horz';this._indicator.style.position='absolute';this._indicator.style.boxSizing='border-box';this._contentMask.appendChild(this._indicator);}_doRefreshView(container){const zoom=this.zoom/100;let x=this.startPos;const y=0;let w=this._lengthDim.getFixedPixel()*zoom;const h=this.height;// tick bar
    Utils.setBounds(this._tickBar,x,y,w,h);// content mask
    const m=this._marginStartDim.getFixedPixel()*zoom;x+=m;w-=m+this._marginEndDim.getFixedPixel()*zoom;Utils.setBounds(this._contentMask,x,y,w,h);// ticks
    this._prepareTicks(container.doc);this.$_layoutTicks(zoom);}setFocusedElement(element){if(element){const editor=this.container;const zoom=this.zoom/100;const r=editor.reportView.getItemBoundingRect(element);Utils.setBounds(this._indicator,r.left*zoom,0,r.width*zoom,this.height);this._indicator.style.display='';}else {this._indicator.style.display='none';}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_layoutTicks(zoom){const unit=this.unit;const h=this.height;const h1=h*0.2;const h2=h*0.4;const y1=h-h1;const y2=h-h2;const ticks=this._ticks;const labels=this._labels;for(let i=0,n=0,cnt=ticks.length;i<cnt;i++){const tick=ticks[i];const h=i%2==0?h1:h2;const y=i%2==0?y1:y2;let x=getPixelsByUnits(unit,i*5);if(n>0)x*=zoom;Utils.setBounds(tick,x,y,1,h);if(i%2==0){const label=labels[n++];label.textContent=n+'';Utils.setBounds(label,x-50,-1,100,h);}}}}class VerticalRulerView extends RulerView{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,container){super(doc,'verticalRuler',container);this.length=297;this.marginStart=15;this.marginEnd=15;this.width=RulerView.RULER_WIDTH;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-ruler rr-ruler-vertical';}_initDom(doc,dom){super._initDom(doc,dom);this._indicator=doc.createElement('span');this._indicator.className='rr-ruler-indicator rr-ruler-indicator-vert';this._indicator.style.position='absolute';this._indicator.style.boxSizing='border-box';this._contentMask.appendChild(this._indicator);}_doRefreshView(container){const zoom=this.zoom/100;let y=this.startPos;const x=0;let h=this._lengthDim.getFixedPixel()*zoom;const w=this.width;// tick bar
    Utils.setBounds(this._tickBar,x,y,w,h);// content mask
    const m=this._marginStartDim.getFixedPixel()*zoom;y+=m;h-=m+this._marginEndDim.getFixedPixel()*zoom;Utils.setBounds(this._contentMask,x,y,w,h);// ticks
    this._prepareTicks(container.doc);this.$_layoutTicks(zoom);}setFocusedElement(element){if(element){const editor=this.container;const zoom=this.zoom/100;const r=editor.reportView.getItemBoundingRect(element);Utils.setBounds(this._indicator,0,r.top*zoom,this.width,r.height*zoom);this._indicator.style.display='';}else {this._indicator.style.display='none';}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_layoutTicks(zoom){const unit=this.unit;const w=this.width;const w1=w*0.2;const w2=w*0.4;const x1=w-w1;const x2=w-w2;const ticks=this._ticks;const labels=this._labels;for(let i=0,n=0,cnt=ticks.length;i<cnt;i++){const tick=ticks[i];const w=i%2==0?w1:w2;const x=i%2==0?x1:x2;let y=getPixelsByUnits(unit,i*5);if(n>0)y*=zoom;Utils.setBounds(tick,x,y,w,1);if(i%2==0){const label=labels[n++];//label.style.transform = 'translateY(-50%) rotate(-90deg)';
    label.style.transform='rotate(-90deg)';label.textContent=n+'';Utils.setBounds(label,-46,y-4,100,10);}}}}////////////////////////////////////////////////////////////////////////////////
    /**
     * @internal
     *
     * ReportEditor의 inline 편집기.
     */class TextEditor extends VisualElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,editor){super(doc,'textEditor');this._reportEditor=editor;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get editTarget(){return this._editTarget;}get isEditing(){return !!this._editTarget;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    show(target,scale){if(target&&target.editable&&target!==this._editTarget){const sc=this.container['_scrollContainer'];const r=Utils.getBoundingRect(sc.dom,target.parent.dom);r.x+=sc.scrollLeft;r.y+=sc.scrollTop;this.setBounds(r.x,r.y,r.width,r.height);this._input.innerText=target.getEditText();this.$_setInputEvent();this.$_setInputStyle(target);this.style.display='';Utils.selectAll(this._input);target.dom.style.visibility='hidden';this._editTarget=target;this._reportEditor.reportView['_editLayer'].hideFocus();this._oldValue=this._input.innerText;return true;}}hide(accept){const input=this._input;if(this._editTarget){if(accept&&input.innerText!==this._oldValue){this._editTarget.setEditText(this._reportEditor.reportView.model,input.innerText);this.container.invalidateLayout();}this.style.display='none';this._reportEditor.reportView['_editLayer'].showFocus();this._editTarget.dom.style.visibility='';this._editTarget=null;return true;}}is(elt){return this.dom.contains(elt);}canMultiLine(){const m=this._editTarget.model;return m instanceof TextItem&&m.multiLine;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _initDom(doc,dom){super._initDom(doc,dom);// input
    const input=this._input=doc.createElement('span');input.className='rr-text-edit';input.contentEditable='true';// dom
    dom.style.display='none';dom.style.zIndex=ReportEditView.ACTIVE_ZINDEX;dom.appendChild(input);}_getCssSelector(){return "rr-text-editor";}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_setInputStyle(target){if(target&&this._reportEditor){const inputStyle=this._input.style;inputStyle.left=null;inputStyle.right=null;inputStyle.transform=null;inputStyle.maxWidth=null;inputStyle.top=target.y+'px';const styles=TextItemBase.STYLE_PROPS.concat(['whiteSpace','wordBreak','letterSpacing']);const targetStyle=window.getComputedStyle(target.dom);for(let i=0;i<styles.length;i++){const index=styles[i].search(/[A-Z]/gm);if(index===-1){inputStyle[styles[i]]=targetStyle.getPropertyValue(styles[i]);}else {inputStyle[styles[i]]=targetStyle.getPropertyValue(styles[i].slice(0,index)+'-'+styles[i].slice(index).toLowerCase());}}const container=target.parent;const item=target.model;if(container instanceof TableCellElement){const align=container.model.table.getCell(container.model.row,container.model.col).styles.cellAlign;if(align==='left'){inputStyle.left='0px';}else if(align==='right'){inputStyle.right='0px';}else {inputStyle.left='50%';inputStyle.transform='translate(-50%, 0)';}}else if(container instanceof RowBoxContainerElement){const itemsAlign=container.model.itemsAlign;if(itemsAlign==='middle'){inputStyle.left=target.x+target.width/2+'px';inputStyle.transform='translate(-50%, 0)';}else if(itemsAlign==='end'){inputStyle.right=container.width-(target.x+target.width)+'px';}else {inputStyle.left=target.x+'px';}}else if(container instanceof ListCellElement){inputStyle.left=target.x+'px';}else if(container instanceof DiagonalBoxContainerElement){if(target.x){inputStyle.right='0px';}}else {if(item.left){inputStyle.left=Utils.isNumber(item.left)?item.left+'px':item.left;}else if(item.right){inputStyle.right=Utils.isNumber(item.right)?item.right+'px':item.right;}else {inputStyle.left='50%';inputStyle.transform='translate(-50%, 0)';}}if(target.rotation!==0){inputStyle.transform=inputStyle.transform+" rotate(".concat(target.rotation,"deg)");}inputStyle.border='1px solid #000';inputStyle.position='absolute';inputStyle.minWidth=item.width?target.width+'px':null;inputStyle.minHeight=item.height?target.height+'px':null;if(target instanceof TextItemElement&&target.model.wrap&&target.model.width){inputStyle.maxWidth=target.width+'px';}}}$_setInputEvent(){const input=this._input;// mousedown이벤트를 막지 않을 경우 editing상태 에서 마우스를 통해 커서 위치를 변경할 수 없다.
    input.addEventListener('mousedown',e=>{e.stopPropagation();});input.addEventListener('blur',()=>{this.hide(true);});}}////////////////////////////////////////////////////////////////////////////////
    class TableDesignTool extends VisualTool{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(designer,editor){super(editor);this._cellClicked=false;this._titleClicked=false;this._designer=designer;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doMouseDown(event){const target=event.target;this._cellClicked=this._titleClicked=false;if(event.button===0&&target instanceof HTMLElement){if(this._cellClicked=target.className===TableDesigner.CELL_CLASS){this._designer.setRange(0,0);}else if(this._titleClicked=target.className===TableDesigner.TITLE_CLASS){this._prevX=event.clientX;this._prevY=event.clientY;}}return false;}_doMouseMove(event){const target=event.target;if(this._cellClicked&&target instanceof HTMLSpanElement&&target.className===TableDesigner.CELL_CLASS){const r=+target.dataset.row;const c=+target.dataset.col;this._designer.setRange(r+1,c+1);}else if(this._titleClicked){const x=event.clientX;const y=event.clientY;this._designer.moveBy(x-this._prevX,y-this._prevY,true);this._prevX=x;this._prevY=y;}}_doMouseUp(event){this._cellClicked=this._titleClicked=false;}_doKeyDown(event){if(event.key==='Escape'){this._designer.$_end(false);return true;}}_doKeyPress(event){if(event.key==='Enter'){this._designer.$_end(true);return true;}}}/**
     * TableContainer 생성 designer.
     * Row, column 수 지정.
     */class TableDesigner extends PopupElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'tableDesigner');this._row=-1;this._col=-1;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    run(editor,callback){this._callback=callback;editor.showPopup(this);editor.activeTool=new TableDesignTool(this,editor);}setRange(row,col){if(row!==this._row||col!==this._col){this._row=row;this._col=col;this._cells.forEach(cell=>{const r=+cell.dataset.row;const c=+cell.dataset.col;//cell.dataset.selected = (r <= row && c <= col) ? '1' : '';
    cell.style.backgroundColor=r<row&&c<col?'#00eeff':'white';});this._spanRange.textContent="(".concat(row," X ").concat(col," cells)");}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-table-designer';}_initDom(doc,dom){super._initDom(doc,dom);Object.assign(dom.style,{boxShadow:'3px 3px 8px #888'});this._spanTitle=doc.createElement('span');this._spanTitle.className=TableDesigner.TITLE_CLASS;this._spanTitle.dataset.title='1';this._spanTitle.textContent='New TableContainer';Object.assign(this._spanTitle.style,{display:'inline-block',width:'100%'});dom.appendChild(this._spanTitle);this._cellContainer=doc.createElement('div');Object.assign(this._cellContainer.style,{display:'flex',flexWrap:'wrap',gap:'2px',border:'1px solid gray',backgroundColor:'#ccc',padding:'4px',marginBottom:'12px'});this._rowLen=TableDesigner.ROWS;this._colLen=TableDesigner.COLS;this._cells=[];this.$_prepareCells(doc,this._cellContainer,this._rowLen,this._colLen);dom.appendChild(this._cellContainer);this._buttonContainer=doc.createElement('div');Object.assign(this._buttonContainer.style,{textAlign:'right'});this.$_prepareButtons(doc,this._buttonContainer);dom.appendChild(this._buttonContainer);const span=this._spanRange=doc.createElement('span');Object.assign(span.style,{display:'inline-block',position:'absolute',bottom:'15px',marginLeft:'5px',fontSize:'1.1em',fontWeight:'bold'});span.textContent='(0 X 0 cells)';dom.appendChild(this._spanRange);}_doMeasure(ctx,dom,hintWidth,hintHeight){let w=310;let h=300;this._cellContainer.style.height='200px';return new Size(w,h);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_prepareCells(doc,container,rows,cols){const cells=this._cells;while(cells.length<rows*cols){const span=doc.createElement('span');Object.assign(span.style,{display:'inline-block',// position: 'absolute',
    width:TableDesigner.CELL_WIDTH,height:TableDesigner.CELL_HEIGHT,color:'white',border:'1px solid #555',backgroundColor:'white'});span.className=TableDesigner.CELL_CLASS;container.appendChild(span);this._cells.push(span);}for(let r=0;r<rows;r++){for(let c=0;c<cols;c++){const cell=cells[r*cols+c];cell.dataset.row=String(r);cell.dataset.col=String(c);}}}$_prepareButtons(doc,container){let button=doc.createElement('button');button.style.marginRight='8px';button.textContent='Create';button.onclick=()=>{this.$_end(true);};container.appendChild(button);button=doc.createElement('button');button.textContent='Cancel';button.onclick=()=>{this.$_end(false);};container.appendChild(button);}$_end(completed){if(completed&&(this._row<1||this._col<1)){alert('테이블 셀 범위를 지정해야 합니다.');return;}this.container.activeTool=null;this.container.hidePopup(this);if(completed&&this._callback){const table=new TableContainer('');table.rowCount=this._row;table.colCount=this._col;this._callback&&this._callback(table);}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    TableDesigner.CELL_CLASS='rr-table-designer-cell';TableDesigner.TITLE_CLASS='rr-table-designer-title';TableDesigner.COLS=10;TableDesigner.ROWS=10;TableDesigner.CELL_WIDTH='24px';TableDesigner.CELL_HEIGHT='16px';////////////////////////////////////////////////////////////////////////////////
    class BandDesignTool extends VisualTool{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(designer,editor){super(editor);this._titleClicked=false;this._sizeClicked=false;this._designer=designer;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doMouseDown(event){const target=event.target;this._titleClicked=this._sizeClicked=false;if(event.button===0&&target instanceof HTMLElement){if((this._sizeClicked=target===this._designer['_sizer'])||(this._titleClicked=target.className===BandDesigner.TITLE_CLASS)){this._prevX=event.clientX;this._prevY=event.clientY;}}return false;}_doMouseMove(event){const x=event.clientX;const y=event.clientY;if(this._sizeClicked){this._designer.resizeBy(x-this._prevX,y-this._prevY,true);}else if(this._titleClicked){this._designer.moveBy(x-this._prevX,y-this._prevY,true);}this._prevX=x;this._prevY=y;}_doMouseUp(event){this._titleClicked=this._sizeClicked=false;}_doClick(event){const target=event.target;if(target instanceof HTMLButtonElement){this._designer.buttonClick(target);}else if(target instanceof HTMLElement){this._designer.clickField(target);}}_doKeyDown(event){if(event.key==='Escape'){this._designer._end(false);return true;}}_doKeyPress(event){if(event.key==='Enter'){this._designer._end(true);return true;}}}class BandDesigner extends PopupElement{clickField(div){if(div.className===BandDesigner.FIELD_CLASS){if(div.parentElement===this._fieldList){this._currSrc=div;}else if(div.parentElement===this._bandFieldList){this._currDst=div;}}else if(div.className===BandDesigner.FIELD_LIST_CLASS){this._currSrc=this._currDst=null;}this.$_checkArrows();}buttonClick(button){switch(button.textContent){case'>>':this.$_addAll();break;case'>':this.$_add();break;case'<<':this.$_removeAll();break;case'<':this.$_remove();break;}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_refreshFields(){for(let div of this._fieldList.children){if(div===this._currSrc){div.dataset.select='1';}else {delete div.dataset.select;}}}_refreshBandFields(){for(let div of this._bandFieldList.children){if(div===this._currDst){div.dataset.select='1';}else {delete div.dataset.select;}}}$_checkArrows(){const arrows=this.dom.getElementsByClassName(BandDesigner.ARROW_CLASS);for(let arrow of arrows){const button=arrow;switch(button.textContent){case'>>':button.disabled=this._fieldList.children.length===0;break;case'>':button.disabled=!this._currSrc;break;case'<<':button.disabled=this._bandFieldList.children.length===0;break;case'<':button.disabled=!this._currDst;break;}}this.$_refreshFields();this._refreshBandFields();this._ok.disabled=this._bandFieldList.children.length===0;}resizeBy(dw,dh,draw){super.resizeBy(dw,dh,draw);this._refreshBandFields();}$_addAll(){const src=this._fieldList;const dst=this._bandFieldList;while(src.firstElementChild){dst.appendChild(src.firstElementChild);}this._currSrc=null;this.$_checkArrows();}$_removeAll(){const src=this._fieldList;const dst=this._bandFieldList;while(dst.firstElementChild){src.appendChild(dst.firstElementChild);}this._currDst=null;this.$_checkArrows();}$_add(){this._bandFieldList.append(this._currSrc);this._currDst=this._currSrc;this._currSrc=null;this.$_checkArrows();}$_remove(){this._fieldList.append(this._currDst);this._currSrc=this._currDst;this._currDst=null;this.$_checkArrows();}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    BandDesigner.TITLE_CLASS='rr-band-designer-title';BandDesigner.FIELD_LIST_CLASS='rr-band-designer-field-list';BandDesigner.FIELD_CLASS='rr-band-designer-field';BandDesigner.ARROW_CLASS='rr-band-designer-arrow';/**
     * TableBand 생성 designer.
     * Band data 목록 표시. 필드 목록 설정.
     */class TableBandDesigner extends BandDesigner{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'tableBandDesigner');}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    run(editor,callback){this._callback=callback;this._editor=editor;this.$_buildDesinger(editor);editor.showPopup(this);editor.activeTool=new BandDesignTool(this,editor);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-band-designer';}_initDom(doc,dom){super._initDom(doc,dom);Object.assign(dom.style,{display:'flex',flexDirection:'column',width:'480px',height:'380px',minWidth:'300px',minHeight:'250px'});// border
    Object.assign(dom.style,{boxShadow:'3px 3px 8px #888'});// title
    this._spanTitle=doc.createElement('span');this._spanTitle.className=BandDesigner.TITLE_CLASS;this._spanTitle.dataset.title='1';this._spanTitle.textContent='New TableBand';Object.assign(this._spanTitle.style,{display:'inline-block',flex:'0',width:'100%'});dom.appendChild(this._spanTitle);// container
    dom.appendChild(this._container=doc.createElement('div'));Object.assign(this._container.style,{display:'flex',gap:'8px',flex:'1 1 auto',width:'100%',overflow:'hidden'});// data container
    this._container.appendChild(this._dataContainer=doc.createElement('div'));Object.assign(this._dataContainer.style,{display:'flex',flexDirection:'column',gap:'4px',flex:'1 1',height:'100%',border:'1px solid #ddd',boxSizing:'border-box'});this.$_prepareData(doc,this._dataContainer);// arrow container
    this._container.appendChild(this._arrowContainer=doc.createElement('div'));Object.assign(this._arrowContainer.style,{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',gap:'10px',width:'50px',height:'100%',border:'1px solid #ddd',boxSizing:'border-box',paddingTop:'74px'});this.$_prepareArrows(doc,this._arrowContainer);// band container
    this._container.appendChild(this._bandContainer=doc.createElement('div'));Object.assign(this._bandContainer.style,{display:'flex',gap:'4px',flexDirection:'column',flex:'1 1',height:'100%',border:'1px solid #ddd',boxSizing:'border-box'});this.$_prepareBand(doc,this._bandContainer);// button container
    dom.appendChild(this._buttonContainer=doc.createElement('div'));Object.assign(this._buttonContainer.style,{width:'100%',padding:'16px 0 0',textAlign:'right'});this.$_prepareButtons(doc,this._buttonContainer);// sizer
    dom.appendChild(this._sizer=doc.createElement('div'));Object.assign(this._sizer.style,{position:'absolute',right:'0',bottom:'0',width:'8px',height:'8px',background:'transparent',cursor:'nwse-resize'});}_doMeasure(ctx,dom,hintWidth,hintHeight){return new Size(dom.offsetWidth,dom.offsetHeight);}_refreshBandFields(){super._refreshBandFields();const list=this._bandFieldList;const curr=this._currDst;const up=this._upButton;const down=this._downButton;if(curr){up.style.display='';down.style.display='';const x=curr.offsetWidth;// curr.offsetLeft + curr.offsetWidth;
    const y=0;//curr.offsetTop;
    curr.appendChild(up);curr.appendChild(down);Utils.move(up,x-up.offsetWidth-down.offsetWidth-4,y);Utils.move(down,x-down.offsetWidth-2,y);up.disabled=curr===list.firstElementChild;down.disabled=curr===list.lastElementChild;}else {up.remove();down.remove();up.style.display='none';down.style.display='none';}}buttonClick(button){super.buttonClick(button);if(button===this._upButton||button===this._downButton){const list=this._bandFieldList;const curr=this._currDst;if(button===this._upButton){const elt=Utils.getPrev(curr);curr.remove();list.insertBefore(curr,elt);}else {const elt=Utils.getNext(Utils.getNext(curr));curr.remove();elt?list.insertBefore(curr,elt):list.appendChild(curr);}this._refreshBandFields();}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_prepareData(doc,container){let span=doc.createElement('span');span.textContent='Band Data 선택:';container.appendChild(span);// data list
    const select=this._dataList=doc.createElement('select');select.style.marginBottom='12px';select.onchange=ev=>{// console.log((ev.target as HTMLSelectElement).value);
    this.$_collectFields();this._bandFieldList.innerHTML='';this._currSrc=this._currDst=null;this.$_checkArrows();};container.appendChild(select);span=doc.createElement('span');span.textContent='필드 목록:';container.appendChild(span);// field list
    const list=this._fieldList=doc.createElement('div');list.className=BandDesigner.FIELD_LIST_CLASS;Object.assign(list.style,{display:'flex',flexDirection:'column',gap:'4px',flex:'1 1 auto',background:'white',padding:'2px',border:'1px solid gray',overflow:'auto'});container.appendChild(list);}$_prepareArrows(doc,container){['>>','>','','<','<<'].forEach(label=>{let button=doc.createElement(label?'button':'span');Object.assign(button.style,{whiteSpace:'pre',width:'32px',height:'25px'});button.textContent=label;if(button instanceof HTMLButtonElement){button.className=BandDesigner.ARROW_CLASS;button.disabled=true;}container.appendChild(button);});}$_prepareBand(doc,container){let span=doc.createElement('span');span.style.height='50px';container.appendChild(span);span=doc.createElement('span');span.textContent='Band 필드:';container.appendChild(span);// field list
    const list=this._bandFieldList=doc.createElement('div');this._bandFieldList.className=BandDesigner.FIELD_LIST_CLASS;container.appendChild(list);Object.assign(list.style,{flex:'1 1 auto',background:'white',border:'1px solid gray',padding:'2px',overflow:'auto'});// move buttons
    let button=this._upButton=doc.createElement('button');Object.assign(button.style,{position:'absolute',display:'none',padding:'0px 2px',fontSize:'10px'});button.textContent='⬆';// container.appendChild(button);
    button=this._downButton=doc.createElement('button');Object.assign(button.style,{position:'absolute',display:'none',padding:'0px 2px',fontSize:'10px'});button.textContent='⬇';// container.appendChild(button);
    }$_prepareButtons(doc,container){let button=this._ok=doc.createElement('button');button.disabled=true;button.style.marginRight='8px';button.textContent='Create';button.onclick=()=>{this._end(true);};container.appendChild(button);button=this._cancel=doc.createElement('button');button.textContent='Cancel';button.onclick=()=>{this._end(false);};container.appendChild(button);}_end(completed){this.container.activeTool=null;this._currDst=null;this._refreshBandFields();this.container.hidePopup(this);if(completed&&this._callback){const band=new TableBand('');const index=this._dataList.selectedIndex;band.data=this._dataList.options[index].text;const fields=this._bandFieldList.children;const len=fields.length;if(len>0){band.colCount=len;for(let i=0;i<len;i++){let item=new TextItem('',fields[i].textContent);item.setChildProp('col',i);band.header.add(item);item=new TextItem('');item.value=fields[i].textContent;item.setChildProp('col',i);band.dataRow.add(item);}}this._callback&&this._callback(band);}}$_buildDesinger(editor){const dp=editor.report.designData;const dataNames=dp.getNames();// data list
    this._dataList.innerHTML='';dataNames.forEach(d=>{const option=new Option(d,d);this._dataList.appendChild(option);});// band list
    this._bandFieldList.innerHTML='';// field list
    this.$_collectFields();}$_collectFields(){const dp=this._editor.report.designData;const data=dp.get(this._dataList.value);this._fieldList.innerHTML='';if(data){const doc=this._editor.doc;data.getFieldNames().forEach(field=>{const div=doc.createElement('div');div.className=BandDesigner.FIELD_CLASS;Object.assign(div.style,{position:'relative',padding:'1px 4px'});div.textContent=field;this._fieldList.appendChild(div);});}}}////////////////////////////////////////////////////////////////////////////////
    /**
     * SimpleBand 생성 designer.
     * Band data 목록 표시. 필드 목록 설정.
     */class SimpleBandDesigner extends BandDesigner{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'simpleBandDesigner');}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    run(editor,callback){this._callback=callback;editor.showPopup(this);editor.activeTool=new BandDesignTool(this,editor);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-band-designer';}_initDom(doc,dom){super._initDom(doc,dom);Object.assign(dom.style,{display:'flex',flexDirection:'column',width:'600px',height:'450px',minWidth:'400px',minHeight:'250px'});// border
    Object.assign(dom.style,{boxShadow:'3px 3px 8px #888'});// title
    this._spanTitle=doc.createElement('span');this._spanTitle.className=TableBandDesigner.TITLE_CLASS;this._spanTitle.dataset.title='1';this._spanTitle.textContent='New SimpleBand';Object.assign(this._spanTitle.style,{display:'inline-block',flex:'0',width:'100%'});dom.appendChild(this._spanTitle);// container
    dom.appendChild(this._container=doc.createElement('div'));Object.assign(this._container.style,{display:'flex',flex:'1 1 auto',width:'100%'});// data container
    this._container.appendChild(this._dataContainer=doc.createElement('div'));Object.assign(this._dataContainer.style,{display:'flex',flex:'1 1 auto',height:'100%',border:'1px solid gray'});this.$_prepareData(doc,this._dataContainer);// button container
    dom.appendChild(this._buttonContainer=doc.createElement('div'));Object.assign(this._buttonContainer.style,{width:'100%',padding:'16px 0 0',textAlign:'right'});this.$_prepareButtons(doc,this._buttonContainer);// sizer
    dom.appendChild(this._sizer=doc.createElement('div'));Object.assign(this._sizer.style,{position:'absolute',right:'0',bottom:'0',width:'8px',height:'8px',background:'transparent',cursor:'nwse-resize'});}_doMeasure(ctx,dom,hintWidth,hintHeight){return new Size(dom.offsetWidth,dom.offsetHeight);}buttonClick(button){}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_prepareData(doc,container){}$_prepareButtons(doc,container){let button=doc.createElement('button');button.style.marginRight='8px';button.textContent='Create';button.onclick=()=>{this._end(true);};container.appendChild(button);button=doc.createElement('button');button.textContent='Cancel';button.onclick=()=>{this._end(false);};container.appendChild(button);}_end(completed){this.container.activeTool=null;this.container.hidePopup(this);if(completed&&this._callback){const band=new SimpleBand('');this._callback&&this._callback(band);}}}////////////////////////////////////////////////////////////////////////////////
    var ReportAddStyle;(function(ReportAddStyle){ReportAddStyle["CLICK"]="click";ReportAddStyle["DRAG"]="drag";})(ReportAddStyle||(ReportAddStyle={}));class Selections$3 extends EventAware{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._items=[];}//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get count(){return this._items.length;}get isEmpty(){return this._items.length===0;}get items(){return this._items.length>0?this._items.slice(0):null;}get pageItems(){const items=this._items;// 많이 호출되므로 불필요한 array 생성을 줄이기 위해...
    if(items.length>0){if(items[0]instanceof TableSelection){let cells=[];items.forEach(item=>{cells=cells.concat(item.getCells(true));});return cells;}return items.slice(0);}return null;}get last(){return this._items.length>0?this._items[this._items.length-1]:null;}get first(){return this._items.length>0?this._items[0]:null;}get isSinlge(){return this._items.length<=1;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    get(index){return this._items[index];}forEach(callback){for(let i=0,cnt=this._items.length;i<cnt;i++){if(callback(this._items[i],i)===true){break;}}}indexOf(item){const items=this._items;if(item instanceof TableCell){for(let i=items.length-1;i>=0;i--){const sel=items[i];if(sel instanceof TableSelection&&sel.containsCell(item)){return i;}}return -1;}else {return items.indexOf(item);}}find(item){const i=this.indexOf(item);return i>=0?this._items[i]:null;}contains(item){if(this.indexOf(item)>=0)return true;if(item instanceof TableCell){for(let sel of this._items){if(sel instanceof TableSelection&&sel.contains(item.row,item.col)){return true;}}}return false;}clear(){if(this._items.length>0){this._items=[];this._changed();return true;}return false;}$_add(item){if(item&&this.indexOf(item)<0){if(item instanceof TableCell){this._items.push(item.table.getSelection(item));}else {this._items.push(item);}return true;}return false;}add(item){if(this.$_add(item)){this._changed();return true;}return false;}addAll(items){if(items&&items.length>0){let added=false;for(let item of items){if(this.$_add(item)){added=true;}}if(added){this._changed();}return added;}return false;}removeAt(index){if(index>=0&&index<this._items.length){this._items.splice(index,1);this._changed();return true;}return false;}remove(item){if(item){const i=item instanceof TableCell?this.indexOf(item):this._items.indexOf(item);return this.removeAt(i);}return false;}removeAll(except){if(this._items.length>1){const i=this._items.indexOf(except);if(i>=0){this._items=[this._items[i]];this._changed();return true;}}return false;}/**
         * items 들만 남기고 나머지는 제거한다.
         */replace(items){items=items||[];if(!Utils.equalArrays(items,this._items)){this._items=items.slice(0);this._changed();return true;}return false;}resize(sel,to){if(sel.resizeTo(to)){this.removeAll(sel);this._changed();}}resizeBy(sel,dx,dy){if(sel.resizeBy(dx,dy)){this.removeAll(sel);this._changed();}}getLinkedTableColumns(column){let i=this._items.indexOf(column);if(i>=0){const items=this._items.filter(item=>item instanceof TableColumnBase);return getLinkedSlice(items,column);}return [];}isSingleTableColumns(){const column=this._items[0];if(column instanceof TableColumnBase){const columns=this.getLinkedTableColumns(column);return columns.length===this._items.length;}}getLinkedTableRows(row){let i=this._items.indexOf(row);if(i>=0){const items=this._items.filter(item=>item instanceof TableRow);return getLinkedSlice(items,row);}return [];}isSingleTableRows(){const row=this._items[0];if(row instanceof TableRow){const rows=this.getLinkedTableRows(row);return rows.length===this._items.length;}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _changed(){this.fireEvent(Selections$3.CHANGED);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // events
    Selections$3.CHANGED="onSelectionsChanged";class ReportEditView extends ReportView{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,true);this._focusRequested=false;this.addChild(this._pageHead=new SectionHeadView(doc,null,'PAGE','Report Page',ReportView.PAGE_HEAD));this.addChild(this._backHead=new SectionHeadView(doc,null,'BACK ITEMS','Page Back Items',ReportView.BACK_HEAD));this.addChild(this._frontHead=new SectionHeadView(doc,null,'FRONT ITEMS','Page Front Items',ReportView.FRONT_HEAD));this.addChild(this._editLayer=new ReportEditLayer(this.doc,this));this._selections=new Selections$3();this._selections.addListener(this);}//-------------------------------------------------------------------------
    // Selections event handlers
    //-------------------------------------------------------------------------
    onSelectionsChanged(selections){this.invalidateLayout();this._fireSelectionChanged(selections.pageItems);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get editor(){return this.container;}get activeContainer(){return this._activeConatiner;}get activeContainerView(){if(this._activeConatiner===this.model.page.backContainer){return this.pageView.backFloatingView;}else if(this._activeConatiner===this.model.page.frontContainer){return this.pageView.frontFloatingView;}}/** focusedItem */get focusedItem(){return this._focusedItem;}set focusedItem(value){if(value!==this._focusedItem){const old=this._focusedItem;this._focusedItem=value;this._focusRequested=true;this.invalidateLayout();value&&this._selections.add(value);this.container['$_focusedChanged'](value,old);this._fireFocusedChanged(value,old);}else if(value&&!this._selections.contains(value)){this._selections.add(value);}}/** focusedElement */get focusedElement(){return this._focusedItem instanceof ReportItem&&this.getElementOf(this._focusedItem);}get focusedItemElement(){const view=this.focusedElement;return view instanceof ReportItemElement?view:null;}/**
         * focusedRequested
         */get focusedRequested(){return this._focusRequested;}/** selection */get selection(){return this._selections.items;}/** lastSelectedItem */get lastSelectedItem(){return this._selections.last;}get zoom(){return this.editor.zoom;}get editing(){return this.editor.isEditing();}get editLayer(){return this._editLayer;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getFocusedElement(){const foc=this.focusedItem;if(this.model){// testing 중에 model이 null일 수 있다.
    if(foc===this.model.root){return this;}if(foc===this.model.page){return this.pageView;}}if(foc instanceof ReportPageItem){// TODO: 추후 name 유일성이 확보되면 추가할 것!
    // if (this._focusedItem.name) {
    //     return this.findElement(this._focusedItem.name);
    // }
    return this.getElementOf(foc);}}itemOfDom(dom){const page=this.pageView;if(page.isDom(dom))return page.model;return page.itemOfDom(dom);}focusCell(item){if(item&&item.parent instanceof TableCellItem){const table=item.parent.parent;const cell=table.getCell(item.row,item.col);this.focusedItem=cell;}}getTableElementOfRow(row){return this.getElementOf(row.collection.table);}getTableElementsOfColumn(column){const coll=column.collection;if(coll instanceof TableColumnCollection){return [this.getElementOf(coll.table)];}else if(coll instanceof TableBandColumnCollection){return this.getElementOf(coll.band).getTableViews();}}getTableElementOfColumn(column){return this.getElementOf(column.collection.table);}getTableBandElementOfColumn(column){return this.getElementOf(column.collection.band);}/**
         * col에서 시작하여 연속적으로 선택된 컬럼들.
         */getSelectedTableColums(column){return this._selections.getLinkedTableColumns(column);}/**
         * 병합된 셀의 일부를 이동할 수 없다.
         */canMoveTableColumns(columns){return true;}/**
         * row에서 시작하여 연속적으로 선택된 row의 개수.
         */getSelectedTableRows(row){return this._selections.getLinkedTableRows(row);}/**
         * 병합된 셀의 일부를 이동할 수 없다.
         */canMoveTableRows(rows){return true;}focusParent(item){if(item instanceof ReportItemCollectionItem){this.focusedItem=item.collection;}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _initDom(doc,dom){super._initDom(doc,dom);// scaling 기준을 중앙 대신 top-left로 설정.
    dom.style.transformOrigin='0 0 0';this._pageBorders=[];for(let i=0;i<4;i++){const span=doc.createElement('span');this._pageBorders.push(span);span.className=i<2?'rr-page-border-horz':'rr-page-border-vert';dom.appendChild(span);}}// printing 시에는 호출되지 않는다.
    _afterLayout(ctx){function getContainer(f){while(f){if(f instanceof PageItemContainer)return f;f=f.parent;}}function checkSelected(view){if(container===view.model){view.dom.dataset.selected='';}else {delete view.dom.dataset.selected;}}super._afterLayout(ctx);const page=this.model.page;const container=this._activeConatiner=getContainer(this.focusedItem)||page;const p=this.pageView;const gap=4;const dimmed='0.2';const zindex=ReportEditView.ACTIVE_ZINDEX;const r=p.bounds;let x=r.x+1;// page head
    let v=this._pageHead;v.model=page;v.text='PAGE - '+Math.round(p.width)+' x '+Math.round(p.height)+' px';checkSelected(v);v.measure(ctx,r.width,r.height);v.setBounds(x,r.y-v.measuredHeight,v.measuredWidth,v.measuredHeight);x+=v.width+gap;// back head
    v=this._backHead;v.model=page.backContainer;checkSelected(v);v.measure(ctx,r.width,r.height);v.setBounds(x,r.y-v.measuredHeight,v.measuredWidth,v.measuredHeight);x+=v.width+gap;/// front head
    v=this._frontHead;v.model=page.frontContainer;checkSelected(v);v.measure(ctx,r.width,r.height);v.setBounds(x,r.y-v.measuredHeight,v.measuredWidth,v.measuredHeight);p.sections.forEach(v=>v.dom.style.opacity='');p.backFloatingView.dom.style.opacity='';p.frontFloatingView.dom.style.opacity='';p.sections.forEach(v=>v.dom.style.pointerEvents='none');p.backFloatingView.dom.style.pointerEvents='none';p.frontFloatingView.dom.style.pointerEvents='none';p.sections.forEach(v=>v.dom.style.zIndex='');p.backFloatingView.dom.style.zIndex='';p.frontFloatingView.dom.style.zIndex='';p.bodyView.findable=false;p.backFloatingView.findable=false;p.frontFloatingView.findable=false;if(container===page.backContainer){p.backFloatingView.findable=true;p.backFloatingView.dom.style.zIndex=zindex;p.backFloatingView.dom.style.pointerEvents='';p.frontFloatingView.dom.style.opacity=dimmed;p.sections.forEach(v=>v.dom.style.opacity=dimmed);}else if(container===page.frontContainer){p.frontFloatingView.findable=true;p.frontFloatingView.dom.style.zIndex=zindex;p.frontFloatingView.dom.style.pointerEvents='';p.backFloatingView.dom.style.opacity=dimmed;p.sections.forEach(v=>v.dom.style.opacity=dimmed);}else {p.bodyView.findable=true;p.sections.forEach(v=>{v.dom.style.zIndex=zindex;v.dom.style.pointerEvents='';});p.backFloatingView.dom.style.opacity=dimmed;p.frontFloatingView.dom.style.opacity=dimmed;}}onReportItemAdded(report,item,index,silent){super.onReportItemAdded(report,item,index,silent);if(!silent&&(!this.editor.addMode||this.editor.addedCount==0)){this._selections.clear();if(item instanceof CellGroup){this.focusedItem=item.item;}else {this.focusedItem=item;}}}onReportItemRemoved(report,item,oldParent){super.onReportItemRemoved(report,item,oldParent);if(item instanceof CellGroup){item=item.item;}const editor=this.container;const focItem=this.focusedItem;let focused=item===focItem;if(!focused&&item instanceof ReportGroupItem){focused=item.isAncestorOf(focItem);}if(focused){this.focusedItem=null;editor.clearSelection();}else if(editor.isSelected(item)){editor.removeSelection(item);}if(focused){this.focusedItem=oldParent;}else if(focItem instanceof ReportItemCollection&&item instanceof ReportItemCollectionItem){this.focusedItem=null;this.focusedItem=focItem;}}onReportItemsRemoved(report,items){super.onReportItemsRemoved(report,items);let focused=false;// table cell은 span이 변경된 때문이다. 
    if(!(this.focusedItem instanceof TableCell)||!(items[0]instanceof TableCell)){for(let item of items){if(focused=item===this.focusedItem||item instanceof CellGroup&&item.item===this.focusedItem){break;}}}if(focused){this.focusedItem=null;this.container.clearSelection();}}onReportCommandStackChanged(report,cmd){const item=cmd===null||cmd===void 0?void 0:cmd.source;if(!this.editor.addMode||this.editor.addedCount==0){if(item instanceof ReportPageItem&&item.parent){this.editor.setFocused(item);}}}onReportCellMerged(report,cell){this._selections.clear();this.focusedItem=cell;}onReportAlert(report,item,message){//alert(message);
    this._editLayer.showError(item,message);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_layoutMask(){const mask=this._editLayer;if(mask.visible=this.pageView.visible){mask.setRect(this.pageView.bounds);mask.layoutContent();}}_layoutPageBorders(rReport,rPage){let css=this._pageBorders[0].style;css.top=rPage.y+'px';css.width=rReport.width+'px';css=this._pageBorders[1].style;css.top=Math.floor(rPage.bottom)+'px';css.width=rReport.width+'px';css=this._pageBorders[2].style;css.left=rPage.x+'px';css.height=rReport.height+'px';css=this._pageBorders[3].style;css.left=Math.floor(rPage.right)+'px';css.height=rReport.height+'px';}//-------------------------------------------------------------------------
    // event members
    //-------------------------------------------------------------------------
    _fireFocusedChanged(focused,old){this.fireEvent(ReportEditView.FOCUSED_CHANGED,focused,old);}_fireSelectionChanged(selection){this.fireEvent(ReportEditView.SELECTION_CHANGED,selection);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ReportEditView.ACTIVE_ZINDEX='2';// events
    ReportEditView.FOCUSED_CHANGED="onReportFocusedChanged";ReportEditView.SELECTION_CHANGED="onReportSelectionChanged";class PopupLayer extends LayerElement{//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    get popup(){return this._popup;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setPopup(view){let x=arguments.length>1&&arguments[1]!==undefined?arguments[1]:NaN;let y=arguments.length>2&&arguments[2]!==undefined?arguments[2]:NaN;if(view!==this._popup){if(this._popup){this.removeChild(this._popup);}this._popup=view;if(view){this.addChild(view);view.measure(null,this.width,this.height);view.applyMeasure();const w=this.container.width;const h=this.container.height;if(isNaN(x)){x=(w-view.width)/2;}if(isNaN(y)){y=(h-view.height)/2;}view.move(x,y,true);}}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _initDom(doc,dom){// dom.style.pointerEvents = 'none';
    }_getCssSelector(){return 'rr-editor-popup-layer';}}const zoom_ranges=[50,67,75,80,90,100,110,125,150,175,200,250,300,400,500];/**
     * 리포트 편집기에 사용되는 report view.
     */class ReportEditor extends ReportContainer{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(containerId){super(containerId);//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._defaultUnit=PrintUnit.PIXEL;this._guardWidth=100;this._paddingTop=35;this._paddingLeft=45;this._zoom=100;this._handMode=false;this._addStyle=ReportAddStyle.CLICK;this._started=false;this._addShifted=false;this._addedCount=0;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // IPropertySource
    //-------------------------------------------------------------------------
    getEditProps(){return ReportEditor.PROPINFOS;}getStyleProps(){return;}getSubStyleProps(prop){return;}isDominantProp(prop){return false;}getPlaceHolder(prop){return;}getPropDomain(prop){return;}getProperty(prop){return this[prop];}setProperty(prop,value){this[prop]=value;}setItemsProperty(sources,prop,value){}getStyleProperty(prop){return;}setStyleProperty(prop,value){}setItemsStyleProperty(sources,prop,value){}isChildProp(prop){return false;}getSubStyleProperty(prop,style){return;}setSubStyleProperty(prop,style,value){}setItemsSubStyleProperty(sources,prop,style,value){}isReadOnlyProperty(prop){return false;}canPropAdoptDragSource(prop,source){return false;}adoptPropDragSource(prop,source){return;}isCollectionProp(){return false;}isEditableCollection(){return false;}isCollectionItem(){return false;}getPropertySources(){return;}getCollectionLabel(){return;}getPopupPropLabel(prop){return;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get displayPath(){return 'editor';}/**
         * reportView.
         */get reportView(){return this._reportView;}/** report */get report(){return this._reportView.model;}set report(value){this._reportView.model=value;}/**
         * defaultUnit
         */get defaultUnit(){return this._defaultUnit;}set defaultUnit(value){if(value!==this._defaultUnit){this._defaultUnit=value;this.fireEvent(ReportEditor.UNIT_CHANGED,value);}}/**
         * guardWidth
         */get guardWidth(){return this._guardWidth;}set guardWidth(value){value=Math.max(100,value);if(value!=this._guardWidth){this._guardWidth=value;this.invalidateLayout();}}/** topPos */get topPos(){return this._scrollContainer.scrollTop;}set topPos(value){const zoom=Math.max(1,this._zoom/100);value=Math.max(0,Math.min(this._editContainer.height*zoom-this._scrollContainer.height,value));if(value!=this.topPos){this._scrollContainer.scrollDom(this.leftPos,value);this.invalidateLayout();}}/** leftPos */get leftPos(){return this._scrollContainer.scrollLeft;}set leftPos(value){const zoom=Math.max(1,this._zoom/100);value=Math.max(0,Math.min(this._editContainer.width*zoom-this._scrollContainer.width,value));if(value!=this.leftPos){this._scrollContainer.scrollDom(value,this.topPos);this.invalidateLayout();}}/** zoom */get zoom(){return this._zoom;}set zoom(value){value=Utils.pickNum(value,0);if(value===ReportEditor.ZOOM_PAGE_WIDTH){value=Math.floor(this.$_containerWidth()*100/this.reportView.dom.offsetWidth);}else if(value===ReportEditor.ZOOM_FULL_PAGE){const w=this.$_containerWidth()*100/this.reportView.dom.offsetWidth;const h=this.$_containerHeight()*100/this.reportView.dom.offsetHeight;value=Math.floor(Math.min(w,h));}else {value=Math.floor(Math.max(50,Math.min(500,value)));}if(value!=this._zoom){const old=this._zoom;this._zoom=value;this._reportView['_dom'].style.transform='scale('+value/100+')';this.invalidateLayout();this._feedbackLayer.clearAction(ReportEditor.ZOOM_LABEL);this._feedbackLayer.showSpan(ReportEditor.ZOOM_LABEL,value+'%',10,10);this.fireEvent(ReportEditor.ZOOM_CHANGED,value,old);}}/** addStyle */get addStyle(){return this._addStyle;}set addStyle(value){this._addStyle=value;}/** handMode */get handMode(){return this._handMode;}set handMode(value){if(value!=this._handMode){this._handMode=value;this._addShifted=false;this.endAdd();}}/** selectMode */get selectMode(){return !this._handMode&&!this.addMode;}set selectMode(value){if(value){this.handMode=false;this._addShifted=false;this.endAdd();}}/** addMode */get addMode(){return !!this._addType;}/** addType */get addType(){return this._addType;}/** addShifted */get addShifted(){return this._addShifted;}/**
         * add 모드 세션에서 현재 추가된 아이템 개수
         */get addedCount(){return this._addedCount;}/** focusedItem */get focusedItem(){return this._reportView.focusedItem;}set focusedItem(value){this._reportView.focusedItem=value;}/** focusedElement */get focusedElement(){return this._reportView.focusedElement;}/** focusedItemElement */get focusedItemElement(){return this._reportView.focusedItemElement;}/**
         * current edit marquee
         */get marquee(){return this._reportView.editLayer.editMarquee;}get selections(){return this._reportView['_selections'];}get tableDesigner(){if(!this._tableDesigner){this._tableDesigner=new TableDesigner(this.doc);}return this._tableDesigner;}get tableBandDesigner(){if(!this._tableBandDesigner){this._tableBandDesigner=new TableBandDesigner(this.doc);}return this._tableBandDesigner;}get simpleBandDesigner(){if(!this._simpleBandDesigner){this._simpleBandDesigner=new SimpleBandDesigner(this.doc);}return this._simpleBandDesigner;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    showAlert(item,message){if(message){this._reportView.editLayer.showError(item,message);}}incZoom(){let delta=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(delta!==0){const zoom=this.zoom;let p=-1;if(zoom>=zoom_ranges[0]){p=0;for(let i=0;i<zoom_ranges.length-1;i++,p++){if(zoom>=zoom_ranges[i]&&zoom<zoom_ranges[i+1]){break;}}}if(delta>0){if(p<zoom_ranges.length-1)this.zoom=zoom_ranges[p+1];}else if(delta<0){if(p>0)this.zoom=zoom_ranges[p-1];}}else {this.zoom=100;}}isEditor(elt){return this._textEditor.is(elt);}isEditing(){return this._textEditor.isEditing;}showEditor(target){if(!this.isEditing()){target=target||(this.focusedElement instanceof ReportItemElement?this.focusedElement:null);if(target){return this._textEditor.show(target,this._zoom/100);}}}hideEditor(accept){if(this.isEditing()){this._textEditor.hide(accept);this.setFocus();return true;}}canMultiLine(){return this._textEditor.canMultiLine();}setFocused(item){let clearSelection=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(item!==this.focusedItem){clearSelection&&this.clearSelection(item instanceof ReportItem?item:null);this.focusedItem=item;}}undo(){return this.report.undo();}redo(){return this.report.redo();}copy(){return this.fireConfirmEvent(ReportEditor.COPY);}paste(){return this.fireConfirmEvent(ReportEditor.PASTE);}cut(){return this.fireConfirmEvent(ReportEditor.CUT);}findDropTarget(source,target,showFeedback){const elt=this._reportView.findElementOf(target);if(elt instanceof ReportItemElement){const item=elt.model;if(item&&item.canAdoptDragSource(source)){return item;}}else if(elt){const table=TableElement.getTable(elt);if(table){const cell=table.getCellOf(target,false);return cell;}}}beginAdd(itemType,shift){if(!this.addMode&&itemType){this._addType=itemType;this._addShifted=shift;return true;}}$_startDesigner(callback){if(this._addType===TableContainer){this.tableDesigner.run(this,table=>{callback===null||callback===void 0?void 0:callback(table);});return true;}else if(this._addType===TableBand){this.tableBandDesigner.run(this,band=>{callback===null||callback===void 0?void 0:callback(band);});return true;// } else if (this._addType === SimpleBand) {
    //     this.simpleBandDesigner.run(this, band => {
    //         callback?.(band);
    //     });
    //     return true;
    }return false;}endAdd(){let accept=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let target=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let callback=arguments.length>2?arguments[2]:undefined;if(this.addMode){const g=target.model;let item;if(accept&&target){if(this.$_startDesigner(item=>{if(item.canAddTo(g)){try{this.report.defaultInit(item,g,target.offsetWidth,target.offsetHeight);if(this.report.addItem(g,item)){this._addedCount++;callback===null||callback===void 0?void 0:callback(item);this.focusedItem=item;}}catch(err){alert(err);}}})){this.cancelAdd();return;}item=new this._addType('');if(item.canAddTo(g)){try{this.report.defaultInit(item,g,target.offsetWidth,target.offsetHeight);if(this.report.addItem(g,item)){this._addedCount++;}else {item=null;}}catch(err){alert(err);item=null;}}else {alert('Can not add to this group.');item=null;}}if(!this._addShifted){this.cancelAdd();}callback===null||callback===void 0?void 0:callback(item);return item;}}endAddCell(tableView,row,col,callback){if(this.addMode){const table=tableView.model;if(table.getCellItemAt(row,col)){alert('Only one item can exists int a cell.');return null;}if(this.$_startDesigner(item=>{if(item.canAddTo(table)){try{item.setChildProp('row',row);item.setChildProp('col',col);this.report.defaultInit(item,table,undefined,undefined);if(this.report.addItem(table,item)){this._addedCount++;callback===null||callback===void 0?void 0:callback(item);}}catch(err){alert(err);}}})){this.cancelAdd();return;}let item=new this._addType('');if(item.canAddTo(table)){try{item.setChildProp('row',row);item.setChildProp('col',col);this.report.defaultInit(item,table,undefined,undefined);if(this.report.addItem(table,item)){this._addedCount++;}else {item=null;}}catch(err){alert(err);item=null;}}else {alert('Can not insert in a cell.');item=null;}if(!this._addShifted){this.cancelAdd();}callback===null||callback===void 0?void 0:callback(item);return item;}}cancelAdd(){if(this.addMode){this._addedCount=0;this._addType=undefined;this._addShifted=false;this.invalidateLayout();this.fireEvent(ReportEditor.ADD_CANCELED);return true;}}getDisplayParent(item){if(item instanceof ReportPageItem){let p=item.displayParent;if(p instanceof CellGroup){p=p.displayParent;if(p instanceof TableBase&&item instanceof ReportItem){return p.getCell(item.row,item.col);}}else if(p instanceof ReportItemCollection){p=p.displayParent;}while(p&&!(p instanceof ReportGroupItem)&&!(p instanceof ReportItemCollection)){p=p.displayParent;}return p;}}findTable(td){if(td){const table=td.parentElement.parentElement.parentElement.parentElement;const elt=this.findElementOf(table);if(elt instanceof TableElement)return elt;}}getEditMarquee(){return this._reportView.editLayer.editMarquee;}getEditMarqueeTarget(dom){var _a;if(dom){const item=(_a=this._reportView.editLayer.editMarquee)===null||_a===void 0?void 0:_a.targetItem;const et=//SimpleBandMarquee.getTarget(item, dom) ||
    TableBandMarquee.getTarget(item,dom)||BandGroupMarquee.getTarget(item,dom)||TableContainerMarquee.getTarget(item,dom)||ColumnBoxMarquee.getTarget(item,dom)||RowBoxMarquee.getTarget(item,dom)||HichartMarquee.getTarget(item,dom);return et;}}closeEditMarquee(){this._reportView.editLayer.closeEditMarquees();}get selectionCount(){return this.selections.count;}isSelected(item){return this.selections.contains(item);}getSelection(){return this.selections.items;}getSelectedItems(){return this.selections.pageItems;}clearSelection(added){this.selections.clear();added&&this.addSelection(added);}addSelection(item){const first=this.selections.first;if(!first||first.canSelectedWith(item)&&item.canSelectedWith(first)){this.selections.add(item);}}addSelections(items){const first=this.selections.first;items.forEach(item=>{if(!first||first.canSelectedWith(item)&&item.canSelectedWith(first)){this.selections.add(item);}});}removeSelection(item){item&&this.selections.remove(item);}/**
         * shift나 ctrl(cmd) 상태에서 선택되었다.
         */toggleSelection(item,shift){if(item&&item!==this.focusedItem){const sels=this.selections;if(item instanceof TableCell){if(shift){if(sels.isEmpty){this.addSelection(item);}else if(sels.first instanceof TableSelection&&sels.first.table===item.table){sels.resize(sels.first,item);}else {sels.clear();this.addSelection(item);return true;}}else {sels.clear();this.addSelection(item);return true;}}else if(sels.contains(item)){this.removeSelection(item);}else {if(sels.first instanceof TableSelection){sels.clear();this.addSelection(item);return true;}this.addSelection(item);}}}/**
         * 그룹에 포함된 최상위 아이템들을 모두 선택한다.
         *
         * @param group 지정하지 않으면 page에 포함된 모든 최상위 아이템들을 선택한다.
         */selectAll(group){const selections=this.selections;const items=(group||this.reportView.pageView.model).getDescendants();if(items.length>0){items.forEach(item=>{this.addSelection(item);});selections.remove(group);this.focusedItem=items[0];}}deleteSelection(){let items=this.selections.pageItems;if(items){// table cell은 삭제할 수 없다.
    items=items.filter(item=>!(item instanceof TableCell));}if(items&&items.length>0){this._reportView.model.removeItems(items);return true;}}copySelection(){var _a;const items=(_a=this.getSelectedItems())===null||_a===void 0?void 0:_a.filter(item=>item.selectItem instanceof ReportItem).map(item=>item.selectItem);if(items){return this.report.saveItems(items);}}findSelection(item){return this.selections.find(item);}findReportElementOf(dom){return dom&&this._reportView.findElementOf(dom);}pasteItems(sources,target){// if (target instanceof TableBase) {
    //     if (this.focusedItem === target) {
    //         target.setFocus((this.focusedElement as TableElement<any>).focus);
    //     }
    // }
    return this.report.pasteItems(sources,target);}isScrollContainer(target){return target.className===ReportEditor.SCROLL_CONTAINER_CLASS;}isRuler(target){return this._vruler.containsDom(target)||this._hruler.containsDom(target);}/**
         * 아이템이 테이블 셀에 포함된 경우 셀을 선택한다.
         * @param item 셀에 포함된 아이템. 지정하지 않으면 focusedItem.
         */focusCell(item){if(!item&&this.focusedItem instanceof ReportItem)item=this.focusedItem;this._reportView.focusCell(item);}showPopup(view){if(view){view.dom.style.zIndex=String(ReportEditor.POPUP_ZINDEX);this._popupLayer.setPopup(view);}}hidePopup(view){if(view&&this._popupLayer.popup===view){this._popupLayer.setPopup(null);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _createDefaultTool(){return new ReportSelectionTool(this);}_doPrepareContainer(dom){super._doPrepareContainer(dom);const doc=this.doc;this.addElement(this._scrollContainer=new LayerElement(doc));this._scrollContainer.dom.className=ReportEditor.SCROLL_CONTAINER_CLASS;this._scrollContainer.setStyles({overflow:'auto'});this._scrollContainer.dom.addEventListener('scroll',e=>this.invalidateLayout(true));this._scrollContainer.addChild(this._editContainer=new LayerElement(doc));this._editContainer.dom.className=ReportEditor.EDIT_CONTAINER_CLASS;this._editContainer.addChild(this._reportView=this._createEditView(doc));this._scrollContainer.addChild(this._textEditor=new TextEditor(doc,this));this.addElement(this._vruler=new VerticalRulerView(doc,this));this.addElement(this._hruler=new HorizontalRulerView(doc,this));this.addElement(this._guard=new SectionGuard(doc,this));this.addElement(this._feedbackLayer=new FeedbackLayer(doc));this.$_prepareFeedback(doc,this._feedbackLayer);// this.addElement(this._textEditor = new TextEditor(doc, this._reportView));
    this.addElement(this._popupLayer=new PopupLayer(doc));}_doLayout(bounds){this._hruler.zoom=this._vruler.zoom=this.zoom;if(this.scrolling){this._hruler.startPos=this._vruler.width+this._paddingLeft-this.leftPos;this._hruler.refreshView();this._vruler.startPos=this._hruler.height+this._paddingTop-this.topPos;this._vruler.refreshView();this._guard.layoutContent(this._context);return;}const report=this._reportView.model;const sz=report?report.paper.getPageSize():new Size(500,500);let r=bounds.clone();this._context.assets=report&&report.assets;this._feedbackLayer.setRect(r);// this._popupLayer.setRect(r);
    if(this._guard.visible=this._guardWidth>0){this._guard.setBounds(r.x,r.y,this._guardWidth,sz.height);r.leftBy(this._guardWidth);}this._hruler.setBounds(r.x,r.y,r.width,this._hruler.height);this._vruler.setBounds(r.x,r.y,this._vruler.width,r.height);this._hruler.startPos=this._vruler.width+this._paddingLeft-this.leftPos;this._hruler.refreshView();this._vruler.startPos=this._hruler.height+this._paddingTop-this.topPos;this._vruler.refreshView();r.leftBy(this._vruler.width);r.topBy(this._hruler.height);this._scrollContainer.setRect(r);r.set(this._paddingLeft,this._paddingTop,sz.width,sz.height);this._reportView.setRect(r);const sz2=this._reportView["$_layout"](this._context,r.move());r.set(0,0,this._paddingLeft*2+sz2.width,this._paddingTop*2+sz2.height);this._editContainer.setRect(r);this._guard.measure(this._context,bounds.width,bounds.height);this._guard.layoutContent(this._context);if(this._reportView.focusedRequested){this._reportView['_focusRequested']=false;this.$_makeFocusVisible(this._reportView);}if(!this._started){this._started=true;if(this._isTesting){this.updateNow();}else {//TODO: ReportItemElement._doMeasure(...)에서 설정한 data-design이 
    //      _applyPaddings(..)의 getComputedStyle()에 바로 적용되지 않는다.
    //      바로 다시 그리게 한다.
    setTimeout(()=>{this.updateNow();});}}}_doAfterRender(){this._reportView.$_afterRender(this._context);this._reportView["$_layoutMask"]();}findElementAt(x,y,hitTesting,blockLayer){if(x>=this._guardWidth){return super.findElementAt(x+this.leftPos,y+this.topPos,hitTesting,blockLayer);}else {return super.findElementAt(x,y,hitTesting,blockLayer);}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _createEditView(doc){return new ReportEditView(doc);}$_prepareFeedback(doc,layer){layer.addSpan(doc,ReportEditor.ZOOM_LABEL,'rr-edit-feedback-span');}$_makeFocusVisible(reportView){const elt=reportView.getFocusedElement();if(!elt||elt===reportView||elt===reportView.pageView||elt===reportView.pageView.bodyView||elt===reportView.pageView.bodyView.itemsView){//} || reportView.pageView.bodyView.itemsView.isAncestorDomOf(elt.dom, true)) {
    return;}const p=this.getDomPosition(elt);const h=this._hruler.visible?this._hruler.height:0;const w=(this._vruler.visible?this._vruler.width:0)+this._guardWidth;const hSbar=20;const vSbar=20;let x=this.leftPos;let y=this.topPos;let d;if(p.y-h<0){y+=d=p.y-h-10;p.y-=d;}// 위쪽으로 댕겨서 모두 표시 가능할 때만 댕긴다.
    if(p.y+p.height>this.height-hSbar){const yOld=y;const pOld=p.y;y-=d=this.height-hSbar-(p.y+p.height);p.y+=d;if(p.y-h<0||p.y+p.height>this.height-hSbar){p.y=pOld;y=yOld;}}this.topPos=y;if(p.x-w<0){x+=d=p.x-w-10;p.x-=d;}// 왼쪽으로 댕겨서 모두 표시 가능할 때만 댕긴다.
    // CrosstabFieldsView인 경우 왼쪽의 field container에서 필드를 선택해야 하므로 스크롤시키지 않느다. 
    // TODO: 일반화할 것!
    if(p.x+p.width>this.width-vSbar&&!(elt instanceof CrosstabFieldsView)){const xOld=x;const pOld=p.x;x-=d=this.width-vSbar-(p.x+p.width);p.x+=d;if(p.x-w<0||p.x+p.width>this.width-vSbar){p.x=pOld;x=xOld;}}this.leftPos=x;}$_focusedChanged(item,old){const elt=this._reportView.focusedElement;this._hruler.setFocusedElement(elt);this._vruler.setFocusedElement(elt);if(item instanceof HichartSeries){item.chart.selectSeries(item);}else if(old instanceof HichartSeries||old instanceof HichartItem){const chart=old instanceof HichartItem?old:old.chart;chart.selectSeries(null);}}$_containerWidth(){return this._scrollContainer.offsetWidth-20-this.reportView.dom.offsetLeft;}$_containerHeight(){return this._scrollContainer.offsetHeight-20-this.reportView.dom.offsetTop;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ReportEditor.ZOOM_PAGE_WIDTH=-1;ReportEditor.ZOOM_FULL_PAGE=-2;ReportEditor.POPUP_ZINDEX=VisualContainer.FEEDBACK_ZINDEX+1;// props
    ReportEditor.PROP_DEFAULT_UNIT="defaultUnit";ReportEditor.PROP_GUARD_WIDTH="guardWidth";// prop infos
    ReportEditor.PROPINFOS=[{name:ReportEditor.PROP_DEFAULT_UNIT,category:PropCategory.EDITOR,type:EnumProperty,domain:PrintUnit,multiple:false,default:undefined// }, {
    //     name: ReportEditor.PROP_GUARD_WIDTH,
    //     category: PropCategory.EDITOR,
    //     type: NumberProperty,
    //     multiple: false,
    //     default: 100
    }];// feedbacks
    ReportEditor.ZOOM_LABEL='zoomLabel';// events
    ReportEditor.ZOOM_CHANGED='onReportEditorZoomChanged';ReportEditor.COPY='onReportEditorCopy';ReportEditor.PASTE='onReportEditorPaste';ReportEditor.CUT='onReportEditorCut';ReportEditor.ADD_CANCELED="onReportEditorAddCanceled";ReportEditor.UNIT_CHANGED='onReportEditorUnitChanged';// classes
    ReportEditor.SCROLL_CONTAINER_CLASS='rr-scroll-container';ReportEditor.EDIT_CONTAINER_CLASS='rr-edit-container';ReportEditor.RULER_CLASS='rr-ruler';////////////////////////////////////////////////////////////////////////////////
    const pxpt=72/Dimension.HTMLDPI;/**
     * Report print pdf model.
     */class PdfModel extends Base{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(report,printPages,elementCreator){super();this._report=report;this.elementCreator=elementCreator;this._imageLoader=new ImageLoader();this._pages=this.$_build(report,printPages);}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getModel(dom){return this._report.models[dom.dataset[T_MODEL]];}getParent(dom){while(dom){if(dom instanceof HTMLElement){const m=this._report.models[dom.dataset[T_MODEL]];if(m)return dom;}dom=dom.parentElement;}}addImage(url,opacity){this._imageLoader.add(url,opacity);}getImage(url){return this._imageLoader.get(url);}prepare(trials){return this._imageLoader.load(trials);}canExport(){return this._imageLoader.loaded;}write(doc,font,fontBold){this._doc=doc;this._font=font;this._fontBold=fontBold;for(let i=0;i<this._pages.length;i++){const page=this._pages[i];this._offsetX=page.offsetX;this._offsetY=page.offsetY;page.write(this);if(i<this._pages.length-1){doc.addPage();}}}getBounds(dom){const r=dom.getBoundingClientRect();r.x-=this._offsetX;r.y-=this._offsetY;r.x*=pxpt;r.y*=pxpt;r.width*=pxpt;r.height*=pxpt;return r;}getTextBounds(node){const r=Utils.getTextRect(node);r.x-=this._offsetX;r.y-=this._offsetY;r.x*=pxpt;r.y*=pxpt;r.width*=pxpt;r.height*=pxpt;return r;}getBox(dom){const r=dom.getBBox();// r.x -= this._offsetX;
    // r.y -= this._offsetY;
    r.x*=pxpt;r.y*=pxpt;r.width*=pxpt;r.height*=pxpt;return r;}text(css,r,text,rotation,opts){css=this.$_css(css);const _doc=this._doc;const deco=css.textDecoration;const color=this.$_color(css.color);const fs=css.fontSize;let sz=parseFloat(fs);opts={lineBreak:false,lineGap:sz<13?-1:-2,...opts};if(css.fontStyle==='italic'){opts.oblique=true;}if(isNaN(sz)){sz=PdfModel.FONT_SIZE;}else if(fs.endsWith('px')){if(Utils.isMac){sz=Math.floor(sz*pxpt)-(sz<13?1:0);}else {sz=sz*pxpt;}}_doc.save();_doc.fontSize(sz);parseFloat(css.fontWeight)>=700?_doc.font(this._fontBold):_doc.font(this._font);color&&_doc.fillColor(color.color,color.opacity);rotation!=0&&_doc.rotate(rotation,{origin:[r.x+r.width/2,r.y+r.height/2]});r.y-=sz*0.15;_doc.text(text,r.x,r.y,opts);if(deco&&deco.startsWith('underline')){const w=_doc.widthOfString(text);const h=_doc.currentLineHeight()-1;_doc.underline(r.x,r.y,w,h,{color:'black'});}_doc.restore();return this;}save(){this._doc.save();return this;}restore(){this._doc.restore();return this;}transformSvg(m){this._doc.transform(m.a,m.b,m.c,m.d,m.e*pxpt,m.f*pxpt);return this;}translate(x,y){this._doc.translate(x,y);return this;}scale(sx,sy){this._doc.scale(sx,sy);return this;}clip(dom){const r=this.getBounds(dom);this._doc.rect(r.x,r.y,r.width,r.height).clip();return this;}clipRect(r){this._doc.rect(r.x,r.y,r.width,r.height).clip();return this;}path(css,path){this.$_render(css,(doc,css)=>{const fill=this.$_color(css.fill);const stroke=this.$_color(css.stroke);const width=parseFloat(css.strokeWidth);if(fill||stroke&&width>0){if(stroke&&width>0){doc.path(path).lineWidth(width).strokeColor(stroke.color,stroke.opacity).stroke();}if(fill){doc.path(path).fillColor(fill.color,fill.opacity).fill();}}});return this;}dline(css,x1,y1,x2,y2){this.$_render(css,(doc,css)=>{if(this.$_border(css,'top')){doc.moveTo(x1,y1).lineTo(x2,y2).stroke();}});return this;}rect(css,r){let svg=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;this.$_render(css,(doc,css)=>{const fill=this.$_color(svg?css.fill:css.backgroundColor);if(fill){doc.fillColor(fill.color,fill.opacity);doc.rect(r.x,r.y,r.width,r.height).fill();}});return this;}polygon(css,pts){this.$_render(css,(doc,css)=>{const width=parseFloat(css.strokeWidth);const fill=this.$_color(css.fill);if(fill){doc.fillColor(fill.color,fill.opacity);doc.polygon(...pts).fill();}if(width>0){const stroke=this.$_color(css.stroke);if(stroke){doc.strokeColor(stroke.color,stroke.opacity).lineWidth(width*pxpt);doc.polygon(...pts).stroke();}}});return this;}ellipse(css,r){this.$_render(css,(doc,css)=>{const fill=this.$_color(css.fill);const r1=r.width/2;const r2=r.height/2;if(fill){doc.fillColor(fill.color,fill.opacity);doc.ellipse(r.x+r1,r.y+r2,r1,r2).fill();}const width=parseFloat(css.strokeWidth);if(width>0){const stroke=this.$_color(css.stroke);if(stroke){doc.strokeColor(stroke.color,stroke.opacity).lineWidth(width*pxpt);doc.ellipse(r.x+r1,r.y+r2,r1,r2).stroke();}}});return this;}border(css,r){this.$_render(css,(doc,css)=>{if(this.$_border(css,'top')){doc.moveTo(r.x,r.y).lineTo(r.x+r.width,r.y).stroke();}if(this.$_border(css,'bottom')){doc.moveTo(r.x,r.y+r.height).lineTo(r.x+r.width,r.y+r.height).stroke();}if(this.$_border(css,'left')){doc.moveTo(r.x,r.y).lineTo(r.x,r.y+r.height).stroke();}if(this.$_border(css,'right')){doc.moveTo(r.x+r.width,r.y).lineTo(r.x+r.width,r.y+r.height).stroke();}});return this;}image(css,data,r){this.$_render(css,(doc,css)=>{doc.image(data,r.x,r.y,r);this.border(css,r);});return this;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_build(report,printPages){const pages=[];for(let p of printPages){const page=new PdfPage(this,p);pages.push(page);}return pages;}$_render(css,callback){css=this.$_css(css);this._doc.save();callback(this._doc,css);this._doc.restore();}$_css(css){if(css instanceof Element){css=getComputedStyle(css);}return css;}$_color(css){let color=css;let opacity=1;if(css.startsWith('#')){debugger;}else if(css.startsWith('rgb')){const s=css.substring(css.startsWith('rgb(')?4:5,css.length-1);const vals=s.split(/\s*\,\s*/g);color='#';for(let i=0;i<3;i++){color+=Utils.pad16(parseInt(vals[i]),2);}if(vals.length>3){opacity=parseFloat(vals[3]);}}else {return null;}return opacity>0?{color,opacity}:null;}$_border(css,border){const prop='border'+Utils.capitalize(border);const width=parseFloat(css[prop+'Width']);if(width>0){const color=this.$_color(css[prop+'Color']);if(color){const style=css[prop+'Style'];const dash=style==='dotted'?1:style==='dashed'?2:0;this._doc.strokeColor(color.color,color.opacity).lineWidth(width*pxpt);dash>0&&this._doc.dash(dash);return true;}}}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    PdfModel.FONT_SIZE=10;// pt
    class PdfObject{}class PdfPage extends PdfObject{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(pdf,page){super();const r=page.page.getBoundingClientRect();this.offsetX=r.x;this.offsetY=r.y;this._page=page;this._elements=this.$_build(pdf);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    write(pdf){for(let elt of this._elements){elt.write(pdf);}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_build(pdf){const page=this._page;const elts=[];elts.push(new PdfElement(pdf,page.background));elts.push(new PdfElement(pdf,page.pageHeader));for(let dom of page.contents){const m=dom instanceof HTMLElement&&pdf.getModel(dom);const elt=pdf.elementCreator(pdf,m,dom);if(elt){elts.push(elt);}}elts.push(new PdfElement(pdf,page.pageFooter));elts.push(new PdfElement(pdf,page.foreground));return elts;}}class PdfElement extends PdfObject{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(pdf,dom){super();this._dom=dom;this._elements=dom instanceof HTMLElement?this._build(pdf,dom):void 0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    write(pdf){this._doBeginWrite(pdf,this._dom);this._doWrite(pdf,this._dom);if(this._elements){for(let elt of this._elements){elt.write(pdf);}}this._doEndWrite(pdf,this._dom);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _doBeginWrite(pdf,dom){}_doEndWrite(pdf,dom){}_doWrite(pdf,dom){if(dom instanceof HTMLElement){const m=pdf.getModel(dom);const r=pdf.getBounds(dom);const css=getComputedStyle(dom);if(dom instanceof HTMLSpanElement){let s=dom.textContent;if(s){if(m instanceof TextItem&&m.wrap){//s = s.replace(/\s{2}/g, ' ');
    pdf.text(css,r,s,0,{width:r.width+2,align:css.textAlign});}else if(css.textAlign==='right'){pdf.text(css,r,s,0,{width:r.width,align:'right'});// } else if (css.textAlign === 'center') {
    //     pdf.text(css, r, s, {width: r.width, align: 'center'});
    }else {pdf.text(css,r,s,0);}}}else if(dom instanceof HTMLElement&&dom.tagName==='B'){let s=dom.textContent;if(s){pdf.text(css,r,s,0);}}else {if(m instanceof ReportGroupItem||m instanceof TextItem||m instanceof BarItem){pdf.rect(css,r).border(css,r);}}}}_build(pdf,dom){const elts=[];const childs=dom.children;for(let i=0;i<childs.length;i++){const child=childs[i];const m=(child instanceof HTMLElement||child instanceof SVGSVGElement)&&pdf.getModel(child);const elt=pdf.elementCreator(pdf,m,child);if(elt){elts.push(elt);}}return elts;}}class PdfBoundedElement extends PdfElement{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _needClip(){return false;}_doBeginWrite(pdf,dom){// console.log('begin', dom.cellIndex)
    if(this._needClip()){pdf.save();pdf.clip(dom);}}_doEndWrite(pdf,dom){// console.log('end', dom.cellIndex)
    if(this._needClip()){pdf.restore();}}_doWrite(pdf,dom){const r=pdf.getBounds(dom);const css=getComputedStyle(dom);pdf.rect(css,r);pdf.border(css,r);}}class PdfHtmlElement extends PdfElement{_build(pdf,dom){const elts=[];const childs=dom.childNodes;for(let i=0;i<childs.length;i++){const elt=pdf.elementCreator(pdf,null,childs[i]);if(elt){elts.push(elt);}}return elts;}}class PdfTextElement extends PdfElement{_doWrite(pdf,dom){const r=pdf.getTextBounds(dom);const css=getComputedStyle(dom.parentElement);let s=dom.textContent;if(s){pdf.text(css,r,s,0);}}}////////////////////////////////////////////////////////////////////////////////
    class PdfBarElement extends PdfElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(pdf,dom,model){super(pdf,dom);this._model=model;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _build(pdf,dom){// 자식이 없다.
    return;}_doWrite(pdf,dom){const r=pdf.getBounds(dom);pdf.rect(dom,r);}}////////////////////////////////////////////////////////////////////////////////
    class PdfCanvasElement extends PdfElement{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(pdf,dom){super(pdf,dom);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _build(pdf,dom){return;}_doWrite(pdf,dom){const data=dom.toDataURL();if(data){const r=pdf.getBounds(dom);pdf.image(dom,data,r);}}}////////////////////////////////////////////////////////////////////////////////
    const _checked_='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAP0QAAD9EBVjAapAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAACAASURBVHic7d1nmG11eb/x+7G3RFM0Go2ixt67EVRQAQFRigqCEsWKgD0kxlhjibFSLLEEe0NREEFQaQLRvwVb7ChW7Aoi0s55/i/WHnKEc6btvedZa/3uzzvxnJnvdeHlumdm72ciM5EkSW25XPUASZK09gwASZIaZABIktQgA0CSpAYZAJIkNcgAkCSpQQaAJEkNMgAkSWqQASBJUoMMAEmSGmQASJLUIANAkqQGGQCSJDXIAJAkqUEGgCRJDTIAJElqkAEgSVKDDABJkhpkAEiS1CADQJKkBhkAkiQ1yACQJKlBBoAkSQ0yACRJapABIElSgwwASZIaZABIkrQGIuKKEfHX1TsWGACSJM1ZRFwdOAo4NSKuX70HIDKzeoMkSaM1+ar/aOBuk390BrBVZv6obpUBIEnS3ETEjYBjgVtc6r86ky4CzlzrTQv8EYAkSXMQEbcFTuOyD3+AzYCTIuKmazpqAwaAJEkzFhFbAJ8G/naRP3ZDugi4+dqs+lMGgCRJMxQRDwaOA661jD9+fboIuNV8V12WASBJ0oxExN7A4cBVV/DXrgucOPmRwZoxACRJmoGIeDbwVuDyq/jr1wFOiIg7znbVpvkuAEmSphARAbwGeOoMPtxvgG0y8wsz+FiLMgAkSVqliLgi8HbgETP8sL8DHpiZn53hx7wMA0CSpFWIiGsAHwK2mcOHPwfYLjNPm8PHBgwASZJWbCPX/ebhXGCHzDx5Hh/cFwFKkrQCEbEZcCrzffgDXAM4JiLuN48PbgBIkrRMEXE7uof/Wh3vuRpwVETM/McMBoAkScsQEfcGTmbx637zcFXgyIjYYZYf1ACQJGkJEfEQln/dbx6uDBw+2TETBoAkSYuIiMfRvdr/KsVTrgQcFhG7zuKDBfAfs/hAkiQB64ADM/MX1UNmISL+FXhJ9Y5LuRh4VGa+b5oPEoDvA5QkzcIFwCMz84PVQ6Y1ue53ILB/9ZZNWAc8JjPfudoPYABIkmbhHGCnzDyhesi0IuJKdNf9dq/esoT1wOMy89DV/GUDQJI0rZ/TXa07vXrItCbX/Q4Htq7eskwJPCkz37TSv2gASJKmcQawbWaeUT1kWhFxbbrrfnet3rJCCeyfma9byV/yXQCSpNU6Hdh8JA//zegO/Azt4Q/dF/OHRMTTV/KXDABJ0mqcAGyZmT+vHjKtiLg9cBpws+otU3p1RByw3D9sAEiSVuqDdD/zP6d6yLQi4j501/2uV71lRl4eEc9Zzh80ACRJK/EGYLfMvKB6yLQiYifgWOCa1Vtm7MUR8cKl/pABIElarhdk5pMzc331kGlFxOPpvpNRfd1vXp4XES9d7A/4LgBJ0lLWA/tm5hurh8zC5FvkL67esUZelZnP2th/YQBIkhZzAbBnZn6oesi0IuJydNf99qvessYOysynXvofGgCSpE05B3hIZp5YPWRak+t+7wB2q95S5A1038W55JlvAEiSNuZndK/0/1L1kGlNrvt9GHhA9ZZibwGesBABBoAk6dLOALbJzO9VD5nW5LrfMcBdqrf0xNuBvTNzvQEgSdrQF+m+8h/8r/ONiBvTvc1v6Ad+Zu09wF5XqF4hSeqN4+l+o9/vq4dMKyLuQPeV/1gO/MzSHkB6B0CSBHAY3Vf+Y3j43xc4CR/+m3Ie8B4DQJL0emD3zLywesi0ImJn4OOM77rfrPwW2DozjzYAJKltz8vMfUdy3e8JdN/JGOt1v2mdBdw3M08D8DUAktSm9cA+mfmm6iGzEBHPBV5UvaPHvkv3zo7vL/wDA0CS2nMBsEdmHl49ZFqT634HAftWb+mx04EHXvqdHQaAJLXlbLrrfidVD5nW5LrfO4GHV2/psZOAB2/sVzcbAJLUjp/RfSX45eoh04qIP6O77nf/6i09dgTdizvP39h/6YsAJakN3wXuNZKH/3WAE/Hhv5hDgV039fAHA0CSWvAFYPMNXwA2VJPrfqcCd67e0mOvyMy9M3PdYn/IAJCkcfsUsNVITvveATgN+PvqLT12QGYesJw/aABI0nh9ANh+ZNf9rlu9pafW0f2Sn1cs9y8YAJI0TocAjxjJdb9d6H6pj9f9Nu58up/3H7qSv2QASNL4PDcz9x/Jdb8n0l33u3L1lp46h+6dHUes9C/6NkBJGo91dNf93lw9ZBYi4nnAC6t39NjP6X6B0+mr+csGgCSNw/l03/L/SPWQaU2u+x0MPLl6S499n+6073dX+wEMAEkavrPprr2dXD1kWpPrfu8CHla9pce+CmybmWdN80EMAEkatrPofgb8leoh05pc9/sIcL/qLT12GvCgzPzttB/IFwFK0nB9h+663xge/gvX/Xz4b9rRwNazePiDASBJQ/V5uut+Z1YPmVZE3ITuK1uv+23au+h+idN5s/qABoAkDc8n6K77/bJ6yLQi4o50p31vWr2lxw4E9srMi2f5QQ0ASRqW99H9DPjc6iHTiogt8brfUv4tM5+WmTnrD2wASNJwHAzsMZLrfrsCHwf+vHpLT60HnpSZL5nXJzAAJGkYnpOZT5nHV4JrLSKeRPd7Crzut3EXArtl5n/N85P4NkBJ6rd1dF8JvqV6yCxExPOBF1Tv6LFzgZ0z85Pz/kQGgCT11/nA7qu58943k+t+hwD7VG/psV/R/fbGz63FJzMAJKmffkd33e/T1UOmFRFXpnsb20Ort/TYj+hO+35zrT6hASBJ/fNTuut+X60eMq2I+HO6635bVW/psW/QPfx/vJaf1ACQpH75Nt2d9zOrh0wrIv4GOAa4U/WWHvt/dN/2//Vaf2LfBSBJ/fE5xnPd76Z0B358+G/aJ4D7VTz8wQCQpL44ju5h8KvqIdOKiDvhdb+lfIDuoNMfqgYYAJJU772M57rfVnS/1Odviqf02RuAR1QfdDIAJKnWgcCemXlR9ZBpRcRD6X7m73W/Tfv3zHxyZq6vHjKGFwGeDjy5eoQkrcKFmfnF6hGzEBH70L3P3y8sNy6Bp2bmwdVDFowhAM7JzM9Uj5CkVkXEC4DnV+/osYuAR2fme6qHbGgMASBJKjC57vc64EnVW3rsPOChmXlM9ZBLMwAkSSs2ue73bmDX6i099ltgh8z8n+ohG2MASJJWZHLd7whgy+IpffZTuut+/1s9ZFMMAEnSskXEdele6X/H6i099h26h/+Z1UMW46s1JUnLssF1Px/+m/ZFYIu+P/zBAJAkLcMG1/1uUr2lx04EtsrMX1QPWQ4DQJK0qIi4H3ASXvdbzIfpfoPjOdVDlssAkCRtUkQ8jO5n/n9WvaXH3go8LDMvqB6yEgaAJGmjIuLJwPuAK1Vv6bGXZ+bjMnNd9ZCVMgAkSZcRES+kO/Ljc2LjEnhWZv5L9ZDV8m2AkqRLTK77vR54YvWWHrsYeFxmvr16yDQMAEkScMl1v/cAu1Rv6bHzgd0y88jqIdMyACRJC9f9jgTuW72lx84GHpyZJ1cPmQUDQJIaN7nu93HgDtVbeuznwLaZ+eXqIbNiAEhSwyLi74HjgBtXb+mx79Gd9j2jesgs+epOSWpURNyZ7rqfD/9N+wrdad9RPfzBAJCkJkXE/elO116neEqfnQLcNzPPqh4yDwaAJDUmIh4OHI3X/RZzFN23/X9XPWReDABJakhE7Au8F6/7LeadwM6Z+cfqIfNkAEhSIyLiRcAh+P/9i3kN8I+ZeXH1kHnzXQCSNHIRcXm6635PqN7Sc8/JzJdWj1grBoAkjVhEXIXuut/O1Vt6bD3wpMx8c/WQtWQASNJIRcQ1gSPwut9iLgD2zMwPVQ9ZawaAJI1QRFwPOAav+y3m98BOmXl89ZAKBoAkjUxE3Aw4Fg/8LOaXwPaZ+fnqIVUMAEkakYi4C917/D3ws2k/pHuP/7eqh1TyrSCSNBIR8QDgBHz4L+brwOatP/zBAJCkUYiI3YCP4XW/xXwWuHdm/rh6SB8YAJI0cBGxH91b/bzut2nHAvfPzN9UD+kLA0CSBiwi/h04GP//fDHvA3bMzD9UD+kTXwQoSQM0ue73BuDx1Vt67nXAUzJzffWQvjEAJGlgJtf93gvsVL2l516YmS+oHtFXBoAkDcjkut+RwH2qt/TYerqv+l9XPaTPDABJGojJdb+PA7ev3tJjFwF7Zeb7qof0nQEgSQMwue53HLBZ8ZQ++wOwa2YeWz1kCAwASeq5iLgr3XW/a1dv6bHfADtk5meqhwyFbxuRpB6LiK3prvv58N+0n9Ad+PHhvwIGgCT1VETsDhwFXKN6S499m+6079erhwyNASBJPRQR++N1v6V8AdgiM39QPWSIDABJ6pmIeAlwEBDVW3rseGCrzPxl9ZCh8kWAktQTk+t+bwQeV72l5w4H9sjMC6qHDJkBIEk9MLnu9z7gIdVbeu7NwD6Zua56yND5IwBJKhYR16J7j78P/8W9LDOf4MN/NvwOgCQVioi/pbvud7vqLT2WwDMz8zXVQ8bEAJCkIhFxc7rfU79Z8ZQ+uxh4bGa+o3rI2BgAklQgIu4GfAwP/Czmj8DDM/Oo6iFjZABI0hqbXPc7HA/8LOZ3wI6ZeUr1kLHyRYCStIYi4hF0X/n78N+0nwH39eE/XwaAJK2RiHgK8G7gitVbeuwMutO+X6keMnYGgCStgYh4KXAgXvdbzJfpTvt+r3pIC3wNgCTN0eS6338Bj63e0nOfpvuZ/9nVQ1phAEjSnETEVemu+z24ekvPfZTu1f7nVw9piT8CkKQ52OC6nw//xb0d2MWH/9ozACRpxibX/T4NbFG9pedeBTwmMy+uHtIiA0CSZigibgGcBty2ekvPPTszn5WZWT2kVb4GQJJmZHLd72jgr6u39Ng64EmZ+ZbqIa0zACRpBiJiG7rrflev3tJjFwCPyMwPVw+RPwKQpKlFxB7AUfjwX8zvge18+PeHASBJU4iIpwHvwut+i/klsGVmnlA9RP/HAJCkVYqIlwGvwet+i/kB3XW/L1YP0Z/yNQCStEKT635vBh5TvaXn/hfYNjN/Uj1El2UASNIKTK77vR/YsXpLz/0P8KDM/E31EG2cASBJyxQRf0F3tnbz6i0993Fg18w8r3qINs3XAEjSMkTE9YGT8eG/lPcCD/bh338GgCQtwet+y3YIsGdmXlQ9REszACRpERFxd+AU4IbVW3ru+Zm5v6d9h8PXAEjSJkTEtsCH8MDPYtYD+2fm66uHaGUMAEnaiIjYEzgUD/ws5kJgr8x8f/UQrZw/ApCkS4mIpwPvxIf/Yv4A7OjDf7j8DoAkbSAi/gP45+odPfdrYIfM/Gz1EK2eASBJQERcge6636OLp/Tdj4FtMvMb1UM0HQNAUvMm1/0+ADyoekvPfYvu4f/D6iGangEgqWmT635HAfeq3tJzn6f7db6/qh6i2fBFgJKaNbnu92l8+C/lU8BWPvzHxQCQ1KSIuCXddb/bVG/puQ8C22fmudVDNFsGgKTmRMQ98LrfcrwJ2C0zL6weotkzACQ1JSIeSPct7b+q3tJzL8nMJ2bm+uohmg8DQFIzIuKRwJF42ncxCTw9M/+teojmywCQ1ISIeAbwDrzut5iL6U77vrZ6iObPAJA0ehHxcuBVQFRv6bE/Ajtl5ruqh0wrIq5VvWEIDABJoxURV4iItwEHVG/pud8BW2fmx6qHTCsibkv3Gxy1BA8BSRqlyXW/w4Adqrf03FnAtpn51eoh04qIe9EddfpF9ZYh8DsAkkYnIv4S+CQ+/JfyXWDzkTz8twM+AfxF9ZahMAAkjUpE3ACv+y3Hl4AtMvP71UOmFRF7AEcAV6veMiQGgKTRiIhb0V33u3X1lp47GbhvZv68esi0ImI/4F347o4VMwAkjUJE3JPuK/+/q97Sc0fQ/cz/nOoh04qIFwIH47s7VsUAkDR4k5//et1vaYcCu2bm+dVDphERl4uI1wHPq94yZAaApEGLiEfRXffz57+Le2Vm7p2Z66qHTCMirgi8G3hy9ZahMwAkDVZEPBN4O76leSn/nJn/VD1iWhFxdeCjwO7VW8bAABARsWNEXKN6h7Rc0flP4JX489/FrAMem5n/WT1kWhu8tXPb6i1jYQA0LiL2pntR0DFGgIYgIq4AvA0Y/Fe0c3Y+8NDM/O/qIdOKiOvTvXPhntVbxsQAaNjk4f8Wuq+gtgA+HhF/VrtK2rSIuBpdsO5VvaXnzgG2y8yPVA+ZVkTcDDgVuE31lrExABp1qYf/gs3pvhNgBKh3NvgW8PbVW3ruF8CWmXli9ZBpRcSdgVOAG1VvGSMDoEGbePgv2By/E6Ce2eC63z9Ub+m5M+mu+51ePWRaEbElcAJwneIpo2UANGaJh/+Ce2EEqCe87rdsX6O76/+d6iHTioidgGOAP6/eMmYGQEOW+fBfcC/gWCNAlSbX/U7B635LOQ24T2b+tHrItCLiMcAHgatUbxk7A6ARK3z4L/gHugiwwrXmImJ7uut+f1m9peeOAbbOzN9WD5lWRPwT8N/A5au3tMAAaMAqH/4LjACtuYjYC3+723K8G3hIZp5XPWRaEfFyYPD3CobEABi5KR/+C+6JEaA1EhHPonufv9f9FncQ8KjMvKh6yDQi4vIR8VbggOotrTEARmxGD/8F9wSOMwI0L5Prfq8EXoHX/Zby3Mx8amZm9ZBpRMSVgcOAvau3tMgAGKkZP/wX3IMuAq45w48pLVz3ezvwzOotPbce2CczX1w9ZFqTFxgfA+xcvaVVBsAIzenhv+AedD8OMAI0E5PrfkcCj6re0nMXArtn5hurh0wrIq4NnAhsVTylaQbAyMz54b/A7wRoJibX/T4FbFe9pefOBXbIzMOqh0wrIm5E99bOO1dvaZ0BMCJr9PBfcHeMAE0hIv6O7kHgL3hZ3K+B+2XmJ6uHTCsibk131//m1VtkAIzGGj/8F9wd+IQRoJWaPAhOA25VvaXnfkR32vdz1UOmFRH3oDvnfP3qLeoYACNQ9PBfcDe6CLhWwefWAEXEP9A9CG5QvaXnvkl32veb1UOmFRHb4FGn3jEABq744b/ACNCyRMQOdL/RzwfB4j5H95X/j6qHTCsidgOOAq5evUV/ygAYsJ48/BfcFSNAi4iIfwQ+gtf9lvJJup/5/7p6yLQiYh/gPcAVq7fosgyAgerZw3+BEaCNmtx4PxSv+y3lMLpX+59bPWRaEfFc4PX4nOkt/8UMUE8f/gvuCnwyIv6ieojqTa77vYruxnsf//faJ2+ke5//hdVDpjH5d34Q8KLqLVqcATAwPX/4L7gL3XcCjICGRcQVgXcAz6jeMgAvzsx9MnN99ZBpTP6dvxPYv3qLlmYADMhAHv4L7oLfCWhWRFyd7rf5PbJ6S88l8NTMfG71kGlNLjp+BNizeouWxwAYiIE9/BfcGSOgORHxV3jdbzkuovttfgdVD5nW5HU/nwC2r96i5TMABmCgD/8FdwY+NTn5qpGLiBvSXfe7R/WWnjsPeEhmvrt6yLQi4nrAycC9qrdoZQyAnhv4w3/Bnei+E2AEjFhE3IbuzOstq7f03G+BrTPzmOoh04qIm9L9O79d9RatnAHQYyN5+C8wAkYsIu6F1/2W46fAfTLztOoh04qIO9I9/G9cvUWrYwD01Mge/gvuhD8OGJ2IeBDd8Rpf67G479Cd9v1a9ZBpRcS96X6d798UT9EUDIAeGunDf8Ed6SLgr6qHaHoR8Wjgw8BVi6f03el0p33PrB4yrYjYETgO8JeADZwB0DMjf/gvMAJGICIOwOt+y3EisGVm/qJ6yLQiYi/gcOAq1Vs0PQOgRxp5+C+4A0bAIE0uvb0aeHn1lgH4CLBdZp5TPWRaEfEM4G0YfKNhAPREYw//BXcAjo+Iv64eouXZ4NLb06u3DMB/Aw/NzPOrh0wrIl4KvIq2/v9p9AyAHoiIe9Dew3/B7em+E2AE9Nzkut+ReOltOf4zMx+bmeuqh0wjIi4XEW8Cnl29RbNnAPRAZn4WOLB6RyEjoOcmP6o5Hnhg9ZaeS+CfMvOfq4dMKyKuBHwAeHz1Fs2HAdATmfl04LXVOwrdHn8c0EsbXPe7e/WWnlsH7J2Zr6weMq2IuAZwNLBr9RbNjwHQI0YAt6OLgGtXD1Fnct3vNLzut5TzgV0y823VQ2bkKOD+1SM0XwZAzxgBRkBfRMTmdNf9rl+9pefOBrbNzCOrh8yQwdcAA6CHjABuixFQanLs5RN43W8pP6d7j//J1UOklTIAesoIMAKqRMRj8Lrfcnyf7rTvl6qHSKthAPSYEcBtgRMi4jrVQ1oREf9C9/71y1dv6bmv0j38z6geIq2WAdBzkwho+S2Ct6H7ToARMEeT636vAV5WvWUATqX7jX5nVQ+RpmEADEBmPg0jwO8EzMnkut+7gKdVbxmAjwFbZ+bvqodI0zIABsII4NZ0EeCvH52hyXW/jwJ7VG8ZgHcBO2XmH6uHSLNgAAyIEcCt6X4cYATMwOTo0vHAttVbBuC1wF6ZeXH1EGlWDICBMQL8TsAsRMSN8Lrfcj0nM5+emVk9RJolA2CAjABuhRGwahFxW7rrfreo3tJz64EnZuZLq4dI82AADJQRcEkEXLd6yJBExBZ01/3+tnpLz10I7JaZb6oeIs2LATBgRoARsBIR8WDgOOBa1Vt67lxg+8z8YPUQaZ4MgIEzArglRsCSImJv4HC87reUXwFbZeanqodI82YAjIARwC2BEyPietVD+iging28Fa/7LeWHwBaZ+fnqIdJaMABGwgjgFnTfCTACJibX/V4L+CK2pX2D7rTvt6qHSGvFABgRI8AIWDC57vdu4KnVWwbgs8C9M/PH1UOktWQAjIwRwC3ofhzQ7KvcI+IawFHAI6q3DMBxwP0z89fVQ6S1ZgCMkBHAzem+E9BcBGxw3W+b6i0D8H5gx8z8Q/UQqYIBMFJGQHsRMLnudypwt+otA/B6YI/MvLB6iFTFABgxI4Cb08iPAyLidnTX/W5evWUAXpSZ+2bm+uohUiUDYOQmEXBQ9Y5CN6OLgOtXD5mXiLg3cDJe91tKAvtn5vOrh0h9YAA0IDOfihEwygiIiIfgdb/luAjYMzMPqR4i9YUB0AgjgL9nZBEQEY8FPgRcpXpLz50HPDgz31s9ROoTA6AhRsAlEXCD6iHTioh/Bd6C1/2W8hu6t/l9vHqI1DcGQGOMgGFHwOS634HAS6q3DMBPgPtk5meqh0h9ZAA0yAjgpgwwAibX/d4DPKV6ywB8m+607/9WD5H6ygBolBFwSQT8XfWQ5Zhc9/sYsHv1lgH4It0v9flB9RCpzwyAhhkBw4iAiLg2cAKwdfWWATgB2DIzf1k9ROo7A6BxRgA3occREBGbAacAd61dMgiHA9tl5u+rh0hDYADICPi/CLhh9ZANRcTt8brfcr0FeHhmXlA9RBoKA0CAEUDPImBy3e8koPlfbbwM/5GZj8/MddVDpCExAHQJI4Ab04MIiIid8LrfciTwzMx8dvUQaYgMAP0JI+CSCLhRxSePiMcBH8Trfku5GHhMZr66eog0VAaALsMIqImAiHgO8Ga87reUPwK7ZObbq4dIQ2YAaKOMADZjjSIgIi4XEQcBL5735xqBs4FtM/Oj1UOkoTMAtElGwCURsNm8PkFEXInuut/+8/ocI/Iz4L6Z+enqIdIYGABa1CQCDq7eUWgz5hQBG1z3223WH3uEvkd32vfL1UOksTAAtKTMfAptR8CNmHEETK77nQg8YFYfc8S+Qvfw/171EGlMDAAtixHAjYCTIuLG036gycc4FbjL1KvG7xS63+j3s+oh0tgYAFo2I4Ab0n0nYNURMLnudypws5mtGq+jgG0y8+zqIdIYGQBaESNg9REQEfcBTsbrfsvxDmDnzPxj9RBprAwArZgRcEkE3GS5fyEidgaOBa45t1Xj8Wrg0Zl5cfUQacwMAK2KEbD8CIiIxwOH4XW/5fjXzHxmZmb1EGnsDACtmhHA37FEBETEvwFvwut+S1kHPD4zX1Y9RGqFAaCpGAGXRMBNN/yHk+t+BwP/XjNrUC6g+1W+b6keIrXEANDUjIA/jYDJdb/3AvuVrhqG3wPbZ+bh1UOk1hgAmgkjgBvQRcCdgKOBhxfvGYJfAltl5vHVQ6QWXaF6gMYjM58SEdDuXfsbAF8AonrIAPyA7j3+364eIrXK7wBopvxOgA//Zfg63WlfH/5SIQNAM2cEaBGfAe6dmT+pHiK1zgDQXBgB2ohjgQdk5m+qh0gyADRHRoA28F5gx8z8Q/UQSR0DQHM1iYBDqneo1CHAnpl5UfUQSf/HANDcZeb+GAGtekFm7u9pX6l/fBug1kRm7j95i6DHcdqwHtg/M19fPUTSxhkAWjNGQDMuAh6Vme+vHiJp0wwArSkjYPT+AOySmcdVD5G0OANAa84IGK3f0N31/2z1EElL80WAKuELA0fnx3QHfnz4SwNhAKiMETAa36I77fv16iGSls8AUCkjYPA+D2yRmT+sHiJpZQwAlTMCBut44H6Z+avqIZJWzgBQLxgBg/Mhuhf8/b56iKTVMQDUG0bAYLwJeHhmXlA9RNLqGQDqFSOg916amU/MzPXVQyRNxzsA6h3vBPRSAs/IzNdWD5E0GwaAeskI6JWLgb0z853VQyTNjgGg3jICeuGPwMMy82PVQyTNlgGgXptEQAD7Vm9p0O+AHTPzlOohkmbPAFDvZeZ+k+8EGAFr5yzggZn5leohkubDdwFoEDJzP+B11TsacQbdaV8f/tKIGQAaDCNgTXyJ7uH//eohkubLANCgGAFzdTKwZWb+vHqIpPkzADQ4RsBcHAlsm5lnVw+RtDYMAA2SETBTbwN2yczzq4dIWjsGgAbLCJiJV9Ed+VlXPUTS2jIANGhGwFT+JTOflZlZPUTS2vMOgAbPOwErtg54Yma+tXqIpDoGgEbBCFi2C4DdM/Mj1UMk1TIANBpGwJLOAR6SmSdWD5FUzwDQqBgBm/QLYLvM/GL1EEn94IwjvAAABmFJREFU4IsANTq+MPAyzgS28OEvaUMGgEbJCLjE1+hO+36neoikfjEANFpGAP8D3Cczf1o9RFL/GAAatUkEvL56R4FjgAdk5m+rh0jqJwNAo5eZ+9JWBLyH7tX+51UPkdRfBoCa0FAEHAw8MjMvqh4iqd8MADWjgQh4XmY+xdO+kpbDOwBqSmbuO7kT8OTqLTO0HtgvM99QPUTScBgAas7IIuBC4FGZ+YHqIZKGxQBQk0YSAecCu2TmJ6qHSBoeA0DNGngE/BrYPjP/X/UQScPkiwDVtIG+MPBHwL19+EuahgGg5g0sAr5Jd9r3G9VDJA2bASB1hnAx8HN0X/n/qHqIpOEzACRg8t75PkfAJ4H7ZeavqodIGgcDQJrocQQcBuyQmedWD5E0HgaAtIEeRsB/Abtn5oXVQySNiwEgXUqPIuDFmfmkzFxfvEPSCHkHQNqIzMyI2G/yH9f6TkACT8/MA9f480pqiAEgbcIGERDAPmv0aS8GHp2Z716jzyepUQaAtIhJBOw7+Y/zjoDzgIdl5tFz/jySZABIS1mjCPgt8KDMPG1OH1+S/oQBIC3DnCPgLGCbzPzajD+uJG2S7wKQlmny7oB9gTfM8MN+l+60rw9/SWvKAJBWYMYRcDrdw//7M/hYkrQiBoC0QjOKgJOALTPzF7NZJUkrYwBIqzBlBBwBPDAzz5ntKklaPgNAWqVVRsChwK6Zef58VknS8hgA0hRWGAGvyMy9M3PdnGdJ0pIMAGlKy4yAAzLzgDWaJElL8g6ANAOL3AlYBzw+Mw8tmCVJm2QASDOykQg4n+5X+R5ROEuSNsoAkGZogwg4D/hoZp5UvUmSNsYAkGZs8pqAZ1XvkKTF+CJASZIaZABIktQgA0CSpAYZAJIkNcgAkCSpQQaAJEkNMgAkSWqQASBJUoMMAEmSGmQASJLUIANAkqQGGQCSJDXIAJAkqUEGgCRJDTIAJElqkAEgSVKDDABJkhpkAEiS1CADQJKkBhkAkiQ1yACQJKlBBoAkSQ0yACRJapABIElSgwwASZIaZABIktQgA0CSpAYZAJIkNcgAkCSpQQaAJEkNMgAkSWqQASBJUoMMAEmSGmQASJLUIANAkqQGGQCSJDXIAJAkqUEGgCRJDTIAJElqkAEgSVKDDABJkhpkAEiS1CADQJKkBhkAkiQ1yACQJKlBBoAkSQ0yACRJapABIElSgwwASZIaZABIktQgA0CSpAYZAJIkNcgAkCSpQQaAJEkNMgAkSWqQASBJUoMMAEmSGmQASJLUIANAkqQGGQCSJDXIAJAkqUEGgCRJDTIAJElqkAEgSVKDDABJkhpkAEiS1CADQJKkBhkAkiQ1yACQJKlBBoAkSQ0yACRJapABIElSgwwASZIaZABIktQgA0CSpAYZAJIkNcgAkCSpQQaAJEkNMgAkSWqQASBJUoMMAEmSGmQASJLUIANAkqQGGQCSJDXIAJAkqUEGgCRJDTIAJElqkAEgSVKDDABJkhpkAEiS1CADQJKkBhkAkiQ1yACQJKlBBoAkSQ0yACRJapABIElSgwwASZIaZABIktQgA0CSpAZdoXrADNwgIp5WPUKSRuRq1QM0fwFk9QhJkmboW5l5y+oRfeePACRJapABIElSgwwASZIaZABIktQgA0CSpAYZAJIkNcgAkCSpQQaAJEkNMgAkSWqQASBJUoMMAEmSGmQASJLUIANAkqQGGQCSJDXIAJAkqUEGgCRJDTIAJElqkAEgSVKDDABJkhpkAEiS1CADQJKkBhkAkiQ1yACQJKlBBoAkSQ0yACRJapABIElSgwwASZIaZABIktQgA0CSpAYZAJIkNcgAkCSpQQaAJEkNMgAkSWqQASBJUoMMAEmSGmQASJLUIANAkqQGGQCSJDXIAJAkqUEGgCRJDTIAJElqkAEgSVKDDABJkhpkAEiS1CADQJKkBhkAkiQ1yACQJKlBVwB2rh4hSdIM/b56wBBEZlZvkCRJa8wfAUiS1CADQJKkBhkAkiQ1yACQJKlBBoAkSQ0yACRJapABIElSgwwASZIaZABIktQgA0CSpAYZAJIkNcgAkCSpQQaAJEkNMgAkSWqQASBJUoMMAEmSGmQASJLUIANAkqQGGQCSJDXIAJAkqUEGgCRJDTIAJElqkAEgSVKDDABJkhpkAEiS1CADQJKkBv1/W+egEDHxZx0AAAAASUVORK5CYII=';const _unchecked_='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAA/XAAAP1wHWM14/AAAFFmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTAzLTMwVDE5OjA2OjQzKzA5OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wMy0zMFQxOTowNzozMCswOTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wMy0zMFQxOTowNzozMCswOTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1ZmUyOTFjMy1iNTM0LTIwNGMtODYyNC0wMTE3MmEzYjJhZTMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NWZlMjkxYzMtYjUzNC0yMDRjLTg2MjQtMDExNzJhM2IyYWUzIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NWZlMjkxYzMtYjUzNC0yMDRjLTg2MjQtMDExNzJhM2IyYWUzIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1ZmUyOTFjMy1iNTM0LTIwNGMtODYyNC0wMTE3MmEzYjJhZTMiIHN0RXZ0OndoZW49IjIwMjEtMDMtMzBUMTk6MDY6NDMrMDk6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChXaW5kb3dzKSIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7vzoxhAAAOmElEQVR4nO3d3+v2d0HH8dd7u9fWXKkD++Eii7DsF4QdFBvVrHApZUoHri2CgiBnRgQdhVEnUUEHY2FiURGRkVMcTHIOm2ZBsHL9PMicSgc21y83JbzV7d3B9ZXcD+/d9319v/f7e31ej8df8Dr7PK/r+rzf15hzBgDoctnqAQDApScAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACo0kv7Z6BACb8ViS2+ecD68ewrmNJHP1CAA24WySH5tz3rl6CM/szOoBAGzCo0leOee8b/UQzo8AAGBfH0vysjnnA6uHcP4EAAD7eDDJTXPOB1cP4cI4BQDAxXogyQ0e/odJAABwMe5LcuOc82Orh3BxBAAAF+rO7H7zf3T1EC6eAADgQvx2klfPOc+uHsJ+BAAA5+uX55y3zTkfXz2E/TkFAMAzeTzJa+ecb1w9hOMjAAA4l7NJbp1zvnX1EI6XAADgC3k0yQ/POd+zegjHTwAA8HQeyu5N/79bPYSTIQAAeLIHk7x0zvmh1UM4OU4BAPD53p/keg//7RMAAHzOn2d3u9/Dq4dw8gQAAEnylux+8//E6iFcGgIAgDckuXnO+enVQ7h0BABAt1+ac77W7X59nAIA6PR4ktfMOd+0eghrCACAPmeT3DLnfNvqIawjAAC6PJLd7X7vXT2EtQQAQI+HkvzAnPPvVw9hPQEA0OGD2d3u9+HVQzgdnAIA2L6/TXKDhz+fTwAAbNu7k7zE7X48mQAA2K4/TfJyt/vxdAQAwDb9VpIfdbsfX4gAANie1885X+d2P87FKQCA7Xgsu9v9fmf1EE4/AQCwDZ/K7iv/t68ewmEQAACH75Ekr5hz/sXqIRwOAQBw2P49u9v9/mH1EA6LAAA4XP+a3e1+H1k9hMPjFADAYfqb7G73+8jqIRwmAQBweO7N7na//1g9hMMlAAAOy58k+cE55ydXD+GwCQCAw3FHklvc7sdxEAAAh+EX55w/O+ecq4ewDU4BAJxujyX56Tnn764ewrYIAIDT61NJbp5z3rV6CNsjAABOp49nd7vf+1YPYZsEAMDp89Hsbvf7x9VD2C4BAHC6fCDJTS744aQ5BQBwetwft/txiQgAgNPhXUm+d875n6uH0EEAAKz35rjdj0tMAACsdXuSW+ecn1k9hC5beAnwgSS3rR4BcBE+Ped8/+oRdNpCADw65/zr1SMA4JD4CQAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAAA4pzHGWL2B43dm9QAATqfPPfjnnHP1Fo6fbwAAeIoxxpXzyOotnAwBAMATjDGePec8u3oHJ0sAAJAkGWNcPsZ4/pzzkdVbOHkCAICMMa5K8tVzzo+u3rKvMcZzVm84BAIAoNwY47lJnj/n/PDqLfsaY3xLkreu3nEInAIANmmMMbzAdm5Hb/lfl+SyOeeHVu/Z1xjj+iR3J3l49ZZD4BsAYHPGGFcned7qHQfgG5J8ds75b6uH7GuM8bIk9yZ57uoth0IAAJty9Kn2hUm+dPWW02rsvDjJw3POh1bv2dcY45YkdyW5evWWQyIAgE05+tr/n5N8fPGUU2mMcVmSG5J8YM7536v37GuM8TNJ/ijJFau3HBoBAGzOnPOzSf7r6GHHkTHGmSTfn+T+OecnV+/Z1xjjV5LckcRVxRfBS4DAJh19E+AlwCNHx/xuTHLvnPOxxXP2chR2dyS5bfWWQyYAADZujPHFSb57zvnO1Vv2Nca4IskfJrl59ZZDJwAANmyMcU2Sb59z3rN6y77GGM/K7oz/Tau3bIEAANioowfmN84537t6y77GGNcmeUeS71y9ZSsEAMAGHX3y/5o55/2rt+xrjHFdknuSfPPqLVsiAAA25uiFv6+Yc/7T6i37GmO8MLsLfl6wesvWOCIDsCFHL8ldO+f84Oot+zq6rOgv4+F/IgQAwEaMMS5Pcs1G/tHvxiT3JfmytUu2SwAAbMDR2fgr55z/s3rLvsYYr0zyZ3Gd84kSAAAH7uj/Dy6fc/7v6i37GmP8RJI7k1y1esvWCQCAwzfmnJ9ZPWJfY4xfSPJ7SS5fvaWBAAA4cHPOx1dv2NcY49eT/MbqHU0cAwRgmaMXF9+U5CdXb2kjAABYYoxxZZI3J3nV6i2NBAAAl9wY40uS3JXkJau3tBIAAFxSY4znJXlnkhev3tJMAABwyYwxXpDkXUm+fvWWdk4BAHBJjDG+KclfxcP/VBAAAJy4McZ3JHlfkutWb2FHAABwosYYL03y7iTXrt7C/xMAAJyYMcark9yd5Fmrt/BEAgCAEzHGeE2SP05yxeotPJUAAODYjTFen+QN8Zw5tRwDBODYHP0z4e1JXrd6C+cmAAA4FmOMK5L8fpJbV2/hmQkAAPY2xrg6yVuSvHz1Fs6PAABgL2OM5yR5R5LrF0/hAggAAC7aGOMrk9yT5FtXb+HCCAAALsoY4+uS3Jvka1dv4cI5ngHABRtjfFt29/p7+B8oAQDABRljfFeS9yT58sVT2IMAAOC8jTF+KLu/83326i3sRwAAcF7GGD+e5G1Jrlq9hf0JAACe0Rjj55P8Qbw8vhkCAIBzGmP8apLfTDJWb+H4KDkAntYY47Ikb0zyU6u3cPwEAABPMcb4ouz+yvdHVm/hZAgAAJ5gjHFNkrcn+b7FUzhBAgCAJ7s7yfesHsHJ8hIgAE/2otUDOHkCAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACp1ZPeAYfNUY4+dWjwDYkKtXD+DkjSRz9QgAOEb/Mud80eoRp52fAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACp1J8qrVIwDgGH1i9YBDMOacqzcAAJeYnwAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBCAgAACgkAACgkAACgkAAAgEICAAAKCQAAKCQAAKCQAACAQgIAAAoJAAAoJAAAoJAAAIBC/wcVCcUnTpFFpAAAAABJRU5ErkJggg==';const _empty_='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAA/XAAAP1wHWM14/AAAFFmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTAzLTMwVDE5OjA2OjQzKzA5OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wMy0zMFQxOTowOTowNCswOTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wMy0zMFQxOTowOTowNCswOTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpiMzI0ZTM5OS1iZmU1LTA5NDAtOGFjOS1hYzc2YWZmYTU0NWUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6YjMyNGUzOTktYmZlNS0wOTQwLThhYzktYWM3NmFmZmE1NDVlIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YjMyNGUzOTktYmZlNS0wOTQwLThhYzktYWM3NmFmZmE1NDVlIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiMzI0ZTM5OS1iZmU1LTA5NDAtOGFjOS1hYzc2YWZmYTU0NWUiIHN0RXZ0OndoZW49IjIwMjEtMDMtMzBUMTk6MDY6NDMrMDk6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChXaW5kb3dzKSIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7jm/kdAAAVl0lEQVR4nO3dvY8l2VkH4LfnYwdsvDK7CBBgI2PYtu8KAYYAZAnWJBCtWJGQkRghUgKEhEREAEgkgLBwiMgcICQSCBD4T7Dlwhe0AsmkuzIIix0vM03Q0zs9PdPd9+PU+XqfJ117uvreqvP7nbfq3j45OzsLACCXO60PAACoTwEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgIQUAABISAEAgITubZflrPVBADCdk5Y//HSzafnjh2ACAEBpTcOf3SgAAJQk/AehAABQivAfiAIAQAnCfzAKAADHEv4DUgAAOIbwH5QCAMChhP/AFAAADiH8B3ev9QEAMBTBPwkTAAB2JfwnogAAsAvhPxkFAIDbCP8JKQAA3ET4T0oBAOA6wn9iCgAALyL8J6cAAHDV0OF/utm0PoQhKAAAXCb8k1AAALgg/BPxTYAADB38EcL/ECYAALkJ/6RMAADyGjr8Bf9xTAAAchL+ySkAAPkIfxQAgGSEPxHhGQCATIYNf8FfngkAQA7Cn2coAADzE/48RwEAmJvw54U8AwAwJ8HPjUwAAOYzbPhTjwkAwFyGDX87/7pMAADmIfzZmQIAMAfhz14UAIDxCX/2pgAAjE34cxAFAGBcwp+DKQAAYxL+HEUBABiP8OdovgcAYBzDBn+E8O+NCQDAGIQ/RSkAAP0T/hSnAAD0TfizCgUAoF/Cn9UoAAB9Ev6sSgEA6I/wZ3UKAEBfhD9VKAAA/RD+VOOLgAD6MGz4C/4xKQAAbQ0b/BHCf2SzFIChLyCAEQn/sXkGAIC9Cf/xKQAA7EX4z0EBAGBnwn8eszwDAMCKBP98TAAAICETAACuZec/LxMAAF5I+M9NAQDgOcJ/fgoAAM8Q/jkoAAB8QPjn4SFAAAR/QiYAAMkJ/5xMAACSEvy5KQAwsdsW+O2yVDoSeiP8UQBgAhZz9uF8IUIBgCFYsCnBecRlCgB0xALNWpxbXKUAAExM8HMdBQAqshhTk/ONmygAkNjlgPCJgHkIfnahAMABZlxgZ/yd9jFLAcr+PrI7BQBuYUGd2yzBH+FcZT8KAOlZNJmB85h9KQCkYYHkMjt/svPHgAAGJvw5lAkAw7HgcYiZdvwRrgOOpwDQNYscPM91QQkKAF2woMFuXCuUogBQhUWLFoz94XoKAEVZoGAdri1KUwA4mAWJ3sy247/gWmMNCgC3svhAG6491qQAYJGBDrkuWZsCkICFhNnNNvp3zVKDAtCQixy4zJpATQoA0L3ZdvgvIvypTQEAaEjw04o/BgTQiPCnJQUAoAHhT2sKAEBlwp8eeAYAoBLBT09MAAAqEP70RgEAWJnwryvDx0ZLcAsA6NboC7ngr2/0c6YmEwCAFQj/+oT/fkwAgO6MvpAL//pGP2daMAEAKEj41yf8D2MCADQ3ywIu/Oub5dxpwQQAoADhX5/wP44JAMABBH5bwv94CgDAjoR+e4K/HAUAaGaExVzo92OE82UkngEAuIbw74fwL88EAKiu98Vc8Pej93NlZCYAAJcI/34I/3WZAACrGW0BF/79GO3cGZEJAEAI/54I/zpMAIDUBH8/BH9dJgBAWsK/H8K/PhMA4CijLtzCvw+jnj8zMAEA0hH+fRD+bSkAQCrCvw/Cvz23AICDjLiAC//2RjxvZqUAADsbefEW/u2NfP7MyC0AYHrCvz3h3x8TAIpxgd9MCLXhdW/LutAvBYCjucB3c/l16jmUvJ+U4lzqmwLAQVzYjKDnojU7a0T/FAB25oIu5+K1FFDr8dq2YZ0YhwIwKBcZXE/4t2FdGosCMBgX2FxaTAJmP4eEf32zn1OzUgASuGlBdOEyE+FfnzVkXArAAA65wHZdCK/+71zMjEr412e9GJsCMJljF8GL/78Lu67tsgiwI3jt6rI+zEEB6Ng+F1npBfB0s3GRT2D291Dw1zf7OZWJAjC4NRdA0wB6Iuzbsg7MRwHo1C4XW60F0TSgjl1uA2R6HwR+PzKdd5koAIOqvTgqAdQg9Pvimp+bAjCg3hbJXY7HQrKbzA8DZv29e+R6zUEB6MxtF17LRfLyFGDf4/A8AdcR/H2Z5Bo9i4iT1gfROwVgID0slKU+ZhgxzULDEXo4p3lqkmvyrPUBjOJO6wPgqZsuvhkXyhl/pxImWYRv5f3vx3ZZTiY574T/HkwAGprkgjuKhwuv53Whhu2y3I2IR62PowDhvycTgAHMvlOa/fc7xOzh7z3vw3ZZXg7hn5YC0LksC2WW3xPvdQ+ejPw/FRH/3fpYChD+B1IAOpZtocz2+0IL22W5FxFvRsTXWx9LAcL/CApAp4QhUNp2Wb4rIn43Iv629bEc6SyE/9EUALqi+MzN+9vOdlk+GRH/ExF/0PpYjiT4C/EpgA5ZJIFStstyJyJ+PiL+qfGhlCD8CzIBAJjUdlm+MyJ+M4Q/L6AAdMbu32sAx3rylP8PRMQfRcQXWh9PAcJ/BW4BdETwMTPndx3bZTmJiJ+J83v9v9T4cEoQ/isxAQCYxJNv9fu1iPirEP7cQgHohN3Rs7we85n92w1b2y7LhyPi9yPizyPi040PpwThvzK3AAAGt12W742IP4mIX42IDzU+nBKEfwUKQAfsdoFDbZflE3H+oN8vRsRLjQ+nBOFfiQLQmPAHDvHkYb/XI+JP4/xz/jOs58K/Is8A0CX3i+fkfS3qMxHxxRD+HGiGk2ZYdv/Avp7s/H82Iv4szkvA6Bs5wd+IAgAwiCfh/9k4v+f/440PpwTh39DozXFYdv9k5TbAYZ6E/y+E8KcQBYDuCIg+nW42xYqr9/ggPxcRfxHCn0LcAmjA7p/e3XSOvui/CfR1bZflNM7v+c+weAj/TigAwAcOLacX/79di4ASvLvtsnwkIv4wIn669bEUIPw74hYAXbGTbKPUeF+wl/Xkvv+vR8RbrY+lAOHfGROAyiyQ1xP+9a1xPt42DXAN7OVH4/y7/Ucn/DtkAgCs4pqgP6l9HKPaLstLEfFvrY+jAOHfKQUAEir5RP9tP+eS7z7dbITBDp6M/r/d+jgK8H53TAGoyOjzesb/9TQ6Dz8aEd9s8YMHNUNwzvA7TM0zAHThcigpA+toVUCf/NxvNvnhA5rg/Bf8g1AA6M7VoJpgQWzO9GkME5zrwn8gCgDd2/cz5jwl+Mcxwfkt/AfjGYBKLMTH8xrux+s1DuFPCwpAJRNc4F2o9fT6yLxGY5lgbRD+g1IAKrEgU4PzjMqE/8AUAIYk6J7nNRnLdllG3/0L/8EpAAxL4J0z8h/P4MEfIfynoAAwtOzBl/33H5HwpxcKAAxK+I9H+NMTBYDhZQtCI/8xCX96owBUMsHFTwcE/3gmeNgvQvhPyTcBwiCE/3gEPz0zAWAKs4fj7L8fXRL+k1MAoHPCf0yD7/6FfwIKQEWDLwg0IPyBtSgA0CnhPy5lnxF4CBA6I/iBGkwAKrMz4CbCf3yucUahAEAnhP/4hD8jUQAasEhwlfAHavMMAOlcDtseypjwn0MP5xLsQwFoZLssFv5Kbnqdr/632ou4c2AOwp8RKQANKQHlvGgBPuS1rTkd8N7PQfgzKs8ANGbxWEeJcF0zoIU/0JoJAFMpHawX/17Joib856HAMzITgA5M8udCm7l47UbYsQv/ebhmGd3J17/2tRn+6MNJ6wMoSUj065hF3/s6jwThP3wunG42U+XCGkwAoALhP48E4U8SCkCH3BLo17GfLADohQLQsYsioAz0ZZ9AF/5zcS0yE58CGMTVheeGL7C5f7rZvF/nqLiJ8J+L8Gc2CsCgbliM3t8uy8npZjP8Qzw9O91sbgwE4Q/0zi2AOQn/hoT/fOz+mZECAAUJ//n0Hv6nm43zjoMoAJPqfdGCEfR8HQl+jqUAwIGuLr4W47n0HP5QgocAoQDhTw3OM0oyAZiYHUwdFuX5jHbtjHa89EEBmJyFYV3Cfz49XjPu97MGBSCBHhc0ANpSAJJQAuB2vV0ndv6sSQEAiP7CH9bmUwCJXCxwdhTwrN7C3zVKDQpAQooAPNVT+LsmqcktgMR6WvgAqEsBSE4JILNezv9jHvbr5XdgPAoAkJLgJDvPABDbZXHvkVR6CH/XHK2ZABARfSyIUINzHc6ZAABp9BD+dv70wgSAD/SwOAJQhwLAM5QAZtX63Pa1vvRGAeA5rRdKKK3lOS346ZUCwAspAczCuQwvpgBwLQsno7Pzh+spANxICQCYk48BAlNqVV7t+hmFCQC3MgUAmI8JADCd2qXVrp8RmQCwE1MARlHzXPWgHyNTAAAgIQWAnZkC0DvnKOxOAWAvFlh65dyE/XgIkL1tl8V9T7pSK/yd98zEBCCZUguY3Ra9WPtcvHjQT/gzGwUgoVKLmRJAa9nPwey/P8dxCyCJtXYvFwuQ3RG11dj5w8wUgInVXMA8F0ANdrxQjgKQ2NXAPnZxPXQasF2Wk4i4d7rZvH/UATAtwQ/lKQA3sKM9zIsW68uv5UXgR8RHIuJjEfHpiPjWdln+7nSzOat0mHTKH/GBOhQAPnCxAK6xAF/8m2dnZ791cnLyckR8f0R8PCJ+OCJejYh/jIi/j4hvF//hDMNOH+pRAKjq5OTkC48fP37nzp07DyLipYi4GxFnEfGpiPi+iPhGy+OjnRbhb9dPZj4GyHPW/szznTt3Xn348OH9iLgf5+fg3Yj4oYj4zGo/lK7Z+UN9CgBNPHjw4ME77777X2dnH9zyfzUi3tguy/2Gh0UDrXb+dv9kpwBwrbUXyVdfeeWjy7L8++PHjyMiviMiPhsRP7baDyQ9wQ9PKQA09frrr//IP3/5y1959OjR3Yj4ZET8ynZZPJuSwHZZjP6hIQWAW629a/rcG2/8xNtvv/2NiHg5It6MiJ9c7YfRBcEP7SkAdOG11177+KNHj07i/DsBPr9dlldaHxPrEP7QB6NWdnbly3yK//t37969FxGPI+KXI+JftsvyxdPN5n+L/yBScK8fbmYCQG/uRMQPRsRvRMRb22V50Ph4KKjG7t+DfrAbBYCDrLzI3o+I04j47Yh4c7ssH1rrB1GP0T/0xS0AjrLi1wffj/OvBf69iHhluyxfOt1s3i39Q6ij1s4f2J0CQM9eioj3I+J3IuIT22X564j419PNxt8LADiSAkARK08CHsf5MwE/FRFf2i7LP0TEf55uNo9L/zDKWnvnb9cPh1MAGMGdOP+DQZ+L848Jfiwi/jgivtXyoGhH8MPxFIAbbJfFQrOnFT8qeBLnJeB7IuLDEfF/Jf9xyvPQH/RNAWA1K9wWOImIdyLiP+L82QA6tVb4K+RQjgLAaF6NiLfifBpAh0qHv9CHdSgArK7UJOBSEPzNcUfEWoz9YRy+CIhq7OTmtkb4O2dgPQoAcDQ7fxiPAgAcRfjDmBQA4GDCH8blIcBb+C6Ask43G6ExiRLvo2sL2jEBAICEFACq8/fax2eKA+NTAHZgsYNz22VxPcAkFAAASEgBoBm3AcZi598X7wfH8ikA4FYFv8YZ6IQJAE0Jhv7ZacKcFADgWsIf5qUAAC8k/GFungGgOd8O2B/f8gfzMwEAnqGMQQ4KAF3w7YB9EP6QhwIARITwh2wUgB1ZHJmZ8xvyUQDoilsB9Ql/yEkBgMSEP+SlANAlU4D1Cf8x+YuMlKIAQEICBFAA6JbnAdYh/IEIBWAvFk5GVnN0rLhB/3wVMN0TJgDlmQBAAqZXwFUKAExO+AMvogDAxIQ/cB0FYE8WVEbQ8rPintmAMSgAMBklFdiFAgATEf7ArnwMECbROvyN/tfX+j1mLiYAMAHBAOzLBAAG1kvw2/3DeEwAYFC9hD8wJhMAGIzgB0owAYCB9Bj+xv8wJgUABtFj+APjcgsABtBj+Nv5w9hMAKBzPYY/9TkPKM0EADrV84Jv9w/jMwGADvUc/sAcFADojPAHanALADoxQvAb/cM8TACgAyOEPzAXEwDogJ01UJsJAAAkpAAAdM4tItagAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACTkjwExLF+PWp4/SgR5KACA4IeE3AIAgIRMACAxO3/ISwFgWMeEl+cHgOwUAEjIzh/wDAAAJGQCAEnY9QOXKQCkJAyB7NwCAICEFAAASEgBAICEFAAASEgBAICEFAAASEgBAICEFAAASEgBAICEFAAASEgBAICEFAAASEgBAICEFAAASEgBAICEFAAASEgBAICEFAAASEgBAICEFAAASEgBAICEFAAASEgBAOjYdllaHwKTUgAAICEFAAASutf6AABqMU6HpxQAYEjCHI6jAADdEe6wPgUAqEKoQ18UAKAIAQ9jUQCAZwhyyEEBgASEOnCVAgADEujAsRQAaECAA60pAHANIQ3MTAFgWgIc4HoKAMMQ6ADlKAB0Q8AD1KMAsCqhDtAnfw4YABIyAeAodvgAY1IAuJZwB5iXApCYgAfISwGYgCAHYF8KwAAEPAClKQCNCXcAWlAAKhL2APRCAViZ0AegRwrAnk43m2v/m7AHYBQKwJGEPgAjUgD2JPABmIG/BQAACSkAAJCQAgAACSkAAJCQAgAACSkAAJCQAgAACSkAAJCQAgAACSkAAJCQAgAACSkAAJCQAgAACSkAAJCQAgAACSkAAJCQAgAACSkAAJCQAgAACSkAAJCQAgAACd1rfQCFnLU+AAAYiQkAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAABAQgoAACSkAAAwlYcPH561PoYRKAAATOO999575ytf/epftj6OEZycnSlKAJCNCQAAJKQAAEBCCgAAJKQAAEBCCgAAJKQAAEBCCgAAJKQAAEBCCgAAJKQAAEBCCgAAJKQAAEBCCgAAJKQAAEBCCgAAJKQAAEBCCgAAJKQAAEBCCgAAJKQAAEBCCgAAJKQAAEBCCgAAJKQAAEBCCgAAJKQAAEBC/w+cQjvNwRAEYgAAAABJRU5ErkJggg==';class PdfCheckElement extends PdfElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(pdf,dom,model){super(pdf,dom);this._model=model;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _build(pdf,dom){// 자식이 없다.
    return;}_doWrite(pdf,dom){const r=pdf.getBounds(dom);const chk=this._model.getChecked(this._model.checked);const img=chk==='0'?_unchecked_:chk==='-1'?_empty_:_checked_;pdf.image(dom,img,r);}}////////////////////////////////////////////////////////////////////////////////
    class PdfDBoxElement extends PdfElement{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(pdf,dom){super(pdf,dom);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _build(pdf,dom){// 자식이 없다.
    return;}_doWrite(pdf,dom){const m=pdf.getModel(dom);const r=pdf.getBounds(dom);if(m.reversed){pdf.dline(dom,r.x+r.width,r.y,r.x,r.y+r.height);}else {pdf.dline(dom,r.x,r.y,r.x+r.width,r.y+r.height);}}}////////////////////////////////////////////////////////////////////////////////
    class PdfImageElement extends PdfElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(pdf,dom,model){super(pdf,dom);this._model=model;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _build(pdf,dom){const css=getComputedStyle(dom);const url=Utils.getImageUrl(css);if(!url)return;if(url.startsWith('data:image')){this._data=url;}else if(url.startsWith('http')){pdf.addImage(this._url=url,css.opacity);}return;}_doWrite(pdf,dom){const data=this._data||pdf.getImage(this._url);const r=pdf.getBounds(dom);const imagePosition=this._model.imagePosition;switch(imagePosition){case'top':case'bottom':r.valign=imagePosition;break;case'left':case'right':r.align=imagePosition;break;case'center':r.valign=imagePosition;r.align=imagePosition;break;}const imageFit=this._model.imageFit;if(imageFit==='cover'){r.cover=[r.width,r.height];}else if(imageFit==='contain'){r.fit=[r.width,r.height];}pdf.save();pdf.clip(dom);pdf.image(dom,data,r);pdf.restore();}}////////////////////////////////////////////////////////////////////////////////
    class PdfQrcodeElement extends PdfElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(pdf,dom){super(pdf,dom);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _build(pdf,dom){const child=dom.firstChild;if(child instanceof HTMLImageElement){this._data=child.src;}return;}_doWrite(pdf,dom){const data=this._data||pdf.getImage(this._url);if(data){const r=pdf.getBounds(dom);pdf.image(dom,data,r);}}}////////////////////////////////////////////////////////////////////////////////
    class PdfSvgElement extends PdfElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(pdf,dom,svg){let scaled=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;super(pdf,dom||pdf.getParent(svg));this._svg=svg;this._scaled=scaled;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _build(pdf,dom){// 자식이 없다.
    return;}_doWrite(pdf,dom){pdf.save();const r=pdf.getBounds(dom);if(this._scaled){const r1=dom.getBoundingClientRect();const r2=this._svg.getBBox();const sw=r1.width/r2.width;const sh=r1.height/r2.height;const scale=Math.min(sw,sh);const dx=(r1.width-r2.width*scale)/2*pxpt;const dy=(r1.height-r2.height*scale)/2*pxpt;// dom 가운데로 svg 정렬.
    pdf.translate(r.x+dx,r.y+dy);pdf.scale(scale,scale);}else {pdf.translate(r.x,r.y);}this.$_write(pdf,this._svg);pdf.restore();}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_write(pdf,elt){const nodes=elt.children;for(let i=0;i<nodes.length;i++){const node=nodes[i];if(node instanceof SVGGraphicsElement){pdf.save();const v=node.transform.baseVal;//SVGTransformList;
    const t=v.length>0?v.getItem(0):null;t&&pdf.transformSvg(t.matrix);if(node.tagName==='g'){this.$_write(pdf,node);}else if(node instanceof SVGTextElement){this.$_text(pdf,node);}else if(node instanceof SVGPathElement){this.$_path(pdf,node);}else if(node instanceof SVGRectElement){this.$_rect(pdf,node);}else if(node instanceof SVGLineElement){this.$_line(pdf,node);}else if(node instanceof SVGPolygonElement){this.$_polygon(pdf,node);}else if(node instanceof SVGEllipseElement){this.$_ellipse(pdf,node);}pdf.restore();}}}$_rotation(tr){const values=tr.split('(')[1].split(')')[0].split(',');const a=+values[0];const b=+values[1];const angle=Math.round(Math.atan2(b,a)*(180/Math.PI));return angle;}$_text(pdf,node){const hasHighchartsTextOutlineNode=node.getElementsByClassName('highcharts-text-outline').length>0;const nodeText=hasHighchartsTextOutlineNode?node.children[0].textContent:node.textContent;if(nodeText){const css=getComputedStyle(node);const r=pdf.getBox(node);const opts={};const rot=css.transform&&css.transform.startsWith('matrix(')&&this.$_rotation(css.transform)||0;pdf.text(css,r,nodeText,rot,opts);}}$_path(pdf,node){const d=node.getAttribute('d');if(d){const css=getComputedStyle(node);pdf.scale(pxpt,pxpt);pdf.path(css,d);}}$_rect(pdf,node){const r=pdf.getBox(node);const css=getComputedStyle(node);pdf.rect(css,r,true);}$_line(pdf,node){}$_polygon(pdf,node){const css=getComputedStyle(node);const list=node.points;const pts=[];pdf.scale(pxpt,pxpt);for(let i=0;i<list.length;i++){const p=list.getItem(i);pts.push([p.x,p.y]);}pdf.polygon(css,pts);}$_ellipse(pdf,node){const r=pdf.getBox(node);const css=getComputedStyle(node);pdf.ellipse(css,r);}}////////////////////////////////////////////////////////////////////////////////
    class PdfTableCellElement extends PdfBoundedElement{//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _needClip(){return true;}}class PdfTableElement extends PdfElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(pdf,dom){let renderCell=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;super(pdf,dom);this._renderCell=renderCell;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doWrite(pdf,dom){const r=pdf.getBounds(dom);pdf.getModel(dom);const css=getComputedStyle(dom);pdf.border(css,r);const rows=dom.rows;for(let i=0;i<rows.length;i++){this.$_writeRow(pdf,rows[i]);}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_writeRow(pdf,dom){const r=pdf.getBounds(dom);const cells=dom.cells;const css=getComputedStyle(dom);pdf.rect(dom,r);pdf.border(css,r);for(let i=0;i<cells.length;i++){this.$_writeCell(pdf,cells[i]);}}$_writeCell(pdf,dom){const css=getComputedStyle(dom);if(css.display!=='none'){const r=pdf.getBounds(dom);pdf.rect(dom,r);pdf.border(css,r);if(this._renderCell){const s=dom.textContent;if(s){pdf.text(css,r,s,0);}}}}}////////////////////////////////////////////////////////////////////////////////
    /**
     * 리포트 출력을 pdf로 내보내기 한다.
     */class PdfExporter extends Base{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){super();this._elementCreator=(pdf,item,dom)=>{let elt;if(item instanceof HtmlItem){elt=new PdfHtmlElement(pdf,dom.firstChild);}else if(item instanceof ImageItem){dom.style.opacity=item.styles.opcaity;elt=new PdfImageElement(pdf,dom,item);}else if(item instanceof SvgItem){const content=dom[T_SVG];dom.innerHTML=content.substring(content.indexOf('<svg'));this._svgs.push(dom);const svg=dom.firstElementChild;svg.style.visibility='hidden';elt=new PdfSvgElement(pdf,dom,svg,true);}else if(item instanceof QrcodeItem){elt=new PdfQrcodeElement(pdf,dom);}else if(dom instanceof HTMLSpanElement){if(item instanceof CheckItem){elt=new PdfCheckElement(pdf,dom,item);}else if(item instanceof BarItem){elt=new PdfBarElement(pdf,dom,item);}else if(item instanceof DiagonalBoxContainer){elt=new PdfDBoxElement(pdf,dom);}else {elt=new PdfElement(pdf,dom);}}else if(dom instanceof HTMLTableElement){elt=new PdfTableElement(pdf,dom,item instanceof CrosstabBand);}else if(dom instanceof HTMLTableCellElement){elt=new PdfTableCellElement(pdf,dom);}else if(dom instanceof SVGSVGElement){elt=new PdfSvgElement(pdf,null,dom,item instanceof DataMatrixItem);}else if(dom instanceof HTMLCanvasElement){elt=new PdfCanvasElement(pdf,dom);}else if(dom instanceof HTMLElement){elt=new PdfElement(pdf,dom);}else if(dom instanceof Text){elt=new PdfTextElement(pdf,dom);}return elt;};}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    // export2(report: Report, pages: PrintPage[], fonts: PdfFont[]): void {
    //     const doc = new jsPDF({
    //         unit: 'px',
    //         format: 'a4',
    //         hotfixes: ["px_scaling"]
    //     } as any);
    //     const model = new PdfModel(doc, report, pages, fonts);
    //     if (fonts) {
    //         for (let f of fonts) {
    //             f.style = f.style || 'normal';
    //             f.weight = f.weight || 'normal';
    //             doc.addFileToVFS(f.file, f.content);
    //             doc.addFont(f.file, f.name, f.style, f.weight);
    //         }
    //     }
    //     console.log(doc.getFontList());
    //     model.write(doc, pages[0].page.getBoundingClientRect().x, pages[0].page.getBoundingClientRect().y);
    //     doc.save("a4.pdf");
    // }
    _base64ToArrayBuffer(base64){var binary_string=window.atob(base64);var len=binary_string.length;var bytes=new Uint8Array(len);for(var i=0;i<len;i++){bytes[i]=binary_string.charCodeAt(i);}return bytes.buffer;}export(report,pages,fonts,stream,callback){const handler=()=>{if(model.canExport()||model.prepare(trials)){this.$_export(report,model,fonts,stream,callback);}else {setTimeout(()=>{handler();},300);}};this._svgs=[];const model=new PdfModel(report,pages,this._elementCreator);const trials=5;handler();}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_export(report,model,fonts,stream,callback){const doc=new window['PDFDocument']({size:report.paper.size,layout:report.paper.orientation,// TODO: paper.marign 값 가져와 inch로 변환 후 72로 나눈 값으로 margins의 top, left, bottom, right에 넣어주기
    margin:0});const str=doc.pipe(stream||new window['blobStream']());let fontNormal;let fontBold;if(fonts&&fonts.length>0){for(let f of fonts){if(f.content){doc.registerFont(f.name,this._base64ToArrayBuffer(f.content));}}fontNormal=fonts[0].name;fontBold=fonts[1].name||fontNormal;}else {throw new Error('Pdf 출력용 폰트가 설정돼야 합니다.');}model.write(doc,fontNormal,fontBold);for(let elt of this._svgs){elt.removeChild(elt.firstElementChild);}doc.end();if(stream){callback===null||callback===void 0?void 0:callback(stream);}else {str.on('finish',function(){const blob=str.toBlob('application/pdf');let a=document.createElement("a");let url=window.URL.createObjectURL(blob);document.body.appendChild(a);a.href=url;a.download=(report.info.name||'rrpt')+'.pdf';a.style.position='fixed';a.target='_blank';a.click();document.body.removeChild(a);});}}}////////////////////////////////////////////////////////////////////////////////
    const toHwpColor=function(color){return ((color&0xff)<<16)+(color&0xff00)+((color&0xff0000)>>16);};const toHwpAlpha=function(alpha){return (1-alpha)*0xff>>0;};/**
     * 선 종류 1.
     */var HWPLineType1;(function(HWPLineType1){HWPLineType1["Solid"]="Solid";HWPLineType1["Dash"]="Dash";HWPLineType1["Dot"]="Dot";HWPLineType1["DashDot"]="DashDot";HWPLineType1["DashDotDot"]="DashDotDot";HWPLineType1["LongDash"]="LongDash";HWPLineType1["Circle"]="Circle";HWPLineType1["DoubleSlim"]="DoubleSlim";HWPLineType1["SlimThick"]="SlimThick";HWPLineType1["ThickSlim"]="ThickSlim";HWPLineType1["SlimThickSlim"]="SlimThickSlim";HWPLineType1["None"]="None";// 선 없음
    })(HWPLineType1||(HWPLineType1={}));const toHwpLineType=function(css){switch(css){case'dot':return HWPLineType1.Dot;case'dashed':return HWPLineType1.Dash;default:return HWPLineType1.Solid;}};/**
     * 선 종류 2.
     */var HWPLineType2;(function(HWPLineType2){HWPLineType2["Solid"]="Solid";HWPLineType2["Dash"]="Dash";HWPLineType2["Dot"]="Dot";HWPLineType2["DashDot"]="DashDot";HWPLineType2["DashDotDot"]="DashDotDot";HWPLineType2["LongDash"]="LongDash";HWPLineType2["Circle"]="Circle";HWPLineType2["DoubleSlim"]="DoubleSlim";HWPLineType2["SlimThick"]="SlimThick";HWPLineType2["ThickSlim"]="ThickSlim";HWPLineType2["SlimThickSlim"]="SlimThickSlim";// 가는 선 + 굵은 선 + 가는 선 3중선
    })(HWPLineType2||(HWPLineType2={}));/**
     * 선 종류 3.
     */var HWPLineType3;(function(HWPLineType3){HWPLineType3["Solid"]="Solid";HWPLineType3["Dot"]="Dot";HWPLineType3["Thick"]="Thick";HWPLineType3["Dash"]="Dash";HWPLineType3["DashDot"]="DashDot";HWPLineType3["DashDotDot"]="DashDotDot";// -..-..-..
    })(HWPLineType3||(HWPLineType3={}));/**
     * 번호 모양 1.
     */var HWPNumberType1;(function(HWPNumberType1){HWPNumberType1["Digit"]="Digit";HWPNumberType1["CircledDigit"]="CircledDigit";HWPNumberType1["RomanCapital"]="RomanCapital";HWPNumberType1["RomanSmall"]="RomanSmall";HWPNumberType1["LatinCapital"]="LatinCapital";HWPNumberType1["LatinSmall"]="LatinSmall";HWPNumberType1["CircledLatinCapital"]="CircledLatinCapital";HWPNumberType1["CircledLatinSmall"]="CircledLatinSmall";HWPNumberType1["HangulSyllable"]="HangulSyllable";HWPNumberType1["CircledHangulSyllable"]="CircledHangulSyllable";HWPNumberType1["HangulJamo"]="HangulJamo";HWPNumberType1["CircledHangulJamo"]="CircledHangulJamo";HWPNumberType1["HangulPhonetic"]="HangulPhonetic";HWPNumberType1["Ideograph"]="Ideograph";HWPNumberType1["CircledIdeograph"]="CircledIdeograph";// 동그라미 쳐진 一, 二, 三
    })(HWPNumberType1||(HWPNumberType1={}));/**
     * 번호 모양 2.
     */var HWPNumberType2;(function(HWPNumberType2){HWPNumberType2["Digit"]="Digit";HWPNumberType2["CircledDigit"]="CircledDigit";HWPNumberType2["RomanCapital"]="RomanCapital";HWPNumberType2["RomanSmall"]="RomanSmall";HWPNumberType2["LatinCapital"]="LatinCapital";HWPNumberType2["LatinSmall"]="LatinSmall";HWPNumberType2["CircledLatinCapital"]="CircledLatinCapital";HWPNumberType2["CircledLatinSmall"]="CircledLatinSmall";HWPNumberType2["HangulSyllable"]="HangulSyllable";HWPNumberType2["CircledHangulSyllable"]="CircledHangulSyllable";HWPNumberType2["HangulJamo"]="HangulJamo";HWPNumberType2["CircledHangulJamo"]="CircledHangulJamo";HWPNumberType2["HangulPhonetic"]="HangulPhonetic";HWPNumberType2["Ideograph"]="Ideograph";HWPNumberType2["CircledIdeograph"]="CircledIdeograph";HWPNumberType2["DecagonCircle"]="DecagonCircle";HWPNumberType2["DecagonCircleHanja"]="DecagonCircleHanja";HWPNumberType2["Symbol"]="Symbol";HWPNumberType2["UserChar"]="UserChar";// 사용자 지정 문자 반복
    })(HWPNumberType2||(HWPNumberType2={}));/**
     * 정렬 방식 1.
     */var HWPAlignmentType1;(function(HWPAlignmentType1){HWPAlignmentType1["Justify"]="Justify";HWPAlignmentType1["Left"]="Left";HWPAlignmentType1["Right"]="Right";HWPAlignmentType1["Center"]="Center";HWPAlignmentType1["Distribute"]="Distribute";HWPAlignmentType1["DistributeSpace"]="DistributeSpace";// 나눔 정렬(공백에만 배분)
    })(HWPAlignmentType1||(HWPAlignmentType1={}));/**
     * 정렬 방식 2.
     */var HWPAlignmentType2;(function(HWPAlignmentType2){HWPAlignmentType2["Left"]="Left";HWPAlignmentType2["Right"]="Right";HWPAlignmentType2["Center"]="Center";})(HWPAlignmentType2||(HWPAlignmentType2={}));/**
     * 화살표 시작/끝 모양.
     */var HWPArrowType;(function(HWPArrowType){HWPArrowType["Normal"]="Normal";HWPArrowType["Arrow"]="Arrow";HWPArrowType["Spear"]="Spear";HWPArrowType["ConcaveArrow"]="ConcaveArrow";HWPArrowType["EmptyDiamond"]="EmptyDiamond";HWPArrowType["EmptyCircle"]="EmptyCircle";HWPArrowType["EmptyBox"]="EmptyBox";HWPArrowType["FilledDiamond"]="FilledDiamond";HWPArrowType["FilledCircle"]="FilledCircle";HWPArrowType["FilledBox"]="FilledBox";// 속이 채워진 사각 모양
    })(HWPArrowType||(HWPArrowType={}));/**
     * 화살표 시작/끝 크기.
     */var HWPArrowSize;(function(HWPArrowSize){HWPArrowSize["SmallSmall"]="SmallSmall";HWPArrowSize["SmallMedium"]="SmallMedium";HWPArrowSize["SmallLarge"]="SmallLarge";HWPArrowSize["MediumSmall"]="MediumSmall";HWPArrowSize["MediumMedium"]="MediumMedium";HWPArrowSize["MediumLarge"]="MediumLarge";HWPArrowSize["LargeSmall"]="LargeSmall";HWPArrowSize["LargeMedium"]="LargeMedium";HWPArrowSize["LargeLarge"]="LargeLarge";// 큰-큰
    })(HWPArrowSize||(HWPArrowSize={}));/**
     * 언어 종류.
     */var HWPLangType;(function(HWPLangType){HWPLangType["Hangul"]="Hangul";HWPLangType["Latin"]="Latin";HWPLangType["Hanja"]="Hanja";HWPLangType["Japanese"]="Japanese";HWPLangType["Other"]="Other";HWPLangType["Symbol"]="Symbol";HWPLangType["User"]="User";// 사용자
    })(HWPLangType||(HWPLangType={}));/**
     * 무늬 종류.
     */var HWPHatchStyle;(function(HWPHatchStyle){HWPHatchStyle["Horizontal"]="Horizontal";HWPHatchStyle["Vertical"]="Vertical";HWPHatchStyle["BackSlash"]="BackSlash";HWPHatchStyle["Slash"]="Slash";HWPHatchStyle["Cross"]="Cross";HWPHatchStyle["CrossDiagonal"]="CrossDiagonal";// xxxxx
    })(HWPHatchStyle||(HWPHatchStyle={}));/**
     * 채우기 유형.
     */var HWPInfillMode;(function(HWPInfillMode){HWPInfillMode["Tile"]="Tile";HWPInfillMode["TileHorzTop"]="TileHorzTop";HWPInfillMode["TileHorzBottom"]="TileHorzBottom";HWPInfillMode["TileVertLeft"]="TileVertLeft";HWPInfillMode["TileVertRight"]="TileVertRight";HWPInfillMode["Total"]="Total";HWPInfillMode["Center"]="Center";HWPInfillMode["CenterTop"]="CenterTop";HWPInfillMode["CenterBottom"]="CenterBottom";HWPInfillMode["LeftCenter"]="LeftCenter";HWPInfillMode["LeftTop"]="LeftTop";HWPInfillMode["LeftBottom"]="LeftBottom";HWPInfillMode["RightCenter"]="RightCenter";HWPInfillMode["RightTop"]="RightTop";HWPInfillMode["RightBottom"]="RightBottom";HWPInfillMode["Zoom"]="Zoom";// 확대
    })(HWPInfillMode||(HWPInfillMode={}));/**
     * Line Wrap.
     */var HWPLineWrapType;(function(HWPLineWrapType){HWPLineWrapType["Break"]="Break";HWPLineWrapType["Squeeze"]="Squeeze";HWPLineWrapType["Keep"]="Keep";// 내용에 따라 폭이 늘어남
    })(HWPLineWrapType||(HWPLineWrapType={}));/**
     * Text Wrap.
     */var HWPTextWrapType;(function(HWPTextWrapType){HWPTextWrapType["Square"]="Square";HWPTextWrapType["Tight"]="Tight";HWPTextWrapType["Through"]="Through";HWPTextWrapType["TopAndBottom"]="TopAndBottom";HWPTextWrapType["BehindText"]="BehindText";HWPTextWrapType["InFrontOfText"]="InFrontOfText";// 글과 겹치게 하여 글 앞으로
    })(HWPTextWrapType||(HWPTextWrapType={}));/**
     * 필드의 종류
     */var HWPFieldType;(function(HWPFieldType){HWPFieldType["Clickhere"]="Clickhere";HWPFieldType["Hyperlink"]="Hyperlink";HWPFieldType["Bookmark"]="Bookmark";HWPFieldType["Formula"]="Formula";HWPFieldType["Summery"]="Summery";HWPFieldType["UserInfo"]="UserInfo";HWPFieldType["Date"]="Date";HWPFieldType["DocDate"]="DocDate";HWPFieldType["Path"]="Path";HWPFieldType["Crossref"]="Crossref";HWPFieldType["Mailmerge"]="Mailmerge";HWPFieldType["Memo"]="Memo";HWPFieldType["RevisionChange"]="RevisionChange";HWPFieldType["RevisionSign"]="RevisionSign";HWPFieldType["RevisionDelete"]="RevisionDelete";HWPFieldType["RevisionAttach"]="RevisionAttach";HWPFieldType["RevisionClipping"]="RevisionClipping";HWPFieldType["RevisionSawtooth"]="RevisionSawtooth";HWPFieldType["RevisionThinking"]="RevisionThinking";HWPFieldType["RevisionPraise"]="RevisionPraise";HWPFieldType["RevisionLine"]="RevisionLine";HWPFieldType["RevisionSimpleChange"]="RevisionSimpleChange";HWPFieldType["RevisionHyperlink"]="RevisionHyperlink";HWPFieldType["RevisionLineAttach"]="RevisionLineAttach";HWPFieldType["RevisionLineLink"]="RevisionLineLink";HWPFieldType["RevisionLineTransfer"]="RevisionLineTransfer";HWPFieldType["RevisionRightmove"]="RevisionRightmove";HWPFieldType["RevisionLeftmove"]="RevisionLeftmove";HWPFieldType["RevisionTransfer"]="RevisionTransfer";HWPFieldType["RevisionSplit"]="RevisionSplit";})(HWPFieldType||(HWPFieldType={}));const _TAG_='TAG';const _ORDERS_='ORDERS';const _A_='A'.charCodeAt(0);const _Z_='Z'.charCodeAt(0);const UNDERLINE='_'.charCodeAt(0);const DOLLAR='$'.charCodeAt(0);/**
     * HWP 구성 요소.
     */class HWPElement{//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(attrs){if(attrs){for(let p in attrs){if(p in this){const c=p.charCodeAt(0);if(c>=_A_&&c<=_Z_){this[p]=attrs[p];}}}}}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static equals(elt1,elt2){if(elt1&&elt2&&elt1.constructor===elt2.constructor){for(let p in elt1){const c=p.charCodeAt(0);if(c>=_A_&&c<=_Z_){if(elt1[p]!==elt2[p]){return false;}}}for(let p in elt1){const child=elt1[p];if(child instanceof HWPElement){if(!HWPElement.equals(child,elt2[p])){return false;}}}for(let p in elt2){const child=elt2[p];if(child instanceof HWPElement&&!(elt1[p]instanceof HWPElement)){return false;}}return true;}return false;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get tag(){return this.constructor[_TAG_];}get text(){return;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getTagOrders(){return;}getContent(){let elts=[];const attrs={};for(let p in this){const elt=this[p];if(elt instanceof HWPElement&&p.charCodeAt(0)!==DOLLAR){elts.push(elt);}else {const c=p.charCodeAt(0);if(c>=_A_&&c<=_Z_){attrs[p]=elt;}else if(Utils.isArray(elt)&&p.charCodeAt(0)==UNDERLINE){for(let elt2 of elt){elts.push(elt2);}}}}// element 순서가 중요하다!
    const orders=this.constructor[_ORDERS_];if(orders){elts=elts.sort((e1,e2)=>{return (orders[e2.tag]||0)-(orders[e1.tag]||0);});}return {elements:elts,attrs};}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPElement.TAG='INVALID';class HWPListElement extends HWPElement{}/**
     * /body/.../shapeobject
     * 개체 속성.
     */class HWPShapeObject extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._size=new HWPSize();this._position=new HWPPosition();this._outsideMargin=new HWPOutsideMargin();this.InstId=HWPShapeObject.Id++;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    /**
         * hwpunit 단위로 지정한다.
         */setSize(width,height){this._size.Width=width;this._size.Height=height;return this;}setPosition(x,y,treatAsChar){this._position.HorzOffset=x;this._position.VertOffset=y;this._position.TreatAsChar=treatAsChar;return this;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPShapeObject.TAG='SHAPEOBJECT';//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    HWPShapeObject.Id=0;/**
     * /body/.../shapeobject/size
     * 크기.
     */class HWPSize extends HWPElement{constructor(){super(...arguments);this.WidthRelTo='Absolute';this.HeightRelTo='Absolute';/**
             * @default false
             */this.Protect=false;//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    }}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPSize.TAG='SIZE';/**
     * /body/.../shapeobject/position
     * 위치.
     */class HWPPosition extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.TreatAsChar=false;this.VertRelTo='Paper';this.HorzRelTo='Paper';this.VertAlign='Top';this.HorzAlign='Left';this.VertOffset=0;this.HorzOffset=0;this.FlowWidthText=true;this.AllowOverlap=true;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPPosition.TAG='POSITION';/**
     * /body/.../polygon.../point
     * 다각형 개체를 이루는 포인트.
     */class HWPPoint extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPPoint.TAG='POINT';/**
     * /body/.../shapeobject/outsidemargin
     * 바깥 여백.
     */class HWPOutsideMargin extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Left=0;this.Right=0;this.Top=0;this.Bottom=0;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPOutsideMargin.TAG='OUTSIDEMARGIN';/**
     * /body/.../[table|picture]/insidemargin
     * 바깥 여백.
     */class HWPInsideMargin extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Left=0;this.Right=0;this.Top=0;this.Bottom=0;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPInsideMargin.TAG='INSIDEMARGIN';/**
     * /body/.../shapeobject/caption
     * 캡션.
     */class HWPCaption extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Side='Left';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPCaption.TAG='CAPTION';/**
     * /body/.../shapeobject/shapecomment
     * 캡션.
     */class HWPShapeComment extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPShapeComment.TAG='SHAPECOMMENT';/**
     * /.../shadow
     * 글자 속성 : 그림자.
     */class HWPShadow extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPShadow.TAG='SHADOW';/**
     * /bode/.../secdef|item|coldef|shapecomponent|formobject/parameterset
     * Parameter Set. 글 내부에서 모듈 간 데이터 전달을 위해 사용하는 데이터 구조로 정의되었으나,
     * 컨트롤 개체에 따라 특정 데이터를 Parameter Set 형태로 저장하는 경우가 있다. 극히 드물게 사용된다.
     */class HWPParameterSet extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPParameterSet.TAG='PARAMETERSET';/**
     * /head/mappingtable/borderfillist/borderfill/fillbrush/imagebrush/image
     * 그림 정보.
     */class HWPImage extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Bright=0;this.Contrast=0;this.Effect='RealPic';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPImage.TAG='IMAGE';////////////////////////////////////////////////////////////////////////////////
    /**
     * /head/mappingtable/borderfillist/borderfill/fillbrush/windowbrush
     * 면 채우기.
     */class WindowBrush extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    WindowBrush.TAG='WINDOWBRUSH';/**
     * /head/mappingtable/borderfillist/borderfill/fillbrush/gradient
     * 그라데이션 효과.
     */class Gradiation extends HWPElement{constructor(){super(...arguments);/** 그러데이션의 기울임(시작각) */this.Angle=90;/** 그러데이션의 가로중심(중심 X 좌표) */this.CenterX=0;/** 그러데이션의 세로중심(중심 Y 좌표) */this.CenterY=0;/** 그러데이션 번짐 정도 (0 ~ 100) */this.Step=50;/** 그러데이션의 색수. 워디안/글2002/SE에서는 항상 2이다. */this.ColorNum=2;/** 그러데이션 번짐 정도의 중심 (0 ~ 100) */this.StepCenter=50;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Gradiation.TAG='GRADIATION';/**
     * /head/mappingtable/borderfillist/borderfill/fillbrush/gradient/color
     * 그라데이션 색.
     */class Color extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Color.TAG='COLOR';/**
     * /head/mappingtable/borderfillist/borderfill/fillbrush/imagebrush
     * 그림으로 채우기.
     */class ImageBrush extends HWPElement{constructor(){super(...arguments);this.Mode=HWPInfillMode.Tile;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ImageBrush.TAG='IMAGEBRUSH';/**
     * /head/mappingtable/borderfillist/borderfill/fillbrush
     * 채우기 정보.
     */class HWPFillBrush extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._windowBrush=new WindowBrush();this._color=0xffffff;this._alpha=0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    /**
         * @param color 0xRRGGBB 로 넘어온다.
         * @param alpha 0 ~ 1 사이 값으로 넘어온다.
         * @returns
         */setColor(color,alpha){this._windowBrush.FaceColor=toHwpColor(this._color=color);this._windowBrush.Alpha=toHwpAlpha(this._alpha=alpha);return this;}sameWithColor(color,alpha){return color===this._color&&alpha===this._alpha;}}//-------------------------------------------------------------------------
    // consts   
    //-------------------------------------------------------------------------
    HWPFillBrush.TAG='FILLBRUSH';/**
     * /body/section/paragraph/text/drawingobject|picture/shapecomponent/rotationinfo
     * 개체 회전.
     */class RotationInfo extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    RotationInfo.TAG='ROTATIONINFO';/**
     * Translation Matrix, Scaling Matrix, Rotation Matrix.
     * E7 ~ E9는 (0,0,1)로 일정하므로 생략.
     */class Matrix extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.E1=1.0;this.E2=0;this.E3=0;this.E4=0;this.E5=1.0;this.E6=0;}}/**
     * /body/section/paragraph/text/drawingobject|picture/shapecomponent/renderinginfo/transmatrix
     */class TransMatrix extends Matrix{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    TransMatrix.TAG='TRANSMATRIX';/**
     * /body/section/paragraph/text/drawingobject|picture/shapecomponent/renderinginfo/scamatrix
     */class ScaMatrix extends Matrix{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ScaMatrix.TAG='SCAMATRIX';/**
     * /body/section/paragraph/text/drawingobject|picture/shapecomponent/renderinginfo/rotmatrix
     */class RotMatrix extends Matrix{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    RotMatrix.TAG='ROTMATRIX';/**
     * /body/section/paragraph/text/drawingobject|picture/shapecomponent/renderinginfo
     * 렌더링 정보.
     */class RenderingInfo extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._translate=new TransMatrix();this._scale=new ScaMatrix();this._rotate=new RotMatrix();}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    RenderingInfo.TAG='RENDERINGINFO';/**
     * /body/section/paragraph/text/drawingobject|picture/shapecomponent
     * 개체 요소 속성.
     */class ShapeComponent extends HWPElement{constructor(){super(...arguments);this._rendering=new RenderingInfo();this.XPos=0;this.YPos=0;this.GroupLevel=0;this.HorzFlip=false;this.VertFlip=false;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    /**
         * hwpunit 단위로 설정.
         */setSize(width,height){this.OriWidth=width;this.OriHeight=height;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ShapeComponent.TAG='SHAPECOMPONENT';/**
     * /body/section/paragraph/text/.../drawingobject/drawtext/textmargin
     * 글상자 텍스트 여백.
     */class TextMargin extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Left=0;this.Right=0;this.Top=0;this.Bottom=0;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    TextMargin.TAG='TEXTMARGIN';/**
     * /body/section/paragraph/text/.../drawingobject/drawtext
     * 그리기 개체 글상자용 텍스트.
     */class DrawText extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._textMargin=new TextMargin();this._paraList=new HWPParaList();this.Editable=false;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setText(s,shape){const p=this._paraList.add();const t=p.addText(false,true);const c=t.add(HWPChar);t.CharShape=shape;c.setText(s);return this;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    DrawText.TAG='DRAWTEXT';/**
     * /body/section/paragraph/text/.../drawingobject|picture/lineshape
     * 테두리 선 모양.
     */class HWPLineShape extends HWPElement{constructor(){super(...arguments);this.Width=33;this.Style=HWPLineType1.None;this.EndCap='Flat';this.HeadStyle=HWPArrowType.Normal;this.TailStyle=HWPArrowType.Normal;this.HeadSize=HWPArrowSize.SmallSmall;this.TailSize=HWPArrowSize.SmallSmall;this.OutlineStyle='Normal';}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setStyle(css){this.Style=toHwpLineType(css);return this;}setColor(color){let alpha=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this.Color=toHwpColor(color);this.Alpha=toHwpAlpha(alpha);return this;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPLineShape.TAG='LINESHAPE';/**
     * /body/section/paragraph/text/.../drawingobject
     * 그리기 개체 공통 속성.
     */class HWPDrawingObject extends HWPElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){let fill=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;let text=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;super();//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._shapeComponent=new ShapeComponent();this._lineShape=new HWPLineShape();if(fill){this._fillBrush=new HWPFillBrush();}if(text){this._drawText=new DrawText();}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get lineShape(){return this._lineShape;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setText(s,shape){this._drawText.setText(s,shape);return this;}/**
         * hwpunit 단위로 설정.
         */setSize(width,height){this._shapeComponent.setSize(width,height);return this;}setColor(color,alpha){if(!this._fillBrush){this._fillBrush=new HWPFillBrush();}this._fillBrush.setColor(color,alpha);return this;}setDebug(debug){if(debug&&this._lineShape.Style===HWPLineType1.None){this._lineShape.Style=HWPLineType1.Solid;this._lineShape.Color=toHwpColor(0xcccccc);}return this;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPDrawingObject.TAG='DRAWINGOBJECT';////////////////////////////////////////////////////////////////////////////////
    /**
     * /body/section/p/text
     * 컨트롤을 포함한 텍스트 문자열.
     *
     */class HWPText extends HWPElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(isFirst,inner,attrs){super(attrs);this._children=[];/*
            private _char: Char;
            private _table: Table;
            private _picture: Picture;
            private _line: Line;
            private _rectangle: Rectangle;
            private _ellipse: Ellipse;
            private _arc: Arc;
            private _polygon: Polygon;
            private _curve: Curve;
            private _unknown: UnknownObject;
        
            private _button: Button;
            private _radioButton: RadioButton;
            private _checkButton: CheckButton;
            private _comboBox: ComboBox;
            private _edit: Edit;
            private _listBox: ListBox;
            private _scrollBar: ScrollBar;
            private _container: Container;
            private _equation: Equation;
            private _textArt: TextArt;
            private _fieldBegin: FieldBegin;
            private _fieldEnd: FieldEnd;
            private _bookmark: Bookmark;
            private _header: Header;
            private _footer: Footer;
            private _footNote: FootNote;
            private _endNote: EndNote;
            private _autoNum: AutoNum;
            private _newNum: NewNum;
            private _pageNumCtrl: PageNumCtrl;
            private _pageHiding: PageHiding;
            private _pageNum: PageNum;
            private _compose: Compose;
            private _dutmal: Dutmal;
            private _hiddenComment: HiddenComment;
            */this.CharShape=0;if(isFirst&&!inner){// section 첫 text에서만 추가되는 듯.
    this._secDef=new SecDef();// section 첫 text에서만 혹은 column 구조가 변경되는 시점에만 추가되는 듯.
    this._colDef=new ColDef();}}//-------------------------------------------------------------------------
    // propertie
    //-------------------------------------------------------------------------
    get secDef(){return this._secDef;}get colDef(){return this._colDef;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    add(clazz){const elt=new clazz();this._children.push(elt);return elt;}addElement(element){element&&this._children.push(element);}addElements(elements){elements===null||elements===void 0?void 0:elements.forEach(elt=>elt&&this._children.push(elt));}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPText.TAG='TEXT';HWPText.ORDERS={SECDEF:10,COLDEF:9};/**
     * /body/section/p
     * 문단.
     */class HWPPara extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._texts=[];}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    addText(){let isFirst=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let inner=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const text=new HWPText(isFirst,inner);if(inner){this.ParaShape=0;// 기본 설정.
    }this._texts.push(text);return text;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get firstText(){return this._texts.length>0?this._texts[0]:void 0;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPPara.TAG='P';/**
     * /body/.../paralist
     * 문단 리스트.
     */class HWPParaList extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._paras=[];/**
             * 텍스트 방향. 0: 가로, 1: 세로.
             */this.TextDirection=0;this.LineWrap=HWPLineWrapType.Keep;//.Squeeze;//.Keep;// .Break;
    this.VertAlign='Center';}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get count(){return this._paras.length;}get first(){return this._paras.length>0?this._paras[0]:void 0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    add(){const p=new HWPPara();this._paras.push(p);return p;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPParaList.TAG='PARALIST';/**
     * /body/section/p/text/...
     * Text 의 자식 element.
     */class HWPTextElement extends HWPElement{//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static getFontSize(css){let sz=parseInt(css)||10;if(css.endsWith('px')){sz=sz*72/96>>0;}// TODO: 보정 필요?
    // if (sz >= 20) {
    //     sz *= 0.87;
    // } else if (sz >= 10) {
    //     sz *= 0.9;
    // } else {
    //     sz *= 0.95;
    // }
    return sz>>0;}static getColor(css){let v=0;if(css.startsWith('#')){v=+css.substr(css.length-6);v=(v&0xff)<<16+(v&0xff00)+(v&0xff0000)>>16;}else if(css.startsWith('rgb(')){const arr=css.substring(4,css.length-1).split(/,\s*/);v=(+arr[2]<<16)+(+arr[1]<<8)+ +arr[0];}else if(css.startsWith('rgba(')){const arr=css.substring(5,css.length-1).split(/,\s*/);v=(+arr[3]<<24)+(+arr[2]<<16)+(+arr[1]<<8)+ +arr[0];}return v;}static getFontBold(css){return +css>=700;}//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal methods
    //-------------------------------------------------------------------------
    _toHwpF(px){return px*100*72/96;}_toHwp(px){return Math.round(px*100*72/96);}_toColor(color){return (color&0xff)<<16+(color&0xff00)+(color&0xff0000)>>16;}}/**
     * @internal
     * /body/section/p/text/char
     * 글자.
     */class HWPChar extends HWPTextElement{//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setText(s){if(s.length===1&&s.charCodeAt(0)===160/* &nbsp */){s='';}else {s=Utils.escapeXML(s);}this._value=s;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get text(){return this._value;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPChar.TAG='CHAR';/**
     * /body/section/p/text/secdef/startnumber
     * 문서의 구역내 존재하는 그림, 표, 수식 및 쪽의 시작 번호 정보.
     */class StartNumber extends HWPTextElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.PageStartOn='Both';this.Page=0;this.Figure=0;this.Table=0;this.Equation=0;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    StartNumber.TAG='STARTNUMBER';/**
     * /body/section/p/text/secdef/hide
     * 감추기 옵션들.
     */class Hide extends HWPTextElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Header=false;this.Footer=false;this.MasterPage=false;this.Border=false;this.Fill=false;this.PageNumPos=false;this.EmptyLine=false;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Hide.TAG='HIDE';/**
     * /body/section/p/text/secdef/pagedef/pagemargin
     * 용지 설정 정보. 용지 크기의 디폴트는 'A4'(210 mm X 297 mm)이다.
     * 이때, 용지 가로 크기인 210 mm = 59529 hwpunit 이나 글97과의 호환을 위해 59528 hwpunit을 사용한다.
     */class PageMargin extends HWPTextElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Left=0;this.Right=0;this.Top=0;this.Bottom=0;this.Header=0;this.Footer=0;this.Gutter=0;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    PageMargin.TAG='PAGEMARGIN';/**
     * /body/section/p/text/secdef/pagedef
     * 용지 설정 정보. 용지 크기의 디폴트는 'A4'(210 mm X 297 mm)이다.
     * 이때, 용지 가로 크기인 210 mm = 59529 hwpunit 이나 글97과의 호환을 위해 59528 hwpunit을 사용한다.
     */class PageDef extends HWPTextElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._margin=new PageMargin();this.Landscape=0;this.Width=59528;this.Height=84188;this.GutterType='LeftOnly';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    PageDef.TAG='PAGEDEF';/**
     * /body/section/p/text/secdef/footnoteshape/autonumformat
     * 번호 서식.
     */class AutoNumFormat extends HWPTextElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Type=HWPNumberType2.Digit;this.Superscript=false;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    AutoNumFormat.TAG='AUTONUMFORMAT';/**
     * /body/section/p/text/secdef/footnoteshape/noteline
     * 구분선.
     */class NoteLine extends HWPTextElement{constructor(){super(...arguments);this.Type=HWPLineType1.Solid;this.Width='12mm';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    NoteLine.TAG='NOTELINE';/**
     * /body/section/p/text/secdef/footnoteshape/notespacing
     * 여백.
     */class NoteSpacing extends HWPTextElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.AboveLine=567;this.BelowLine=567;this.BetweenNotes=850;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    NoteSpacing.TAG='NOTESPACING';/**
     * /body/section/p/text/secdef/footnoteshape/notenumbering
     * 번호 매기기.
     */class NoteNumbering extends HWPTextElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Type='Continuous';this.NewNumber=1;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    NoteNumbering.TAG='NOTENUMBERING';/**
     * /body/section/p/text/secdef/footnoteshape/noteplacement
     * 위치.
     */class NotePlacement extends HWPTextElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Place='EachColumn';this.BeneathText=false;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    NotePlacement.TAG='NOTEPLACEMENT';/**
     * /body/section/p/text/secdef/footnoteshape
     * 각주 모양 정보.
     */class FootNoteShape extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    FootNoteShape.TAG='FOOTNOTESHAPE';/**
     * /body/section/p/text/secdef/endnoteshape
     * 미주 모양 정보.
     */class EndNoteShape extends FootNoteShape{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){super();this._placement.Place='EndOfDocument';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    EndNoteShape.TAG='ENDNOTESHAPE';/**
     * /body/section/p/text/secdef/pageborderfill/pageoffset
     * 테두리/배경 위치.
     */class PageOffset extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Left=1417;this.Right=1417;this.Top=1417;this.Bottom=1417;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    PageOffset.TAG='PAGEOFFSET';/**
     * /body/section/p/text/secdef/pageborderfill
     * 쪽 테두리/배경.
     */class PageBorderFill extends HWPElement{constructor(){super(...arguments);this.Type='Both';this.TextBorder=false;this.HeaderInside=false;this.FooterInside=false;this.FillArea='Paper';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    PageBorderFill.TAG='PAGEBORDERFILL';/**
     * /body/section/p/text/secdef/masterpage
     * 바탕쪽.
     */class MasterPage extends HWPElement{constructor(){super(...arguments);this.Type='Both';this.HasTextRef=false;this.HasNumRef=false;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    MasterPage.TAG='MASTERPAGE';/**
     * /body/section/p/text/secdef/ext_masterpage
     * 바탕쪽.
     */class ExtMasterPage extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ExtMasterPage.TAG='EXT_MASTERPAGE';/**
     * /body/section/p/text/secdef
     * 구역 정의
     */class SecDef extends HWPTextElement{constructor(){super(...arguments);this._pageDef=new PageDef();this._pageBorderFills=[];this.TabStop=8000;}setLandscape(){this._pageDef.Landscape=1;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    SecDef.TAG='SECDEF';/**
     * /body/section/p/text/coldef/columnline
     * 단 구분선.
     */class ColumnLine extends HWPTextElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Type=HWPLineType1.Solid;this.Width='0.12mm';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ColumnLine.TAG='COLUMNLINE';/**
     * /body/section/p/text/coldef/columntable/column[]
     * 단.
     */class Column extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Column.TAG='COLUMN';/**
     * /body/section/p/text/coldef/columntable
     * 단 테이블.
     */class ColumnTable extends HWPTextElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._columns=[];}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ColumnTable.TAG='COLUMNTABLE';/**
     * /body/section/p/text/coldef
     * 단 정의.
     */class ColDef extends HWPTextElement{constructor(){super(...arguments);this.Type='Newspaper';this.Count=1;this.Layout='Left';this.SameSize=true;this.SameGap=0;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ColDef.TAG='COLDEF';/**
     * /body/section/p/text/picture/imagerect
     * 이미지 좌표 정보.
     */class ImageRect extends HWPElement{//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setBounds(x,y,w,h){this.X0=x;this.Y0=y;this.X1=x+w;this.Y1=y;this.X2=x+w;this.Y2=y+h;this.X3=x;this.Y3=y+h;return this;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ImageRect.TAG='IMAGERECT';/**
     * /body/section/p/text/picture/imageclip
     * 이미지 자르기 정보.
     */class ImageClip extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Left=0;this.Top=0;this.Right=0;this.Bottom=0;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ImageClip.TAG='IMAGECLIP';/**
     * /body/section/p/text/picture/effects/shadoweffect/effectscolor
     * 이미지 자르기 정보.
     */class EffectsColor extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    EffectsColor.TAG='EFFECTSCOLOR';/**
     * /body/section/p/text/picture/effects/shadoweffect
     * 그림자 효과.
     */class ShadowEffect extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ShadowEffect.TAG='SHADOWEFFECT';/**
     * /body/section/p/text/picture/effects/glow
     * 네온 효과.
     */class Glow extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Glow.TAG='GLOW';/**
     * /body/section/p/text/picture/effects/softedge
     * 부드러운 가장자리 효과.
     */class SoftEdge extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    SoftEdge.TAG='SOFTEDGE';/**
     * /body/section/p/text/picture/effects/reflection
     * 반사 효과.
     */class Reflection extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Reflection.TAG='REFLECTION';/**
     * /body/section/p/text/picture/effects
     * 이미지 효과 정보.
     */class Effects extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Effects.TAG='EFFECTS';/**
     * /body/section/p/text/picture
     * 그림.
     */class HWPPicture extends HWPTextElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._shapeObject=new HWPShapeObject();this._shapeComponent=new ShapeComponent();this._lineShape=new HWPLineShape();this._imageRect=new ImageRect();this._imageClip=new ImageClip();this._image=new HWPImage();}//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    init(){this._shapeObject.ZOrder=1;this._shapeObject.NumberingType='Figure';this._shapeObject.TextWrap=HWPTextWrapType.Square;this._shapeObject.Lock=false;return this;}setId(id){this._image.BinItem=id;return this;}/**
         * pixel 단위로 지정한다.
         */setBounds(x,y,w,h,inCell){x=this._toHwp(x);y=this._toHwp(y);w=this._toHwp(w);h=this._toHwp(h);this._shapeObject.setSize(w,h).setPosition(x,y,inCell);this._shapeComponent.setSize(w,h);this._imageRect.setBounds(0,0,w,h);return this;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPPicture.TAG='PICTURE';/**
     * /body/section/p/text/line
     * 선.
     */class HWPLine extends HWPTextElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    /**
         * 픽셀 단위로 지정한다.
         */constructor(x1,y1,x2,y2,inCell){super();//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._shape=new HWPShapeObject();this._drawing=new HWPDrawingObject(false,false);this.IsReverseHV=false;const x12=this._toHwp(Math.min(x1,x2));const y12=this._toHwp(Math.min(y1,y2));const x22=this._toHwp(Math.max(x1,x2));const y22=this._toHwp(Math.max(y1,y2));const w=Math.max(1,x22-x12);const h=Math.max(1,y22-y12);this.StartX=0;this.StartY=0;this.EndX=w;this.EndY=h;this._shape.setPosition(x12,y12,inCell).setSize(w,h);this._drawing.setSize(w,h);this._drawing.lineShape.Style=HWPLineType1.Solid;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setStyle(css){this._drawing.lineShape.setStyle(css);return this;}setColor(color){let alpha=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this._drawing.lineShape.setColor(color,alpha);return this;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPLine.TAG='LINE';/**
     * /body/section/p/text/rectangle
     * 사각형.
     */class HWPRectangle extends HWPTextElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){let fill=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;let text=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;let attrs=arguments.length>2?arguments[2]:undefined;super(attrs);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._shape=new HWPShapeObject();this._drawing=new HWPDrawingObject(fill,text);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    /**
         * pixel 단위로 지정한다.
         */setBounds(x,y,width,height,inCell){const x1=0;//this._toHwp(x);
    const y1=0;//this._toHwp(y);
    width=this._toHwp(width);height=this._toHwp(height);this.X0=x1;this.Y0=y1;this.X1=x1+width;this.Y1=y1;this.X2=x1+width;this.Y2=y1+height;this.X3=x1;this.Y3=y1+height;this._shape.setSize(width,height).setPosition(this._toHwp(x),this._toHwp(y),inCell);this._drawing.setSize(width,height);return this;}setZOrder(order){this._shape.ZOrder=order;return this;}setText(s,shape){this._drawing.setText(s,shape);return this;}setDebug(){let debug=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;this._drawing.setDebug(debug);}setColor(color,alpha){this._drawing.setColor(color,alpha);return this;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPRectangle.TAG='RECTANGLE';/**
     * /body/section/p/text/ellipse
     * 타원.
     */class Ellipse extends HWPTextElement{constructor(){super(...arguments);this.IntervalDirty=false;this.ArcType='Normal';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Ellipse.TAG='ELLIPSE';/**
     * /body/section/p/text/arc
     * 호.
     */class Arc extends HWPTextElement{constructor(){super(...arguments);this.Type='Normal';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Arc.TAG='ARC';/**
     * /body/section/p/text/polygon
     * 다각형.
     */class Polygon extends HWPTextElement{constructor(){super(...arguments);this._points=[];}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Polygon.TAG='POLYGON';/**
     * /body/section/p/text/curve/segment
     * 곡선 개체를 이루는 세그먼트.
     */class Segment extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Type='Curve';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Segment.TAG='SEGMENT';/**
     * /body/section/p/text/curve
     * 곡선.
     */class Curve extends HWPTextElement{constructor(){super(...arguments);this._segments=[];}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Curve.TAG='CURVE';/**
     * /body/section/p/text/connectline
     * 연결선.
     */class ConnectLine extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ConnectLine.TAG='CONNECTLINE';/**
     * /body/section/p/text/unknownobject
     * Unknown Object.
     */class UnknownObject extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    UnknownObject.TAG='UNKNOWNOBJECT';/**
     * /body/section/p/text/button
     * 양식 개체 : 버튼.
     */class Button extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Button.TAG='BUTTON';/**
     * /body/section/p/text/radiobutton
     * 양식 개체 : 라디오 버튼.
     */class RadioButton extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    RadioButton.TAG='RADIOBUTTON';/**
     * /body/section/p/text/checkbutton
     * 양식 개체 : 체크 버튼.
     */class CheckButton extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    CheckButton.TAG='CHECKBUTTON';/**
     * /body/section/p/text/combobox
     * 양식 개체 : 콤보 박스.
     */class ComboBox extends HWPTextElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._shape=new HWPShapeObject();}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ComboBox.TAG='COMBOBOX';/**
     * /body/section/p/text/edit
     * 양식 개체 : 에디트.
     */class Edit extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Edit.TAG='EDIT';/**
     * /body/section/p/text/listbox
     * 양식 개체 : 리스트 박스.
     */class ListBox extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ListBox.TAG='LISTBOX';/**
     * /body/section/p/text/scrollbar
     * 양식 개체 : 스크롤바.
     */class ScrollBar extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ScrollBar.TAG='SCROLLBAR';/**
     * /body/section/p/text/container
     * 묶음 개체.
     */class Container extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Container.TAG='CONTAINER';/**
     * /body/section/p/text/equation
     * 글 97 수식.
     */class Equation extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Equation.TAG='EQUATION';/**
     * /body/section/p/text/textart
     * 글맵시.
     */class TextArt extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    TextArt.TAG='TEXTART';/**
     * /body/section/p/text/fieldbegin
     * 필드 시작.
     */class FieldBegin extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    FieldBegin.TAG='FIELDBEGIN';/**
     * /body/section/p/text/fieldend
     * 필드 끝.
     */class FieldEnd extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    FieldEnd.TAG='FIELDEND';/**
     * /body/section/p/text/bookmark
     * 책갈피.
     */class Bookmark extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Bookmark.TAG='BOOKMARK';/**
     * /body/section/p/text/header
     * 머리말.
     */class Header extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Header.TAG='HEADER';/**
     * /body/section/p/text/footer
     * 꼬리말.
     */class Footer extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Footer.TAG='FOOTER';/**
     * /body/section/p/text/footnote
     * 각주.
     */class FootNote extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    FootNote.TAG='FOOTNOTE';/**
     * /body/section/p/text/endnote
     * 미주.
     */class EndNote extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    EndNote.TAG='ENDNOTE';/**
     * /body/section/p/text/autonum
     * 자동 번호.
     */class AutoNum extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    AutoNum.TAG='AUTONUM';/**
     * /body/section/p/text/newnum
     * 새 번호.
     */class NewNum extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    NewNum.TAG='NEWNUM';/**
     * /body/section/p/text/pagenumctrl
     * 홀/짝수 조정.
     */class PageNumCtrl extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    PageNumCtrl.TAG='PAGENUMCTRL';/**
     * /body/section/p/text/pagehiding
     * 감추기.
     */class PageHiding extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    PageHiding.TAG='PAGEHIDING';/**
     * /body/section/p/text/pagenum
     * 쪽번호 위치.
     */class PageNum extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    PageNum.TAG='PAGENUM';/**
     * /body/section/p/text/indexmark
     * 찾아보기 표식. 찾아보기 표식을 달수 있고, 찾아보기 만들기에서 참조한다.
     */class IndexMark extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    IndexMark.TAG='INDEXMARK';/**
     * /body/section/p/text/compose
     * 글자 겹침.
     */class Compose extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Compose.TAG='COMPOSE';/**
     * /body/section/p/text/dutmal
     * 덧말.
     */class Dutmal extends HWPTextElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.PosType='Top';this.Align=HWPAlignmentType1.Center;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Dutmal.TAG='DUTMAL';/**
     * /body/section/p/text/hiddencomment
     * 숨은 설명.
     */class HiddenComment extends HWPTextElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HiddenComment.TAG='HIDDENCOMMENT';////////////////////////////////////////////////////////////////////////////////
    /**
     * /body/section/p/text/table/cellzonelist
     * 셀존 리스트.
     */class CellZoneList extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._cellZones=[];this.Count=0;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    CellZoneList.TAG='CELLZONELIST';/**
     * /body/section/p/text/table/cellzonelist/cellzon[]
     * 셀존.
     */class CellZone extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    CellZone.TAG='CELLZONE';/**
     * /body/section/p/text/table/row/cell/cellmargin
     * 셀 여백.
     */class CellMargin extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Left=0;this.Right=0;this.Top=0;this.Bottom=0;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    CellMargin.TAG='CELLMARGIN';/**
     * /body/section/p/text/table/row/cell[]
     * 표의 셀.
     */class Cell extends HWPElement{constructor(){super(...arguments);this._paraList=new HWPParaList();this.ColAddr=0;this.RowAddr=0;this.ColSpan=1;this.RowSpan=1;this.Header=false;this.HasMargin=false;this.Protect=false;this.Editable=false;this.Dirty=false;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get textElement(){return this.$_text;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    add(clazz){const text=this.$_checkText();this._paraList.LineWrap=HWPLineWrapType.Break;return text.add(clazz);}addElement(element){const text=this.$_checkText();this._paraList.LineWrap=HWPLineWrapType.Break;text.addElement(element);}setAlign(hwp,align){this._paraList.first.ParaShape=hwp.head.addParaShape(align);return this;}setVAlign(align){this._paraList.VertAlign=align;return this;}setWrap(hwp){this._paraList.first.ParaShape=hwp.head.addParaShapeWrap();return this;}setMargin(left,right,top,bottom){const margin=this._cellMargin||(this._cellMargin=new CellMargin());if(!isNaN(left))margin.Left=left;if(!isNaN(right))margin.Right=right;if(!isNaN(top))margin.Top=top;if(!isNaN(bottom))margin.Bottom=bottom;this.HasMargin=true;return this;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_checkText(){if(!this.$_text){const p=this._paraList.add();this.$_text=p.addText();}return this.$_text;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Cell.TAG='CELL';/**
     * /body/section/p/text/table/row[]
     * 표의 행.
     */class Row extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._cells=[];}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    addCell(cell){this._cells.push(cell);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Row.TAG='ROW';const _aligns={l:HWPAlignmentType1.Left,c:HWPAlignmentType1.Center,r:HWPAlignmentType1.Right};/**
     * /body/section/p/text/table
     * 표.
     */class HWPTable extends HWPTextElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._shapeObject=new HWPShapeObject();this._insideMargin=new HWPInsideMargin();this.PageBreak='Cell';this.RepeatHeader=true;this.CellSpacing=0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setBounds(x,y,width,height,inCell){x=this._toHwp(x);y=this._toHwp(y);width=this._toHwp(width);height=this._toHwp(height);this._shapeObject.setSize(width,height).setPosition(x,y,inCell);return this;}build(hwp,report,builder,dom){var _a;function getWidth(c,span){if(span===1){return wCols[c];}else {let w=wCols[c];for(let i=1;i<span;i++){w+=wCols[c+i];}return w;}}const trows=dom.rows;const tcols=dom.firstChild.children;const nCol=tcols.length;const wCols=new Array(nCol);for(let i=0;i<nCol;i++){const tc=tcols[i];// 디자이너에서 clientWidth를 0으로 리턴한다 !
    //wCols[i] = this._toHwp(tcols[i].clientWidth);
    const w=tc[T_WIDTH];wCols[i]=this._toHwp(isNaN(w)?+tc.dataset.width:w);}this.RowCount=trows.length;this.ColCount=nCol;this._rows=[];for(let r=0,n=this.RowCount;r<n;r++){const tr=trows[r];const trCs=getComputedStyle(tr);const trFill=ColorUtils.cssToColor(trCs.backgroundColor);const tcells=tr.cells;const hRow=this._toHwp(tr.offsetHeight);const row=new Row();for(let c=0;c<nCol;c++){const td=tcells[c];const tcs=td.style;const cs=getComputedStyle(td);if(cs.display==='none')continue;const cell=new Cell();const fill=ColorUtils.cssToColor(cs.backgroundColor)||trFill;// table cell 모델에서 명시적으로 지정한 border 스타일들을 반영한다.
    const borders=extractBorderStyles(tcs,cs);cell.RowAddr=r;cell.ColAddr=c;cell.RowSpan=td.rowSpan||1;cell.ColSpan=td.colSpan||1;cell.Width=getWidth(c,cell.ColSpan);// wCols[c];
    cell.Height=hRow;if(fill&&borders){cell.BorderFill=hwp.getBorderFillByCell(ColorUtils.lighten(fill.color,fill.alpha),borders);}else if(fill){// cell 배경은 alpha가 적용되지 않고 있다.
    // cell.BorderFill = hwp.getBorderFillByColor(fill.color, fill.alpha);
    cell.BorderFill=hwp.getBorderFillByColor(ColorUtils.lighten(fill.color,fill.alpha),1);}else if(borders){cell.BorderFill=hwp.getBorderFillByBorders(borders);}else {cell.BorderFill=2;}const char=cell.add(HWPChar);const elt=(_a=td.firstElementChild)===null||_a===void 0?void 0:_a.firstElementChild;if(elt){const item=elt instanceof HTMLElement&&report.models[elt.dataset[T_MODEL]];if(item instanceof DiagonalBoxContainer){const pic=this.$_createDboxRun(hwp,item,elt);cell.addElement(pic);cell.setAlign(hwp,_aligns[td.dataset[T_ALIGN]]);}else if(item instanceof TextItemBase){const span=td.getElementsByClassName(TextItemElementBase.SPAN)[0];if(span){const text=cell.textElement;const css=getComputedStyle(span);const charShape=hwp.getCharShape(css);char.setText(span.textContent);text.CharShape=charShape;if(css.whiteSpace==='pre-wrap'){cell.setWrap(hwp);}else {cell.setAlign(hwp,_aligns[td.dataset[T_ALIGN]]);}}}else if(elt instanceof HTMLElement){const elts=builder.createCellElement(hwp,report,elt);if(elts){for(let e of elts){cell.addElement(e);}cell.setAlign(hwp,_aligns[td.dataset[T_ALIGN]]);}}}row.addCell(cell);}this._rows.push(row);}return this;}buildBox(hwp,report,builder,dom,item){const elements=Array.from(dom.firstElementChild.children);const vertical=item instanceof ColumnBoxContainer;const nCol=vertical?1:elements.length;const nRow=vertical?elements.length:1;const gap=item.getItemGap(dom.offsetWidth);const itemsAlign=item.itemsAlign;const wDom=dom.offsetWidth;const hDom=dom.offsetHeight;const wCols=new Array(nCol);const hRows=new Array(nRow);if(vertical){wCols[0]=this._toHwp(wDom);let sum=0;for(let i=0;i<nRow;i++){const h=elements[i].offsetHeight+gap;hRows[i]=this._toHwp(h);sum+=h;}if(sum<hDom&&itemsAlign!==BoxItemsAlign.MIDDLE){if(itemsAlign===BoxItemsAlign.END){elements.unshift(null);hRows.unshift(this._toHwp(hDom-sum));}else {elements.push(null);hRows.push(this._toHwp(hDom-sum));}}}else {hRows[0]=this._toHwp(hDom);let sum=0;for(let i=0;i<nCol;i++){const w=elements[i].offsetWidth+gap;wCols[i]=this._toHwp(w);sum+=w;}if(sum<wDom&&itemsAlign!==BoxItemsAlign.MIDDLE){if(itemsAlign===BoxItemsAlign.END){elements.unshift(null);wCols.unshift(this._toHwp(wDom-sum));}else {elements.push(null);wCols.push(this._toHwp(wDom-sum));}}}this.RowCount=hRows.length;this.ColCount=wCols.length;this._rows=[];for(let r=0;r<hRows.length;r++){const row=new Row();for(let c=0;c<wCols.length;c++){const cell=new Cell();cell.RowAddr=r;cell.ColAddr=c;cell.RowSpan=1;cell.ColSpan=1;cell.Width=wCols[c];cell.Height=hRows[r];const char=cell.add(HWPChar);const elt=elements[r*nCol+c];if(elt){const item=elt instanceof HTMLElement&&report.models[elt.dataset[T_MODEL]];if(vertical){const left=item.getLeft(wDom);const right=item.getRight(wDom);if(!isNaN(left)&&!isNaN(right)||!isNaN(left)){cell.setMargin(this._toHwp(left),NaN,NaN,NaN);}else if(!isNaN(right)){cell.setAlign(hwp,HWPAlignmentType1.Right);cell.setMargin(NaN,this._toHwp(right),NaN,NaN);}else {cell.setAlign(hwp,HWPAlignmentType1.Center);}}else {const top=item.getTop(hDom);const bottom=item.getBottom(hDom);if(!isNaN(top)&&!isNaN(bottom)||!isNaN(top)){cell.setVAlign('Top');cell.setMargin(NaN,NaN,this._toHwp(top),NaN);}else if(!isNaN(bottom)){cell.setVAlign('Bottom');cell.setMargin(NaN,NaN,NaN,this._toHwp(bottom));}else;}if(item instanceof DiagonalBoxContainer){const pic=this.$_createDboxRun(hwp,item,elt);cell.addElement(pic);}else if(item instanceof TextItemBase){const span=elt.getElementsByClassName(TextItemElementBase.SPAN)[0];if(span){const text=cell.textElement;const css=getComputedStyle(span);const charShape=hwp.getCharShape(css);char.setText(span.textContent);text.CharShape=charShape;if(css.whiteSpace==='pre-wrap'){cell.setWrap(hwp);}}}else if(elt instanceof HTMLElement){const elts=builder.createCellElement(hwp,report,elt);if(elts){for(let e of elts){cell.addElement(e);}}}}row.addCell(cell);}this._rows.push(row);}return this;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_createDboxRun(hwp,item,dom){let data=dboxToImage(item,dom);const id=hwp.addImage(data,'1');const pic=new HWPPicture();const r=hwp.getDomBounds(dom);pic.init().setId(id).setBounds(r.x,r.y,r.width,r.height,!!hwp.inTable);return pic;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPTable.TAG='TABLE';////////////////////////////////////////////////////////////////////////////////
    const BORDER_TOP=0;const BORDER_BOTTOM=1;const BORDER_LEFT=2;const BORDER_RIGHT=3;const BORDER_STYLES=['borderTopStyle','borderBottomStyle','borderLeftStyle','borderRightStyle'];const BORDER_COLORS=['borderTopColor','borderBottomColor','borderLeftColor','borderRightColor'];/**
     * HWP file builder from report pages.
     */class HWPBuilder{//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    createCellElement(hwp,report,dom){function createElement(self,dom,elts){const item=report.models[dom.dataset[T_MODEL]];// border or background
    if(item&&!(item instanceof DiagonalBoxContainer)){elts.push(...self.$_createBounds(hwp,dom));}if(item instanceof HtmlItem){const childs=dom.firstElementChild.childNodes;for(let i=0;i<childs.length;i++){const child=childs[i];if(child instanceof HTMLElement){createElement(self,child,elts);}else if(child instanceof Text){elts.push(self.$_createText(hwp,child));}}}else if(item instanceof ImageItem){elts.push(self.$_createPicture(hwp,dom));}else if(item instanceof SvgItem){elts.push(self.$_createSvg(hwp,dom));}else if(item instanceof QrcodeItem){elts.push(self.$_createQrcode(hwp,dom));}else if(item instanceof CheckItem){elts.push(...self.$_createCheck(hwp,dom));}else if(item instanceof DiagonalBoxContainer){elts.push(self.$_createDiagonalLine(hwp,dom,item.reversed));}else if(item instanceof BoxContainer){elts.push(self.$_createBox(hwp,report,dom,item));}else if(dom instanceof HTMLTableElement){elts.push(self.$_createTable(hwp,report,dom));}else if(dom instanceof HTMLSpanElement){if(item instanceof DiagonalBoxContainer&&dom.dataset.line){elts.push(this.$_createDiagonalLine(hwp,dom,item.reversed));}else {elts.push(self.$_createText(hwp,dom));}}else if(dom instanceof SVGSVGElement){elts.push(self.$_createSvg(hwp,dom));}else if(dom instanceof HTMLCanvasElement){elts.push(self.$_createCanvas(hwp,dom));}else if(dom instanceof HTMLElement){const childs=dom.children;for(let i=0;i<childs.length;i++){if(childs[i]instanceof Element){createElement(self,childs[i],elts);}}}}const elts=[];createElement(this,dom,elts);return elts;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    build(report,pages,hwp){pages.forEach((page,i)=>{const elts=this.$_buildPage(hwp.setPageDiv(page.page),report,page);const para=hwp.body.section.addPara();const text=para.addText(i===0);report.paper.orientation===PaperOrientation.LANDSCAPE&&text.secDef.setLandscape();elts.forEach(elt=>{elt&&text.addElement(elt);});if(i>0){para.PageBreak=true;}});}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_createBounds(hwp,dom){let r=hwp.getDomBounds(dom);const cs=getComputedStyle(dom);const backColor=ColorUtils.cssToColor(cs.backgroundColor);const elts=[];// background
    if(backColor){const rect=new HWPRectangle(true,false);r=hwp.getDomBounds(dom);rect.setBounds(r.x,r.y,r.width,r.height,!!hwp.inTable).setZOrder(0).setColor(backColor.color,backColor.alpha);elts.push(rect);}// boarders
    // TODO: border가 사방 모두인 경우 다르게 처리할 필요!
    BORDER_STYLES.forEach((st,dir)=>{const style=cs[st];if(style&&style!='none'){let x1;let y1;let x2;let y2;if(!r)r=hwp.getDomBounds(dom);switch(dir){case BORDER_TOP:x1=r.x;x2=r.x+r.width;y1=y2=r.y;break;case BORDER_BOTTOM:x1=r.x;x2=r.x+r.width;y1=y2=r.y+r.height;break;case BORDER_LEFT:x1=x2=r.x;y1=r.y;y2=r.y+r.height;break;case BORDER_RIGHT:x1=x2=r.x+r.width;y1=r.y;y2=r.y+r.height;break;}const color=ColorUtils.cssToColor(cs[BORDER_COLORS[dir]]);const line=new HWPLine(x1,y1,x2,y2,!!hwp.inTable);line.setStyle(style).setColor(color.color,color.alpha);elts.push(line);}});return elts;}$_createText(hwp,dom){const s=dom.textContent;if(s){const r=dom instanceof Text?hwp.getTextBounds(dom):hwp.getDomBounds(dom);const rect=new HWPRectangle(false,true);const charShape=hwp.getCharShape(dom instanceof Text?dom.parentElement:dom);rect.setBounds(r.x,r.y,r.width,r.height,!!hwp.inTable).setText(s,charShape).setDebug(HWPBuilder.DEBUG);return rect;}}$_createPicture(hwp,dom){const r=hwp.getDomBounds(dom);const css=getComputedStyle(dom);const url=Utils.getImageUrl(css);const id=hwp.addImage(url,css.opacity);const pic=new HWPPicture();pic.init().setId(id).setBounds(r.x,r.y,dom.clientWidth,dom.clientHeight,!!hwp.inTable);return pic;}$_createCheck(hwp,dom){const check=dom.getElementsByClassName(CheckItemElement.CHECK_CLASS)[0];const eltPic=this.$_createPicture(hwp,check);const text=dom.getElementsByClassName(CheckItemElement.TEXT_CLASS)[0];const eltText=this.$_createText(hwp,text);return [eltPic,eltText];}$_createSvg(hwp,dom){let svg=dom instanceof SVGSVGElement?dom:null;let data;if(!svg){// svgitem
    const content=dom[T_SVG];data=content.substring(content.indexOf('<svg'));}else {// shape, barcode, chart
    // svg.outerHTML에 xml namespace가 빠져서 image로 그려지지 않는다.
    // data = svg.outerHTML;
    // data = data.replace('<svg', '<svg xmlns="http://www.w3.org/2000/svg"')
    data=new XMLSerializer().serializeToString(svg);}const svgBlob=new Blob([data],{type:'image/svg+xml;charset=utf-8'});const svgData=(window.URL||window.webkitURL).createObjectURL(svgBlob);const id=hwp.addImage(svgData,'1');const pic=new HWPPicture();pic.init().setId(id);const r=hwp.getDomBounds(dom);pic.setBounds(r.x,r.y,r.width,r.height,!!hwp.inTable);return pic;}$_createCanvas(hwp,dom){const data=dom.toDataURL();const id=hwp.addImage(data,'1');const pic=new HWPPicture();const r=hwp.getDomBounds(dom);pic.init().setId(id).setBounds(r.x,r.y,r.width,r.height,!!hwp.inTable);return pic;}$_createQrcode(hwp,dom){let url=null;const r=hwp.getDomBounds(dom);const css=getComputedStyle(dom);const imageElement=dom.querySelector('img');if(imageElement)url=imageElement.src;const id=hwp.addImage(url,css.opacity);const pic=new HWPPicture();pic.init().setId(id).setBounds(r.x,r.y,dom.clientWidth,dom.clientHeight,!!hwp.inTable);return pic;}$_createTable(hwp,report,dom){const table=new HWPTable();const r=hwp.getDomBounds(dom);const save=hwp.inTable;table.BorderFill=2;table.setBounds(r.x,r.y,r.width,r.height,!!hwp.inTable);hwp.inTable=table;try{table.build(hwp,report,this,dom);}finally{hwp.inTable=save;}return table;}$_createBox(hwp,report,dom,item){const table=new HWPTable();const r=hwp.getDomBounds(dom);const save=hwp.inTable;table.BorderFill=2;table.setBounds(r.x,r.y,r.width,r.height,!!hwp.inTable);hwp.inTable=table;try{table.buildBox(hwp,report,this,dom,item);}finally{hwp.inTable=save;}return table;}$_createDiagonalLine(hwp,dom,reversed){const r=hwp.getDomBounds(dom);const line=reversed?new HWPLine(r.x,r.y+r.height,r.x+r.width,r.y,!!hwp.inTable):new HWPLine(r.x,r.y,r.x+r.width,r.y+r.height,!!hwp.inTable);return line;}$_buildItem(hwp,report,dom,target){const item=dom instanceof HTMLElement&&report.models[dom.dataset[T_MODEL]];// border or background
    if(item&&!(item instanceof DiagonalBoxContainer)){// 여기에서 bar item이 처리된다.
    const elts=this.$_createBounds(hwp,dom);Utils.push(target,elts);}if(item instanceof HtmlItem){const childs=dom.firstElementChild.childNodes;for(let i=0;i<childs.length;i++){const child=childs[i];if(child instanceof HTMLElement){this.$_buildItem(hwp,report,child,target);}else if(child instanceof Text){target.push(this.$_createText(hwp,child));}}}else if(item instanceof ImageItem){target.push(this.$_createPicture(hwp,dom));}else if(item instanceof SvgItem){target.push(this.$_createSvg(hwp,dom));}else if(item instanceof QrcodeItem){target.push(this.$_createQrcode(hwp,dom));}else if(item instanceof CheckItem){// check 상자를 그림으로 대체한다.
    target.push(...this.$_createCheck(hwp,dom));}else if(dom instanceof HTMLTableElement){target.push(this.$_createTable(hwp,report,dom));}else if(dom instanceof HTMLSpanElement){if(item instanceof DiagonalBoxContainer&&dom.dataset.line){target.push(this.$_createDiagonalLine(hwp,dom,item.reversed));}else {target.push(this.$_createText(hwp,dom));}}else if(dom instanceof HTMLElement&&dom.tagName==='B'){target.push(this.$_createText(hwp,dom));}else if(dom instanceof SVGSVGElement){target.push(this.$_createSvg(hwp,dom));}else if(dom instanceof HTMLCanvasElement){target.push(this.$_createCanvas(hwp,dom));}else if(dom instanceof HTMLElement){const childs=dom.children;for(let i=0;i<childs.length;i++){if(childs[i]instanceof Element){this.$_buildItem(hwp,report,childs[i],target);}}}}$_buildBackground(hwp,report,div,elts){this.$_buildItem(hwp,report,div,elts);}$_buildForeground(hwp,report,div,elts){this.$_buildItem(hwp,report,div,elts);}$_buildPageHeader(hwp,report,div,elts){this.$_buildItem(hwp,report,div,elts);}$_buildPageFooter(hwp,report,div,elts){this.$_buildItem(hwp,report,div,elts);}$_buildPageBody(hwp,report,contents,elts){for(let dom of contents){this.$_buildItem(hwp,report,dom,elts);}}$_buildPage(hwp,report,page){const elts=[];this.$_buildBackground(hwp,report,page.background,elts);this.$_buildPageHeader(hwp,report,page.pageHeader,elts);this.$_buildPageBody(hwp,report,page.contents,elts);this.$_buildPageFooter(hwp,report,page.pageFooter,elts);this.$_buildForeground(hwp,report,page.foreground,elts);return elts;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPBuilder.DEBUG=false;////////////////////////////////////////////////////////////////////////////////
    // XmlDoc.ts
    // 2021. 10. 22. created by woori
    // -----------------------------------------------------------------------------
    // Copyright (c) 2020-2021 Wooritech Inc.
    // All rights reserved.
    ////////////////////////////////////////////////////////////////////////////////
    const EOL='\r\n';const $$_head='<?xml version="1.0" encoding="utf-8"?>'+EOL;const $$_escape=/\<|\>|\&|\"/;function escape(text){if($$_escape.test(text)){return text.replace(/\&/g,'&amp;').replace(/\</g,'&lt;').replace(/\>/g,'&gt;').replace(/\"/g,'&quot;');}else {return text;}}/**
     * XML document model.
     */class XmlDoc{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(root){this._root=root;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get root(){return this._root;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    addChild(parent,tag,attrs,value){const elt={tag,attrs};parent=parent||this._root;if(!parent.children){parent.children=[];}parent.children.push(elt);return elt;}setAttr(elt,attr,value){if(value!==void 0){if(!elt.attrs){elt.attrs={};}elt.attrs[attr]=escape(String(value));}else if(elt.attrs){delete elt.attrs[attr];}}setValue(elt,value){if(value!==void 0){elt.value=value;}else {delete elt.value;}}toString(){let s=$$_head;s+="<!DOCTYPE ".concat(this._root.tag,">").concat(EOL);s+=this.$_toStr(this._root);return s;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_toStr(elt){let s="<".concat(elt.tag);for(let attr in elt.attrs){s+=" ".concat(attr,"=\"").concat(elt.attrs[attr],"\"");}if(elt.children||elt.value!==void 0){s+=">";if(elt.value!==void 0){s+=elt.value;}if(elt.children){s+="".concat(EOL);for(let child of elt.children){s+=this.$_toStr(child);}}s+="</".concat(elt.tag,">");}else {s+='/>';}return "".concat(s).concat(EOL);}}////////////////////////////////////////////////////////////////////////////////
    /**
     * HWP 최상위 엘리먼트.
     */class HWPRoot extends HWPElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){super();this.Version='2.8';this.Style='embed';this.SubVersion='8.0.0.0';this._head=new HWPHead();this._body=new HWPBody();this._tail=new HWPTail();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get head(){return this._head;}get body(){return this._body;}get tail(){return this._tail;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    addImageBin(id,format,data){this._head.addBin(id,format);this._tail.addImageBin(id,data);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get tag(){return 'HWPML';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPRoot.TAG='HWPML';/**
     * /head/docsummary
     * 문서요약정보를 담는다.
     */class DocSummary extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    DocSummary.TAG='DOCSUMMARY';/**
     * /head/docsetting/beginnumber
     * 문서 내 각종 시작번호에 대한 정보.
     */class BeginNumber extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    /** 페이지 시작 번호 */this.Page=1;/** 각주 시작 번호 */this.Footnote=1;/** 미주 시작 번호 */this.Endnote=1;/** 그림 시작 번호 */this.Picture=1;/** 표 시작 번호 */this.Table=1;/** 수식 시작 번호 */this.Equation=1;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    BeginNumber.TAG='BEGINNUMBER';/**
     * /head/docsetting/caretpos
     * 문서 내 캐럿의 위치 정보.
     */class CaretPos extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    CaretPos.TAG='CARETPOS';/**
     * /head/docsetting
     * 각종 설정 정보를 담는다.
     */class DocSetting extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._beginNumber=new BeginNumber();this._caretPos=new CaretPos();}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    DocSetting.TAG='DOCSETTING';/**
     * /head/mappingtable/bindatalist/binitem
     * 그림, OLE등의 바이너리 데이터 아이템에 대한 정보.
     * DTD상으로는 Type을 제외한 속성들이 #IMPLIED로 선언되어 있지만,
     * 실제로는 Type="Link"일때 APath와 RPath가 필수이며,
     * Type="Embedding"일때는 BinData와 Format이 필수이다.
     */class BinItem extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    /**
             * 그림의 경우 "Link"와 "Embedding"만 가능. OLE의 경우 "Storage"만 가능.
             */this.Type='Embedding';/**
             * Type이 "Embedding"일때, 바이너리 데이터의 포맷종류.
             * 그림의 경우 "jpg", "bmp", "gif" 중 선택. OLE의 경우 "ole"만 가능.
             */this.Format='jpg';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    BinItem.TAG='BINITEM';/**
     * /head/mappingtable/bindatalist
     * 그림, OLE등의 바이너리 데이터 리스트.
     */class BinDataList extends HWPListElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._items=[];this.Count=0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    add(id,format){const item=new BinItem();item.BinData=id;item.Format=format;this._items.push(item);this.Count++;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get count(){return this.Count;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    BinDataList.TAG='BINDATALIST';/**
     * /head/mappingtable/facenamelist/fontface/font/typeinfo
     * 글꼴속성에 따라 글꼴을 대체하는 PANOSE시스템의 폰트 분류 속성들에 대한 정보.
     */class TypeInfo extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    /** 글꼴 계열 */this.FamilyType=2;/** 세리프 유형 */this.SerifStyle=11;/** 굵기 */this.Weight=6;/** 비례 */this.Proportion=0;/** 대조 */this.Contrast=0;/** 스트로크 편차 */this.StrokeVariation=1;/** 자획유형 */this.ArmStyle=1;/** 글자형 */this.LetterForm=1;/** 중간선 */this.MidLine=1;/** X-높이 */this.XHeight=1;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    TypeInfo.TAG='TYPEINFO';/**
     * /head/mappingtable/facenamelist/fontface/font
     * 각각의 글꼴.
     */class Font extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._typeInfo=new TypeInfo();}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Font.TAG='FONT';/**
     * /head/mappingtable/facenamelist/fontface/
     * 언어별 글꼴 그룹.
     */class FontFace extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._fonts=[];}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    add(font){this._fonts.push(font);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    FontFace.TAG='FONTFACE';/**
     * /head/mappingtable/facenamelist
     * 글꼴 리스트.
     */class FaceNameList extends HWPListElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){super();//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._faces=[];const fontNames=['맑은 고딕','굴림','바탕','돋움'];['Hangul','Latin','Hanja','Japanese','Other','Symbol','User'].forEach(lang=>{const face=new FontFace();face.Lang=lang;face.Count=fontNames.length;fontNames.forEach((f,i)=>{const font=new Font();font.Id=i;font.Type='ttf';font.Name=f;face.add(font);});this._faces.push(face);});}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get count(){return this._faces.length;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    FaceNameList.TAG='FACENAMELIST';/**
     * /head/mappingtable/borderfillist/borderfill/border
     * 왼쪽/오른쪽/위/아래/대각선 테두리 정보.
     */class Border extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Type=HWPLineType1.Solid;this.Width='0.12mm';this.Color=0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setStyles(border){const color=ColorUtils.cssToColor(border.color,false);const style=border.style;if(style){switch(style){case'none':this.Type=HWPLineType1.None;break;default:this.Type=HWPLineType1.Solid;break;}}if(color){if(color.alpha===0){this.Type=HWPLineType1.None;}this.Color=toHwpColor(color.color);}return this;}sameWithStyles(border){const color=ColorUtils.cssToColor(border.color,false);const style=color&&color.alpha===0?'none':border.style;if(style){switch(style){case'none':if(this.Type!==HWPLineType1.None)return false;break;default:if(this.Type!==HWPLineType1.Solid)return false;break;}}if(color){if(this.Color!==toHwpColor(color.color)){return false;}}return true;}}class BorderLeft extends Border{}BorderLeft.TAG='LEFTBORDER';class BorderRight extends Border{}BorderRight.TAG='RIGHTBORDER';class BorderTop extends Border{}BorderTop.TAG='TOPBORDER';class BorderBottom extends Border{}BorderBottom.TAG='BOTTOMBORDER';class BorderDiagonal extends Border{}BorderDiagonal.TAG='DIAGONAL';const DEF_BORDER={style:'solid',color:'rgb(0,0,0)'};/**
     * /head/mappingtable/borderfillist/borderfill
     * 문단, 표의 셀, 그림 및 그리기 개체에서 사용하는 테두리/배경/채우기 에 대한 각각의 세부 정보.
     */class BorderFill extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._leftBorder=new BorderLeft();this._rightBorder=new BorderRight();this._topBorder=new BorderTop();this._bottomBorder=new BorderBottom();this._diagonal=new BorderDiagonal();this.ThreeD=false;this.Shadow=false;this.Slash=0;this.BackSlash=0;this.CrookedSlash=0;this.CounterSlash=0;this.CounterBackSlash=0;this.BreakCellSeparateLine=0;this.$_borders=[this._leftBorder,this._rightBorder,this._topBorder,this._bottomBorder,this._diagonal];}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setSimple(type){let width=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'0.12mm';this.$_borders.forEach(b=>{b.Type=type;b.Width=width;});return this;}setFill(color,alpha){let brush=this._fillBrush;if(!brush){brush=this._fillBrush=new HWPFillBrush();}brush.setColor(color,alpha);return this;}sameFill(color,alpha){return this._fillBrush&&this._fillBrush.sameWithColor(color,alpha);}setBorders(borders){borders.left&&this._leftBorder.setStyles(borders.left);borders.right&&this._rightBorder.setStyles(borders.right);borders.top&&this._topBorder.setStyles(borders.top);borders.bottom&&this._bottomBorder.setStyles(borders.bottom);return this;}sameBorders(borders){if(!this._leftBorder.sameWithStyles(borders.left||DEF_BORDER))return false;if(!this._rightBorder.sameWithStyles(borders.right||DEF_BORDER))return false;if(!this._topBorder.sameWithStyles(borders.top||DEF_BORDER))return false;if(!this._bottomBorder.sameWithStyles(borders.bottom||DEF_BORDER))return false;return true;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    BorderFill.TAG='BORDERFILL';/**
     * /head/mappingtable/borderfillist
     * 테두리/배경/채우기 정보 리스트.
     */class BorderFillList extends HWPListElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){super();//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._fills=[];this.Count=0;this.addSimple(HWPLineType1.None,'0.1mm');this.addSimple(HWPLineType1.Solid,'0.12mm');}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    addSimple(type){let width=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'0.12mm';const fill=new BorderFill();fill.setSimple(type,width);fill.Id=++this.Count;this._fills.push(fill);return fill;}findByFill(color,alpha){for(let fill of this._fills){if(fill.sameFill(color,alpha)){return fill;}}}findByBorders(borders){for(let fill of this._fills){if(fill.sameBorders(borders)){return fill;}}}findByCell(color,borders){for(let fill of this._fills){if(fill.sameFill(color,1)&&fill.sameBorders(borders)){return fill;}}}getByFill(color,alpha){let fill=this.findByFill(color,alpha);if(!fill){fill=new BorderFill().setFill(color,alpha);fill.Id=++this.Count;this._fills.push(fill);}return fill.Id;}getByBorders(borders){let fill=this.findByBorders(borders);if(!fill){fill=new BorderFill().setBorders(borders);fill.Id=++this.Count;this._fills.push(fill);}return fill.Id;}getByCell(color,borders){let fill=this.findByCell(color,borders);if(!fill){fill=new BorderFill().setFill(color,1).setBorders(borders);fill.Id=++this.Count;this._fills.push(fill);}return fill.Id;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get count(){return this.Count;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    BorderFillList.TAG='BORDERFILLLIST';/**
     * /head/mappingtable/charshapelist/charshape/fontid
     * 언어별 글꼴.
     */class FontId extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Hangul=0;this.Latin=0;this.Hanja=0;this.Japanese=0;this.Other=0;this.Symbol=0;this.User=0;}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static create(fontId){return new FontId().setId(fontId);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setId(fontId){this.Hangul=this.Latin=this.Hanja=this.Japanese=this.Other=this.Symbol=this.User=fontId;return this;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    FontId.TAG='FONTID';/**
     * /head/mappingtable/charshapelist/charshape/ratio
     * 언어별 장평.
     */class Ratio extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Hangul=100;this.Latin=100;this.Hanja=100;this.Japanese=100;this.Other=100;this.Symbol=100;this.User=100;}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static create(ratio){const r=new Ratio();r.Hangul=r.Latin=r.Hanja=r.Japanese=r.Other=r.Symbol=r.User=ratio;return r;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Ratio.TAG='RATIO';/**
     * /head/mappingtable/charshapelist/charshape/charspacing
     * 언어별 자간.
     */class CharSpacing extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Hangul=0;this.Latin=0;this.Hanja=0;this.Japanese=0;this.Other=0;this.Symbol=0;this.User=0;}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static create(spacing){const s=new CharSpacing();s.Hangul=s.Latin=s.Hanja=s.Japanese=s.Other=s.Symbol=s.User=spacing;return s;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    CharSpacing.TAG='CHARSPACING';/**
     * /head/mappingtable/charshapelist/charshape/relsize
     * 언어별 글자의 상대크기.
     */class RelSize extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Hangul=100;this.Latin=100;this.Hanja=100;this.Japanese=100;this.Other=100;this.Symbol=100;this.User=100;}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static create(size){const rs=new RelSize();rs.Hangul=rs.Latin=rs.Hanja=rs.Japanese=rs.Other=rs.Symbol=rs.User=size;return rs;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    RelSize.TAG='RELSIZE';/**
     * /head/mappingtable/charshapelist/charshape/charoffset
     * 언어별 글자위치(상하위치) 0%을 기준으로 하여 100%에 가까울수록 글자위치가 아래로 내려가고 -100%에 가까울수록 위로 올라간다.
     */class CharOffset extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Hangul=0;this.Latin=0;this.Hanja=0;this.Japanese=0;this.Other=0;this.Symbol=0;this.User=0;}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static create(offset){const co=new CharOffset();co.Hangul=co.Latin=co.Hanja=co.Japanese=co.Other=co.Symbol=co.User=offset;return co;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    CharOffset.TAG='CHAROFFSET';/**
     * /head/mappingtable/charshapelist/charshape/italic
     * 글자 속성 : 기울임.
     */class Italic extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Italic.TAG='ITALIC';/**
     * /head/mappingtable/charshapelist/charshape/bold
     * 글자 속성 : 진하게.
     */class Bold extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Bold.TAG='BOLD';/**
     * /head/mappingtable/charshapelist/charshape/underline
     * 글자 속성 : 밑줄.
     */class Underline extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Type='Bottom';this.Shape=HWPLineType2.Solid;this.Color=0;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Underline.TAG='UNDERLINE';/**
     * /head/mappingtable/charshapelist/charshape/strikeout
     * 글자 속성 : 취소선.
     */class Strikeout extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Type='Continuous';this.Shape=HWPLineType2.Solid;this.Color=0;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Strikeout.TAG='STRIKEOUT';/**
     * /head/mappingtable/charshapelist/charshape/outline
     * 글자 속성 : 외곽선.
     */class Outline extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Type=HWPLineType3.Solid;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Outline.TAG='OUTLINE';/**
     * /head/mappingtable/charshapelist/charshape/emboss
     * 글자 속성 : 양각.
     */class Emboss extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Emboss.TAG='EMBOSS';/**
     * /head/mappingtable/charshapelist/charshape/engrave
     * 글자 속성 : 음각.
     */class Engrave extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Engrave.TAG='ENGRAVE';/**
     * /head/mappingtable/charshapelist/charshape/superscript
     * 글자 속성 : 위 첨자.
     */class Superscript extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Superscript.TAG='SUPERSCRIPT';/**
     * /head/mappingtable/charshapelist/charshape/subscript
     * 글자 속성 : 아래 첨자.
     */class Subscript extends HWPElement{}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Subscript.TAG='SUBSCRIPT';/**
     * /head/mappingtable/charshapelist/charshape
     * 글자 모양 정보.
     */class CharShape extends HWPElement{constructor(){super(...arguments);this.Height=1000;this.TextColor=0;this.ShadeColor=0xffffffff;this.UseFontSpace=false;this.UseKerning=false;this.SymMark=0;}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static createSimple(fontId,fontSize,color,bold,italic,underline){const shape=new CharShape();shape.Height=Math.round(fontSize*100);shape.TextColor=color;shape._fontId=FontId.create(fontId);shape._ratio=Ratio.create(100);shape._charSpacing=CharSpacing.create(0);shape._relSize=RelSize.create(100);shape._charOffset=CharOffset.create(0);if(bold){shape._bold=new Bold();}if(italic){shape._italic=new Italic();}if(underline){shape._underline=new Underline();}return shape;}//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    same(fontId,fontSize,color,bold,italic,underline){if(this._fontId.Hangul===fontId&&Math.round(this.Height/100)===fontSize&&this.TextColor===color){if(bold&&!this._bold)return false;if(italic!==!!this._italic)return false;if(underline!==!!this._underline)return false;return true;}return false;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    CharShape.TAG='CHARSHAPE';/**
     * /head/mappingtable/charshapelist
     * 글자 모양 리스트.
     */class CharShapeList extends HWPListElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._charShapes=[];this.Count=0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    add(fontId,fontSize,color,bold,italic,underline){let shape;for(let s of this._charShapes){if(s.same(fontId,fontSize,color,bold,italic,underline)){shape=s;break;}}if(!shape){shape=CharShape.createSimple(fontId,fontSize,color,bold,italic,underline);shape.Id=this.Count++;this._charShapes.push(shape);}return shape.Id;}get(id){return this._charShapes[id];}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get count(){return this.Count;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    CharShapeList.TAG='CHARSHAPELIST';/**
     * /head/mappingtable/tabdeflist/tabdef/tabitem
     * 탭 항목.
     */class TabItem extends HWPElement{constructor(){super(...arguments);this.Type='Left';this.Leader=HWPLineType2.Solid;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    TabItem.TAG='TABITEM';/**
     * /head/mappingtable/tabdeflist/tabdef
     * 탭 정의 정보.
     */class TabDef extends HWPElement{constructor(){super(...arguments);this.AutoTabLeft=false;this.AutoTabRight=false;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    TabDef.TAG='TABDEF';/**
     * /head/mappingtable/tabdeflist
     * 탭 정의 리스트.
     */class TabDefList extends HWPListElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._defs=[];this.Count=0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    add(def){this._defs.push(def);return def.Id=this.Count++;}addDef(autoLeft,autoRight){const def=new TabDef();def.AutoTabLeft=autoLeft;def.AutoTabRight=autoRight;this.add(def);return def;}get(id){return this._defs[id];}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get count(){return this.Count;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    TabDefList.TAG='TABLELIST';/**
     * /head/mappingtable/numberinglist/numbering/parahead
     * 각 번호/글머리표 문단 머리의 정보.
     */class ParaHead extends HWPElement{constructor(){super(...arguments);this.Alignment='Left';this.UseInstWidth=true;this.AutoIndent=true;this.WidthAdjust=0;this.TextOffsetType='percent';this.TextOffset=50;this.NumFormat=HWPNumberType1.Digit;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ParaHead.TAG='PARAHEAD';/**
     * /head/mappingtable/numberinglist/numbering
     * 번호 문단 모양 정보.
     */class Numbering extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._paraheads=[];this.Start=0;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Numbering.TAG='NUMBERING';/**
     * /head/mappingtable/numberinglist
     * 번호 문단 모양 리스트.
     */class NumberingList extends HWPListElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._numberings=[];this.Count=0;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get count(){return this.Count;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    NumberingList.TAG='NUMBERINGLIST';/**
     * /head/mappingtable/bulletlist/bullet
     * 글머리표 문단 모양 정보.
     */class Bullet extends HWPElement{constructor(){super(...arguments);this.Image=false;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Bullet.TAG='BULLET';/**
     * /head/mappingtable/bulletlist
     * 글머리표 문단 모양 리스트.
     */class BulletList extends HWPListElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._bullets=[];this.Count=0;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get count(){return this.Count;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    BulletList.TAG='BULLETLIST';/**
     * /head/mappingtable/parashapelist/parashape/paraborer
     * 문단 테두리/배경.
     */class ParaBorder extends HWPElement{constructor(){super(...arguments);this.Connect=false;this.IgnoreMargin=false;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ParaBorder.TAG='PARABORDER';/**
     * /head/mappingtable/parashapelist/parashape/paramargin
     * 문단 여백.
     */class ParaMargin extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Indent=0;this.Left=0;this.Right=0;this.Prev=0;this.Mext=0;this.LineSpacingType='Percent';this.LineSpacing=130;//160; // TODO: 폰트 사이즈에 따라?
    }}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ParaMargin.TAG='PARAMARGIN';/**
     * /head/mappingtable/parashapelist/parashape[]
     * 문단 모양 리스트.
     */class ParaShape extends HWPElement{constructor(){super(...arguments);this.Align=HWPAlignmentType1.Justify;this.VertAlign='Baseline';this.HeadingType='None';this.Level=0;this.BreakLatinWord='KeepWord';this.BreakNonLatinWord=true;this.Condense=0;this.WindowOrphan=false;this.KeepWithNext=false;this.KeepLines=false;this.PageBreakBefore=false;this.FontLineHeight=false;this.SnapToGrid=true;this.LineWrap=HWPLineWrapType.Break;this.AutoSpaceEAsianEng=true;this.AutoSpaceEAsianNum=true;}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static create(margin,border,attrs){const shape=new ParaShape(attrs);shape._margin=margin;shape._border=border;return shape;}//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    sameWith(){return false;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ParaShape.TAG='PARASHAPE';/**
     * /head/mappingtable/parashapelist
     * 문단 모양 리스트.
     * Shape.Id는 반드시 0부터 시작해야 한다.
     */class ParaShapeList extends HWPListElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){super();//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._shapes=[];this.Count=0;this.add(HWPAlignmentType1.Left);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    get(id){return this._shapes[id];}add(align){for(let shape of this._shapes){if(shape.Align===align){return shape;}}const shape=new ParaShape();shape.Id=this.Count++;// 반드시 0부터 시작해야 한다.
    shape.Align=align;this._shapes.push(shape);return shape;}addWrap(){if(!this._wrap){const shape=this._wrap=ParaShape.create(new ParaMargin(),null,null);shape.Id=this.Count++;shape.Align=HWPAlignmentType1.Center;this._shapes.push(shape);}return this._wrap;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get count(){return this.Count;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ParaShapeList.TAG='PARASHAPELIST';/**
     * /head/mappingtable/stylelist/style[]
     * 스타일 정보.
     */class Style extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this.Id=-1;this.Type='Para';}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Style.TAG='STYLE';/**
     * /head/mappingtable/stylelist
     * 스타일 리스트.
     */class StyleList extends HWPListElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._styles=[];this.Count=0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    add(style){this._styles.push(style);return style.Id=this.Count++;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get count(){return this.Count;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    StyleList.TAG='STYLELIST';/**
     * /head/mappingtable/memolist/memo[]
     * 메모.
     */class Memo extends HWPElement{constructor(){super(...arguments);this.Width=0;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Memo.TAG='MEMO';/**
     * /head/mappingtable/memolist
     * 메모 리스트.
     */class MemoShapeList extends HWPListElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._memos=[];this.Count=0;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get count(){return this.Count;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    MemoShapeList.TAG='MEMOSHAPELIST';/**
     * /head/mappingtable
     * 본문에 사용 중인 글꼴, 글자속성, 문단속성, 탭, 스타일 등등에 대한 세부정보를 담고 있다.
     */class MappingTable extends HWPElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){super();this._binDataList=new BinDataList();this._faceNameList=new FaceNameList();this._borderFillList=new BorderFillList();this._charShapeList=new CharShapeList();this._tabDefList=new TabDefList();this._numberingList=new NumberingList();this._bulletList=new BulletList();this._paraShapeList=new ParaShapeList();this._styleList=new StyleList();this._memoShapeList=new MemoShapeList();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get borderFillList(){return this._borderFillList;}get charShapeList(){return this._charShapeList;}get paraShapeList(){return this._paraShapeList;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    addBin(id,format){this._binDataList.add(id,format);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    MappingTable.TAG='MAPPINGTABLE';/**
     * /head
     * 문서요약정보 외에 글꼴, 글자속성, 문단속성에 대한 테이블 등 문서에 대한 전반적인 정보를 담고 있다.
     */class HWPHead extends HWPElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){super();this._docSummary=new DocSummary();this._docSetting=new DocSetting();this._mappingTable=new MappingTable();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get docSummary(){return this._docSummary;}get docSetting(){return this._docSetting;}get mappingTable(){return this._mappingTable;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    addBin(id,format){this._mappingTable.addBin(id,format);}addCharShape(fontId,fontSize,color,bold,italic,underline){return this._mappingTable.charShapeList.add(fontId,fontSize,color,bold,italic,underline);}addParaShape(align){return this._mappingTable.paraShapeList.add(align).Id;}addParaShapeWrap(){return this._mappingTable.paraShapeList.addWrap().Id;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPHead.TAG='HEAD';/**
     * /body/section
     * 구역.
     */class Section extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._paras=[];}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    addPara(){let text=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;const para=new HWPPara();if(text){para.addText(false,false);}this._paras.push(para);return para;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    Section.TAG='SECTION';/**
     * /body
     * 본문
     */class HWPBody extends HWPElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){super();//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._sections=[];const section=new Section();section.Id=0;this._sections.push(section);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get section(){return this._sections[0];}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPBody.TAG='BODY';/**
     * /tail/bindatastorage/bindata
     * 바이너리 데이타.
     */class BinData extends HWPElement{constructor(){super(...arguments);this.Encoding='Base64';}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get text(){return this._text;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    BinData.TAG='BINDATA';/**
     * /tail/bindatastorage
     * 바이너리 데이타 저장소.
     */class BinDataStorage extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._data=[];}//-------------------------------------------------------------------------
    // add
    //-------------------------------------------------------------------------
    addImage(id,data){const bin=new BinData();bin.Id=id;bin.Size=data.length;bin['_text']=data;this._data.push(bin);return bin;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    BinDataStorage.TAG='BINDATASTORAGE';/**
     * /tail
     * 헤더와 본문정보 외에 기타 정보를 담고 있다.
     */class HWPTail extends HWPElement{constructor(){super(...arguments);//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._bindDataStorage=new BinDataStorage();//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    }//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getBinData(id){return this._bindDataStorage[id];}addImageBin(id,data){return this._bindDataStorage.addImage(id,data);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    HWPTail.TAG='TAIL';////////////////////////////////////////////////////////////////////////////////
    /**
     * Xml 기반 HWP file (HWPML 2.1).
     */class HWPFile{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){let debug=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this._imgId=1;this._imgMap={};this.debug=debug;this._imageLoader=new ImageLoader();this._root=new HWPRoot();}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static write(doc,elt,xml){const{elements,attrs}=elt.getContent();// set attrs
    for(let p in attrs){doc.setAttr(xml,p,attrs[p]);}// set text
    const v=elt.text;if(v){doc.setValue(xml,v);}// add children
    for(let elt of elements){if(!(elt instanceof HWPListElement)||elt.count>0){const child=doc.addChild(xml,elt.tag);this.write(doc,elt,child);}}}// for debugging only
    static toXml(elt){const doc=new XmlDoc({tag:elt.tag});this.write(doc,elt,doc.root);return doc.toString();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get body(){return this._root.body;}get head(){return this._root.head;}get tail(){return this._root.tail;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    addImage(url,opacity){let id=this._imgMap[url];if(!id){// 'data:image/png;base64,' 제거.
    const i=url.indexOf('base64,');if(i<0){this._imageLoader.add(url,opacity);}id=this._imgMap[url]=String(this._imgId++);}return +id;}getBorderFillByColor(color,alpha){return this.head.mappingTable.borderFillList.getByFill(color,alpha);}getBorderFillByBorders(borders){return this.head.mappingTable.borderFillList.getByBorders(borders);}getBorderFillByCell(color,borders){return this.head.mappingTable.borderFillList.getByCell(color,borders);}getCharShape(dom){const css=dom instanceof HTMLElement?getComputedStyle(dom):dom;const fontSize=HWPTextElement.getFontSize(css.fontSize);const color=HWPTextElement.getColor(css.color);const bold=HWPTextElement.getFontBold(css.fontWeight);const italic=css.fontStyle==='italic';const underline=css.textDecoration.indexOf('underline')>=0;const charShape=this.addCharShape(0,fontSize,color,bold,italic,underline);return charShape;}addCharShape(fontId,fontSize,color,bold,italic,underline){return this._root.head.addCharShape(fontId,fontSize,color,bold,italic,underline);}prepare(trials){return this._imageLoader.load(trials);}canExport(){return this._imageLoader.loaded;}toXml(){const root=this._root;const doc=new XmlDoc({tag:'HWPML',attrs:{Version:'2.1'}});for(let url in this._imgMap){const id=+this._imgMap[url];let data;data=this._imageLoader.get(url)||url;let i=data.indexOf('base64,');if(i>=0){data=data.substring(i+7);}root.addImageBin(id,'png',data);}HWPFile.write(doc,root,doc.root);return doc;}setPageDiv(div){if(div!==this._pageDiv){this._pageDiv=div;this._pageRect=div.getBoundingClientRect();}return this;}getDomBounds(dom){const r=dom.getBoundingClientRect();r.x-=this._pageRect.x;r.y-=this._pageRect.y;return r;}getTextBounds(node){const r=Utils.getTextRect(node);r.x-=this._pageRect.x;r.y-=this._pageRect.y;return r;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Report -> Xml 기반 HWP file (HWPML 2.1) export.
     */class HWPExporter{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    export(report,pages,callback){if(typeof callback!=='function'){return;}const handler=()=>{if(file.canExport()||file.prepare(trials)){const doc=file.toXml();const s=doc.toString();// console.log(s);
    const buff=new TextEncoder().encode(s);callback===null||callback===void 0?void 0:callback(buff);}else {setTimeout(()=>{handler();},300);}};const trials=5;const file=this.$_build(report,pages);handler();}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_build(report,pages){const file=new HWPFile(true);if(pages){const builder=new HWPBuilder();builder.build(report,pages,file);}return file;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Report 모델의 구성 요소들을 tree 형태로 표시한다.
     */class OutlineModel extends EventAware{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(source){super();this._root=new OutlineRootItem(this);source&&(this.source=source);}_doDispose(){this._source&&this._source.removeListener(this);this._source=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** source */get source(){return this._source;}set source(value){// onlydel FIXED: #93
    this._source=value;this.$_build(value);this._fireSourceChanged();}/** root */get root(){return this._root;}/** page */get page(){return this._root.page;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    isRoot(item){return item===this._root;}findItem(source){if(source===this._root.source)return this._root;return this._root.itemOf(source,true);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_build(source){this._source&&this._source.removeListener(this);this._source=source;this._root.load(source);source.addListener(this);}//-------------------------------------------------------------------------
    // Report event handlers
    //-------------------------------------------------------------------------
    onReportItemAdded(report,item,index){const p=this._root.itemOf(item.outlineParent);// cell 대신 cell의 자식을 표시한다.
    if(item instanceof CellGroup){item=item.item;}const m=new OutlineReportItem(item);if(index<0){index=p.count;}p.add(m,index);this._fireItemAdded(m,index);}onReportItemsAdded(report,items,index){const p=this._root.itemOf(items[0].outlineParent);const ms=[];if(index<0){index=p.count;}for(let i=0;i<items.length;i++){let item=items[i];// cell 대신 cell의 자식을 표시한다.
    if(item instanceof CellGroup){item=item.item;}const m=new OutlineReportItem(item);p.add(m,index+i);ms.push(m);}this._fireItemsAdded(ms,index);}onReportItemRemoved(report,item,index){if(item instanceof CellGroup){item=item.item;}const m=this._root.itemOf(item);if(m){// 이벤트 처리중 m.parent를 참조할 수 있게 한다.
    this._fireItemRemoved(m);m.delete();}}onReportItemsRemoved(report,items){const models=[];for(let i=items.length-1;i>=0;i--){const item=items[i];const m=this._root.itemOf(item);m&&models.push(m);}// 이벤트 처리중 m.parent를 참조할 수 있게 한다.
    this._fireItemsRemoved(models);for(let m of models){m.delete();}}onReportItemChanged(report,item,prop,value,oldValue){//console.log('outline changed', prop);
    const m=this._root.itemOf(item);if(m){this._fireItemChanged(m);}}onReportCollectionChanged(report,collection){// this._fireSourceChanged();
    const m=this._root.itemOf(collection);if(m){this._fireChildIndexChanged(m);}}//-------------------------------------------------------------------------
    // event members
    //-------------------------------------------------------------------------
    _fireSourceChanged(){this.fireEvent(OutlineModel.SOURCE_CHANGED);}_fireItemAdded(item,index){this.fireEvent(OutlineModel.ITEM_ADDED,item,index);}_fireItemsAdded(items,index){this.fireEvent(OutlineModel.ITEMS_ADDED,items,index);}_fireItemRemoved(item){this.fireEvent(OutlineModel.ITEM_REMOVED,item);}_fireItemsRemoved(items){this.fireEvent(OutlineModel.ITEMS_REMOVED,items);}_fireItemChanged(item){this.fireEvent(OutlineModel.ITEM_CHANGED,item);}_fireChildIndexChanged(item){this.fireEvent(OutlineModel.CHILDE_INDEX_CHANGED,item);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // events
    OutlineModel.SOURCE_CHANGED="onOutlineSourceChanged";OutlineModel.ITEM_ADDED="onOutlineItemAdded";OutlineModel.ITEMS_ADDED="onOutlineItemsAdded";OutlineModel.ITEM_REMOVED="onOutlineItemRemoved";OutlineModel.ITEMS_REMOVED="onOutlineItemsRemoved";OutlineModel.ITEM_CHANGED="onOutlineItemChanged";OutlineModel.CHILDE_INDEX_CHANGED="onOutlineChildIndexChanged";/**
     * Outline model 구성 요소.
     */class OutlineItem extends Base{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){super();}/** source */get source(){return undefined;}/** count */get count(){return this._children?this._children.length:0;}/** displayText */get displayText(){return this.source.outlineLabel;}/** expandable */get expandable(){return this.source.outlineExpandable;}/** removable */get removable(){return this.source.canRemoveFrom();}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    get(index){return this._children[index];}getSourceType(){return this.source.getSaveType();}itemOf(source){let recursive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(this._children){for(let child of this._children){if(child.source===source){return child;}if(recursive){const c=child.itemOf(source,true);if(c)return c;}}}}add(item){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;this._addItem(item,index);}clear(){this._clear();}delete(){if(this.removable){this.parent._removeItem(this);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _attached(parent){}_detached(){}_clear(){if(this._children){for(let item of this._children){item["_detached"]();}this._children=null;}}_addItem(item){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;assert(!!item);const items=this._children=this._children||[];assert(items.indexOf(item)<0);if(index<0){items.push(item);}else {items.splice(index,0,item);}item["_attached"](this);}_removeItem(item){if(item&&item.removable&&this._children){const i=this._children.indexOf(item);if(i>=0){this._children.splice(i,1);item["_detached"]();}}}_sortByOrder(){if(this._children){this._children=this._children.sort((i1,i2)=>i1.source.outlineOrder-i2.source.outlineOrder);}}}/**
     * Outline model root item.
     */class OutlineRootItem extends OutlineItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(model){super();this._model=model;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** page */get page(){return this._page;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    load(report){this._clear();this._addItem(this._page=new OutlineReportItem(report.page));}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outline(){return this._model;}get source(){return this._page.source.outlineParent;}get parent(){return null;}get displayText(){return 'Report';}get expandable(){return true;}getSourceType(){return 'report';}_clear(){super._clear();this._page=null;}}/**
     * Outline model 구성 요소.
     */class OutlineReportItem extends OutlineItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(source){super();assert(!!source);this._load(this._source=source);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    load(){this._load(this._source);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get outline(){return this._parent&&this._parent.outline;}get parent(){return this._parent;}get source(){return this._source;}_attached(parent){this._parent=parent;super._attached(parent);}_detached(){this._parent=null;super._detached();}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _load(source){const sources=source.outlineItems;if(sources){for(let src of sources){if(src instanceof CellGroup){src=src.item;}const item=new OutlineReportItem(src);this._addItem(item);}this._sortByOrder();}}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class OutlineElement extends VisualElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,name){super(doc,name);}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get measuredWidth(){return this._measuredWidth;}get measuredHeight(){return this._measuredHeight;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    measure(hintWidth,hintHeight){const sz=this._doMeasure(hintWidth,hintHeight);this._measuredWidth=sz.width;this._measuredHeight=sz.height;return sz;}layoutContent(){this._doLayoutContent();}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return;}_doDraw(dom){}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _doMeasure(hintWidth,hintHeight){return new Size(hintWidth,hintHeight);}_doLayoutContent(){}}/** @internal */class OutlineRowElement extends OutlineElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,'outlineRowView');//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._expanded=false;this._vindex=-1;this._focused=false;this._selected=false;this._model=model;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** model */get model(){return this._model;}set model(value){if(value!==this._model){this._model=value;}}/** parentRow */get parentRow(){return this._parentRow;}/** level */get level(){return this._parentRow?this._parentRow.level+1:1;}/** rows */get rows(){return this._childRows&&this._childRows.slice();}/** rowCount */get rowCount(){return this._childRows?this._childRows.length:0;}/** expanded */get expanded(){return this._expanded;}set expanded(value){if(value!=this._expanded){this._expanded=value;}}/** vindex */get vindex(){return this._vindex;}/** focused */get focused(){return this._focused;}/** selected */get selected(){return this._selected;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getChildRow(index){return this._childRows[index];}addChildRow(row,index){if(!this._childRows)this._childRows=[];index=index<0?this._childRows.length:index;this._childRows.splice(index,0,row);row._parentRow=this;return index;}removeChildRow(row){if(row&&this._childRows){const i=this._childRows.indexOf(row);if(i>=0){this._childRows.splice(i,1);row.clearChildRows();}}}clearChildRows(){if(this._childRows){for(let child of this._childRows){child.clearChildRows();}this._childRows=null;}this._parentRow=null;}setFocused(value){if(value!=this._focused){this._focused=value;this.invalidate();}}setSelected(value){if(value!=this._selected){this._selected=value;this.invalidate();}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){let s='rr-outline-row';if(this._focused)s+=' rr-outline-row-focus';else if(this._selected)s+=' rr-outline-row-select';return s;}_getCssDisplay(){return 'flex';}_isEmptySize(){return true;}_initDom(doc,dom){super._initDom(doc,dom);dom.appendChild(this._spanIndent=doc.createElement('span'));dom.appendChild(this._spanExpander=doc.createElement('span'));dom.appendChild(this._spanText=doc.createElement('span'));this._spanText.className='rr-outline-label';}_doDraw(dom){}_doMeasure(hintWidth,hintHeight){const t=this.model.getSourceType();if(t){this['_dom'].dataset.type=t;}else {delete this['_dom'].dataset.type;}this._spanIndent.style.minWidth=8+OutlineRowElement.INDENT_SIZE*(this.level-1)+"px";let clsName='';if(this._model.expandable&&this._childRows&&this._childRows.length>0){clsName=this.expanded?'rr-outline-expander rr-outline-expander-expanded':'rr-outline-expander rr-outline-expander-collapsed';}else {clsName='rr-outline-expander';}this._spanExpander.className=clsName;this._spanExpander[T_ROWVIEW]=this.vindex;this._spanText.textContent=this._model.displayText;return new Size(300,25);}_doLayoutContent(){}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    OutlineRowElement.INDENT_SIZE=10;////////////////////////////////////////////////////////////////////////////////
    /** @internal */class OutlineBodyView extends OutlineElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(viewer){super(viewer.doc,'outlineBodyView');this._visibleRows=[];this._rows=[];this._rowPool=[];this._rowPoints=[0];this._viewer=viewer;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** visibleRowCount */get visibleRowCount(){return this._visibleRows.length;}/** rowCount */get rowCount(){return this._rows.length;}/** focusedRow */get focusedRow(){return this._focusedRow;}/** contentHeight */get contentHeight(){return this._rowPoints[this._rowPoints.length-1];}/** contentWidth */get contentWidth(){return this.width;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getVisible(index){return this._visibleRows[index];}getVisibleItems(){let from=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let to=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;const rows=this._visibleRows;from=Math.max(0,from);if(to<0)to=rows.length=1;else to=Math.min(to,rows.length-1);if(to<from){const t=from;from=to;to=t;}const items=[];for(let i=from;i<=to;i++){items.push(rows[i].model);}return items;}findVisibleRow(itemModel){return this.$_findRow(this._visibleRows,itemModel);}findRow(itemModel){return this.$_findRow(this._rows,itemModel);}loadRows(model){this.clear();if(!model)return;let row=this._root=this.$_borrowRow(model.root);this._rows.push(row);this._visibleRows.push(row);this.addChild(row);this.$_loadRows(row);}refreshChildren(item){const row=this.findRow(item);if(row){this.removeChildren(item);item.clear();item.load();this.addChildren(item);}}addRow(item,index){let p=this.findRow(item.parent);if(p){const row=this.$_borrowRow(item);index=p.addChildRow(row,index);p=this.findVisibleRow(p.model);if(p&&p.expanded){const level=p.level;const vrows=this._visibleRows;const idx=vrows.indexOf(p);let k=idx+1;if(index>0){for(let i=idx+1,cnt=vrows.length;i<cnt;i++){const vrow=vrows[i];if(vrow.parentRow==p){if(--index==0){while(vrows[i].level>level){i++;}k=i;break;}}else if(vrow.level<=level){k=i-1;break;}}}vrows.splice(k,0,row);}this.addChild(row);// row는 bodyview의 자식이다.
    this._rows.push(row);this.invalidateLayout();for(let i=0;i<item.count;i++){this.addRow(item.get(i),i);}}}addChildren(item){for(let i=0;i<item.count;i++){this.addRow(item.get(i),i);}}removeChildren(item){for(let i=item.count-1;i>=0;i--){this.removeRow(item.get(i));}}removeRow(item){for(let i=0;i<item.count;i++){this.removeRow(item.get(i));}let p=this.findRow(item.parent);if(p){let row=this.findRow(item);if(row){p.removeChildRow(row);let i=this._rows.indexOf(row);this._rows.splice(i,1);const vrow=this.findVisibleRow(item);if(vrow){const vrows=this._visibleRows;const idx=vrows.indexOf(vrow);vrows.splice(idx,1);}this.removeChild(row);// row는 bodyview의 자식이다.
    this.$_returnRow(row);this.invalidateLayout();}}}removeRows(items){for(let item of items){this.removeRow(item);}}expand(row){let level=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;row=row||this._root;if(!row)return;if(!row.expanded){const rows=this._visibleRows;const p=rows.indexOf(row)+1;assert(p>0);const list=[];let i=0;row.expanded=true;this.$_collectVisibleRows(row,list,level);for(let row of list){rows.splice(p+i,0,list[i]);i++;}this.invalidateLayout();}}expandAll(row){this.collapseAll(row);this.expand(row,Number.MAX_SAFE_INTEGER);}/**
         *
         * @param row
         * @param recursive
         * @param force true면 parentRow가 collapsed된 경우에도 collapse한다.
         */collapse(row){let recursive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;row=row||this._root;if(!row)return;if(row.expanded){const n=this.$_hideRows(row,recursive);const i=this._visibleRows.indexOf(row)+1;this._visibleRows.splice(i,n);row.expanded=false;this.invalidateLayout();}}collapseAll(row){this.collapse(row,true);}collapseShort(){this.collapseAll();this.expand();this.expand(this._root.getChildRow(0));}isVisible(item){for(let row of this._visibleRows){if(row.model===item)return true;}}makeVisible(item){const row=this.findRow(item);if(!row||row.vindex>=0)return;let p=row.parentRow;let level=0;while(p){if(p.vindex>=0){this.expand(p,level);break;}p=p.parentRow;level++;}}isExpander(dom){return dom.classList.contains('rr-outline-expander');}rowByExpander(dom){return this.getVisible(dom[T_ROWVIEW]);}rowOf(dom){let p=dom;while(p){if(p.classList.contains('rr-outline-row')){for(let row of this._visibleRows){if(row.isDom(p))return row;}}p=p.parentElement;}}getNextVisible(row){const rows=this._visibleRows;if(row){const i=row.vindex;return i<rows.length-1?rows[i+1]:row;}else {return rows.length>0?rows[0]:null;}}getPrevVisible(row){const rows=this._visibleRows;if(row){const i=row.vindex;return i>0?rows[i-1]:row;}else {return rows.length>0?rows[0]:null;}}getNextPageVisible(row){if(!row)return this.getNextVisible(row);const rows=this._visibleRows;const pts=this._rowPoints;let h=this.getBoundingRect().height;let count=rows.length;let i=row.vindex;while(i<count){h-=pts[i+1]-pts[i];if(h<=0)break;i++;}return rows[Math.min(count-1,i)];}getPrevPageVisible(row){if(!row)return this.getPrevVisible(row);const rows=this._visibleRows;const pts=this._rowPoints;let h=this.getBoundingRect().height;let i=row.vindex;while(i>=0){h-=pts[i+1]-pts[i];if(h<=0)break;i--;}return rows[Math.max(0,i)];}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get isLayer(){return true;}_getCssSelector(){return 'rr-outline-body';}_setSizeStyle(css){}_initDom(doc,dom){super._initDom(doc,dom);const css=dom.style;css.width='100%';css.height='100%';css.overflow='auto';}clear(){if(super.clear()){for(let row of this._rows){this.$_returnRow(row,true);}this._rows=[];this._visibleRows=[];return true;}}findChildAt(x,y,hitTesting,blockLayer){y+=this['_dom'].scrollTop;return super.findChildAt(x,y,hitTesting,blockLayer);}_doMeasure(hintWidth,hintHeight){const viewer=this._viewer;var pts=this._rowPoints=[0];this._focusedRow=null;for(let rowView of this._rows){rowView.visible=false;rowView["_vindex"]=-1;rowView.setFocused(false);}for(let i=0;i<this._visibleRows.length;i++){const rowView=this._visibleRows[i];const item=rowView.model;rowView.visible=true;rowView["_vindex"]=i;if(!this._focusedRow&&viewer.isFocused(item)){rowView.setFocused(true);this._focusedRow=rowView;}rowView.setSelected(viewer.isSelected(item));rowView.measure(hintWidth,hintHeight);pts.push(pts[i]+rowView.measuredHeight);}return new Size(hintWidth,pts[pts.length-1]);}scrollToFocused(topPos,height){const focused=this._focusedRow;if(focused){const pts=this._rowPoints;const i=focused.vindex;if(pts[i]<topPos){topPos=pts[i]+(i>0?(pts[i-1]-pts[i])/2:0);}else if(pts[i+1]-topPos>=height){topPos=pts[i+1]-height+(i<pts.length-1?(pts[i+1]-pts[i])/2:0);}}return topPos;}_doLayoutContent(){const pts=this._rowPoints;let y=0;let x=0;for(let i=0;i<this._visibleRows.length;i++){const rowView=this._visibleRows[i];//rowView.setBounds(x, pts[i] - y, w, rowView.measuredHeight);
    rowView.move(x,pts[i]-y);rowView.layoutContent();}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_borrowRow(itemModel){if(this._rowPool.length>0){const row=this._rowPool.pop();row.model=itemModel;row.expanded=false;row.invalidate();return row;}return new OutlineRowElement(this.doc,itemModel);}$_returnRow(row){let force=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(row&&(force||this._rowPool.indexOf(row)<0)){row.clearChildRows();this._rowPool.push(row);row.validate();}}$_loadRows(parent){const model=parent.model;for(let i=0;i<model.count;i++){const child=model.get(i);const row=this.$_borrowRow(child);this._rows.push(row);this.addChild(row);parent.addChildRow(row,i);this.$_loadRows(row);}}$_findRow(rows,model){if(rows){for(let row of rows){if(row.model===model)return row;// const r = this.$_findRow(row["_children"], model);
    // if (r) return r;
    }}}$_collectVisibleRows(row,rows,level){for(let i=0;i<row.rowCount;i++){const child=row.getChildRow(i);rows.push(child);if(child.expanded||level>0){child.expanded=true;this.$_collectVisibleRows(child,rows,level-1);}}}$_hideRows(row,recursive){let n=0;n+=row.rowCount;for(let i=0;i<row.rowCount;i++){const child=row.getChildRow(i);if(child.expanded||recursive){child.expanded=false;n+=this.$_hideRows(child,recursive);}}return n;}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class OutlineSelectionTool extends VisualTool{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(viewer){super(viewer,'outlineSelectionTool');this._viewer=viewer;}_doDispose(){this._viewer=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** viewer */get viewer(){return this._viewer;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doMouseDown(event){// const x = event["mouseX"];
    // const y = event["mouseY"];
    // const ctrl = event.ctrlKey || event.metaKey;
    // const shift = event.shiftKey;
    // const alt = event.altKey;
    // const button = event.type === "mousedown" ? event.button : 0;
    const target=this.mouseEventTarget;const viewer=this._viewer;const body=viewer.bodyView;const row=this._clickedRow=body.rowOf(target);if(row&&body.isExpander(target)){row.expanded?viewer.collapse(row):viewer.expand(row);}return true;}_doMouseMove(event){// const x = event["mouseX"];
    // const y = event["mouseY"];
    // const ctrl = event.ctrlKey || event.metaKey;
    // const shift = event.shiftKey;
    // const alt = event.altKey;
    // const viewer = this._viewer;
    }/** 그리드 밖에서도 호출된다. */_doMouseUp(event){// const x = event["mouseX"];
    // const y = event["mouseY"];
    // const viewer = this._viewer;
    }/** 그리드 밖에서 마우스를 놓으면 호출되지 않는다. */_doClick(event,x,y){// x = x || event["mouseX"];
    // y = y || event["mouseY"];
    const ctrl=event.ctrlKey||event.metaKey;const shift=event.shiftKey;// const alt = event.altKey;
    const target=this.mouseEventTarget;const viewer=this._viewer;const body=viewer.bodyView;const row=body.rowOf(target);if(!body.isExpander(target)&&row&&row===this._clickedRow){const item=row.model;if(ctrl){viewer.toggleSelect(item);if(!viewer.focusedItem){viewer.focusedItem=item;}}else if(shift){const last=viewer.lastSelectedItem;if(last){const lastRow=viewer.bodyView.findVisibleRow(last);const items=viewer.bodyView.getVisibleItems(lastRow.vindex,row.vindex);viewer.selectAll(items);}else {viewer.select(item);}if(!viewer.focusedItem){viewer.focusedItem=item;}}else {viewer.clearSelection(item);viewer.focusedItem=item;}if(!viewer.focusedItem){viewer.focusedItem=item;}}}_doDblClick(event){// const x = event["mouseX"];
    // const y = event["mouseY"];
    // const ctrl = event.ctrlKey || event.metaKey;
    // const shift = event.shiftKey;
    // const alt = event.altKey;
    const target=this.mouseEventTarget;const viewer=this._viewer;const body=viewer.bodyView;const row=body.rowOf(target);if(row&&row===this._clickedRow){if(row.model.expandable){row.expanded?viewer.collapse(row):viewer.expand(row);}else {viewer['_fireDoubleClicked'](row.model);}}}_doMouseWheel(event){const viewer=this._viewer;const isHorz=event.shiftKey||Math.abs(event.deltaX)>Math.abs(event.deltaY);//console.log('WHEEL: ' + event.deltaX + ', ' + event.deltaY);
    if(isHorz){// const left = grid.leftPos;
    // const wheelScrollPos = Math.abs(options.wheelScrollHorz || 16) * ( (event.deltaX || event.deltaY) > 0 ? 1 : -1);
    // grid.leftPos = left + wheelScrollPos;
    // // IE, Edge의 경우 forword, backword가 실행되는 경우가 있다. return true로 막아준다.
    // // 모두 막아버린다.
    return true;}else {const top=viewer.topPos;viewer.topPos=top+event.deltaY;//grid.topIndex = grid.topIndex - event["wheelDelta"];
    return true;}}_doMouseEnter(event){}_doMouseLeave(event){// const x = event["mouseX"];
    // const y = event["mouseY"];
    }_doMouseOver(event){}_doContextMenu(event){return false;}_doKeyDown(event){const key=event.keyCode;const viewer=this._viewer;const body=viewer.bodyView;const focused=body.focusedRow;const focusedItem=viewer.focusedItem;switch(key){case 40/* Keys.DOWN */:viewer.setFocusedRow(body.getNextVisible(focused));break;case 38/* Keys.UP */:viewer.setFocusedRow(body.getPrevVisible(focused));break;case 34/* Keys.PAGEDOWN */:viewer.setFocusedRow(body.getNextPageVisible(focused));break;case 33/* Keys.PAGEUP */:viewer.setFocusedRow(body.getPrevPageVisible(focused));break;case 36/* Keys.HOME */:viewer.setFocusedRow(body.getVisible(0));break;case 35/* Keys.END */:viewer.setFocusedRow(body.getVisible(body.visibleRowCount-1));break;case 37/* Keys.LEFT */:if(focused){if(focused.expanded){body.collapse(focused);}else if(focused.parent&&body.isVisible(focusedItem.parent)){viewer.focusedItem=focusedItem.parent;}}break;case 39/* Keys.RIGHT */:if(focused){if(!focused.expanded){body.expand(focused);}else if(focusedItem.count>0){viewer.focusedItem=focusedItem.get(0);}}break;}return super._doKeyDown(event);}_doKeyPress(event){return false;}_doKeyUp(event){return false;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_findRowView(dom){return;}}////////////////////////////////////////////////////////////////////////////////
    class Selections$2{constructor(){this._items=[];}get items(){return this._items.length>0?this._items.slice():null;}get last(){return this._items.length>0?this._items[this._items.length-1]:null;}contains(item){return item&&this._items.indexOf(item)>=0;}clear(){if(this._items.length>0){this._items=[];return true;}}add(item){if(item&&this._items.indexOf(item)<0){this._items.push(item);return true;}}addAll(items){if(items&&items.length>0){let added=false;for(let item of items){if(this._items.indexOf(item)<0){this._items.push(item);added=true;}}return added;}}remove(item){if(item){const i=this._items.indexOf(item);if(i>=0){this._items.splice(i,1);return true;}}}}/**
     * Outline viewer.
     */class OutlineViewer extends VisualContainer{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(containerId){super(containerId);this._selections=new Selections$2();this._focusRequested=false;this.addElement(this._bodyView=new OutlineBodyView(this));}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // OutlineModel event handlers
    //-------------------------------------------------------------------------
    onOutlineSourceChanged(model){this._bodyView.loadRows(this.model);this.invalidateLayout();}onOutlineItemAdded(model,item,index){this._bodyView.addRow(item,index);this.invalidateLayout();}onOutlineItemsAdded(model,items,index){for(let i=0;i<items.length;i++){this._bodyView.addRow(items[i],index+i);}this.invalidateLayout();}onOutlineItemRemoved(model,item){this._bodyView.removeRow(item);this.invalidateLayout();}onOutlineItemsRemoved(model,items){this._bodyView.removeRows(items);this.invalidateLayout();}onOutlineItemChanged(model,item){this.invalidateLayout();}onOutlineChildIndexChanged(model,item){if(item instanceof OutlineReportItem){this._bodyView.refreshChildren(item);}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** model */get model(){return this._model;}set model(value){if(value!==this._model){if(this._model){this._model.removeListener(this);}this._model=value;this._bodyView.loadRows(value);this.invalidateLayout();if(this._model){this._model.addListener(this);}}}/** bodyView */get bodyView(){return this._bodyView;}/** topPos */get topPos(){return this._bodyView.scrollTop;}set topPos(value){value=Math.max(0,Math.min(this._bodyView.contentHeight-this.getBound().height,value));if(value!=this.topPos){this._bodyView.scrollDom(this.leftPos,value);}}/** leftPos */get leftPos(){return this._bodyView.scrollLeft;}set leftPos(value){value=Math.max(0,Math.min(this._bodyView.contentWidth-this.getBound().width,value));if(value!=this.leftPos){this._bodyView.scrollDom(value,this.topPos);}}/** focusedItem */get focusedItem(){return this._focusedItem;}set focusedItem(value){const old=this._focusedItem;if(this.changeFocus(value)){this._fireFocusedChanged(value,old);}}changeFocus(value){if(value!==this._focusedItem){this._focusedItem=value;this.invalidateLayout();this.clearSelection();this._focusRequested=true;this._bodyView.makeVisible(value);return true;}}/** selection */get selection(){return this._selections.items;}/** lastSelectedItem */get lastSelectedItem(){return this._selections.last;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    expand(row){if(row&&!row.model.expandable)return;this._bodyView.expand(row);}expandAll(row){if(row&&!row.model.expandable)return;this._bodyView.expandAll(row);}collapse(row){if(row&&!row.model.expandable)return;this._bodyView.collapse(row);}collapseAll(row){if(row&&!row.model.expandable)return;this._bodyView.collapseAll(row);}collapseShort(){this._bodyView.collapseShort();}clearSelection(item){const cleared=this._selections.clear();if(item&&this._selections.add(item)||cleared){this.invalidateLayout();}}select(item){if(this._selections.add(item)){this.invalidateLayout();}}toggleSelect(item){if(this._selections.contains(item)){this._selections.remove(item);}else {this._selections.add(item);}this.invalidateLayout();}selectAll(items){if(!items){items=this._bodyView.getVisibleItems();}if(items&&this._selections.addAll(items)){this.invalidateLayout();}}unselect(item){if(this._selections.remove(item)){this.invalidateLayout();}}setFocusedRow(row){this.focusedItem=row&&row.model;}isFocused(item){return this._focusedItem===item;}isSelected(item){return this._selections.contains(item);}itemOfDom(dom){const row=this._bodyView.rowOf(dom);return row&&row.model;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _createDefaultTool(){return new OutlineSelectionTool(this);}_doPrepareContainer(dom){dom.className="rr-outline-root rr-outline";}_doLayout(bounds){this._bodyView.measure(bounds.width,bounds.height);// this._bodyView.setBounds(0, 0, bounds.width, bounds.height);
    this._bodyView.layoutContent();if(this._focusRequested){this._focusRequested=false;this.topPos=this._bodyView.scrollToFocused(this.topPos,bounds.height);}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // event members
    //-------------------------------------------------------------------------
    _fireFocusedChanged(focused,old){this.fireEvent(OutlineViewer.FOCUSED_CHANGED,focused,old);}_fireDoubleClicked(focused){this.fireEvent(OutlineViewer.DOUBLE_CLICKED,focused);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // events
    OutlineViewer.FOCUSED_CHANGED="onOutlineFocusedChanged";OutlineViewer.DOUBLE_CLICKED="onOutlineDoubleClicked";////////////////////////////////////////////////////////////////////////////////
    /** @internal */class PropertyElement extends VisualElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,name){super(doc,name);this._vindex=-1;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get measuredWidth(){return this._measuredWidth;}get measuredHeight(){return this._measuredHeight;}get vindex(){return this._vindex;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    measure(hintWidth,hintHeight){const sz=this._doMeasure(hintWidth,hintHeight);this._measuredWidth=sz.width;this._measuredHeight=sz.height;return sz;}layoutContent(){this._doLayoutContent();}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return;}_doDraw(dom){}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _doMeasure(hintWidth,hintHeight){return new Size(hintWidth,hintHeight);}_doLayoutContent(){}}class PropertyLineElement extends PropertyElement{constructor(){super(...arguments);this._level=-1;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** isCategory */get isCategory(){return false;}/** source */get source(){return this._source;}/** level */get level(){return this._level;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    prepareElement(doc){this._doPrepareElement(doc,this._source);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssDisplay(){return 'flex';}_isEmptySize(){return true;}$_setLevel(source,value){this._source=source;this._level=value;}}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    PropertyLineElement.INDENT=8;/** @internal */class PropertyRowElement extends PropertyLineElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,name,model){super(doc,name||'propertyRowView');//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._labelWidth=115;this._focused=false;this._model=model;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** model */get model(){return this._model;}set model(value){if(value!==this._model){this._model=value;}}/** labelWidth */get labelWidth(){return this._labelWidth;}set labelWidth(value){this._labelWidth=value;}setFocused(value){if(value!=this._focused){this._focused=value;this.$_setIndentMark();this.invalidate();}}hasFocusEdit(){const edit=this._getEdit(null);return edit&&this.doc.activeElement===edit;}/**
         * @param force false이면 이미 선택 영역이 존재하지 않을 경우에만 전체 선택한다.
         */select(target){let force=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(target instanceof HTMLInputElement){this._selectEdit(this._getEdit(target),force);}else if(target){target.focus();}}clearSelection(){this._clearSelection(this._getEdit(null));}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){let s='rr-property-line rr-property-row';if(this._focused)s+=' rr-property-row-focus';return s;}_initDom(doc,dom){super._initDom(doc,dom);dom.appendChild(this._spanIndent=doc.createElement('span'));this._spanIndent.style.color='white';dom.appendChild(this._spanLabel=doc.createElement('span'));this._spanLabel.className='rr-property-row rr-property-row-label';dom.appendChild(this._container=doc.createElement('div'));this._container.className='rr-property-row rr-property-row-content';this._setClassName(null);this._doInitContainer(doc,this._container);}_doDraw(dom){}_doMeasure(hintWidth,hintHeight){const indent=PropertyLineElement.INDENT*(this.level-1);this.$_setIndentMark();this._spanIndent.style.minWidth=indent+12+'px';if(this._model.prop.type===FunctionProperty){this._spanLabel.textContent=Utils.capitalize(this._model.label);}else {this._spanLabel.textContent=Utils.labelize(this._model.label);}// level별로 input을 들여서 표시하려면 indent를 빼지 않는다.
    this._spanLabel.style.width=this._labelWidth-indent+'px';return new Size(300,this.offsetHeight);}_doLayoutContent(){}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _getPlaceHolder(){return this.source.getPlaceHolder(this._model.prop)||'(Not Defined)';}_getEdit(target){return;}_selectEdit(edit,force){if(edit){if(force||edit.selectionEnd===edit.selectionStart){edit.select();}}}_clearSelection(edit){if(edit&&edit.selectionStart!==edit.selectionEnd){edit.setSelectionRange(edit.selectionEnd,edit.selectionEnd);}}_doUpdateValue(item,value){var _a,_b;const container=this.container;if(container&&this.source){try{(_b=(_a=item.prop).validate)===null||_b===void 0?void 0:_b.call(_a,this.source,value);container['updateValue'](this.source,item,value);return true;}catch(err){this.reset(null);console.error(err);if(!container['showError'](this,err)){alert(err);}}}}_loadText(value){return value;}_setText(edit,source){const v=this.model.getValue(source);this._loadText(v);// TODO: prop.default와 같은 경우 흐리게 값을 표시
    if(v===undefined||Number.isNaN(v)){// || v === this.model.prop.default) {
    edit.value='';}else {edit.value=this._loadText(v)||'';}edit.placeholder=this._getPlaceHolder();edit.readOnly=this.model.isReadOnly(source);return edit.value;}$_setIndentMark(){if(this._focused){this._spanIndent.classList.add('rr-property-indent-mark');}else {this._spanIndent.classList.remove('rr-property-indent-mark');}}}/** @internal */class PropertyCategoryElement extends PropertyLineElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,'propertyCategoryView');this._expanded=true;this._model=model;}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static isCollectionItemDelete(dom){return dom.className===this.DELETE_CLASS;}static isCollectionItemUp(dom){return dom.className===this.UP_CLASS;}static isCollectionItemRight(dom){return dom.className===this.RIGHT_CLASS;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** model */get model(){return this._model;}set model(value){if(value!==this._model){this._model=value;}}/** expanded */get expanded(){return this._expanded;}set expanded(value){if(value!=this._expanded){this._expanded=value;}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get isCategory(){return true;}_getCssSelector(){return 'rr-property-line rr-property-category';}_initDom(doc,dom){super._initDom(doc,dom);dom.appendChild(this._spanIndent=doc.createElement('span'));dom.appendChild(this._spanExpander=doc.createElement('span'));dom.appendChild(this._spanText=doc.createElement('span'));this._setClassName(null);}_doDraw(dom){}_doPrepareElement(doc,source){if(this.source.isCollectionProp()){if(!this._spanAdd){this._spanAdd=doc.createElement('span');this._spanAdd.className='rr-property-category-add';this._spanAdd.textContent='+';}this.dom.appendChild(this._spanAdd);}else if(this._spanAdd&&this._spanAdd.parentElement){this.dom.removeChild(this._spanAdd);}if(this.source.isCollectionItem()&&this.label.endsWith(']')){if(!this._spanDelete){this._spanDelete=doc.createElement('span');this._spanDelete.className=PropertyCategoryElement.DELETE_CLASS;this._spanDelete.textContent='';this._spanDelete.style.right='0px';}this.dom.appendChild(this._spanDelete);}else if(this._spanDelete&&this._spanDelete.parentElement){this.dom.removeChild(this._spanDelete);}if(this.source.isCollectionItem()&&!this.label.endsWith(']')&&this.level===0){if(!this._spanUp){this._spanUp=doc.createElement('span');this._spanUp.className=PropertyCategoryElement.UP_CLASS;this._spanUp.textContent='⇧';this._spanUp.style.right='0px';}this.dom.appendChild(this._spanUp);}else if(this._spanUp&&this._spanUp.parentElement){this.dom.removeChild(this._spanUp);}if(this.source.isCollectionItem()&&!this.label.endsWith(']')&&this.level>0){if(!this._spanRight){this._spanRight=doc.createElement('span');this._spanRight.className=PropertyCategoryElement.RIGHT_CLASS;this._spanRight.textContent='⇨';this._spanRight.style.right='0px';}this.dom.appendChild(this._spanRight);}else if(this._spanRight&&this._spanRight.parentElement){this.dom.removeChild(this._spanRight);}}_doMeasure(hintWidth,hintHeight){this._spanIndent.style.minWidth=PropertyLineElement.INDENT*this.level+2+'px';this._spanText.className='rp-category-text';this._spanText.textContent=Utils.labelize(this.label);const clsName=this.expanded?'rp-expander rp-expander-expanded':'rp-expander rp-expander-collapsed';this._spanExpander.className=clsName;this._spanExpander[T_ROWVIEW]=this.vindex;return new Size(300,this.offsetHeight);}_doLayoutContent(){}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    PropertyCategoryElement.DELETE_CLASS='rr-property-collection-delete';PropertyCategoryElement.UP_CLASS='rr-property-collection-up';PropertyCategoryElement.RIGHT_CLASS='rr-property-collection-right';/** @internal */class PropertyCollectionElement extends PropertyLineElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'propertyCollectionView');}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static isAdd(dom){return dom.className===this.ADD_CLASS;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get isCategory(){return true;}_getCssSelector(){return 'rr-property-line rr-property-collection';}_initDom(doc,dom){super._initDom(doc,dom);dom.appendChild(this._spanText=doc.createElement('span'));this._spanText.className='rp-category-text';dom.appendChild(this._spanAdd=doc.createElement('span'));this._spanAdd.className=PropertyCollectionElement.ADD_CLASS;this._spanAdd.textContent='+';this._setClassName(null);}_doDraw(dom){}_doPrepareElement(doc,source){}_doMeasure(hintWidth,hintHeight){this._spanText.textContent=Utils.labelize(this.source.getCollectionLabel());return new Size(300,this.offsetHeight);}_doLayoutContent(){}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    PropertyCollectionElement.ADD_CLASS='rr-property-collection-add';////////////////////////////////////////////////////////////////////////////////
    /** @internal */class FontSizeStyleElement extends PropertyRowElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,'fontSizePropertyView',model);}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doInitContainer(doc,container){// edit
    const edit=this._edit=doc.createElement('input');edit.type='number';edit.className='rr-property-dim';edit.min='0';// undefined일 때, down, up key로 값을 증감 시키는 동작을 막는다.
    edit.onkeydown=e=>{if(isNaN(this._oldValue)&&(e.key==='ArrowDown'||e.key==='ArrowUp')){e.preventDefault();e.stopImmediatePropagation();}};edit.onchange=()=>{this.$_updateValue();this._text=this._edit.value;};container.appendChild(edit);// units
    const select=this._select=doc.createElement('select');FontSizeStyleElement.UNITS.forEach(v=>{const opt=doc.createElement('option');//opt.className = this._getOptionStyle(d);
    opt.value=v;opt.innerHTML=v;//this._getOptionHtml(d);
    select.appendChild(opt);});select.className='rr-property-dim-units';select.onchange=()=>{this.$_updateValue();this._text=this._edit.value;};container.appendChild(select);}_doPrepareElement(doc,source){const v=this.model.getValue(source);const n=this._oldValue=parseFloat(v);let idx=0;if(isNaN(n)){this._edit.value='';this._edit.placeholder="(Not Defined)";idx=0;}else {this._edit.value=String(n);if(typeof v==='string'){FontSizeStyleElement.UNITS.forEach((unit,i)=>{if(v.endsWith(unit)){idx=i;return true;}});}}this._select.selectedIndex=idx;this._text=this._edit.value;}reset(target){this._edit.value=this._text;this.select(target);}_getEdit(){return this._edit;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_updateValue(){const i=this._select.selectedIndex||0;let v=this._edit.value;v=v?v+FontSizeStyleElement.UNITS[i]:undefined;this._doUpdateValue(this.model,v);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    FontSizeStyleElement.UNITS=['px','pt'];////////////////////////////////////////////////////////////////////////////////
    /** @internal */class ColorPropElement extends PropertyRowElement{//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static createEdit(doc){const edit=doc.createElement('input');edit.type='text';edit.className='rr-property-edit';edit.spellcheck=false;return edit;}static createColor(doc,container){const colorBack=doc.createElement('div');colorBack.className='rp-color-style';const color=doc.createElement('span');color.className=ColorPropElement.BOX_STYLE;color.style.backgroundColor=ColorPropElement.NULL_COLOR;colorBack.appendChild(color);container.appendChild(colorBack);return color;}static getColor(edit){let s=edit.value;if(s){s=s.trim();}if(s&&!s.startsWith('#')&&!s.startsWith('rgb')){if(!isNaN(parseFloat(s))){s='#'+s;}}return s;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    ColorPropElement.NULL_COLOR='#aaa';ColorPropElement.BOX_STYLE='rp-color-style-box';////////////////////////////////////////////////////////////////////////////////
    /** @internal */class DimensionPropertyElement extends PropertyRowElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,'dimensionPropertyView',model);}//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    static createDimEdit(doc){const edit=doc.createElement('input');edit.type='number';edit.className='rr-property-dim';edit.pattern='[0-9.]+';edit.min='0';return edit;}static createDimSelect(doc){const select=doc.createElement('select');DimensionPropertyElement.UNITS.forEach(v=>{const opt=doc.createElement('option');//opt.className = this._getOptionStyle(d);
    opt.value=v;opt.innerHTML=v;//this._getOptionHtml(d);
    select.appendChild(opt);});select.className='rr-property-dim-units';return select;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doInitContainer(doc,container){// edit
    const edit=this._edit=DimensionPropertyElement.createDimEdit(doc);// undefined일 때, down, up key로 값을 증감 시키는 동작을 막는다.
    edit.onkeydown=e=>{const units={'%':'%','p':'px','t':'pt','m':'mm','c':'cm','i':'in'};for(let p in units){if(e.key===p){this._select.value=units[p];e.preventDefault();e.stopImmediatePropagation();return;}}if(isNaN(this._oldValue)&&this.model instanceof SizeProperty&&(e.key==='ArrowDown'||e.key==='ArrowUp')){e.preventDefault();e.stopImmediatePropagation();}};edit.onchange=()=>{this.$_updateValue();};container.appendChild(edit);// units
    const select=this._select=DimensionPropertyElement.createDimSelect(doc);select.onchange=()=>{this.$_updateValue();};container.appendChild(select);}_doPrepareElement(doc,source){const v=this.model.getValue(source);const n=this._oldValue=parseFloat(v);let idx=0;if(isNaN(n)){this._edit.value='';this._edit.placeholder="(Not Defined)";}else {this._edit.value=String(n);if(typeof v==='string'){DimensionPropertyElement.UNITS.forEach((unit,i)=>{if(v.endsWith(unit)){idx=i;return true;}});}}this._text=this._edit.value;this._select.selectedIndex=idx;}reset(target){this._edit.value=this._text;this.select(target);}_getEdit(){return this._edit;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_updateValue(){const i=this._select.selectedIndex||0;let v=this._edit.value;//if (isNaN(this._oldValue)) debugger;
    v=v?v+DimensionPropertyElement.UNITS[i]:undefined;this._doUpdateValue(this.model,v);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    DimensionPropertyElement.UNITS=['px','pt','mm','cm','in','%'];////////////////////////////////////////////////////////////////////////////////
    var InspectorDisplayMode;(function(InspectorDisplayMode){InspectorDisplayMode["CATEGORY"]="category";InspectorDisplayMode["NAME"]="name";})(InspectorDisplayMode||(InspectorDisplayMode={}));////////////////////////////////////////////////////////////////////////////////
    /**
     * Json 모델 구성 요소.
     */class JsonItem extends Base{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super();this._name=name;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** name */get name(){return String(this._name);}set name(value){if(value!=this._name){this._name=value;}}/** index */get index(){return this._name;}/** parent */get parent(){return this._parent;}/** get */get json(){return this._parent&&this._parent.json;}/** level */get level(){return this._parent?this._parent.level+1:0;}/** revealed */get revealed(){return !this._parent||this._parent.revealed;}isGroup(){return false;}getPath(){const path=[this];let p=this._parent;while(p){path.push(p);p=p._parent;}return path.reverse();}getUrl(){let separator=arguments.length>0&&arguments[0]!==undefined?arguments[0]:JsonItem.URL_SEPARATOR;const p=this._parent;let s=this.name;if(p){s=p.getUrl(separator)+separator+s;}return s;}getDisplayUrl(){let separator=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'.';const p=this._parent;let s=this.name;if(p instanceof JsonListItem){s=p.getDisplayUrl(separator)+'['+s+']';}else if(this._parent){s=p.getDisplayUrl(separator)+separator+s;}return s;}getDataUrl(){let separator=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'.';const p=this._parent;let s=this.name;if(p&&p.level>0){s=p.getDataUrl(separator)+separator+s;}return s;}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    JsonItem.URL_SEPARATOR='/';JsonItem.TAG='__tag_';/**
     */class JsonGroupItem extends JsonItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name);//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._items=[];this._expanded=true;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get count(){return this._items.length;}/** expanded */get expanded(){return this._expanded;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    indexOf(item){return this._items.indexOf(item);}get(index){return this._items[index];}set(index,item){const old=this._items[index];if(old!==item){this._items[index]=item;item['_parent']=this;old['_parent']=null;}}contains(item){return this._items.indexOf(item)>=0;}canAdd(item){return !!item;}add(item){if(item&&this._items.indexOf(item)<0){this._addItem(item);return true;}}canRemove(item){return !!item;}remove(item){const i=this._items.indexOf(item);if(i>=0){this._removeItem(item,i);return true;}}collectItems(items){for(let item of this._items){items.push(item);if(item instanceof JsonGroupItem){item.collectItems(items);}}}collectVisibles(visibles){for(let item of this._items){visibles.push(item);if(item instanceof JsonGroupItem&&item.expanded){item.collectVisibles(visibles);}}}findByTag(tag){if(tag===this.tag)return this;for(let item of this._items){if(item instanceof JsonGroupItem){const item2=item.findByTag(tag);if(item2)return item2;}else if(item===tag){return item;}}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    isGroup(){return this instanceof JsonGroupItem;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _createItem(name,v){if(v==null){return new JsonNullItem(name);}if(typeof v==='string'){return new JsonStringItem(name,v);}if(typeof v==='number'){return new JsonNumberItem(name,v);}if(typeof v==='boolean'){return new JsonBooleanItem(name,v);}if(Utils.isValueArray(v)){return new JsonArrayItem(name,v);}if(Utils.isArray(v)){return new JsonListItem(name,v);}if(v){return new JsonObjectItem(name,v);}}_addItem(item){this._items.push(item);item['_parent']=this;}_removeItem(item,index){this._items.splice(index,1);item['_parent']=null;}$_expand(value,recursive){if(value!=this._expanded||recursive){let forced=false;if(value!=this._expanded){this._expanded=value;forced=true;}if(recursive){for(let item of this._items){if(item instanceof JsonGroupItem){if(item.$_expand(value,true)){forced=true;}}}}return forced;}}}/**
     */class JsonObjectItem extends JsonGroupItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name,source){super(name);//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._nameMap={};this._parse(source);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    find(name){return this._nameMap[name];}isValidName(item,newName){const item2=this._nameMap[newName];return !item2||item2===item;}getValidName(prefix){let s=prefix;let x=1;while(true){let found=false;for(let n in this._nameMap){if(s===n){s=prefix+'-'+x++;found=true;break;}}if(!found)break;}return s;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    save(){const obj={};for(let item of this._items){obj[item.name]=item.save();}return obj;}canAdd(item){if(super.canAdd(item)){if(item.name){if(this._nameMap[item.name]){throw new Error('Already same name exisits: '+item.name);}return true;}}return false;}_addItem(item){super._addItem(item);this._nameMap[item.name]=item;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _parse(source){for(let p in source){if(p===JsonItem.TAG){this.tag=source[p];}else {const item=this._createItem(p,source[p]);if(item){this._addItem(item);this._nameMap[p]=item;}}}}}/**
     */class JsonListItem extends JsonGroupItem{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name,source){super(name);this._parse(source);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    save(){const arr=[];for(let item of this._items){arr.push(item.save());}return arr;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _parse(source){for(let i=0;i<source.length;i++){const item=this._createItem(i,source[i]);this._addItem(item);}}}/**
     */class JsonValueItem extends JsonItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name,value){super(name);this._value=value;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** value */get value(){return this._value;}set value(value){if(value!=this._value){this._value=value;}}/** displayText */get displayText(){if(typeof this.value==='undefined')return 'UNDEFINED';if(this.value===null)return 'null';return this._getDisplayText(this.value);}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    parseValue(s){if(typeof s==='undefined')return undefined;if(s===null)return null;if(s=='null')return null;if(s=='UNDEFINED')return undefined;return this._doParseValue(s);}valueEquals(v){return this.value==v;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    save(){return this._value;}}/**
     */class JsonNullItem extends JsonValueItem{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name){super(name,null);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    save(){return null;}_getDisplayText(value){return 'null';}_doParseValue(s){return null;}}/**
     */class JsonStringItem extends JsonValueItem{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name,value){super(name,value);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getDisplayText(value){//return '"' + value + '"';
    return value;}_doParseValue(s){if(s.startsWith('"')&&s.endsWith('"')){return s.slice(1,s.length-1);}return s;}}/**
     */class JsonNumberItem extends JsonValueItem{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name,value){super(name,value);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getDisplayText(value){return isNaN(value)?'NaN':String(value);}_doParseValue(str){if(str=='NaN')return NaN;return parseFloat(str);}}/**
     */class JsonBooleanItem extends JsonValueItem{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name,value){super(name,value);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getDisplayText(value){return value?'true':'false';}_doParseValue(str){const s=str.trim().toLowerCase();return s==='true'||s==='t'||s==='1';}}/**
     */class JsonArrayItem extends JsonValueItem{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(name,value){super(name,value);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getDisplayText(value){let s='';const arr=new Array(value.length);for(let i=0;i<value.length;i++){if(typeof value[i]==='string'){arr[i]='"'+value[i]+'"';}else {arr[i]=value[i];}}s+=arr.join(',');return s;}_doParseValue(str){const arr=str.split(/\s*\,\s*/);for(let i=0;i<arr.length;i++){const v=arr[i];if(v.startsWith('"')&&v.endsWith('"')){arr[i]=v.slice(1,v.length-1);}else {arr[i]=parseFloat(v);}}return arr;}valueEquals(v){if(Utils.isArray(v)&&Utils.isArray(this.value)){if(v.length&&this.value.length){for(let i=0;i<v.length;i++){if(v[i]!=this.value[i])return false;}return true;}}else {return !this.value;}}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Json value item의 값을 변경한다.
     */class JsonSetValueCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item,value){super('Set Value');this._item=item;this._newValue=value;this._oldValue=item.value;}_doDispose(){}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._item.value=this._newValue;}undo(){this._item.value=this._oldValue;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._item;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Json item을 추가한다.
     */class JsonAddItemCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(parent,item){super('Add Item');this._model=parent.json;this._parent=parent;this._item=item;}_doDispose(){this._model=this._parent=this._item=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._model['$_addItem'](this._parent,this._item);}undo(){this._model['$_removeItem'](this._item);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._item;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Json item을 제거한다.
     */class JsonRemoveItemCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item){super('Remove Item');this._model=item.json;this._parent=item.parent;this._item=item;}_doDispose(){this._model=this._parent=this._item=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._model['$_removeItem'](this._item);}undo(){this._model['$_addItem'](this._parent,this._item);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._item;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Json item의 이름을 변경한다.
     */class JsonSetNameCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item,newName){super('Set Value');this._item=item;this._newName=newName;this._oldName=item.name;}_doDispose(){}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._item.name=this._newName;}undo(){this._item.name=this._oldName;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._item;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Json item을 교체한다.
     */class JsonSetItemCommand extends EditCommand{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(item,newItem){super('Set Item');this._parent=item.parent;this._index=this._parent.indexOf(item);this._oldItem=item;this._newItem=newItem;}_doDispose(){this._parent=this._oldItem=this._newItem=null;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    redo(redoing){this._parent.set(this._index,this._newItem);}undo(){this._parent.set(this._index,this._oldItem);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get source(){return this._oldItem;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Json view/edit model.
     * 최초에 로드되는 json 소스는 무결한 상태라고 가정한다. 즉, validation 하지 않는다.
     */class JsonModel extends EventAware{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(source){let undoable=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;let rootName=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';super();this._editable=true;this._rootName=rootName;undoable&&(this._commands=new EditCommandStack(this));this.$_load(source);}//-------------------------------------------------------------------------
    // IEditCommandStackOwner
    //-------------------------------------------------------------------------
    editCommandStackChanged(stack,cmd,undoable,redoable){this.fireEvent(JsonModel.COMMANDS_STACK_CHANGED,undoable,redoable);}editCommandStackDirtyChanged(stack){this.fireEvent(JsonModel.DIRTY_CHANGED);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** dirty */get dirty(){return this._commands.canUndo;}/** rootName */get rootName(){return this._rootName;}/** root */get root(){return this._root;}/** rootGroup */get rootGroup(){return this._root instanceof JsonGroupItem?this._root:null;}/** allItems */get allItems(){return this._items;}/** visiblItems */get visibleItems(){return this._visibles;}/** firstVisible */get firstVisible(){return this._visibles[0];}/** lastVisible */get lastVisible(){return this._visibles[this._visibles.length-1];}get editable(){return this._editable;}set editable(value){if(value!==this._editable){this._editable=value;this.$_refreshVisibles();}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    isRoot(item){return item===this._root;}load(source){this.$_load(source);this._fireReset();}save(){return this._root.save();}saveAsString(){const obj=this._root.save();return JSON.stringify(obj,null,2);}expand(){let item=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;let recursive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!item&&this._root instanceof JsonGroupItem){item=this._root;}if(item&&item['$_expand'](true,recursive)){this.$_refreshVisibles();return true;}}collapse(){let item=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;let recursive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!item&&this._root instanceof JsonGroupItem){item=this._root;}if(item&&item['$_expand'](false,recursive)){this.$_refreshVisibles();return true;}}reveal(item){if(item&&!item.revealed){const path=item.getPath();for(let i=0;i<path.length-1;i++){path[i]['$_expanded']=true;}return true;}}/**
         * url이 '/'로 시작되면 from은 무시한다.
         */findItem(url){let from=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;const sep=JsonItem.URL_SEPARATOR;if(this._root instanceof JsonNullItem){if(url==sep)return this._root;return null;}if(url.charAt(url.length-1)=='/'){url=url.substring(0,url.length-1);}if(url.startsWith(sep)){from=this._root;url=url.substr(1);}const arr=url.split(sep);let g=from||this._root;let i=0;while(g&&i<arr.length){if(g instanceof JsonObjectItem){const s=arr[i++];g=g.find(s);}else if(g instanceof JsonListItem){const n=parseInt(arr[i++]);g=g.get(n);}else {return;}}return g;}findByTag(tag){if(this._root instanceof JsonGroupItem){return this._root.findByTag(tag);}}getNextVisible(item){const i=Math.max(0,Math.min(this._visibles.length-1,this._visibles.indexOf(item)+1));return this._visibles[i];}getPrevVisible(item){const i=Math.max(0,Math.min(this._visibles.length-1,this._visibles.indexOf(item)-1));return this._visibles[i];}clean(){this._commands.flush();}undo(){return this._commands&&this._commands.undo();}redo(){return this._commands&&this._commands.redo();}isEditable(item){// return !(item instanceof JsonNullItem || item instanceof JsonBooleanItem);
    //return !(item instanceof JsonNullItem);
    return true;}addItem(parent,item){if(parent&&item&&parent.canAdd(item)&&!parent.contains(item)){if(this._commands){this._commands.execute(new JsonAddItemCommand(parent,item));}else {this.$_addItem(parent,item);}this.$_buildItems();return true;}}canRemove(item){return item!==this._root&&item&&item.parent&&item.parent.canRemove(item);}removeItem(item){if(item!==this._root&&item&&item.parent){if(this._commands){this._commands.execute(new JsonRemoveItemCommand(item));}else {this.$_removeItem(item);}this.$_buildItems();return true;}}changeName(item,newName){if(item&&item.name!=newName){const old=item.name;if(item.parent instanceof JsonObjectItem&&!item.parent.isValidName(item,newName)){this._fireNameChanged(item,old);return false;}if(this._commands){this._commands.execute(new JsonSetNameCommand(item,newName));}else {item.name=newName;}this._fireNameChanged(item,old);return true;}}changeValue(item,str){if(!item)return false;const value=item.parseValue(str);if(item&&!item.valueEquals(value)){if(item instanceof JsonNumberItem){const n=Number(value);if(isNaN(n))return;}const old=item.value;if(this._commands){this._commands.execute(new JsonSetValueCommand(item,value));}else {item.value=value;}this._fireValueChanged(item,old);return true;}}changeType(item,cls){if(!(item instanceof cls)){const v=item.value;let item2;if(cls===JsonNullItem){item2=new JsonNullItem(item.name);}else if(cls===JsonStringItem){item2=new JsonStringItem(item.name,String(v));}else if(cls===JsonBooleanItem){item2=new JsonBooleanItem(item.name,!!v);}else if(cls===JsonNumberItem){item2=new JsonNumberItem(item.name,+v);}if(item2){if(this._commands){this._commands.execute(new JsonSetItemCommand(item,item2));}else {const p=item.parent;p.set(p.indexOf(item),item2);}this.$_buildItems();this._fireItemChanged(item,item2);return item2;}}return item;}search(key,options){const results=[];if(!options.caseSensitive){key=key.toLowerCase();}for(let item of this._items){if(item instanceof JsonValueItem){const t=item.displayText;if(t){let s=t;if(!options.caseSensitive){s=s.toLowerCase();}if(options.wholeWord&&s===key||!options.wholeWord&&s.indexOf(key)>=0){results.push({item:item,prop:item.displayText});}}}}//this._page.search(key, options, results);
    return results.length>0?results:null;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_load(source){if(source==null){this._root=new JsonNullItem('/');}else if(Utils.isArray(source)){this._root=new JsonListItem('/',source);}else {this._root=new JsonObjectItem('/',source);}const model=this;Object.defineProperty(this._root,"json",{get:function(){return model;}});this.$_buildItems();}$_buildItems(){this._items=[this._root];this._visibles=[this._root];if(this._root instanceof JsonGroupItem){this._root.collectItems(this._items);if(this._root.expanded){this._root.collectVisibles(this._visibles);}}}$_refreshVisibles(){this._visibles=[this._root];if(this._root instanceof JsonGroupItem&&this._root.expanded){this._root.collectVisibles(this._visibles);}}$_addItem(parent,item){if(parent&&parent.add(item)){const visibles=this._visibles;let i=visibles.indexOf(parent);if(i>=0){const lev=parent.level;const len=visibles.length;while(++i<len){if(visibles[i].level<=lev){break;}}visibles.splice(i,0,item);}this._items.push(item);this._fireItemAdded(parent,item);}}$_removeItem(item){if(!item)return;const lev=item.level;const p=item.parent;if(p&&p.remove(item)){const items=this._items;const visibles=this._visibles;let i=visibles.indexOf(item);if(i>=0){const len=visibles.length;let n=1;while(i<len-1){if(visibles[i+1].level<=lev){break;}i++;n++;}visibles.splice(i,n);}i=items.indexOf(item);this._items.splice(i,1);this._fireItemRemoved(p,item);}}//-------------------------------------------------------------------------
    // event members
    //-------------------------------------------------------------------------
    _fireReset(){this.fireEvent(JsonModel.RESET);}_fireNameChanged(item,oldName){this.fireEvent(JsonModel.NAME_CHANGED,item,item.name,oldName);}_fireValueChanged(item,oldValue){this.fireEvent(JsonModel.VALUE_CHANGED,item,item.value,oldValue);}_fireItemChanged(item,newItem){this.fireEvent(JsonModel.ITEM_CHANGED,item,newItem);}_fireItemAdded(parent,item){this.fireEvent(JsonModel.ITEM_ADDED,parent,item);}_fireItemRemoved(parent,item){this.fireEvent(JsonModel.ITEM_REMOVED,parent,item);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // events
    JsonModel.COMMANDS_STACK_CHANGED="onJsonCommandStackChanged";JsonModel.DIRTY_CHANGED="onJsonDirtyChanged";JsonModel.RESET="onJsonReset";JsonModel.NAME_CHANGED="onJsonNameChanged";JsonModel.VALUE_CHANGED="onJsonValueChanged";JsonModel.ITEM_CHANGED="onJsonItemChanged";JsonModel.ITEM_ADDED="onJsonItemAdded";JsonModel.ITEM_REMOVED="onJsonItemRemoved";////////////////////////////////////////////////////////////////////////////////
    /** @internal */class JsonElement extends VisualElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,name){super(doc,name);this._vindex=-1;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get measuredWidth(){return this._measuredWidth;}get measuredHeight(){return this._measuredHeight;}get vindex(){return this._vindex;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    measure(hintWidth,hintHeight){const sz=this._doMeasure(hintWidth,hintHeight);this._measuredWidth=sz.width;this._measuredHeight=sz.height;return sz;}layoutContent(){this._doLayoutContent();}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return;}_doDraw(dom){}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _doMeasure(hintWidth,hintHeight){return new Size(hintWidth,hintHeight);}_doLayoutContent(){}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class JsonBodyView extends JsonElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(editor,draggable){super(editor.doc,'jsonBodyView');this._rowMap=new Map();this._itemMap=new Map();this._editor=editor;this._draggable=draggable;}_doDispose(){this._tbody=this._thead=this._table=null;this._editor=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get draggable(){return this._draggable;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    isExpander(dom){return dom&&dom.classList.contains(JsonBodyView.EXPANDER);}rowOf(dom){let p=dom;while(p){if(p instanceof HTMLTableRowElement)return p;p=p.parentElement;}}itemOf(dom){const row=this.rowOf(dom);return row&&this._rowMap.get(row);}rowOfitem(item){return this._itemMap.get(item);// TODO: 편집 가능 부분을 별도로 빌드할 때 es6으로 설정하면 _itemMap 제거하고 아래처럼! (ie11 문제)
    // for (let [k, v] of this._rowMap) {
    //     if (v === item) return k;
    // }
    }getFirstValue(){const rows=this._tbody.rows;for(let i=0;i<rows.length;i++){const row=rows[i];if(this._rowMap.get(row)instanceof JsonValueItem){return this.$_getValueDom(row);}}}getLastValue(){const rows=this._tbody.rows;for(let i=rows.length-1;i>=0;i--){const row=rows[i];if(this._rowMap.get(row)instanceof JsonValueItem){return this.$_getValueDom(row);}}}getNameDom(row){return this.$_getNameDom(row);}getValueDom(row){return this.$_getValueDom(row);}getNextValue(dom){const rows=this._tbody.rows;let row=this.rowOf(dom);if(row){for(let i=row.rowIndex;i<rows.length;i++){row=rows[i];if(this._rowMap.get(row)instanceof JsonValueItem){return this.$_getValueDom(row);}}return dom;}}getPrevValue(dom){const rows=this._tbody.rows;let row=this.rowOf(dom);if(row){for(let i=row.rowIndex-2;i>=0;i--){row=rows[i];if(this._rowMap.get(row)instanceof JsonValueItem){return this.$_getValueDom(row);}}return dom;}}getEditingRow(){let dom=this.doc.activeElement;while(dom){if(dom instanceof HTMLTableRowElement){const item=this._rowMap.get(dom);if(item)return dom;}dom=dom.parentElement;}}getEditingItem(){const row=this.getEditingRow();return row&&this._rowMap.get(row);}makeRowVisible(row){//console.log('MAKE ROW VISIBLE', row.rowIndex);
    row.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"});// const t = this.scrollTop;
    // const rc = this.getBoundingRect();
    // const r = row.getBoundingClientRect();
    // const y = r.top - this._table.getBoundingClientRect().y;
    // let p = t;
    // if (y < t) {
    //     p = y;
    // } else if (y + r.height - t >= rc.height) {
    //     p = y + r.height - rc.height;
    // }
    // this.scrollDom(0, p);
    }isRowMenu(dom){if(dom.classList.contains(JsonBodyView.ROW_MENU)){const tr=this.$_getTr(dom);const item=this._rowMap.get(tr);return item;}}beginEdit(item){const tr=this.rowOfitem(item);if(tr){const div=tr.children[2].lastElementChild;const target=this._editor.nameEditable?div.children[1]:div.children[3];if(target instanceof HTMLElement){this._editor.setFocus();target.focus();return true;}}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _createDom(doc){const div=super._createDom(doc);let css=div.style;css.overflow='auto';const table=this._table=doc.createElement("table");css=table.style;table.className="json-table";css.setProperty("table-layout","fixed","important");// css.setProperty("width", "0px", "important");
    css.setProperty("width","100%","important");this._thead=doc.createElement("thead");this.$_prepareHead(doc,this._thead);table.appendChild(this._thead);this._tbody=doc.createElement("tbody");table.appendChild(this._tbody);div.appendChild(table);return div;}_getCssSelector(){return 'json-body';}_doMeasure(hintWidth,hintHeight){this.$_prepareRows(this.doc,this._tbody);return new Size(hintWidth,hintHeight);}_doLayoutContent(){}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_prepareHead(doc,head){let row;row=doc.createElement("tr");head.appendChild(row);row.setAttribute("aria-hidden","true");const css=row.style;//css.border = "0px none !important";
    css.setProperty("border","0px none","important");// TODO: 이렇게 하지 않으면 틀어진다! WHY?
    for(let i=0;i<2;i++){const th=doc.createElement("th");th.scope="col";let css=th.style;css.setProperty("visibility","hidden","important");css.setProperty("margin","0px","important");css.setProperty("padding","0px","important");css.setProperty("font-size","0px","important");css.setProperty("line-height","0px","important");css.height="0px";css.width="24px";row.appendChild(th);}}$_prepareRows(doc,body){const editor=this._editor;const model=editor.model;const focused=editor.focused;const items=editor.model&&editor.model.visibleItems||[];const trs=body.rows;while(trs.length<items.length){const tr=doc.createElement('tr');body.appendChild(tr);}while(trs.length>items.length){body.removeChild(body.lastChild);}this._rowMap.clear();this._itemMap.clear();for(let i=0,cnt=trs.length;i<cnt;i++){const tr=trs[i];const item=items[i];tr.className=item===focused?'json-focused':'';this.$_prepareRow(doc,model,item,tr,i);this._rowMap.set(tr,item);this._itemMap.set(item,tr);}}$_prepareRow(doc,model,item,trow,index){if(trow.childElementCount==0){for(let i=0;i<3;i++){const td=doc.createElement('td');trow.appendChild(td);}}// mover
    let td=trow.children[0];let button=td.firstElementChild;if(!button){button=doc.createElement('button');button.className=JsonBodyView.ROW_MOVER;if(this._draggable){button.draggable=true;button.dataset.url=item.getDataUrl();}td.appendChild(button);}// menu
    td=trow.children[1];button=td.firstElementChild;if(!button){button=doc.createElement('button');button.className=JsonBodyView.ROW_MENU;td.appendChild(button);}// content
    td=trow.children[2];let div=td.lastChild;if(!div){div=this.$_prepareCell(doc,item);td.appendChild(div);}div.style.marginLeft=16*item.level+'px';this.$_layoutCell(doc,model,item,div,index===0&&model.isRoot(item));}$_prepareCell(doc,item){const div=doc.createElement('div');div.className='json-content';for(let i=0;i<4;i++){const span=document.createElement('span');if(i==1&&this._draggable&&item instanceof JsonValueItem){span.dataset.url=item.getDataUrl();span.draggable=true;}div.appendChild(span);}return div;}$_layoutCell(doc,model,item,container,root){const cells=container.children;// expander
    let button=cells[0];if(item instanceof JsonGroupItem){if(!button){container.appendChild(button=doc.createElement('button'));}if(item.expanded){button.className=JsonBodyView.EXPANDER_EXPANDED;}else {button.className=JsonBodyView.EXPANDER_COLLAPSED;}}else if(button){button.className=JsonBodyView.EXPANDER;}// name
    let span=cells[1];span.className='json-field';span.contentEditable=this._editor.nameEditable?'true':'false';span.textContent=root?this._editor.model.rootName||item.name:item.name;span.spellcheck=false;// content
    if(item instanceof JsonGroupItem){span=cells[2];span.className='json-count';if(item instanceof JsonObjectItem){span.textContent='{'+item.count+'}';}else if(item instanceof JsonListItem){span.textContent='['+item.count+']';}span=cells[3];span.contentEditable='false';span.className='json-value';span.textContent='';}else if(item instanceof JsonValueItem){const array=item instanceof JsonArrayItem;span=cells[2];span.className='json-separator';span.textContent=array?'['+item.value.length+'] :':':';span=cells[3];if(model.editable){span.contentEditable='true';span.spellcheck=false;}else {span.contentEditable='false';}span.className='json-value';if(array){span.dataset.type='array';}else if(item instanceof JsonNumberItem){span.dataset.type='number';}else if(item instanceof JsonBooleanItem){span.dataset.type='bool';}else if(item instanceof JsonNullItem){span.dataset.type='null';}else {span.dataset.type='string';}span.textContent=item.displayText;}}$_getNameDom(row){const div=row.cells[2].firstElementChild;const span=div.children[1];return span;}$_getValueDom(row){const div=row.cells[2].firstElementChild;const span=div.children[3];return span;}$_focusedChanged(old,focused){let tr=this.rowOfitem(old);if(tr){tr.classList.remove('json-focused');}tr=this.rowOfitem(focused);if(tr){tr.classList.add('json-focused');this.makeRowVisible(tr);}}$_getTr(dom){do{if(dom instanceof HTMLTableRowElement)return dom;dom=dom.parentElement;}while(dom);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    JsonBodyView.EXPANDER='json-expander';JsonBodyView.EXPANDER_EXPANDED='json-expander json-expander-expanded';JsonBodyView.EXPANDER_COLLAPSED='json-expander json-expander-collapsed';JsonBodyView.ROW_MOVER='json-row-mover';JsonBodyView.ROW_MENU='json-row-menu';////////////////////////////////////////////////////////////////////////////////
    /** @internal */class JsonSelectionTool extends VisualTool{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(editor){super(editor,'jsonSelectionTool');this._editor=editor;}_doDispose(){this._editor=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** viewer */get viewer(){return this._editor;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    isMouseEventTarget(elt){// if (elt instanceof CellElement) {
    //     const table = elt.getAncestor(TableBaseElement) as TableBaseElement;
    //     if (table) {
    //         const dom = table["getContentAt"](elt.index);
    //         return dom == this.mouseEventTarget;
    //     }
    // }
    return super.isMouseEventTarget(elt);}_doMouseDown(event){const editor=this._editor;const body=editor.bodyView;const target=this.mouseEventTarget;const row=body.rowOf(target);const item=body.isRowMenu(target);if(item){editor.onRowMenuClick&&editor.onRowMenuClick(item);}else if(body.isExpander(target)){const item=body.itemOf(target);if(item.isGroup()){item.expanded?editor.collapse(item):editor.expand(item);}}/**
             * 이전 포커스된 행의 정보가 editor.focused에 담겨있다.
             * - Json Item Name 값이 실제 행에 입력된 정보와 다르면 changeName 발생시킴
             * - Json Item Value 값이 실제 행에 입력된 정보와 다르면 changeValue 발생시킴
            **/if(editor.focused instanceof JsonValueItem){this.$_fireChangeEvent(editor.focused);}// 정상적인 Json Item 행이라면 포커스 정보에 입력
    if(row){editor.focused=body.itemOf(row);}return true;}_doMouseMove(event){// const x = event["mouseX"];
    // const y = event["mouseY"];
    // const ctrl = event.ctrlKey || event.metaKey;
    // const shift = event.shiftKey;
    // const alt = event.altKey;
    // const viewer = this._editor;
    }/** 그리드 밖에서도 호출된다. */_doMouseUp(event){// const x = event["mouseX"];
    // const y = event["mouseY"];
    // const viewer = this._editor;
    }/** 그리드 밖에서 마우스를 놓으면 호출되지 않는다. */_doClick(event,x,y){// x = x || event["mouseX"];
    // y = y || event["mouseY"];
    // const ctrl = event.ctrlKey || event.metaKey;
    // const shift = event.shiftKey;
    // const alt = event.altKey;
    // const viewer = this._editor;
    this.findElementAt(x,y,false);}_doDblClick(event){// const x = event["mouseX"];
    // const y = event["mouseY"];
    // const ctrl = event.ctrlKey || event.metaKey;
    // const shift = event.shiftKey;
    // const alt = event.altKey;
    // const viewer = this._editor;
    // const elt = this.findElementAt(x, y, false);
    // if (elt && elt === this._clickElement) {
    //     // if (elt instanceof OutlineRowElement) {
    //     //     elt.expanded ? viewer.collapse(elt) : viewer.expand(elt)
    //     // }
    // }
    }_doMouseWheel(event){// const editor = this._editor;
    const isHorz=event.shiftKey||Math.abs(event.deltaX)>Math.abs(event.deltaY);//console.log('WHEEL: ' + event.deltaX + ', ' + event.deltaY);
    if(isHorz){// const left = grid.leftPos;
    // const wheelScrollPos = Math.abs(options.wheelScrollHorz || 16) * ( (event.deltaX || event.deltaY) > 0 ? 1 : -1);
    // grid.leftPos = left + wheelScrollPos;
    // // IE, Edge의 경우 forword, backword가 실행되는 경우가 있다. return true로 막아준다.
    // // 모두 막아버린다.
    return true;}return false;}_doMouseEnter(event){}_doMouseLeave(event){// const x = event["mouseX"];
    // const y = event["mouseY"];
    }_doMouseOver(event){}_doContextMenu(event){return false;}_doKeyDown(event){const key=event.keyCode;const ctrl=event.ctrlKey;const isMac=Utils.isMac;const meta=isMac&&event.metaKey||!isMac&&event.ctrlKey;const shift=event.shiftKey;const target=event.target instanceof HTMLElement?event.target:null;const editor=this._editor;const focused=editor.focused;const item=editor.bodyView.itemOf(target);let rslt=false;switch(key){case 13/* Keys.ENTER */:// mac에서는 shift를 눌러야 줄이 나눠진다.
    if(!ctrl&&!meta&&!shift){rslt=this.$_enter(target,item||focused);}break;case 27/* Keys.ESC */:rslt=this.$_esc(target,item);break;case 9/* Keys.TAB */:if(shift){rslt=this.$_move(target,focused,-1);}else {rslt=this.$_move(target,focused,1);}break;case 36/* Keys.HOME */:if(meta){rslt=this.$_home();}break;case 35/* Keys.END */:if(meta){rslt=this.$_end();}break;case 37/* Keys.LEFT */:rslt=this.$_left(target,focused);break;case 39/* Keys.RIGHT */:rslt=this.$_right(target,focused);break;case 40/* Keys.DOWN */:rslt=this.$_move(target,focused,1);break;case 38/* Keys.UP */:rslt=this.$_move(target,focused,-1);break;}if(rslt){event.preventDefault();event.stopImmediatePropagation();}return rslt||super._doKeyDown(event);}_doKeyPress(event){return false;}_doKeyUp(event){return false;}/**
         * sykim. onBlur 이벤트를 사용하고 싶어도 Json Editor 영역을 벗어나서 클릭하면 감지를 못한다.
         * - 즉, Json Editor에서 편집하다가 완전 다른 영역을 클릭하면 onJsonFocusedLeave 이벤트를 활용해야한다.
         */_doFocusLeave(event){const editor=this._editor;if(editor.focused instanceof JsonValueItem){const row=editor.bodyView.rowOfitem(editor.focused);const nameTarget=editor.bodyView.getNameDom(row);const valueTarget=editor.bodyView.getValueDom(row);editor['_fireFocusedLeave'](editor.focused,nameTarget.textContent,valueTarget.textContent);}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_enter(target,item){if(target){const editor=this._editor;const body=editor.bodyView;if(item){const row=body.rowOfitem(item);if(item.isGroup()){target=body.getNextValue(row);editor.focused=body.itemOf(target);}else if(editor.isEditing()){return this.$_move(target,item,1);}else {target=body.getValueDom(row);}target&&target.focus();Utils.selectAll(target);return true;}}return false;}$_esc(target,item){const editor=this._editor;if(target){target.blur();if(item instanceof JsonValueItem){if(editor.isName(target))target.textContent=item.name;else target.textContent=item.value;return true;}}}$_left(target,item){const editor=this._editor;if(!editor.isEditing()){if(item.isGroup()){editor.collapse(item);return true;}}}$_right(target,item){const editor=this._editor;if(!editor.isEditing()){if(item.isGroup()){editor.expand(item);return true;}}}$_move(target,item,dy){if(target){const editor=this._editor;const targetItem=editor.bodyView.itemOf(target);const model=editor.model;let focused=editor.focused;if(targetItem instanceof JsonValueItem)this.$_fireChangeEvent(targetItem);if(editor.isEditing())target.blur();// this.$_commitEdit(item, target);
    if(focused){if(dy>0)focused=model.getNextVisible(focused);else if(dy<0)focused=model.getPrevVisible(focused);}else {focused=model.firstVisible;}if(focused instanceof JsonValueItem&&model.isEditable(focused)){const row=editor.bodyView.rowOfitem(focused);target=editor.bodyView.getValueDom(row);target&&target.focus();Utils.selectAll(target);}else {editor.setFocus();}editor.focused=focused;return true;}return false;}$_home(){const item=this._editor.bodyView.getFirstValue();if(item){item.focus();return true;}}$_end(){const item=this._editor.bodyView.getLastValue();if(item){item.focus();return true;}}$_commitEdit(item,target){const editor=this._editor;target.blur();if(editor.isName(target)){if(!editor.model.changeName(item,target.textContent)){editor.invalidateLayout();return false;}return true;}else {if(!editor.model.changeValue(item,target.textContent)){editor.invalidateLayout();return false;}return true;}}$_fireChangeEvent(item){const editor=this._editor;const row=editor.bodyView.rowOfitem(item);const nameTarget=editor.bodyView.getNameDom(row);const valueTarget=editor.bodyView.getValueDom(row);const jsonItem=item;if(jsonItem.name!==nameTarget.textContent){/**
                 * - 공백의 필드명은 변경하지 않고 이름 변경 이벤트만 발생시켜준다.
                 * - Validation 처리를 할 수 있도록 nameChanged를 발생시킴.
                 */if(nameTarget.textContent.trim()===''){editor.model['_fireNameChanged'](item,item.name);}else if(!editor.model.changeName(jsonItem,nameTarget.textContent)){editor.invalidateLayout();}}if(jsonItem.value!==valueTarget.textContent){if(!editor.model.changeValue(jsonItem,valueTarget.textContent)){editor.invalidateLayout();}}}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Json model viewer/editor
     */class JsonEditor extends VisualContainer{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(containerId){let draggable=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;super(containerId);this._nameEditable=false;this.addElement(this._bodyView=new JsonBodyView(this,draggable));}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** model */get model(){return this._model;}set model(value){if(value!==this._model){this._model&&this._model.removeListener(this);this._model=value;this._model&&this._model.addListener(this);this.$_modelchanged();}}/** nameEditable */get nameEditable(){return this._nameEditable;}set nameEditable(value){if(value!=this._nameEditable){this._nameEditable=value;this.invalidateLayout();}}/** focused */get focused(){return this._focused;}set focused(value){if(value!==this._focused){const old=this._focused;this._focused=value;this.$_focusedChanged(old,this._focused);}}/** bodyView */get bodyView(){return this._bodyView;}// /** topPos */
    // get topPos(): number {
    //     return this._bodyView.scrollTop;
    // }
    // set topPos(value: number) {
    //     value = Math.max(0, Math.min(this._bodyView.contentHeight - this.getBound().height, value));
    //     if (value != this.topPos) {
    //         this._bodyView.scrollDom(this.leftPos, value);
    //     }
    // }
    // /** leftPos */
    // get leftPos(): number {
    //     return this._bodyView.scrollLeft;
    // }
    // set leftPos(value: number) {
    //     value = Math.max(0, Math.min(this._bodyView.contentWidth - this.getBound().width, value));
    //     if (value != this.leftPos) {
    //         this._bodyView.scrollDom(value, this.topPos);
    //     }
    // }
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    expand(group){let recursive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;group=group||this.model.rootGroup;if(group['$_expand'](true,recursive)){this.model['$_refreshVisibles']();this.invalidateLayout();}}collapse(group){let recursive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;group=group||this.model.rootGroup;if(group['$_expand'](false,recursive)){this.model['$_refreshVisibles']();this.invalidateLayout();}}expandAll(){this.expand(null,true);}collapseAll(){this.collapse(null,true);}isName(element){return element.classList.contains('json-field');}isValue(element){return element.classList.contains('json-value');}isEditing(){return !!this._bodyView.getEditingRow();}isEditingAt(item){item=item||this._focused;return item&&this._bodyView.getEditingItem()===item;}undo(){return this._model.undo();}redo(){return this._model.redo();}beginEdit(){let item=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return this._bodyView.beginEdit(item||this._focused);}getFocusedTag(type){let item=this._focused;if(item){let tag=item.tag;while(!(tag instanceof type)){item=item.parent;if(!item)break;tag=item.tag;}if(tag instanceof type)return tag;}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _createDefaultTool(){return new JsonSelectionTool(this);}_doPrepareContainer(dom){dom.className="json-root json-editor";}_doLayout(bounds){this._bodyView.measure(bounds.width,bounds.height);this._bodyView.setBounds(0,0,bounds.width,bounds.height);this._bodyView.layoutContent();}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_modelchanged(){this._focused=null;// this._model.refresh();
    // this._bodyView["$_modelChanged"](this._model);
    // this.invalidateLayout();
    }$_focusedChanged(old,focused){if(focused&&!focused.revealed){this._model.reveal(focused);this.invalidateLayout();}else {this._bodyView['$_focusedChanged'](old,focused);}this._fireFocusedChanged(focused,old);}//-------------------------------------------------------------------------
    // event members
    //-------------------------------------------------------------------------
    _fireFocusedChanged(focused,old){this.fireEvent(JsonEditor.FOCUSED_CHANGED,focused,old);}_fireFocusedLeave(item,name,value){this.fireEvent(JsonEditor.FOCUSED_LEAVE,item,name,value);}//-------------------------------------------------------------------------
    // JsonModel event handlers
    //-------------------------------------------------------------------------
    onJsonReset(model){this._focused=null;this.invalidateLayout();}onJsonNameChanged(model,item,name,oldName){this.invalidateLayout();}onJsonValueChanged(model,item,value,oldValue){this.invalidateLayout();}onJsonItemChanged(model,item,newItem){this.invalidateLayout();}onJsonItemAdded(model,parent,item){this.invalidateLayout();}onJsonItemRemoved(model,parent,item){this.invalidateLayout();}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // events
    JsonEditor.FOCUSED_CHANGED="onJsonFocusedChanged";JsonEditor.FOCUSED_LEAVE="onJsonFocusedLeave";////////////////////////////////////////////////////////////////////////////////
    /**
     * Local system folder 모델.
     */class FolderModel extends EventAware{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(rootPath,source){super();//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._rootVisible=true;this._visibles=[];this._inserting=false;this._rootPath=rootPath;this._rootDir=rootPath&&rootPath.endsWith('/')?rootPath.substring(0,this.rootPath.length-1):rootPath;this.$_setSource(source);}_doDispose(){this._source=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** rootPath */get rootPath(){return this._rootPath;}/** source */get source(){return this._source;}set source(value){if(value!==this._source){this.$_setSource(value);}}/** root */get root(){return this._root;}/** rootVisible */get rootVisible(){return this._rootVisible;}set rootVisible(value){if(value!=this._rootVisible){this._rootVisible=value;if(value)this._visibles.unshift(this._root);else this._visibles.shift();}}/** visibleCount */get visibleCount(){return this._visibles.length;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getVisible(index){return this._visibles[index];}findItem(source){return this._root.itemOf(source,true);}getLastVisibleOf(group){if(!group||group.isRoot){return this._visibles.length-1;}else {const level=group.level;let i=this._visibles.indexOf(group)+1;while(i<this._visibles.length){if(this._visibles[i].level<=level)break;i++;}return i-1;}}appendItems(group,source){if(group&&source&&source.length>0){const expanded=group.expanded;if(expanded){this.$_collapse(group,0);}const count=group['_addItems'](source);if(expanded){this.$_expand(group,0);}this._fireItemsAdded(group,count);}}getAbsolutePath(itemPath){return this._rootDir+itemPath;}getItemAt(path){if(path==='/'||path==='.'||path===''){return this._root;}const toks=path.split(/[\\\/]/);let g=this._root;for(let i=toks.length-1;i>=0;i--){if(!toks[i])toks.splice(i,1);}for(let i=0;i<toks.length-1;i++){g=g.find(toks[i]);if(!g)return null;}return g.find(toks[toks.length-1]);}getVisibleItems(){let from=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let to=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;const visibles=this._visibles;from=Math.max(0,from);if(to<0)to=visibles.length-1;else to=Math.min(to,visibles.length-1);if(to>=0&&to<from){const t=from;from=to;to=t;}const items=[];for(let i=from;i<=to;i++){items.push(visibles[i]);}return items;}/**
         *
         * @param g
         * @param level 0: 자신만, 1...: 상대 level
         */expand(g){let level=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;g=g||this._root;if(!g||!g.expandable||g.expanded)return false;this.$_expand(g,level);this._fireExpanded(g,true);return true;}$_expand(g,level){const visibles=this._visibles;let p=visibles.indexOf(g);if(p<0&&g!==this._root){g['$_setExpanded'](true);return;}p=g===this._root&&!this._rootVisible?0:p+1;g!==this._root&&this._rootVisible&&assert(p>0);const list=[];g['$_setExpanded'](true);this.$_collectVisibles(g,list,level);for(let item of list){visibles.splice(p++,0,item);}}expandAll(g){this.collapseAll(g);this.expand(g,Number.MAX_SAFE_INTEGER);}/**
         *
         * @param row
         * @param level 0: 자신만, 1...: 상대 level
         */collapse(g){let level=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;g=g||this._root;if(!g||!g.expandable||!g.expanded)return false;this.$_collapse(g,level);this._fireExpanded(g,false);return true;}$_collapse(g,level){const visibles=this._visibles;let p=visibles.indexOf(g);if(p<0&&g!==this._root){g['$_setExpanded'](false);return;}p=g===this._root&&!this._rootVisible?0:p+1;g!==this._root&&this._rootVisible&&assert(p>0);const n=this.$_hideVisibles(g,level);visibles.splice(p,n);g['$_setExpanded'](false);}collapseAll(g){this.collapse(g,Number.MAX_SAFE_INTEGER);}isVisible(item){return this._visibles.indexOf(item)>=0;}makeVisible(item){if(this.isVisible(item))return;let p=item.parent;let level=0;while(p){if(p===this._root||this.isVisible(p)){this.expand(p,level);break;}p=p.parent;level++;}}resetFolder(path,source){const g=path instanceof FolderItem?path:this.getItemAt(path);if(g instanceof FolderGroupItem){const expanded=g.isRoot&&!this._rootVisible||this.isVisible(g)&&g.expanded;if(expanded){this.$_collapse(g,0);}g.reset(source);if(expanded){this.$_expand(g,0);}this._fireFolderReset(g);}}/**
         *
         * @param at null 이거나 현재 표시 중인 item.
         * @param startText 편집 시작 시 설정되는 텍스트.
         */beginAppend(group,startText){if(!this._inserting){if(!this._insertingItem){this._insertingItem=new FolderEditItem();}this._insertingItem.beginEdit(startText);if(!group)group=this._root;group["_addItem"](this._insertingItem);if(!this.expand(group)){const i=this.getLastVisibleOf(group)+1;this._visibles.splice(i,0,this._insertingItem);}this._inserting=true;this._fireAppendStarted(group);return true;}}endAppend(accept){if(this._inserting){const g=this._insertingItem.parent;const i=this._visibles.indexOf(this._insertingItem);this._visibles.splice(i,1);this._insertingItem.parent['_removeItem'](this._insertingItem);this._fireAppendEnded(g,accept?this._insertingItem:null);this._inserting=false;}}isInserting(item){return this._inserting&&(!item||item===this._insertingItem);}// addRow(item: FolderItem, index: number): void {
    //     let p = this.findRow(item.parent);
    //     if (p) {
    //         const row = this.$_borrowRow(item);
    //         p.addRow(row, index);
    //         p = this.findVisibleRow(p.model);
    //         if (p && p.expanded) {
    //             const level = p.level;
    //             const vrows = this._visibleRows;
    //             const idx = vrows.indexOf(p);
    //             let k = idx + 1;
    //             if (index > 0) {
    //                 for (let i = idx + 1, cnt = vrows.length; i < cnt; i++) {
    //                     const vrow = vrows[i];
    //                     if (vrow.parentRow == p) {
    //                         if (--index == 0) {
    //                             while (vrows[i].level > level) {
    //                                 i++;
    //                             }   
    //                             k = i;
    //                             break;
    //                         }
    //                     } else if (vrow.level <= level) {
    //                         k = i - 1;
    //                         break;
    //                     }
    //                 }
    //             }
    //             vrows.splice(k, 0, row);
    //         }
    //         this.addChild(row); // row는 bodyview의 자식이다.
    //         this._rows.push(row);
    //         if (item instanceof FolderGroupItem) {
    //             for (let i = 0; i < item.count; i++) {
    //                 this.addRow(item.get(i), i);
    //             }
    //         }
    //         this.invalidateLayout();
    //     }
    // }
    // addRows(group: FolderGroupItem, count: number): void {
    //     let p = this.findRow(group);
    //     if (p) {
    //         const rows: FolderRowElement[] = [];
    //         let index = group.count - count;
    //         for (let i = 0; i < count; i++) {
    //             const row = this.$_borrowRow(group.get(index + i));
    //             p.addRow(row, index + i);
    //             rows.push(row);
    //         }
    //         p = this.findVisibleRow(group);
    //         if (p && p.expanded) {
    //             const level = p.level;
    //             const vrows = this._visibleRows;
    //             const idx = vrows.indexOf(p);
    //             let k = idx + 1;
    //             if (index > 0) {
    //                 for (let i = idx + 1, cnt = vrows.length; i < cnt; i++) {
    //                     const vrow = vrows[i];
    //                     if (vrow.parentRow == p) {
    //                         if (--index == 0) {
    //                             while (vrows[i].level > level) {
    //                                 i++;
    //                             }   
    //                             k = i;
    //                             break;
    //                         }
    //                     } else if (vrow.level <= level) {
    //                         k = i - 1;
    //                         break;
    //                     }
    //                 }
    //             }
    //             for (let i = 0; i < count; i++) {
    //                 vrows.splice(k + i, 0, rows[i]);
    //             }
    //         }
    //         // row는 bodyview의 자식이다.
    //         for (let i = 0; i < count; i++) {
    //             this.addChild(rows[i]);
    //             this._rows.push(rows[i]);
    //         }
    //         this.invalidateLayout();
    //     }
    // }
    // removeRow(item: FolderItem): void {
    //     // for (let i = 0; i < item.count; i++) {
    //     //     this.removeRow(item.get(i));
    //     // }
    //     // let p = this.findRow(item.parent);
    //     // if (p) {
    //     //     let row = this.findRow(item);
    //     //     p.removeRow(row);
    //     //     row = this.findVisibleRow(item);
    //     //     if (row) {
    //     //         const vrows = this._visibleRows;
    //     //         const idx = vrows.indexOf(row);
    //     //         vrows.splice(idx, 1);
    //     //     }
    //     //     let i = this._rows.indexOf(row);
    //     //     this._rows.splice(i, 1);
    //     //     this.removeChild(row); // row는 bodyview의 자식이다.
    //     //     this.$_returnRow(row);
    //     //     this.invalidateLayout();
    //     // }
    // }
    // removeRows(items: FolderItem[]): void {
    //     for (let item of items) {
    //         this.removeRow(item);
    //     }
    // }
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_setSource(value){this._source=value;this.$_build(value);this._visibles=[];if(!this._rootVisible){this.expand(this._root);}else {this._visibles.push(this._root);}this._fireSourceChanged();}$_build(source){this._root=new FolderRootItem(this,this._source=source);}// g가 collapsed된 상태라고 가정한다.
    $_collectVisibles(g,items,level){for(let i=0;i<g.count;i++){const child=g.get(i);items.push(child);if(child instanceof FolderGroupItem&&(child.expanded||level>0)){child['$_setExpanded'](true);this.$_collectVisibles(child,items,level-1);}}}// g가 expanded된 상태라고 가정한다.
    $_hideVisibles(g,level){let n=0;n+=g.count;for(let i=0;i<g.count;i++){const child=g.get(i);if(child instanceof FolderGroupItem&&child.expanded){if(level>0){child['$_setExpanded'](false);}n+=this.$_hideVisibles(child,level-1);}}return n;}//-------------------------------------------------------------------------
    // event members
    //-------------------------------------------------------------------------
    _fireSourceChanged(){this.fireEvent(FolderModel.SOURCE_CHANGED);}_fireItemAdded(item,index){this.fireEvent(FolderModel.ITEM_ADDED,item,index);}_fireItemsAdded(group,count){this.fireEvent(FolderModel.ITEMS_ADDED,group,count);}_fireItemRemoved(item){this.fireEvent(FolderModel.ITEM_REMOVED,item);}_fireItemsRemoved(items){this.fireEvent(FolderModel.ITEMS_REMOVED,items);}_fireFolderReset(group){this.fireEvent(FolderModel.FOLDER_RESET,group);}_fireExpanded(group,expanded){this.fireEvent(FolderModel.EXPANDED,group,expanded);}_fireAppendStarted(group){this.fireEvent(FolderModel.APPEND_STARTED,group);}_fireAppendEnded(group,item){this.fireEvent(FolderModel.APPEND_ENDED,group,item);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // events
    FolderModel.SOURCE_CHANGED="onFolderRootChanged";FolderModel.ITEM_ADDED="onFolderItemAdded";FolderModel.ITEMS_ADDED="onFolderItemsAdded";FolderModel.ITEM_REMOVED="onFolderItemRemoved";FolderModel.ITEMS_REMOVED="onFolderItemsRemoved";FolderModel.FOLDER_RESET="onFolderFolderReset";FolderModel.EXPANDED="onFolderExpanded";FolderModel.APPEND_STARTED="onFolderAppendStarted";FolderModel.APPEND_ENDED="onFolderAppendEnded";/**
     * Folder model 구성 요소.
     */class FolderItem extends Base{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(source){super();this.name=source&&source.name;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** folder */get folder(){return this._parent&&this._parent.folder;}/** parent */get parent(){return this._parent;}/** level */get level(){return this._parent?this._parent.level+1:1;}/** name */get name(){return this._name;}set name(value){if(value!=this._name){this._name=value;const i=value?value.lastIndexOf('.'):-1;this._ext=i>=0?value.substring(i+1):'';this._changed();}}/** ext */get ext(){return this._ext;}/** name */get path(){const p=this._parent.isRoot?'':this._parent.path;return p+'/'+this._name;}/** displayText */get displayText(){return this._name;}/** expandable */get expandable(){return false;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getAbsolutePath(){const folder=this.folder;return folder?folder.getAbsolutePath(this.path):this.path;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _changed(){}}/**
     * Folder group item.
     */class FolderGroupItem extends FolderItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(source){super(source);this._expanded=false;if(source){this.$_load(source);}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** count */get count(){return this._children?this._children.length:0;}/** loaded */get loaded(){return !!this._children;}/** isRoot */get isRoot(){return false;}/** expanded */get expanded(){return this._expanded;}/** collapsed */get collapsed(){return !this._expanded;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    get(index){return this._children[index];}getItems(){return this._children&&this._children.slice();}getDescendentCount(){let level=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Number.MAX_SAFE_INTEGER;let n=0;if(level>0){n+=this.count;if(level>1&&this._children){for(let child of this._children){if(child instanceof FolderGroupItem){n+=child.getDescendentCount(level-1);}}}}return n;}itemOf(source){return;}find(name){if(this._children){for(let item of this._children){if(item.name===name)return item;}}}reset(source){this._clear();source&&this._addItems(source);}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get expandable(){return true;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_setExpanded(value){this._expanded=value;}$_load(source){this._clear();const children=source.children;if(children&&children.length>0){for(let src of children){if(src.isDirectory||src.children){this._addItem(new FolderGroupItem(src));}else {this._addItem(new FolderItem(src));}}}}_clear(){if(this._children){for(let item of this._children){item["_parent"]=null;}this._children=null;}}_addItem(item){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;const items=this._children=this._children||[];if(index<0){items.push(item);}else {items.splice(index,0,item);}item["_parent"]=this;return item;}_removeItem(item){if(item&&this._children){const i=this._children.indexOf(item);if(i>=0){this._children.splice(i,1);item["_parent"]=null;}}}_addItems(source){this._children=this._children||[];let n=0;for(let i=0;i<source.length;i++){const src=source[i];if(src.isDirectory||src.children){this._addItem(new FolderGroupItem(src));}else {this._addItem(new FolderItem(src));}n++;}return n;}}/**
     * Folder model root item.
     */class FolderRootItem extends FolderGroupItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(model,source){super(source);this._model=model;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get isRoot(){return true;}get folder(){return this._model;}get parent(){return null;}get path(){return '/';}}/**
     */class FolderEditItem extends FolderGroupItem{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){super(null);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    beginEdit(text){this.name=text;}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class FolderElement extends VisualElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,name){super(doc,name);}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get measuredWidth(){return this._measuredWidth;}get measuredHeight(){return this._measuredHeight;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    measure(hintWidth,hintHeight){const sz=this._doMeasure(hintWidth,hintHeight);this._measuredWidth=sz.width;this._measuredHeight=sz.height;return sz;}layoutContent(){this._doLayoutContent();}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return;}_doDraw(dom){}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _doMeasure(hintWidth,hintHeight){return new Size(hintWidth,hintHeight);}_doLayoutContent(){}}/** @internal */class FolderRowElement extends FolderElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,'FolderRowView');this._vindex=-1;this._indents=0;this._focused=false;this._selected=false;this._model=model;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** model */get model(){return this._model;}set model(value){if(value!==this._model){this._model=value;}}/** vindex */get vindex(){return this._vindex;}/** indents */get indents(){return this._spanText.getBoundingClientRect().left-this.getBoundingRect().left;}/** focused */get focused(){return this._focused;}/** selected */get selected(){return this._selected;}/** expandable */get expandable(){return this._model instanceof FolderGroupItem&&this._model.expandable;}/** expanded */get expanded(){return this._model instanceof FolderGroupItem&&this._model.expanded;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    setFocused(value){if(value!=this._focused){this._focused=value;this.invalidate();}}setSelected(value){if(value!=this._selected){this._selected=value;this.invalidate();}}clearText(){this._spanText.style.visibility='hidden';}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){let s='rr-folder-row';if(this._focused&&this._selected)s+=' rr-folder-row-focus rr-folder-row-select';else if(this._focused)s+=' rr-folder-row-focus';else if(this._selected)s+=' rr-folder-row-select';return s;}_getCssDisplay(){return 'flex';}_isEmptySize(){return true;}_initDom(doc,dom){super._initDom(doc,dom);dom.appendChild(this._spanIndent=doc.createElement('span'));dom.appendChild(this._spanExpander=doc.createElement('span'));dom.appendChild(this._spanText=doc.createElement('span'));this._spanText.className='rr-folder-label';// Row마다 무조건 dragaable을 주는것이 맞는건인지?
    dom.draggable=true;}_doDraw(dom){}_doMeasure(hintWidth,hintHeight){const m=this._model;let t='';switch(m.ext){case'r2':case'json':t=m.ext;break;case'png':case'jpg':case'jpeg':t='img';break;default:m.expandable?t='':t='file';break;}if(t){this['_dom'].dataset.type=t;}else {delete this['_dom'].dataset.type;}this._setClassName(null);this.setHint(this._model.getAbsolutePath());this._indents=Math.max(8,FolderRowElement.INDENT_SIZE*(m.level-1));this._spanIndent.style.minWidth=this._indents+"px";let clsName='';if(m.expandable){clsName=m.expanded?'rr-folder-expander rr-folder-expander-expanded':'rr-folder-expander rr-folder-expander-collapsed';}else {clsName='rr-folder-expander';}this._spanExpander.className=clsName;this._spanExpander[T_ROWVIEW]=this.vindex;this._spanText.style.visibility='visible';this._spanText.textContent=m.displayText;return new Size(hintWidth,this.offsetHeight);}_doLayoutContent(){}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    FolderRowElement.INDENT_SIZE=8;////////////////////////////////////////////////////////////////////////////////
    /** @internal */class FolderBodyView extends FolderElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(viewer){super(viewer.doc,'FolderBodyView');this._rows=[];this._rowPool=[];this._rowPoints=[0];this._inserting=false;this._viewer=viewer;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** rowCount */get rowCount(){return this._rows.length;}/** focusedRow */get focusedRow(){return this._focusedRow;}/** contentHeight */get contentHeight(){return this._rowPoints[this._rowPoints.length-1];}/** contentWidth */get contentWidth(){return this.width;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getRow(index){return this._rows[index];}getNext(row){if(row){const i=row.vindex;return i<this._rows.length-1?this._rows[i+1]:row;}else {return this._rows.length>0?this._rows[0]:null;}}getPrev(row){if(row){const i=row.vindex;return i>0?this._rows[i-1]:row;}else {return this._rows.length>0?this._rows[0]:null;}}getNextPage(row){if(!row)return this.getNext(row);const pts=this._rowPoints;let h=this.getBoundingRect().height;let count=this._rows.length;let i=row.vindex;while(i<count){h-=pts[i+1]-pts[i];if(h<=0)break;i++;}return this._rows[Math.min(count-1,i)];}getPrevPage(row){if(!row)return this.getPrev(row);const pts=this._rowPoints;let h=this.getBoundingRect().height;let i=row.vindex;while(i>=0){h-=pts[i+1]-pts[i];if(h<=0)break;i--;}return this._rows[Math.max(0,i)];}findRow(itemModel){return this.$_findRow(this._rows,itemModel);}loadRows(model){this.clear();if(!model)return;const items=model.getVisibleItems();for(let i=0;i<items.length;i++){const item=items[i];const row=this.$_borrowRow(item);this._rows.push(row);this.addChild(row);}}refreshRows(model){if(!model){this.clear();return;}const rows=this._rows;const items=model.getVisibleItems();let row;while(rows.length<items.length){rows.push(row=this.$_borrowRow(null));this.addChild(row);}while(rows.length>items.length){this.$_returnRow(row=rows.pop());this.removeChild(row);}for(let i=items.length-1;i>=0;i--){rows[i].model=items[i];}}isExpander(dom){return dom.classList.contains('rr-folder-expander');}rowByExpander(dom){return this._rows[dom[T_ROWVIEW]];}rowOf(dom){let p=dom;while(p){if(p.classList.contains('rr-folder-row')){for(let row of this._rows){if(row.isDom(p))return row;}}p=p.parentElement;}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get isLayer(){return true;}_getCssSelector(){return 'rr-folder-body';}_setSizeStyle(css){}_initDom(doc,dom){super._initDom(doc,dom);const css=dom.style;css.width='100%';css.height='100%';css.overflow='auto';}clear(){if(super.clear()){for(let row of this._rows){this.$_returnRow(row,true);}this._rows=[];return true;}}findChildAt(x,y,hitTesting,blockLayer){y+=this['_dom'].scrollTop;return super.findChildAt(x,y,hitTesting,blockLayer);}_doMeasure(hintWidth,hintHeight){const viewer=this._viewer;const rows=this._rows;let pts=this._rowPoints=[0];this._focusedRow=null;for(let i=0;i<rows.length;i++){const rowView=rows[i];const item=rowView.model;rowView.visible=true;rowView["_vindex"]=i;if(!this._focusedRow&&viewer.isFocused(item)){rowView.setFocused(true);this._focusedRow=rowView;}else {rowView.setFocused(false);}rowView.setSelected(viewer.isSelected(item));rowView.measure(hintWidth,hintHeight);pts.push(pts[i]+rowView.measuredHeight);}return new Size(hintWidth,pts[pts.length-1]);}scrollToFocused(topPos,height){const focused=this._focusedRow;if(focused){const pts=this._rowPoints;const i=focused.vindex;if(pts[i]<topPos){topPos=pts[i]+(i>0?(pts[i-1]-pts[i])/2:0);}else if(pts[i+1]-topPos>=height){topPos=pts[i+1]-height+(i<pts.length-1?(pts[i+1]-pts[i])/2:0);}}return topPos;}_doLayoutContent(){const rows=this._rows;const pts=this._rowPoints;let y=0;let x=0;for(let i=0;i<rows.length;i++){const rowView=rows[i];//rowView.setBounds(x, pts[i] - y, w, rowView.measuredHeight);
    rowView.move(x,pts[i]-y);rowView.layoutContent();}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_borrowRow(itemModel){if(this._rowPool.length>0){const row=this._rowPool.pop();row.model=itemModel;row.invalidate();return row;}return new FolderRowElement(this.doc,itemModel);}$_returnRow(row){let force=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(row&&(force||this._rowPool.indexOf(row)<0)){row.visible=false;row["_vindex"]=-1;row.setFocused(false);row.setSelected(false);this._rowPool.push(row);row.validate();}}$_findRow(rows,model){if(rows){for(let row of rows){if(row.model===model)return row;const r=this.$_findRow(row["_children"],model);if(r)return r;}}}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class FolderSelectionTool extends VisualTool{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(viewer){super(viewer,'FolderSelectionTool');this._viewer=viewer;}_doDispose(){this._viewer=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** viewer */get viewer(){return this._viewer;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doMouseDown(event){const target=this.mouseEventTarget;const body=this.viewer.bodyView;const row=this._clickedRow=body.rowOf(target);if(!row)return true;if(row.model instanceof FolderItem)this.viewer['_fireMouseDown'](row.model);return true;}_doMouseMove(event){}/** 그리드 밖에서도 호출된다. */_doMouseUp(event){const target=this.mouseEventTarget;const viewer=this._viewer;const model=viewer.model;const body=viewer.bodyView;const row=body.rowOf(target);if(!row)return true;if(body.isExpander(target)&&this.$_isClickedRow(target)){row.expanded?model.collapse(row.model):model.expand(row.model);}if(row.model instanceof FolderItem)viewer['_fireMouseUp'](row.model);return true;}/** 그리드 밖에서 마우스를 놓으면 호출되지 않는다. */_doClick(event,x,y){var _a;const ctrl=event.ctrlKey||event.metaKey;const shift=event.shiftKey;const target=this.mouseEventTarget;const viewer=this._viewer;const body=viewer.bodyView;const row=body.rowOf(target);if(!row||row!==this._clickedRow)return;const item=row.model;if(!viewer.focusedItem)viewer.focusedItem=item;if(ctrl){viewer.toggleSelect(item);viewer.focusedItem=item;}else if(shift){const focusedItem=viewer.focusedItem;if(focusedItem){// 그려지는 도중에 쉬프트 클릭 시 비어있는 경우가 있다.
    const startIndex=(_a=body.findRow(focusedItem))===null||_a===void 0?void 0:_a.vindex;const items=viewer.model.getVisibleItems(startIndex?startIndex:row.vindex,row.vindex);viewer.clearSelection(item);viewer.selectAll(items);}}else {viewer.clearSelection(item);viewer.select(item);viewer.focusedItem=item;}}_doDblClick(event){const viewer=this._viewer;const model=viewer.model;const body=viewer.bodyView;const target=this.mouseEventTarget;const row=body.rowOf(target);if(row&&row===this._clickedRow){const item=row.model;if(item instanceof FolderGroupItem){item.expanded?model.collapse(item):model.expand(item);}else {viewer['_fireDoubleClicked'](row.model);}}}_doMouseWheel(event){const viewer=this._viewer;const isHorz=event.shiftKey||Math.abs(event.deltaX)>Math.abs(event.deltaY);if(isHorz){// const left = grid.leftPos;
    // const wheelScrollPos = Math.abs(options.wheelScrollHorz || 16) * ( (event.deltaX || event.deltaY) > 0 ? 1 : -1);
    // grid.leftPos = left + wheelScrollPos;
    // // IE, Edge의 경우 forword, backword가 실행되는 경우가 있다. return true로 막아준다.
    // // 모두 막아버린다.
    return true;}else {const top=viewer.topPos;viewer.topPos=top+event.deltaY;//grid.topIndex = grid.topIndex - event["wheelDelta"];
    return true;}}_doMouseEnter(event){}_doMouseLeave(event){}_doMouseOver(event){}_doContextMenu(event){return false;}_doKeyDown(event){const key=event.keyCode;const shift=event.shiftKey;const viewer=this._viewer;const body=viewer.bodyView;const editing=viewer.editing;const focusedRow=body.focusedRow;const nextFocusedRow=body.getNext(focusedRow);const prevFocusedRow=body.getPrev(focusedRow);const focusedItem=viewer.focusedItem;const isFocusedItemSelected=viewer.isSelected(focusedItem);switch(key){case 13/* Keys.ENTER */:if(viewer.editing){viewer.hideEdit(true,true);return true;}else if(viewer.showEdit()){return true;}break;case 27/* Keys.ESC */:if(viewer.hideEdit(false,true)){return true;}break;case 36/* Keys.HOME */:if(!editing){viewer.setFocusedRow(body.getRow(0));}break;case 35/* Keys.END */:if(!editing){viewer.setFocusedRow(body.getRow(body.rowCount-1));}break;case 40/* Keys.DOWN */:if(editing)break;viewer.setFocusedRow(nextFocusedRow);if(shift){if(isFocusedItemSelected&&viewer.isSelected(nextFocusedRow.model))viewer.unselect(focusedItem);else viewer.toggleSelect(nextFocusedRow.model);}break;case 38/* Keys.UP */:if(editing)break;viewer.setFocusedRow(prevFocusedRow);if(shift){if(isFocusedItemSelected&&viewer.isSelected(prevFocusedRow.model))viewer.unselect(focusedItem);else viewer.toggleSelect(prevFocusedRow.model);}break;case 34/* Keys.PAGEDOWN */:if(!editing){viewer.setFocusedRow(body.getNextPage(focusedRow));}break;case 33/* Keys.PAGEUP */:if(!editing){viewer.setFocusedRow(body.getPrevPage(focusedRow));}break;case 37/* Keys.LEFT */:if(!editing&&focusedRow){if(focusedRow.expanded){viewer.model.collapse(focusedRow.model);}else if(focusedItem.parent&&viewer.model.isVisible(focusedItem.parent)){viewer.focusedItem=focusedItem.parent;}}break;case 39/* Keys.RIGHT */:if(!editing&&focusedRow){if(focusedRow.expandable&&!focusedRow.expanded){viewer.model.expand(focusedRow.model);}else if(focusedItem instanceof FolderGroupItem&&focusedItem.count>0){viewer.focusedItem=focusedItem.get(0);}}break;}return super._doKeyDown(event);}_doKeyPress(event){return false;}_doKeyUp(event){return false;}/**
         * TODO: sykim. DragAndDrop 관련 이벤트 외부에 이벤트를 주기위해 private 메서드를 강제로 호출하는데 좋은 구조가 없을까?
         * - 외부에서 이벤트를 사용할 수 있게 넣어준다.
         * @param event
         * @returns {boolean}
         */_doDragStart(event){const row=this._clickedRow;if(this.$_isRowFolderItem(row))this.viewer['_fireDragStart'](event,row.model);return true;}_doDragEnd(event){const row=this.$_getFolderRow(this.mouseEventTarget);if(this.$_isRowFolderItem(row))this.viewer['_fireDragEnd'](event,row.model);return true;}_doDragEnter(event){const row=this.$_getFolderRow(this.mouseEventTarget);if(this.$_isRowFolderItem(row))this.viewer['_fireDragEnter'](event,row.model);return true;}_doDragOver(event){const row=this.$_getFolderRow(this.mouseEventTarget);if(this.$_isRowFolderItem(row))this.viewer['_fireDragOver'](event,row.model);return true;}_doDragLeave(event){const row=this.$_getFolderRow(this.mouseEventTarget);if(this.$_isRowFolderItem(row))this.viewer['_fireDragLeave'](event,row.model);return true;}_doDragDrop(event){const row=this.$_getFolderRow(this.mouseEventTarget);if(this.$_isRowFolderItem(row))this.viewer['_fireDragDrop'](event,row.model);return true;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_findRowView(dom){return;}$_enter(target,item){target&&target.focus();return false;}$_esc(target,item){if(target){target.blur();if(item instanceof FolderItem){target.textContent=item.displayText;return true;}}}$_getFolderRow(target){const body=this.viewer.bodyView;return body.rowOf(target);}$_isClickedRow(target){const body=this._viewer.bodyView;return this._clickedRow===body.rowOf(target);}$_isRowFolderItem(row){if(!row)return false;return row.model instanceof FolderItem;}}////////////////////////////////////////////////////////////////////////////////
    class Selections$1{constructor(){this._items=[];}get items(){return this._items.length>0?this._items.slice():null;}get last(){return this._items.length>0?this._items[this._items.length-1]:null;}contains(item){return item&&this._items.indexOf(item)>=0;}clear(){if(this._items.length>0){this._items=[];return true;}}add(item){if(item&&this._items.indexOf(item)<0){this._items.push(item);return true;}}addAll(items){if(items&&items.length>0){let added=false;for(let item of items){if(this._items.indexOf(item)<0){this._items.push(item);added=true;}}return added;}}remove(item){if(item){const i=this._items.indexOf(item);if(i>=0){this._items.splice(i,1);return true;}}}}class FolderEditMask extends VisualElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    show(row){if(!this.visible){this.visible=true;const cb=this._selectionCallback;const r=row.getBoundingRect();const y=r.top-this.getBoundingRect().top;let css=this._row.style;css.top=y+'px';css.height=r.height+'px';css=this._input.style;css.marginLeft=row.indents+'px';css.marginRight='1px';row.clearText();this._input.value=row.model.displayText;this._input.focus();if(cb){const sel=cb(row.model,this._input.value);if(sel){this._input.setSelectionRange(sel.start,sel.end);}else {this._input.select();}}else {this._input.select();}}}hide(){this._input.blur();this.visible=false;}layout(editRow){const r=editRow.getBoundingRect();const y=r.top-this.getBoundingRect().top;let css=this._row.style;css.top=y+'px';}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-folder-edit-mask';}_initDom(doc,dom){super._initDom(doc,dom);dom.appendChild(this._row=doc.createElement('div'));let css=this._row.style;css.position='absolute';css.left='0';css.width='100%';css.display='flex';css.background='rgba(255, 255, 255, 0.1)';this._row.appendChild(this._input=doc.createElement('input'));this._input.className='rr-folder-root rr-folder-edit';this._input.type='text';this._input.spellcheck=false;this._input.onblur=()=>{this.container['$_editorBlur'](this._input.textContent);};css=this._input.style;css.boxSizing='border-box';css.flex='1 1 0';css.background='transparent';css.color='white';css.outline='none';css.height='100%';css.width='100%';css.padding='0';css.border='1px solid #0088ff';css.pointerEvents='auto';}_setSizeStyle(css){}_doDraw(dom){}}/**
     * Folder viewer.
     */class FolderViewer extends VisualContainer{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(containerId){super(containerId);this._selections=new Selections$1();this._focusRequested=false;this._editHiding=false;this.addElement(this._bodyView=new FolderBodyView(this));this.addElement(this._editMask=new FolderEditMask(this.doc));this._editMask.visible=false;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // FolderModel event handlers
    //-------------------------------------------------------------------------
    onFolderSourceChanged(model){// console.log(this.constructor.name + '::onFolderSourceChanged');
    this._bodyView.loadRows(this.model);this.invalidateLayout();}onFolderItemAdded(model,item,index){// console.log(this.constructor.name + '::onFolderItemAdded');
    // TODO: 개선할 것!
    this._bodyView.refreshRows(this._model);//loadRows(this._model);
    // this._bodyView.addRow(item, index);
    this.invalidateLayout();}onFolderItemsAdded(model,group,count){// console.log(this.constructor.name + '::onFolderItemsAdded');
    // TODO: 개선할 것!
    this._bodyView.refreshRows(this._model);//loadRows(this._model);
    // this._bodyView.addRows(group, count);
    this.invalidateLayout();}onFolderItemRemoved(model,item){// console.log(this.constructor.name + '::onFolderItemRemoved');
    // TODO: 개선할 것!
    this._bodyView.refreshRows(this._model);//loadRows(this._model);
    // this._bodyView.removeRow(item);
    this.invalidateLayout();}onFolderItemsRemoved(model,items){// console.log(this.constructor.name + '::onFolderItemsRemoved');
    // TODO: 개선할 것!
    this._bodyView.refreshRows(this._model);//loadRows(this._model);
    // this._bodyView.removeRows(items);
    this.invalidateLayout();}onFolderFolderReset(model,group){// console.log(this.constructor.name + '::onFolderFolderReset');
    // TODO: 개선할 것!
    this._bodyView.refreshRows(this._model);//loadRows(this._model);
    // this._bodyView.folderReset(group);
    this.invalidateLayout();}onFolderExpanded(model,group,expanded){// console.log(this.constructor.name + '::onFolderFolderExpanded');
    // TODO: 개선할 것!
    this._bodyView.refreshRows(this._model);//loadRows(this._model);
    // this._bodyView.folderReset(group);
    this.invalidateLayout();this._fireExpanded(group,expanded);}onFolderAppendStarted(model,group){this._bodyView.refreshRows(this._model);//loadRows(this._model);
    this.focusedItem=group.get(group.count-1);this.invalidateLayout();setTimeout(()=>{this.showEdit();});}onFolderAppendEnded(model,group,item){this.hideEdit(false,true);this._bodyView.refreshRows(this._model);//loadRows(this._model);
    this.invalidateLayout();if(item&&this.onAppended){this.onAppended(group,item);}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** model */get model(){return this._model;}set model(value){if(value!==this._model){if(this._model){this._model.removeListener(this);}this._model=value;this._bodyView.loadRows(value);this.invalidateLayout();if(this._model){this._model.addListener(this);}}}/** bodyView */get bodyView(){return this._bodyView;}/** topPos */get topPos(){return this._bodyView.scrollTop;}set topPos(value){value=Math.max(0,Math.min(this._bodyView.contentHeight-this.getBound().height,value));if(value!=this.topPos){this._bodyView.scrollDom(this.leftPos,value);if(this.editing){this._editMask.layout(this._bodyView.focusedRow);}}}/** leftPos */get leftPos(){return this._bodyView.scrollLeft;}set leftPos(value){value=Math.max(0,Math.min(this._bodyView.contentWidth-this.getBound().width,value));if(value!=this.leftPos){this._bodyView.scrollDom(value,this.topPos);}}/** focusedItem */get focusedItem(){return this._focusedItem;}set focusedItem(value){if(value!==this._focusedItem){const old=this._focusedItem;this._focusedItem=value;this.invalidateLayout();// this.clearSelection();
    this._focusRequested=true;this._fireFocusedChanged(value,old);}}/** selection */get selection(){return this._selections.items;}/** lastSelectedItem */get lastSelectedItem(){return this._selections.last;}/** editing */get editing(){return this._editMask.visible;}/** onEditSelect */get onEditSelect(){return this._editMask['_selectionCallback'];}set onEditSelect(value){this._editMask['_selectionCallback']=value;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    clearSelection(item){const cleared=this._selections.clear();if(item&&this._selections.add(item)||cleared){this.invalidateLayout();}}select(item){if(this._selections.add(item)){this.invalidateLayout();}}toggleSelect(item){if(this._selections.contains(item)){this._selections.remove(item);}else {this._selections.add(item);}this.invalidateLayout();}selectAll(items){if(!items){items=this._model.getVisibleItems();}if(items&&this._selections.addAll(items)){this.invalidateLayout();}}unselect(item){if(this._selections.remove(item)){this.invalidateLayout();}}isFocused(item){return this._focusedItem===item;}isSelected(item){return this._selections.contains(item);}itemOfDom(dom){const row=this._bodyView.rowOf(dom);return row&&row.model;}showEdit(){if(!this._editMask.visible&&this._bodyView.focusedRow){this._editMask.show(this._bodyView.focusedRow);return true;}}hideEdit(accept,focus){if(!this._editHiding&&this._editMask.visible){this._editHiding=true;try{const s=this._editMask["_input"].value;this._editMask.hide();focus&&this.setFocus();if(accept){if(this._model.isInserting()){this.focusedItem.name=s;this._model.endAppend(true);}else {this.$_acceptEdit(s);}}else if(this._model.isInserting()){this._model.endAppend(false);}this.invalidateLayout();return true;}finally{this._editHiding=false;}}}setFocusedRow(row){this.focusedItem=row&&row.model;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _createDefaultTool(){return new FolderSelectionTool(this);}_doPrepareContainer(dom){dom.className="rr-folder-root rr-folder";}_doLayout(bounds){const body=this._bodyView;const top=this.topPos;// 아래 measure 중에 topPos가 0이 된다.
    body.measure(bounds.width,bounds.height);// body.setBounds(0, 0, bounds.width, bounds.height);
    body.layoutContent();if(this._focusRequested){this._focusRequested=false;this.topPos=body.scrollToFocused(top,bounds.height);}else {this.topPos=top;}if(this.editing){this._editMask.layout(this._bodyView.focusedRow);}}setFocus(){if(this.editing){this._editMask['_input'].focus();}else {super.setFocus();}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_acceptEdit(text){const cb=this.onEdit;cb&&cb(this.focusedItem,text);}$_editorBlur(text){this.hideEdit(true,true);}//-------------------------------------------------------------------------
    // event members
    //-------------------------------------------------------------------------
    _fireFocusedChanged(focused,old){this.fireEvent(FolderViewer.FOCUSED_CHANGED,focused,old);}_fireExpanded(group,expanded){this.fireEvent(FolderViewer.EXPANDED,group,expanded);}_fireDoubleClicked(item){this.fireEvent(FolderViewer.DOUBLE_CLICKED,item);}_fireMouseDown(item){this.fireEvent(FolderViewer.MOUSE_DOWN,item);}_fireMouseUp(item){this.fireEvent(FolderViewer.MOUSE_UP,item);}_fireDragStart(event,item){this.fireEvent(FolderViewer.DRAG_START,event,item);}_fireDragEnd(event,item){this.fireEvent(FolderViewer.DRAG_END,event,item);}_fireDragOver(event,item){this.fireEvent(FolderViewer.DRAG_OVER,event,item);}_fireDragEnter(event,item){this.fireEvent(FolderViewer.DRAG_ENTER,event,item);}_fireDragLeave(event,item){this.fireEvent(FolderViewer.DRAG_LEAVE,event,item);}_fireDragDrop(event,item){this.fireEvent(FolderViewer.DRAG_DROP,event,item);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // events
    FolderViewer.FOCUSED_CHANGED="onFolderFocusedChanged";FolderViewer.EXPANDED="onFolderExpanded";FolderViewer.DOUBLE_CLICKED="onFolderDoubleClicked";FolderViewer.MOUSE_DOWN="onFolderMouseDown";FolderViewer.MOUSE_UP="onFolderMouseUp";FolderViewer.DRAG_START="onFolderDragStart";FolderViewer.DRAG_END="onFolderDragEnd";FolderViewer.DRAG_OVER="onFolderDragOver";FolderViewer.DRAG_ENTER="onFolderDragEnter";FolderViewer.DRAG_LEAVE="onFolderDragLeave";FolderViewer.DRAG_DROP="onFolderDragDrop";////////////////////////////////////////////////////////////////////////////////
    /**
     * Tree viewer 모델.
     */class TreeModel extends EventAware{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(source){super();this.$_setSource(source);}_doDispose(){this._source=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** source */get source(){return this._source;}set source(value){if(value!==this._source){this.$_setSource(value);}}/** root */get root(){return this._root;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    findByTag(tag){return this._root.findByTag(tag);}addItem(parent,source){if(source){const item=new TreeItem(source);parent=parent||this._root;const i=parent.add(item);if(i>=0){this._fireItemAdded(item,i);return item;}}}removeItem(item){if(item&&item.tree){const p=item.parent;if(p.remove(item)){this._fireItemRemoved(item,p);}}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_setSource(value){this._source=value;this.$_build(value);this._fireSourceChanged();}$_build(source){this._root=new TreeRootItem(this,this._source=source);this._root.tag=source&&source.tag;}//-------------------------------------------------------------------------
    // event members
    //-------------------------------------------------------------------------
    _fireSourceChanged(){this.fireEvent(TreeModel.SOURCE_CHANGED);}_fireItemAdded(item,index){this.fireEvent(TreeModel.ITEM_ADDED,item,index);}_fireItemRemoved(item,oldParent){this.fireEvent(TreeModel.ITEM_REMOVED,item,oldParent);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // events
    TreeModel.SOURCE_CHANGED="onTreeRootChanged";TreeModel.ITEM_ADDED="onTreeItemAdded";TreeModel.ITEM_REMOVED="onTreeItemRemoved";/**
     * Tree model 구성 요소.
     */class TreeItem extends Base{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(source){super();this._editable=true;if(this._source=source){this.$_load(source);}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** tree */get tree(){return this._parent&&this._parent.tree;}/** parent */get parent(){return this._parent;}/** count */get count(){return this._children?this._children.length:0;}/** source */get source(){return this._source;}/** name */get name(){return this._name;}set name(value){if(value!=this._name){this._name=value;}}/** editable */get editable(){return this._editable;}/** name */get path(){return this._parent.path+'/'+this._name;}/** displayText */get displayText(){return this._name;}/** expandable */get expandable(){return this.count>0;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    get(index){return this._children[index];}findByTag(tag){if(tag===this.tag)return this;if(this._children){for(let child of this._children){const item=child.findByTag(tag);if(item)return item;}}}add(item){if(item&&!item.parent){this._addItem(item);return this._children.length-1;}return -1;}remove(item){if(item&&item.parent===this){this._removeItem(item);return true;}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_load(source){this._name=source.name;this._editable=source.editable!==false;this.tag=source.tag;this._clear();const children=source.children;if(children&&children.length>0){for(let src of children){this._addItem(new TreeItem(src));}}}_clear(){if(this._children){for(let item of this._children){item["_parent"]=null;}this._children=null;}}_addItem(item){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;const items=this._children=this._children||[];if(index<0){items.push(item);}else {items.splice(index,0,item);}item["_parent"]=this;return item;}_removeItem(item){if(item&&this._children){const i=this._children.indexOf(item);if(i>=0){this._children.splice(i,1);item["_parent"]=null;}}}}/**
     * Tree model root item.
     */class TreeRootItem extends TreeItem{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(model,source){super(source);this._model=model;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get tree(){return this._model;}get parent(){return null;}get path(){return '/';}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class TreeElement extends VisualElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,name){super(doc,name);}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get measuredWidth(){return this._measuredWidth;}get measuredHeight(){return this._measuredHeight;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    measure(hintWidth,hintHeight){const sz=this._doMeasure(hintWidth,hintHeight);this._measuredWidth=sz.width;this._measuredHeight=sz.height;return sz;}layoutContent(){this._doLayoutContent();}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return;}_doDraw(dom){}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    _doMeasure(hintWidth,hintHeight){return new Size(hintWidth,hintHeight);}_doLayoutContent(){}}/** @internal */class TreeRowElement extends TreeElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc,model){super(doc,'TreeRowView');//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._expanded=false;this._vindex=-1;this._focused=false;this._selected=false;this._model=model;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** model */get model(){return this._model;}set model(value){if(value!==this._model){this._model=value;}}/** parentRow */get parentRow(){return this._parentRow;}/** level */get level(){return this._parentRow?this._parentRow.level+1:1;}/** rows */get rows(){return this._childRows&&this._childRows.slice();}/** rowCount */get rowCount(){return this._childRows?this._childRows.length:0;}/** expanded */get expanded(){return this._expanded;}set expanded(value){if(value!=this._expanded){this._expanded=value;}}/** vindex */get vindex(){return this._vindex;}/** indents */get indents(){return this._spanText.getBoundingClientRect().left-this.getBoundingRect().left;}/** focused */get focused(){return this._focused;}/** selected */get selected(){return this._selected;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getRow(index){return this._childRows[index];}addRow(row,index){if(!this._childRows)this._childRows=[];this._childRows.splice(index,0,row);row._parentRow=this;}removeRow(row){if(row&&this._childRows){const i=this._childRows.indexOf(row);if(i>=0){this._childRows.splice(i,1);row.clearRow();}}}clearRow(){if(this._childRows){for(let child of this._childRows){child.clearRow();}this._childRows=null;}this._parentRow=null;this.visible=false;}setFocused(value){if(value!=this._focused){this._focused=value;this.invalidate();}}setSelected(value){if(value!=this._selected){this._selected=value;this.invalidate();}}clearText(){this._spanText.style.visibility='hidden';}showText(){this._spanText.style.visibility='';}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){let s='rr-tree-row';if(this._focused)s+=' rr-tree-row-focus';else if(this._selected)s+=' rr-tree-row-select';return s;}_getCssDisplay(){return 'flex';}_isEmptySize(){return true;}_initDom(doc,dom){super._initDom(doc,dom);dom.appendChild(this._spanIndent=doc.createElement('span'));dom.appendChild(this._spanExpander=doc.createElement('span'));dom.appendChild(this._spanText=doc.createElement('span'));this._spanText.className='rr-tree-label';}_doDraw(dom){}_doMeasure(hintWidth,hintHeight){const t=this._model.source.type;if(t){this['_dom'].dataset.type=t;}else {delete this['_dom'].dataset.type;}this._setClassName(null);this._spanIndent.style.minWidth=TreeRowElement.INDENT_SIZE*this.level+"px";let clsName='';if(this._model.count>0){clsName=this.expanded?'rr-tree-expander rr-tree-expander-expanded':'rr-tree-expander rr-tree-expander-collapsed';}else {clsName='rr-tree-expander';}this._spanExpander.className=clsName;this._spanExpander[T_ROWVIEW]=this.vindex;this._spanText.textContent=this._model.displayText;return new Size(hintWidth,this.offsetHeight);}_doLayoutContent(){}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    TreeRowElement.INDENT_SIZE=8;////////////////////////////////////////////////////////////////////////////////
    /** @internal */class TreeBodyView extends TreeElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(viewer){super(viewer.doc,'treeBodyView');this._visibleRows=[];this._rows=[];this._rowPool=[];this._rowPoints=[0];this._viewer=viewer;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** visibleRowCount */get visibleRowCount(){return this._visibleRows.length;}/** rowCount */get rowCount(){return this._rows.length;}/** focusedRow */get focusedRow(){return this._focusedRow;}/** contentHeight */get contentHeight(){return this._rowPoints[this._rowPoints.length-1];}/** contentWidth */get contentWidth(){return this.width;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getVisible(index){return this._visibleRows[index];}getVisibleItems(){let from=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let to=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;const rows=this._visibleRows;from=Math.max(0,from);if(to<0)to=rows.length=1;else to=Math.min(to,rows.length-1);if(to<from){const t=from;from=to;to=t;}const items=[];for(let i=from;i<=to;i++){items.push(rows[i].model);}return items;}findVisibleRow(itemModel){return this.$_findRow(this._visibleRows,itemModel);}findRow(itemModel){return this.$_findRow(this._rows,itemModel);}loadRows(model){this.clear();if(!model)return;const row=this._root=this.$_borrowRow(model.root);this._rows.push(row);this._visibleRows.push(row);this.addChild(row);this.$_loadRows(row);if(!this._viewer.rootVisible){this.expand(row);}}addRow(item,index){let p=this.findRow(item.parent);if(p){const row=this.$_borrowRow(item);p.addRow(row,index);p=this.findVisibleRow(p.model);if(p&&p.expanded){this.collapse(p);this.expand(p);// const level = p.level;
    // const vrows = this._visibleRows;
    // const idx = vrows.indexOf(p);
    // let k = idx + 1;
    // if (index > 0) {
    //     for (let i = idx + 1, cnt = vrows.length; i < cnt; i++) {
    //         const vrow = vrows[i];
    //         if (vrow.parentRow == p) {
    //             if (--index == 0) {
    //                 while (vrows[i].level > level && i < cnt - 1) {
    //                     i++;
    //                 }   
    //                 k = i;
    //                 break;
    //             }
    //         } else if (vrow.level <= level) {
    //             k = i - 1;
    //             break;
    //         }
    //     }
    // }
    // vrows.splice(k, 0, row);
    }this.addChild(row);// row는 bodyview의 자식이다.
    this._rows.push(row);if(item instanceof TreeItem){for(let i=0;i<item.count;i++){this.addRow(item.get(i),i);}}this.invalidateLayout();}}addRows(group,count){let p=this.findRow(group);if(p){const rows=[];let index=group.count-count;for(let i=0;i<count;i++){const row=this.$_borrowRow(group.get(index+i));p.addRow(row,index+i);rows.push(row);}p=this.findVisibleRow(group);if(p.expanded){this.collapse(p);this.expand(p);// const level = p.level;
    // const vrows = this._visibleRows;
    // const idx = vrows.indexOf(p);
    // let k = idx + 1;
    // if (index > 0) {
    //     for (let i = idx + 1, cnt = vrows.length; i < cnt; i++) {
    //         const vrow = vrows[i];
    //         if (vrow.parentRow == p) {
    //             if (--index == 0) {
    //                 while (vrows[i].level > level) {
    //                     i++;
    //                 }   
    //                 k = i;
    //                 break;
    //             }
    //         } else if (vrow.level <= level) {
    //             k = i - 1;
    //             break;
    //         }
    //     }
    // }
    // for (let i = 0; i < count; i++) {
    //     vrows.splice(k + i, 0, rows[i]);
    // }
    }// row는 bodyview의 자식이다.
    for(let i=0;i<count;i++){this.addChild(rows[i]);this._rows.push(rows[i]);}this.invalidateLayout();}}removeRow(item){const row=this.findRow(item);if(!row)return;const p=row.parentRow;const expanded=p.expanded;const rows=this._rows;const i=rows.indexOf(row);// const v = vrows.indexOf(row);
    if(expanded){this.collapse(p);}if(i>=0){this.$_removeRow(row);}if(expanded){this.expand(p);}// remove visible rows
    // if (v >= 0) {
    //     let n = 1;
    //     if (row.expanded) {
    //         const lev = row.level;
    //         for (let j = v; j < vrows.length && vrows[j].level > lev; j++) {
    //             n++;
    //         }
    //     }
    //     vrows.splice(v, n);
    // }
    this.invalidateLayout();}removeRows(items){for(let item of items){this.removeRow(item);}}expand(row){let recursive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;row=row||this._root;if(!row)return;if(!row.expanded){const rows=this._visibleRows;const p=rows.indexOf(row)+1;assert(p>0);const list=[];let i=0;row.expanded=true;this.$_collectVisibleRows(row,list,recursive);for(let row of list){rows.splice(p+i,0,list[i]);i++;}this.invalidateLayout();return true;}}expandAll(row){this.collapseAll(row);this.expand(row,true);}/**
         *
         * @param row
         * @param recursive
         * @param force true면 parentRow가 collapsed된 경우에도 collapse한다.
         */collapse(row){let recursive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;row=row||this._root;if(!row)return;if(row.expanded){const n=this.$_hideRows(row,recursive);const i=this._visibleRows.indexOf(row)+1;this._visibleRows.splice(i,n);row.expanded=false;this.invalidateLayout();return true;}}collapseAll(row){this.collapse(row,true);}isVisible(item){for(let row of this._visibleRows){if(row.model===item)return true;}return false;}makeVisible(item){const row=this.findRow(item);if(row.vindex>=0)return;let p=row.parentRow;while(p){p.expanded=true;if(p.vindex>=0){this.collapse(p);this.expand(p,true);break;}p=p.parentRow;}}isExpander(dom){return dom.classList.contains('rr-tree-expander');}rowByExpander(dom){return this.getVisible(dom[T_ROWVIEW]);}rowOf(dom){let p=dom;while(p){if(p.classList.contains('rr-tree-row')){for(let row of this._visibleRows){if(row.isDom(p))return row;}}p=p.parentElement;}}getNextVisible(row){const rows=this._visibleRows;if(row){const i=row.vindex;return i<rows.length-1?rows[i+1]:row;}else {return rows.length>0?rows[0]:null;}}getPrevVisible(row){const rows=this._visibleRows;if(row){const i=row.vindex;return i>0?rows[i-1]:row;}else {return rows.length>0?rows[0]:null;}}getNextPageVisible(row){if(!row)return this.getNextVisible(row);const rows=this._visibleRows;const pts=this._rowPoints;let h=this.getBoundingRect().height;let count=rows.length;let i=row.vindex;while(i<count){h-=pts[i+1]-pts[i];if(h<=0)break;i++;}return rows[Math.min(count-1,i)];}getPrevPageVisible(row){if(!row)return this.getPrevVisible(row);const rows=this._visibleRows;const pts=this._rowPoints;let h=this.getBoundingRect().height;let i=row.vindex;while(i>=0){h-=pts[i+1]-pts[i];if(h<=0)break;i--;}return rows[Math.max(0,i)];}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get isLayer(){return true;}_getCssSelector(){return 'rr-tree-body';}_setSizeStyle(css){}_initDom(doc,dom){super._initDom(doc,dom);const css=dom.style;css.width='100%';css.height='100%';css.overflow='auto';}clear(){if(super.clear()){for(let row of this._rows){this.$_returnRow(row,true);}this._rows=[];this._visibleRows=[];return true;}}findChildAt(x,y,hitTesting,blockLayer){y+=this['_dom'].scrollTop;return super.findChildAt(x,y,hitTesting,blockLayer);}_doMeasure(hintWidth,hintHeight){const viewer=this._viewer;var pts=this._rowPoints=[0];this._focusedRow=null;for(let rowView of this._rows){rowView.visible=false;rowView["_vindex"]=-1;rowView.setFocused(false);}if(!viewer.rootVisible&&this._visibleRows[0]&&this._visibleRows[0].model instanceof TreeRootItem){this._visibleRows.splice(0,1);}for(let i=0;i<this._visibleRows.length;i++){const rowView=this._visibleRows[i];const item=rowView.model;rowView.visible=true;rowView["_vindex"]=i;if(!this._focusedRow&&viewer.isFocused(item)){rowView.setFocused(true);this._focusedRow=rowView;}rowView.setSelected(viewer.isSelected(item));rowView.measure(hintWidth,hintHeight);pts.push(pts[i]+rowView.measuredHeight);}return new Size(hintWidth,pts[pts.length-1]);}scrollToFocused(topPos,height){const focused=this._focusedRow;if(focused){const pts=this._rowPoints;const i=focused.vindex;if(pts[i]<topPos){topPos=pts[i]+(i>0?(pts[i-1]-pts[i])/2:0);}else if(pts[i+1]-topPos>=height){topPos=pts[i+1]-height+(i<pts.length-1?(pts[i+1]-pts[i])/2:0);}}return topPos;}_doLayoutContent(){const pts=this._rowPoints;let y=0;let x=0;for(let i=0;i<this._visibleRows.length;i++){const rowView=this._visibleRows[i];//rowView.setBounds(x, pts[i] - y, w, rowView.measuredHeight);
    rowView.move(x,pts[i]-y);rowView.layoutContent();}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_borrowRow(itemModel){if(this._rowPool.length>0){const row=this._rowPool.pop();row.model=itemModel;row.expanded=false;row.invalidate();return row;}return new TreeRowElement(this.doc,itemModel);}$_returnRow(row){let force=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(row&&(force||this._rowPool.indexOf(row)<0)){row.clearRow();this._rowPool.push(row);}}$_loadRows(parent){const model=parent.model;const count=model.count;if(count>0){for(let i=0;i<count;i++){const child=model.get(i);const row=this.$_borrowRow(child);this._rows.push(row);this.addChild(row);parent.addRow(row,i);this.$_loadRows(row);}}}$_findRow(rows,model){if(rows){for(let row of rows){if(row.model===model)return row;const r=this.$_findRow(row["_children"],model);if(r)return r;}}}$_collectVisibleRows(row,rows,recursive){for(let i=0;i<row.rowCount;i++){const child=row.getRow(i);rows.push(child);if(child.expanded||recursive){child.expanded=true;this.$_collectVisibleRows(child,rows,recursive);}}}$_hideRows(row,recursive){let n=0;n+=row.rowCount;for(let i=0;i<row.rowCount;i++){const child=row.getRow(i);if(child.expanded||recursive){//child.expanded = false;
    n+=this.$_hideRows(child,recursive);}}return n;}$_removeRow(row){const i=this._rows.indexOf(row);if(i>=0){for(let j=0;i<row.rowCount;j++){this.$_removeRow(row.getRow(j));}row.parentRow.removeRow(row);this.removeChild(row);this._rows.splice(i,1);this.$_returnRow(row);}}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class TreeSelectionTool extends VisualTool{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(viewer){super(viewer,'TreeSelectionTool');this._viewer=viewer;}_doDispose(){this._viewer=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** viewer */get viewer(){return this._viewer;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doMouseDown(event){// const x = event["mouseX"];
    // const y = event["mouseY"];
    // const ctrl = event.ctrlKey || event.metaKey;
    // const shift = event.shiftKey;
    // const alt = event.altKey;
    // const button = event.type === "mousedown" ? event.button : 0;
    const target=this.mouseEventTarget;const viewer=this._viewer;const body=viewer.bodyView;const row=this._clickedRow=body.rowOf(target);if(row&&body.isExpander(target)){row.expanded?viewer.collapse(row):viewer.expand(row);}return true;}_doMouseMove(event){// const x = event["mouseX"];
    // const y = event["mouseY"];
    // const ctrl = event.ctrlKey || event.metaKey;
    // const shift = event.shiftKey;
    // const alt = event.altKey;
    // const viewer = this._viewer;
    }/** 그리드 밖에서도 호출된다. */_doMouseUp(event){// const x = event["mouseX"];
    // const y = event["mouseY"];
    // const viewer = this._viewer;
    }/** 그리드 밖에서 마우스를 놓으면 호출되지 않는다. */_doClick(event,x,y){// x = x || event["mouseX"];
    // y = y || event["mouseY"];
    const ctrl=event.ctrlKey||event.metaKey;const shift=event.shiftKey;// const alt = event.altKey;
    const target=this.mouseEventTarget;const viewer=this._viewer;const body=viewer.bodyView;const row=body.rowOf(target);if(row&&row===this._clickedRow){const item=row.model;if(ctrl){viewer.toggleSelect(item);if(!viewer.focusedItem){viewer.focusedItem=item;}}else if(shift){const last=viewer.lastSelectedItem;if(last){const lastRow=viewer.bodyView.findVisibleRow(last);const items=viewer.bodyView.getVisibleItems(lastRow.vindex,row.vindex);viewer.selectAll(items);}else {viewer.select(item);}if(!viewer.focusedItem){viewer.focusedItem=item;}}else {viewer.clearSelection(item);viewer.focusedItem=item;}if(!viewer.focusedItem){viewer.focusedItem=item;}}}_doDblClick(event){// const x = event["mouseX"];
    // const y = event["mouseY"];
    // const ctrl = event.ctrlKey || event.metaKey;
    // const shift = event.shiftKey;
    // const alt = event.altKey;
    const viewer=this._viewer;const body=viewer.bodyView;const target=this.mouseEventTarget;const row=body.rowOf(target);if(row&&row===this._clickedRow){if(row.model.count>0){row.expanded?viewer.collapse(row):viewer.expand(row);}else {viewer['_fireDoubleClicked'](row.model);}}}_doMouseWheel(event){const viewer=this._viewer;const isHorz=event.shiftKey||Math.abs(event.deltaX)>Math.abs(event.deltaY);//console.log('WHEEL: ' + event.deltaX + ', ' + event.deltaY);
    if(isHorz){// const left = grid.leftPos;
    // const wheelScrollPos = Math.abs(options.wheelScrollHorz || 16) * ( (event.deltaX || event.deltaY) > 0 ? 1 : -1);
    // grid.leftPos = left + wheelScrollPos;
    // // IE, Edge의 경우 forword, backword가 실행되는 경우가 있다. return true로 막아준다.
    // // 모두 막아버린다.
    return true;}else {const top=viewer.topPos;viewer.topPos=top+event.deltaY;//grid.topIndex = grid.topIndex - event["wheelDelta"];
    return true;}}_doMouseEnter(event){}_doMouseLeave(event){// const x = event["mouseX"];
    // const y = event["mouseY"];
    }_doMouseOver(event){}_doContextMenu(event){return false;}_doKeyDown(event){const key=event.keyCode;const viewer=this._viewer;const body=viewer.bodyView;const focused=body.focusedRow;const focusedItem=viewer.focusedItem;const editing=viewer.editing;switch(key){case 13/* Keys.ENTER */:if(editing){viewer.hideEdit(true,true);return true;}else if(viewer.showEdit()){return true;}break;case 27/* Keys.ESC */:if(viewer.hideEdit(false,true)){return true;}break;case 40/* Keys.DOWN */:!editing&&viewer.setFocusedRow(body.getNextVisible(focused));break;case 38/* Keys.UP */:!editing&&viewer.setFocusedRow(body.getPrevVisible(focused));break;case 34/* Keys.PAGEDOWN */:!editing&&viewer.setFocusedRow(body.getNextPageVisible(focused));break;case 33/* Keys.PAGEUP */:!editing&&viewer.setFocusedRow(body.getPrevPageVisible(focused));break;case 36/* Keys.HOME */:!editing&&viewer.setFocusedRow(body.getVisible(0));break;case 35/* Keys.END */:!editing&&viewer.setFocusedRow(body.getVisible(body.visibleRowCount-1));break;case 37/* Keys.LEFT */:if(!editing&&focused){if(focused.expanded){body.collapse(focused);}else if(focused.parent&&body.isVisible(focusedItem.parent)){viewer.focusedItem=focusedItem.parent;}}break;case 39/* Keys.RIGHT */:if(!editing&&focused){if(!focused.expanded){body.expand(focused);}else if(focusedItem.count>0){viewer.focusedItem=focusedItem.get(0);}}break;}return super._doKeyDown(event);}_doKeyPress(event){return false;}_doKeyUp(event){return false;}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_findRowView(dom){return;}}////////////////////////////////////////////////////////////////////////////////
    class Selections{constructor(){this._items=[];}get items(){return this._items.length>0?this._items.slice():null;}get last(){return this._items.length>0?this._items[this._items.length-1]:null;}contains(item){return item&&this._items.indexOf(item)>=0;}clear(){if(this._items.length>0){this._items=[];return true;}}add(item){if(item&&this._items.indexOf(item)<0){this._items.push(item);return true;}}addAll(items){if(items&&items.length>0){let added=false;for(let item of items){if(this._items.indexOf(item)<0){this._items.push(item);added=true;}}return added;}}remove(item){if(item){const i=this._items.indexOf(item);if(i>=0){this._items.splice(i,1);return true;}}}}class TreeEditMask extends VisualElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    show(row){if(!this.visible){this.visible=true;const cb=this._selectionCallback;const r=row.getBoundingRect();const y=r.top-this.getBoundingRect().top;let css=this._row.style;css.top=y+'px';css.height=r.height+'px';css=this._input.style;css.marginLeft=row.indents+'px';css.marginRight='1px';row.clearText();this._input.value=row.model.displayText;this._input.focus();if(cb){const sel=cb(row.model,this._input.value);if(sel){this._input.setSelectionRange(sel.start,sel.end);}else {this._input.select();}}else {this._input.select();}}}hide(){this._input.blur();this.visible=false;}layout(editRow){const r=editRow.getBoundingRect();const y=r.top-this.getBoundingRect().top;let css=this._row.style;css.top=y+'px';}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-tree-edit-mask';}_initDom(doc,dom){super._initDom(doc,dom);dom.appendChild(this._row=doc.createElement('div'));let css=this._row.style;css.position='absolute';css.left='0';css.width='100%';css.display='flex';css.background='rgba(255, 255, 255, 0.1)';this._row.appendChild(this._input=doc.createElement('input'));this._input.className='rr-tree-root rr-tree-edit';this._input.type='text';this._input.spellcheck=false;this._input.onblur=()=>{this.container['$_editorBlur'](this._input.textContent);};css=this._input.style;css.boxSizing='border-box';css.flex='1 1 0';css.background='transparent';css.color='white';css.outline='none';css.height='100%';css.width='100%';css.padding='0';css.border='1px solid #0088ff';css.pointerEvents='auto';}_setSizeStyle(css){}_doDraw(dom){}}/**
     * Tree viewer.
     */class TreeViewer extends VisualContainer{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(containerId){super(containerId);this._rootVisible=true;this._selections=new Selections();this._focusRequested=false;this._editHiding=false;this.addElement(this._bodyView=new TreeBodyView(this));this.addElement(this._editMask=new TreeEditMask(this.doc));this._editMask.visible=false;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // TreeModel event handlers
    //-------------------------------------------------------------------------
    onTreeSourceChanged(model){//console.log(this.constructor.name + '::onTreeSourceChanged');
    this._bodyView.loadRows(this.model);this.invalidateLayout();this._fireModelChanged();}onTreeItemAdded(model,item,index){//console.log(this.constructor.name + '::onTreeItemAdded');
    this._bodyView.addRow(item,index);this.invalidateLayout();this._fireModelChanged();}onTreeItemRemoved(model,item){//console.log(this.constructor.name + '::onTreeItemRemoved');
    this._bodyView.removeRow(item);if(item===this.focusedItem){this.focusedItem=null;}this.invalidateLayout();this._fireModelChanged();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** model */get model(){return this._model;}set model(value){if(value!==this._model){if(this._model){this._model.removeListener(this);}this._model=value;this._bodyView.loadRows(value);this.invalidateLayout();if(this._model){this._model.addListener(this);}}}/** rootVisible */get rootVisible(){return this._rootVisible;}set rootVisible(value){if(value!=this._rootVisible){this._rootVisible=value;this._bodyView.loadRows(this._model);this.invalidateLayout();}}/** bodyView */get bodyView(){return this._bodyView;}/** topPos */get topPos(){return this._bodyView.scrollTop;}set topPos(value){value=Math.max(0,Math.min(this._bodyView.contentHeight-this.getBound().height,value));if(value!=this.topPos){this._bodyView.scrollDom(this.leftPos,value);}}/** leftPos */get leftPos(){return this._bodyView.scrollLeft;}set leftPos(value){value=Math.max(0,Math.min(this._bodyView.contentWidth-this.getBound().width,value));if(value!=this.leftPos){this._bodyView.scrollDom(value,this.topPos);}}/** focusedItem */get focusedItem(){return this._focusedItem;}set focusedItem(value){if(value!==this._focusedItem){const old=this._focusedItem;this._focusedItem=value;value&&this.makeVisible(value);this.invalidateLayout();this.clearSelection();this._focusRequested=true;this._fireFocusedChanged(value,old);}}/** selection */get selection(){return this._selections.items;}/** lastSelectedItem */get lastSelectedItem(){return this._selections.last;}/** editing */get editing(){return this._editMask.visible;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    expand(row){if(row&&!row.model.expandable)return;if(this._bodyView.expand(row)){const m=row?row.model:this._model.root;this._fireExpanded(m,true);}}expandAll(row){if(row&&!row.model.expandable)return;this._bodyView.expandAll(row);}collapse(row){if(row&&!row.model.expandable)return;if(this._bodyView.collapse(row)){const m=row?row.model:this._model.root;this._fireExpanded(m,false);}}collapseAll(row){if(row&&!row.model.expandable)return;this._bodyView.collapseAll(row);}clearSelection(item){const cleared=this._selections.clear();if(item&&this._selections.add(item)||cleared){this.invalidateLayout();}}select(item){if(this._selections.add(item)){this.invalidateLayout();}}toggleSelect(item){if(this._selections.contains(item)){this._selections.remove(item);}else {this._selections.add(item);}this.invalidateLayout();}selectAll(items){if(!items){items=this._bodyView.getVisibleItems();}if(items&&this._selections.addAll(items)){this.invalidateLayout();}}unselect(item){if(this._selections.remove(item)){this.invalidateLayout();}}setFocusedRow(row){this.focusedItem=row&&row.model;}isFocused(item){return this._focusedItem===item;}isSelected(item){return this._selections.contains(item);}itemOfDom(dom){const row=this._bodyView.rowOf(dom);return row&&row.model;}showEdit(){if(!this._editMask.visible){const row=this._bodyView.focusedRow;if(row&&row.model.editable){this._editMask.show(row);return true;}}}hideEdit(accept,focus){if(!this._editHiding&&this._editMask.visible){this._editHiding=true;try{const row=this._bodyView.focusedRow;const s=this._editMask["_input"].value;this._editMask.hide();focus&&this.setFocus();if(accept){this.$_acceptEdit(s);}row.showText();this.invalidateLayout();return true;}finally{this._editHiding=false;}}}makeVisible(item){if(item){this._bodyView.makeVisible(item);}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _createDefaultTool(){return new TreeSelectionTool(this);}_doPrepareContainer(dom){dom.className="rr-tree-root rr-tree";}_doLayout(bounds){const top=this.topPos;// 아래 measure 중에 topPos가 0이 된다.
    this._bodyView.measure(bounds.width,bounds.height);this._bodyView.setBounds(0,0,bounds.width,bounds.height);this._bodyView.layoutContent();if(this._focusRequested){this._focusRequested=false;this.topPos=this._bodyView.scrollToFocused(top,bounds.height);}else {this.topPos=top;}}setFocus(){if(this.editing){this._editMask['_input'].focus();}else {super.setFocus();}}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_acceptEdit(text){const cb=this.onEdit;cb&&cb(this.focusedItem,text);}$_editorBlur(text){this.hideEdit(true,true);}//-------------------------------------------------------------------------
    // event members
    //-------------------------------------------------------------------------
    _fireFocusedChanged(focused,old){this.fireEvent(TreeViewer.FOCUSED_CHANGED,focused,old);}_fireExpanded(group,expanded){this.fireEvent(TreeViewer.EXPANDED,group,expanded);}_fireDoubleClicked(item){this.fireEvent(TreeViewer.DOUBLE_CLICKED,item);}_fireModelChanged(){this.fireEvent(TreeViewer.Model_CHANGED);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // events
    TreeViewer.FOCUSED_CHANGED="onTreeFocusedChanged";TreeViewer.EXPANDED="onTreeExpanded";TreeViewer.DOUBLE_CLICKED="onTreeDoubleClicked";TreeViewer.Model_CHANGED="onTreeModelChanged";////////////////////////////////////////////////////////////////////////////////
    /**
     * Accordion contaioner 모델.
     */class AccordionModel extends EventAware{//-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(config){super();//-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    this._items=[];config&&this.$_load(config);}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** count */get count(){return this._items.length;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getItem(index){return this._items[index];}itemOf(id){for(let item of this._items){if(item.id===id)return item;}}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_load(config){for(let cfg of config){if(cfg&&cfg.id){const item=new AccordionItem(cfg.id,cfg);this.$_addItem(item);}}}$_addItem(item){if(item&&this._items.indexOf(item)<0){this._items.push(item);}}//-------------------------------------------------------------------------
    // event members
    //-------------------------------------------------------------------------
    _fireItemAdded(item,index){this.fireEvent(AccordionModel.ITEM_ADDED,item,index);}_fireItemRemoved(item){this.fireEvent(AccordionModel.ITEM_REMOVED,item);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // events
    AccordionModel.ITEM_ADDED="onAccordionItemAdded";AccordionModel.ITEM_REMOVED="onAccordionItemRemoved";/**
     * Accordion model 구성 요소.
     */class AccordionItem extends Base{//-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(id,config){super();this.height=100;// 상대 크기
    this._id=id;if(config){this._header=config.header;}}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** id */get id(){return this._id;}/** header */get header(){return this._header;}set header(value){if(value!=this._header){this._header=value;}}/** hint */get hint(){return this._hint;}set hint(value){if(value!=this._hint){this._hint=value;}}/** displayText */get displayText(){return this._header||this._id;}}////////////////////////////////////////////////////////////////////////////////
    class AccordionResizeTracker extends UIDragTracker{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(container,separator){super(null,'accordionResizeTracker');this._accordion=container;this._separator=separator;this._panelsHeight=container['_panelsHeight'];const i=this._separator[T_INDEX];this._upperHeight=this._accordion.getHeader(i).model.height;this._lowerHeight=this._accordion.getHeader(i+1).model.height;}_doDispose(){this._accordion=null;this._separator=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    get startWhenCreated(){return true;}_doStart(event,eventTarget,x,y,shift){this._separator.setPointerCapture(event.pointerId);return true;}_doDrag(eventTarget,x,y){let dy=this.startY-this.currentY;// header를 위로 드래그하면 plus.
    const hContainer=this._accordion.height;const hPanel=this._panelsHeight;const headers=this._accordion.getVisibleHeaders();const i=this._separator[T_INDEX];const upper=this._accordion.getHeader(i);const lower=this._accordion.getHeader(i+1);const hTwo=upper.model.height+lower.model.height;let hTotal=0;for(let h of headers){hTotal+=h.model.height;}dy*=hPanel/hContainer;dy*=hTotal/hPanel;lower.model.height=Math.max(20,this._lowerHeight+dy);upper.model.height=hTwo-lower.model.height;if(upper.model.height<20){dy=20-upper.model.height;upper.model.height=20;lower.model.height-=dy;}this._accordion.invalidateLayout();return true;}_doEnded(event){this._separator.releasePointerCapture(event.pointerId);}}////////////////////////////////////////////////////////////////////////////////
    /** @internal */class AccordionSelectionTool extends UITool{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(container){super(null,'accordionSelectionTool');this._container=container;}_doDispose(){this._container=null;this._clickedDom=null;super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** container */get container(){return this._container;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _doPointerDown(event){const target=this._clickedDom=this.pointerEventTarget;if(this._container.isSeparator(target)){this.dragTracker=new AccordionResizeTracker(this._container,target);return true;}}_doClick(event,x,y){const target=this.pointerEventTarget;if(this._container.checkMenu(target)){return;}if(target===this._clickedDom){const header=this._container.headerViewOf(target);if(header){header.expanded=!header.expanded;}}}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Accordion container.
     */class AccordionContainer extends UIContainer{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(containerId){super(containerId);this._separatorPool=[];this._headerPool=[];this._panelPool=[];this._separators=[];this._headers=[];this._panels=[];this._visibleHeaders=[];this._panelsHeight=0;}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // AccordionModel event handlers
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** model */get model(){return this._model;}set model(value){if(value!==this._model){if(this._model){this._model.removeListener(this);}this._model=value;this.invalidateLayout();if(this._model){this._model.addListener(this);}}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    getHeader(index){return this._headers[index];}headerViewOf(dom){let p=dom;while(p){for(let h of this._headers){if(h.isDom(p)){return h;}}p=p.parentElement;}}getVisibleHeaders(){return this._visibleHeaders;}itemOf(dom){const v=this.headerViewOf(dom);return v&&v.model;}checkMenu(dom){if(this._toolbar.isMenu(dom)){this.$_fireMenu();return true;}}expand(item,expanded){if(item){for(let header of this._headers){if(header.model===item){header.expanded=expanded;break;}}}}isMenu(dom){return this._toolbar.isMenu(dom);}isSeparator(dom){return dom.classList.contains('rr-accordion-separator');}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _getCssSelector(){return 'rr-accordion rr-accordion-root';}_createDefaultTool(){return new AccordionSelectionTool(this);}_prepareChildren(doc,dom){this._addElement(this._toolbar=new AccordionToolbar(doc));this._addElement(this._body=new AccordionBodyElement(doc));}_doLayout(doc,bounds){const model=this._model;if(!model){this.$_clear();return;}this.$_prepareElements(doc,model,this._body);this.$_layoutElements(doc,model);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_clear(){const body=this._body;this._separatorPool=this._separatorPool.concat(this._separators);this._headerPool=this._headerPool.concat(this._headers);this._panelPool=this._panelPool.concat(this._panels);body.clear();}$_borrowSeparator(doc){return this._separatorPool.pop()||new AccordionSeparator(doc);}$_borrowHeader(doc){return this._headerPool.pop()||new AccordionHeaderElement(doc);}$_borrowPanel(doc){return this._panelPool.pop()||new AccordionPanelElement(doc);}$_prepareElements(doc,model,body){const count=model.count;// separators
    while(this._separators.length<count-1){const separator=this.$_borrowSeparator(doc);body.addChild(separator);this._separators.push(separator);}while(this._separators.length>count-1){const separator=this._separators.pop();body.removeChild(separator);this._separatorPool.push(separator);}// headers
    while(this._headers.length<count){const header=this.$_borrowHeader(doc);body.addChild(header);this._headers.push(header);}while(this._headers.length>count){const header=this._headers.pop();body.removeChild(header);this._headerPool.push(header);}// panels
    while(this._panels.length<count){const panel=this.$_borrowPanel(doc);body.addChild(panel);this._panels.push(panel);}while(this._panels.length>count){const panel=this._panels.pop();body.removeChild(panel);this._panelPool.push(panel);}for(let i=0;i<this._panels.length;i++){this._panels[i].setContentId(model.getItem(i));}}$_calcPanelHeights(model,height){const headers=this._headers;const panels=this._panels;let h=0;for(let i=0;i<model.count;i++){if(headers[i].expanded){h+=model.getItem(i).height;}}for(let i=0;i<panels.length;i++){if(headers[i].expanded){panels[i].userData=model.getItem(i).height*height/h;}}}$_layoutElements(doc,model){const seps=this._separators;const headers=this._headers;const panels=this._panels;const count=model.count;let y=0;let h=(count-1)*2;// seprators
    this._visibleHeaders=[];for(let i=0;i<model.count;i++){const item=model.getItem(i);const header=headers[i];header.layout(item);h+=header.height;if(header.expanded){this._visibleHeaders.push(header);}}this._panelsHeight=this.height-this._toolbar.height-h;this.$_calcPanelHeights(model,this._panelsHeight);for(let i=0;i<model.count;i++){const item=model.getItem(i);const header=headers[i];const panel=panels[i];if(i>0){const sep=seps[i-1];sep['_dom'][T_INDEX]=i-1;sep.y=y;y+=sep.height;sep.setStyle('cursor',header.expanded?'ns-resize':'default');}header.y=y;y+=header.height;if(header.expanded){panel.setStyles({display:'',height:panel.userData+'px',top:y+'px'});y+=panel.userData;panel.layout(item);}else {panel.setStyle('display','none');}}}//-------------------------------------------------------------------------
    // event members
    //-------------------------------------------------------------------------
    $_fireMenu(){this.fireEvent(AccordionContainer.MENU);}$_fireFocusedChanged(focused,old){// this.fireEvent(FolderViewer.FOCUSED_CHANGED, focused, old);
    }$_fireExpanded(item,expanded){this.fireEvent(AccordionContainer.EXPANDED,item,expanded);}}//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    // events
    AccordionContainer.MENU="onAccordionMenu";AccordionContainer.FOCUSED_CHANGED="onAccordionFocusedChanged";AccordionContainer.EXPANDED="onAccordionExpanded";class AccordionElement extends UIElement{get accordion(){return this.container;}}class AccordionToolbar extends AccordionElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'rr-accordion-toolbar');}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    isMenu(dom){return dom===this._spanMenu;}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _prepareDom(doc,dom){// text;
    let span=doc.createElement('span');span.textContent='EXPLORER';dom.appendChild(span);// menu
    span=this._spanMenu=doc.createElement('span');span.className='rr-accordion-toolbar-menu';dom.appendChild(span);}}class AccordionBodyElement extends AccordionElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'rr-accordion-body');}}class AccordionSeparator extends AccordionElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'rr-accordion-separator');}}class AccordionHeaderElement extends AccordionElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'rr-accordion-header rr-accordion-root');//-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    this._expanded=false;}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    /** model */get model(){return this._model;}/** expanded */get expanded(){return this._expanded;}set expanded(value){if(value!=this._expanded){const c=this.container;this._expanded=value;c&&c.invalidateLayout();c['$_fireExpanded'](this._model,value);}}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    layout(model){this._model=model;this.setHint(model.hint||model.displayText);this._spanText.textContent=model.displayText;this._spanExpander.className='rr-accordion-expander '+(this._expanded?'rr-accordion-expander-expanded':'rr-accordion-expander-collapsed');// TODO: icons...
    }//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _prepareDom(doc,dom){this._spanExpander=doc.createElement('span');dom.appendChild(this._spanExpander);this._spanText=doc.createElement('span');dom.appendChild(this._spanText);}}class AccordionPanelElement extends AccordionElement{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(doc){super(doc,'rr-accordion-panel');}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get content(){return this._div;}//-------------------------------------------------------------------------
    // layout
    //-------------------------------------------------------------------------
    setContentId(model){this._div.id=model.id;}layout(model){}//-------------------------------------------------------------------------
    // overriden members
    //-------------------------------------------------------------------------
    _prepareDom(doc,dom){const div=this._div=doc.createElement('div');const css=div.style;css.position='absolute';css.width='100%';css.height='100%';dom.appendChild(div);}}////////////////////////////////////////////////////////////////////////////////
    /**
     */class DOCFile{//-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(report,pages){this.inTable=null;this.cellAlign=build.AlignmentType.CENTER;this._report=report;this._imageLoader=new ImageLoader();this._model=new DOCModel(this,report,pages);}//-------------------------------------------------------------------------
    // IDOCXContext
    //-------------------------------------------------------------------------
    createDOCElements(dom){const model=dom instanceof HTMLElement&&this._report.models[dom.dataset[T_MODEL]];if(this.inTable&&model instanceof DiagonalBoxContainer){return new DOCCellDbox(this,dom,model);}else if(this.inTable&&model instanceof BoxContainer){return new DOCBoxTable(this,dom,model);}else if(model instanceof HtmlItem){return new DOCHtmlElement(this,dom.firstElementChild,model);}else if(model instanceof ImageItem){return new DOCImage(this,dom,model);}else if(model instanceof QrcodeItem){return new DOCQrcode(this,dom,model);}else if(model instanceof CheckItem){const spanCheck=dom.getElementsByClassName(CheckItemElement.CHECK_CLASS)[0];const check=new DOCImage(this,spanCheck,model);const spanText=dom.getElementsByClassName(CheckItemElement.TEXT_CLASS)[0];const text=new DOCText(this,spanText,model);return [check,text];}else if(model instanceof BarItem){return new DOCBar(this,dom,model);}else if(model instanceof SvgItem){const content=dom[T_SVG];const data=content.substring(content.indexOf('<svg'));return new DOCSvg(this,dom,data,model);}else if(dom instanceof HTMLTableElement){return new DOCTable(this,dom,model);}else if(dom instanceof HTMLSpanElement){if(model instanceof DiagonalBoxContainer&&dom.dataset.line){return new DOCDiagonalLine(this,dom,model);}else {return new DOCText(this,dom,model);}}else if(dom instanceof SVGSVGElement){const data=new XMLSerializer().serializeToString(dom);return new DOCSvg(this,dom,data,model);}else if(dom instanceof HTMLCanvasElement){return new DOCCanvas(this,dom,model);}else if(dom instanceof HTMLElement&&dom.tagName==='B'){return new DOCText(this,dom,model);}else if(dom instanceof HTMLElement){return new DOCElement(this,dom,model);}}setPageDiv(div){if(div!==this._pageDiv){this._pageDiv=div;this._pageRect=div.getBoundingClientRect();}}getBounds(dom){const r=dom.getBoundingClientRect();r.x-=this._pageRect.x;r.y-=this._pageRect.y;return r;}getTextBounds(node){const r=Utils.getTextRect(node);r.x-=this._pageRect.x;r.y-=this._pageRect.y;return r;}addImage(url,opacity){this._imageLoader.add(url,opacity);}getImage(url){return this._imageLoader.get(url);}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    get report(){return this._report;}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    prepare(trials){return this._imageLoader.load(trials);}canExport(){return this._imageLoader.loaded;}toBlob(callback){// const doc = new Document({sections: [this.$_buildSection()]});
    const doc=new build.Document({sections:this.$_buildSections()});build.Packer.toBlob(doc).then(callback);}toBuffer(callback){// const doc = new Document({sections: [this.$_buildSection()]});
    const doc=new build.Document({sections:this.$_buildSections()});build.Packer.toBuffer(doc).then(callback);}//-------------------------------------------------------------------------
    // internal members
    //-------------------------------------------------------------------------
    $_buildSections(){const ctx=this;const properties={type:build.SectionType.NEXT_PAGE,page:{margin:{top:0,bottom:0,left:0,right:0},size:{orientation:this.report.paper.orientation}}};const sections=[];this._model.pages.forEach((page,i)=>{const children=page.write(ctx);sections.push({properties,children});});return sections;}}////////////////////////////////////////////////////////////////////////////////
    /**
     * Report -> DOCX.
     */class DOCExporter{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructor
    //-------------------------------------------------------------------------
    constructor(){}//-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    exportBlob(report,page,callback){if(typeof callback!=='function'){return;}const handler=()=>{if(file.canExport()||file.prepare(trials)){file.toBlob(callback);}else {setTimeout(()=>{handler();},300);}};const trials=5;const file=new DOCFile(report,page);handler();}export(report,page,callback){if(typeof callback!=='function'){return;}const handler=()=>{if(file.canExport()||file.prepare(trials)){file.toBuffer(callback);}else {setTimeout(()=>{handler();},300);}};const trials=5;const file=new DOCFile(report,page);handler();}}////////////////////////////////////////////////////////////////////////////////
    /**
     * 리포트 출력을 document 파일로 내보내기 한다.
     */class DocumentExporter extends Base{//-------------------------------------------------------------------------
    // consts
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // static members
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // property fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // fields
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // constructors
    //-------------------------------------------------------------------------
    constructor(){super();}_doDispose(){super._doDispose();}//-------------------------------------------------------------------------
    // properties
    //-------------------------------------------------------------------------
    //-------------------------------------------------------------------------
    // methods
    //-------------------------------------------------------------------------
    export(report,pages,options){const type=options.type||'hwp';const filenName=options.fileName||'realreport';try{if(type==='hwp'){const exporter=new HWPExporter();exporter.export(report,pages,data=>{download(data,filenName+'.hwp');});}else if(type==='docx'){const exporter=new DOCExporter();exporter.exportBlob(report,pages,blob=>{download(blob,filenName+'.docx');});}}catch(err){console.error(err);alert('내보내기 실패: '+err);}}}

    function _defineProperty(obj, key, value) {
      if (key in obj) {
        Object.defineProperty(obj, key, {
          value: value,
          enumerable: true,
          configurable: true,
          writable: true
        });
      } else {
        obj[key] = value;
      }

      return obj;
    }

    var dist = {};

    (function (exports) {

      Object.defineProperty(exports, "__esModule", {
        value: !0
      }), exports.h = exports.r = void 0;

      class Base64 {
        static encode(r) {
          const e = Base64.CHARACTERS,
                s = [],
                t = r.length;
          var p = t % 3;
          let o = t - p;

          for (let t = 0; t < o;) {
            var h = r[t++] << 16 | r[t++] << 8 | r[t++];
            s.push(e.charAt(h >>> 18 & 63)), s.push(e.charAt(h >>> 12 & 63)), s.push(e.charAt(h >>> 6 & 63)), s.push(e.charAt(63 & h));
          }

          switch (p) {
            case 2:
              var i = r[o++] << 16 | r[o++] << 8;
              s.push(e.charAt(i >>> 18 & 63)), s.push(e.charAt(i >>> 12 & 63)), s.push(e.charAt(i >>> 6 & 63)), s.push(Base64.SUFFIX);
              break;

            case 1:
              i = r[o++] << 16;
              s.push(e.charAt(i >>> 18 & 63)), s.push(e.charAt(i >>> 12 & 63)), s.push(Base64.SUFFIX), s.push(Base64.SUFFIX);
          }

          return s.join("");
        }

        static decode(t) {
          const e = Base64.CHARACTERS;
          var r = Base64.SUFFIX;
          const s = t.split(""),
                p = [];
          let o = s.length;

          for (; s[--o] === r;);

          for (let r = 0; r < o;) {
            let t = e.indexOf(s[r++]) << 18;
            r <= o && (t |= e.indexOf(s[r++]) << 12), r <= o && (t |= e.indexOf(s[r++]) << 6), r <= o && (t |= e.indexOf(s[r++])), p.push(t >>> 16 & 255), p.push(t >>> 8 & 255), p.push(255 & t);
          }

          for (; 0 === p[p.length - 1];) p.pop();

          return p;
        }

      }

      _defineProperty(Base64, "SUFFIX", "=");

      _defineProperty(Base64, "CHARACTERS", "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");

      class Cryptor {
        static union(t, r) {
          var e = r.s3[255 & t],
              s = r.s2[255 & (t >>= 8)],
              p = r.s1[255 & (t >>= 8)],
              t = r.s0[255 & (t >>= 8)],
              p = (t >> 16) + (p >> 16) + ((65535 & t) + (65535 & p) >> 16) << 16 | (65535 & t) + (65535 & p) & 65535;
          return ((p = (p >> 16 ^ s >> 16) << 16 | 65535 & (65535 & p ^ 65535 & s)) >> 16) + (e >> 16) + ((65535 & p) + (65535 & e) >> 16) << 16 | (65535 & p) + (65535 & e) & 65535;
        }

        static xor(t, r) {
          return (t >> 16 ^ r >> 16) << 16 | 65535 & (65535 & t ^ 65535 & r);
        }

        static _encryptBlock(t, r) {
          var e = t.left,
              s = t.right;
          const p = Cryptor.xor,
                o = Cryptor.union;
          e = p(e, r.p[0]), s = p(s, p(o(e, r), r.p[1])), e = p(e, p(o(s, r), r.p[2])), s = p(s, p(o(e, r), r.p[3])), e = p(e, p(o(s, r), r.p[4])), s = p(s, p(o(e, r), r.p[5])), e = p(e, p(o(s, r), r.p[6])), s = p(s, p(o(e, r), r.p[7])), e = p(e, p(o(s, r), r.p[8])), s = p(s, p(o(e, r), r.p[9])), e = p(e, p(o(s, r), r.p[10])), s = p(s, p(o(e, r), r.p[11])), e = p(e, p(o(s, r), r.p[12])), s = p(s, p(o(e, r), r.p[13])), e = p(e, p(o(s, r), r.p[14])), s = p(s, p(o(e, r), r.p[15])), e = p(e, p(o(s, r), r.p[16])), t.right = e, t.left = p(s, r.p[17]);
        }

        static _decryptBlock(t, r) {
          var e = t.left,
              s = t.right;
          const p = Cryptor.xor,
                o = Cryptor.union;
          e = p(e, r.p[17]), s = p(s, p(o(e, r), r.p[16])), e = p(e, p(o(s, r), r.p[15])), s = p(s, p(o(e, r), r.p[14])), e = p(e, p(o(s, r), r.p[13])), s = p(s, p(o(e, r), r.p[12])), e = p(e, p(o(s, r), r.p[11])), s = p(s, p(o(e, r), r.p[10])), e = p(e, p(o(s, r), r.p[9])), s = p(s, p(o(e, r), r.p[8])), e = p(e, p(o(s, r), r.p[7])), s = p(s, p(o(e, r), r.p[6])), e = p(e, p(o(s, r), r.p[5])), s = p(s, p(o(e, r), r.p[4])), e = p(e, p(o(s, r), r.p[3])), s = p(s, p(o(e, r), r.p[2])), e = p(e, p(o(s, r), r.p[1])), t.right = e, t.left = p(s, r.p[0]);
        }

        static _init(t) {
          const s = t.split("").map(function (t) {
            return 255 & t.charCodeAt(0);
          }),
                r = Cryptor.kb,
                e = Cryptor._encryptBlock;
          let p = 0,
              o = 0,
              h,
              i,
              c;
          var n = {
            left: 0,
            right: 0
          };
          const a = {
            p: r.p.slice(0).map(function (t) {
              var r = s.length;
              let e;

              for (e = 0; e < 4; e++) o = o * Cryptor.POW8 | s[p++ % r];

              return (t >> 16 ^ o >> 16) << 16 | 65535 & (65535 & t ^ 65535 & o);
            }),
            s0: r.s0.slice(0),
            s1: r.s1.slice(0),
            s2: r.s2.slice(0),
            s3: r.s3.slice(0)
          };

          for (h = 0, c = a.p.length; h < c;) e(n, a), a.p[h++] = n.left, a.p[h++] = n.right;

          for (h = 0; h < 4; h++) for (i = 0, c = a["s" + h].length; i < c;) e(n, a), a["s" + h][i++] = n.left, a["s" + h][i++] = n.right;

          return a;
        }

        static encrypt(r, t) {
          const e = Cryptor._encryptBlock;

          var s = Cryptor._init(t),
              p = 8 - (7 & r.length);

          for (let t = 0; t < p; t++) r += String.fromCharCode(p);

          let o = 0;
          const h = [],
                i = r.length >> 3,
                c = {
            left: null,
            right: null
          };

          for (let t = 0; t < i; t++) c.left = r.charCodeAt(o) * Cryptor.POW24 | r.charCodeAt(o + 1) * Cryptor.POW16 | r.charCodeAt(o + 2) * Cryptor.POW8 | r.charCodeAt(o + 3), c.right = r.charCodeAt(o + 4) * Cryptor.POW24 | r.charCodeAt(o + 5) * Cryptor.POW16 | r.charCodeAt(o + 6) * Cryptor.POW8 | r.charCodeAt(o + 7), e(c, s), h.push(c.left >> 24 & 255), h.push(c.left >> 16 & 255), h.push(c.left >> 8 & 255), h.push(255 & c.left), h.push(c.right >> 24 & 255), h.push(c.right >> 16 & 255), h.push(c.right >> 8 & 255), h.push(255 & c.right), o += 8;

          return Base64.encode(h);
        }

        static decrypt(t, r) {
          const e = Cryptor._decryptBlock;

          var s = Cryptor._init(r);

          const p = [];
          var o = Base64.decode(t);
          let h = 0;
          var i = o.length >> 3;
          const c = {
            left: null,
            right: null
          };

          for (let t = 0; t < i; t++) {
            c.left = o[h] * Cryptor.POW24 | o[h + 1] * Cryptor.POW16 | o[h + 2] * Cryptor.POW8 | o[h + 3], c.right = o[h + 4] * Cryptor.POW24 | o[h + 5] * Cryptor.POW16 | o[h + 6] * Cryptor.POW8 | o[h + 7], e(c, s);
            var n = c.left,
                a = c.right;
            p.push(n >> 24 & 255), p.push(n >> 16 & 255), p.push(n >> 8 & 255), p.push(255 & n), p.push(a >> 24 & 255), p.push(a >> 16 & 255), p.push(a >> 8 & 255), p.push(255 & a), h += 8;
          }

          return p[p.length - 1] !== p[p.length - 2] && 1 !== p[p.length - 1] || (t = p[p.length - 1], p.splice(p.length - t, t)), p.map(function (t) {
            return String.fromCharCode(t);
          }).join("");
        }

      }

      _defineProperty(Cryptor, "POW2", Math.pow(2, 2));

      _defineProperty(Cryptor, "POW3", Math.pow(2, 3));

      _defineProperty(Cryptor, "POW4", Math.pow(2, 4));

      _defineProperty(Cryptor, "POW8", Math.pow(2, 8));

      _defineProperty(Cryptor, "POW16", Math.pow(2, 16));

      _defineProperty(Cryptor, "POW24", Math.pow(2, 24));

      _defineProperty(Cryptor, "kb", {
        p: [608135816, 2242054355, 320440878, 57701188, 2752067618, 698298832, 137296536, 3964562569, 1160258022, 953160567, 3193202383, 887688300, 3232508343, 3380367581, 1065670069, 3041331479, 2450970073, 2306472731],
        s0: [3509652390, 2564797868, 805139163, 3491422135, 3101798381, 1780907670, 3128725573, 4046225305, 614570311, 3012652279, 134345442, 2240740374, 1667834072, 1901547113, 2757295779, 4103290238, 227898511, 1921955416, 1904987480, 2182433518, 2069144605, 3260701109, 2620446009, 720527379, 3318853667, 677414384, 3393288472, 3101374703, 2390351024, 1614419982, 1822297739, 2954791486, 3608508353, 3174124327, 2024746970, 1432378464, 3864339955, 2857741204, 1464375394, 1676153920, 1439316330, 715854006, 3033291828, 289532110, 2706671279, 2087905683, 3018724369, 1668267050, 732546397, 1947742710, 3462151702, 2609353502, 2950085171, 1814351708, 2050118529, 680887927, 999245976, 1800124847, 3300911131, 1713906067, 1641548236, 4213287313, 1216130144, 1575780402, 4018429277, 3917837745, 3693486850, 3949271944, 596196993, 3549867205, 258830323, 2213823033, 772490370, 2760122372, 1774776394, 2652871518, 566650946, 4142492826, 1728879713, 2882767088, 1783734482, 3629395816, 2517608232, 2874225571, 1861159788, 326777828, 3124490320, 2130389656, 2716951837, 967770486, 1724537150, 2185432712, 2364442137, 1164943284, 2105845187, 998989502, 3765401048, 2244026483, 1075463327, 1455516326, 1322494562, 910128902, 469688178, 1117454909, 936433444, 3490320968, 3675253459, 1240580251, 122909385, 2157517691, 634681816, 4142456567, 3825094682, 3061402683, 2540495037, 79693498, 3249098678, 1084186820, 1583128258, 426386531, 1761308591, 1047286709, 322548459, 995290223, 1845252383, 2603652396, 3431023940, 2942221577, 3202600964, 3727903485, 1712269319, 422464435, 3234572375, 1170764815, 3523960633, 3117677531, 1434042557, 442511882, 3600875718, 1076654713, 1738483198, 4213154764, 2393238008, 3677496056, 1014306527, 4251020053, 793779912, 2902807211, 842905082, 4246964064, 1395751752, 1040244610, 2656851899, 3396308128, 445077038, 3742853595, 3577915638, 679411651, 2892444358, 2354009459, 1767581616, 3150600392, 3791627101, 3102740896, 284835224, 4246832056, 1258075500, 768725851, 2589189241, 3069724005, 3532540348, 1274779536, 3789419226, 2764799539, 1660621633, 3471099624, 4011903706, 913787905, 3497959166, 737222580, 2514213453, 2928710040, 3937242737, 1804850592, 3499020752, 2949064160, 2386320175, 2390070455, 2415321851, 4061277028, 2290661394, 2416832540, 1336762016, 1754252060, 3520065937, 3014181293, 791618072, 3188594551, 3933548030, 2332172193, 3852520463, 3043980520, 413987798, 3465142937, 3030929376, 4245938359, 2093235073, 3534596313, 375366246, 2157278981, 2479649556, 555357303, 3870105701, 2008414854, 3344188149, 4221384143, 3956125452, 2067696032, 3594591187, 2921233993, 2428461, 544322398, 577241275, 1471733935, 610547355, 4027169054, 1432588573, 1507829418, 2025931657, 3646575487, 545086370, 48609733, 2200306550, 1653985193, 298326376, 1316178497, 3007786442, 2064951626, 458293330, 2589141269, 3591329599, 3164325604, 727753846, 2179363840, 146436021, 1461446943, 4069977195, 705550613, 3059967265, 3887724982, 4281599278, 3313849956, 1404054877, 2845806497, 146425753, 1854211946],
        s1: [1266315497, 3048417604, 3681880366, 3289982499, 290971e4, 1235738493, 2632868024, 2414719590, 3970600049, 1771706367, 1449415276, 3266420449, 422970021, 1963543593, 2690192192, 3826793022, 1062508698, 1531092325, 1804592342, 2583117782, 2714934279, 4024971509, 1294809318, 4028980673, 1289560198, 2221992742, 1669523910, 35572830, 157838143, 1052438473, 1016535060, 1802137761, 1753167236, 1386275462, 3080475397, 2857371447, 1040679964, 2145300060, 2390574316, 1461121720, 2956646967, 4031777805, 4028374788, 33600511, 2920084762, 1018524850, 629373528, 3691585981, 3515945977, 2091462646, 2486323059, 586499841, 988145025, 935516892, 3367335476, 2599673255, 2839830854, 265290510, 3972581182, 2759138881, 3795373465, 1005194799, 847297441, 406762289, 1314163512, 1332590856, 1866599683, 4127851711, 750260880, 613907577, 1450815602, 3165620655, 3734664991, 3650291728, 3012275730, 3704569646, 1427272223, 778793252, 1343938022, 2676280711, 2052605720, 1946737175, 3164576444, 3914038668, 3967478842, 3682934266, 1661551462, 3294938066, 4011595847, 840292616, 3712170807, 616741398, 312560963, 711312465, 1351876610, 322626781, 1910503582, 271666773, 2175563734, 1594956187, 70604529, 3617834859, 1007753275, 1495573769, 4069517037, 2549218298, 2663038764, 504708206, 2263041392, 3941167025, 2249088522, 1514023603, 1998579484, 1312622330, 694541497, 2582060303, 2151582166, 1382467621, 776784248, 2618340202, 3323268794, 2497899128, 2784771155, 503983604, 4076293799, 907881277, 423175695, 432175456, 1378068232, 4145222326, 3954048622, 3938656102, 3820766613, 2793130115, 2977904593, 26017576, 3274890735, 3194772133, 1700274565, 1756076034, 4006520079, 3677328699, 720338349, 1533947780, 354530856, 688349552, 3973924725, 1637815568, 332179504, 3949051286, 53804574, 2852348879, 3044236432, 1282449977, 3583942155, 3416972820, 4006381244, 1617046695, 2628476075, 3002303598, 1686838959, 431878346, 2686675385, 1700445008, 1080580658, 1009431731, 832498133, 3223435511, 2605976345, 2271191193, 2516031870, 1648197032, 4164389018, 2548247927, 300782431, 375919233, 238389289, 3353747414, 2531188641, 2019080857, 1475708069, 455242339, 2609103871, 448939670, 3451063019, 1395535956, 2413381860, 1841049896, 1491858159, 885456874, 4264095073, 4001119347, 1565136089, 3898914787, 1108368660, 540939232, 1173283510, 2745871338, 3681308437, 4207628240, 3343053890, 4016749493, 1699691293, 1103962373, 3625875870, 2256883143, 3830138730, 1031889488, 3479347698, 1535977030, 4236805024, 3251091107, 2132092099, 1774941330, 1199868427, 1452454533, 157007616, 2904115357, 342012276, 595725824, 1480756522, 206960106, 497939518, 591360097, 863170706, 2375253569, 3596610801, 1814182875, 2094937945, 3421402208, 1082520231, 3463918190, 2785509508, 435703966, 3908032597, 1641649973, 2842273706, 3305899714, 1510255612, 2148256476, 2655287854, 3276092548, 4258621189, 236887753, 3681803219, 274041037, 1734335097, 3815195456, 3317970021, 1899903192, 1026095262, 4050517792, 356393447, 2410691914, 3873677099, 3682840055],
        s2: [3913112168, 2491498743, 4132185628, 2489919796, 1091903735, 1979897079, 3170134830, 3567386728, 3557303409, 857797738, 1136121015, 1342202287, 507115054, 2535736646, 337727348, 3213592640, 1301675037, 2528481711, 1895095763, 1721773893, 3216771564, 62756741, 2142006736, 835421444, 2531993523, 1442658625, 3659876326, 2882144922, 676362277, 1392781812, 170690266, 3921047035, 1759253602, 3611846912, 1745797284, 664899054, 1329594018, 3901205900, 3045908486, 2062866102, 2865634940, 3543621612, 3464012697, 1080764994, 553557557, 3656615353, 3996768171, 991055499, 499776247, 1265440854, 648242737, 3940784050, 980351604, 3713745714, 1749149687, 3396870395, 4211799374, 3640570775, 1161844396, 3125318951, 1431517754, 545492359, 4268468663, 3499529547, 1437099964, 2702547544, 3433638243, 2581715763, 2787789398, 1060185593, 1593081372, 2418618748, 4260947970, 69676912, 2159744348, 86519011, 2512459080, 3838209314, 1220612927, 3339683548, 133810670, 1090789135, 1078426020, 1569222167, 845107691, 3583754449, 4072456591, 1091646820, 628848692, 1613405280, 3757631651, 526609435, 236106946, 48312990, 2942717905, 3402727701, 1797494240, 859738849, 992217954, 4005476642, 2243076622, 3870952857, 3732016268, 765654824, 3490871365, 2511836413, 1685915746, 3888969200, 1414112111, 2273134842, 3281911079, 4080962846, 172450625, 2569994100, 980381355, 4109958455, 2819808352, 2716589560, 2568741196, 3681446669, 3329971472, 1835478071, 660984891, 3704678404, 4045999559, 3422617507, 3040415634, 1762651403, 1719377915, 3470491036, 2693910283, 3642056355, 3138596744, 1364962596, 2073328063, 1983633131, 926494387, 3423689081, 2150032023, 4096667949, 1749200295, 3328846651, 309677260, 2016342300, 1779581495, 3079819751, 111262694, 1274766160, 443224088, 298511866, 1025883608, 3806446537, 1145181785, 168956806, 3641502830, 3584813610, 1689216846, 3666258015, 3200248200, 1692713982, 2646376535, 4042768518, 1618508792, 1610833997, 3523052358, 4130873264, 2001055236, 3610705100, 2202168115, 4028541809, 2961195399, 1006657119, 2006996926, 3186142756, 1430667929, 3210227297, 1314452623, 4074634658, 4101304120, 2273951170, 1399257539, 3367210612, 3027628629, 1190975929, 2062231137, 2333990788, 2221543033, 2438960610, 1181637006, 548689776, 2362791313, 3372408396, 3104550113, 3145860560, 296247880, 1970579870, 3078560182, 3769228297, 1714227617, 3291629107, 3898220290, 166772364, 1251581989, 493813264, 448347421, 195405023, 2709975567, 677966185, 3703036547, 1463355134, 2715995803, 1338867538, 1343315457, 2802222074, 2684532164, 233230375, 2599980071, 2000651841, 3277868038, 1638401717, 4028070440, 3237316320, 6314154, 819756386, 300326615, 590932579, 1405279636, 3267499572, 3150704214, 2428286686, 3959192993, 3461946742, 1862657033, 1266418056, 963775037, 2089974820, 2263052895, 1917689273, 448879540, 3550394620, 3981727096, 150775221, 3627908307, 1303187396, 508620638, 2975983352, 2726630617, 1817252668, 1876281319, 1457606340, 908771278, 3720792119, 3617206836, 2455994898, 1729034894, 1080033504],
        s3: [976866871, 3556439503, 2881648439, 1522871579, 1555064734, 1336096578, 3548522304, 2579274686, 3574697629, 3205460757, 3593280638, 3338716283, 3079412587, 564236357, 2993598910, 1781952180, 1464380207, 3163844217, 3332601554, 1699332808, 1393555694, 1183702653, 3581086237, 1288719814, 691649499, 2847557200, 2895455976, 3193889540, 2717570544, 1781354906, 1676643554, 2592534050, 3230253752, 1126444790, 2770207658, 2633158820, 2210423226, 2615765581, 2414155088, 3127139286, 673620729, 2805611233, 1269405062, 4015350505, 3341807571, 4149409754, 1057255273, 2012875353, 2162469141, 2276492801, 2601117357, 993977747, 3918593370, 2654263191, 753973209, 36408145, 2530585658, 25011837, 3520020182, 2088578344, 530523599, 2918365339, 1524020338, 1518925132, 3760827505, 3759777254, 1202760957, 3985898139, 3906192525, 674977740, 4174734889, 2031300136, 2019492241, 3983892565, 4153806404, 3822280332, 352677332, 2297720250, 60907813, 90501309, 3286998549, 1016092578, 2535922412, 2839152426, 457141659, 509813237, 4120667899, 652014361, 1966332200, 2975202805, 55981186, 2327461051, 676427537, 3255491064, 2882294119, 3433927263, 1307055953, 942726286, 933058658, 2468411793, 3933900994, 4215176142, 1361170020, 2001714738, 2830558078, 3274259782, 1222529897, 1679025792, 2729314320, 3714953764, 1770335741, 151462246, 3013232138, 1682292957, 1483529935, 471910574, 1539241949, 458788160, 3436315007, 1807016891, 3718408830, 978976581, 1043663428, 3165965781, 1927990952, 4200891579, 2372276910, 3208408903, 3533431907, 1412390302, 2931980059, 4132332400, 1947078029, 3881505623, 4168226417, 2941484381, 1077988104, 1320477388, 886195818, 18198404, 3786409e3, 2509781533, 112762804, 3463356488, 1866414978, 891333506, 18488651, 661792760, 1628790961, 3885187036, 3141171499, 876946877, 2693282273, 1372485963, 791857591, 2686433993, 3759982718, 3167212022, 3472953795, 2716379847, 445679433, 3561995674, 3504004811, 3574258232, 54117162, 3331405415, 2381918588, 3769707343, 4154350007, 1140177722, 4074052095, 668550556, 3214352940, 367459370, 261225585, 2610173221, 4209349473, 3468074219, 3265815641, 314222801, 3066103646, 3808782860, 282218597, 3406013506, 3773591054, 379116347, 1285071038, 846784868, 2669647154, 3771962079, 3550491691, 2305946142, 453669953, 1268987020, 3317592352, 3279303384, 3744833421, 2610507566, 3859509063, 266596637, 3847019092, 517658769, 3462560207, 3443424879, 370717030, 4247526661, 2224018117, 4143653529, 4112773975, 2788324899, 2477274417, 1456262402, 2901442914, 1517677493, 1846949527, 2295493580, 3734397586, 2176403920, 1280348187, 1908823572, 3871786941, 846861322, 1172426758, 3287448474, 3383383037, 1655181056, 3139813346, 901632758, 1897031941, 2986607138, 3066810236, 3447102507, 1393639104, 373351379, 950779232, 625454576, 3124240540, 4148612726, 2007998917, 544563296, 2244738638, 2330496472, 2058025392, 1291430526, 424198748, 50039436, 29584100, 3605783033, 2429876329, 2791104160, 1057563949, 3255363231, 3075367218, 3463963227, 1469046755, 985887462],
        k: [202, 218, 204, 100]
      });

      const Gk = String.fromCharCode(100, 107, 100, 108);

      class K {
        constructor(t) {
          _defineProperty(this, "_gk", void 0);

          this._gk = t !== null && t !== void 0 ? t : Gk;
        }

        _ldk(e) {
          let s = "";

          for (let t = 0, r = e.length; t < r; t++) s += String.fromCharCode(e[t] >> 1);

          return s;
        }

        get() {
          return this._gk + this._ldk(Cryptor.kb.k);
        }

      }

      class Rocker {
        static run(t, r) {
          r = new K(r).get();
          return Cryptor.encrypt(t, r);
        }

      }

      exports.r = Rocker;

      class HammerValidError extends Error {}

      class Hammer {
        constructor(t, r) {
          _defineProperty(this, "_gk", void 0);

          _defineProperty(this, "_code", void 0);

          _defineProperty(this, "_lic", void 0);

          this._gk = r, this._code = t, this._lic = this.run();
        }

        run() {
          const t = Cryptor.decrypt(this._code, new K(this._gk).get()),
                e = {},
                s = t.split(";");

          for (let t = 0, r = s.length; t < r; t++) {
            var p = s[t].split("="),
                o = p[0],
                p = p[1];
            p && 0 < p.length && (e[o] = p);
          }

          return e;
        }

        get lic() {
          return this._lic;
        }

        is(t, r) {
          return t in this._lic && this._lic[t] === r;
        }

        includes(t, r) {
          return t in this._lic && r.includes(this._lic[t]);
        }

        expired(t, r) {
          if (t in this._lic && this._lic[t]) {
            t = this._lic[t], r = (r ? new Date(new Date(t).setMonth(new Date(t).getMonth() + r)) : new Date(t)).getTime(), t = Date.now();
            return !isNaN(r) && r < t;
          }

          return !0;
        }

        validate(t) {
          let s = !1;

          try {
            t.forEach(t => {
              const r = Object.keys(t),
                    e = Object.values(t);
              r.forEach((t, r) => {
                r = e[r];
                if (s = Array.isArray(r) ? this.includes(t, r) : this.is(t, r), !s) throw new HammerValidError();
              });
            });
          } catch (t) {
            if (!(t instanceof HammerValidError)) throw t;
            s = !1;
          }

          return s;
        }

      }

      exports.h = Hammer;
    })(dist);

    /* eslint-disable prefer-const */
    var ERR_URL = 'https://real-report.com/errors';
    /**
     * check the error code at the https://real-report/errors
     * @param code error code
     * @param stop true: throw exception, false: out to console.warn()
     * @returns
     */
    var error = function (params) {
        var code = params.code, stop = params.stop, msg = params.msg;
        var message = "RealReport Error #".concat(code, " : ").concat(ERR_URL, "/").concat(code, " ").concat(msg !== null && msg !== void 0 ? msg : '');
        if (stop) {
            throw new Error(message);
        }
        else {
            if (window.console)
                console.warn(message);
        }
        return message;
    };
    var licWarn = function (e) { return "RealReport\uB97C \uC0AC\uC6A9\uD558\uB824\uBA74 \uB3C4\uC6C0\uB9D0\uC744 \uCC38\uC870\uD558\uC138\uC694.\nhttps://real-report.com/licenses (".concat((e === null || e === void 0 ? void 0 : e.message) || e, ")"); };
    var error$1 = error;

    var matchOperatorsRe = /[|\\{}()[\]^$+*?.]/g;

    var escapeStringRegexp = function (str) {
      if (typeof str !== 'string') {
        throw new TypeError('Expected a string');
      }

      return str.replace(matchOperatorsRe, '\\$&');
    };

    var escapeRegExp = escapeStringRegexp;
    var startsWithWildcardRegExp = /^\*\./;
    var endsWithWildcardRegExp = /\.\*$/;
    var trailingSlashesRegExp = /\/.*$/;
    var portRegExp = /:(\d+)$/;
    var protocolRegExp = /^(\w+):\/\//;
    var wildcardRegExp = /\\\.\\\*/g;

    function parseUrl(url) {
      if (!url || typeof url !== 'string') return null;
      var protocol = url.match(protocolRegExp);
      protocol = protocol ? protocol[1] : null;
      url = url.replace(protocolRegExp, '');
      url = url.replace(trailingSlashesRegExp, '');
      var port = url.match(portRegExp);
      port = port ? parseInt(port[1], 10) : null;
      url = url.replace(portRegExp, '');
      return {
        protocol,
        url,
        port
      };
    }

    function prepareRule(url) {
      var rule = parseUrl(url);

      if (rule) {
        rule.url = rule.url.replace(startsWithWildcardRegExp, '.');
        rule.url = rule.url.replace(endsWithWildcardRegExp, '.');
      }

      return rule;
    }

    function urlMatchRule(sourceUrl, rule) {
      if (!sourceUrl || !rule) return false;
      var matchByProtocols = !rule.protocol || !sourceUrl.protocol || rule.protocol === sourceUrl.protocol;
      var matchByPorts = !rule.port || sourceUrl.port === rule.port;
      var domainRequiredBeforeRule = rule.url.startsWith('.');
      var domainRequiredAfterRule = rule.url.endsWith('.');
      var regExStr = '^';
      if (domainRequiredBeforeRule) regExStr += '.+';
      regExStr += escapeRegExp(rule.url).replace(wildcardRegExp, '\\..*');
      if (domainRequiredAfterRule) regExStr += '.+';
      regExStr += '$';
      return new RegExp(regExStr).test(sourceUrl.url) && matchByProtocols && matchByPorts;
    }

    var matchUrlWildcard = function (url, rules) {
      if (!Array.isArray(rules)) rules = [rules];
      return rules.some(rule => urlMatchRule(parseUrl(url), prepareRule(rule)));
    };

    var matchurl = matchUrlWildcard;

    var dom = location ? location.hostname : undefined;
    // 함수에서 앞, 뒤에 . 또는 중간, 뒤에 * 금지.
    // public suffix 제외
    var validUrl = function (url) {
        if (Array.isArray(url))
            return url.every(validUrl);
        return !url.startsWith('.') && !url.endsWith('.') && !url.endsWith('*')
            && !(url.indexOf('.*.') !== -1) && !(url.indexOf('..') !== -1)
            // public suffix 제외 (https://publicsuffix.org/list/public_suffix_list.dat)
            && !(url.indexOf('*.com') !== -1) && !(url.indexOf('*.co.kr') !== -1)
            && !(url.indexOf('*.kr') !== -1) && !(url.indexOf('*.net') !== -1);
    };
    var dm = (function (l) {
        // '*.realgrid.com,localhost,real-report.com' => ['*.realgrid.com', 'localhost', 'real-report.com']
        var urls = l.split(',').filter(Boolean);
        if (validUrl(urls)) {
            // console.log(dom, urls, matchurl(dom, urls));
            if (!dom)
                error$1({ code: 214, stop: true, msg: 'Unknown host domain' });
            return matchurl(dom, urls);
        }
        else
            return false;
    });

    /**
     * 다양한 환경에서 라이선스를 획득하는 모듈
     */
    var getL = (function () {
        /**
         * process 환경 변수를 얻을 수 있는 환경인가?
         */
        var hasProcess = function () {
            return !!(typeof process !== 'undefined' && process.env && process.env.hasOwnProperty('realReportLic'));
        };
        // process 환경변수를 사용할 수 있는 환경이면 환경 변수를 먼저 확인한다.
        if (hasProcess())
            return process.env.realReportLic;
        else if (realReportLic)
            return realReportLic;
        else
            ;
    });

    var name = "@realgrid/realreport-viewer";
    var version = "1.4.0";
    var description = "RealReport Runtime Viewer";
    var license = "UNLICENSED";
    var author = {
    	name: "Wooritech",
    	url: "https://real-report.com",
    	email: "support@realgrid.com"
    };
    var homepage = "https://real-report.com";
    var main = "dist/realreport.es.js";
    var types = "dist/realreport.d.ts";
    var keywords = [
    	"reports",
    	"dataviz",
    	"visualization",
    	"realreport",
    	"realgrid"
    ];
    var publishConfig = {
    	registry: "https://npm.pkg.github.com"
    };
    var repository = {
    	type: "git",
    	url: "git://github.com/realgrid/realreport-viewer.git"
    };
    var files = [
    	"dist/**/*"
    ];
    var scripts = {
    	clean: "rimraf dist dist.js/realreport .zpack/realreport-latest.tgz .npm/dist",
    	makehash: "git rev-parse --short HEAD > .commithash",
    	zpack: "node scripts/zpack.js",
    	build: "npm run makehash && npm run clean && rollup -c ./scripts/rollup/rollup.product.config.js",
    	"build:webroot": "rimraf webroot/js/realreport && rollup -c ./scripts/rollup/rollup.webroot.config.js --watch",
    	"build:example": "rimraf webroot/js/realreport && rollup -c ./scripts/rollup/rollup.example.config.js",
    	"build:e2e": "rimraf e2e/js/realreport && rollup -c ./scripts/rollup/rollup.e2e.config.js --watch",
    	"build:service": "rimraf ../realreport-service/public/static/realreport/current/ && rollup -c ./scripts/rollup/rollup.service.config.js",
    	"web:e2e": "npx live-server e2e --port=6080 --host=localhost",
    	test: "jest --config jest.config.ts",
    	e2e: "run-p build:e2e web:e2e",
    	cover: "c8 -o ./.coverage node .build/tests/index.js"
    };
    var devDependencies = {
    	"@babel/core": "^7.16.5",
    	"@babel/preset-env": "^7.16.5",
    	"@playwright/test": "^1.22.2",
    	"@rollup/plugin-babel": "^5.3.0",
    	"@rollup/plugin-commonjs": "^21.0.1",
    	"@rollup/plugin-json": "^4.1.0",
    	"@rollup/plugin-node-resolve": "^13.1.1",
    	"@rollup/plugin-replace": "^3.0.0",
    	"@rollup/plugin-typescript": "^8.3.0",
    	"@types/copyfiles": "^2.4.1",
    	"@types/jest": "^27.0.3",
    	"@types/node": "^17.0.0",
    	"@types/tldjs": "^2.3.1",
    	"@typescript-eslint/eslint-plugin": "^5.8.1",
    	"@typescript-eslint/parser": "^5.8.1",
    	"@vercel/ncc": "^0.33.0",
    	"@wooritech/rockhammer": "^1.0.12",
    	c8: "^7.10.0",
    	copyfiles: "^2.4.1",
    	eslint: "^8.5.0",
    	"eslint-plugin-jest": "^25.3.2",
    	jest: "^27.4.5",
    	jszip: "^3.7.1",
    	"match-url-wildcard": "0.0.4",
    	"npm-packlist": "^3.0.0",
    	"npm-run-all": "^4.1.5",
    	prettier: "^2.5.1",
    	rimraf: "^3.0.2",
    	rollup: "^2.61.1",
    	"rollup-plugin-copy": "^3.4.0",
    	"rollup-plugin-css-bundle": "^1.0.4",
    	"rollup-plugin-dts": "^4.0.1",
    	"rollup-plugin-sizes": "^1.0.4",
    	"rollup-plugin-terser": "^7.0.2",
    	"ts-jest": "^27.1.2",
    	"ts-node": "^10.4.0",
    	tslib: "^2.3.1",
    	typescript: "^4.5.4"
    };
    var peerDependencies = {
    	highcharts: "^10.x"
    };
    var dependencies = {
    };
    var _package = {
    	name: name,
    	version: version,
    	description: description,
    	license: license,
    	author: author,
    	homepage: homepage,
    	main: main,
    	types: types,
    	keywords: keywords,
    	publishConfig: publishConfig,
    	repository: repository,
    	files: files,
    	scripts: scripts,
    	devDependencies: devDependencies,
    	peerDependencies: peerDependencies,
    	dependencies: dependencies
    };

    var pack = /*#__PURE__*/Object.freeze({
        __proto__: null,
        name: name,
        version: version,
        description: description,
        license: license,
        author: author,
        homepage: homepage,
        main: main,
        types: types,
        keywords: keywords,
        publishConfig: publishConfig,
        repository: repository,
        files: files,
        scripts: scripts,
        devDependencies: devDependencies,
        peerDependencies: peerDependencies,
        dependencies: dependencies,
        'default': _package
    });

    var REPORT_OPTIONS = { zoom: 1 };
    var DOC_EXPORT_DEFAULT_OPTIONS = { type: 'hwp' };
    var IMG_EXPORT_DEFAULT_OPTIONS = { type: 'png' };
    /**
     * ReportViewer base class
     */
    var ReportViewBase = /** @class */ (function () {
        //-------------------------------------------------------------------------
        // constructors
        //-------------------------------------------------------------------------
        function ReportViewBase(container, options) {
            if (options === void 0) { options = REPORT_OPTIONS; }
            this._cm = false;
            this._currentPage = 1;
            this.$_checkL();
            if (!container)
                error$1({ code: 213, stop: true });
            this.containerId = container;
            this._container = new PrintContainer(container);
            this._container.zoom = options.zoom;
        }
        //-------------------------------------------------------------------------
        // protected methods
        //-------------------------------------------------------------------------
        /**
         * 컨테이너의 상태를 체크하기 위한 조건과 조건에 맞을 경우의 에러 처리코드를 넘겨 줍니다.
         * checker.is 가 true이면 errorParams로 error() 를 실행 합니다.
         *
         * @param checkers 에러 조건 및 error() 함수 인자
         */
        ReportViewBase.prototype._checkPrintContainer = function (checkers) {
            // https://real-reaport.com/errors#217
            if (!this._container.pages)
                error$1({ code: 217, stop: true, msg: 'Page does not exist in the viewer' });
            if (checkers && Array.isArray(checkers) && checkers.length > 0) {
                checkers.map(function (checker) {
                    // pararms.stop = true면 error throw 됩니다.
                    if (checker.is)
                        error$1(checker.errorParams);
                });
            }
        };
        ReportViewBase.prototype._checkPrintContainerZoom = function () {
            if (this._container.zoom !== 1)
                error$1({ code: 219, stop: true, msg: '페이지 배율 값이 100%인 경우만 내보내기가 가능합니다. 페이지 배율 값이 100%인지 확인해 주세요.' });
        };
        Object.defineProperty(ReportViewBase.prototype, "containerId", {
            //-------------------------------------------------------------------------
            // properties
            //-------------------------------------------------------------------------
            get: function () {
                return this._containerId;
            },
            set: function (container) {
                if (typeof container === 'string')
                    this._containerId = container;
                else
                    this._containerId = container.id;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(ReportViewBase.prototype, "version", {
            get: function () {
                return pack === null || pack === void 0 ? void 0 : version;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(ReportViewBase.prototype, "zoom", {
            get: function () {
                return this._container.zoom;
            },
            set: function (v) {
                this._container.zoom = v;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(ReportViewBase.prototype, "pageCount", {
            get: function () {
                return this._container.pageCount;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(ReportViewBase.prototype, "page", {
            get: function () {
                return this._currentPage;
            },
            set: function (v) {
                if (v !== this.page) {
                    this._container.page = v - 1;
                    this._currentPage = Math.max(1, Math.min(v, this.pageCount));
                }
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(ReportViewBase.prototype, "reportHtml", {
            get: function () {
                this._checkPrintContainer();
                return this._container.getPrintHtml();
            },
            enumerable: false,
            configurable: true
        });
        //-------------------------------------------------------------------------
        // public methods
        //-------------------------------------------------------------------------
        ReportViewBase.prototype.getHtml = function () {
            this._checkPrintContainer();
            return this._container.getPrintHtml();
        };
        ReportViewBase.prototype.first = function () {
            this._checkPrintContainer();
            this.page = 1;
        };
        ReportViewBase.prototype.prev = function () {
            this._checkPrintContainer();
            this.page--;
        };
        ReportViewBase.prototype.next = function () {
            this._checkPrintContainer();
            this.page++;
        };
        ReportViewBase.prototype.last = function () {
            this._checkPrintContainer();
            this.page = this._container.pageCount;
        };
        ReportViewBase.prototype.zoomIn = function (scale) {
            if (scale === void 0) { scale = 0.1; }
            this._checkPrintContainer();
            this._container.zoom += scale;
        };
        ReportViewBase.prototype.zoomOut = function (scale) {
            if (scale === void 0) { scale = 0.1; }
            this._checkPrintContainer();
            this._container.zoom -= scale;
        };
        ReportViewBase.prototype.fitToHeight = function () {
            this._checkPrintContainer();
            this._container.fitToHeight();
        };
        ReportViewBase.prototype.fitToPage = function () {
            this._checkPrintContainer();
            this._container.fitToPage();
        };
        ReportViewBase.prototype.fitToWidth = function () {
            this._checkPrintContainer();
            this._container.fitToWidth();
        };
        //-------------------------------------------------------------------------
        // private methods
        //-------------------------------------------------------------------------
        ReportViewBase.prototype.$_checkL = function () {
            var hm = null;
            var l = '';
            try {
                l = getL();
                hm = new dist.h(l);
            }
            catch (e) {
                error$1({ code: 200, stop: true, msg: licWarn(e) });
                return;
            }
            // enterpise 이거나 subscription, limited, evaluation 이면서 expired 되지 않아야 can make
            // todo: host check
            this._cm = (hm !== null)
                && (hm.validate([{ name: 'RealReport', lic: ['Enterprise'] }]) && dm(hm.lic.server))
                || (hm.validate([{ name: 'RealReport', lic: ['Subscription', 'Limited', 'Evaluation'] }])
                    && !hm.expired('expire', 1)
                    && dm(hm.lic.server));
            if (!this._cm) {
                error$1({ code: 200, stop: true, msg: licWarn() });
                return;
            }
        };
        return ReportViewBase;
    }());
    var ReportViewBase$1 = ReportViewBase;

    var BlobStream = /** @class */ (function () {
        function BlobStream() {
            this._blobstream = null;
            this._blob = null;
        }
        Object.defineProperty(BlobStream.prototype, "stream", {
            get: function () {
                if (!this._blobstream)
                    this._blobstream = new window['blobStream']();
                return this._blobstream;
            },
            enumerable: false,
            configurable: true
        });
        BlobStream.prototype.blob = function () {
            return __awaiter$1(this, void 0, void 0, function () {
                var _this = this;
                return __generator$1(this, function (_a) {
                    return [2 /*return*/, new Promise(function (resolve, reject) {
                            _this._blobstream.on('finish', function () {
                                _this._blob = _this._blobstream.toBlob('application/pdf');
                                _this._url = window.URL.createObjectURL(_this._blob);
                                resolve(_this._blobstream);
                            });
                        })];
                });
            });
        };
        BlobStream.prototype.open = function () {
            return __awaiter$1(this, void 0, void 0, function () {
                return __generator$1(this, function (_a) {
                    if (this._url)
                        window.open(this._url);
                    return [2 /*return*/];
                });
            });
        };
        BlobStream.prototype.url = function () {
            return this._url;
        };
        BlobStream.prototype.download = function (fileName) {
            return __awaiter$1(this, void 0, void 0, function () {
                var a;
                return __generator$1(this, function (_a) {
                    if (this._url) {
                        a = document.createElement('a');
                        document.body.appendChild(a);
                        a.href = this._url;
                        a.download = fileName;
                        a.style.position = 'fixed';
                        a.target = '_blank';
                        a.click();
                        document.body.removeChild(a);
                    }
                    return [2 /*return*/];
                });
            });
        };
        return BlobStream;
    }());

    var ZOOM_ERROR_MESSAGE = '페이지 배율 값이 100%인 경우만 내보내기가 가능합니다. 페이지 배율 값이 100%인지 확인해 주세요.';
    /**
     * RealReport Viewer
     */
    var ReportViewer = /** @class */ (function (_super) {
        __extends$1(ReportViewer, _super);
        //-------------------------------------------------------------------------
        // constructors
        //-------------------------------------------------------------------------
        function ReportViewer(container, reportForm, dataSet, options) {
            var _this = _super.call(this, container, options) || this;
            _this.reportForm = reportForm;
            _this.dataSet = dataSet;
            return _this;
        }
        Object.defineProperty(ReportViewer.prototype, "reportForm", {
            //-------------------------------------------------------------------------
            // properties
            //-------------------------------------------------------------------------
            get: function () {
                return this._reportForm;
            },
            set: function (v) {
                // todo: 이걸로 깨끗해 진다?
                if (this._report)
                    this._report = null;
                this._reportForm = v;
                this._report = new Report().load(v);
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(ReportViewer.prototype, "dataSet", {
            get: function () {
                return this._dataSet;
            },
            // todo: 이름은 같지만 서로 다른 데이터 셑이 있을 수 있다고 가정해야 하나?
            set: function (v) {
                if (this._reportDataProvider)
                    this._reportDataProvider = null;
                this._dataSet = v;
                this._reportDataProvider = new ReportDataProvider();
                /**
                 * https://github.com/realgrid/realreport/pull/430 에서 데이터 validation 처리
                 * 만약 데이터가 온전하지 않은 경우 load() 함수를 호출하지 않게 한다. */
                // console.log('set dataset: ', v);
                if (typeof v === 'object')
                    this._reportDataProvider.load(v);
            },
            enumerable: false,
            configurable: true
        });
        //-------------------------------------------------------------------------
        // public methods
        //-------------------------------------------------------------------------
        /**
         * container에 리포트를 preview로 렌더링 합니다.
         */
        ReportViewer.prototype.preview = function (options) {
            var _a;
            if (options === void 0) { options = { async: true, pageMark: true, noScroll: false }; }
            this._checkReport();
            var printOptions = __assign$1({ report: this._report, data: this._reportDataProvider, preview: true, id: this.containerId }, options);
            (_a = this._container) === null || _a === void 0 ? void 0 : _a.print(printOptions);
        };
        /**
         * 리포트를 PDF파일로 다운로드 합니다.
         * @param options PDFExportOptions
         */
        ReportViewer.prototype.exportPdf = function (options) {
            return __awaiter$1(this, void 0, void 0, function () {
                var fonts, filename, preview, streamClass, stream;
                return __generator$1(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            this._checkPrintContainer([
                                { is: this._container.zoom !== 1, errorParams: { code: 219, stop: true, msg: ZOOM_ERROR_MESSAGE } }
                            ]);
                            fonts = options.fonts, filename = options.filename, preview = options.preview;
                            streamClass = new BlobStream();
                            stream = streamClass.stream;
                            new PdfExporter().export(this._report, this._container.pages, fonts, stream);
                            return [4 /*yield*/, streamClass.blob()];
                        case 1:
                            _a.sent();
                            if (!preview) return [3 /*break*/, 3];
                            return [4 /*yield*/, streamClass.open()];
                        case 2:
                            _a.sent();
                            _a.label = 3;
                        case 3:
                            if (!filename) return [3 /*break*/, 5];
                            return [4 /*yield*/, streamClass.download(filename)];
                        case 4:
                            _a.sent();
                            _a.label = 5;
                        case 5: return [2 /*return*/, streamClass.stream];
                    }
                });
            });
        };
        /**
         * 이미지 내보내기 함수
         * @param imageOptions
         */
        ReportViewer.prototype.exportImage = function (imageOptions) {
            if (imageOptions === void 0) { imageOptions = IMG_EXPORT_DEFAULT_OPTIONS; }
            this._checkPrintContainer([
                { is: this._container.zoom !== 1, errorParams: { code: 219, stop: true, msg: ZOOM_ERROR_MESSAGE } }
            ]);
            new ImageExporter().export(this._report, this._container.pages, imageOptions);
        };
        /**
         * 문서 내보내기 함수
         * @param documentOptions
         */
        ReportViewer.prototype.exportDocument = function (documentOptions) {
            if (documentOptions === void 0) { documentOptions = DOC_EXPORT_DEFAULT_OPTIONS; }
            this._checkPrintContainer([
                { is: this._container.zoom !== 1, errorParams: { code: 219, stop: true, msg: ZOOM_ERROR_MESSAGE } }
            ]);
            new DocumentExporter().export(this._report, this._container.pages, documentOptions);
        };
        //-------------------------------------------------------------------------
        // private methods
        //-------------------------------------------------------------------------
        ReportViewer.prototype._checkReport = function () {
            // https://real-report.com/errors#216
            if (!this._report)
                error$1({ code: 216, stop: true, msg: 'RealReport did not load' });
        };
        return ReportViewer;
    }(ReportViewBase$1));

    /**
     * Grid에서 값 가져오는 클래스
     */
    var GridValues = /** @class */ (function () {
        function GridValues(grid) {
            this._grid = grid;
        }
        Object.defineProperty(GridValues.prototype, "values", {
            get: function () {
                var ret = [];
                var itemCount = this._grid.getItemCount();
                for (var index = 0; index < itemCount; index++) {
                    ret.push(this._grid.getDisplayValues(index, true));
                }
                // console.log(ret);
                return ret;
            },
            enumerable: false,
            configurable: true
        });
        return GridValues;
    }());

    /**
     * ReportItem 생성기
     */
    var GridReportItemLoader = /** @class */ (function () {
        function GridReportItemLoader() {
            this._itemCreator = {
                text: function (name) { return new TextItem(name); },
            };
        }
        /**
         *
         * @param item
         * @param source
         * @returns ReportItem
         */
        GridReportItemLoader.prototype._setItemPositions = function (item, source) {
            // console.log('_setItemPositions: ', item, source);
            if (item && source) {
                if (source.left)
                    item.setLeft(new Dimension(source.left));
                if (source.top)
                    item.setTop(new Dimension(source.top));
                if (source.right)
                    item.setRight(new Dimension(source.right));
                if (source.bottom)
                    item.setBottom(new Dimension(source.bottom));
            }
            return item;
        };
        /**
         * ReportItem 에 Style 속성 적용
         * @param item
         * @param source
         * @returns ReportItem
         */
        GridReportItemLoader.prototype._setItemProps = function (item, source) {
            this._setItemPositions(item, source);
            if (source.text)
                item.setProperty('text', source.text);
            if (source.value)
                item.setProperty('value', source.value);
            if (source.height)
                item.setProperty('height', source.height);
            if (source.prefix)
                item.setProperty('prefix', source.prefix);
            return item;
        };
        /**
         * ReportItem 에 Style 속성 적용
         * @param item
         * @param styles
         * @returns ReportItem
         */
        GridReportItemLoader.prototype._setItemStyles = function (item, styles) {
            if (item && styles) {
                for (var _i = 0, _a = Object.entries(styles); _i < _a.length; _i++) {
                    var _b = _a[_i], key = _b[0], value = _b[1];
                    // console.log('style: ', key, value);
                    item.setStyleProperty(key, value);
                }
            }
            return item;
        };
        GridReportItemLoader.prototype.createItem = function (src) {
            var _a;
            var type = (typeof src === 'string') ? src : ((_a = src.type) !== null && _a !== void 0 ? _a : 'text');
            var name = src.name;
            var creator = this._itemCreator[type];
            var item = creator && creator(name);
            this._setItemProps(item, src);
            if (src.styles)
                this._setItemStyles(item, src.styles);
            if (!item) {
                throw new Error('지원하지 않는 GridReportItem 입니다.');
            }
            return item;
        };
        GridReportItemLoader.prototype.createHichartSeries = function (chart, src) {
            throw new Error('지원하지 않는 GridReportItem 입니다.');
        };
        return GridReportItemLoader;
    }());

    /**
     * GridReport Column 관리자
     */
    var GridReportColumns = /** @class */ (function () {
        function GridReportColumns(reportLayout, gridLayout) {
            var dataColumns = gridLayout.getDataColumns(true);
            this._columns = dataColumns.filter(function (col) {
                var _a;
                return !((_a = reportLayout === null || reportLayout === void 0 ? void 0 : reportLayout.exclude) === null || _a === void 0 ? void 0 : _a.includes(col.name));
            });
        }
        Object.defineProperty(GridReportColumns.prototype, "count", {
            get: function () {
                return this._columns.length;
            },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(GridReportColumns.prototype, "columns", {
            get: function () {
                return this._columns;
            },
            enumerable: false,
            configurable: true
        });
        return GridReportColumns;
    }());

    /* eslint-disable @typescript-eslint/no-explicit-any */
    var defaultOptions = {
        zoom: 1,
        layout: {
            autoWidth: true,
        }
    };
    var itemLoader = new GridReportItemLoader();
    // export class GridView extends GridViewDummy {
    // public get view() : GridViewCore {
    //     return this._view;
    // }
    // }
    /**
     * GridreportViewer
     */
    var GridReportViewer = /** @class */ (function (_super) {
        __extends$1(GridReportViewer, _super);
        //-------------------------------------------------------------------------
        // constructors
        //-------------------------------------------------------------------------
        function GridReportViewer(container, grid, options) {
            if (options === void 0) { options = defaultOptions; }
            var _this = _super.call(this, container, options) || this;
            // for get protected _view;
            _this._grid = grid['_view'];
            _this._options = options;
            _this._gridValues = new GridValues(grid);
            _this.reportForm = {};
            if (options && options.paper) {
                // this._report.itempro
                _this._report.paper.orientation = options.paper.orientation || PaperOrientation.PORTRAIT;
            }
            /**
             * dataprovider
             * - TODO: 다양한 데이터 구조를 파악해야 한다.
             */
            _this.dataSet = {
                Data1: {
                    type: 'band',
                    values: _this._gridValues.values,
                }
            };
            // console.log('griddata: ', this.dataSet);
            // TODO: experimental
            var handler = {
                onReportItemAdded: function (report, item, index) {
                    // console.log('item added: ', item, index, item.parent.name);
                    // console.log('item added: ', item.name, index, item.parent.name);
                }
            };
            _this._report.addListener(handler);
            return _this;
        }
        //-------------------------------------------------------------------------
        // properties
        //-------------------------------------------------------------------------
        //-------------------------------------------------------------------------
        // public methods
        //-------------------------------------------------------------------------
        /**
         * 컨테이너에 미리보기 랜더링
         */
        GridReportViewer.prototype.preview = function (options) {
            if (options === void 0) { options = { async: false, pageMark: false, noScroll: true }; }
            this._prepare();
            _super.prototype.preview.call(this, options);
        };
        //-------------------------------------------------------------------------
        // private methods
        //-------------------------------------------------------------------------
        /**
         * 타이틀 또는 서브 타이틀 추가
         * @param title GridReportTitle 객체
         * @returns
         */
        GridReportViewer.prototype._addTitle = function (title) {
            if (!title)
                return;
            var text = itemLoader.createItem(title);
            this._report.page.reportHeader.add(text);
        };
        /**
         * 그리드 윗쪽 헤더 추가
         * @param header GridReportHeader 객체
         * @returns
         */
        GridReportViewer.prototype._addGridHeader = function (header) {
            if (!header)
                return;
            var container = new StackContainer('box');
            container.width = '100%';
            header.items.map(function (item) {
                var text = itemLoader.createItem(item);
                container.add(text);
            });
            this._report.page.body.itemsContainer.add(container);
        };
        /**
         * 페이지 헤더 추가.
         * @param header PageHeader 객체
         * @returns
         */
        GridReportViewer.prototype._addPageHeader = function (header) {
            var _this = this;
            if (!header)
                return;
            header.items.map(function (item) {
                var text = itemLoader.createItem(item);
                _this._report.page.pageHeader.add(text);
            });
        };
        /**
         * Layout 정보
         *   - visibleCount: number
         *   - getDataColumns(): DataColumn[]
         *   - headerRows: number
         */
        GridReportViewer.prototype._addGridTable = function () {
            var _this = this;
            var tableBand = new TableBand('table');
            var layout = this._grid.activeCellLayout;
            var dataColumns = new GridReportColumns(this._options.layout, layout);
            tableBand.colCount = dataColumns.count;
            tableBand.data = 'Data1';
            // console.log(dataColumns, dataColumns.length);
            /*
                TODO: experimental
                - 그리드 컬럼정보를 이용해 리포트 테이블 컬럼으로 변환하는 과정
                - 그리드 정보에서 스타일 가져오기 어려움.
                - 실험이 완료되는 대로 모듈화
             */
            var colIndex = 0;
            dataColumns.columns.forEach(function (col) {
                var _a;
                if (col.visible) {
                    // 필드 이름 대신 컬럼 이름으로 처리한다.
                    // 왜냐 하면 getDisplayValues()의 결과에 컬럼이름을 사용하기 때문
                    var colName = col.name;
                    var idx = colIndex++;
                    var text = col.header.text;
                    var header = new TextItem("col-header-".concat(idx));
                    header.text = text;
                    header.setChildProp('row', 0);
                    header.setChildProp('col', idx);
                    tableBand.header.add(header);
                    if ((_a = _this._options.layout) === null || _a === void 0 ? void 0 : _a.autoWidth) {
                        tableBand.columns.get(idx).width = col.width;
                    }
                    var hcell = tableBand.header.cells.items[idx];
                    hcell.setStyle('backgroundColor', 'rgb(228, 231, 235)');
                    var dataRow = new TextItem("col-data-item-".concat(idx));
                    dataRow.data = tableBand.data;
                    dataRow.value = colName;
                    dataRow.setChildProp('row', 0);
                    dataRow.setChildProp('col', idx);
                    tableBand.dataRow.add(dataRow);
                }
            });
            /**
             * 스타일 옵션
             * header & datarow style
             */
            if (dataColumns.count > 0) {
                // tableBand.header.height = 60;
                // 10픽셀로 테스트
                tableBand.header.cellStyles = {
                    paddingTop: '10px',
                };
                // tableBand.dataRow.height = 32;
                // 2픽셀로 테스트
                tableBand.dataRow.cellStyles = {
                    paddingTop: '2px'
                };
            }
            this._report.page.body.itemsContainer.add(tableBand);
        };
        GridReportViewer.prototype._prepare = function () {
            var options = this._options;
            // console.log(options);
            this._addTitle(options.title);
            this._addTitle(options.subTitle);
            this._addGridHeader(options.gridHeader);
            this._addGridTable();
            this._addPageHeader(options.pageHeader);
        };
        return GridReportViewer;
    }(ReportViewer));

    /**
     * RealReport Composite Viewer
     */
    var ReportCompositeViewer = /** @class */ (function (_super) {
        __extends$1(ReportCompositeViewer, _super);
        //-------------------------------------------------------------------------
        // constructors
        //-------------------------------------------------------------------------
        function ReportCompositeViewer(container, formSets, options) {
            var _this = _super.call(this, container, options) || this;
            _this._reportFormSets = formSets;
            return _this;
        }
        //-------------------------------------------------------------------------
        // properties
        //-------------------------------------------------------------------------
        //-------------------------------------------------------------------------
        // public methods
        //-------------------------------------------------------------------------
        /**
         * container에 formsset을 preview로 렌더링 합니다.
         * 매핑 정보
         *   - form -> report
         */
        ReportCompositeViewer.prototype.preview = function (options) {
            var _a;
            if (options === void 0) { options = { async: false, pageMark: false, noScroll: true }; }
            this._checkReportFormSet();
            this._reports = this._reportFormSets.map(function (set) {
                return {
                    report: new Report().load(set.form),
                    data: set.dataSet ? new ReportDataProvider().load(set.dataSet) : null,
                };
            });
            var printOptions = __assign$1({ report: this._reports, data: null, preview: true, id: this.containerId }, options);
            (_a = this._container) === null || _a === void 0 ? void 0 : _a.print(printOptions);
        };
        ReportCompositeViewer.prototype.exportPdf = function (options) {
            return __awaiter$1(this, void 0, void 0, function () {
                return __generator$1(this, function (_a) {
                    error$1({ code: 300, stop: false, msg: 'This feature is coming soon.' });
                    return [2 /*return*/];
                });
            });
        };
        ReportCompositeViewer.prototype.exportImage = function (imageOptions) {
            error$1({ code: 300, stop: false, msg: 'This feature is coming soon.' });
        };
        ReportCompositeViewer.prototype.exportDocument = function (documentOptions) {
            error$1({ code: 300, stop: false, msg: 'This feature is coming soon.' });
        };
        //-------------------------------------------------------------------------
        // private methods
        //-------------------------------------------------------------------------
        ReportCompositeViewer.prototype._checkReportFormSet = function () {
            // https://real-reaport.com/errors#218
            if (!this._reportFormSets || this._reportFormSets.length === 0) {
                error$1({ code: 218, stop: true, msg: 'ReportForm does not exist in the viewer' });
            }
        };
        return ReportCompositeViewer;
    }(ReportViewBase$1));

    exports.GridReportViewer = GridReportViewer;
    exports.ReportCompositeViewer = ReportCompositeViewer;
    exports.ReportViewer = ReportViewer;

    Object.defineProperty(exports, '__esModule', { value: true });

    return exports;

})({});
//# sourceMappingURL=realreport.js.map
